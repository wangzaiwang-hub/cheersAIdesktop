(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,291758,e=>{"use strict";let n,s,i;var r=e.i(563199),d=e.i(189299),l=e.i(449980);e.i(152567);var c=e.i(408767),t=e.i(772499),a=e.i(648883);let o=e=>{let{apiBaseUrl:n,appId:s}=e,{t:i}=(0,c.useTranslation)();return(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-y-2",children:[(0,r.jsxs)("div",{className:"mr-2 flex h-8 items-center rounded-lg border-[0.5px] border-components-input-border-active bg-components-input-bg-normal pl-1.5 pr-1 leading-5",children:[(0,r.jsx)("div",{className:"mr-0.5 h-5 shrink-0 rounded-md border border-divider-subtle px-1.5 text-[11px] text-text-tertiary",children:i("apiServer",{ns:"appApi"})}),(0,r.jsx)("div",{className:"w-fit truncate px-1 text-[13px] font-medium text-text-secondary sm:w-[248px]",children:n}),(0,r.jsx)("div",{className:"mx-1 h-[14px] w-[1px] bg-divider-regular"}),(0,r.jsx)(t.default,{content:n})]}),(0,r.jsx)("div",{className:"mr-2 flex h-8 items-center rounded-lg border-[0.5px] border-[#D1FADF] bg-[#ECFDF3] px-3 text-xs font-semibold text-[#039855]",children:i("ok",{ns:"appApi"})}),(0,r.jsx)(a.default,{className:"!h-8 shrink-0",appId:s})]})};var h=e.i(837699),x=e.i(268255),j=e.i(683257),p=e.i(922521),u=e.i(491234),_=e.i(648404),m=e.i(935139);let g=x.default.createContext({});function b(e){let n=x.default.useContext(g);return x.default.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}var f=e.i(182370),q=e.i(725968),y=e.i(876581),v=e.i(71216),k=e.i(782165),w=e.i(518836),T=e.i(777009),D=e.i(329512),I=e.i(425324),P=e.i(794085);function A(e){let{onFocus:n}=e,[s,i]=(0,x.useState)(!0),r=(0,I.useIsMounted)();return s?x.default.createElement(P.Hidden,{as:"button",type:"button",features:P.HiddenFeatures.Focusable,onFocus:e=>{e.preventDefault();let s,d=50;s=requestAnimationFrame(function e(){if(d--<=0){s&&cancelAnimationFrame(s);return}if(n()){if(cancelAnimationFrame(s),!r.current)return;i(!1);return}s=requestAnimationFrame(e)})}}):null}var R=e.i(455028),C=e.i(652038),S=e.i(692558),E=e.i(875880),G=e.i(858023);let B=x.createContext(null);function M(e){let{children:n}=e,s=x.useRef({groups:new Map,get(e,n){var s;let i=this.groups.get(e);i||(i=new Map,this.groups.set(e,i));let r=null!=(s=i.get(n))?s:0;return i.set(n,r+1),[Array.from(i.keys()).indexOf(n),function(){let e=i.get(n);e>1?i.set(n,e-1):i.delete(n)}]}});return x.createElement(B.Provider,{value:s},n)}function z(e){let n=x.useContext(B);if(!n)throw Error("You must wrap your component in a <StableCollection>");let s=x.useId(),[i,r]=n.current.get(e,s);return x.useEffect(()=>r,[]),i}var O=e.i(198136),U=((n=U||{})[n.Forwards=0]="Forwards",n[n.Backwards=1]="Backwards",n),N=((s=N||{})[s.Less=-1]="Less",s[s.Equal=0]="Equal",s[s.Greater=1]="Greater",s),L=((i=L||{})[i.SetSelectedIndex=0]="SetSelectedIndex",i[i.RegisterTab=1]="RegisterTab",i[i.UnregisterTab=2]="UnregisterTab",i[i.RegisterPanel=3]="RegisterPanel",i[i.UnregisterPanel=4]="UnregisterPanel",i);let W={0(e,n){var s;let i=(0,R.sortByDomNode)(e.tabs,e=>e.current),r=(0,R.sortByDomNode)(e.panels,e=>e.current),d=i.filter(e=>{var n;return!(null!=(n=e.current)&&n.hasAttribute("disabled"))}),l={...e,tabs:i,panels:r};if(n.index<0||n.index>i.length-1){let s=(0,C.match)(Math.sign(n.index-e.selectedIndex),{[-1]:()=>1,0:()=>(0,C.match)(Math.sign(n.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(0===d.length)return l;let r=(0,C.match)(s,{0:()=>i.indexOf(d[0]),1:()=>i.indexOf(d[d.length-1])});return{...l,selectedIndex:-1===r?e.selectedIndex:r}}let c=i.slice(0,n.index),t=[...i.slice(n.index),...c].find(e=>d.includes(e));if(!t)return l;let a=null!=(s=i.indexOf(t))?s:e.selectedIndex;return -1===a&&(a=e.selectedIndex),{...l,selectedIndex:a}},1(e,n){if(e.tabs.includes(n.tab))return e;let s=e.tabs[e.selectedIndex],i=(0,R.sortByDomNode)([...e.tabs,n.tab],e=>e.current),r=e.selectedIndex;return e.info.current.isControlled||-1===(r=i.indexOf(s))&&(r=e.selectedIndex),{...e,tabs:i,selectedIndex:r}},2:(e,n)=>({...e,tabs:e.tabs.filter(e=>e!==n.tab)}),3:(e,n)=>e.panels.includes(n.panel)?e:{...e,panels:(0,R.sortByDomNode)([...e.panels,n.panel],e=>e.current)},4:(e,n)=>({...e,panels:e.panels.filter(e=>e!==n.panel)})},X=(0,x.createContext)(null);function H(e){let n=(0,x.useContext)(X);if(null===n){let n=Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,H),n}return n}X.displayName="TabsDataContext";let $=(0,x.createContext)(null);function F(e){let n=(0,x.useContext)($);if(null===n){let n=Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,F),n}return n}function V(e,n){return(0,C.match)(n.type,W,e,n)}$.displayName="TabsActionsContext";let K=G.RenderFeatures.RenderStrategy|G.RenderFeatures.Static,Q=(0,G.forwardRefWithAs)(function(e,n){var s,i;let r=(0,x.useId)(),{id:d=`headlessui-tabs-tab-${r}`,disabled:l=!1,autoFocus:c=!1,...t}=e,{orientation:a,activation:o,selectedIndex:h,tabs:j,panels:p}=H("Tab"),u=F("Tab"),_=H("Tab"),[m,g]=(0,x.useState)(null),b=(0,x.useRef)(null),w=(0,D.useSyncRefs)(b,n,g);(0,k.useIsoMorphicEffect)(()=>u.registerTab(b),[u,b]);let I=z("tabs"),P=j.indexOf(b);-1===P&&(P=I);let A=P===h,B=(0,v.useEvent)(e=>{var n;let s=e();if(s===R.FocusResult.Success&&"auto"===o){let e=null==(n=(0,E.getOwnerDocument)(b))?void 0:n.activeElement,s=_.tabs.findIndex(n=>n.current===e);-1!==s&&u.change(s)}return s}),M=(0,v.useEvent)(e=>{let n=j.map(e=>e.current).filter(Boolean);if(e.key===O.Keys.Space||e.key===O.Keys.Enter){e.preventDefault(),e.stopPropagation(),u.change(P);return}switch(e.key){case O.Keys.Home:case O.Keys.PageUp:return e.preventDefault(),e.stopPropagation(),B(()=>(0,R.focusIn)(n,R.Focus.First));case O.Keys.End:case O.Keys.PageDown:return e.preventDefault(),e.stopPropagation(),B(()=>(0,R.focusIn)(n,R.Focus.Last))}if(B(()=>(0,C.match)(a,{vertical:()=>e.key===O.Keys.ArrowUp?(0,R.focusIn)(n,R.Focus.Previous|R.Focus.WrapAround):e.key===O.Keys.ArrowDown?(0,R.focusIn)(n,R.Focus.Next|R.Focus.WrapAround):R.FocusResult.Error,horizontal:()=>e.key===O.Keys.ArrowLeft?(0,R.focusIn)(n,R.Focus.Previous|R.Focus.WrapAround):e.key===O.Keys.ArrowRight?(0,R.focusIn)(n,R.Focus.Next|R.Focus.WrapAround):R.FocusResult.Error}))===R.FocusResult.Success)return e.preventDefault()}),U=(0,x.useRef)(!1),N=(0,v.useEvent)(()=>{var e;U.current||(U.current=!0,null==(e=b.current)||e.focus({preventScroll:!0}),u.change(P),(0,S.microTask)(()=>{U.current=!1}))}),L=(0,v.useEvent)(e=>{e.preventDefault()}),{isFocusVisible:W,focusProps:X}=(0,f.useFocusRing)({autoFocus:c}),{isHovered:$,hoverProps:V}=(0,q.useHover)({isDisabled:l}),{pressed:K,pressProps:Q}=(0,y.useActivePress)({disabled:l}),J=(0,x.useMemo)(()=>({selected:A,hover:$,active:K,focus:W,autofocus:c,disabled:l}),[A,$,W,K,c,l]),Y=(0,G.mergeProps)({ref:w,onKeyDown:M,onMouseDown:L,onClick:N,id:d,role:"tab",type:(0,T.useResolveButtonType)(e,m),"aria-controls":null==(i=null==(s=p[P])?void 0:s.current)?void 0:i.id,"aria-selected":A,tabIndex:A?0:-1,disabled:l||void 0,autoFocus:c},X,V,Q);return(0,G.useRender)()({ourProps:Y,theirProps:t,slot:J,defaultTag:"button",name:"Tabs.Tab"})}),J=(0,G.forwardRefWithAs)(function(e,n){let{defaultIndex:s=0,vertical:i=!1,manual:r=!1,onChange:d,selectedIndex:l=null,...c}=e,t=i?"vertical":"horizontal",a=r?"manual":"auto",o=null!==l,h=(0,w.useLatestValue)({isControlled:o}),j=(0,D.useSyncRefs)(n),[p,u]=(0,x.useReducer)(V,{info:h,selectedIndex:null!=l?l:s,tabs:[],panels:[]}),_=(0,x.useMemo)(()=>({selectedIndex:p.selectedIndex}),[p.selectedIndex]),m=(0,w.useLatestValue)(d||(()=>{})),g=(0,w.useLatestValue)(p.tabs),b=(0,x.useMemo)(()=>({orientation:t,activation:a,...p}),[t,a,p]),f=(0,v.useEvent)(e=>(u({type:1,tab:e}),()=>u({type:2,tab:e}))),q=(0,v.useEvent)(e=>(u({type:3,panel:e}),()=>u({type:4,panel:e}))),y=(0,v.useEvent)(e=>{T.current!==e&&m.current(e),o||u({type:0,index:e})}),T=(0,w.useLatestValue)(o?e.selectedIndex:p.selectedIndex),I=(0,x.useMemo)(()=>({registerTab:f,registerPanel:q,change:y}),[]);(0,k.useIsoMorphicEffect)(()=>{u({type:0,index:null!=l?l:s})},[l]),(0,k.useIsoMorphicEffect)(()=>{if(void 0===T.current||p.tabs.length<=0)return;let e=(0,R.sortByDomNode)(p.tabs,e=>e.current);e.some((e,n)=>p.tabs[n]!==e)&&y(e.indexOf(p.tabs[T.current]))});let P=(0,G.useRender)();return x.default.createElement(M,null,x.default.createElement($.Provider,{value:I},x.default.createElement(X.Provider,{value:b},b.tabs.length<=0&&x.default.createElement(A,{onFocus:()=>{var e,n;for(let s of g.current)if((null==(e=s.current)?void 0:e.tabIndex)===0)return null==(n=s.current)||n.focus(),!0;return!1}}),P({ourProps:{ref:j},theirProps:c,slot:_,defaultTag:"div",name:"Tabs"}))))}),Y=(0,G.forwardRefWithAs)(function(e,n){let{orientation:s,selectedIndex:i}=H("Tab.List"),r=(0,D.useSyncRefs)(n),d=(0,x.useMemo)(()=>({selectedIndex:i}),[i]);return(0,G.useRender)()({ourProps:{ref:r,role:"tablist","aria-orientation":s},theirProps:e,slot:d,defaultTag:"div",name:"Tabs.List"})}),Z=(0,G.forwardRefWithAs)(function(e,n){let{selectedIndex:s}=H("Tab.Panels"),i=(0,D.useSyncRefs)(n),r=(0,x.useMemo)(()=>({selectedIndex:s}),[s]);return(0,G.useRender)()({ourProps:{ref:i},theirProps:e,slot:r,defaultTag:"div",name:"Tabs.Panels"})}),ee=(0,G.forwardRefWithAs)(function(e,n){var s,i,r,d;let l=(0,x.useId)(),{id:c=`headlessui-tabs-panel-${l}`,tabIndex:t=0,...a}=e,{selectedIndex:o,tabs:h,panels:j}=H("Tab.Panel"),p=F("Tab.Panel"),u=(0,x.useRef)(null),_=(0,D.useSyncRefs)(u,n);(0,k.useIsoMorphicEffect)(()=>p.registerPanel(u),[p,u]);let m=z("panels"),g=j.indexOf(u);-1===g&&(g=m);let b=g===o,{isFocusVisible:q,focusProps:y}=(0,f.useFocusRing)(),v=(0,x.useMemo)(()=>({selected:b,focus:q}),[b,q]),w=(0,G.mergeProps)({ref:_,id:c,role:"tabpanel","aria-labelledby":null==(i=null==(s=h[g])?void 0:s.current)?void 0:i.id,tabIndex:b?t:-1},y),T=(0,G.useRender)();return b||null!=(r=a.unmount)&&!r||null!=(d=a.static)&&d?T({ourProps:w,theirProps:a,slot:v,defaultTag:"div",features:K,visible:b,name:"Tabs.Panel"}):x.default.createElement(P.Hidden,{"aria-hidden":"true",...w})}),en=Object.assign(Q,{Group:J,List:Y,Panels:Z,Panel:ee});async function es(e){return navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e):ei(e)}async function ei(e){let n=document.createElement("textarea");n.value=e,n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select();try{if(document.execCommand("copy"))return Promise.resolve();return Promise.reject(Error("document.execCommand failed"))}catch(e){var s;return Promise.reject((s=e)instanceof Error?s:Error(`Caught: ${String(s)}`))}finally{document.body.removeChild(n)}}let er={medium:"rounded-lg px-1.5 ring-1 ring-inset"},ed={emerald:{small:"text-emerald-500 dark:text-emerald-400",medium:"ring-emerald-300 dark:ring-emerald-400/30 bg-emerald-400/10 text-emerald-500 dark:text-emerald-400"},sky:{small:"text-sky-500",medium:"ring-sky-300 bg-sky-400/10 text-sky-500 dark:ring-sky-400/30 dark:bg-sky-400/10 dark:text-sky-400"},amber:{small:"text-amber-500",medium:"ring-amber-300 bg-amber-400/10 text-amber-500 dark:ring-amber-400/30 dark:bg-amber-400/10 dark:text-amber-400"},rose:{small:"text-red-500 dark:text-rose-500",medium:"ring-rose-200 bg-rose-50 text-red-500 dark:ring-rose-500/20 dark:bg-rose-400/10 dark:text-rose-400"},zinc:{small:"text-zinc-400 dark:text-zinc-500",medium:"ring-zinc-200 bg-zinc-50 text-zinc-500 dark:ring-zinc-500/20 dark:bg-zinc-400/10 dark:text-zinc-400"}},el={get:"emerald",post:"sky",put:"amber",delete:"rose"};function ec(e){let{children:n,variant:s="medium",color:i=el[n.toLowerCase()]??"emerald"}=e;return(0,r.jsx)("span",{className:(0,m.cn)("font-mono text-[0.625rem] font-semibold leading-6",er[s],ed[i][s]),children:n})}function et(e){return(0,r.jsxs)("svg",{viewBox:"0 0 20 20","aria-hidden":"true",...e,children:[(0,r.jsx)("path",{strokeWidth:"0",d:"M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"}),(0,r.jsx)("path",{fill:"none",strokeLinejoin:"round",d:"M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"})]})}function ea(e){let{code:n}=e,[s,i]=(0,x.useState)(0),d=s>0;return(0,x.useEffect)(()=>{if(s>0){let e=setTimeout(()=>i(0),1e3);return()=>{clearTimeout(e)}}},[s]),(0,r.jsxs)("button",{type:"button",className:(0,m.cn)("group/button absolute right-4 top-1.5 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100",d?"bg-emerald-400/10 ring-1 ring-inset ring-emerald-400/20":"hover:bg-white/7.5 dark:bg-white/2.5 bg-white/5 dark:hover:bg-white/5"),onClick:()=>{es(n).then(()=>{i(e=>e+1)})},children:[(0,r.jsxs)("span",{"aria-hidden":d,className:(0,m.cn)("pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300",d&&"-translate-y-1.5 opacity-0"),children:[(0,r.jsx)(et,{className:"h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"}),"Copy"]}),(0,r.jsx)("span",{"aria-hidden":!d,className:(0,m.cn)("pointer-events-none absolute inset-0 flex items-center justify-center text-emerald-400 transition duration-300",!d&&"translate-y-1.5 opacity-0"),children:"Copied!"})]})}function eo(e){let{tag:n,label:s}=e;return n||s?(0,r.jsxs)("div",{className:"border-b-white/7.5 bg-white/2.5 dark:bg-white/1 flex h-9 items-center gap-2 border-y border-t-transparent bg-zinc-900 px-4 dark:border-b-white/5",children:[n&&(0,r.jsx)("div",{className:"dark flex",children:(0,r.jsx)(ec,{variant:"small",children:n})}),n&&s&&(0,r.jsx)("span",{className:"h-0.5 w-0.5 rounded-full bg-zinc-500"}),s&&(0,r.jsx)("span",{className:"font-mono text-xs text-zinc-400",children:s})]}):null}function eh(e){let{tag:n,label:s,children:i,targetCode:d}=e,l=x.Children.toArray(i)[0];return(0,r.jsxs)("div",{className:"dark:bg-white/2.5 group",children:[(0,r.jsx)(eo,{tag:n,label:s}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("pre",{className:"overflow-x-auto p-4 text-xs text-white",children:d?.code?(0,r.jsx)("code",{children:d?.code}):l}),(0,r.jsx)(ea,{code:d?.code??l.props.children.props.children})]})]})}function ex(e){let{title:n,tabTitles:s,selectedIndex:i}=e,d=(s?.length??0)>1;return(0,r.jsxs)("div",{className:"flex min-h-[calc(theme(spacing.12)+1px)] flex-wrap items-start gap-x-4 border-b border-zinc-700 bg-zinc-800 px-4 dark:border-zinc-800 dark:bg-transparent",children:[n&&(0,r.jsx)("h3",{className:"mr-auto pt-3 text-xs font-semibold text-white",children:n}),d&&(0,r.jsx)(Y,{className:"-mb-px flex gap-4 text-xs font-medium",children:s.map((e,n)=>(0,r.jsx)(en,{className:(0,m.cn)("border-b py-3 transition focus:[&:not(:focus-visible)]:outline-none",n===i?"border-emerald-500 text-emerald-400":"border-transparent text-zinc-400 hover:text-zinc-300"),children:e},n))})]})}function ej(e){let{children:n,targetCode:s,...i}=e;return(s?.length??0)>1?(0,r.jsx)(Z,{children:s.map((e,n)=>(0,r.jsx)(ee,{children:(0,r.jsx)(eh,{...i,targetCode:e})},e.title||e.tag||n))}):(0,r.jsx)(eh,{...i,targetCode:s?.[0],children:n})}let ep=(0,x.createContext)(!1);function eu(e){let{children:n,title:s,targetCode:i,...d}=e,l="string"==typeof i?[{code:i}]:i,c=l?.map(e=>{let{title:n}=e;return n||"Code"})||[],t=function(e){let n,s,[i,r]=(0,x.useState)([]),[d,l]=(0,x.useState)(0),c=[...e||[]].sort((e,n)=>i.indexOf(n)-i.indexOf(e))[0],t=e?.indexOf(c)||0,a=-1===t?d:t;a!==d&&l(a);let{positionRef:o,preventLayoutShift:h}=(n=(0,x.useRef)(null),s=(0,x.useRef)(null),(0,x.useEffect)(()=>()=>{window.cancelAnimationFrame(s.current)},[]),{positionRef:n,preventLayoutShift(e){let i=n.current.getBoundingClientRect().top;e(),s.current=window.requestAnimationFrame(()=>{let e=n.current.getBoundingClientRect().top;window.scrollBy(0,e-i)})}});return{as:"div",ref:o,selectedIndex:d,onChange:n=>{h(()=>r(e[n]))}}}(c),a=c.length>1,o=a?t:{},h=a?{selectedIndex:t.selectedIndex,tabTitles:c}:{};return(0,r.jsx)(ep.Provider,{value:!0,children:(0,r.jsxs)(a?J:"div",{...o,className:"not-prose my-6 overflow-hidden rounded-2xl bg-zinc-900 shadow-md dark:ring-1 dark:ring-white/10",children:[(0,r.jsx)(ex,{title:s,...h}),(0,r.jsx)(ej,{...d,targetCode:l,children:n})]})})}let e_=function(e){let{url:n,method:s,title:i,name:d}=e,l="";switch(s){case"PUT":l="ring-amber-300 bg-amber-400/10 text-amber-500 dark:ring-amber-400/30 dark:bg-amber-400/10 dark:text-amber-400";break;case"DELETE":l="ring-rose-200 bg-rose-50 text-red-500 dark:ring-rose-500/20 dark:bg-rose-400/10 dark:text-rose-400";break;case"POST":l="ring-sky-300 bg-sky-400/10 text-sky-500 dark:ring-sky-400/30 dark:bg-sky-400/10 dark:text-sky-400";break;case"PATCH":l="ring-violet-300 bg-violet-400/10 text-violet-500 dark:ring-violet-400/30 dark:bg-violet-400/10 dark:text-violet-400";break;default:l="ring-emerald-300 dark:ring-emerald-400/30 bg-emerald-400/10 text-emerald-500 dark:text-emerald-400"}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{id:d?.replace(/^#/,""),className:"relative -top-28"}),(0,r.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,r.jsx)("span",{className:`rounded-lg px-1.5 font-mono text-[0.625rem] font-semibold leading-6 ring-1 ring-inset ${l}`,children:s}),(0,r.jsx)("span",{className:"font-mono text-xs text-zinc-400",children:n})]}),(0,r.jsx)("h2",{className:"mt-2 scroll-mt-32",children:(0,r.jsx)("a",{href:d,className:"group text-inherit no-underline hover:text-inherit",children:i})})]})};function em(e){let{children:n}=e;return(0,r.jsx)("div",{className:"grid grid-cols-1 items-start gap-x-16 gap-y-10 xl:!max-w-none xl:grid-cols-2",children:n})}function eg(e){let{children:n,sticky:s=!1}=e;return(0,r.jsx)("div",{className:(0,m.cn)("[&>:first-child]:mt-0 [&>:last-child]:mb-0",s&&"xl:sticky xl:top-24"),children:n})}function eb(e){let{children:n}=e;return(0,r.jsx)("div",{className:"my-6",children:(0,r.jsx)("ul",{role:"list",className:"m-0 max-w-[calc(theme(maxWidth.lg)-theme(spacing.8))] list-none divide-y divide-zinc-900/5 p-0 dark:divide-white/5",children:n})})}function ef(e){let{name:n,type:s,children:i}=e;return(0,r.jsx)("li",{className:"m-0 px-0 py-4 first:pt-0 last:pb-0",children:(0,r.jsxs)("dl",{className:"m-0 flex flex-wrap items-center gap-x-3 gap-y-2",children:[(0,r.jsx)("dt",{className:"sr-only",children:"Name"}),(0,r.jsx)("dd",{children:(0,r.jsx)("code",{children:n})}),(0,r.jsx)("dt",{className:"sr-only",children:"Type"}),(0,r.jsx)("dd",{className:"font-mono text-xs text-zinc-400 dark:text-zinc-500",children:s}),(0,r.jsx)("dt",{className:"sr-only",children:"Description"}),(0,r.jsx)("dd",{className:"w-full flex-none [&>:first-child]:mt-0 [&>:last-child]:mb-0",children:i})]})})}function eq(e){let n={a:"a",code:"code",h1:"h1",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...b(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{children:"Completion App API"}),"\n",(0,r.jsx)(n.p,{children:"The text generation application offers non-session support and is ideal for translation, article writing, summarization AI, and more."}),"\n",(0,r.jsxs)("div",{children:[(0,r.jsx)(n.h3,{children:"Base URL"}),(0,r.jsx)(eu,{title:"Code",targetCode:e.appDetail.api_base_url}),(0,r.jsx)(n.h3,{children:"Authentication"}),(0,r.jsxs)(n.p,{children:["The Service API uses ",(0,r.jsx)(n.code,{children:"API-Key"})," authentication.\n",(0,r.jsx)("i",{children:(0,r.jsx)(n.strong,{children:"Strongly recommend storing your API Key on the server-side, not shared or stored on the client-side, to avoid possible API-Key leakage that can lead to serious consequences."})})]}),(0,r.jsxs)(n.p,{children:["For all API requests, include your API Key in the ",(0,r.jsx)(n.code,{children:"Authorization"})," HTTP Header, as shown below:"]}),(0,r.jsx)(eu,{title:"Code",targetCode:"Authorization: Bearer {API_KEY}"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/completion-messages",method:"POST",title:"Create Completion Message",name:"#Create-Completion-Message"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Send a request to the text generation application."}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsxs)(ef,{name:"inputs",type:"object",children:[(0,r.jsxs)(n.p,{children:["Allows the entry of various variable values defined by the App.\nThe ",(0,r.jsx)(n.code,{children:"inputs"})," parameter contains multiple key/value pairs, with each key corresponding to a specific variable and each value being the specific value for that variable.\nThe text generation application requires at least one key/value pair to be inputted."]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"query"})," (string) Required\nThe input text, the content to be processed."]}),"\n"]})]},"inputs"),(0,r.jsxs)(ef,{name:"response_mode",type:"string",children:[(0,r.jsx)(n.p,{children:"The mode of response return, supporting:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"streaming"})," Streaming mode (recommended), implements a typewriter-like output through SSE (",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events",children:"Server-Sent Events"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"blocking"})," Blocking mode, returns result after execution is complete. (Requests may be interrupted if the process is long)\n",(0,r.jsx)("i",{children:"Due to Cloudflare restrictions, the request will be interrupted without a return after 100 seconds."})]}),"\n"]})]},"response_mode"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"User identifier, used to define the identity of the end-user, convenient for retrieval and statistics.\nThe rules are defined by the developer and need to ensure that the user identifier is unique within the application. The Service API does not share conversations created by the WebApp."})},"user"),(0,r.jsxs)(ef,{name:"files",type:"array[object]",children:[(0,r.jsx)(n.p,{children:"File list, suitable for inputting files combined with text understanding and answering questions, available only when the model supports Vision/Video capability."}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) Supported type:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," Supported types include: 'TXT', 'MD', 'MARKDOWN', 'MDX', 'PDF', 'HTML', 'XLSX', 'XLS', 'VTT', 'PROPERTIES', 'DOC', 'DOCX', 'CSV', 'EML', 'MSG', 'PPTX', 'PPT', 'XML', 'EPUB'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," Supported types include: 'JPG', 'JPEG', 'PNG', 'GIF', 'WEBP', 'SVG'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," Supported types include: 'MP3', 'M4A', 'WAV', 'WEBM', 'MPGA'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," Supported types include: 'MP4', 'MOV', 'MPEG', 'WEBM'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," Supported types include: other file types"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_method"})," (string) Transfer method:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"remote_url"}),": File URL."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"local_file"}),": Upload file."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," File URL. (Only when transfer method is ",(0,r.jsx)(n.code,{children:"remote_url"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"upload_file_id"})," Upload file ID. (Only when transfer method is ",(0,r.jsx)(n.code,{children:"local_file"}),")."]}),"\n"]})]},"files")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"response_mode"})," is ",(0,r.jsx)(n.code,{children:"blocking"}),", return a CompletionResponse object.\nWhen ",(0,r.jsx)(n.code,{children:"response_mode"})," is ",(0,r.jsx)(n.code,{children:"streaming"}),", return a ChunkCompletionResponse stream."]}),(0,r.jsx)(n.h3,{children:"ChatCompletionResponse"}),(0,r.jsxs)(n.p,{children:["Returns the complete App result, ",(0,r.jsx)(n.code,{children:"Content-Type"})," is ",(0,r.jsx)(n.code,{children:"application/json"}),"."]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) App mode, fixed as ",(0,r.jsx)(n.code,{children:"chat"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) Complete response content"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"metadata"})," (object) Metadata","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usage"})," (Usage) Model usage information"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) Citation and Attribution List"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Message creation timestamp, e.g., 1705395332"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"ChunkChatCompletionResponse"}),(0,r.jsxs)(n.p,{children:["Returns the stream chunks outputted by the App, ",(0,r.jsx)(n.code,{children:"Content-Type"})," is ",(0,r.jsx)(n.code,{children:"text/event-stream"}),".\nEach streaming chunk starts with ",(0,r.jsx)(n.code,{children:"data:"}),", separated by two newline characters ",(0,r.jsx)(n.code,{children:"\\n\\n"}),", as shown below:"]}),(0,r.jsx)(eu,{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'data: {"event": "message", "task_id": "900bbd43-dc0b-4383-a372-aa6e6c414227", "id": "663c5084-a254-4040-8ad3-51f2a3c1a77c", "answer": "Hi", "created_at": 1705398420}\\n\\n\n'})})}),(0,r.jsxs)(n.p,{children:["The structure of the streaming chunks varies depending on the ",(0,r.jsx)(n.code,{children:"event"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message"})," LLM returns text chunk event, i.e., the complete text is output in a chunked fashion.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) LLM returned text chunk content"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_end"})," Message end event, receiving this event means streaming has ended.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"metadata"})," (object) Metadata","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usage"})," (Usage) Model usage information"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) Citation and Attribution List"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message"})," TTS audio stream event, that is, speech synthesis output. The content is an audio block in Mp3 format, encoded as a base64 string. When playing, simply decode the base64 and feed it into the player. (This message is available only when auto-play is enabled)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the stop response interface below"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) The audio after speech synthesis, encoded in base64 text content, when playing, simply decode the base64 and feed it into the player"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp, e.g.: 1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message_end"})," TTS audio stream end event, receiving this event indicates the end of the audio stream.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the stop response interface below"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) The end event has no audio, so this is an empty string"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp, e.g.: 1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_replace"})," Message content replacement event.\nWhen output content moderation is enabled, if the content is flagged, then the message content will be replaced with a preset reply through this event.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) Replacement content (directly replaces all LLM reply text)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: error"}),"\nExceptions that occur during the streaming process will be output in the form of stream events, and reception of an error event will end the stream.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (int) HTTP status code"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"code"})," (string) Error code"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message"})," (string) Error message"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: ping"})," Ping event every 10 seconds to keep the connection alive."]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"404, Conversation does not exists"}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"invalid_param"}),", abnormal parameter input"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"app_unavailable"}),", App configuration unavailable"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"provider_not_initialize"}),", no available model credential configuration"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"provider_quota_exceeded"}),", model invocation quota insufficient"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"model_currently_not_support"}),", current model unavailable"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"completion_request_error"}),", text generation failed"]}),"\n",(0,r.jsx)(n.li,{children:"500, internal server error"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/completion-messages",targetCode:`curl -X POST '${e.appDetail.api_base_url}/completion-messages' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "inputs": {"query": "Hello, world!"},
  "response_mode": "streaming",
  "user": "abc-123"
}'`}),(0,r.jsx)(n.h3,{children:"Blocking Mode"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "event": "message",\n  "message_id": "9da23599-e713-473b-982c-4328d4f5c78a",\n  "mode": "completion",\n  "answer": "Hello World!...",\n  "metadata": {\n      "usage": {\n          "prompt_tokens": 1033,\n          "prompt_unit_price": "0.001",\n          "prompt_price_unit": "0.001",\n          "prompt_price": "0.0010330",\n          "completion_tokens": 128,\n          "completion_unit_price": "0.002",\n          "completion_price_unit": "0.001",\n          "completion_price": "0.0002560",\n          "total_tokens": 1161,\n          "total_price": "0.0012890",\n          "currency": "USD",\n          "latency": 0.7682376249867957\n      }\n  },\n  "created_at": 1705407629\n}\n'})})}),(0,r.jsx)(n.h3,{children:"Streaming Mode"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "answer": " I", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "answer": "\'m", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "answer": " glad", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "answer": " to", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "answer": " meet", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "answer": " you", "created_at": 1679586595}\n  data: {"event": "message_end", "id": "5e52ce04-874b-4d27-9045-b3bc80def685", "metadata": {"usage": {"prompt_tokens": 1033, "prompt_unit_price": "0.001", "prompt_price_unit": "0.001", "prompt_price": "0.0010330", "completion_tokens": 135, "completion_unit_price": "0.002", "completion_price_unit": "0.001", "completion_price": "0.0002700", "total_tokens": 1168, "total_price": "0.0013030", "currency": "USD", "latency": 1.381760165997548}}}\n  data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}\n  data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/upload",method:"POST",title:"File Upload",name:"#file-upload"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsxs)(n.p,{children:["Upload a file (currently only images are supported) for use when sending messages, enabling multimodal understanding of images and text.\nSupports png, jpg, jpeg, webp, gif formats.\n",(0,r.jsx)("i",{children:"Uploaded files are for use by the current end-user only."})]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.p,{children:["This interface requires a ",(0,r.jsx)(n.code,{children:"multipart/form-data"})," request."]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file"})," (File) Required\nThe file to be uploaded."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) Required\nUser identifier, defined by the developer's rules, must be unique within the application. The Service API does not share conversations created by the WebApp."]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsx)(n.p,{children:"After a successful upload, the server will return the file's ID and related information."}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (uuid) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) File name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"size"})," (int) File size (bytes)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"extension"})," (string) File extension"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mime_type"})," (string) File mime-type"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by"})," (uuid) End-user ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) Creation timestamp, e.g., 1705395332"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"no_file_uploaded"}),", a file must be provided"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"too_many_files"}),", currently only one file is accepted"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"unsupported_preview"}),", the file does not support preview"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"unsupported_estimate"}),", the file does not support estimation"]}),"\n",(0,r.jsxs)(n.li,{children:["413, ",(0,r.jsx)(n.code,{children:"file_too_large"}),", the file is too large"]}),"\n",(0,r.jsxs)(n.li,{children:["415, ",(0,r.jsx)(n.code,{children:"unsupported_file_type"}),", unsupported extension, currently only document files are accepted"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_connection_failed"}),", unable to connect to S3 service"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_permission_denied"}),", no permission to upload files to S3"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_file_too_large"}),", file exceeds S3 size limit"]}),"\n",(0,r.jsx)(n.li,{children:"500, internal server error"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"Request Example"}),(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/files/upload",targetCode:`curl -X POST '${e.appDetail.api_base_url}/files/upload' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=image/[png|jpeg|jpg|webp|gif]' \\
--form 'user=abc-123'`}),(0,r.jsx)(n.h3,{children:"Response Example"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "72fa9618-8f89-4a37-9b33-7e1178a24a67",\n  "name": "example.png",\n  "size": 1024,\n  "extension": "png",\n  "mime_type": "image/png",\n  "created_by": "6ad1ab0a-73ff-4ac1-b9e4-cdb312f71f13",\n  "created_at": 1577836800,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/:file_id/preview",method:"GET",title:"File Preview",name:"#file-preview"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Preview or download uploaded files. This endpoint allows you to access files that have been previously uploaded via the File Upload API."}),(0,r.jsx)("i",{children:"Files can only be accessed if they belong to messages within the requesting application."}),(0,r.jsx)(n.h3,{children:"Path Parameters"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_id"})," (string) Required\nThe unique identifier of the file to preview, obtained from the File Upload API response."]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Query Parameters"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"as_attachment"})," (boolean) Optional\nWhether to force download the file as an attachment. Default is ",(0,r.jsx)(n.code,{children:"false"})," (preview in browser)."]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsx)(n.p,{children:"Returns the file content with appropriate headers for browser display or download."}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Type"})," Set based on file mime type"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Length"})," File size in bytes (if available)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Disposition"}),' Set to "attachment" if ',(0,r.jsx)(n.code,{children:"as_attachment=true"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Cache-Control"})," Caching headers for performance"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Accept-Ranges"}),' Set to "bytes" for audio/video files']}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"invalid_param"}),", abnormal parameter input"]}),"\n",(0,r.jsxs)(n.li,{children:["403, ",(0,r.jsx)(n.code,{children:"file_access_denied"}),", file access denied or file does not belong to current application"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"file_not_found"}),", file not found or has been deleted"]}),"\n",(0,r.jsx)(n.li,{children:"500, internal server error"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"Request Example"}),(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/files/:file_id/preview",targetCode:`curl -X GET '${e.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(n.h3,{children:"Download as Attachment"}),(0,r.jsx)(eu,{title:"Download\nRequest",tag:"GET",label:"/files/:file_id/preview?as_attachment=true",targetCode:`curl -X GET '${e.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview?as_attachment=true' \\
--header 'Authorization: Bearer {api_key}' \\
--output downloaded_file.png`}),(0,r.jsx)(n.h3,{children:"Response Headers Example"}),(0,r.jsx)(eu,{title:"Response Headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"Content-Type: image/png\nContent-Length: 1024\nCache-Control: public, max-age=3600\n"})})}),(0,r.jsx)(n.h3,{children:"Download Response Headers"}),(0,r.jsx)(eu,{title:"Download Response Headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"Content-Type: image/png\nContent-Length: 1024\nContent-Disposition: attachment; filename*=UTF-8''example.png\nCache-Control: public, max-age=3600\n"})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/completion-messages/:task_id/stop",method:"POST",title:"Stop Generate",name:"#stop-generatebacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Only supported in streaming mode."}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, can be obtained from the streaming chunk return\nRequest Body"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) Required\nUser identifier, used to define the identity of the end-user, must be consistent with the user passed in the send message interface. The Service API does not share conversations created by the WebApp."]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"}),' (string) Always returns "success"']}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"Request Example"}),(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/completion-messages/:task_id/stop",targetCode:`curl -X POST '${e.appDetail.api_base_url}/completion-messages/:task_id/stop' \\
-H 'Authorization: Bearer {api_key}' \\
-H 'Content-Type: application/json' \\
--data-raw '{ "user": "abc-123"}'`}),(0,r.jsx)(n.h3,{children:"Response Example"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages/:message_id/feedbacks",method:"POST",title:"Message Feedback",name:"#feedbacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"End-users can provide feedback messages, facilitating application developers to optimize expected outputs."}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"message_id",type:"string",children:(0,r.jsx)(n.p,{children:"Message ID"})},"message_id")}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"rating",type:"string",children:(0,r.jsxs)(n.p,{children:["Upvote as ",(0,r.jsx)(n.code,{children:"like"}),", downvote as ",(0,r.jsx)(n.code,{children:"dislike"}),", revoke upvote as ",(0,r.jsx)(n.code,{children:"null"})]})},"rating"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"User identifier, defined by the developer's rules, must be unique within the application."})},"user"),(0,r.jsx)(ef,{name:"content",type:"string",children:(0,r.jsx)(n.p,{children:"The specific content of message feedback."})},"content")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"}),' (string) Always returns "success"']}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/messages/:message_id/feedbacks",targetCode:`curl -X POST '${e.appDetail.api_base_url}/messages/:message_id/feedbacks \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "rating": "like",
  "user": "abc-123",
  "content": "message feedback information"
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/app/feedbacks",method:"GET",title:"Get feedbacks of application",name:"#app-feedbacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Get application's feedbacks."}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"page",type:"string",children:(0,r.jsx)(n.p,{children:"（optional）pagination，default：1"})},"page")}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"limit",type:"string",children:(0,r.jsx)(n.p,{children:"（optional） records per page default：20"})},"limit")}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (List) return apps feedback list."]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/app/feedbacks",targetCode:`curl -X GET '${e.appDetail.api_base_url}/app/feedbacks?page=1&limit=20'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'  {\n      "data": [\n          {\n              "id": "8c0fbed8-e2f9-49ff-9f0e-15a35bdd0e25",\n              "app_id": "f252d396-fe48-450e-94ec-e184218e7346",\n              "conversation_id": "2397604b-9deb-430e-b285-4726e51fd62d",\n              "message_id": "709c0b0f-0a96-4a4e-91a4-ec0889937b11",\n              "rating": "like",\n              "content": "message feedback information-3",\n              "from_source": "user",\n              "from_end_user_id": "74286412-9a1a-42c1-929c-01edb1d381d5",\n              "from_account_id": null,\n              "created_at": "2025-04-24T09:24:38",\n              "updated_at": "2025-04-24T09:24:38"\n          }\n      ]\n  }\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/text-to-audio",method:"POST",title:"Text to Audio",name:"#audio"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Text to speech."}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"message_id",type:"str",children:(0,r.jsx)(n.p,{children:"For text messages generated by Dify, simply pass the generated message-id directly. The backend will use the message-id to look up the corresponding content and synthesize the voice information directly. If both message_id and text are provided simultaneously, the message_id is given priority."})},"message_id"),(0,r.jsx)(ef,{name:"text",type:"str",children:(0,r.jsx)(n.p,{children:"Speech generated content."})},"text"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"The user identifier, defined by the developer, must ensure uniqueness within the app."})},"user")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/text-to-audio",targetCode:`curl -o text-to-audio.mp3 -X POST '${e.appDetail.api_base_url}/text-to-audio' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290",
  "text": "Hello Dify",
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "Content-Type": "audio/wav"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/info",method:"GET",title:"Get Application Basic Information",name:"#info"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Used to get basic information about this application"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) application name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) application description"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tags"})," (array[string]) application tags"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) application mode"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"author_name"})," (string) author name"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/info",targetCode:`curl -X GET '${e.appDetail.api_base_url}/info' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "My App",\n  "description": "This is my app.",\n  "tags": [\n    "tag1",\n    "tag2"\n  ],\n  "mode": "chat",\n  "author_name": "Dify"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/parameters",method:"GET",title:"Get Application Parameters Information",name:"#parameters"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Used at the start of entering the page to obtain information such as features, input parameter names, types, and default values."}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"opening_statement"})," (string) Opening statement"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"suggested_questions"})," (array[string]) List of suggested questions for the opening"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"suggested_questions_after_answer"})," (object) Suggest questions after enabling the answer.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"speech_to_text"})," (object) Speech to text","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resource"})," (object) Citation and Attribution","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"annotation_reply"})," (object) Annotation reply","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user_input_form"})," (array[object]) User input form configuration","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text-input"})," (object) Text input control","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) Variable display label name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) Variable ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) Whether it is required"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) Default value"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"paragraph"})," (object) Paragraph text input control","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) Variable display label name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) Variable ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) Whether it is required"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) Default value"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"select"})," (object) Dropdown control","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) Variable display label name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) Variable ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) Whether it is required"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) Default value"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"options"})," (array[string]) Option values"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_upload"})," (object) File upload configuration","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," (object) Document settings\nCurrently only supports document types: ",(0,r.jsx)(n.code,{children:"txt"}),", ",(0,r.jsx)(n.code,{children:"md"}),", ",(0,r.jsx)(n.code,{children:"markdown"}),", ",(0,r.jsx)(n.code,{children:"pdf"}),", ",(0,r.jsx)(n.code,{children:"html"}),", ",(0,r.jsx)(n.code,{children:"xlsx"}),", ",(0,r.jsx)(n.code,{children:"xls"}),", ",(0,r.jsx)(n.code,{children:"docx"}),", ",(0,r.jsx)(n.code,{children:"csv"}),", ",(0,r.jsx)(n.code,{children:"eml"}),", ",(0,r.jsx)(n.code,{children:"msg"}),", ",(0,r.jsx)(n.code,{children:"pptx"}),", ",(0,r.jsx)(n.code,{children:"ppt"}),", ",(0,r.jsx)(n.code,{children:"xml"}),", ",(0,r.jsx)(n.code,{children:"epub"}),".","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Document number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," (object) Image settings\nCurrently only supports image types: ",(0,r.jsx)(n.code,{children:"png"}),", ",(0,r.jsx)(n.code,{children:"jpg"}),", ",(0,r.jsx)(n.code,{children:"jpeg"}),", ",(0,r.jsx)(n.code,{children:"webp"}),", ",(0,r.jsx)(n.code,{children:"gif"}),".","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Image number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (object) Audio settings\nCurrently only supports audio types: ",(0,r.jsx)(n.code,{children:"mp3"}),", ",(0,r.jsx)(n.code,{children:"m4a"}),", ",(0,r.jsx)(n.code,{children:"wav"}),", ",(0,r.jsx)(n.code,{children:"webm"}),", ",(0,r.jsx)(n.code,{children:"amr"}),".","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Audio number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," (object) Video settings\nCurrently only supports video types: ",(0,r.jsx)(n.code,{children:"mp4"}),", ",(0,r.jsx)(n.code,{children:"mov"}),", ",(0,r.jsx)(n.code,{children:"mpeg"}),", ",(0,r.jsx)(n.code,{children:"mpga"}),".","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Video number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," (object) Custom settings","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Custom number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"system_parameters"})," (object) System parameters","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_size_limit"})," (int) Document upload size limit (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image_file_size_limit"})," (int) Image file upload size limit (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio_file_size_limit"})," (int) Audio file upload size limit (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video_file_size_limit"})," (int) Video file upload size limit (MB)"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/parameters",targetCode:` curl -X GET '${e.appDetail.api_base_url}/parameters'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "opening_statement": "Hello!",\n  "suggested_questions_after_answer": {\n      "enabled": true\n  },\n  "speech_to_text": {\n      "enabled": true\n  },\n  "retriever_resource": {\n      "enabled": true\n  },\n  "annotation_reply": {\n      "enabled": true\n  },\n  "user_input_form": [\n      {\n          "paragraph": {\n              "label": "Query",\n              "variable": "query",\n              "required": true,\n              "default": ""\n          }\n      }\n  ],\n  "file_upload": {\n      "image": {\n          "enabled": false,\n          "number_limits": 3,\n          "detail": "high",\n          "transfer_methods": [\n              "remote_url",\n              "local_file"\n          ]\n      }\n  },\n  "system_parameters": {\n      "file_size_limit": 15,\n      "image_file_size_limit": 10,\n      "audio_file_size_limit": 50,\n      "video_file_size_limit": 100\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/site",method:"GET",title:"Get Application WebApp Settings",name:"#site"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Used to get the WebApp settings of the application."}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) WebApp name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"chat_color_theme"})," (string) Chat color theme, in hex format"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"chat_color_theme_inverted"})," (bool) Whether the chat color theme is inverted"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_type"})," (string) Icon type, ",(0,r.jsx)(n.code,{children:"emoji"})," - emoji, ",(0,r.jsx)(n.code,{children:"image"})," - picture"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon"})," (string) Icon. If it's ",(0,r.jsx)(n.code,{children:"emoji"})," type, it's an emoji symbol; if it's ",(0,r.jsx)(n.code,{children:"image"})," type, it's an image URL."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_background"})," (string) Background color in hex format"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_url"})," (string) Icon URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) Description"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"copyright"})," (string) Copyright information"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"privacy_policy"})," (string) Privacy policy link"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom_disclaimer"})," (string) Custom disclaimer"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default_language"})," (string) Default language"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"show_workflow_steps"})," (bool) Whether to show workflow details"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"use_icon_as_answer_icon"})," (bool) Whether to replace 🤖 in chat with the WebApp icon"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/site",targetCode:`curl -X GET '${e.appDetail.api_base_url}/site' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "title": "My App",\n  "chat_color_theme": "#ff4a4a",\n  "chat_color_theme_inverted": false,\n  "icon_type": "emoji",\n  "icon": "😄",\n  "icon_background": "#FFEAD5",\n  "icon_url": null,\n  "description": "This is my app.",\n  "copyright": "all rights reserved",\n  "privacy_policy": "",\n  "custom_disclaimer": "All generated by AI",\n  "default_language": "en-US",\n  "show_workflow_steps": false,\n  "use_icon_as_answer_icon": false,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{})]})}function ey(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...b(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(eq,{...e})}):eq(e)}function ev(e){let n={a:"a",code:"code",h1:"h1",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...b(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{children:"Completion アプリ API"}),"\n",(0,r.jsx)(n.p,{children:"テキスト生成アプリケーションはセッションレスをサポートし、翻訳、記事作成、要約 AI 等に最適です。"}),"\n",(0,r.jsxs)("div",{children:[(0,r.jsx)(n.h3,{children:"ベース URL"}),(0,r.jsx)(eu,{title:"コード",targetCode:e.appDetail.api_base_url}),(0,r.jsx)(n.h3,{children:"認証"}),(0,r.jsxs)(n.p,{children:["サービス API は ",(0,r.jsx)(n.code,{children:"API-Key"})," 認証を使用します。\n",(0,r.jsx)("i",{children:(0,r.jsx)(n.strong,{children:"API キーの漏洩による重大な結果を避けるため、API キーはサーバーサイドに保存し、クライアントサイドでは共有や保存しないことを強く推奨します。"})})]}),(0,r.jsxs)(n.p,{children:["すべての API リクエストで、以下のように ",(0,r.jsx)(n.code,{children:"Authorization"})," HTTP ヘッダーに API キーを含めてください："]}),(0,r.jsx)(eu,{title:"コード",targetCode:"Authorization: Bearer {API_KEY}"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/completion-messages",method:"POST",title:"完了メッセージの作成",name:"#Create-Completion-Message"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"テキスト生成アプリケーションにリクエストを送信します。"}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(eb,{children:[(0,r.jsxs)(ef,{name:"inputs",type:"object",children:[(0,r.jsxs)(n.p,{children:["アプリで定義された各種変数値を入力できます。\n",(0,r.jsx)(n.code,{children:"inputs"}),"パラメータには複数のキー/値ペアが含まれ、各キーは特定の変数に対応し、各値はその変数の具体的な値となります。\nテキスト生成アプリケーションでは、少なくとも1つのキー/値ペアの入力が必要です。"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"query"})," (string) 必須\n入力テキスト、処理される内容。"]}),"\n"]})]},"inputs"),(0,r.jsxs)(ef,{name:"response_mode",type:"string",children:[(0,r.jsx)(n.p,{children:"レスポンス返却モード、以下をサポート："}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"streaming"})," ストリーミングモード（推奨）、SSE（",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events",children:"Server-Sent Events"}),"）によるタイプライター風の出力を実装。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"blocking"})," ブロッキングモード、実行完了後に結果を返却。（処理が長い場合はリクエストが中断される可能性があります）\n",(0,r.jsx)("i",{children:"Cloudflareの制限により、100秒後に返却なしで中断されます。"})]}),"\n"]})]},"response_mode"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子、エンドユーザーの身元を定義し、取得や統計に使用します。\nアプリケーション内で開発者が一意に定義する必要があります。"})},"user"),(0,r.jsxs)(ef,{name:"files",type:"array[object]",children:[(0,r.jsx)(n.p,{children:"ファイルリスト、モデルが Vision/Video 機能をサポートしている場合に限り、ファイルをテキスト理解および質問応答に組み合わせて入力するのに適しています。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) サポートされるタイプ：","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," サポートされるタイプには以下が含まれます：'TXT', 'MD', 'MARKDOWN', 'MDX', 'PDF', 'HTML', 'XLSX', 'XLS', 'VTT', 'PROPERTIES', 'DOC', 'DOCX', 'CSV', 'EML', 'MSG', 'PPTX', 'PPT', 'XML', 'EPUB'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," サポートされるタイプには以下が含まれます：'JPG', 'JPEG', 'PNG', 'GIF', 'WEBP', 'SVG'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," サポートされるタイプには以下が含まれます：'MP3', 'M4A', 'WAV', 'WEBM', 'MPGA'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," サポートされるタイプには以下が含まれます：'MP4', 'MOV', 'MPEG', 'WEBM'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," サポートされるタイプには以下が含まれます：その他のファイルタイプ"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_method"})," (string) 転送方法:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"remote_url"}),": ファイルのURL。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"local_file"}),": ファイルをアップロード。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," ファイルのURL。（転送方法が ",(0,r.jsx)(n.code,{children:"remote_url"})," の場合のみ）。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"upload_file_id"})," アップロードされたファイルID。（転送方法が ",(0,r.jsx)(n.code,{children:"local_file"})," の場合のみ）。"]}),"\n"]})]},"files")]}),(0,r.jsx)(n.h3,{children:"レスポンス"}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"response_mode"}),"が",(0,r.jsx)(n.code,{children:"blocking"}),"の場合、CompletionResponseオブジェクトを返却します。\n",(0,r.jsx)(n.code,{children:"response_mode"}),"が",(0,r.jsx)(n.code,{children:"streaming"}),"の場合、ChunkCompletionResponseストリームを返却します。"]}),(0,r.jsx)(n.h3,{children:"ChatCompletionResponse"}),(0,r.jsxs)(n.p,{children:["アプリの完全な結果を返却、",(0,r.jsx)(n.code,{children:"Content-Type"}),"は",(0,r.jsx)(n.code,{children:"application/json"}),"です。"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) アプリモード、固定で",(0,r.jsx)(n.code,{children:"chat"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) 完全な応答内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"metadata"})," (object) メタデータ","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usage"})," (Usage) モデル使用情報"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) 引用と帰属のリスト"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) メッセージ作成タイムスタンプ、例：1705395332"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"ChunkChatCompletionResponse"}),(0,r.jsxs)(n.p,{children:["アプリが出力するストリームチャンクを返却、",(0,r.jsx)(n.code,{children:"Content-Type"}),"は",(0,r.jsx)(n.code,{children:"text/event-stream"}),"です。\n各ストリーミングチャンクは",(0,r.jsx)(n.code,{children:"data:"}),"で始まり、2つの改行文字",(0,r.jsx)(n.code,{children:"\\n\\n"}),"で区切られます："]}),(0,r.jsx)(eu,{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'data: {"event": "message", "task_id": "900bbd43-dc0b-4383-a372-aa6e6c414227", "id": "663c5084-a254-4040-8ad3-51f2a3c1a77c", "answer": "Hi", "created_at": 1705398420}\\n\\n\n'})})}),(0,r.jsxs)(n.p,{children:["ストリーミングチャンクの構造は",(0,r.jsx)(n.code,{children:"event"}),"によって異なります："]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message"})," LLMがテキストチャンクを返すイベント、つまり完全なテキストがチャンク形式で出力されます。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエストの追跡と以下の生成停止APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) LLMが返したテキストチャンクの内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_end"})," メッセージ終了イベント、このイベントを受信するとストリーミングが終了したことを意味します。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエストの追跡と以下の生成停止APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"metadata"})," (object) メタデータ","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usage"})," (Usage) モデル使用情報"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) 引用と帰属のリスト"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message"})," TTS音声ストリームイベント、つまり音声合成出力。内容はMp3形式の音声ブロックで、base64文字列としてエンコードされています。再生時は単にbase64をデコードしてプレーヤーに供給するだけです。（このメッセージは自動再生が有効な場合のみ利用可能）","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエストの追跡と以下の応答停止インターフェースに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 音声合成後の音声、base64テキストコンテンツとしてエンコード、再生時は単にbase64をデコードしてプレーヤーに供給"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message_end"})," TTS音声ストリーム終了イベント、このイベントを受信すると音声ストリームが終了したことを示します。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエストの追跡と以下の応答停止インターフェースに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 終了イベントには音声がないため、空文字列"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_replace"})," メッセージ内容置換イベント。\n出力内容のモデレーションが有効な場合、コンテンツがフラグ付けされると、このイベントを通じてメッセージ内容が事前設定された返信に置き換えられます。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエストの追跡と以下の生成停止APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) 置換内容（LLMの返信テキストすべてを直接置換）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: error"}),"\nストリーミング処理中に発生した例外は、ストリームイベントの形式で出力され、エラーイベントを受信するとストリームが終了します。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエストの追跡と以下の生成停止APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (int) HTTPステータスコード"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"code"})," (string) エラーコード"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message"})," (string) エラーメッセージ"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: ping"})," 接続を維持するため10秒ごとのPingイベント。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"エラー"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"404, 会話が存在しません"}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"invalid_param"}),", パラメータ入力異常"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"app_unavailable"}),", アプリ設定が利用できません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"provider_not_initialize"}),", 利用可能なモデル認証情報設定がありません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"provider_quota_exceeded"}),", モデル呼び出しクォータ不足"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"model_currently_not_support"}),", 現在のモデルは利用できません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"completion_request_error"}),", テキスト生成に失敗しました"]}),"\n",(0,r.jsx)(n.li,{children:"500, 内部サーバーエラー"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/completion-messages",targetCode:`curl -X POST '${e.appDetail.api_base_url}/completion-messages' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "inputs": {"query": "Hello, world!"},
  "response_mode": "streaming",
  "user": "abc-123"
}'`}),(0,r.jsx)(n.h3,{children:"ブロッキングモード"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "event": "message",\n  "message_id": "9da23599-e713-473b-982c-4328d4f5c78a",\n  "mode": "completion",\n  "answer": "Hello World!...",\n  "metadata": {\n      "usage": {\n          "prompt_tokens": 1033,\n          "prompt_unit_price": "0.001",\n          "prompt_price_unit": "0.001",\n          "prompt_price": "0.0010330",\n          "completion_tokens": 128,\n          "completion_unit_price": "0.002",\n          "completion_price_unit": "0.001",\n          "completion_price": "0.0002560",\n          "total_tokens": 1161,\n          "total_price": "0.0012890",\n          "currency": "USD",\n          "latency": 0.7682376249867957\n      }\n  },\n  "created_at": 1705407629\n}\n'})})}),(0,r.jsx)(n.h3,{children:"ストリーミングモード"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "answer": " I", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "answer": "\'m", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "answer": " glad", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "answer": " to", "created_at": 1679586595}\n  data: {"event": "message", "message_id" : "5ad4cb98-f0c7-4085-b384-88c403be6290", "answer": " meet", "created_at": 1679586595}\n  data: {"event": "message", "message_id" : "5ad4cb98-f0c7-4085-b384-88c403be6290", "answer": " you", "created_at": 1679586595}\n  data: {"event": "message_end", "id": "5e52ce04-874b-4d27-9045-b3bc80def685", "metadata": {"usage": {"prompt_tokens": 1033, "prompt_unit_price": "0.001", "prompt_price_unit": "0.001", "prompt_price": "0.0010330", "completion_tokens": 135, "completion_unit_price": "0.002", "completion_price_unit": "0.001", "completion_price": "0.0002700", "total_tokens": 1168, "total_price": "0.0013030", "currency": "USD", "latency": 1.381760165997548}}}\n  data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}\n  data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/upload",method:"POST",title:"ファイルアップロード",name:"#file-upload"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsxs)(n.p,{children:["メッセージ送信時に使用するファイル（現在は画像のみ対応）をアップロードし、画像とテキストのマルチモーダルな理解を可能にします。\npng、jpg、jpeg、webp、gif 形式に対応しています。\n",(0,r.jsx)("i",{children:"アップロードされたファイルは、現在のエンドユーザーのみが使用できます。"})]}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(n.p,{children:["このインターフェースは",(0,r.jsx)(n.code,{children:"multipart/form-data"}),"リクエストが必要です。"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file"})," (File) 必須\nアップロードするファイル。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) 必須\n開発者のルールで定義されたユーザー識別子。アプリケーション内で一意である必要があります。サービス API は WebApp によって作成された会話を共有しません。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"レスポンス"}),(0,r.jsx)(n.p,{children:"アップロードが成功すると、サーバーはファイルの ID と関連情報を返します。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (uuid) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) ファイル名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"size"})," (int) ファイルサイズ（バイト）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"extension"})," (string) ファイル拡張子"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mime_type"})," (string) ファイルの MIME タイプ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by"})," (uuid) エンドユーザーID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"エラー"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"no_file_uploaded"}),", ファイルを提供する必要があります"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"too_many_files"}),", 現在は 1 つのファイルのみ受け付けています"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"unsupported_preview"}),", ファイルがプレビューに対応していません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"unsupported_estimate"}),", ファイルが推定に対応していません"]}),"\n",(0,r.jsxs)(n.li,{children:["413, ",(0,r.jsx)(n.code,{children:"file_too_large"}),", ファイルが大きすぎます"]}),"\n",(0,r.jsxs)(n.li,{children:["415, ",(0,r.jsx)(n.code,{children:"unsupported_file_type"}),", サポートされていない拡張子です。現在はドキュメントファイルのみ受け付けています"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_connection_failed"}),", S3 サービスに接続できません"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_permission_denied"}),", S3 へのファイルアップロード権限がありません"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_file_too_large"}),", ファイルが S3 のサイズ制限を超えています"]}),"\n",(0,r.jsx)(n.li,{children:"500, 内部サーバーエラー"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"リクエスト例"}),(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/files/upload",targetCode:`curl -X POST '${e.appDetail.api_base_url}/files/upload' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=image/[png|jpeg|jpg|webp|gif]' \\
--form 'user=abc-123'`}),(0,r.jsx)(n.h3,{children:"レスポンス例"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "72fa9618-8f89-4a37-9b33-7e1178a24a67",\n  "name": "example.png",\n  "size": 1024,\n  "extension": "png",\n  "mime_type": "image/png",\n  "created_by": "6ad1ab0a-73ff-4ac1-b9e4-cdb312f71f13",\n  "created_at": 1577836800,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/:file_id/preview",method:"GET",title:"ファイルプレビュー",name:"#file-preview"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"アップロードされたファイルをプレビューまたはダウンロードします。このエンドポイントを使用すると、以前にファイルアップロード API でアップロードされたファイルにアクセスできます。"}),(0,r.jsx)("i",{children:"ファイルは、リクエストしているアプリケーションのメッセージ範囲内にある場合のみアクセス可能です。"}),(0,r.jsx)(n.h3,{children:"パスパラメータ"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_id"})," (string) 必須\nプレビューするファイルの一意識別子。ファイルアップロード API レスポンスから取得します。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"クエリパラメータ"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"as_attachment"})," (boolean) オプション\nファイルを添付ファイルとして強制ダウンロードするかどうか。デフォルトは ",(0,r.jsx)(n.code,{children:"false"}),"（ブラウザでプレビュー）。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"レスポンス"}),(0,r.jsx)(n.p,{children:"ブラウザ表示またはダウンロード用の適切なヘッダー付きでファイル内容を返します。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Type"})," ファイル MIME タイプに基づいて設定"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Length"})," ファイルサイズ（バイト、利用可能な場合）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Disposition"})," ",(0,r.jsx)(n.code,{children:"as_attachment=true"}),' の場合は "attachment" に設定']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Cache-Control"})," パフォーマンス向上のためのキャッシュヘッダー"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Accept-Ranges"}),' 音声/動画ファイルの場合は "bytes" に設定']}),"\n"]}),(0,r.jsx)(n.h3,{children:"エラー"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"invalid_param"}),", パラメータ入力異常"]}),"\n",(0,r.jsxs)(n.li,{children:["403, ",(0,r.jsx)(n.code,{children:"file_access_denied"}),", ファイルアクセス拒否またはファイルが現在のアプリケーションに属していません"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"file_not_found"}),", ファイルが見つからないか削除されています"]}),"\n",(0,r.jsx)(n.li,{children:"500, サーバー内部エラー"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"リクエスト例"}),(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/files/:file_id/preview",targetCode:`curl -X GET '${e.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(n.h3,{children:"添付ファイルとしてダウンロード"}),(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/files/:file_id/preview",targetCode:`curl -X GET '${e.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview?as_attachment=true' \\
--header 'Authorization: Bearer {api_key}' \\
--output downloaded_file.png`}),(0,r.jsx)(n.h3,{children:"レスポンスヘッダー例"}),(0,r.jsx)(eu,{title:"Response Headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"Content-Type: image/png\nContent-Length: 1024\nCache-Control: public, max-age=3600\n"})})}),(0,r.jsx)(n.h3,{children:"ファイルダウンロードレスポンスヘッダー"}),(0,r.jsx)(eu,{title:"Response Headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"Content-Type: image/png\nContent-Length: 1024\nContent-Disposition: attachment; filename*=UTF-8''example.png\nCache-Control: public, max-age=3600\n"})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/completion-messages/:task_id/stop",method:"POST",title:"生成の停止",name:"#stop-generatebacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"ストリーミングモードでのみサポートされています。"}),(0,r.jsx)(n.h3,{children:"パス"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスク ID、ストリーミングチャンクの返信から取得可能\nリクエストボディ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) 必須\nユーザー識別子。エンドユーザーの身元を定義するために使用され、メッセージ送信インターフェースで渡されたユーザーと一致する必要があります。サービス API は WebApp によって作成された会話を共有しません。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"レスポンス"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"}),' (string) 常に"success"を返します']}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"リクエスト例"}),(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/completion-messages/:task_id/stop",targetCode:`curl -X POST '${e.appDetail.api_base_url}/completion-messages/:task_id/stop' \\
-H 'Authorization: Bearer {api_key}' \\
-H 'Content-Type: application/json' \\
--data-raw '{ "user": "abc-123"}'`}),(0,r.jsx)(n.h3,{children:"レスポンス例"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages/:message_id/feedbacks",method:"POST",title:"メッセージフィードバック",name:"#feedbacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"エンドユーザーはフィードバックメッセージを提供でき、アプリケーション開発者が期待される出力を最適化するのに役立ちます。"}),(0,r.jsx)(n.h3,{children:"パス"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"message_id",type:"string",children:(0,r.jsx)(n.p,{children:"メッセージID"})},"message_id")}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"rating",type:"string",children:(0,r.jsxs)(n.p,{children:["高評価は",(0,r.jsx)(n.code,{children:"like"}),"、低評価は",(0,r.jsx)(n.code,{children:"dislike"}),"、高評価の取り消しは",(0,r.jsx)(n.code,{children:"null"})]})},"rating"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"開発者のルールで定義されたユーザー識別子。アプリケーション内で一意である必要があります。"})},"user"),(0,r.jsx)(ef,{name:"content",type:"string",children:(0,r.jsx)(n.p,{children:"メッセージのフィードバックです。"})},"content")]}),(0,r.jsx)(n.h3,{children:"レスポンス"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"}),' (string) 常に"success"を返します']}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/messages/:message_id/feedbacks",targetCode:`curl -X POST '${e.appDetail.api_base_url}/messages/:message_id/feedbacks \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "rating": "like",
  "user": "abc-123",
  "content": "message feedback information"
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/app/feedbacks",method:"GET",title:"アプリのメッセージの「いいね」とフィードバックを取得",name:"#app-feedbacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"アプリのエンドユーザーからのフィードバックや「いいね」を取得します。"}),(0,r.jsx)(n.h3,{children:"クエリ"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"page",type:"string",children:(0,r.jsx)(n.p,{children:"（任意）ページ番号。デフォルト値：1"})},"page")}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"limit",type:"string",children:(0,r.jsx)(n.p,{children:"（任意）1ページあたりの件数。デフォルト値：20"})},"limit")}),(0,r.jsx)(n.h3,{children:"レスポンス"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (リスト) このアプリの「いいね」とフィードバックの一覧を返します。"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/app/feedbacks",targetCode:`curl -X GET '${e.appDetail.api_base_url}/app/feedbacks?page=1&limit=20'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'    {\n    "data": [\n        {\n            "id": "8c0fbed8-e2f9-49ff-9f0e-15a35bdd0e25",\n            "app_id": "f252d396-fe48-450e-94ec-e184218e7346",\n            "conversation_id": "2397604b-9deb-430e-b285-4726e51fd62d",\n            "message_id": "709c0b0f-0a96-4a4e-91a4-ec0889937b11",\n            "rating": "like",\n            "content": "message feedback information-3",\n            "from_source": "user",\n            "from_end_user_id": "74286412-9a1a-42c1-929c-01edb1d381d5",\n            "from_account_id": null,\n            "created_at": "2025-04-24T09:24:38",\n            "updated_at": "2025-04-24T09:24:38"\n        }\n    ]\n    }\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/text-to-audio",method:"POST",title:"テキストから音声",name:"#text-to-audio"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"テキストを音声に変換します。"}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"message_id",type:"str",children:(0,r.jsx)(n.p,{children:"Difyが生成したテキストメッセージの場合、生成されたmessage-idを直接渡すだけです。バックエンドはmessage-idを使用して対応するコンテンツを検索し、音声情報を直接合成します。message_idとtextの両方が同時に提供された場合、message_idが優先されます。"})},"message_id"),(0,r.jsx)(ef,{name:"text",type:"str",children:(0,r.jsx)(n.p,{children:"音声生成コンテンツ。"})},"text"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"開発者が定義したユーザー識別子。アプリ内で一意性を確保する必要があります。"})},"user")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/text-to-audio",targetCode:`curl -o text-to-audio.mp3 -X POST '${e.appDetail.api_base_url}/text-to-audio' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290",
  "text": "Hello Dify",
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "Content-Type": "audio/wav"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/info",method:"GET",title:"アプリケーションの基本情報を取得",name:"#info"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"このアプリケーションの基本情報を取得するために使用されます"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) アプリケーションの名前"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) アプリケーションの説明"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tags"})," (array[string]) アプリケーションのタグ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) アプリケーションのモード"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"author_name"})," (string) 作者の名前"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/info",targetCode:`curl -X GET '${e.appDetail.api_base_url}/info' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "My App",\n  "description": "This is my app.",\n  "tags": [\n    "tag1",\n    "tag2"\n  ],\n  "mode": "chat",\n  "author_name": "Dify"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/parameters",method:"GET",title:"アプリケーションのパラメータ情報を取得",name:"#parameters"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"ページ開始時に、機能、入力パラメータ名、タイプ、デフォルト値などの情報を取得するために使用されます。"}),(0,r.jsx)(n.h3,{children:"レスポンス"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"opening_statement"})," (string) 開始文"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"suggested_questions"})," (array[string]) 開始時の提案質問リスト"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"suggested_questions_after_answer"})," (object) 回答後の提案質問を有効にします。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"speech_to_text"})," (object) 音声からテキスト","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resource"})," (object) 引用と帰属","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"annotation_reply"})," (object) 注釈付き返信","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user_input_form"})," (array[object]) ユーザー入力フォーム設定","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text-input"})," (object) テキスト入力コントロール","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 変数表示ラベル名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 変数ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 必須かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) デフォルト値"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"paragraph"})," (object) 段落テキスト入力コントロール","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 変数表示ラベル名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 変数ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 必須かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) デフォルト値"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"select"})," (object) ドロップダウンコントロール","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 変数表示ラベル名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 変数ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 必須かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) デフォルト値"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"options"})," (array[string]) オプション値"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_upload"})," (object) ファイルアップロード設定","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," (object) ドキュメント設定\n現在サポートされているドキュメントタイプ：",(0,r.jsx)(n.code,{children:"txt"}),", ",(0,r.jsx)(n.code,{children:"md"}),", ",(0,r.jsx)(n.code,{children:"markdown"}),", ",(0,r.jsx)(n.code,{children:"pdf"}),", ",(0,r.jsx)(n.code,{children:"html"}),", ",(0,r.jsx)(n.code,{children:"xlsx"}),", ",(0,r.jsx)(n.code,{children:"xls"}),", ",(0,r.jsx)(n.code,{children:"docx"}),", ",(0,r.jsx)(n.code,{children:"csv"}),", ",(0,r.jsx)(n.code,{children:"eml"}),", ",(0,r.jsx)(n.code,{children:"msg"}),", ",(0,r.jsx)(n.code,{children:"pptx"}),", ",(0,r.jsx)(n.code,{children:"ppt"}),", ",(0,r.jsx)(n.code,{children:"xml"}),", ",(0,r.jsx)(n.code,{children:"epub"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) ドキュメント数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," (object) 画像設定\n現在サポートされている画像タイプ：",(0,r.jsx)(n.code,{children:"png"}),", ",(0,r.jsx)(n.code,{children:"jpg"}),", ",(0,r.jsx)(n.code,{children:"jpeg"}),", ",(0,r.jsx)(n.code,{children:"webp"}),", ",(0,r.jsx)(n.code,{children:"gif"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 画像数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (object) オーディオ設定\n現在サポートされているオーディオタイプ：",(0,r.jsx)(n.code,{children:"mp3"}),", ",(0,r.jsx)(n.code,{children:"m4a"}),", ",(0,r.jsx)(n.code,{children:"wav"}),", ",(0,r.jsx)(n.code,{children:"webm"}),", ",(0,r.jsx)(n.code,{children:"amr"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) オーディオ数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," (object) ビデオ設定\n現在サポートされているビデオタイプ：",(0,r.jsx)(n.code,{children:"mp4"}),", ",(0,r.jsx)(n.code,{children:"mov"}),", ",(0,r.jsx)(n.code,{children:"mpeg"}),", ",(0,r.jsx)(n.code,{children:"mpga"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) ビデオ数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," (object) カスタム設定","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) カスタム数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"system_parameters"})," (object) システムパラメータ","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_size_limit"})," (int) ドキュメントアップロードサイズ制限（MB）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image_file_size_limit"})," (int) 画像ファイルアップロードサイズ制限（MB）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio_file_size_limit"})," (int) 音声ファイルアップロードサイズ制限（MB）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video_file_size_limit"})," (int) 動画ファイルアップロードサイズ制限（MB）"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/parameters",targetCode:` curl -X GET '${e.appDetail.api_base_url}/parameters'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "opening_statement": "Hello!",\n  "suggested_questions_after_answer": {\n      "enabled": true\n  },\n  "speech_to_text": {\n      "enabled": true\n  },\n  "retriever_resource": {\n      "enabled": true\n  },\n  "annotation_reply": {\n      "enabled": true\n  },\n  "user_input_form": [\n      {\n          "paragraph": {\n              "label": "Query",\n              "variable": "query",\n              "required": true,\n              "default": ""\n          }\n      }\n  ],\n  "file_upload": {\n      "image": {\n          "enabled": false,\n          "number_limits": 3,\n          "detail": "high",\n          "transfer_methods": [\n              "remote_url",\n              "local_file"\n          ]\n      }\n  },\n  "system_parameters": {\n      "file_size_limit": 15,\n      "image_file_size_limit": 10,\n      "audio_file_size_limit": 50,\n      "video_file_size_limit": 100\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/site",method:"GET",title:"アプリのWebApp設定を取得",name:"#site"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"アプリの WebApp 設定を取得するために使用します。"}),(0,r.jsx)(n.h3,{children:"レスポンス"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) WebApp 名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"chat_color_theme"})," (string) チャットの色テーマ、16 進数形式"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"chat_color_theme_inverted"})," (bool) チャットの色テーマを反転するかどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_type"})," (string) アイコンタイプ、",(0,r.jsx)(n.code,{children:"emoji"}),"-絵文字、",(0,r.jsx)(n.code,{children:"image"}),"-画像"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon"})," (string) アイコン。",(0,r.jsx)(n.code,{children:"emoji"}),"タイプの場合は絵文字、",(0,r.jsx)(n.code,{children:"image"}),"タイプの場合は画像 URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_background"})," (string) 16 進数形式の背景色"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_url"})," (string) アイコンの URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 説明"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"copyright"})," (string) 著作権情報"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"privacy_policy"})," (string) プライバシーポリシーのリンク"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom_disclaimer"})," (string) カスタム免責事項"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default_language"})," (string) デフォルト言語"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"show_workflow_steps"})," (bool) ワークフローの詳細を表示するかどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"use_icon_as_answer_icon"})," (bool) WebApp のアイコンをチャット内の🤖に置き換えるかどうか"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/site",targetCode:`curl -X GET '${e.appDetail.api_base_url}/site' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "title": "My App",\n  "chat_color_theme": "#ff4a4a",\n  "chat_color_theme_inverted": false,\n  "icon_type": "emoji",\n  "icon": "😄",\n  "icon_background": "#FFEAD5",\n  "icon_url": null,\n  "description": "This is my app.",\n  "copyright": "all rights reserved",\n  "privacy_policy": "",\n  "custom_disclaimer": "All generated by AI",\n  "default_language": "en-US",\n  "show_workflow_steps": false,\n  "use_icon_as_answer_icon": false,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{})]})}function ek(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...b(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(ev,{...e})}):ev(e)}function ew(e){let n={a:"a",code:"code",h1:"h1",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...b(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{children:"文本生成型应用 API"}),"\n",(0,r.jsx)(n.p,{children:"文本生成应用无会话支持，适合用于翻译/文章写作/总结 AI 等等。"}),"\n",(0,r.jsxs)("div",{children:[(0,r.jsx)(n.h3,{children:"基础 URL"}),(0,r.jsx)(eu,{title:"Code",targetCode:e.appDetail.api_base_url}),(0,r.jsx)(n.h3,{children:"鉴权"}),(0,r.jsxs)(n.p,{children:["Service API 使用 ",(0,r.jsx)(n.code,{children:"API-Key"})," 进行鉴权。\n",(0,r.jsx)("i",{children:(0,r.jsxs)(n.strong,{children:["强烈建议开发者把 ",(0,r.jsx)(n.code,{children:"API-Key"})," 放在后端存储，而非分享或者放在客户端存储，以免 ",(0,r.jsx)(n.code,{children:"API-Key"})," 泄露，导致财产损失。"]})}),"\n所有 API 请求都应在 ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"Authorization"})})," HTTP Header 中包含您的 ",(0,r.jsx)(n.code,{children:"API-Key"}),"，如下所示："]}),(0,r.jsx)(eu,{title:"Code",targetCode:"Authorization: Bearer {API_KEY}"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/completion-messages",method:"POST",title:"发送消息",name:"#Create-Completion-Message"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"发送请求给文本生成型应用。"}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsxs)(ef,{name:"inputs",type:"object",children:[(0,r.jsx)(n.p,{children:"(选填)允许传入 App 定义的各变量值。\ninputs 参数包含了多组键值对（Key/Value pairs），每组的键对应一个特定变量，每组的值则是该变量的具体值。\n文本生成型应用要求至少传入一组键值对。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"query"})," (string) 必填\n用户输入的文本内容。"]}),"\n"]})]},"inputs"),(0,r.jsx)(ef,{name:"response_mode",type:"string",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"streaming"})," 流式模式（推荐）。基于 SSE（",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events",children:"Server-Sent Events"})}),"）实现类似打字机输出方式的流式返回。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"blocking"})," 阻塞模式，等待执行完毕后返回结果。（请求若流程较长可能会被中断）。\n",(0,r.jsx)("i",{children:"由于 Cloudflare 限制，请求会在 100 秒超时无返回后中断。"})]}),"\n"]})},"response_mode"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，用于定义终端用户的身份，方便检索、统计。\n由开发者定义规则，需保证用户标识在应用内唯一。"})},"user"),(0,r.jsxs)(ef,{name:"files",type:"array[object]",children:[(0,r.jsx)(n.p,{children:"文件列表，适用于传入文件结合文本理解并回答问题，仅当模型支持 Vision/Video 能力时可用。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) 支持类型：","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," 具体类型包含：'TXT', 'MD', 'MARKDOWN', 'MDX', 'PDF', 'HTML', 'XLSX', 'XLS', 'VTT', 'PROPERTIES', 'DOC', 'DOCX', 'CSV', 'EML', 'MSG', 'PPTX', 'PPT', 'XML', 'EPUB'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," 具体类型包含：'JPG', 'JPEG', 'PNG', 'GIF', 'WEBP', 'SVG'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," 具体类型包含：'MP3', 'M4A', 'WAV', 'WEBM', 'MPGA'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," 具体类型包含：'MP4', 'MOV', 'MPEG', 'WEBM'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," 具体类型包含：其他文件类型"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_method"})," (string)  传递方式:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"remote_url"}),": 文件地址。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"local_file"}),": 上传文件。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," 文件地址。（仅当传递方式为 ",(0,r.jsx)(n.code,{children:"remote_url"})," 时）。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"upload_file_id"})," 上传文件 ID。（仅当传递方式为 ",(0,r.jsx)(n.code,{children:"local_file "}),"时）。"]}),"\n"]})]},"files")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(eb,{children:[(0,r.jsxs)(n.p,{children:["当 ",(0,r.jsx)(n.code,{children:"response_mode"})," 为 ",(0,r.jsx)(n.code,{children:"blocking"})," 时，返回 ChatCompletionResponse object。\n当 ",(0,r.jsx)(n.code,{children:"response_mode"})," 为 ",(0,r.jsx)(n.code,{children:"streaming"}),"时，返回 ChunkChatCompletionResponse object 流式序列。"]}),(0,r.jsx)(n.h3,{children:"ChatCompletionResponse"}),(0,r.jsxs)(n.p,{children:["返回完整的 App 结果，",(0,r.jsx)(n.code,{children:"Content-Type"})," 为 ",(0,r.jsx)(n.code,{children:"application/json"}),"。"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) App 模式，固定为 chat"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) 完整回复内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"metadata"})," (object) 元数据","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usage"})," (Usage) 模型用量信息"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) 引用和归属分段列表"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 消息创建时间戳，如：1705395332"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"ChunkChatCompletionResponse"}),(0,r.jsxs)(n.p,{children:["返回 App 输出的流式块，",(0,r.jsx)(n.code,{children:"Content-Type"})," 为 ",(0,r.jsx)(n.code,{children:"text/event-stream"}),"。\n每个流式块均为 data: 开头，块之间以 ",(0,r.jsx)(n.code,{children:"\\n\\n"})," 即两个换行符分隔，如下所示："]}),(0,r.jsx)(eu,{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'data: {"event": "message", "task_id": "900bbd43-dc0b-4383-a372-aa6e6c414227", "id": "663c5084-a254-4040-8ad3-51f2a3c1a77c", "answer": "Hi", "created_at": 1705398420}\\n\\n\n'})})}),(0,r.jsxs)(n.p,{children:["流式块中根据 ",(0,r.jsx)(n.code,{children:"event"})," 不同，结构也不同："]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message"})," LLM 返回文本块事件，即：完整的文本以分块的方式输出。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) LLM 返回文本块内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳，如：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_end"})," 消息结束事件，收到此事件则代表文本流式返回结束。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"metadata"})," (object) 元数据","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usage"})," (Usage) 模型用量信息"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) 引用和归属分段列表"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message"})," TTS 音频流事件，即：语音合成输出。内容是Mp3格式的音频块，使用 base64 编码后的字符串，播放的时候直接解码即可。(开启自动播放才有此消息)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 语音合成之后的音频块使用 Base64 编码之后的文本内容，播放的时候直接 base64 解码送入播放器即可"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳，如：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message_end"})," TTS 音频流结束事件，收到这个事件表示音频流返回结束。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 结束事件是没有音频的，所以这里是空字符串"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳，如：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_replace"})," 消息内容替换事件。\n开启内容审查和审查输出内容时，若命中了审查条件，则会通过此事件替换消息内容为预设回复。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) 替换内容（直接替换 LLM 所有回复文本）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳，如：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: error"}),"\n流式输出过程中出现的异常会以 stream event 形式输出，收到异常事件后即结束。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (int) HTTP 状态码"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"code"})," (string) 错误码"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message"})," (string) 错误消息"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: ping"})," 每 10s 一次的 ping 事件，保持连接存活。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"404，对话不存在"}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"invalid_param"}),"，传入参数异常"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"app_unavailable"}),"，App 配置不可用"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"provider_not_initialize"}),"，无可用模型凭据配置"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"provider_quota_exceeded"}),"，模型调用额度不足"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"model_currently_not_support"}),"，当前模型不可用"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"completion_request_error"}),"，文本生成失败"]}),"\n",(0,r.jsx)(n.li,{children:"500，服务内部异常"}),"\n"]})]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/completion-messages",targetCode:`curl -X POST '${e.appDetail.api_base_url}/completion-messages' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "inputs": {"query": "Hello, world!"},
  "response_mode": "streaming",
  "user": "abc-123"
}'`}),(0,r.jsx)(n.h3,{children:"blocking"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "0b089b9a-24d9-48cc-94f8-762677276261",\n  "answer": "how are you?",\n  "created_at": 1679586667\n}\n'})})}),(0,r.jsx)(n.h3,{children:"streaming"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'  data: {"id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "answer": " I", "created_at": 1679586595}\n  data: {"id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "answer": " I", "created_at": 1679586595}\n  data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}\n  data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/upload",method:"POST",title:"上传文件",name:"#files-upload"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsxs)(n.p,{children:["上传文件（目前仅支持图片）并在发送消息时使用，可实现图文多模态理解。\n支持 png, jpg, jpeg, webp, gif 格式。\n",(0,r.jsx)("i",{children:"上传的文件仅供当前终端用户使用。"})]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.p,{children:["该接口需使用  ",(0,r.jsx)(n.code,{children:"multipart/form-data"})," 进行请求。"]}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"file",type:"file",children:(0,r.jsx)(n.p,{children:"要上传的文件。"})},"file"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，用于定义终端用户的身份，必须和发送消息接口传入 user 保持一致。"})},"user")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsx)(n.p,{children:"成功上传后，服务器会返回文件的 ID 和相关信息。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (uuid) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 文件名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"size"})," (int) 文件大小（byte）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"extension"})," (string) 文件后缀"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mime_type"})," (string) 文件 mime-type"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by"})," (uuid) 上传人 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 上传时间"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"no_file_uploaded"}),"，必须提供文件"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"too_many_files"}),"，目前只接受一个文件"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"unsupported_preview"}),"，该文件不支持预览"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"unsupported_estimate"}),"，该文件不支持估算"]}),"\n",(0,r.jsxs)(n.li,{children:["413，",(0,r.jsx)(n.code,{children:"file_too_large"}),"，文件太大"]}),"\n",(0,r.jsxs)(n.li,{children:["415，",(0,r.jsx)(n.code,{children:"unsupported_file_type"}),"，不支持的扩展名，当前只接受文档类文件"]}),"\n",(0,r.jsxs)(n.li,{children:["503，",(0,r.jsx)(n.code,{children:"s3_connection_failed"}),"，无法连接到 S3 服务"]}),"\n",(0,r.jsxs)(n.li,{children:["503，",(0,r.jsx)(n.code,{children:"s3_permission_denied"}),"，无权限上传文件到 S3"]}),"\n",(0,r.jsxs)(n.li,{children:["503，",(0,r.jsx)(n.code,{children:"s3_file_too_large"}),"，文件超出 S3 大小限制"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/files/upload",targetCode:`curl -X POST '${e.appDetail.api_base_url}/files/upload' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=image/[png|jpeg|jpg|webp|gif]' \\
--form 'user=abc-123'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "72fa9618-8f89-4a37-9b33-7e1178a24a67",\n  "name": "example.png",\n  "size": 1024,\n  "extension": "png",\n  "mime_type": "image/png",\n  "created_by": 123,\n  "created_at": 1577836800,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/:file_id/preview",method:"GET",title:"文件预览",name:"#file-preview"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"预览或下载已上传的文件。此端点允许您访问先前通过文件上传 API 上传的文件。"}),(0,r.jsx)("i",{children:"文件只能在属于请求应用程序的消息范围内访问。"}),(0,r.jsx)(n.h3,{children:"路径参数"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_id"})," (string) 必需\n要预览的文件的唯一标识符，从文件上传 API 响应中获得。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"查询参数"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"as_attachment"})," (boolean) 可选\n是否强制将文件作为附件下载。默认为 ",(0,r.jsx)(n.code,{children:"false"}),"（在浏览器中预览）。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"响应"}),(0,r.jsx)(n.p,{children:"返回带有适当浏览器显示或下载标头的文件内容。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Type"})," 根据文件 MIME 类型设置"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Length"})," 文件大小（以字节为单位，如果可用）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Disposition"})," 如果 ",(0,r.jsx)(n.code,{children:"as_attachment=true"}),' 则设置为 "attachment"']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Cache-Control"})," 用于性能的缓存标头"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Accept-Ranges"}),' 对于音频/视频文件设置为 "bytes"']}),"\n"]}),(0,r.jsx)(n.h3,{children:"错误"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"invalid_param"}),", 参数输入异常"]}),"\n",(0,r.jsxs)(n.li,{children:["403, ",(0,r.jsx)(n.code,{children:"file_access_denied"}),", 文件访问被拒绝或文件不属于当前应用程序"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"file_not_found"}),", 文件未找到或已被删除"]}),"\n",(0,r.jsx)(n.li,{children:"500, 服务内部错误"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"请求示例"}),(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/files/:file_id/preview",targetCode:`curl -X GET '${e.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(n.h3,{children:"作为附件下载"}),(0,r.jsx)(eu,{title:"下载请求",tag:"GET",label:"/files/:file_id/preview?as_attachment=true",targetCode:`curl -X GET '${e.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview?as_attachment=true' \\
--header 'Authorization: Bearer {api_key}' \\
--output downloaded_file.png`}),(0,r.jsx)(n.h3,{children:"响应标头示例"}),(0,r.jsx)(eu,{title:"Response Headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"Content-Type: image/png\nContent-Length: 1024\nCache-Control: public, max-age=3600\n"})})}),(0,r.jsx)(n.h3,{children:"文件下载响应标头"}),(0,r.jsx)(eu,{title:"Download Response Headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"Content-Type: image/png\nContent-Length: 1024\nContent-Disposition: attachment; filename*=UTF-8''example.png\nCache-Control: public, max-age=3600\n"})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/completion-messages/:task_id/stop",method:"POST",title:"停止响应",name:"#Stop"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"仅支持流式模式。"}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，可在流式返回 Chunk 中获取"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) Required\n用户标识，用于定义终端用户的身份，必须和发送消息接口传入 user 保持一致。API 无法访问 WebApp 创建的会话。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"})," (string) 固定返回 success"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/completion-messages/:task_id/stop",targetCode:`curl -X POST '${e.appDetail.api_base_url}/completion-messages/:task_id/stop' \\
-H 'Authorization: Bearer {api_key}' \\
-H 'Content-Type: application/json' \\
--data-raw '{ "user": "abc-123"}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages/:message_id/feedbacks",method:"POST",title:"消息反馈（点赞）",name:"#feedbacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"消息终端用户反馈、点赞，方便应用开发者优化输出预期。"}),(0,r.jsx)(n.h3,{children:"Path Params"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"message_id",type:"string",children:(0,r.jsx)(n.p,{children:"消息 ID"})},"message_id")}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"rating",type:"string",children:(0,r.jsx)(n.p,{children:"点赞 like, 点踩 dislike,  撤销点赞 null"})},"rating"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，由开发者定义规则，需保证用户标识在应用内唯一。"})},"user"),(0,r.jsx)(ef,{name:"content",type:"string",children:(0,r.jsx)(n.p,{children:"消息反馈的具体信息。"})},"content")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"})," (string) 固定返回 success"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/messages/:message_id/feedbacks",targetCode:`curl -X POST '${e.appDetail.api_base_url}/messages/:message_id/feedbacks \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "rating": "like",
  "user": "abc-123",
  "content": "message feedback information"
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/app/feedbacks",method:"GET",title:"Get feedbacks of application",name:"#app-feedbacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Get application's feedbacks."}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"page",type:"string",children:(0,r.jsx)(n.p,{children:"（optional）pagination，default：1"})},"page")}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"limit",type:"string",children:(0,r.jsx)(n.p,{children:"（optional） records per page default：20"})},"limit")}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (List) return apps feedback list."]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/app/feedbacks",targetCode:`curl -X GET '${e.appDetail.api_base_url}/app/feedbacks?page=1&limit=20'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'  {\n      "data": [\n          {\n              "id": "8c0fbed8-e2f9-49ff-9f0e-15a35bdd0e25",\n              "app_id": "f252d396-fe48-450e-94ec-e184218e7346",\n              "conversation_id": "2397604b-9deb-430e-b285-4726e51fd62d",\n              "message_id": "709c0b0f-0a96-4a4e-91a4-ec0889937b11",\n              "rating": "like",\n              "content": "message feedback information-3",\n              "from_source": "user",\n              "from_end_user_id": "74286412-9a1a-42c1-929c-01edb1d381d5",\n              "from_account_id": null,\n              "created_at": "2025-04-24T09:24:38",\n              "updated_at": "2025-04-24T09:24:38"\n          }\n      ]\n  }\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/text-to-audio",method:"POST",title:"文字转语音",name:"#text-to-audio"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"文字转语音。"}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"message_id",type:"str",children:(0,r.jsx)(n.p,{children:"Dify 生成的文本消息，那么直接传递生成的message-id 即可，后台会通过 message_id 查找相应的内容直接合成语音信息。如果同时传 message_id 和 text，优先使用 message_id。"})},"message_id"),(0,r.jsx)(ef,{name:"text",type:"str",children:(0,r.jsx)(n.p,{children:"语音生成内容。如果没有传 message-id的话，则会使用这个字段的内容"})},"text"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，由开发者定义规则，需保证用户标识在应用内唯一。"})},"user")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/text-to-audio",targetCode:`curl -o text-to-audio.mp3 -X POST '${e.appDetail.api_base_url}/text-to-audio' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290",
  "text": "你好Dify",
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "Content-Type": "audio/wav"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/info",method:"GET",title:"获取应用基本信息",name:"#info"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"用于获取应用的基本信息"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 应用名称"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 应用描述"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tags"})," (array[string]) 应用标签"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) 应用模式"]}),"\n",(0,r.jsx)(n.li,{children:"'author_name' (string) 作者名称"}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/info",targetCode:`curl -X GET '${e.appDetail.api_base_url}/info' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "My App",\n  "description": "This is my app.",\n  "tags": [\n    "tag1",\n    "tag2"\n  ],\n  "mode": "chat",\n  "author_name": "Dify"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/parameters",method:"GET",title:"获取应用参数",name:"#parameters"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"用于进入页面一开始，获取功能开关、输入参数名称、类型及默认值等使用。"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"opening_statement"})," (string) 开场白"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"suggested_questions"})," (array[string]) 开场推荐问题列表"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"suggested_questions_after_answer"})," (object) 启用回答后给出推荐问题。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否开启"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"speech_to_text"})," (object) 语音转文本","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否开启"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resource"})," (object) 引用和归属","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否开启"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"annotation_reply"})," (object) 标记回复","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否开启"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user_input_form"})," (array[object]) 用户输入表单配置","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text-input"})," (object) 文本输入控件","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 控件展示标签名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 控件 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 是否必填"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) 默认值"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"paragraph"})," (object) 段落文本输入控件","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 控件展示标签名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 控件 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 是否必填"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) 默认值"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"select"})," (object) 下拉控件","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 控件展示标签名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 控件 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 是否必填"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) 默认值"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"options"})," (array[string]) 选项值"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_upload"})," (object) 文件上传配置","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," (object) 文档设置\n当前仅支持文档类型：",(0,r.jsx)(n.code,{children:"txt"}),", ",(0,r.jsx)(n.code,{children:"md"}),", ",(0,r.jsx)(n.code,{children:"markdown"}),", ",(0,r.jsx)(n.code,{children:"pdf"}),", ",(0,r.jsx)(n.code,{children:"html"}),", ",(0,r.jsx)(n.code,{children:"xlsx"}),", ",(0,r.jsx)(n.code,{children:"xls"}),", ",(0,r.jsx)(n.code,{children:"docx"}),", ",(0,r.jsx)(n.code,{children:"csv"}),", ",(0,r.jsx)(n.code,{children:"eml"}),", ",(0,r.jsx)(n.code,{children:"msg"}),", ",(0,r.jsx)(n.code,{children:"pptx"}),", ",(0,r.jsx)(n.code,{children:"ppt"}),", ",(0,r.jsx)(n.code,{children:"xml"}),", ",(0,r.jsx)(n.code,{children:"epub"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 文档数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," (object) 图片设置\n当前仅支持图片类型：",(0,r.jsx)(n.code,{children:"png"}),", ",(0,r.jsx)(n.code,{children:"jpg"}),", ",(0,r.jsx)(n.code,{children:"jpeg"}),", ",(0,r.jsx)(n.code,{children:"webp"}),", ",(0,r.jsx)(n.code,{children:"gif"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 图片数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (object) 音频设置\n当前仅支持音频类型：",(0,r.jsx)(n.code,{children:"mp3"}),", ",(0,r.jsx)(n.code,{children:"m4a"}),", ",(0,r.jsx)(n.code,{children:"wav"}),", ",(0,r.jsx)(n.code,{children:"webm"}),", ",(0,r.jsx)(n.code,{children:"amr"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 音频数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," (object) 视频设置\n当前仅支持视频类型：",(0,r.jsx)(n.code,{children:"mp4"}),", ",(0,r.jsx)(n.code,{children:"mov"}),", ",(0,r.jsx)(n.code,{children:"mpeg"}),", ",(0,r.jsx)(n.code,{children:"mpga"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 视频数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," (object) 自定义设置","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 自定义数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"system_parameters"})," (object) 系统参数","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_size_limit"})," (int) 文档上传大小限制 (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image_file_size_limit"})," (int) 图片文件上传大小限制（MB）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio_file_size_limit"})," (int) 音频文件上传大小限制 (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video_file_size_limit"})," (int) 视频文件上传大小限制 (MB)"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/parameters",targetCode:` curl -X GET '${e.appDetail.api_base_url}/parameters'\\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "introduction": "nice to meet you",\n  "user_input_form": [\n    {\n      "text-input": {\n        "label": "a",\n        "variable": "a",\n        "required": true,\n        "max_length": 48,\n        "default": ""\n      }\n    },\n    {\n      // ...\n    }\n  ],\n  "file_upload": {\n    "image": {\n      "enabled": true,\n      "number_limits": 3,\n      "transfer_methods": [\n        "remote_url",\n        "local_file"\n      ]\n    }\n  },\n  "system_parameters": {\n      "file_size_limit": 15,\n      "image_file_size_limit": 10,\n      "audio_file_size_limit": 50,\n      "video_file_size_limit": 100\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/site",method:"GET",title:"获取应用 WebApp 设置",name:"#site"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"用于获取应用的 WebApp 设置"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) WebApp 名称"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"chat_color_theme"})," (string) 聊天颜色主题，hex 格式"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"chat_color_theme_inverted"})," (bool) 聊天颜色主题是否反转"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_type"})," (string) 图标类型，",(0,r.jsx)(n.code,{children:"emoji"}),"-表情，",(0,r.jsx)(n.code,{children:"image"}),"-图片"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon"})," (string) 图标，如果是 ",(0,r.jsx)(n.code,{children:"emoji"})," 类型，则是 emoji 表情符号，如果是 ",(0,r.jsx)(n.code,{children:"image"})," 类型，则是图片 URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_background"})," (string) hex 格式的背景色"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_url"})," (string) 图标 URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 描述"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"copyright"})," (string) 版权信息"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"privacy_policy"})," (string) 隐私政策链接"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom_disclaimer"})," (string) 自定义免责声明"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default_language"})," (string) 默认语言"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"show_workflow_steps"})," (bool) 是否显示工作流详情"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"use_icon_as_answer_icon"})," (bool) 是否使用 WebApp 图标替换聊天中的 🤖"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/site",targetCode:`curl -X GET '${e.appDetail.api_base_url}/site' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "title": "My App",\n  "chat_color_theme": "#ff4a4a",\n  "chat_color_theme_inverted": false,\n  "icon_type": "emoji",\n  "icon": "😄",\n  "icon_background": "#FFEAD5",\n  "icon_url": null,\n  "description": "This is my app.",\n  "copyright": "all rights reserved",\n  "privacy_policy": "",\n  "custom_disclaimer": "All generated by AI",\n  "default_language": "en-US",\n  "show_workflow_steps": false,\n  "use_icon_as_answer_icon": false,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotations",method:"GET",title:"获取标注列表",name:"#annotation_list"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"page",type:"string",children:(0,r.jsx)(n.p,{children:"页码"})},"page"),(0,r.jsx)(ef,{name:"limit",type:"string",children:(0,r.jsx)(n.p,{children:"每页数量"})},"limit")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/apps/annotations",targetCode:`curl --location --request GET '${e.apiBaseUrl}/apps/annotations?page=1&limit=20' \\
--header 'Authorization: Bearer {api_key}'`,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl --location --request GET '${props.apiBaseUrl}/apps/annotations?page=1&limit=20' \\\n--header 'Authorization: Bearer {api_key}'\n"})})}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "data": [\n    {\n      "id": "69d48372-ad81-4c75-9c46-2ce197b4d402",\n      "question": "What is your name?",\n      "answer": "I am Dify.",\n      "hit_count": 0,\n      "created_at": 1735625869\n    }\n  ],\n  "has_more": false,\n  "limit": 20,\n  "total": 1,\n  "page": 1\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotations",method:"POST",title:"创建标注",name:"#create_annotation"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"question",type:"string",children:(0,r.jsx)(n.p,{children:"问题"})},"question"),(0,r.jsx)(ef,{name:"answer",type:"string",children:(0,r.jsx)(n.p,{children:"答案内容"})},"answer")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/apps/annotations",targetCode:`curl --location --request POST '${e.apiBaseUrl}/apps/annotations' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{"question": "What is your name?","answer": "I am Dify."}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "69d48372-ad81-4c75-9c46-2ce197b4d402",\n  "question": "What is your name?",\n  "answer": "I am Dify.",\n  "hit_count": 0,\n  "created_at": 1735625869\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotations/{annotation_id}",method:"PUT",title:"更新标注",name:"#update_annotation"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"annotation_id",type:"string",children:(0,r.jsx)(n.p,{children:"标注 ID"})},"annotation_id"),(0,r.jsx)(ef,{name:"question",type:"string",children:(0,r.jsx)(n.p,{children:"问题"})},"question"),(0,r.jsx)(ef,{name:"answer",type:"string",children:(0,r.jsx)(n.p,{children:"答案内容"})},"answer")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"PUT",label:"/apps/annotations/{annotation_id}",targetCode:`curl --location --request PUT '${e.apiBaseUrl}/apps/annotations/{annotation_id}' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{"question": "What is your name?","answer": "I am Dify."}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "69d48372-ad81-4c75-9c46-2ce197b4d402",\n  "question": "What is your name?",\n  "answer": "I am Dify.",\n  "hit_count": 0,\n  "created_at": 1735625869\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotations/{annotation_id}",method:"DELETE",title:"删除标注",name:"#delete_annotation"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"annotation_id",type:"string",children:(0,r.jsx)(n.p,{children:"标注 ID"})},"annotation_id")})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"PUT",label:"/apps/annotations/{annotation_id}",targetCode:`curl --location --request DELETE '${e.apiBaseUrl}/apps/annotations/{annotation_id}' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json'`,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl --location --request DELETE '${props.apiBaseUrl}/apps/annotations/{annotation_id}' \\\n--header 'Authorization: Bearer {api_key}'\n"})})}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"204 No Content\n"})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotation-reply/{action}",method:"POST",title:"标注回复初始设置",name:"#initial_annotation_reply_settings"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"action",type:"string",children:(0,r.jsx)(n.p,{children:"动作，只能是 'enable' 或 'disable'"})},"action"),(0,r.jsx)(ef,{name:"embedding_provider_name",type:"string",children:(0,r.jsx)(n.p,{children:"指定的嵌入模型提供商，必须先在系统内设定好接入的模型，对应的是 provider 字段"})},"embedding_provider_name"),(0,r.jsx)(ef,{name:"embedding_model_name",type:"string",children:(0,r.jsx)(n.p,{children:"指定的嵌入模型，对应的是 model 字段"})},"embedding_model_name"),(0,r.jsx)(ef,{name:"score_threshold",type:"number",children:(0,r.jsx)(n.p,{children:"相似度阈值，当相似度大于该阈值时，系统会自动回复，否则不回复"})},"score_threshold")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.p,{children:"嵌入模型的提供商和模型名称可以通过以下接口获取：v1/workspaces/current/models/model-types/text-embedding，具体见：通过 API 维护知识库。使用的 Authorization 是 Dataset 的 API Token。\n该接口是异步执行，所以会返回一个 job_id，通过查询 job 状态接口可以获取到最终的执行结果。"}),(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/apps/annotation-reply/{action}",targetCode:`curl --location --request POST '${e.apiBaseUrl}/apps/annotation-reply/{action}' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{"score_threshold": 0.9, "embedding_provider_name": "zhipu", "embedding_model_name": "embedding_3"}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "job_id": "b15c8f68-1cf4-4877-bf21-ed7cf2011802",\n  "job_status": "waiting"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotation-reply/{action}/status/{job_id}",method:"GET",title:"查询标注回复初始设置任务状态",name:"#initial_annotation_reply_settings_task_status"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"action",type:"string",children:(0,r.jsx)(n.p,{children:"动作，只能是 'enable' 或 'disable'，并且必须和标注回复初始设置接口的动作一致"})},"action"),(0,r.jsx)(ef,{name:"job_id",type:"string",children:(0,r.jsx)(n.p,{children:"任务 ID，从标注回复初始设置接口返回的 job_id"})},"job_id")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/apps/annotations",targetCode:`curl --location --request GET '${e.apiBaseUrl}/apps/annotation-reply/{action}/status/{job_id}' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "job_id": "b15c8f68-1cf4-4877-bf21-ed7cf2011802",\n  "job_status": "waiting",\n  "error_msg": ""\n}\n'})})})]})]})]})}function eT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...b(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(ew,{...e})}):ew(e)}function eD(e){let n={a:"a",code:"code",h1:"h1",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...b(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{children:"Advanced Chat App API"}),"\n",(0,r.jsx)(n.p,{children:"Chat applications support session persistence, allowing previous chat history to be used as context for responses. This can be applicable for chatbot, customer service AI, etc."}),"\n",(0,r.jsxs)("div",{children:[(0,r.jsx)(n.h3,{children:"Base URL"}),(0,r.jsx)(eu,{title:"Code",targetCode:e.appDetail.api_base_url}),(0,r.jsx)(n.h3,{children:"Authentication"}),(0,r.jsxs)(n.p,{children:["The Service API uses ",(0,r.jsx)(n.code,{children:"API-Key"})," authentication.\n",(0,r.jsx)("i",{children:(0,r.jsx)(n.strong,{children:"Strongly recommend storing your API Key on the server-side, not shared or stored on the client-side, to avoid possible API-Key leakage that can lead to serious consequences."})})]}),(0,r.jsxs)(n.p,{children:["For all API requests, include your API Key in the ",(0,r.jsx)(n.code,{children:"Authorization"}),"HTTP Header, as shown below:"]}),(0,r.jsx)(eu,{title:"Code",targetCode:"Authorization: Bearer {API_KEY}"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/chat-messages",method:"POST",title:"Send Chat Message",name:"#Send-Chat-Message"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Send a request to the chat application."}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"query",type:"string",children:(0,r.jsx)(n.p,{children:"User Input/Question content"})},"query"),(0,r.jsx)(ef,{name:"inputs",type:"object",children:(0,r.jsxs)(n.p,{children:["Allows the entry of various variable values defined by the App.\nThe ",(0,r.jsx)(n.code,{children:"inputs"})," parameter contains multiple key/value pairs, with each key corresponding to a specific variable and each value being the specific value for that variable.\nIf the variable is of file type, specify an object that has the keys described in ",(0,r.jsx)(n.code,{children:"files"})," below.\nDefault ",(0,r.jsx)(n.code,{children:"{}"})]})},"inputs"),(0,r.jsxs)(ef,{name:"response_mode",type:"string",children:[(0,r.jsx)(n.p,{children:"The mode of response return, supporting:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"streaming"})," Streaming mode (recommended), implements a typewriter-like output through SSE (",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events",children:"Server-Sent Events"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"blocking"})," Blocking mode, returns result after execution is complete. (Requests may be interrupted if the process is long)\nDue to Cloudflare restrictions, the request will be interrupted without a return after 100 seconds."]}),"\n"]})]},"response_mode"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"User identifier, used to define the identity of the end-user for retrieval and statistics.\nShould be uniquely defined by the developer within the application. The Service API does not share conversations created by the WebApp."})},"user"),(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"Conversation ID, to continue the conversation based on previous chat records, it is necessary to pass the previous message's conversation_id."})},"conversation_id"),(0,r.jsxs)(ef,{name:"files",type:"array[object]",children:[(0,r.jsx)(n.p,{children:"File list, suitable for inputting files combined with text understanding and answering questions, available only when the model supports Vision/Video capability."}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) Supported type:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," Supported types include: 'TXT', 'MD', 'MARKDOWN', 'MDX', 'PDF', 'HTML', 'XLSX', 'XLS', 'VTT', 'PROPERTIES', 'DOC', 'DOCX', 'CSV', 'EML', 'MSG', 'PPTX', 'PPT', 'XML', 'EPUB'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," Supported types include: 'JPG', 'JPEG', 'PNG', 'GIF', 'WEBP', 'SVG'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," Supported types include: 'MP3', 'M4A', 'WAV', 'WEBM', 'MPGA'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," Supported types include: 'MP4', 'MOV', 'MPEG', 'WEBM'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," Supported types include: other file types"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_method"})," (string) Transfer method:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"remote_url"}),": File URL."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"local_file"}),": Upload file."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," File URL. (Only when transfer method is ",(0,r.jsx)(n.code,{children:"remote_url"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"upload_file_id"})," Upload file ID. (Only when transfer method is ",(0,r.jsx)(n.code,{children:"local_file"}),")."]}),"\n"]})]},"files"),(0,r.jsx)(ef,{name:"auto_generate_name",type:"bool",children:(0,r.jsxs)(n.p,{children:["Auto-generate title, default is ",(0,r.jsx)(n.code,{children:"true"}),".\nIf set to ",(0,r.jsx)(n.code,{children:"false"}),", can achieve async title generation by calling the conversation rename API and setting ",(0,r.jsx)(n.code,{children:"auto_generate"})," to ",(0,r.jsx)(n.code,{children:"true"}),"."]})},"auto_generate_name"),(0,r.jsx)(ef,{name:"workflow_id",type:"string",children:(0,r.jsx)(n.p,{children:"(Optional) Workflow ID to specify a specific version, if not provided, uses the default published version."})},"workflow_id"),(0,r.jsxs)(ef,{name:"trace_id",type:"string",children:[(0,r.jsxs)(n.p,{children:["(Optional) Trace ID. Used for integration with existing business trace components to achieve end-to-end distributed tracing. If not provided, the system will automatically generate a trace_id. Supports the following three ways to pass, in order of priority:",(0,r.jsx)("br",{})]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Header: via HTTP Header ",(0,r.jsx)("code",{children:"X-Trace-Id"}),", highest priority.",(0,r.jsx)("br",{})]}),"\n",(0,r.jsxs)(n.li,{children:["Query parameter: via URL query parameter ",(0,r.jsx)("code",{children:"trace_id"}),".",(0,r.jsx)("br",{})]}),"\n",(0,r.jsxs)(n.li,{children:["Request Body: via request body field ",(0,r.jsx)("code",{children:"trace_id"})," (i.e., this field).",(0,r.jsx)("br",{})]}),"\n"]})]},"trace_id")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsx)(n.p,{children:"When response_mode is blocking, return a CompletionResponse object.\nWhen response_mode is streaming, return a ChunkCompletionResponse stream."}),(0,r.jsx)(n.h3,{children:"ChatCompletionResponse"}),(0,r.jsxs)(n.p,{children:["Returns the complete App result, ",(0,r.jsx)(n.code,{children:"Content-Type"})," is ",(0,r.jsx)(n.code,{children:"application/json"}),"."]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) Event type, fixed to ",(0,r.jsx)(n.code,{children:"message"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) unique ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) Conversation ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) App mode, fixed as ",(0,r.jsx)(n.code,{children:"chat"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) Complete response content"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"metadata"})," (object) Metadata","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usage"})," (Usage) Model usage information"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) Citation and Attribution List"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Message creation timestamp, e.g., 1705395332"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"ChunkChatCompletionResponse"}),(0,r.jsxs)(n.p,{children:["Returns the stream chunks outputted by the App, ",(0,r.jsx)(n.code,{children:"Content-Type"})," is ",(0,r.jsx)(n.code,{children:"text/event-stream"}),".\nEach streaming chunk starts with ",(0,r.jsx)(n.code,{children:"data:"}),", separated by two newline characters ",(0,r.jsx)(n.code,{children:"\\n\\n"}),", as shown below:"]}),(0,r.jsx)(eu,{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'data: {"event": "message", "task_id": "900bbd43-dc0b-4383-a372-aa6e6c414227", "id": "663c5084-a254-4040-8ad3-51f2a3c1a77c", "answer": "Hi", "created_at": 1705398420}\\n\\n\n'})})}),(0,r.jsxs)(n.p,{children:["The structure of the streaming chunks varies depending on the ",(0,r.jsx)(n.code,{children:"event"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message"})," LLM returns text chunk event, i.e., the complete text is output in a chunked fashion.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) Conversation ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) LLM returned text chunk content"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_file"})," Message file event, a new file has created by tool","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) File unique ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"}),' (string) File type，only allow "image" currently']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"belongs_to"})," (string) Belongs to, it will only be an 'assistant' here"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," (string) Remote url of file"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"}),"  (string) Conversation ID"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_end"})," Message end event, receiving this event means streaming has ended.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) Conversation ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"metadata"})," (object) Metadata","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usage"})," (Usage) Model usage information"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) Citation and Attribution List"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message"})," TTS audio stream event, that is, speech synthesis output. The content is an audio block in Mp3 format, encoded as a base64 string. When playing, simply decode the base64 and feed it into the player. (This message is available only when auto-play is enabled)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the stop response interface below"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) The audio after speech synthesis, encoded in base64 text content, when playing, simply decode the base64 and feed it into the player"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp, e.g.: 1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message_end"})," TTS audio stream end event, receiving this event indicates the end of the audio stream.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the stop response interface below"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) The end event has no audio, so this is an empty string"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp, e.g.: 1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_replace"})," Message content replacement event.\nWhen output content moderation is enabled, if the content is flagged, then the message content will be replaced with a preset reply through this event.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) Conversation ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) Replacement content (directly replaces all LLM reply text)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: workflow_started"})," workflow starts execution","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) fixed to ",(0,r.jsx)(n.code,{children:"workflow_started"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) detail","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) ID of related workflow"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) Creation timestamp, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: node_started"})," node execution started","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) fixed to ",(0,r.jsx)(n.code,{children:"node_started"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) detail","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_id"})," (string) ID of node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_type"})," (string) type of node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) name of node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index"})," (int) Execution sequence number, used to display Tracing Node sequence"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"predecessor_node_id"})," (string) optional Prefix node ID, used for canvas display execution path"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) Contents of all preceding node variables used in the node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) timestamp of start, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: node_finished"})," node execution ends, success or failure in different states in the same event","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) fixed to ",(0,r.jsx)(n.code,{children:"node_finished"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) detail","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_id"})," (string) ID of node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_type"})," (string) type of node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) name of node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index"})," (int) Execution sequence number, used to display Tracing Node sequence"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"predecessor_node_id"})," (string) optional Prefix node ID, used for canvas display execution path"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) Contents of all preceding node variables used in the node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"process_data"})," (json) Optional node process data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) Optional content of output"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) status of execution, ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) Optional reason of error"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) Optional total seconds to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"execution_metadata"})," (json) meta data","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) optional tokens to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_price"})," (decimal) optional Total cost"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"currency"})," (string) optional e.g. ",(0,r.jsx)(n.code,{children:"USD"})," / ",(0,r.jsx)(n.code,{children:"RMB"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) timestamp of start, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: workflow_finished"})," workflow execution ends, success or failure in different states in the same event","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) fixed to ",(0,r.jsx)(n.code,{children:"workflow_finished"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) detail","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) ID of related workflow"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) status of execution, ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) Optional content of output"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) Optional reason of error"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) Optional total seconds to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) Optional tokens to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) default 0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) start time"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) end time"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: error"}),"\nExceptions that occur during the streaming process will be output in the form of stream events, and reception of an error event will end the stream.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (int) HTTP status code"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"code"})," (string) Error code"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message"})," (string) Error message"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: ping"})," Ping event every 10 seconds to keep the connection alive."]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"404, Conversation does not exists"}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"invalid_param"}),", abnormal parameter input"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"app_unavailable"}),", App configuration unavailable"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"provider_not_initialize"}),", no available model credential configuration"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"provider_quota_exceeded"}),", model invocation quota insufficient"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"model_currently_not_support"}),", current model unavailable"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"workflow_not_found"}),", specified workflow version not found"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"draft_workflow_error"}),", cannot use draft workflow version"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"workflow_id_format_error"}),", invalid workflow_id format, expected UUID format"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"completion_request_error"}),", text generation failed"]}),"\n",(0,r.jsx)(n.li,{children:"500, internal server error"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/chat-messages",targetCode:`curl -X POST '${e.appDetail.api_base_url}/chat-messages' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "inputs": ${JSON.stringify(e.inputs)},
  "query": "What are the specs of the iPhone 13 Pro Max?",
  "response_mode": "streaming",
  "conversation_id": "",
  "user": "abc-123",
  "files": [
      {
          "type": "image",
          "transfer_method": "remote_url",
          "url": "https://cloud.dify.ai/logo/logo-site.png"
      }
  ]
}'`}),(0,r.jsx)(n.h3,{children:"Blocking Mode"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "event": "message",\n    "task_id": "c3800678-a077-43df-a102-53f23ed20b88",\n    "id": "9da23599-e713-473b-982c-4328d4f5c78a",\n    "message_id": "9da23599-e713-473b-982c-4328d4f5c78a",\n    "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2",\n    "mode": "chat",\n    "answer": "iPhone 13 Pro Max specs are listed here:...",\n    "metadata": {\n        "usage": {\n            "prompt_tokens": 1033,\n            "prompt_unit_price": "0.001",\n            "prompt_price_unit": "0.001",\n            "prompt_price": "0.0010330",\n            "completion_tokens": 128,\n            "completion_unit_price": "0.002",\n            "completion_price_unit": "0.001",\n            "completion_price": "0.0002560",\n            "total_tokens": 1161,\n            "total_price": "0.0012890",\n            "currency": "USD",\n            "latency": 0.7682376249867957\n        },\n        "retriever_resources": [\n            {\n                "position": 1,\n                "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb",\n                "dataset_name": "iPhone",\n                "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00",\n                "document_name": "iPhone List",\n                "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a",\n                "score": 0.98457545,\n                "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""\n            }\n        ]\n    },\n    "created_at": 1705407629\n}\n'})})}),(0,r.jsx)(n.h3,{children:"Streaming Mode"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'  data: {"event": "workflow_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "created_at": 1679586595}}\n  data: {"event": "node_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "created_at": 1679586595}}\n  data: {"event": "node_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "execution_metadata": {"total_tokens": 63127864, "total_price": 2.378, "currency": "USD"},  "created_at": 1679586595}}\n  data: {"event": "workflow_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "total_tokens": 63127864, "total_steps": "1", "created_at": 1679586595, "finished_at": 1679976595}}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " I", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": "\'m", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " glad", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " to", "created_at": 1679586595}\n  data: {"event": "message", "message_id" : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " meet", "created_at": 1679586595}\n  data: {"event": "message", "message_id" : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " you", "created_at": 1679586595}\n  data: {"event": "message_end", "id": "5e52ce04-874b-4d27-9045-b3bc80def685", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "metadata": {"usage": {"prompt_tokens": 1033, "prompt_unit_price": "0.001", "prompt_price_unit": "0.001", "prompt_price": "0.0010330", "completion_tokens": 135, "completion_unit_price": "0.002", "completion_price_unit": "0.001", "completion_price": "0.0002700", "total_tokens": 1168, "total_price": "0.0013030", "currency": "USD", "latency": 1.381760165997548}, "retriever_resources": [{"position": 1, "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb", "dataset_name": "iPhone", "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00", "document_name": "iPhone List", "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a", "score": 0.98457545, "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""}]}}\n  data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}\n  data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/upload",method:"POST",title:"File Upload",name:"#file-upload"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Upload a file for use when sending messages, enabling multimodal understanding of images and text.\nSupports any formats that are supported by your application.\nUploaded files are for use by the current end-user only."}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.p,{children:["This interface requires a ",(0,r.jsx)(n.code,{children:"multipart/form-data"})," request."]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file"})," (File) Required\nThe file to be uploaded."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) Required\nUser identifier, defined by the developer's rules, must be unique within the application. The Service API does not share conversations created by the WebApp."]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsx)(n.p,{children:"After a successful upload, the server will return the file's ID and related information."}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (uuid) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) File name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"size"})," (int) File size (bytes)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"extension"})," (string) File extension"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mime_type"})," (string) File mime-type"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by"})," (uuid) End-user ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) Creation timestamp, e.g., 1705395332"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"no_file_uploaded"}),", a file must be provided"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"too_many_files"}),", currently only one file is accepted"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"unsupported_preview"}),", the file does not support preview"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"unsupported_estimate"}),", the file does not support estimation"]}),"\n",(0,r.jsxs)(n.li,{children:["413, ",(0,r.jsx)(n.code,{children:"file_too_large"}),", the file is too large"]}),"\n",(0,r.jsxs)(n.li,{children:["415, ",(0,r.jsx)(n.code,{children:"unsupported_file_type"}),", unsupported extension, currently only document files are accepted"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_connection_failed"}),", unable to connect to S3 service"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_permission_denied"}),", no permission to upload files to S3"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_file_too_large"}),", file exceeds S3 size limit"]}),"\n",(0,r.jsx)(n.li,{children:"500, internal server error"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"Request Example"}),(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/files/upload",targetCode:`curl -X POST '${e.appDetail.api_base_url}/files/upload' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=image/[png|jpeg|jpg|webp|gif]' \\
--form 'user=abc-123'`}),(0,r.jsx)(n.h3,{children:"Response Example"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "72fa9618-8f89-4a37-9b33-7e1178a24a67",\n  "name": "example.png",\n  "size": 1024,\n  "extension": "png",\n  "mime_type": "image/png",\n  "created_by": "6ad1ab0a-73ff-4ac1-b9e4-cdb312f71f13",\n  "created_at": 1577836800,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/:file_id/preview",method:"GET",title:"File Preview",name:"#file-preview"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Preview or download uploaded files. This endpoint allows you to access files that have been previously uploaded via the File Upload API."}),(0,r.jsx)("i",{children:"Files can only be accessed if they belong to messages within the requesting application."}),(0,r.jsx)(n.h3,{children:"Path Parameters"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_id"})," (string) Required\nThe unique identifier of the file to preview, obtained from the File Upload API response."]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Query Parameters"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"as_attachment"})," (boolean) Optional\nWhether to force download the file as an attachment. Default is ",(0,r.jsx)(n.code,{children:"false"})," (preview in browser)."]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsx)(n.p,{children:"Returns the file content with appropriate headers for browser display or download."}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Type"})," Set based on file mime type"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Length"})," File size in bytes (if available)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Disposition"}),' Set to "attachment" if ',(0,r.jsx)(n.code,{children:"as_attachment=true"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Cache-Control"})," Caching headers for performance"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Accept-Ranges"}),' Set to "bytes" for audio/video files']}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"invalid_param"}),", abnormal parameter input"]}),"\n",(0,r.jsxs)(n.li,{children:["403, ",(0,r.jsx)(n.code,{children:"file_access_denied"}),", file access denied or file does not belong to current application"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"file_not_found"}),", file not found or has been deleted"]}),"\n",(0,r.jsx)(n.li,{children:"500, internal server error"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"Request Example"}),(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/files/:file_id/preview",targetCode:`curl -X GET '${e.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(n.h3,{children:"Download as Attachment"}),(0,r.jsx)(eu,{title:"Download Request",tag:"GET",label:"/files/:file_id/preview?as_attachment=true",targetCode:`curl -X GET '${e.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview?as_attachment=true' \\
--header 'Authorization: Bearer {api_key}' \\
--output downloaded_file.png`}),(0,r.jsx)(n.h3,{children:"Response Headers Example"}),(0,r.jsx)(eu,{title:"Response Headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"Content-Type: image/png\nContent-Length: 1024\nCache-Control: public, max-age=3600\n"})})}),(0,r.jsx)(n.h3,{children:"Download Response Headers"}),(0,r.jsx)(eu,{title:"Download Response Headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"Content-Type: image/png\nContent-Length: 1024\nContent-Disposition: attachment; filename*=UTF-8''example.png\nCache-Control: public, max-age=3600\n"})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/chat-messages/:task_id/stop",method:"POST",title:"Stop Generate",name:"#stop-generatebacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Only supported in streaming mode."}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, can be obtained from the streaming chunk return"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) Required\nUser identifier, used to define the identity of the end-user, must be consistent with the user passed in the message sending interface. The Service API does not share conversations created by the WebApp."]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"}),' (string) Always returns "success"']}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"Request Example"}),(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/chat-messages/:task_id/stop",targetCode:`curl -X POST '${e.appDetail.api_base_url}/chat-messages/:task_id/stop' \\
-H 'Authorization: Bearer {api_key}' \\
-H 'Content-Type: application/json' \\
--data-raw '{
  "user": "abc-123"
}'`}),(0,r.jsx)(n.h3,{children:"Response Example"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages/:message_id/feedbacks",method:"POST",title:"Message Feedback",name:"#feedbacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"End-users can provide feedback messages, facilitating application developers to optimize expected outputs."}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"message_id",type:"string",children:(0,r.jsx)(n.p,{children:"Message ID"})},"message_id")}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"rating",type:"string",children:(0,r.jsxs)(n.p,{children:["Upvote as ",(0,r.jsx)(n.code,{children:"like"}),", downvote as ",(0,r.jsx)(n.code,{children:"dislike"}),", revoke upvote as ",(0,r.jsx)(n.code,{children:"null"})]})},"rating"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"User identifier, defined by the developer's rules, must be unique within the application. The Service API does not share conversations created by the WebApp."})},"user"),(0,r.jsx)(ef,{name:"content",type:"string",children:(0,r.jsx)(n.p,{children:"The specific content of message feedback."})},"content")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"}),' (string) Always returns "success"']}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/messages/:message_id/feedbacks",targetCode:`curl -X POST '${e.appDetail.api_base_url}/messages/:message_id/feedbacks' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "rating": "like",
  "user": "abc-123",
  "content": "message feedback information"
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/app/feedbacks",method:"GET",title:"Get feedbacks of application",name:"#app-feedbacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Get application's feedbacks."}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"page",type:"string",children:(0,r.jsx)(n.p,{children:"（optional）pagination，default：1"})},"page")}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"limit",type:"string",children:(0,r.jsx)(n.p,{children:"（optional） records per page default：20"})},"limit")}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (List) return apps feedback list."]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/app/feedbacks",targetCode:`curl -X GET '${e.appDetail.api_base_url}/app/feedbacks?page=1&limit=20' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'  {\n      "data": [\n          {\n              "id": "8c0fbed8-e2f9-49ff-9f0e-15a35bdd0e25",\n              "app_id": "f252d396-fe48-450e-94ec-e184218e7346",\n              "conversation_id": "2397604b-9deb-430e-b285-4726e51fd62d",\n              "message_id": "709c0b0f-0a96-4a4e-91a4-ec0889937b11",\n              "rating": "like",\n              "content": "message feedback information-3",\n              "from_source": "user",\n              "from_end_user_id": "74286412-9a1a-42c1-929c-01edb1d381d5",\n              "from_account_id": null,\n              "created_at": "2025-04-24T09:24:38",\n              "updated_at": "2025-04-24T09:24:38"\n          }\n      ]\n  }\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages/{message_id}/suggested",method:"GET",title:"Next Suggested Questions",name:"#suggested"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Get next questions suggestions for the current message"}),(0,r.jsx)(n.h3,{children:"Path Params"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"message_id",type:"string",children:(0,r.jsx)(n.p,{children:"Message ID"})},"message_id")}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"User identifier, used to define the identity of the end-user for retrieval and statistics.\nShould be uniquely defined by the developer within the application."})},"user")})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/messages/{message_id}/suggested",targetCode:`curl --location --request GET '${e.appDetail.api_base_url}/messages/{message_id}/suggested?user=abc-123' \\
--header 'Authorization: Bearer ENTER-YOUR-SECRET-KEY' \\
--header 'Content-Type: application/json'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success",\n  "data": [\n        "a",\n        "b",\n        "c"\n    ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages",method:"GET",title:"Get Conversation History Messages",name:"#messages"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsxs)(n.p,{children:["Returns historical chat records in a scrolling load format, with the first page returning the latest ",(0,r.jsx)(n.code,{children:"{limit}"})," messages, i.e., in reverse order."]}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"Conversation ID"})},"conversation_id"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"User identifier, used to define the identity of the end-user for retrieval and statistics.\nShould be uniquely defined by the developer within the application."})},"user"),(0,r.jsx)(ef,{name:"first_id",type:"string",children:(0,r.jsx)(n.p,{children:"The ID of the first chat record on the current page, default is null."})},"first_id"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"How many chat history messages to return in one request, default is 20."})},"limit")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object]) Message list","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) Conversation ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) User input parameters."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"query"})," (string) User input / question content."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_files"})," (array[object]) Message files","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) File type, image for images"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," (string) File preview URL, use the File Preview API (",(0,r.jsx)(n.code,{children:"/files/{file_id}/preview"}),") to access the file"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"belongs_to"})," (string) belongs to，user orassistant"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) Response message content"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) Creation timestamp, e.g., 1705395332"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"feedback"})," (object) Feedback information","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"rating"})," (string) Upvote as ",(0,r.jsx)(n.code,{children:"like"})," / Downvote as ",(0,r.jsx)(n.code,{children:"dislike"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) Citation and Attribution List"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool) Whether there is a next page"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) Number of returned items, if input exceeds system limit, returns system limit amount"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/messages",targetCode:`curl -X GET '${e.appDetail.api_base_url}/messages?user=abc-123&conversation_id={conversation_id}'
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(n.h3,{children:"Response Example"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "limit": 20,\n  "has_more": false,\n  "data": [\n    {\n        "id": "a076a87f-31e5-48dc-b452-0061adbbc922",\n        "conversation_id": "cd78daf6-f9e4-4463-9ff2-54257230a0ce",\n        "inputs": {\n            "name": "dify"\n        },\n        "query": "iphone 13 pro",\n        "answer": "The iPhone 13 Pro, released on September 24, 2021, features a 6.1-inch display with a resolution of 1170 x 2532. It is equipped with a Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard) processor, 6 GB of RAM, and offers storage options of 128 GB, 256 GB, 512 GB, and 1 TB. The camera is 12 MP, the battery capacity is 3095 mAh, and it runs on iOS 15.",\n        "message_files": [],\n        "feedback": null,\n        "retriever_resources": [\n            {\n                "position": 1,\n                "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb",\n                "dataset_name": "iPhone",\n                "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00",\n                "document_name": "iPhone List",\n                "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a",\n                "score": 0.98457545,\n                "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""\n            }\n        ],\n        "created_at": 1705569239,\n    }\n  ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations",method:"GET",title:"Get Conversations",name:"#conversations"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Retrieve the conversation list for the current user, defaulting to the most recent 20 entries."}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"User identifier, used to define the identity of the end-user for retrieval and statistics.\nShould be uniquely defined by the developer within the application."})},"user"),(0,r.jsx)(ef,{name:"last_id",type:"string",children:(0,r.jsx)(n.p,{children:"(Optional) The ID of the last record on the current page, default is null."})},"last_id"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"(Optional) How many records to return in one request, default is the most recent 20 entries. Maximum 100, minimum 1."})},"limit"),(0,r.jsxs)(ef,{name:"sort_by",type:"string",children:[(0,r.jsx)(n.p,{children:"(Optional) Sorting Field, Default: -updated_at (sorted in descending order by update time)"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Available Values: created_at, -created_at, updated_at, -updated_at"}),"\n",(0,r.jsx)(n.li,{children:'The symbol before the field represents the order or reverse, "-" represents reverse order.'}),"\n"]})]},"sort_by")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object]) List of conversations","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Conversation ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) Conversation name, by default, is generated by LLM."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) User input parameters."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) Conversation status"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"introduction"})," (string) Introduction"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) Creation timestamp, e.g., 1705395332"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (timestamp) Update timestamp, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) Number of entries returned, if input exceeds system limit, system limit number is returned"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/conversations",targetCode:`curl -X GET '${e.appDetail.api_base_url}/conversations?user=abc-123&last_id=&limit=20' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "limit": 20,\n  "has_more": false,\n  "data": [\n    {\n      "id": "10799fb8-64f7-4296-bbf7-b42bfbe0ae54",\n      "name": "New chat",\n      "inputs": {\n          "book": "book",\n          "myName": "Lucy"\n      },\n      "status": "normal",\n      "created_at": 1679667915,\n      "updated_at": 1679667915\n    },\n    {\n      "id": "hSIhXBhNe8X1d8Et"\n      // ...\n    }\n  ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id",method:"DELETE",title:"Delete Conversation",name:"#delete"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Delete a conversation."}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) Conversation ID"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"The user identifier, defined by the developer, must ensure uniqueness within the application."})},"user")}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"}),' (string) Always returns "success"']}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"DELETE",label:"/conversations/:conversation_id",targetCode:`curl -X DELETE '${e.appDetail.api_base_url}/conversations/{conversation_id}' \\
--header 'Content-Type: application/json' \\
--header 'Accept: application/json' \\
--header 'Authorization: Bearer {api_key}' \\
--data '{
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"204 No Content\n"})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id/name",method:"POST",title:"Conversation Rename",name:"#rename"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsx)(n.p,{children:"Rename the session, the session name is used for display on clients that support multiple sessions."}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) Conversation ID"]}),"\n"]}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"name",type:"string",children:(0,r.jsxs)(n.p,{children:["(Optional) The name of the conversation. This parameter can be omitted if ",(0,r.jsx)(n.code,{children:"auto_generate"})," is set to ",(0,r.jsx)(n.code,{children:"true"}),"."]})},"name"),(0,r.jsx)(ef,{name:"auto_generate",type:"bool",children:(0,r.jsxs)(n.p,{children:["(Optional) Automatically generate the title, default is ",(0,r.jsx)(n.code,{children:"false"})]})},"auto_generate"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"The user identifier, defined by the developer, must ensure uniqueness within the application."})},"user")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Conversation ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) Conversation name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) User input parameters"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) Conversation status"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"introduction"})," (string) Introduction"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) Creation timestamp, e.g., 1705395332"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (timestamp) Update timestamp, e.g., 1705395332"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/conversations/:conversation_id/name",targetCode:`curl -X POST '${e.appDetail.api_base_url}/conversations/{conversation_id}/name' \\
--header 'Content-Type: application/json' \\
--header 'Authorization: Bearer {api_key}' \\
--data-raw '{
  "name": "",
  "auto_generate": true,
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "id": "cd78daf6-f9e4-4463-9ff2-54257230a0ce",\n    "name": "Chat vs AI",\n    "inputs": {},\n    "status": "normal",\n    "introduction": "",\n    "created_at": 1705569238,\n    "updated_at": 1705569238\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id/variables",method:"GET",title:"Get Conversation Variables",name:"#conversation-variables"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Retrieve variables from a specific conversation. This endpoint is useful for extracting structured data that was captured during the conversation."}),(0,r.jsx)(n.h3,{children:"Path Parameters"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"The ID of the conversation to retrieve variables from."})},"conversation_id")}),(0,r.jsx)(n.h3,{children:"Query Parameters"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"The user identifier, defined by the developer, must ensure uniqueness within the application"})},"user"),(0,r.jsx)(ef,{name:"last_id",type:"string",children:(0,r.jsx)(n.p,{children:"(Optional) The ID of the last record on the current page, default is null."})},"last_id"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"(Optional) How many records to return in one request, default is the most recent 20 entries. Maximum 100, minimum 1."})},"limit")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) Number of items per page"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool) Whether there is a next page"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object]) List of variables","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Variable ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) Variable name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value_type"})," (string) Variable type (string, number, object, etc.)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value"})," (string) Variable value"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) Variable description"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (int) Last update timestamp"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"conversation_not_exists"}),", Conversation not found"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/conversations/:conversation_id/variables",debug:"true",targetCode:`curl -X GET '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables?user=abc-123' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Request with variable name filter",language:"bash",targetCode:`curl -X GET '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables?user=abc-123&variable_name=customer_name' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "limit": 100,\n  "has_more": false,\n  "data": [\n    {\n      "id": "variable-uuid-1",\n      "name": "customer_name",\n      "value_type": "string",\n      "value": "John Doe",\n      "description": "Customer name extracted from the conversation",\n      "created_at": 1650000000000,\n      "updated_at": 1650000000000\n    },\n    {\n      "id": "variable-uuid-2",\n      "name": "order_details",\n      "value_type": "json",\n      "value": "{\\"product\\":\\"Widget\\",\\"quantity\\":5,\\"price\\":19.99}",\n      "description": "Order details from the customer",\n      "created_at": 1650000000000,\n      "updated_at": 1650000000000\n    }\n  ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id/variables/:variable_id",method:"PUT",title:"Update Conversation Variable",name:"#update-conversation-variable"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Update the value of a specific conversation variable. This endpoint allows you to modify the value of a variable that was captured during the conversation while preserving its name, type, and description."}),(0,r.jsx)(n.h3,{children:"Path Parameters"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"The ID of the conversation containing the variable to update."})},"conversation_id"),(0,r.jsx)(ef,{name:"variable_id",type:"string",children:(0,r.jsx)(n.p,{children:"The ID of the variable to update."})},"variable_id")]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"value",type:"any",children:(0,r.jsx)(n.p,{children:"The new value for the variable. Must match the variable's expected type (string, number, object, etc.)."})},"value"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"The user identifier, defined by the developer, must ensure uniqueness within the application."})},"user")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsx)(n.p,{children:"Returns the updated variable object with:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Variable ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) Variable name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value_type"})," (string) Variable type (string, number, object, etc.)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value"})," (any) Updated variable value"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) Variable description"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (int) Last update timestamp"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"Type mismatch: variable expects {expected_type}, but got {actual_type} type"}),", Value type doesn't match variable's expected type"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"conversation_not_exists"}),", Conversation not found"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"conversation_variable_not_exists"}),", Variable not found"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"PUT",label:"/conversations/:conversation_id/variables/:variable_id",targetCode:`curl -X PUT '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\
--header 'Content-Type: application/json' \\
--header 'Authorization: Bearer {api_key}' \\
--data-raw '{
  "value": "Updated Value",
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"Update with different value types",targetCode:[{title:"String",code:`curl -X PUT '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\
--header 'Content-Type: application/json' \\
--header 'Authorization: Bearer {api_key}' \\
--data-raw '{
  "value": "New string value",
  "user": "abc-123"
}'`},{title:"Number",code:`curl -X PUT '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\
--header 'Content-Type: application/json' \\
--header 'Authorization: Bearer {api_key}' \\
--data-raw '{
  "value": 42,
  "user": "abc-123"
}'`},{title:"Object",code:`curl -X PUT '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\
--header 'Content-Type: application/json' \\
--header 'Authorization: Bearer {api_key}' \\
--data-raw '{
  "value": {"product": "Widget", "quantity": 10, "price": 29.99},
  "user": "abc-123"
}'`}]}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "variable-uuid-1",\n  "name": "customer_name",\n  "value_type": "string",\n  "value": "Updated Value",\n  "description": "Customer name extracted from the conversation",\n  "created_at": 1650000000000,\n  "updated_at": 1650000001000\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/audio-to-text",method:"POST",title:"Speech to Text",name:"#audio-to-text"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"This endpoint requires a multipart/form-data request."}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"file",type:"file",children:(0,r.jsxs)(n.p,{children:["Audio file.\nSupported formats: ",(0,r.jsx)(n.code,{children:"['mp3', 'mp4', 'mpeg', 'mpga', 'm4a', 'wav', 'webm']"}),"\nFile size limit: 15MB"]})},"file"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"User identifier, defined by the developer's rules, must be unique within the application."})},"user")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text"})," (string) Output text"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/audio-to-text",targetCode:`curl -X POST '${e.appDetail.api_base_url}/audio-to-text' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=audio/[mp3|mp4|mpeg|mpga|m4a|wav|webm]'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "text": ""\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/text-to-audio",method:"POST",title:"Text to Audio",name:"#text-to-audio"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Text to speech."}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"message_id",type:"str",children:(0,r.jsx)(n.p,{children:"For text messages generated by Dify, simply pass the generated message-id directly. The backend will use the message-id to look up the corresponding content and synthesize the voice information directly. If both message_id and text are provided simultaneously, the message_id is given priority."})},"message_id"),(0,r.jsx)(ef,{name:"text",type:"str",children:(0,r.jsx)(n.p,{children:"Speech generated content。"})},"text"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"The user identifier, defined by the developer, must ensure uniqueness within the app."})},"user")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/text-to-audio",targetCode:`curl -o text-to-audio.mp3 -X POST '${e.appDetail.api_base_url}/text-to-audio' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290",
  "text": "Hello Dify",
  "user": "abc-123",
}'`}),(0,r.jsx)(eu,{title:"headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "Content-Type": "audio/wav"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/info",method:"GET",title:"Get Application Basic Information",name:"#info"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Used to get basic information about this application"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) application name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) application description"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tags"})," (array[string]) application tags"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) application mode"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"author_name"})," (string) application author name"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/info",targetCode:`curl -X GET '${e.appDetail.api_base_url}/info' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "My App",\n  "description": "This is my app.",\n  "tags": [\n    "tag1",\n    "tag2"\n  ],\n  "mode": "advanced-chat",\n  "author_name": "Dify"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/parameters",method:"GET",title:"Get Application Parameters Information",name:"#parameters"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Used at the start of entering the page to obtain information such as features, input parameter names, types, and default values."}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"opening_statement"})," (string) Opening statement"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"suggested_questions"})," (array[string]) List of suggested questions for the opening"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"suggested_questions_after_answer"})," (object) Suggest questions after enabling the answer.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"speech_to_text"})," (object) Speech to text","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text_to_speech"})," (object) Text to speech","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"voice"})," (string) Voice type"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"language"})," (string) Language"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"autoPlay"})," (string) Auto play","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"}),"   Enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"disabled"}),"  Disabled"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resource"})," (object) Citation and Attribution","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"annotation_reply"})," (object) Annotation reply","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user_input_form"})," (array[object]) User input form configuration","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text-input"})," (object) Text input control","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) Variable display label name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) Variable ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) Whether it is required"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) Default value"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"paragraph"})," (object) Paragraph text input control","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) Variable display label name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) Variable ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) Whether it is required"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) Default value"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"select"})," (object) Dropdown control","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) Variable display label name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) Variable ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) Whether it is required"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) Default value"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"options"})," (array[string]) Option values"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_upload"})," (object) File upload configuration","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," (object) Document settings\nCurrently only supports document types: ",(0,r.jsx)(n.code,{children:"txt"}),", ",(0,r.jsx)(n.code,{children:"md"}),", ",(0,r.jsx)(n.code,{children:"markdown"}),", ",(0,r.jsx)(n.code,{children:"pdf"}),", ",(0,r.jsx)(n.code,{children:"html"}),", ",(0,r.jsx)(n.code,{children:"xlsx"}),", ",(0,r.jsx)(n.code,{children:"xls"}),", ",(0,r.jsx)(n.code,{children:"docx"}),", ",(0,r.jsx)(n.code,{children:"csv"}),", ",(0,r.jsx)(n.code,{children:"eml"}),", ",(0,r.jsx)(n.code,{children:"msg"}),", ",(0,r.jsx)(n.code,{children:"pptx"}),", ",(0,r.jsx)(n.code,{children:"ppt"}),", ",(0,r.jsx)(n.code,{children:"xml"}),", ",(0,r.jsx)(n.code,{children:"epub"}),".","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Document number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," (object) Image settings\nCurrently only supports image types: ",(0,r.jsx)(n.code,{children:"png"}),", ",(0,r.jsx)(n.code,{children:"jpg"}),", ",(0,r.jsx)(n.code,{children:"jpeg"}),", ",(0,r.jsx)(n.code,{children:"webp"}),", ",(0,r.jsx)(n.code,{children:"gif"}),".","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Image number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (object) Audio settings\nCurrently only supports audio types: ",(0,r.jsx)(n.code,{children:"mp3"}),", ",(0,r.jsx)(n.code,{children:"m4a"}),", ",(0,r.jsx)(n.code,{children:"wav"}),", ",(0,r.jsx)(n.code,{children:"webm"}),", ",(0,r.jsx)(n.code,{children:"amr"}),".","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Audio number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," (object) Video settings\nCurrently only supports video types: ",(0,r.jsx)(n.code,{children:"mp4"}),", ",(0,r.jsx)(n.code,{children:"mov"}),", ",(0,r.jsx)(n.code,{children:"mpeg"}),", ",(0,r.jsx)(n.code,{children:"mpga"}),".","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Video number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," (object) Custom settings","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Custom number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"system_parameters"})," (object) System parameters","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_size_limit"})," (int) Document upload size limit (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image_file_size_limit"})," (int) Image file upload size limit (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio_file_size_limit"})," (int) Audio file upload size limit (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video_file_size_limit"})," (int) Video file upload size limit (MB)"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/parameters",targetCode:`curl -X GET '${e.appDetail.api_base_url}/parameters'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "opening_statement": "Hello!",\n  "suggested_questions_after_answer": {\n      "enabled": true\n  },\n  "speech_to_text": {\n      "enabled": true\n  },\n  "text_to_speech": {\n      "enabled": true,\n      "voice": "sambert-zhinan-v1",\n      "language": "zh-Hans",\n      "autoPlay": "disabled"\n  },\n  "retriever_resource": {\n      "enabled": true\n  },\n  "annotation_reply": {\n      "enabled": true\n  },\n  "user_input_form": [\n      {\n          "paragraph": {\n              "label": "Query",\n              "variable": "query",\n              "required": true,\n              "default": ""\n          }\n      }\n  ],\n  "file_upload": {\n      "image": {\n          "enabled": false,\n          "number_limits": 3,\n          "detail": "high",\n          "transfer_methods": [\n              "remote_url",\n              "local_file"\n          ]\n      }\n  },\n  "system_parameters": {\n      "file_size_limit": 15,\n      "image_file_size_limit": 10,\n      "audio_file_size_limit": 50,\n      "video_file_size_limit": 100\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/meta",method:"GET",title:"Get Application Meta Information",name:"#meta"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Used to get icons of tools in this application"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool_icons"}),"(object[string]) tool icons","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool_name"})," (string)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon"})," (object|string)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["(object) icon object","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"background"})," (string) background color in hex format"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"content"}),"(string) emoji"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"(string) url of icon"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/meta",targetCode:`curl -X GET '${e.appDetail.api_base_url}/meta' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "tool_icons": {\n    "dalle2": "https://cloud.dify.ai/console/api/workspaces/current/tool-provider/builtin/dalle/icon",\n    "api_tool": {\n      "background": "#252525",\n      "content": "\\ud83d\\ude01"\n    }\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/site",method:"GET",title:"Get Application WebApp Settings",name:"#site"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Used to get the WebApp settings of the application."}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) WebApp name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"chat_color_theme"})," (string) Chat color theme, in hex format"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"chat_color_theme_inverted"})," (bool) Whether the chat color theme is inverted"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_type"})," (string) Icon type, ",(0,r.jsx)(n.code,{children:"emoji"})," - emoji, ",(0,r.jsx)(n.code,{children:"image"})," - picture"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon"})," (string) Icon. If it's ",(0,r.jsx)(n.code,{children:"emoji"})," type, it's an emoji symbol; if it's ",(0,r.jsx)(n.code,{children:"image"})," type, it's an image URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_background"})," (string) Background color in hex format"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_url"})," (string) Icon URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) Description"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"copyright"})," (string) Copyright information"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"privacy_policy"})," (string) Privacy policy link"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom_disclaimer"})," (string) Custom disclaimer"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default_language"})," (string) Default language"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"show_workflow_steps"})," (bool) Whether to show workflow details"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"use_icon_as_answer_icon"})," (bool) Whether to replace 🤖 in chat with the WebApp icon"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/site",targetCode:`curl -X GET '${e.appDetail.api_base_url}/site' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "title": "My App",\n  "chat_color_theme": "#ff4a4a",\n  "chat_color_theme_inverted": false,\n  "icon_type": "emoji",\n  "icon": "😄",\n  "icon_background": "#FFEAD5",\n  "icon_url": null,\n  "description": "This is my app.",\n  "copyright": "all rights reserved",\n  "privacy_policy": "",\n  "custom_disclaimer": "All generated by AI",\n  "default_language": "en-US",\n  "show_workflow_steps": false,\n  "use_icon_as_answer_icon": false,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotations",method:"GET",title:"Get Annotation List",name:"#annotation_list"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"page",type:"string",children:(0,r.jsx)(n.p,{children:"Page number"})},"page"),(0,r.jsx)(ef,{name:"limit",type:"string",children:(0,r.jsx)(n.p,{children:"Number of items returned, default 20, range 1-100"})},"limit")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/apps/annotations",targetCode:`curl --location --request GET '${e.appDetail.api_base_url}/apps/annotations?page=1&limit=20' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "data": [\n    {\n      "id": "69d48372-ad81-4c75-9c46-2ce197b4d402",\n      "question": "What is your name?",\n      "answer": "I am Dify.",\n      "hit_count": 0,\n      "created_at": 1735625869\n    }\n  ],\n  "has_more": false,\n  "limit": 20,\n  "total": 1,\n  "page": 1\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotations",method:"POST",title:"Create Annotation",name:"#create_annotation"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"question",type:"string",children:(0,r.jsx)(n.p,{children:"Question"})},"question"),(0,r.jsx)(ef,{name:"answer",type:"string",children:(0,r.jsx)(n.p,{children:"Answer"})},"answer")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/apps/annotations",targetCode:`curl --location --request POST '${e.appDetail.api_base_url}/apps/annotations' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "question": "What is your name?",
  "answer": "I am Dify."
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "69d48372-ad81-4c75-9c46-2ce197b4d402",\n  "question": "What is your name?",\n  "answer": "I am Dify.",\n  "hit_count": 0,\n  "created_at": 1735625869\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotations/{annotation_id}",method:"PUT",title:"Update Annotation",name:"#update_annotation"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"annotation_id",type:"string",children:(0,r.jsx)(n.p,{children:"Annotation ID"})},"annotation_id"),(0,r.jsx)(ef,{name:"question",type:"string",children:(0,r.jsx)(n.p,{children:"Question"})},"question"),(0,r.jsx)(ef,{name:"answer",type:"string",children:(0,r.jsx)(n.p,{children:"Answer"})},"answer")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"PUT",label:"/apps/annotations/{annotation_id}",targetCode:`curl --location --request PUT '${e.appDetail.api_base_url}/apps/annotations/{annotation_id}' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "question": "What is your name?",
  "answer": "I am Dify."
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "69d48372-ad81-4c75-9c46-2ce197b4d402",\n  "question": "What is your name?",\n  "answer": "I am Dify.",\n  "hit_count": 0,\n  "created_at": 1735625869\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotations/{annotation_id}",method:"DELETE",title:"Delete Annotation",name:"#delete_annotation"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"annotation_id",type:"string",children:(0,r.jsx)(n.p,{children:"Annotation ID"})},"annotation_id")})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"DELETE",label:"/apps/annotations/{annotation_id}",targetCode:`curl --location --request DELETE '${e.appDetail.api_base_url}/apps/annotations/{annotation_id}' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"204 No Content\n"})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotation-reply/{action}",method:"POST",title:"Initial Annotation Reply Settings",name:"#initial_annotation_reply_settings"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"action",type:"string",children:(0,r.jsx)(n.p,{children:"Action, can only be 'enable' or 'disable'"})},"action"),(0,r.jsx)(ef,{name:"embedding_provider_name",type:"string",children:(0,r.jsx)(n.p,{children:"Specified embedding model provider, must be set up in the system first, corresponding to the provider field(Optional)"})},"embedding_provider_name"),(0,r.jsx)(ef,{name:"embedding_model_name",type:"string",children:(0,r.jsx)(n.p,{children:"Specified embedding model, corresponding to the model field(Optional)"})},"embedding_model_name"),(0,r.jsx)(ef,{name:"score_threshold",type:"number",children:(0,r.jsx)(n.p,{children:"The similarity threshold for matching annotated replies. Only annotations with scores above this threshold will be recalled."})},"score_threshold")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.p,{children:"The provider and model name of the embedding model can be obtained through the following interface: v1/workspaces/current/models/model-types/text-embedding. For specific instructions, see: Maintain Knowledge Base via API. The Authorization used is the Dataset API Token."}),(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/apps/annotation-reply/{action}",targetCode:`curl --location --request POST '${e.appDetail.api_base_url}/apps/annotation-reply/{action}' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "score_threshold": 0.9,
  "embedding_provider_name": "zhipu",
  "embedding_model_name": "embedding_3"
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "job_id": "b15c8f68-1cf4-4877-bf21-ed7cf2011802",\n  "job_status": "waiting"\n}\n'})})}),(0,r.jsx)(n.p,{children:"This interface is executed asynchronously, so it will return a job_id. You can get the final execution result by querying the job status interface."})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotation-reply/{action}/status/{job_id}",method:"GET",title:"Query Initial Annotation Reply Settings Task Status",name:"#initial_annotation_reply_settings_task_status"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"action",type:"string",children:(0,r.jsx)(n.p,{children:"Action, can only be 'enable' or 'disable', must be the same as the action in the initial annotation reply settings interface"})},"action"),(0,r.jsx)(ef,{name:"job_id",type:"string",children:(0,r.jsx)(n.p,{children:"Job ID, obtained from the initial annotation reply settings interface"})},"job_id")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/apps/annotations",targetCode:`curl --location --request GET '${e.appDetail.api_base_url}/apps/annotation-reply/{action}/status/{job_id}' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "job_id": "b15c8f68-1cf4-4877-bf21-ed7cf2011802",\n  "job_status": "waiting",\n  "error_msg": ""\n}\n'})})})]})]})]})}function eI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...b(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(eD,{...e})}):eD(e)}function eP(e){let n={a:"a",code:"code",h1:"h1",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...b(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{children:"高度なチャットアプリ API"}),"\n",(0,r.jsx)(n.p,{children:"チャットアプリケーションはセッションの持続性をサポートしており、以前のチャット履歴を応答のコンテキストとして使用できます。これは、チャットボットやカスタマーサービス AI などに適用できます。"}),"\n",(0,r.jsxs)("div",{children:[(0,r.jsx)(n.h3,{children:"ベース URL"}),(0,r.jsx)(eu,{title:"コード",targetCode:e.appDetail.api_base_url}),(0,r.jsx)(n.h3,{children:"認証"}),(0,r.jsxs)(n.p,{children:["サービス API は ",(0,r.jsx)(n.code,{children:"API-Key"})," 認証を使用します。\n",(0,r.jsx)("i",{children:(0,r.jsx)(n.strong,{children:"API キーはサーバー側に保存し、クライアント側で共有または保存しないことを強くお勧めします。API キーの漏洩は深刻な結果を招く可能性があります。"})})]}),(0,r.jsxs)(n.p,{children:["すべての API リクエストには、以下のように ",(0,r.jsx)(n.code,{children:"Authorization"}),"HTTP ヘッダーに API キーを含めてください："]}),(0,r.jsx)(eu,{title:"コード",targetCode:"Authorization: Bearer {API_KEY}"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/chat-messages",method:"POST",title:"チャットメッセージを送信",name:"#Send-Chat-Message"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"チャットアプリケーションにリクエストを送信します。"}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"query",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー入力/質問内容"})},"query"),(0,r.jsx)(ef,{name:"inputs",type:"object",children:(0,r.jsxs)(n.p,{children:["アプリによって定義されたさまざまな変数値の入力を許可します。\n",(0,r.jsx)(n.code,{children:"inputs"}),"パラメータには複数のキー/値ペアが含まれ、各キーは特定の変数に対応し、各値はその変数の特定の値です。\n変数がファイルタイプの場合、以下の",(0,r.jsx)(n.code,{children:"files"}),"で説明されているキーを持つオブジェクトを指定します。\nデフォルト",(0,r.jsx)(n.code,{children:"{}"})]})},"inputs"),(0,r.jsxs)(ef,{name:"response_mode",type:"string",children:[(0,r.jsx)(n.p,{children:"応答の返却モードを指定します。サポートされているモード："}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"streaming"})," ストリーミングモード（推奨）、SSE（",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events",children:"サーバー送信イベント"}),"）を通じてタイプライターのような出力を実装します。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"blocking"})," ブロッキングモード、実行完了後に結果を返します。（プロセスが長い場合、リクエストが中断される可能性があります）\nCloudflareの制限により、リクエストは100秒後に返答なしで中断されます。"]}),"\n"]})]},"response_mode"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子、エンドユーザーの身元を定義するために使用され、統計のために使用されます。\nアプリケーション内で開発者によって一意に定義されるべきです。サービス API は WebApp によって作成された会話を共有しません。"})},"user"),(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"会話ID、以前のチャット記録に基づいて会話を続けるには、以前のメッセージのconversation_idを渡す必要があります。"})},"conversation_id"),(0,r.jsxs)(ef,{name:"files",type:"array[object]",children:[(0,r.jsx)(n.p,{children:"ファイルリスト、モデルが Vision/Video 機能をサポートしている場合に限り、ファイルをテキスト理解および質問応答に組み合わせて入力するのに適しています。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) サポートされるタイプ：","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," サポートされるタイプには以下が含まれます：'TXT', 'MD', 'MARKDOWN', 'MDX', 'PDF', 'HTML', 'XLSX', 'XLS', 'VTT', 'PROPERTIES', 'DOC', 'DOCX', 'CSV', 'EML', 'MSG', 'PPTX', 'PPT', 'XML', 'EPUB'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," サポートされるタイプには以下が含まれます：'JPG', 'JPEG', 'PNG', 'GIF', 'WEBP', 'SVG'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," サポートされるタイプには以下が含まれます：'MP3', 'M4A', 'WAV', 'WEBM', 'MPGA'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," サポートされるタイプには以下が含まれます：'MP4', 'MOV', 'MPEG', 'WEBM'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," サポートされるタイプには以下が含まれます：その他のファイルタイプ"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_method"})," (string) 転送方法:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"remote_url"}),": ファイルのURL。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"local_file"}),": ファイルをアップロード。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," ファイルのURL。（転送方法が ",(0,r.jsx)(n.code,{children:"remote_url"})," の場合のみ）。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"upload_file_id"})," アップロードされたファイルID。（転送方法が ",(0,r.jsx)(n.code,{children:"local_file"})," の場合のみ）。"]}),"\n"]})]},"files"),(0,r.jsx)(ef,{name:"auto_generate_name",type:"bool",children:(0,r.jsxs)(n.p,{children:["タイトルを自動生成、デフォルトは",(0,r.jsx)(n.code,{children:"true"}),"。\n",(0,r.jsx)(n.code,{children:"false"}),"に設定すると、会話のリネームAPIを呼び出し、",(0,r.jsx)(n.code,{children:"auto_generate"}),"を",(0,r.jsx)(n.code,{children:"true"}),"に設定することで非同期タイトル生成を実現できます。"]})},"auto_generate_name"),(0,r.jsx)(ef,{name:"workflow_id",type:"string",children:(0,r.jsx)(n.p,{children:"（オプション）ワークフローID、特定のバージョンを指定するために使用、提供されない場合はデフォルトの公開バージョンを使用。"})},"workflow_id"),(0,r.jsxs)(ef,{name:"trace_id",type:"string",children:[(0,r.jsxs)(n.p,{children:["（オプション）トレースID。既存の業務システムのトレースコンポーネントと連携し、エンドツーエンドの分散トレーシングを実現するために使用します。指定がない場合、システムが自動的に trace_id を生成します。以下の3つの方法で渡すことができ、優先順位は次のとおりです：",(0,r.jsx)("br",{})]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Header：HTTPヘッダー ",(0,r.jsx)("code",{children:"X-Trace-Id"})," で渡す（最優先）。",(0,r.jsx)("br",{})]}),"\n",(0,r.jsxs)(n.li,{children:["クエリパラメータ：URLクエリパラメータ ",(0,r.jsx)("code",{children:"trace_id"})," で渡す。",(0,r.jsx)("br",{})]}),"\n",(0,r.jsxs)(n.li,{children:["リクエストボディ：リクエストボディの ",(0,r.jsx)("code",{children:"trace_id"})," フィールドで渡す（本フィールド）。",(0,r.jsx)("br",{})]}),"\n"]})]},"trace_id")]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsx)(n.p,{children:"response_modeがブロッキングの場合、CompletionResponseオブジェクトを返します。\nresponse_modeがストリーミングの場合、ChunkCompletionResponseストリームを返します。"}),(0,r.jsx)(n.h3,{children:"ChatCompletionResponse"}),(0,r.jsxs)(n.p,{children:["完全なアプリ結果を返します。",(0,r.jsx)(n.code,{children:"Content-Type"}),"は",(0,r.jsx)(n.code,{children:"application/json"}),"です。"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) イベントタイプ、固定で ",(0,r.jsx)(n.code,{children:"message"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下のStop Generate APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ユニークID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会話ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) アプリモード、",(0,r.jsx)(n.code,{children:"chat"}),"として固定"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) 完全な応答内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"metadata"})," (object) メタデータ","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usage"})," (Usage) モデル使用情報"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) 引用と帰属リスト"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) メッセージ作成タイムスタンプ、例：1705395332"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"ChunkChatCompletionResponse"}),(0,r.jsxs)(n.p,{children:["アプリによって出力されたストリームチャンクを返します。",(0,r.jsx)(n.code,{children:"Content-Type"}),"は",(0,r.jsx)(n.code,{children:"text/event-stream"}),"です。\n各ストリーミングチャンクは",(0,r.jsx)(n.code,{children:"data:"}),"で始まり、2つの改行文字",(0,r.jsx)(n.code,{children:"\\n\\n"}),"で区切られます。以下のように表示されます："]}),(0,r.jsx)(eu,{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'data: {"event": "message", "task_id": "900bbd43-dc0b-4383-a372-aa6e6c414227", "id": "663c5084-a254-4040-8ad3-51f2a3c1a77c", "answer": "Hi", "created_at": 1705398420}\\n\\n\n'})})}),(0,r.jsxs)(n.p,{children:["ストリーミングチャンクの構造は",(0,r.jsx)(n.code,{children:"event"}),"に応じて異なります："]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message"})," LLMがテキストチャンクイベントを返します。つまり、完全なテキストがチャンク形式で出力されます。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下のStop Generate APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会話ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) LLMが返したテキストチャンク内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_file"})," メッセージファイルイベント、ツールによって新しいファイルが作成されました","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ファイル一意ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"}),' (string) ファイルタイプ、現在は"image"のみ許可']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"belongs_to"})," (string) 所属、ここでは'assistant'のみ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," (string) ファイルのリモートURL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"}),"  (string) 会話ID"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_end"})," メッセージ終了イベント、このイベントを受信するとストリーミングが終了したことを意味します。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下のStop Generate APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会話ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"metadata"})," (object) メタデータ","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usage"})," (Usage) モデル使用情報"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) 引用と帰属リスト"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message"})," TTSオーディオストリームイベント、つまり音声合成出力。内容はMp3形式のオーディオブロックで、base64文字列としてエンコードされています。再生時には、base64をデコードしてプレーヤーに入力するだけです。（このメッセージは自動再生が有効な場合にのみ利用可能）","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下のストップ応答インターフェースに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 音声合成後のオーディオ、base64テキストコンテンツとしてエンコードされており、再生時にはbase64をデコードしてプレーヤーに入力するだけです"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message_end"})," TTSオーディオストリーム終了イベント、このイベントを受信するとオーディオストリームが終了したことを示します。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下のストップ応答インターフェースに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 終了イベントにはオーディオがないため、これは空の文字列です"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_replace"})," メッセージ内容置換イベント。\n出力内容のモデレーションが有効な場合、内容がフラグ付けされると、このイベントを通じてメッセージ内容がプリセットの返信に置き換えられます。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下のStop Generate APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会話ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) 置換内容（すべてのLLM返信テキストを直接置き換えます）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: workflow_started"})," ワークフローが実行を開始","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下のStop Generate APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) ワークフロー実行の一意ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) ",(0,r.jsx)(n.code,{children:"workflow_started"}),"に固定"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 詳細","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ワークフロー実行の一意ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) 関連ワークフローのID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: node_started"})," ノード実行が開始","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下のStop Generate APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) ワークフロー実行の一意ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) ",(0,r.jsx)(n.code,{children:"node_started"}),"に固定"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 詳細","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ワークフロー実行の一意ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_id"})," (string) ノードのID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_type"})," (string) ノードのタイプ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) ノードの名前"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index"})," (int) 実行シーケンス番号、トレースノードシーケンスを表示するために使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"predecessor_node_id"})," (string) オプションのプレフィックスノードID、キャンバス表示実行パスに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) ノードで使用されるすべての前のノード変数の内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 開始のタイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: node_finished"})," ノード実行が終了、成功または失敗は同じイベント内で異なる状態で示されます","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下のStop Generate APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) ワークフロー実行の一意ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) ",(0,r.jsx)(n.code,{children:"node_finished"}),"に固定"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 詳細","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ワークフロー実行の一意ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_id"})," (string) ノードのID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_type"})," (string) ノードのタイプ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) ノードの名前"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index"})," (int) 実行シーケンス番号、トレースノードシーケンスを表示するために使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"predecessor_node_id"})," (string) オプションのプレフィックスノードID、キャンバス表示実行パスに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) ノードで使用されるすべての前のノード変数の内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"process_data"})," (json) オプションのノードプロセスデータ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) オプションの出力内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 実行の状態、",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) オプションのエラー理由"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) オプションの使用される合計秒数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"execution_metadata"})," (json) メタデータ","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) オプションの使用されるトークン数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_price"})," (decimal) オプションの合計コスト"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"currency"})," (string) オプション、例：",(0,r.jsx)(n.code,{children:"USD"})," / ",(0,r.jsx)(n.code,{children:"RMB"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 開始のタイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: workflow_finished"})," ワークフロー実行が終了、成功または失敗は同じイベント内で異なる状態で示されます","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下のStop Generate APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) ワークフロー実行の一意ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) ",(0,r.jsx)(n.code,{children:"workflow_finished"}),"に固定"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 詳細","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ワークフロー実行のID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) 関連ワークフローのID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 実行の状態、",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) オプションの出力内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) オプションのエラー理由"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) オプションの使用される合計秒数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) オプションの使用されるトークン数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) デフォルト0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 開始時間"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) 終了時間"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: error"}),"\nストリーミングプロセス中に発生する例外はストリームイベントの形式で出力され、エラーイベントを受信するとストリームが終了します。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下のStop Generate APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (int) HTTPステータスコード"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"code"})," (string) エラーコード"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message"})," (string) エラーメッセージ"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: ping"})," 接続を維持するために10秒ごとにpingイベントが発生します。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"エラー"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"404, 会話が存在しません"}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"invalid_param"}),", 異常なパラメータ入力"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"app_unavailable"}),", アプリ構成が利用できません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"provider_not_initialize"}),", 利用可能なモデル資格情報構成がありません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"provider_quota_exceeded"}),", モデル呼び出しクォータが不足しています"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"model_currently_not_support"}),", 現在のモデルが利用できません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"workflow_not_found"}),", 指定されたワークフローバージョンが見つかりません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"draft_workflow_error"}),", ドラフトワークフローバージョンは使用できません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"workflow_id_format_error"}),", ワークフローID形式エラー、UUID形式が必要です"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"completion_request_error"}),", テキスト生成に失敗しました"]}),"\n",(0,r.jsx)(n.li,{children:"500, 内部サーバーエラー"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"POST",label:"/chat-messages",targetCode:`curl -X POST '${e.appDetail.api_base_url}/chat-messages' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "inputs": ${JSON.stringify(e.inputs)},
  "query": "What are the specs of the iPhone 13 Pro Max?",
  "response_mode": "streaming",
  "conversation_id": "",
  "user": "abc-123",
  "files": [
      {
          "type": "image",
          "transfer_method": "remote_url",
          "url": "https://cloud.dify.ai/logo/logo-site.png"
      }
  ]
}'`}),(0,r.jsx)(n.h3,{children:"ブロッキングモード"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "event": "message",\n    "task_id": "c3800678-a077-43df-a102-53f23ed20b88",\n    "id": "9da23599-e713-473b-982c-4328d4f5c78a",\n    "message_id": "9da23599-e713-473b-982c-4328d4f5c78a",\n    "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2",\n    "mode": "chat",\n    "answer": "iPhone 13 Pro Maxの仕様は次のとおりです:...",\n    "metadata": {\n        "usage": {\n            "prompt_tokens": 1033,\n            "prompt_unit_price": "0.001",\n            "prompt_price_unit": "0.001",\n            "prompt_price": "0.0010330",\n            "completion_tokens": 128,\n            "completion_unit_price": "0.002",\n            "completion_price_unit": "0.001",\n            "completion_price": "0.0002560",\n            "total_tokens": 1161,\n            "total_price": "0.0012890",\n            "currency": "USD",\n            "latency": 0.7682376249867957\n        },\n        "retriever_resources": [\n            {\n                "position": 1,\n                "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb",\n                "dataset_name": "iPhone",\n                "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00",\n                "document_name": "iPhone List",\n                "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a",\n                "score": 0.98457545,\n                "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""\n            }\n        ]\n    },\n    "created_at": 1705407629\n}\n'})})}),(0,r.jsx)(n.h3,{children:"ストリーミングモード"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'  data: {"event": "workflow_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "created_at": 1679586595}}\n  data: {"event": "node_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "created_at": 1679586595}}\n  data: {"event": "node_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "execution_metadata": {"total_tokens": 63127864, "total_price": 2.378, "currency": "USD"},  "created_at": 1679586595}}\n  data: {"event": "workflow_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "total_tokens": 63127864, "total_steps": "1", "created_at": 1679586595, "finished_at": 1679976595}}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " I", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": "\'m", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " glad", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " to", "created_at": 1679586595}\n  data: {"event": "message", "message_id" : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " meet", "created_at": 1679586595}\n  data: {"event": "message", "message_id" : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " you", "created_at": 1679586595}\n  data: {"event": "message_end", "id": "5e52ce04-874b-4d27-9045-b3bc80def685", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "metadata": {"usage": {"prompt_tokens": 1033, "prompt_unit_price": "0.001", "prompt_price_unit": "0.001", "prompt_price": "0.0010330", "completion_tokens": 135, "completion_unit_price": "0.002", "completion_price_unit": "0.001", "completion_price": "0.0002700", "total_tokens": 1168, "total_price": "0.0013030", "currency": "USD", "latency": 1.381760165997548}, "retriever_resources": [{"position": 1, "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb", "dataset_name": "iPhone", "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00", "document_name": "iPhone List", "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a", "score": 0.98457545, "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""}]}}\n  data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}\n  data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/upload",method:"POST",title:"ファイルアップロード",name:"#file-upload"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"メッセージ送信時に使用するファイルをアップロードし、画像とテキストのマルチモーダル理解を可能にします。\nアプリケーションでサポートされている形式をサポートします。\nアップロードされたファイルは現在のエンドユーザーのみが使用できます。"}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(n.p,{children:["このインターフェースは",(0,r.jsx)(n.code,{children:"multipart/form-data"}),"リクエストを必要とします。"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file"})," (File) 必須\nアップロードするファイル。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) 必須\nユーザー識別子、開発者のルールによって定義され、アプリケーション内で一意でなければなりません。サービス API は WebApp によって作成された会話を共有しません。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsx)(n.p,{children:"アップロードが成功すると、サーバーはファイルの ID と関連情報を返します。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (uuid) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) ファイル名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"size"})," (int) ファイルサイズ（バイト）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"extension"})," (string) ファイル拡張子"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mime_type"})," (string) ファイルの MIME タイプ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by"})," (uuid) エンドユーザーID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"エラー"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"no_file_uploaded"}),", ファイルが提供されなければなりません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"too_many_files"}),", 現在は 1 つのファイルのみ受け付けます"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"unsupported_preview"}),", ファイルはプレビューをサポートしていません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"unsupported_estimate"}),", ファイルは推定をサポートしていません"]}),"\n",(0,r.jsxs)(n.li,{children:["413, ",(0,r.jsx)(n.code,{children:"file_too_large"}),", ファイルが大きすぎます"]}),"\n",(0,r.jsxs)(n.li,{children:["415, ",(0,r.jsx)(n.code,{children:"unsupported_file_type"}),", サポートされていない拡張子、現在はドキュメントファイルのみ受け付けます"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_connection_failed"}),", S3 サービスに接続できません"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_permission_denied"}),", S3 にファイルをアップロードする権限がありません"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_file_too_large"}),", ファイルが S3 のサイズ制限を超えています"]}),"\n",(0,r.jsx)(n.li,{children:"500, 内部サーバーエラー"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"リクエスト例"}),(0,r.jsx)(eu,{title:"リクエスト",tag:"POST",label:"/files/upload",targetCode:`curl -X POST '${e.appDetail.api_base_url}/files/upload' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=image/[png|jpeg|jpg|webp|gif]' \\
--form 'user=abc-123'`}),(0,r.jsx)(n.h3,{children:"応答例"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "72fa9618-8f89-4a37-9b33-7e1178a24a67",\n  "name": "example.png",\n  "size": 1024,\n  "extension": "png",\n  "mime_type": "image/png",\n  "created_by": "6ad1ab0a-73ff-4ac1-b9e4-cdb312f71f13",\n  "created_at": 1577836800,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/:file_id/preview",method:"GET",title:"ファイルプレビュー",name:"#file-preview"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"アップロードされたファイルをプレビューまたはダウンロードします。このエンドポイントを使用すると、以前にファイルアップロード API でアップロードされたファイルにアクセスできます。"}),(0,r.jsx)("i",{children:"ファイルは、リクエストしているアプリケーションのメッセージ範囲内にある場合のみアクセス可能です。"}),(0,r.jsx)(n.h3,{children:"パスパラメータ"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_id"})," (string) 必須\nプレビューするファイルの一意識別子。ファイルアップロード API レスポンスから取得します。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"クエリパラメータ"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"as_attachment"})," (boolean) オプション\nファイルを添付ファイルとして強制ダウンロードするかどうか。デフォルトは ",(0,r.jsx)(n.code,{children:"false"}),"（ブラウザでプレビュー）。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"レスポンス"}),(0,r.jsx)(n.p,{children:"ブラウザ表示またはダウンロード用の適切なヘッダー付きでファイル内容を返します。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Type"})," ファイル MIME タイプに基づいて設定"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Length"})," ファイルサイズ（バイト、利用可能な場合）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Disposition"})," ",(0,r.jsx)(n.code,{children:"as_attachment=true"}),' の場合は "attachment" に設定']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Cache-Control"})," パフォーマンス向上のためのキャッシュヘッダー"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Accept-Ranges"}),' 音声/動画ファイルの場合は "bytes" に設定']}),"\n"]}),(0,r.jsx)(n.h3,{children:"エラー"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"invalid_param"}),", パラメータ入力異常"]}),"\n",(0,r.jsxs)(n.li,{children:["403, ",(0,r.jsx)(n.code,{children:"file_access_denied"}),", ファイルアクセス拒否またはファイルが現在のアプリケーションに属していません"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"file_not_found"}),", ファイルが見つからないか削除されています"]}),"\n",(0,r.jsx)(n.li,{children:"500, サーバー内部エラー"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"リクエスト例"}),(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/files/:file_id/preview",targetCode:`curl -X GET '${e.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(n.h3,{children:"添付ファイルとしてダウンロード"}),(0,r.jsx)(eu,{title:"ダウンロードリクエスト",tag:"GET",label:"/files/:file_id/preview?as_attachment=true",targetCode:`curl -X GET '${e.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview?as_attachment=true' \\
--header 'Authorization: Bearer {api_key}' \\
--output downloaded_file.png`}),(0,r.jsx)(n.h3,{children:"レスポンスヘッダー例"}),(0,r.jsx)(eu,{title:"Response Headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"Content-Type: image/png\nContent-Length: 1024\nCache-Control: public, max-age=3600\n"})})}),(0,r.jsx)(n.h3,{children:"ダウンロードレスポンスヘッダー"}),(0,r.jsx)(eu,{title:"Download Response Headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"Content-Type: image/png\nContent-Length: 1024\nContent-Disposition: attachment; filename*=UTF-8''example.png\nCache-Control: public, max-age=3600\n"})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/chat-messages/:task_id/stop",method:"POST",title:"生成を停止",name:"#stop-generatebacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"ストリーミングモードでのみサポートされています。"}),(0,r.jsx)(n.h3,{children:"パス"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスク ID、ストリーミングチャンクの返り値から取得できます"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) 必須\nユーザー識別子、エンドユーザーの身元を定義するために使用され、送信メッセージインターフェースで渡されたユーザーと一致している必要があります。サービス API は WebApp によって作成された会話を共有しません。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"}),' (string) 常に"success"を返します']}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"リクエスト例"}),(0,r.jsx)(eu,{title:"リクエスト",tag:"POST",label:"/chat-messages/:task_id/stop",targetCode:`curl -X POST '${e.appDetail.api_base_url}/chat-messages/:task_id/stop' \\
-H 'Authorization: Bearer {api_key}' \\
-H 'Content-Type: application/json' \\
--data-raw '{
  "user": "abc-123"
}'`}),(0,r.jsx)(n.h3,{children:"応答例"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages/:message_id/feedbacks",method:"POST",title:"メッセージフィードバック",name:"#feedbacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"エンドユーザーはフィードバックメッセージを提供でき、アプリケーション開発者が期待される出力を最適化するのを支援します。"}),(0,r.jsx)(n.h3,{children:"パス"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"message_id",type:"string",children:(0,r.jsx)(n.p,{children:"メッセージID"})},"message_id")}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"rating",type:"string",children:(0,r.jsxs)(n.p,{children:["アップボートは",(0,r.jsx)(n.code,{children:"like"}),"、ダウンボートは",(0,r.jsx)(n.code,{children:"dislike"}),"、アップボートの取り消しは",(0,r.jsx)(n.code,{children:"null"})]})},"rating"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子、開発者のルールによって定義され、アプリケーション内で一意でなければなりません。"})},"user"),(0,r.jsx)(ef,{name:"content",type:"string",children:(0,r.jsx)(n.p,{children:"メッセージのフィードバックです。"})},"content")]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"}),' (string) 常に"success"を返します']}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"POST",label:"/messages/:message_id/feedbacks",targetCode:`curl -X POST '${e.appDetail.api_base_url}/messages/:message_id/feedbacks' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "rating": "like",
  "user": "abc-123",
  "content": "message feedback information"
}'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/app/feedbacks",method:"GET",title:"アプリのメッセージの「いいね」とフィードバックを取得",name:"#app-feedbacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"アプリのエンドユーザーからのフィードバックや「いいね」を取得します。"}),(0,r.jsx)(n.h3,{children:"クエリ"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"page",type:"string",children:(0,r.jsx)(n.p,{children:"（任意）ページ番号。デフォルト値：1"})},"page")}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"limit",type:"string",children:(0,r.jsx)(n.p,{children:"（任意）1ページあたりの件数。デフォルト値：20"})},"limit")}),(0,r.jsx)(n.h3,{children:"レスポンス"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (リスト) このアプリの「いいね」とフィードバックの一覧を返します。"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/app/feedbacks",targetCode:`curl -X GET '${e.appDetail.api_base_url}/app/feedbacks?page=1&limit=20' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'    {\n    "data": [\n        {\n            "id": "8c0fbed8-e2f9-49ff-9f0e-15a35bdd0e25",\n            "app_id": "f252d396-fe48-450e-94ec-e184218e7346",\n            "conversation_id": "2397604b-9deb-430e-b285-4726e51fd62d",\n            "message_id": "709c0b0f-0a96-4a4e-91a4-ec0889937b11",\n            "rating": "like",\n            "content": "message feedback information-3",\n            "from_source": "user",\n            "from_end_user_id": "74286412-9a1a-42c1-929c-01edb1d381d5",\n            "from_account_id": null,\n            "created_at": "2025-04-24T09:24:38",\n            "updated_at": "2025-04-24T09:24:38"\n        }\n    ]\n    }\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages/{message_id}/suggested",method:"GET",title:"次の推奨質問",name:"#suggested"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"現在のメッセージに対する次の質問の提案を取得します"}),(0,r.jsx)(n.h3,{children:"パスパラメータ"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"message_id",type:"string",children:(0,r.jsx)(n.p,{children:"メッセージID"})},"message_id")}),(0,r.jsx)(n.h3,{children:"クエリ"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子、エンドユーザーの身元を定義するために使用され、統計のために使用されます。\nアプリケーション内で開発者によって一意に定義されるべきです。"})},"user")})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/messages/{message_id}/suggested",targetCode:`curl --location --request GET '${e.appDetail.api_base_url}/messages/{message_id}/suggested?user=abc-123' \\
--header 'Authorization: Bearer ENTER-YOUR-SECRET-KEY' \\
--header 'Content-Type: application/json'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success",\n  "data": [\n        "a",\n        "b",\n        "c"\n    ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages",method:"GET",title:"会話履歴メッセージを取得",name:"#messages"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsxs)(n.p,{children:["スクロールロード形式で履歴チャット記録を返し、最初のページは最新の",(0,r.jsx)(n.code,{children:"{limit}"}),"メッセージを返します。つまり、逆順です。"]}),(0,r.jsx)(n.h3,{children:"クエリ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"会話ID"})},"conversation_id"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子、エンドユーザーの身元を定義するために使用され、統計のために使用されます。\nアプリケーション内で開発者によって一意に定義されるべきです。"})},"user"),(0,r.jsx)(ef,{name:"first_id",type:"string",children:(0,r.jsx)(n.p,{children:"現在のページの最初のチャット記録のID、デフォルトはnullです。"})},"first_id"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"1回のリクエストで返すチャット履歴メッセージの数、デフォルトは20です。"})},"limit")]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object]) メッセージリスト","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) メッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会話ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) ユーザー入力パラメータ。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"query"})," (string) ユーザー入力/質問内容。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_files"})," (array[object]) メッセージファイル","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) ファイルタイプ、画像の場合はimage"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," (string) ファイルプレビューURL、ファイルアクセスにはファイルプレビューAPI（",(0,r.jsx)(n.code,{children:"/files/{file_id}/preview"}),"）を使用してください"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"belongs_to"})," (string) 所属、userまたはassistant"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) 応答メッセージ内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 作成タイムスタンプ、例：1705395332"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"feedback"})," (object) フィードバック情報","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"rating"})," (string) アップボートは",(0,r.jsx)(n.code,{children:"like"})," / ダウンボートは",(0,r.jsx)(n.code,{children:"dislike"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) 引用と帰属リスト"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool) 次のページがあるかどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) 返された項目数、入力がシステム制限を超える場合、システム制限数を返します"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/messages",targetCode:`curl -X GET '${e.appDetail.api_base_url}/messages?user=abc-123&conversation_id={conversation_id}'
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(n.h3,{children:"応答例"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "limit": 20,\n  "has_more": false,\n  "data": [\n    {\n        "id": "a076a87f-31e5-48dc-b452-0061adbbc922",\n        "conversation_id": "cd78daf6-f9e4-4463-9ff2-54257230a0ce",\n        "inputs": {\n            "name": "dify"\n        },\n        "query": "iphone 13 pro",\n        "answer": "iPhone 13 Proは2021年9月24日に発売され、6.1インチのディスプレイと1170 x 2532の解像度を備えています。Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)プロセッサ、6 GBのRAMを搭載し、128 GB、256 GB、512 GB、1 TBのストレージオプションを提供します。カメラは12 MP、バッテリー容量は3095 mAhで、iOS 15を搭載しています。",\n        "message_files": [],\n        "feedback": null,\n        "retriever_resources": [\n            {\n                "position": 1,\n                "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb",\n                "dataset_name": "iPhone",\n                "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00",\n                "document_name": "iPhone List",\n                "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a",\n                "score": 0.98457545,\n                "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""\n            }\n        ],\n        "created_at": 1705569239,\n    }\n  ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations",method:"GET",title:"会話を取得",name:"#conversations"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"現在のユーザーの会話リストを取得し、デフォルトで最新の 20 件を返します。"}),(0,r.jsx)(n.h3,{children:"クエリ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子、エンドユーザーの身元を定義するために使用され、統計のために使用されます。\nアプリケーション内で開発者によって一意に定義されるべきです。"})},"user"),(0,r.jsx)(ef,{name:"last_id",type:"string",children:(0,r.jsx)(n.p,{children:"(Optional)現在のページの最後の記録のID、デフォルトはnullです。"})},"last_id"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"(Optional)1回のリクエストで返す記録の数、デフォルトは最新の20件です。最大100、最小1。"})},"limit"),(0,r.jsxs)(ef,{name:"sort_by",type:"string",children:[(0,r.jsx)(n.p,{children:"(Optional)ソートフィールド、デフォルト：-updated_at（更新時間で降順にソート）"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"利用可能な値：created_at, -created_at, updated_at, -updated_at"}),"\n",(0,r.jsx)(n.li,{children:'フィールドの前の記号は順序または逆順を表し、"-"は逆順を表します。'}),"\n"]})]},"sort_by")]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object]) 会話のリスト","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) 会話ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 会話名、デフォルトではLLMによって生成されます。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) ユーザー入力パラメータ。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"introduction"})," (string) 紹介"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 作成タイムスタンプ、例：1705395332"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (timestamp) 更新タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) 返されたエントリ数、入力がシステム制限を超える場合、システム制限数が返されます"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/conversations",targetCode:`curl -X GET '${e.appDetail.api_base_url}/conversations?user=abc-123&last_id=&limit=20' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "limit": 20,\n  "has_more": false,\n  "data": [\n    {\n      "id": "10799fb8-64f7-4296-bbf7-b42bfbe0ae54",\n      "name": "新しいチャット",\n      "inputs": {\n          "book": "book",\n          "myName": "Lucy"\n      },\n      "status": "normal",\n      "created_at": 1679667915,\n      "updated_at": 1679667915\n    },\n    {\n      "id": "hSIhXBhNe8X1d8Et"\n      // ...\n    }\n  ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id",method:"DELETE",title:"会話を削除",name:"#delete"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"会話を削除します。"}),(0,r.jsx)(n.h3,{children:"パス"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会話ID"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子、開発者によって定義され、アプリケーション内で一意であることを保証しなければなりません。"})},"user")}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"}),' (string) 常に"success"を返します']}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"DELETE",label:"/conversations/:conversation_id",targetCode:`curl -X DELETE '${e.appDetail.api_base_url}/conversations/{conversation_id}' \\
--header 'Content-Type: application/json' \\
--header 'Accept: application/json' \\
--header 'Authorization: Bearer {api_key}' \\
--data '{
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"204 No Content\n"})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id/name",method:"POST",title:"会話の名前を変更",name:"#rename"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsx)(n.p,{children:"セッションの名前を変更します。セッション名は、複数のセッションをサポートするクライアントでの表示に使用されます。"}),(0,r.jsx)(n.h3,{children:"パス"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会話ID"]}),"\n"]}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"name",type:"string",children:(0,r.jsxs)(n.p,{children:["(Optional)会話の名前。",(0,r.jsx)(n.code,{children:"auto_generate"}),"が",(0,r.jsx)(n.code,{children:"true"}),"に設定されている場合、このパラメータは省略できます。"]})},"name"),(0,r.jsx)(ef,{name:"auto_generate",type:"bool",children:(0,r.jsxs)(n.p,{children:["(Optional)タイトルを自動生成、デフォルトは",(0,r.jsx)(n.code,{children:"false"})]})},"auto_generate"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子、開発者によって定義され、アプリケーション内で一意であることを保証しなければなりません。"})},"user")]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) 会話ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 会話名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) ユーザー入力パラメータ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 会話状態"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"introduction"})," (string) 紹介"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 作成タイムスタンプ、例：1705395332"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (timestamp) 更新タイムスタンプ、例：1705395332"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"POST",label:"/conversations/:conversation_id/name",targetCode:`curl -X POST '${e.appDetail.api_base_url}/conversations/{conversation_id}/name' \\
--header 'Content-Type: application/json' \\
--header 'Authorization: Bearer {api_key}' \\
--data-raw '{
  "name": "",
  "auto_generate": true,
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "id": "cd78daf6-f9e4-4463-9ff2-54257230a0ce",\n    "name": "チャット vs AI",\n    "inputs": {},\n    "status": "normal",\n    "introduction": "",\n    "created_at": 1705569238,\n    "updated_at": 1705569238\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id/variables",method:"GET",title:"会話変数の取得",name:"#conversation-variables"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"特定の会話から変数を取得します。このエンドポイントは、会話中に取得された構造化データを抽出するのに役立ちます。"}),(0,r.jsx)(n.h3,{children:"パスパラメータ"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"変数を取得する会話のID。"})},"conversation_id")}),(0,r.jsx)(n.h3,{children:"クエリパラメータ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子。開発者によって定義されたルールに従い、アプリケーション内で一意である必要があります。"})},"user"),(0,r.jsx)(ef,{name:"last_id",type:"string",children:(0,r.jsx)(n.p,{children:"(Optional)現在のページの最後の記録のID、デフォルトはnullです。"})},"last_id"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"(Optional)1回のリクエストで返す記録の数、デフォルトは最新の20件です。最大100、最小1。"})},"limit")]}),(0,r.jsx)(n.h3,{children:"レスポンス"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) ページごとのアイテム数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool) さらにアイテムがあるかどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object]) 変数のリスト","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) 変数 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 変数名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value_type"})," (string) 変数タイプ（文字列、数値、真偽値など）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value"})," (string) 変数値"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 変数の説明"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (int) 最終更新タイムスタンプ"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"エラー"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"conversation_not_exists"}),", 会話が見つかりません"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/conversations/:conversation_id/variables",debug:"true",targetCode:`curl -X GET '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables?user=abc-123' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"変数名フィルター付きリクエスト",language:"bash",targetCode:`curl -X GET '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables?user=abc-123&variable_name=customer_name' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "limit": 100,\n  "has_more": false,\n  "data": [\n    {\n      "id": "variable-uuid-1",\n      "name": "customer_name",\n      "value_type": "string",\n      "value": "John Doe",\n      "description": "会話から抽出された顧客名",\n      "created_at": 1650000000000,\n      "updated_at": 1650000000000\n    },\n    {\n      "id": "variable-uuid-2",\n      "name": "order_details",\n      "value_type": "json",\n      "value": "{\\"product\\":\\"Widget\\",\\"quantity\\":5,\\"price\\":19.99}",\n      "description": "顧客の注文詳細",\n      "created_at": 1650000000000,\n      "updated_at": 1650000000000\n    }\n  ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id/variables/:variable_id",method:"PUT",title:"会話変数の更新",name:"#update-conversation-variable"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"特定の会話変数の値を更新します。このエンドポイントは、名前、型、説明を保持しながら、会話中にキャプチャされた変数の値を変更することを可能にします。"}),(0,r.jsx)(n.h3,{children:"パスパラメータ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"更新する変数を含む会話のID。"})},"conversation_id"),(0,r.jsx)(ef,{name:"variable_id",type:"string",children:(0,r.jsx)(n.p,{children:"更新する変数のID。"})},"variable_id")]}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"value",type:"any",children:(0,r.jsx)(n.p,{children:"変数の新しい値。変数の期待される型（文字列、数値、オブジェクトなど）と一致する必要があります。"})},"value"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子。開発者によって定義されたルールに従い、アプリケーション内で一意である必要があります。"})},"user")]}),(0,r.jsx)(n.h3,{children:"レスポンス"}),(0,r.jsx)(n.p,{children:"以下を含む更新された変数オブジェクトを返します："}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) 変数ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 変数名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value_type"})," (string) 変数型（文字列、数値、オブジェクトなど）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value"})," (any) 更新された変数値"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 変数の説明"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (int) 最終更新タイムスタンプ"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"エラー"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"Type mismatch: variable expects {expected_type}, but got {actual_type} type"}),", 値の型が変数の期待される型と一致しません"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"conversation_not_exists"}),", 会話が見つかりません"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"conversation_variable_not_exists"}),", 変数が見つかりません"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"PUT",label:"/conversations/:conversation_id/variables/:variable_id",targetCode:`curl -X PUT '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\
--header 'Content-Type: application/json' \\
--header 'Authorization: Bearer {api_key}' \\
--data-raw '{
  "value": "Updated Value",
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"異なる値型での更新",targetCode:[{title:"文字列値",code:`curl -X PUT '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\
--header 'Content-Type: application/json' \\
--header 'Authorization: Bearer {api_key}' \\
--data-raw '{
  "value": "新しい文字列値",
  "user": "abc-123"
}'`},{title:"数値",code:`curl -X PUT '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\
--header 'Content-Type: application/json' \\
--header 'Authorization: Bearer {api_key}' \\
--data-raw '{
  "value": 42,
  "user": "abc-123"
}'`},{title:"オブジェクト値",code:`curl -X PUT '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\
--header 'Content-Type: application/json' \\
--header 'Authorization: Bearer {api_key}' \\
--data-raw '{
  "value": {"product": "Widget", "quantity": 10, "price": 29.99},
  "user": "abc-123"
}'`}]}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "variable-uuid-1",\n  "name": "customer_name",\n  "value_type": "string",\n  "value": "Updated Value",\n  "description": "会話から抽出された顧客名",\n  "created_at": 1650000000000,\n  "updated_at": 1650000001000\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/audio-to-text",method:"POST",title:"音声からテキストへ",name:"#audio-to-text"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"このエンドポイントは multipart/form-data リクエストを必要とします。"}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"file",type:"file",children:(0,r.jsxs)(n.p,{children:["オーディオファイル。\nサポートされている形式：",(0,r.jsx)(n.code,{children:"['mp3', 'mp4', 'mpeg', 'mpga', 'm4a', 'wav', 'webm']"}),"\nファイルサイズ制限：15MB"]})},"file"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子、開発者のルールによって定義され、アプリケーション内で一意でなければなりません。"})},"user")]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text"})," (string) 出力テキスト"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"POST",label:"/audio-to-text",targetCode:`curl -X POST '${e.appDetail.api_base_url}/audio-to-text' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=audio/[mp3|mp4|mpeg|mpga|m4a|wav|webm]'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "text": ""\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/text-to-audio",method:"POST",title:"テキストから音声へ",name:"#text-to-audio"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"テキストを音声に変換します。"}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"message_id",type:"str",children:(0,r.jsx)(n.p,{children:"Difyによって生成されたテキストメッセージの場合、生成されたメッセージIDを直接渡します。バックエンドはメッセージIDを使用して対応する内容を検索し、音声情報を直接合成します。message_idとtextが同時に提供される場合、message_idが優先されます。"})},"message_id"),(0,r.jsx)(ef,{name:"text",type:"str",children:(0,r.jsx)(n.p,{children:"音声生成コンテンツ。"})},"text"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子、開発者によって定義され、アプリ内で一意であることを保証しなければなりません。"})},"user")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"POST",label:"/text-to-audio",targetCode:`curl -o text-to-audio.mp3 -X POST '${e.appDetail.api_base_url}/text-to-audio' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290",
  "text": "Hello Dify",
  "user": "abc-123",
}'`}),(0,r.jsx)(eu,{title:"ヘッダー",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "Content-Type": "audio/wav"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/info",method:"GET",title:"アプリケーションの基本情報を取得",name:"#info"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"このアプリケーションの基本情報を取得するために使用されます"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) アプリケーションの名前"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) アプリケーションの説明"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tags"})," (array[string]) アプリケーションのタグ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) アプリケーションのモード"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"author_name"})," (string) 作者の名前"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/info",targetCode:`curl -X GET '${e.appDetail.api_base_url}/info' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "My App",\n  "description": "This is my app.",\n  "tags": [\n    "tag1",\n    "tag2"\n  ],\n  "mode": "advanced-chat",\n  "author_name": "Dify"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/parameters",method:"GET",title:"アプリケーションのパラメータ情報を取得",name:"#parameters"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"ページに入る際に、機能、入力パラメータ名、タイプ、デフォルト値などの情報を取得するために使用されます。"}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"opening_statement"})," (string) 開始の挨拶"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"suggested_questions"})," (array[string]) 開始時の推奨質問のリスト"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"suggested_questions_after_answer"})," (object) 答えを有効にした後の質問を提案します。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"speech_to_text"})," (object) 音声からテキストへ","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text_to_speech"})," (object) テキストから音声へ","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"voice"})," (string) 音声タイプ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"language"})," (string) 言語"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"autoPlay"})," (string) 自動再生","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"}),"  有効"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"disabled"})," 無効"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resource"})," (object) 引用と帰属","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"annotation_reply"})," (object) 注釈返信","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user_input_form"})," (array[object]) ユーザー入力フォームの設定","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text-input"})," (object) テキスト入力コントロール","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 変数表示ラベル名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 変数ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 必須かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) デフォルト値"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"paragraph"})," (object) 段落テキスト入力コントロール","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 変数表示ラベル名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 変数ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 必須かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) デフォルト値"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"select"})," (object) ドロップダウンコントロール","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 変数表示ラベル名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 変数ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 必須かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) デフォルト値"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"options"})," (array[string]) オプション値"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_upload"})," (object) ファイルアップロード設定","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," (object) ドキュメント設定\n現在サポートされているドキュメントタイプ：",(0,r.jsx)(n.code,{children:"txt"}),", ",(0,r.jsx)(n.code,{children:"md"}),", ",(0,r.jsx)(n.code,{children:"markdown"}),", ",(0,r.jsx)(n.code,{children:"pdf"}),", ",(0,r.jsx)(n.code,{children:"html"}),", ",(0,r.jsx)(n.code,{children:"xlsx"}),", ",(0,r.jsx)(n.code,{children:"xls"}),", ",(0,r.jsx)(n.code,{children:"docx"}),", ",(0,r.jsx)(n.code,{children:"csv"}),", ",(0,r.jsx)(n.code,{children:"eml"}),", ",(0,r.jsx)(n.code,{children:"msg"}),", ",(0,r.jsx)(n.code,{children:"pptx"}),", ",(0,r.jsx)(n.code,{children:"ppt"}),", ",(0,r.jsx)(n.code,{children:"xml"}),", ",(0,r.jsx)(n.code,{children:"epub"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) ドキュメント数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," (object) 画像設定\n現在サポートされている画像タイプ：",(0,r.jsx)(n.code,{children:"png"}),", ",(0,r.jsx)(n.code,{children:"jpg"}),", ",(0,r.jsx)(n.code,{children:"jpeg"}),", ",(0,r.jsx)(n.code,{children:"webp"}),", ",(0,r.jsx)(n.code,{children:"gif"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 画像数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (object) オーディオ設定\n現在サポートされているオーディオタイプ：",(0,r.jsx)(n.code,{children:"mp3"}),", ",(0,r.jsx)(n.code,{children:"m4a"}),", ",(0,r.jsx)(n.code,{children:"wav"}),", ",(0,r.jsx)(n.code,{children:"webm"}),", ",(0,r.jsx)(n.code,{children:"amr"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) オーディオ数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," (object) ビデオ設定\n現在サポートされているビデオタイプ：",(0,r.jsx)(n.code,{children:"mp4"}),", ",(0,r.jsx)(n.code,{children:"mov"}),", ",(0,r.jsx)(n.code,{children:"mpeg"}),", ",(0,r.jsx)(n.code,{children:"mpga"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) ビデオ数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," (object) カスタム設定","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) カスタム数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"system_parameters"})," (object) システムパラメータ","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_size_limit"})," (int) ドキュメントアップロードサイズ制限（MB）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image_file_size_limit"})," (int) 画像ファイルアップロードサイズ制限（MB）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio_file_size_limit"})," (int) オーディオファイルアップロードサイズ制限（MB）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video_file_size_limit"})," (int) ビデオファイルアップロードサイズ制限（MB）"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/parameters",targetCode:`curl -X GET '${e.appDetail.api_base_url}/parameters'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "opening_statement": "こんにちは！",\n  "suggested_questions_after_answer": {\n      "enabled": true\n  },\n  "speech_to_text": {\n      "enabled": true\n  },\n  "text_to_speech": {\n      "enabled": true,\n      "voice": "sambert-zhinan-v1",\n      "language": "zh-Hans",\n      "autoPlay": "disabled"\n  },\n  "retriever_resource": {\n      "enabled": true\n  },\n  "annotation_reply": {\n      "enabled": true\n  },\n  "user_input_form": [\n      {\n          "paragraph": {\n              "label": "クエリ",\n              "variable": "query",\n              "required": true,\n              "default": ""\n          }\n      }\n  ],\n  "file_upload": {\n      "image": {\n          "enabled": false,\n          "number_limits": 3,\n          "detail": "high",\n          "transfer_methods": [\n              "remote_url",\n              "local_file"\n          ]\n      }\n  },\n  "system_parameters": {\n      "file_size_limit": 15,\n      "image_file_size_limit": 10,\n      "audio_file_size_limit": 50,\n      "video_file_size_limit": 100\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/meta",method:"GET",title:"アプリケーションのメタ情報を取得",name:"#meta"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"このアプリケーションのツールのアイコンを取得するために使用されます"}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool_icons"}),"(object[string]) ツールアイコン","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool_name"})," (string)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon"})," (object|string)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["(object) アイコンオブジェクト","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"background"})," (string) 背景色（16 進数形式）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"content"}),"(string) 絵文字"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"(string) アイコンの URL"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/meta",targetCode:`curl -X GET '${e.appDetail.api_base_url}/meta' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "tool_icons": {\n    "dalle2": "https://cloud.dify.ai/console/api/workspaces/current/tool-provider/builtin/dalle/icon",\n    "api_tool": {\n      "background": "#252525",\n      "content": "\\ud83d\\ude01"\n    }\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/site",method:"GET",title:"アプリのWebApp設定を取得",name:"#site"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"アプリの WebApp 設定を取得するために使用します。"}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) WebApp 名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"chat_color_theme"})," (string) チャットの色テーマ、16 進数形式"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"chat_color_theme_inverted"})," (bool) チャットの色テーマを反転するかどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_type"})," (string) アイコンタイプ、",(0,r.jsx)(n.code,{children:"emoji"}),"-絵文字、",(0,r.jsx)(n.code,{children:"image"}),"-画像"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon"})," (string) アイコン。",(0,r.jsx)(n.code,{children:"emoji"}),"タイプの場合は絵文字、",(0,r.jsx)(n.code,{children:"image"}),"タイプの場合は画像 URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_background"})," (string) 16 進数形式の背景色"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_url"})," (string) アイコンの URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 説明"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"copyright"})," (string) 著作権情報"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"privacy_policy"})," (string) プライバシーポリシーのリンク"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom_disclaimer"})," (string) カスタム免責事項"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default_language"})," (string) デフォルト言語"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"show_workflow_steps"})," (bool) ワークフローの詳細を表示するかどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"use_icon_as_answer_icon"})," (bool) WebApp のアイコンをチャット内の🤖に置き換えるかどうか"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/site",targetCode:`curl -X GET '${e.appDetail.api_base_url}/site' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "title": "My App",\n  "chat_color_theme": "#ff4a4a",\n  "chat_color_theme_inverted": false,\n  "icon_type": "emoji",\n  "icon": "😄",\n  "icon_background": "#FFEAD5",\n  "icon_url": null,\n  "description": "This is my app.",\n  "copyright": "all rights reserved",\n  "privacy_policy": "",\n  "custom_disclaimer": "All generated by AI",\n  "default_language": "en-US",\n  "show_workflow_steps": false,\n  "use_icon_as_answer_icon": false,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{})]})}function eA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...b(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(eP,{...e})}):eP(e)}function eR(e){let n={a:"a",code:"code",h1:"h1",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...b(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{children:"工作流编排对话型应用 API"}),"\n",(0,r.jsx)(n.p,{children:"对话应用支持会话持久化，可将之前的聊天记录作为上下文进行回答，可适用于聊天/客服 AI 等。"}),"\n",(0,r.jsxs)("div",{children:[(0,r.jsx)(n.h3,{children:"基础 URL"}),(0,r.jsx)(eu,{title:"Code",targetCode:e.appDetail.api_base_url}),(0,r.jsx)(n.h3,{children:"鉴权"}),(0,r.jsxs)(n.p,{children:["Service API 使用 ",(0,r.jsx)(n.code,{children:"API-Key"})," 进行鉴权。\n",(0,r.jsx)("i",{children:(0,r.jsxs)(n.strong,{children:["强烈建议开发者把 ",(0,r.jsx)(n.code,{children:"API-Key"})," 放在后端存储，而非分享或者放在客户端存储，以免 ",(0,r.jsx)(n.code,{children:"API-Key"})," 泄露，导致财产损失。"]})}),"\n所有 API 请求都应在 ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"Authorization"})})," HTTP Header 中包含您的 ",(0,r.jsx)(n.code,{children:"API-Key"}),"，如下所示："]}),(0,r.jsx)(eu,{title:"Code",targetCode:"Authorization: Bearer {API_KEY}"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/chat-messages",method:"POST",title:"发送对话消息",name:"#Create-Chat-Message"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"创建会话消息。"}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"query",type:"string",children:(0,r.jsx)(n.p,{children:"用户输入/提问内容。"})},"query"),(0,r.jsx)(ef,{name:"inputs",type:"object",children:(0,r.jsxs)(n.p,{children:["允许传入 App 定义的各变量值。\ninputs 参数包含了多组键值对（Key/Value pairs），每组的键对应一个特定变量，每组的值则是该变量的具体值。\n如果变量是文件类型，请指定一个包含以下 ",(0,r.jsx)(n.code,{children:"files"})," 中所述键的对象。\n默认 ",(0,r.jsx)(n.code,{children:"{}"})]})},"inputs"),(0,r.jsx)(ef,{name:"response_mode",type:"string",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"streaming"})," 流式模式（推荐）。基于 SSE（",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events",children:"Server-Sent Events"})}),"）实现类似打字机输出方式的流式返回。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"blocking"})," 阻塞模式，等待执行完毕后返回结果。（请求若流程较长可能会被中断）。\n",(0,r.jsx)("i",{children:"由于 Cloudflare 限制，请求会在 100 秒超时无返回后中断。"})]}),"\n"]})},"response_mode"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，用于定义终端用户的身份，方便检索、统计。\n由开发者定义规则，需保证用户标识在应用内唯一。服务 API 不会共享 WebApp 创建的对话。"})},"user"),(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"（选填）会话 ID，需要基于之前的聊天记录继续对话，必须传之前消息的 conversation_id。"})},"conversation_id"),(0,r.jsxs)(ef,{name:"files",type:"array[object]",children:[(0,r.jsx)(n.p,{children:"文件列表，适用于传入文件结合文本理解并回答问题，仅当模型支持 Vision/Video 能力时可用。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) 支持类型：","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," 具体类型包含：'TXT', 'MD', 'MARKDOWN', 'MDX', 'PDF', 'HTML', 'XLSX', 'XLS', 'VTT', 'PROPERTIES', 'DOC', 'DOCX', 'CSV', 'EML', 'MSG', 'PPTX', 'PPT', 'XML', 'EPUB'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," 具体类型包含：'JPG', 'JPEG', 'PNG', 'GIF', 'WEBP', 'SVG'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," 具体类型包含：'MP3', 'M4A', 'WAV', 'WEBM', 'MPGA'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," 具体类型包含：'MP4', 'MOV', 'MPEG', 'WEBM'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," 具体类型包含：其他文件类型"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_method"})," (string)  传递方式:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"remote_url"}),": 文件地址。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"local_file"}),": 上传文件。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," 文件地址。（仅当传递方式为 ",(0,r.jsx)(n.code,{children:"remote_url"})," 时）。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"upload_file_id"})," 上传文件 ID。（仅当传递方式为 ",(0,r.jsx)(n.code,{children:"local_file "}),"时）。"]}),"\n"]})]},"files"),(0,r.jsx)(ef,{name:"auto_generate_name",type:"bool",children:(0,r.jsxs)(n.p,{children:["（选填）自动生成标题，默认 ",(0,r.jsx)(n.code,{children:"true"}),"。 若设置为 ",(0,r.jsx)(n.code,{children:"false"}),"，则可通过调用会话重命名接口并设置 ",(0,r.jsx)(n.code,{children:"auto_generate"})," 为 ",(0,r.jsx)(n.code,{children:"true"})," 实现异步生成标题。"]})},"auto_generate_name"),(0,r.jsx)(ef,{name:"workflow_id",type:"string",children:(0,r.jsx)(n.p,{children:"（选填）工作流ID，用于指定特定版本，如果不提供则使用默认的已发布版本。"})},"workflow_id"),(0,r.jsxs)(ef,{name:"trace_id",type:"string",children:[(0,r.jsxs)(n.p,{children:["（选填）链路追踪ID。适用于与业务系统已有的trace组件打通，实现端到端分布式追踪等场景。如果未指定，系统会自动生成",(0,r.jsx)("code",{children:"trace_id"}),"。支持以下三种方式传递，具体优先级依次为：",(0,r.jsx)("br",{})]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Header：通过 HTTP Header ",(0,r.jsx)("code",{children:"X-Trace-Id"})," 传递，优先级最高。",(0,r.jsx)("br",{})]}),"\n",(0,r.jsxs)(n.li,{children:["Query 参数：通过 URL 查询参数 ",(0,r.jsx)("code",{children:"trace_id"})," 传递。",(0,r.jsx)("br",{})]}),"\n",(0,r.jsxs)(n.li,{children:["Request Body：通过请求体字段 ",(0,r.jsx)("code",{children:"trace_id"})," 传递（即本字段）。",(0,r.jsx)("br",{})]}),"\n"]})]},"trace_id")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(eb,{children:[(0,r.jsxs)(n.p,{children:["当 ",(0,r.jsx)(n.code,{children:"response_mode"})," 为 ",(0,r.jsx)(n.code,{children:"blocking"})," 时，返回 ChatCompletionResponse object。\n当 ",(0,r.jsx)(n.code,{children:"response_mode"})," 为 ",(0,r.jsx)(n.code,{children:"streaming"}),"时，返回 ChunkChatCompletionResponse object 流式序列。"]}),(0,r.jsx)(n.h3,{children:"ChatCompletionResponse"}),(0,r.jsxs)(n.p,{children:["返回完整的 App 结果，",(0,r.jsx)(n.code,{children:"Content-Type"})," 为 ",(0,r.jsx)(n.code,{children:"application/json"}),"。"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) 事件类型，固定为 ",(0,r.jsx)(n.code,{children:"message"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) 唯一ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会话 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) App 模式，固定为 chat"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) 完整回复内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"metadata"})," (object) 元数据","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usage"})," (Usage) 模型用量信息"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) 引用和归属分段列表"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 消息创建时间戳，如：1705395332"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"ChunkChatCompletionResponse"}),(0,r.jsxs)(n.p,{children:["返回 App 输出的流式块，",(0,r.jsx)(n.code,{children:"Content-Type"})," 为 ",(0,r.jsx)(n.code,{children:"text/event-stream"}),"。\n每个流式块均为 data: 开头，块之间以 \\n\\n 即两个换行符分隔，如下所示："]}),(0,r.jsx)(eu,{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'data: {"event": "message", "task_id": "900bbd43-dc0b-4383-a372-aa6e6c414227", "id": "663c5084-a254-4040-8ad3-51f2a3c1a77c", "answer": "Hi", "created_at": 1705398420}\\n\\n\n'})})}),(0,r.jsx)(n.p,{children:"流式块中根据 event 不同，结构也不同："}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message"})," LLM 返回文本块事件，即：完整的文本以分块的方式输出。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会话 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) LLM 返回文本块内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳，如：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_file"})," 文件事件，表示有新文件需要展示","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) 文件唯一ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) 文件类型，目前仅为image"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"belongs_to"})," (string) 文件归属，user或assistant，该接口返回仅为 ",(0,r.jsx)(n.code,{children:"assistant"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," (string) 文件访问地址"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"}),"  (string) 会话ID"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_end"})," 消息结束事件，收到此事件则代表流式返回结束。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会话 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"metadata"})," (object) 元数据","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usage"})," (Usage) 模型用量信息"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) 引用和归属分段列表"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message"})," TTS 音频流事件，即：语音合成输出。内容是Mp3格式的音频块，使用 base64 编码后的字符串，播放的时候直接解码即可。(开启自动播放才有此消息)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 语音合成之后的音频块使用 Base64 编码之后的文本内容，播放的时候直接 base64 解码送入播放器即可"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳，如：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message_end"})," TTS 音频流结束事件，收到这个事件表示音频流返回结束。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 结束事件是没有音频的，所以这里是空字符串"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳，如：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_replace"})," 消息内容替换事件。\n开启内容审查和审查输出内容时，若命中了审查条件，则会通过此事件替换消息内容为预设回复。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会话 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) 替换内容（直接替换 LLM 所有回复文本）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳，如：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: workflow_started"})," workflow 开始执行","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) 固定为 ",(0,r.jsx)(n.code,{children:"workflow_started"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 详细内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) 关联 Workflow ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 开始时间"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: node_started"})," node 开始执行","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) 固定为 ",(0,r.jsx)(n.code,{children:"node_started"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 详细内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_id"})," (string) 节点 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_type"})," (string) 节点类型"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) 节点名称"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index"})," (int) 执行序号，用于展示 Tracing Node 顺序"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"predecessor_node_id"})," (string) 前置节点 ID，用于画布展示执行路径"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) 节点中所有使用到的前置节点变量内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 开始时间"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: node_finished"})," node 执行结束，成功失败同一事件中不同状态","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) 固定为 ",(0,r.jsx)(n.code,{children:"node_finished"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 详细内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) node 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_id"})," (string) 节点 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index"})," (int) 执行序号，用于展示 Tracing Node 顺序"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"predecessor_node_id"})," (string) optional 前置节点 ID，用于画布展示执行路径"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) 节点中所有使用到的前置节点变量内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"process_data"})," (json) Optional 节点过程数据"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) Optional 输出内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 执行状态 ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) Optional 错误原因"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) Optional 耗时(s)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"execution_metadata"})," (json) 元数据","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) optional 总使用 tokens"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_price"})," (decimal) optional 总费用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"currency"})," (string) optional 货币，如 ",(0,r.jsx)(n.code,{children:"USD"})," / ",(0,r.jsx)(n.code,{children:"RMB"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 开始时间"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: workflow_finished"})," workflow 执行结束，成功失败同一事件中不同状态","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) 固定为 ",(0,r.jsx)(n.code,{children:"workflow_finished"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 详细内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) 关联 Workflow ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string)  执行状态 ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) Optional 输出内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) Optional 错误原因"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) Optional 耗时(s)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) Optional 总使用 tokens"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) 总步数（冗余），默认 0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 开始时间"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) 结束时间"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: error"}),"\n流式输出过程中出现的异常会以 stream event 形式输出，收到异常事件后即结束。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (int) HTTP 状态码"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"code"})," (string) 错误码"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message"})," (string) 错误消息"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: ping"})," 每 10s 一次的 ping 事件，保持连接存活。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"404，对话不存在"}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"invalid_param"}),"，传入参数异常"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"app_unavailable"}),"，App 配置不可用"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"provider_not_initialize"}),"，无可用模型凭据配置"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"provider_quota_exceeded"}),"，模型调用额度不足"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"model_currently_not_support"}),"，当前模型不可用"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"workflow_not_found"}),"，指定的工作流版本未找到"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"draft_workflow_error"}),"，无法使用草稿工作流版本"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"workflow_id_format_error"}),"，工作流ID格式错误，需要UUID格式"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"completion_request_error"}),"，文本生成失败"]}),"\n",(0,r.jsx)(n.li,{children:"500，服务内部异常"}),"\n"]})]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/chat-messages",targetCode:`curl -X POST '${e.appDetail.api_base_url}/chat-messages' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "inputs": ${JSON.stringify(e.inputs)},
  "query": "What are the specs of the iPhone 13 Pro Max?",
  "response_mode": "streaming",
  "conversation_id": "",
  "user": "abc-123",
  "files": [
      {
          "type": "image",
          "transfer_method": "remote_url",
          "url": "https://cloud.dify.ai/logo/logo-site.png"
      }
  ]
}'`}),(0,r.jsx)(n.h3,{children:"阻塞模式"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "event": "message",\n    "task_id": "c3800678-a077-43df-a102-53f23ed20b88",\n    "id": "9da23599-e713-473b-982c-4328d4f5c78a",\n    "message_id": "9da23599-e713-473b-982c-4328d4f5c78a",\n    "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2",\n    "mode": "chat",\n    "answer": "iPhone 13 Pro Max specs are listed here:...",\n    "metadata": {\n        "usage": {\n            "prompt_tokens": 1033,\n            "prompt_unit_price": "0.001",\n            "prompt_price_unit": "0.001",\n            "prompt_price": "0.0010330",\n            "completion_tokens": 128,\n            "completion_unit_price": "0.002",\n            "completion_price_unit": "0.001",\n            "completion_price": "0.0002560",\n            "total_tokens": 1161,\n            "total_price": "0.0012890",\n            "currency": "USD",\n            "latency": 0.7682376249867957\n        },\n        "retriever_resources": [\n            {\n                "position": 1,\n                "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb",\n                "dataset_name": "iPhone",\n                "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00",\n                "document_name": "iPhone List",\n                "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a",\n                "score": 0.98457545,\n                "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""\n            }\n        ]\n    },\n    "created_at": 1705407629\n}\n'})})}),(0,r.jsx)(n.h3,{children:"流式模式"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'  data: {"event": "workflow_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "created_at": 1679586595}}\n  data: {"event": "node_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "created_at": 1679586595}}\n  data: {"event": "node_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "execution_metadata": {"total_tokens": 63127864, "total_price": 2.378, "currency": "USD"},  "created_at": 1679586595}}\n  data: {"event": "workflow_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "total_tokens": 63127864, "total_steps": "1", "created_at": 1679586595, "finished_at": 1679976595}}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " I", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": "\'m", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " glad", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " to", "created_at": 1679586595}\n  data: {"event": "message", "message_id" : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " meet", "created_at": 1679586595}\n  data: {"event": "message", "message_id" : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " you", "created_at": 1679586595}\n  data: {"event": "message_end", "id": "5e52ce04-874b-4d27-9045-b3bc80def685", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "metadata": {"usage": {"prompt_tokens": 1033, "prompt_unit_price": "0.001", "prompt_price_unit": "0.001", "prompt_price": "0.0010330", "completion_tokens": 135, "completion_unit_price": "0.002", "completion_price_unit": "0.001", "completion_price": "0.0002700", "total_tokens": 1168, "total_price": "0.0013030", "currency": "USD", "latency": 1.381760165997548}, "retriever_resources": [{"position": 1, "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb", "dataset_name": "iPhone", "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00", "document_name": "iPhone List", "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a", "score": 0.98457545, "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""}]}}\n  data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}\n  data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/upload",method:"POST",title:"上传文件",name:"#files-upload"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsxs)(n.p,{children:["上传文件并在发送消息时使用，可实现图文多模态理解。\n支持您的应用程序所支持的所有格式。\n",(0,r.jsx)("i",{children:"上传的文件仅供当前终端用户使用。"})]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.p,{children:["该接口需使用  ",(0,r.jsx)(n.code,{children:"multipart/form-data"})," 进行请求。"]}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"file",type:"file",children:(0,r.jsx)(n.p,{children:"要上传的文件。"})},"file"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，用于定义终端用户的身份，必须和发送消息接口传入 user 保持一致。"})},"user")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsx)(n.p,{children:"成功上传后，服务器会返回文件的 ID 和相关信息。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (uuid) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 文件名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"size"})," (int) 文件大小（byte）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"extension"})," (string) 文件后缀"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mime_type"})," (string) 文件 mime-type"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by"})," (uuid) 上传人 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 上传时间"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"no_file_uploaded"}),"，必须提供文件"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"too_many_files"}),"，目前只接受一个文件"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"unsupported_preview"}),"，该文件不支持预览"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"unsupported_estimate"}),"，该文件不支持估算"]}),"\n",(0,r.jsxs)(n.li,{children:["413，",(0,r.jsx)(n.code,{children:"file_too_large"}),"，文件太大"]}),"\n",(0,r.jsxs)(n.li,{children:["415，",(0,r.jsx)(n.code,{children:"unsupported_file_type"}),"，不支持的扩展名，当前只接受文档类文件"]}),"\n",(0,r.jsxs)(n.li,{children:["503，",(0,r.jsx)(n.code,{children:"s3_connection_failed"}),"，无法连接到 S3 服务"]}),"\n",(0,r.jsxs)(n.li,{children:["503，",(0,r.jsx)(n.code,{children:"s3_permission_denied"}),"，无权限上传文件到 S3"]}),"\n",(0,r.jsxs)(n.li,{children:["503，",(0,r.jsx)(n.code,{children:"s3_file_too_large"}),"，文件超出 S3 大小限制"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/files/upload",targetCode:`curl -X POST '${e.appDetail.api_base_url}/files/upload' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=image/[png|jpeg|jpg|webp|gif]' \\
--form 'user=abc-123'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "72fa9618-8f89-4a37-9b33-7e1178a24a67",\n  "name": "example.png",\n  "size": 1024,\n  "extension": "png",\n  "mime_type": "image/png",\n  "created_by": 123,\n  "created_at": 1577836800,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/:file_id/preview",method:"GET",title:"文件预览",name:"#file-preview"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"预览或下载已上传的文件。此端点允许您访问先前通过文件上传 API 上传的文件。"}),(0,r.jsx)("i",{children:"文件只能在属于请求应用程序的消息范围内访问。"}),(0,r.jsx)(n.h3,{children:"路径参数"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_id"})," (string) 必需\n要预览的文件的唯一标识符，从文件上传 API 响应中获得。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"查询参数"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"as_attachment"})," (boolean) 可选\n是否强制将文件作为附件下载。默认为 ",(0,r.jsx)(n.code,{children:"false"}),"（在浏览器中预览）。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"响应"}),(0,r.jsx)(n.p,{children:"返回带有适当浏览器显示或下载标头的文件内容。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Type"})," 根据文件 MIME 类型设置"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Length"})," 文件大小（以字节为单位，如果可用）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Disposition"})," 如果 ",(0,r.jsx)(n.code,{children:"as_attachment=true"}),' 则设置为 "attachment"']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Cache-Control"})," 用于性能的缓存标头"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Accept-Ranges"}),' 对于音频/视频文件设置为 "bytes"']}),"\n"]}),(0,r.jsx)(n.h3,{children:"错误"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"invalid_param"}),", 参数输入异常"]}),"\n",(0,r.jsxs)(n.li,{children:["403, ",(0,r.jsx)(n.code,{children:"file_access_denied"}),", 文件访问被拒绝或文件不属于当前应用程序"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"file_not_found"}),", 文件未找到或已被删除"]}),"\n",(0,r.jsx)(n.li,{children:"500, 服务内部错误"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"请求示例"}),(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/files/:file_id/preview",targetCode:`curl -X GET '${e.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(n.h3,{children:"作为附件下载"}),(0,r.jsx)(eu,{title:"Download Request",tag:"GET",label:"/files/:file_id/preview?as_attachment=true",targetCode:`curl -X GET '${e.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview?as_attachment=true' \\
--header 'Authorization: Bearer {api_key}' \\
--output downloaded_file.png`}),(0,r.jsx)(n.h3,{children:"响应标头示例"}),(0,r.jsx)(eu,{title:"Response Headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"Content-Type: image/png\nContent-Length: 1024\nCache-Control: public, max-age=3600\n"})})}),(0,r.jsx)(n.h3,{children:"文件下载响应标头"}),(0,r.jsx)(eu,{title:"Download Response Headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"Content-Type: image/png\nContent-Length: 1024\nContent-Disposition: attachment; filename*=UTF-8''example.png\nCache-Control: public, max-age=3600\n"})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/chat-messages/:task_id/stop",method:"POST",title:"停止响应",name:"#Stop"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"仅支持流式模式。"}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，可在流式返回 Chunk 中获取"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) Required\n用户标识，用于定义终端用户的身份，必须和发送消息接口传入 user 保持一致。API 无法访问 WebApp 创建的会话。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"})," (string) 固定返回 success"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/chat-messages/:task_id/stop",targetCode:`curl -X POST '${e.appDetail.api_base_url}/chat-messages/:task_id/stop' \\
-H 'Authorization: Bearer {api_key}' \\
-H 'Content-Type: application/json' \\
--data-raw '{
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages/:message_id/feedbacks",method:"POST",title:"消息反馈（点赞）",name:"#feedbacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"消息终端用户反馈、点赞，方便应用开发者优化输出预期。"}),(0,r.jsx)(n.h3,{children:"Path Params"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"message_id",type:"string",children:(0,r.jsx)(n.p,{children:"消息 ID"})},"message_id")}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"rating",type:"string",children:(0,r.jsx)(n.p,{children:"点赞 like, 点踩 dislike,  撤销点赞 null"})},"rating"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，由开发者定义规则，需保证用户标识在应用内唯一。"})},"user"),(0,r.jsx)(ef,{name:"content",type:"string",children:(0,r.jsx)(n.p,{children:"消息反馈的具体信息。"})},"content")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"})," (string) 固定返回 success"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/messages/:message_id/feedbacks",targetCode:`curl -X POST '${e.appDetail.api_base_url}/messages/:message_id/feedbacks' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "rating": "like",
  "user": "abc-123",
  "content": "message feedback information"
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/app/feedbacks",method:"GET",title:"获取APP的消息点赞和反馈",name:"#app-feedbacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"获取应用的终端用户反馈、点赞。"}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"page",type:"string",children:(0,r.jsx)(n.p,{children:"（选填）分页，默认值：1"})},"page")}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"limit",type:"string",children:(0,r.jsx)(n.p,{children:"（选填）每页数量，默认值：20"})},"limit")}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (List) 返回该APP的点赞、反馈列表。"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/app/feedbacks",targetCode:`curl -X GET '${e.appDetail.api_base_url}/app/feedbacks?page=1&limit=20' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'    {\n    "data": [\n        {\n            "id": "8c0fbed8-e2f9-49ff-9f0e-15a35bdd0e25",\n            "app_id": "f252d396-fe48-450e-94ec-e184218e7346",\n            "conversation_id": "2397604b-9deb-430e-b285-4726e51fd62d",\n            "message_id": "709c0b0f-0a96-4a4e-91a4-ec0889937b11",\n            "rating": "like",\n            "content": "message feedback information-3",\n            "from_source": "user",\n            "from_end_user_id": "74286412-9a1a-42c1-929c-01edb1d381d5",\n            "from_account_id": null,\n            "created_at": "2025-04-24T09:24:38",\n            "updated_at": "2025-04-24T09:24:38"\n        }\n    ]\n    }\n\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages/{message_id}/suggested",method:"GET",title:"获取下一轮建议问题列表",name:"#suggested"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"获取下一轮建议问题列表。"}),(0,r.jsx)(n.h3,{children:"Path Params"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"message_id",type:"string",children:(0,r.jsx)(n.p,{children:"Message ID"})},"message_id")}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，由开发者定义规则，需保证用户标识在应用内唯一。"})},"user")})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/messages/{message_id}/suggested",targetCode:`curl --location --request GET '${e.appDetail.api_base_url}/messages/{message_id}/suggested?user=abc-123' \\
--header 'Authorization: Bearer ENTER-YOUR-SECRET-KEY' \\
--header 'Content-Type: application/json'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success",\n  "data": [\n        "a",\n        "b",\n        "c"\n    ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages",method:"GET",title:"获取会话历史消息",name:"#messages"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsxs)(n.p,{children:["滚动加载形式返回历史聊天记录，第一页返回最新  ",(0,r.jsx)(n.code,{children:"limit"})," 条，即：倒序返回。"]}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"会话 ID"})},"conversation_id"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，由开发者定义规则，需保证用户标识在应用内唯一。"})},"user"),(0,r.jsx)(ef,{name:"first_id",type:"string",children:(0,r.jsx)(n.p,{children:"当前页第一条聊天记录的 ID，默认 null"})},"first_id"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"一次请求返回多少条聊天记录，默认 20 条。"})},"limit")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object])  消息列表","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"}),"  (string) 消息 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string)  会话 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) 用户输入参数。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"query"}),"  (string) 用户输入 / 提问内容。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_files"})," (array[object]) 消息文件","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) 文件类型，image 图片"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," (string) 文件预览地址，使用文件预览 API (",(0,r.jsx)(n.code,{children:"/files/{file_id}/preview"}),") 访问文件"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"belongs_to"})," (string) 文件归属方，user 或 assistant"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string)  回答消息内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"}),"  (timestamp) 创建时间"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"feedback"})," (object) 反馈信息","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"rating"})," (string) 点赞 like / 点踩 dislike"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) 引用和归属分段列表"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool) 是否存在下一页"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) 返回条数，若传入超过系统限制，返回系统限制数量"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"Request Example"}),(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/messages",targetCode:`curl -X GET '${e.appDetail.api_base_url}/messages?user=abc-123&conversation_id={conversation_id}'
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(n.h3,{children:"Response Example"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n"limit": 20,\n"has_more": false,\n"data": [\n    {\n        "id": "a076a87f-31e5-48dc-b452-0061adbbc922",\n        "conversation_id": "cd78daf6-f9e4-4463-9ff2-54257230a0ce",\n        "inputs": {\n            "name": "dify"\n        },\n        "query": "iphone 13 pro",\n        "answer": "The iPhone 13 Pro, released on September 24, 2021, features a 6.1-inch display with a resolution of 1170 x 2532. It is equipped with a Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard) processor, 6 GB of RAM, and offers storage options of 128 GB, 256 GB, 512 GB, and 1 TB. The camera is 12 MP, the battery capacity is 3095 mAh, and it runs on iOS 15.",\n        "message_files": [],\n        "feedback": null,\n        "retriever_resources": [\n            {\n                "position": 1,\n                "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb",\n                "dataset_name": "iPhone",\n                "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00",\n                "document_name": "iPhone List",\n                "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a",\n                "score": 0.98457545,\n                "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""\n            }\n        ],\n        "created_at": 1705569239\n    }\n  ]\n}\n'})})}),(0,r.jsx)(n.h3,{children:"Response Example(智能助手)"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n"limit": 20,\n"has_more": false,\n"data": [\n    {\n        "id": "d35e006c-7c4d-458f-9142-be4930abdf94",\n        "conversation_id": "957c068b-f258-4f89-ba10-6e8a0361c457",\n        "inputs": {},\n        "query": "draw a cat",\n        "answer": "I have generated an image of a cat for you. Please check your messages to view the image.",\n        "message_files": [\n            {\n                "id": "976990d2-5294-47e6-8f14-7356ba9d2d76",\n                "type": "image",\n                "url": "http://127.0.0.1:5001/files/tools/976990d2-5294-47e6-8f14-7356ba9d2d76.png?timestamp=1705988524&nonce=55df3f9f7311a9acd91bf074cd524092&sign=z43nMSO1L2HBvoqADLkRxr7Biz0fkjeDstnJiCK1zh8=",\n                "belongs_to": "assistant"\n            }\n        ],\n        "feedback": null,\n        "retriever_resources": [],\n        "created_at": 1705988187\n    }\n    ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations",method:"GET",title:"获取会话列表",name:"#conversations"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"获取当前用户的会话列表，默认返回最近的 20 条。"}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，由开发者定义规则，需保证用户标识在应用内唯一。"})},"user"),(0,r.jsx)(ef,{name:"last_id",type:"string",children:(0,r.jsx)(n.p,{children:"（选填）当前页最后面一条记录的 ID，默认 null"})},"last_id"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"（选填）一次请求返回多少条记录，默认 20 条，最大 100 条，最小 1 条。"})},"limit"),(0,r.jsxs)(ef,{name:"sort_by",type:"string",children:[(0,r.jsx)(n.p,{children:"（选填）排序字段，默认 -updated_at(按更新时间倒序排列)"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"可选值：created_at, -created_at, updated_at, -updated_at"}),"\n",(0,r.jsx)(n.li,{children:"字段前面的符号代表顺序或倒序，-代表倒序"}),"\n"]})]},"sort_by")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object]) 会话列表","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"}),"  (string) 会话 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"}),"  (string) 会话名称，默认由大语言模型生成。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) 用户输入参数。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 会话状态"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"introduction"})," (string) 开场白"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 创建时间"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (timestamp) 更新时间"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) 返回条数，若传入超过系统限制，返回系统限制数量"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/conversations",targetCode:`curl -X GET '${e.appDetail.api_base_url}/conversations?user=abc-123&last_id=&limit=20' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "limit": 20,\n  "has_more": false,\n  "data": [\n    {\n      "id": "10799fb8-64f7-4296-bbf7-b42bfbe0ae54",\n      "name": "New chat",\n      "inputs": {\n          "book": "book",\n          "myName": "Lucy"\n      },\n      "status": "normal",\n      "created_at": 1679667915,\n      "updated_at": 1679667915\n    },\n    {\n      "id": "hSIhXBhNe8X1d8Et"\n      // ...\n    }\n  ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id",method:"DELETE",title:"删除会话",name:"#delete"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"删除会话。"}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会话 ID"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，由开发者定义规则，需保证用户标识在应用内唯一。"})},"user")}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"})," (string) 固定返回 success"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"DELETE",label:"/conversations/:conversation_id",targetCode:`curl -X DELETE '${e.appDetail.api_base_url}/conversations/{conversation_id}' \\
--header 'Content-Type: application/json' \\
--header 'Accept: application/json' \\
--header 'Authorization: Bearer {api_key}' \\
--data '{
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"204 No Content\n"})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id/name",method:"POST",title:"会话重命名",name:"#rename"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"对会话进行重命名，会话名称用于显示在支持多会话的客户端上。"}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会话 ID"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"name",type:"string",children:(0,r.jsxs)(n.p,{children:["（选填）名称，若 ",(0,r.jsx)(n.code,{children:"auto_generate"})," 为 ",(0,r.jsx)(n.code,{children:"true"})," 时，该参数可不传。"]})},"name"),(0,r.jsx)(ef,{name:"auto_generate",type:"bool",children:(0,r.jsx)(n.p,{children:"（选填）自动生成标题，默认 false。"})},"auto_generate"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，由开发者定义规则，需保证用户标识在应用内唯一。"})},"user")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"}),"  (string) 会话 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"}),"  (string) 会话名称"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) 用户输入参数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 会话状态"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"introduction"})," (string) 开场白"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 创建时间"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (timestamp) 更新时间"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/conversations/:conversation_id/name",targetCode:`curl -X POST '${e.appDetail.api_base_url}/conversations/{conversation_id}/name' \\
--header 'Content-Type: application/json' \\
--header 'Authorization: Bearer {api_key}' \\
--data-raw '{
  "name": "",
  "auto_generate": true,
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "34d511d5-56de-4f16-a997-57b379508443",\n  "name": "hello",\n  "inputs": {},\n  "status": "normal",\n  "introduction": "",\n  "created_at": 1732731141,\n  "updated_at": 1732734510\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id/variables",method:"GET",title:"获取对话变量",name:"#conversation-variables"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"从特定对话中检索变量。此端点对于提取对话过程中捕获的结构化数据非常有用。"}),(0,r.jsx)(n.h3,{children:"路径参数"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"要从中检索变量的对话ID。"})},"conversation_id")}),(0,r.jsx)(n.h3,{children:"查询参数"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识符，由开发人员定义的规则，在应用程序内必须唯一。"})},"user"),(0,r.jsx)(ef,{name:"last_id",type:"string",children:(0,r.jsx)(n.p,{children:"（选填）当前页最后面一条记录的 ID，默认 null"})},"last_id"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"（选填）一次请求返回多少条记录，默认 20 条，最大 100 条，最小 1 条。"})},"limit")]}),(0,r.jsx)(n.h3,{children:"响应"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) 每页项目数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool) 是否有更多项目"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object]) 变量列表","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) 变量 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 变量名称"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value_type"})," (string) 变量类型（字符串、数字、布尔等）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value"})," (string) 变量值"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 变量描述"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (int) 最后更新时间戳"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"错误"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"conversation_not_exists"}),", 对话不存在"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/conversations/:conversation_id/variables",debug:"true",targetCode:`curl -X GET '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables?user=abc-123' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"带变量名过滤的请求",language:"bash",targetCode:`curl -X GET '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables?user=abc-123&variable_name=customer_name' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "limit": 100,\n  "has_more": false,\n  "data": [\n    {\n      "id": "variable-uuid-1",\n      "name": "customer_name",\n      "value_type": "string",\n      "value": "John Doe",\n      "description": "客户名称（从对话中提取）",\n      "created_at": 1650000000000,\n      "updated_at": 1650000000000\n    },\n    {\n      "id": "variable-uuid-2",\n      "name": "order_details",\n      "value_type": "json",\n      "value": "{\\"product\\":\\"Widget\\",\\"quantity\\":5,\\"price\\":19.99}",\n      "description": "客户的订单详情",\n      "created_at": 1650000000000,\n      "updated_at": 1650000000000\n    }\n  ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id/variables/:variable_id",method:"PUT",title:"更新对话变量",name:"#update-conversation-variable"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"更新特定对话变量的值。此端点允许您修改在对话过程中捕获的变量值，同时保留其名称、类型和描述。"}),(0,r.jsx)(n.h3,{children:"路径参数"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"包含要更新变量的对话ID。"})},"conversation_id"),(0,r.jsx)(ef,{name:"variable_id",type:"string",children:(0,r.jsx)(n.p,{children:"要更新的变量ID。"})},"variable_id")]}),(0,r.jsx)(n.h3,{children:"请求体"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"value",type:"any",children:(0,r.jsx)(n.p,{children:"变量的新值。必须匹配变量的预期类型（字符串、数字、对象等）。"})},"value"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识符，由开发人员定义的规则，在应用程序内必须唯一。"})},"user")]}),(0,r.jsx)(n.h3,{children:"响应"}),(0,r.jsx)(n.p,{children:"返回包含以下内容的更新变量对象："}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) 变量ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 变量名称"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value_type"})," (string) 变量类型（字符串、数字、对象等）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value"})," (any) 更新后的变量值"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 变量描述"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (int) 最后更新时间戳"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"错误"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"Type mismatch: variable expects {expected_type}, but got {actual_type} type"}),", 值类型与变量的预期类型不匹配"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"conversation_not_exists"}),", 对话不存在"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"conversation_variable_not_exists"}),", 变量不存在"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"PUT",label:"/conversations/:conversation_id/variables/:variable_id",targetCode:`curl -X PUT '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\
--header 'Content-Type: application/json' \\
--header 'Authorization: Bearer {api_key}' \\
--data-raw '{
  "value": "Updated Value",
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"使用不同值类型更新",targetCode:[{title:"字符串值",code:`curl -X PUT '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\
--header 'Content-Type: application/json' \\
--header 'Authorization: Bearer {api_key}' \\
--data-raw '{
  "value": "新的字符串值",
  "user": "abc-123"
}'`},{title:"数字值",code:`curl -X PUT '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\
--header 'Content-Type: application/json' \\
--header 'Authorization: Bearer {api_key}' \\
--data-raw '{
  "value": 42,
  "user": "abc-123"
}'`},{title:"对象值",code:`curl -X PUT '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\
--header 'Content-Type: application/json' \\
--header 'Authorization: Bearer {api_key}' \\
--data-raw '{
  "value": {"product": "Widget", "quantity": 10, "price": 29.99},
  "user": "abc-123"
}'`}]}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "variable-uuid-1",\n  "name": "customer_name",\n  "value_type": "string",\n  "value": "Updated Value",\n  "description": "客户名称（从对话中提取）",\n  "created_at": 1650000000000,\n  "updated_at": 1650000001000\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/audio-to-text",method:"POST",title:"语音转文字",name:"#audio-to-text"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.p,{children:["该接口需使用 ",(0,r.jsx)(n.code,{children:"multipart/form-data"})," 进行请求。"]}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"file",type:"file",children:(0,r.jsxs)(n.p,{children:["语音文件。\n支持格式：",(0,r.jsx)(n.code,{children:"['mp3', 'mp4', 'mpeg', 'mpga', 'm4a', 'wav', 'webm']"}),"\n文件大小限制：15MB"]})},"file"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，由开发者定义规则，需保证用户标识在应用内唯一。"})},"user")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text"})," (string) 输出文字"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/audio-to-text",targetCode:`curl -X POST '${e.appDetail.api_base_url}/audio-to-text' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=audio/[mp3|mp4|mpeg|mpga|m4a|wav|webm]'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "text": "hello"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/text-to-audio",method:"POST",title:"文字转语音",name:"#text-to-audio"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"文字转语音。"}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"message_id",type:"str",children:(0,r.jsx)(n.p,{children:"Dify 生成的文本消息，那么直接传递生成的message-id 即可，后台会通过 message_id 查找相应的内容直接合成语音信息。如果同时传 message_id 和 text，优先使用 message_id。"})},"message_id"),(0,r.jsx)(ef,{name:"text",type:"str",children:(0,r.jsx)(n.p,{children:"语音生成内容。如果没有传 message-id的话，则会使用这个字段的内容"})},"text"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，由开发者定义规则，需保证用户标识在应用内唯一。"})},"user")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/text-to-audio",targetCode:`curl -o text-to-audio.mp3 -X POST '${e.appDetail.api_base_url}/text-to-audio' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290",
  "text": "Hello Dify",
  "user": "abc-123",
}'`}),(0,r.jsx)(eu,{title:"headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "Content-Type": "audio/wav"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/info",method:"GET",title:"获取应用基本信息",name:"#info"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"用于获取应用的基本信息"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 应用名称"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 应用描述"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tags"})," (array[string]) 应用标签"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/info",targetCode:`curl -X GET '${e.appDetail.api_base_url}/info' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "My App",\n  "description": "This is my app.",\n  "tags": [\n    "tag1",\n    "tag2"\n  ],\n  "mode": "advanced-chat",\n  "author_name": "Dify"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/parameters",method:"GET",title:"获取应用参数",name:"#parameters"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"用于进入页面一开始，获取功能开关、输入参数名称、类型及默认值等使用。"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"opening_statement"})," (string) 开场白"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"suggested_questions"})," (array[string]) 开场推荐问题列表"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"suggested_questions_after_answer"})," (object) 启用回答后给出推荐问题。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否开启"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"speech_to_text"})," (object) 语音转文本","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否开启"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text_to_speech"})," (object) 文本转语音","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否开启"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"voice"})," (string) 语音类型"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"language"})," (string) 语言"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"autoPlay"})," (string) 自动播放","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"}),"  开启"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"disabled"})," 关闭"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resource"})," (object) 引用和归属","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否开启"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"annotation_reply"})," (object) 标记回复","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否开启"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user_input_form"})," (array[object]) 用户输入表单配置","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text-input"})," (object) 文本输入控件","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 控件展示标签名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 控件 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 是否必填"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) 默认值"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"paragraph"})," (object) 段落文本输入控件","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 控件展示标签名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 控件 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 是否必填"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) 默认值"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"select"})," (object) 下拉控件","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 控件展示标签名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 控件 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 是否必填"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) 默认值"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"options"})," (array[string]) 选项值"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_upload"})," (object) 文件上传配置","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," (object) 文档设置\n当前仅支持文档类型：",(0,r.jsx)(n.code,{children:"txt"}),", ",(0,r.jsx)(n.code,{children:"md"}),", ",(0,r.jsx)(n.code,{children:"markdown"}),", ",(0,r.jsx)(n.code,{children:"pdf"}),", ",(0,r.jsx)(n.code,{children:"html"}),", ",(0,r.jsx)(n.code,{children:"xlsx"}),", ",(0,r.jsx)(n.code,{children:"xls"}),", ",(0,r.jsx)(n.code,{children:"docx"}),", ",(0,r.jsx)(n.code,{children:"csv"}),", ",(0,r.jsx)(n.code,{children:"eml"}),", ",(0,r.jsx)(n.code,{children:"msg"}),", ",(0,r.jsx)(n.code,{children:"pptx"}),", ",(0,r.jsx)(n.code,{children:"ppt"}),", ",(0,r.jsx)(n.code,{children:"xml"}),", ",(0,r.jsx)(n.code,{children:"epub"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 文档数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," (object) 图片设置\n当前仅支持图片类型：",(0,r.jsx)(n.code,{children:"png"}),", ",(0,r.jsx)(n.code,{children:"jpg"}),", ",(0,r.jsx)(n.code,{children:"jpeg"}),", ",(0,r.jsx)(n.code,{children:"webp"}),", ",(0,r.jsx)(n.code,{children:"gif"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 图片数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (object) 音频设置\n当前仅支持音频类型：",(0,r.jsx)(n.code,{children:"mp3"}),", ",(0,r.jsx)(n.code,{children:"m4a"}),", ",(0,r.jsx)(n.code,{children:"wav"}),", ",(0,r.jsx)(n.code,{children:"webm"}),", ",(0,r.jsx)(n.code,{children:"amr"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 音频数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," (object) 视频设置\n当前仅支持视频类型：",(0,r.jsx)(n.code,{children:"mp4"}),", ",(0,r.jsx)(n.code,{children:"mov"}),", ",(0,r.jsx)(n.code,{children:"mpeg"}),", ",(0,r.jsx)(n.code,{children:"mpga"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 视频数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," (object) 自定义设置","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 自定义数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"system_parameters"})," (object) 系统参数","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_size_limit"})," (int) Document upload size limit (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image_file_size_limit"})," (int) Image file upload size limit (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio_file_size_limit"})," (int) Audio file upload size limit (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video_file_size_limit"})," (int) Video file upload size limit (MB)"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/parameters",targetCode:`curl -X GET '${e.appDetail.api_base_url}/parameters'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "introduction": "nice to meet you",\n  "user_input_form": [\n    {\n      "text-input": {\n        "label": "a",\n        "variable": "a",\n        "required": true,\n        "max_length": 48,\n        "default": ""\n      }\n    },\n    {\n      // ...\n    }\n  ],\n  "file_upload": {\n    "image": {\n      "enabled": true,\n      "number_limits": 3,\n      "transfer_methods": [\n        "remote_url",\n        "local_file"\n      ]\n    }\n  },\n  "system_parameters": {\n      "file_size_limit": 15,\n      "image_file_size_limit": 10,\n      "audio_file_size_limit": 50,\n      "video_file_size_limit": 100\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/meta",method:"GET",title:"获取应用Meta信息",name:"#meta"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"用于获取工具 icon"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool_icons"}),"(object[string]) 工具图标","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"工具名称"})," (string)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon"})," (object|string)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["(object) 图标","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"background"})," (string) hex 格式的背景色"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"content"}),"(string) emoji"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"(string) 图标 URL"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/meta",targetCode:`curl -X GET '${e.appDetail.api_base_url}/meta' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "tool_icons": {\n      "dalle2": "https://cloud.dify.ai/console/api/workspaces/current/tool-provider/builtin/dalle/icon",\n      "api_tool": {\n          "background": "#252525",\n          "content": "\\ud83d\\ude01"\n      }\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/site",method:"GET",title:"获取应用 WebApp 设置",name:"#site"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"用于获取应用的 WebApp 设置"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) WebApp 名称"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"chat_color_theme"})," (string) 聊天颜色主题，hex 格式"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"chat_color_theme_inverted"})," (bool) 聊天颜色主题是否反转"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_type"})," (string) 图标类型，",(0,r.jsx)(n.code,{children:"emoji"}),"-表情，",(0,r.jsx)(n.code,{children:"image"}),"-图片"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon"})," (string) 图标，如果是 ",(0,r.jsx)(n.code,{children:"emoji"})," 类型，则是 emoji 表情符号，如果是 ",(0,r.jsx)(n.code,{children:"image"})," 类型，则是图片 URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_background"})," (string) hex 格式的背景色"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_url"})," (string) 图标 URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 描述"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"copyright"})," (string) 版权信息"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"privacy_policy"})," (string) 隐私政策链接"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom_disclaimer"})," (string) 自定义免责声明"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default_language"})," (string) 默认语言"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"show_workflow_steps"})," (bool) 是否显示工作流详情"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"use_icon_as_answer_icon"})," (bool) 是否使用 WebApp 图标替换聊天中的 🤖"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/site",targetCode:`curl -X GET '${e.appDetail.api_base_url}/site' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "title": "My App",\n  "chat_color_theme": "#ff4a4a",\n  "chat_color_theme_inverted": false,\n  "icon_type": "emoji",\n  "icon": "😄",\n  "icon_background": "#FFEAD5",\n  "icon_url": null,\n  "description": "This is my app.",\n  "copyright": "all rights reserved",\n  "privacy_policy": "",\n  "custom_disclaimer": "All generated by AI",\n  "default_language": "en-US",\n  "show_workflow_steps": false,\n  "use_icon_as_answer_icon": false,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotations",method:"GET",title:"获取标注列表",name:"#annotation_list"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"page",type:"string",children:(0,r.jsx)(n.p,{children:"页码"})},"page"),(0,r.jsx)(ef,{name:"limit",type:"string",children:(0,r.jsx)(n.p,{children:"每页数量"})},"limit")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/apps/annotations",targetCode:`curl --location --request GET '${e.appDetail.api_base_url}/apps/annotations?page=1&limit=20' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "data": [\n    {\n      "id": "69d48372-ad81-4c75-9c46-2ce197b4d402",\n      "question": "What is your name?",\n      "answer": "I am Dify.",\n      "hit_count": 0,\n      "created_at": 1735625869\n    }\n  ],\n  "has_more": false,\n  "limit": 20,\n  "total": 1,\n  "page": 1\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotations",method:"POST",title:"创建标注",name:"#create_annotation"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"question",type:"string",children:(0,r.jsx)(n.p,{children:"问题"})},"question"),(0,r.jsx)(ef,{name:"answer",type:"string",children:(0,r.jsx)(n.p,{children:"答案内容"})},"answer")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/apps/annotations",targetCode:`curl --location --request POST '${e.appDetail.api_base_url}/apps/annotations' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "question": "What is your name?",
  "answer": "I am Dify."
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "69d48372-ad81-4c75-9c46-2ce197b4d402",\n  "question": "What is your name?",\n  "answer": "I am Dify.",\n  "hit_count": 0,\n  "created_at": 1735625869\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotations/{annotation_id}",method:"PUT",title:"更新标注",name:"#update_annotation"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"annotation_id",type:"string",children:(0,r.jsx)(n.p,{children:"标注 ID"})},"annotation_id"),(0,r.jsx)(ef,{name:"question",type:"string",children:(0,r.jsx)(n.p,{children:"问题"})},"question"),(0,r.jsx)(ef,{name:"answer",type:"string",children:(0,r.jsx)(n.p,{children:"答案内容"})},"answer")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"PUT",label:"/apps/annotations/{annotation_id}",targetCode:`curl --location --request PUT '${e.appDetail.api_base_url}/apps/annotations/{annotation_id}' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "question": "What is your name?",
  "answer": "I am Dify."
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "69d48372-ad81-4c75-9c46-2ce197b4d402",\n  "question": "What is your name?",\n  "answer": "I am Dify.",\n  "hit_count": 0,\n  "created_at": 1735625869\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotations/{annotation_id}",method:"DELETE",title:"删除标注",name:"#delete_annotation"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"annotation_id",type:"string",children:(0,r.jsx)(n.p,{children:"标注 ID"})},"annotation_id")})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"DELETE",label:"/apps/annotations/{annotation_id}",targetCode:`curl --location --request DELETE '${e.appDetail.api_base_url}/apps/annotations/{annotation_id}' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"204 No Content\n"})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotation-reply/{action}",method:"POST",title:"标注回复初始设置",name:"#initial_annotation_reply_settings"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"action",type:"string",children:(0,r.jsx)(n.p,{children:"动作，只能是 'enable' 或 'disable'"})},"action"),(0,r.jsx)(ef,{name:"embedding_provider_name",type:"string",children:(0,r.jsx)(n.p,{children:"指定的嵌入模型提供商，必须先在系统内设定好接入的模型，对应的是 provider 字段"})},"embedding_provider_name"),(0,r.jsx)(ef,{name:"embedding_model_name",type:"string",children:(0,r.jsx)(n.p,{children:"指定的嵌入模型，对应的是 model 字段"})},"embedding_model_name"),(0,r.jsx)(ef,{name:"score_threshold",type:"number",children:(0,r.jsx)(n.p,{children:"相似度阈值，当相似度大于该阈值时，系统会自动回复，否则不回复"})},"score_threshold")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.p,{children:"嵌入模型的提供商和模型名称可以通过以下接口获取：v1/workspaces/current/models/model-types/text-embedding，具体见：通过 API 维护知识库。使用的 Authorization 是 Dataset 的 API Token。"}),(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/apps/annotation-reply/{action}",targetCode:`curl --location --request POST '${e.appDetail.api_base_url}/apps/annotation-reply/{action}' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "score_threshold": 0.9,
  "embedding_provider_name": "zhipu",
  "embedding_model_name": "embedding_3"
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "job_id": "b15c8f68-1cf4-4877-bf21-ed7cf2011802",\n  "job_status": "waiting"\n}\n'})})}),(0,r.jsx)(n.p,{children:"该接口是异步执行，所以会返回一个job_id，通过查询job状态接口可以获取到最终的执行结果。"})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotation-reply/{action}/status/{job_id}",method:"GET",title:"查询标注回复初始设置任务状态",name:"#initial_annotation_reply_settings_task_status"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"action",type:"string",children:(0,r.jsx)(n.p,{children:"动作，只能是 'enable' 或 'disable'，并且必须和标注回复初始设置接口的动作一致"})},"action"),(0,r.jsx)(ef,{name:"job_id",type:"string",children:(0,r.jsx)(n.p,{children:"任务 ID，从标注回复初始设置接口返回的 job_id"})},"job_id")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/apps/annotations",targetCode:`curl --location --request GET '${e.appDetail.api_base_url}/apps/annotation-reply/{action}/status/{job_id}' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "job_id": "b15c8f68-1cf4-4877-bf21-ed7cf2011802",\n  "job_status": "waiting",\n  "error_msg": ""\n}\n'})})})]})]})]})}function eC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...b(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(eR,{...e})}):eR(e)}function eS(e){let n={a:"a",code:"code",h1:"h1",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...b(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{children:"Chat App API"}),"\n",(0,r.jsx)(n.p,{children:"Chat applications support session persistence, allowing previous chat history to be used as context for responses. This can be applicable for chatbot, customer service AI, etc."}),"\n",(0,r.jsxs)("div",{children:[(0,r.jsx)(n.h3,{children:"Base URL"}),(0,r.jsx)(eu,{title:"Code",targetCode:e.appDetail.api_base_url}),(0,r.jsx)(n.h3,{children:"Authentication"}),(0,r.jsxs)(n.p,{children:["The Service API uses ",(0,r.jsx)(n.code,{children:"API-Key"})," authentication.\n",(0,r.jsx)("i",{children:(0,r.jsx)(n.strong,{children:"Strongly recommend storing your API Key on the server-side, not shared or stored on the client-side, to avoid possible API-Key leakage that can lead to serious consequences."})})]}),(0,r.jsxs)(n.p,{children:["For all API requests, include your API Key in the ",(0,r.jsx)(n.code,{children:"Authorization"}),"HTTP Header, as shown below:"]}),(0,r.jsx)(eu,{title:"Code",targetCode:"Authorization: Bearer {API_KEY}"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/chat-messages",method:"POST",title:"Send Chat Message",name:"#Send-Chat-Message"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Send a request to the chat application."}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"query",type:"string",children:(0,r.jsx)(n.p,{children:"User Input/Question content"})},"query"),(0,r.jsx)(ef,{name:"inputs",type:"object",children:(0,r.jsxs)(n.p,{children:["Allows the entry of various variable values defined by the App.\nThe ",(0,r.jsx)(n.code,{children:"inputs"})," parameter contains multiple key/value pairs, with each key corresponding to a specific variable and each value being the specific value for that variable. Default ",(0,r.jsx)(n.code,{children:"{}"})]})},"inputs"),(0,r.jsxs)(ef,{name:"response_mode",type:"string",children:[(0,r.jsx)(n.p,{children:"The mode of response return, supporting:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"streaming"})," Streaming mode (recommended), implements a typewriter-like output through SSE (",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events",children:"Server-Sent Events"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"blocking"})," Blocking mode, returns result after execution is complete. (Requests may be interrupted if the process is long)\nDue to Cloudflare restrictions, the request will be interrupted without a return after 100 seconds.\n",(0,r.jsx)("i",{children:"Note: blocking mode is not supported in Agent Assistant mode"})]}),"\n"]})]},"response_mode"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"User identifier, used to define the identity of the end-user for retrieval and statistics.\nShould be uniquely defined by the developer within the application."})},"user"),(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"Conversation ID, to continue the conversation based on previous chat records, it is necessary to pass the previous message's conversation_id."})},"conversation_id"),(0,r.jsxs)(ef,{name:"files",type:"array[object]",children:[(0,r.jsx)(n.p,{children:"File list, suitable for inputting files combined with text understanding and answering questions, available only when the model supports Vision/Video capability."}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) Supported type:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," Supported types include: 'TXT', 'MD', 'MARKDOWN', 'MDX', 'PDF', 'HTML', 'XLSX', 'XLS', 'VTT', 'PROPERTIES', 'DOC', 'DOCX', 'CSV', 'EML', 'MSG', 'PPTX', 'PPT', 'XML', 'EPUB'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," Supported types include: 'JPG', 'JPEG', 'PNG', 'GIF', 'WEBP', 'SVG'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," Supported types include: 'MP3', 'M4A', 'WAV', 'WEBM', 'MPGA'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," Supported types include: 'MP4', 'MOV', 'MPEG', 'WEBM'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," Supported types include: other file types"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_method"})," (string) Transfer method:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"remote_url"}),": File URL."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"local_file"}),": Upload file."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," File URL. (Only when transfer method is ",(0,r.jsx)(n.code,{children:"remote_url"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"upload_file_id"})," Upload file ID. (Only when transfer method is ",(0,r.jsx)(n.code,{children:"local_file"}),")."]}),"\n"]})]},"files"),(0,r.jsx)(ef,{name:"auto_generate_name",type:"bool",children:(0,r.jsxs)(n.p,{children:["Auto-generate title, default is ",(0,r.jsx)(n.code,{children:"true"}),".\nIf set to ",(0,r.jsx)(n.code,{children:"false"}),", can achieve async title generation by calling the conversation rename API and setting ",(0,r.jsx)(n.code,{children:"auto_generate"})," to ",(0,r.jsx)(n.code,{children:"true"}),"."]})},"auto_generate_name"),(0,r.jsx)(ef,{name:"workflow_id",type:"string",children:(0,r.jsxs)(n.p,{children:["(Optional) Workflow ID to specify a specific version, if not provided, uses the default published version.",(0,r.jsx)("br",{}),"\nHow to obtain: In the version history interface, click the copy icon on the right side of each version entry to copy the complete workflow ID."]})},"workflow_id"),(0,r.jsxs)(ef,{name:"trace_id",type:"string",children:[(0,r.jsxs)(n.p,{children:["(Optional) Trace ID. Used for integration with existing business trace components to achieve end-to-end distributed tracing. If not provided, the system will automatically generate a trace_id. Supports the following three ways to pass, in order of priority:",(0,r.jsx)("br",{})]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Header: via HTTP Header ",(0,r.jsx)("code",{children:"X-Trace-Id"}),", highest priority.",(0,r.jsx)("br",{})]}),"\n",(0,r.jsxs)(n.li,{children:["Query parameter: via URL query parameter ",(0,r.jsx)("code",{children:"trace_id"}),".",(0,r.jsx)("br",{})]}),"\n",(0,r.jsxs)(n.li,{children:["Request Body: via request body field ",(0,r.jsx)("code",{children:"trace_id"})," (i.e., this field).",(0,r.jsx)("br",{})]}),"\n"]})]},"trace_id")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsx)(n.p,{children:"When response_mode is blocking, return a CompletionResponse object.\nWhen response_mode is streaming, return a ChunkCompletionResponse stream."}),(0,r.jsx)(n.h3,{children:"ChatCompletionResponse"}),(0,r.jsxs)(n.p,{children:["Returns the complete App result, ",(0,r.jsx)(n.code,{children:"Content-Type"})," is ",(0,r.jsx)(n.code,{children:"application/json"}),"."]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) Event type, always ",(0,r.jsx)(n.code,{children:"message"})," in blocking mode."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Unique ID, same as ",(0,r.jsx)(n.code,{children:"message_id"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) Conversation ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) App mode, fixed as ",(0,r.jsx)(n.code,{children:"chat"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) Complete response content"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"metadata"})," (object) Metadata","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usage"})," (Usage) Model usage information"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) Citation and Attribution List"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Message creation timestamp, e.g., 1705395332"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"ChunkChatCompletionResponse"}),(0,r.jsxs)(n.p,{children:["Returns the stream chunks outputted by the App, ",(0,r.jsx)(n.code,{children:"Content-Type"})," is ",(0,r.jsx)(n.code,{children:"text/event-stream"}),".\nEach streaming chunk starts with ",(0,r.jsx)(n.code,{children:"data:"}),", separated by two newline characters ",(0,r.jsx)(n.code,{children:"\\n\\n"}),", as shown below:"]}),(0,r.jsx)(eu,{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'data: {"event": "message", "task_id": "900bbd43-dc0b-4383-a372-aa6e6c414227", "id": "663c5084-a254-4040-8ad3-51f2a3c1a77c", "answer": "Hi", "created_at": 1705398420}\\n\\n\n'})})}),(0,r.jsxs)(n.p,{children:["The structure of the streaming chunks varies depending on the ",(0,r.jsx)(n.code,{children:"event"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message"})," LLM returns text chunk event, i.e., the complete text is output in a chunked fashion.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) Conversation ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) LLM returned text chunk content"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: agent_message"})," LLM returns text chunk event, i.e., with Agent Assistant enabled, the complete text is output in a chunked fashion (Only supported in Agent mode)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) Conversation ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) LLM returned text chunk content"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message"})," TTS audio stream event, that is, speech synthesis output. The content is an audio block in Mp3 format, encoded as a base64 string. When playing, simply decode the base64 and feed it into the player. (This message is available only when auto-play is enabled)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the stop response interface below"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) The audio after speech synthesis, encoded in base64 text content, when playing, simply decode the base64 and feed it into the player"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp, e.g.: 1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message_end"})," TTS audio stream end event, receiving this event indicates the end of the audio stream.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the stop response interface below"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) The end event has no audio, so this is an empty string"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp, e.g.: 1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: agent_thought"})," thought of Agent, contains the thought of LLM, input and output of tool calls (Only supported in Agent mode)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Agent thought ID, every iteration has a unique agent thought ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string)  Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"position"})," (int) Position of current agent thought, each message may have multiple thoughts in order."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"thought"})," (string) What LLM is thinking about"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"observation"})," (string) Response from tool calls"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool"})," (string) A list of tools represents which tools are called，split by ;"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool_input"})," (string) Input of tools in JSON format. Like: ",(0,r.jsx)(n.code,{children:'{"dalle3": {"prompt": "a cute cat"}}'}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp, e.g., 1705395332"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_files"})," (array[string])  Refer to message_file event","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_id"})," (string) File ID"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) Conversation ID"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_file"})," Message file event, a new file has created by tool","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) File unique ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"}),' (string) File type，only allow "image" currently']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"belongs_to"})," (string) Belongs to, it will only be an 'assistant' here"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," (string) Remote url of file"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"}),"  (string) Conversation ID"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_end"})," Message end event, receiving this event means streaming has ended.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) Conversation ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"metadata"})," (object) Metadata","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usage"})," (Usage) Model usage information"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) Citation and Attribution List"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_replace"})," Message content replacement event.\nWhen output content moderation is enabled, if the content is flagged, then the message content will be replaced with a preset reply through this event.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) Conversation ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) Replacement content (directly replaces all LLM reply text)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: error"}),"\nExceptions that occur during the streaming process will be output in the form of stream events, and reception of an error event will end the stream.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (int) HTTP status code"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"code"})," (string) Error code"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message"})," (string) Error message"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: ping"})," Ping event every 10 seconds to keep the connection alive."]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"404, Conversation does not exists"}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"invalid_param"}),", abnormal parameter input"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"app_unavailable"}),", App configuration unavailable"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"provider_not_initialize"}),", no available model credential configuration"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"provider_quota_exceeded"}),", model invocation quota insufficient"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"model_currently_not_support"}),", current model unavailable"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"workflow_not_found"}),", specified workflow version not found"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"draft_workflow_error"}),", cannot use draft workflow version"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"workflow_id_format_error"}),", invalid workflow_id format, expected UUID format"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"completion_request_error"}),", text generation failed"]}),"\n",(0,r.jsx)(n.li,{children:"500, internal server error"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/chat-messages",targetCode:`curl -X POST '${e.appDetail.api_base_url}/chat-messages' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "inputs": ${JSON.stringify(e.inputs)},
  "query": "What are the specs of the iPhone 13 Pro Max?",
  "response_mode": "streaming",
  "conversation_id": "",
  "user": "abc-123",
  "files": [
      {
        "type": "image",
      "transfer_method": "remote_url",
      "url": "https://cloud.dify.ai/logo/logo-site.png"
    }
  ]
}'`}),(0,r.jsx)(n.h3,{children:"Blocking Mode"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "event": "message",\n    "task_id": "c3800678-a077-43df-a102-53f23ed20b88",\n    "id": "9da23599-e713-473b-982c-4328d4f5c78a",\n    "message_id": "9da23599-e713-473b-982c-4328d4f5c78a",\n    "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2",\n    "mode": "chat",\n    "answer": "iPhone 13 Pro Max specs are listed here:...",\n    "metadata": {\n        "usage": {\n            "prompt_tokens": 1033,\n            "prompt_unit_price": "0.001",\n            "prompt_price_unit": "0.001",\n            "prompt_price": "0.0010330",\n            "completion_tokens": 128,\n            "completion_unit_price": "0.002",\n            "completion_price_unit": "0.001",\n            "completion_price": "0.0002560",\n            "total_tokens": 1161,\n            "total_price": "0.0012890",\n            "currency": "USD",\n            "latency": 0.7682376249867957\n        },\n        "retriever_resources": [\n            {\n                "position": 1,\n                "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb",\n                "dataset_name": "iPhone",\n                "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00",\n                "document_name": "iPhone List",\n                "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a",\n                "score": 0.98457545,\n                "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""\n            }\n        ]\n    },\n    "created_at": 1705407629\n}\n'})})}),(0,r.jsx)(n.h3,{children:"Streaming Mode ( Basic Assistant )"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " I", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": "\'m", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " glad", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " to", "created_at": 1679586595}\n  data: {"event": "message", "message_id" : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " meet", "created_at": 1679586595}\n  data: {"event": "message", "message_id" : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " you", "created_at": 1679586595}\n  data: {"event": "message_end", "id": "5e52ce04-874b-4d27-9045-b3bc80def685", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "metadata": {"usage": {"prompt_tokens": 1033, "prompt_unit_price": "0.001", "prompt_price_unit": "0.001", "prompt_price": "0.0010330", "completion_tokens": 135, "completion_unit_price": "0.002", "completion_price_unit": "0.001", "completion_price": "0.0002700", "total_tokens": 1168, "total_price": "0.0013030", "currency": "USD", "latency": 1.381760165997548}, "retriever_resources": [{"position": 1, "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb", "dataset_name": "iPhone", "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00", "document_name": "iPhone List", "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a", "score": 0.98457545, "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""}]}}\n  data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}\n  data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}\n'})})}),(0,r.jsx)(n.h3,{children:"Response Example(Agent Assistant)"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " I", "created_at": 1679586595}\ndata: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": "\'m", "created_at": 1679586595}\ndata: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " glad", "created_at": 1679586595}\ndata: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " to", "created_at": 1679586595}\ndata: {"event": "message", "message_id" : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " meet", "created_at": 1679586595}\ndata: {"event": "message", "message_id" : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " you", "created_at": 1679586595}\ndata: {"event": "message_end", "id": "5e52ce04-874b-4d27-9045-b3bc80def685", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "metadata": {"usage": {"prompt_tokens": 1033, "prompt_unit_price": "0.001", "prompt_price_unit": "0.001", "prompt_price": "0.0010330", "completion_tokens": 135, "completion_unit_price": "0.002", "completion_price_unit": "0.001", "completion_price": "0.0002700", "total_tokens": 1168, "total_price": "0.0013030", "currency": "USD", "latency": 1.381760165997548}, "retriever_resources": [{"position": 1, "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb", "dataset_name": "iPhone", "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00", "document_name": "iPhone List", "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a", "score": 0.98457545, "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""}]}}\ndata: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}\ndata: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/upload",method:"POST",title:"File Upload",name:"#file-upload"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Upload a file (currently only images are supported) for use when sending messages, enabling multimodal understanding of images and text.\nSupports png, jpg, jpeg, webp, gif formats.\nUploaded files are for use by the current end-user only."}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.p,{children:["This interface requires a ",(0,r.jsx)(n.code,{children:"multipart/form-data"})," request."]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file"})," (File) Required\nThe file to be uploaded."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) Required\nUser identifier, defined by the developer's rules, must be unique within the application. The Service API does not share conversations created by the WebApp."]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsx)(n.p,{children:"After a successful upload, the server will return the file's ID and related information."}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (uuid) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) File name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"size"})," (int) File size (bytes)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"extension"})," (string) File extension"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mime_type"})," (string) File mime-type"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by"})," (uuid) End-user ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) Creation timestamp, e.g., 1705395332"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"no_file_uploaded"}),", a file must be provided"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"too_many_files"}),", currently only one file is accepted"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"unsupported_preview"}),", the file does not support preview"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"unsupported_estimate"}),", the file does not support estimation"]}),"\n",(0,r.jsxs)(n.li,{children:["413, ",(0,r.jsx)(n.code,{children:"file_too_large"}),", the file is too large"]}),"\n",(0,r.jsxs)(n.li,{children:["415, ",(0,r.jsx)(n.code,{children:"unsupported_file_type"}),", unsupported extension, currently only document files are accepted"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_connection_failed"}),", unable to connect to S3 service"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_permission_denied"}),", no permission to upload files to S3"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_file_too_large"}),", file exceeds S3 size limit"]}),"\n",(0,r.jsx)(n.li,{children:"500, internal server error"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"Request Example"}),(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/files/upload",targetCode:`curl -X POST '${e.appDetail.api_base_url}/files/upload' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=image/[png|jpeg|jpg|webp|gif]' \\
--form 'user=abc-123'`}),(0,r.jsx)(n.h3,{children:"Response Example"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "72fa9618-8f89-4a37-9b33-7e1178a24a67",\n  "name": "example.png",\n  "size": 1024,\n  "extension": "png",\n  "mime_type": "image/png",\n  "created_by": "6ad1ab0a-73ff-4ac1-b9e4-cdb312f71f13",\n  "created_at": 1577836800,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/:file_id/preview",method:"GET",title:"File Preview",name:"#file-preview"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Preview or download uploaded files. This endpoint allows you to access files that have been previously uploaded via the File Upload API."}),(0,r.jsx)("i",{children:"Files can only be accessed if they belong to messages within the requesting application."}),(0,r.jsx)(n.h3,{children:"Path Parameters"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_id"})," (string) Required\nThe unique identifier of the file to preview, obtained from the File Upload API response."]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Query Parameters"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"as_attachment"})," (boolean) Optional\nWhether to force download the file as an attachment. Default is ",(0,r.jsx)(n.code,{children:"false"})," (preview in browser)."]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsx)(n.p,{children:"Returns the file content with appropriate headers for browser display or download."}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Type"})," Set based on file mime type"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Length"})," File size in bytes (if available)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Disposition"}),' Set to "attachment" if ',(0,r.jsx)(n.code,{children:"as_attachment=true"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Cache-Control"})," Caching headers for performance"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Accept-Ranges"}),' Set to "bytes" for audio/video files']}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"invalid_param"}),", abnormal parameter input"]}),"\n",(0,r.jsxs)(n.li,{children:["403, ",(0,r.jsx)(n.code,{children:"file_access_denied"}),", file access denied or file does not belong to current application"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"file_not_found"}),", file not found or has been deleted"]}),"\n",(0,r.jsx)(n.li,{children:"500, internal server error"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"Request Example"}),(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/files/:file_id/preview",targetCode:`curl -X GET '${e.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(n.h3,{children:"Download as Attachment"}),(0,r.jsx)(eu,{title:"Download Request",tag:"GET",label:"/files/:file_id/preview?as_attachment=true",targetCode:`curl -X GET '${e.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview?as_attachment=true' \\
--header 'Authorization: Bearer {api_key}' \\
--output downloaded_file.png`}),(0,r.jsx)(n.h3,{children:"Response Headers Example"}),(0,r.jsx)(eu,{title:"Response Headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"Content-Type: image/png\nContent-Length: 1024\nCache-Control: public, max-age=3600\n"})})}),(0,r.jsx)(n.h3,{children:"Download Response Headers"}),(0,r.jsx)(eu,{title:"Download Response Headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"Content-Type: image/png\nContent-Length: 1024\nContent-Disposition: attachment; filename*=UTF-8''example.png\nCache-Control: public, max-age=3600\n"})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/chat-messages/:task_id/stop",method:"POST",title:"Stop Generate",name:"#stop-generatebacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Only supported in streaming mode."}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, can be obtained from the streaming chunk return"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) Required\nUser identifier, used to define the identity of the end-user, must be consistent with the user passed in the message sending interface. The Service API does not share conversations created by the WebApp."]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"}),' (string) Always returns "success"']}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"Request Example"}),(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/chat-messages/:task_id/stop",targetCode:`curl -X POST '${e.appDetail.api_base_url}/chat-messages/:task_id/stop' \\
-H 'Authorization: Bearer {api_key}' \\
-H 'Content-Type: application/json' \\
--data-raw '{"user": "abc-123"}'`}),(0,r.jsx)(n.h3,{children:"Response Example"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages/:message_id/feedbacks",method:"POST",title:"Message Feedback",name:"#feedbacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"End-users can provide feedback messages, facilitating application developers to optimize expected outputs."}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"message_id",type:"string",children:(0,r.jsx)(n.p,{children:"Message ID"})},"message_id")}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"rating",type:"string",children:(0,r.jsxs)(n.p,{children:["Upvote as ",(0,r.jsx)(n.code,{children:"like"}),", downvote as ",(0,r.jsx)(n.code,{children:"dislike"}),", revoke upvote as ",(0,r.jsx)(n.code,{children:"null"})]})},"rating"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"User identifier, defined by the developer's rules, must be unique within the application."})},"user"),(0,r.jsx)(ef,{name:"content",type:"string",children:(0,r.jsx)(n.p,{children:"The specific content of message feedback."})},"content")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"}),' (string) Always returns "success"']}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/messages/:message_id/feedbacks",targetCode:`curl -X POST '${e.appDetail.api_base_url}/messages/:message_id/feedbacks \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "rating": "like",
  "user": "abc-123",
  "content": "message feedback information"
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/app/feedbacks",method:"GET",title:"Get feedbacks of application",name:"#app-feedbacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Get application's feedbacks."}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"page",type:"string",children:(0,r.jsx)(n.p,{children:"（optional）pagination，default：1"})},"page")}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"limit",type:"string",children:(0,r.jsx)(n.p,{children:"（optional） records per page default：20"})},"limit")}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (List) return apps feedback list."]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/app/feedbacks",targetCode:`curl -X GET '${e.appDetail.api_base_url}/app/feedbacks?page=1&limit=20'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'  {\n      "data": [\n          {\n              "id": "8c0fbed8-e2f9-49ff-9f0e-15a35bdd0e25",\n              "app_id": "f252d396-fe48-450e-94ec-e184218e7346",\n              "conversation_id": "2397604b-9deb-430e-b285-4726e51fd62d",\n              "message_id": "709c0b0f-0a96-4a4e-91a4-ec0889937b11",\n              "rating": "like",\n              "content": "message feedback information-3",\n              "from_source": "user",\n              "from_end_user_id": "74286412-9a1a-42c1-929c-01edb1d381d5",\n              "from_account_id": null,\n              "created_at": "2025-04-24T09:24:38",\n              "updated_at": "2025-04-24T09:24:38"\n          }\n      ]\n  }\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages/{message_id}/suggested",method:"GET",title:"Next Suggested Questions",name:"#suggested"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Get next questions suggestions for the current message"}),(0,r.jsx)(n.h3,{children:"Path Params"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"message_id",type:"string",children:(0,r.jsx)(n.p,{children:"Message ID"})},"message_id")}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"User identifier, used to define the identity of the end-user for retrieval and statistics.\nShould be uniquely defined by the developer within the application."})},"user")})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/messages/{message_id}/suggested",targetCode:`curl --location --request GET '${e.appDetail.api_base_url}/messages/{message_id}/suggested?user=abc-123& \\
--header 'Authorization: Bearer ENTER-YOUR-SECRET-KEY' \\
--header 'Content-Type: application/json'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success",\n  "data": [\n        "a",\n        "b",\n        "c"\n    ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages",method:"GET",title:"Get Conversation History Messages",name:"#messages"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsxs)(n.p,{children:["Returns historical chat records in a scrolling load format, with the first page returning the latest ",(0,r.jsx)(n.code,{children:"{limit}"})," messages, i.e., in reverse order."]}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"Conversation ID"})},"conversation_id"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"User identifier, used to define the identity of the end-user for retrieval and statistics.\nShould be uniquely defined by the developer within the application."})},"user"),(0,r.jsx)(ef,{name:"first_id",type:"string",children:(0,r.jsx)(n.p,{children:"The ID of the first chat record on the current page, default is null."})},"first_id"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"How many chat history messages to return in one request, default is 20."})},"limit")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object]) Message list","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) Conversation ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) User input parameters."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"query"})," (string) User input / question content."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_files"})," (array[object]) Message files","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) File type, image for images"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," (string) File preview URL, use the File Preview API (",(0,r.jsx)(n.code,{children:"/files/{file_id}/preview"}),") to access the file"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"belongs_to"})," (string) belongs to，user or assistant"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"agent_thoughts"})," (array[object]) Agent thought（Empty if it's a Basic Assistant）","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Agent thought ID, every iteration has a unique agent thought ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"position"})," (int) Position of current agent thought, each message may have multiple thoughts in order."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"thought"})," (string) What LLM is thinking about"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"observation"})," (string) Response from tool calls"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool"})," (string) A list of tools represents which tools are called，split by ;"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool_input"})," (string) Input of tools in JSON format. Like: ",(0,r.jsx)(n.code,{children:'{"dalle3": {"prompt": "a cute cat"}}'}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp, e.g., 1705395332"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_files"})," (array[string])  Refer to message_file event","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_id"})," (string) File ID"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) Response message content"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) Creation timestamp, e.g., 1705395332"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"feedback"})," (object) Feedback information","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"rating"})," (string) Upvote as ",(0,r.jsx)(n.code,{children:"like"})," / Downvote as ",(0,r.jsx)(n.code,{children:"dislike"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) Citation and Attribution List"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool) Whether there is a next page"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) Number of returned items, if input exceeds system limit, returns system limit amount"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/messages",targetCode:`curl -X GET '${e.appDetail.api_base_url}/messages?user=abc-123&conversation_id='\\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(n.h3,{children:"Response Example (Basic Assistant)"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "limit": 20,\n  "has_more": false,\n  "data": [\n    {\n        "id": "a076a87f-31e5-48dc-b452-0061adbbc922",\n        "conversation_id": "cd78daf6-f9e4-4463-9ff2-54257230a0ce",\n        "inputs": {\n            "name": "dify"\n        },\n        "query": "iphone 13 pro",\n        "answer": "The iPhone 13 Pro, released on September 24, 2021, features a 6.1-inch display with a resolution of 1170 x 2532. It is equipped with a Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard) processor, 6 GB of RAM, and offers storage options of 128 GB, 256 GB, 512 GB, and 1 TB. The camera is 12 MP, the battery capacity is 3095 mAh, and it runs on iOS 15.",\n        "message_files": [],\n        "feedback": null,\n        "retriever_resources": [\n            {\n                "position": 1,\n                "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb",\n                "dataset_name": "iPhone",\n                "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00",\n                "document_name": "iPhone List",\n                "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a",\n                "score": 0.98457545,\n                "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""\n            }\n        ],\n        "agent_thoughts": [],\n        "created_at": 1705569239,\n    }\n  ]\n}\n'})})}),(0,r.jsx)(n.h3,{children:"Response Example (Agent Assistant)"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "limit": 20,\n    "has_more": false,\n    "data": [\n        {\n            "id": "d35e006c-7c4d-458f-9142-be4930abdf94",\n            "conversation_id": "957c068b-f258-4f89-ba10-6e8a0361c457",\n            "inputs": {},\n            "query": "draw a cat",\n            "answer": "I have generated an image of a cat for you. Please check your messages to view the image.",\n            "message_files": [\n                {\n                    "id": "976990d2-5294-47e6-8f14-7356ba9d2d76",\n                    "type": "image",\n                    "url": "http://127.0.0.1:5001/files/tools/976990d2-5294-47e6-8f14-7356ba9d2d76.png?timestamp=1705988524&nonce=55df3f9f7311a9acd91bf074cd524092&sign=z43nMSO1L2HBvoqADLkRxr7Biz0fkjeDstnJiCK1zh8=",\n                    "belongs_to": "assistant"\n                }\n            ],\n            "feedback": null,\n            "retriever_resources": [],\n            "created_at": 1705988187,\n            "agent_thoughts": [\n                {\n                    "id": "592c84cf-07ee-441c-9dcc-ffc66c033469",\n                    "chain_id": null,\n                    "message_id": "d35e006c-7c4d-458f-9142-be4930abdf94",\n                    "position": 1,\n                    "thought": "",\n                    "tool": "dalle2",\n                    "tool_input": "{\\"dalle2\\": {\\"prompt\\": \\"cat\\"}}",\n                    "created_at": 1705988186,\n                    "observation": "image has been created and sent to user already, you should tell user to check it now.",\n                    "files": [\n                        "976990d2-5294-47e6-8f14-7356ba9d2d76"\n                    ]\n                },\n                {\n                    "id": "73ead60d-2370-4780-b5ed-532d2762b0e5",\n                    "chain_id": null,\n                    "message_id": "d35e006c-7c4d-458f-9142-be4930abdf94",\n                    "position": 2,\n                    "thought": "I have generated an image of a cat for you. Please check your messages to view the image.",\n                    "tool": "",\n                    "tool_input": "",\n                    "created_at": 1705988199,\n                    "observation": "",\n                    "files": []\n                }\n            ]\n        }\n    ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations",method:"GET",title:"Get Conversations",name:"#conversations"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Retrieve the conversation list for the current user, defaulting to the most recent 20 entries."}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"User identifier, used to define the identity of the end-user for retrieval and statistics.\nShould be uniquely defined by the developer within the application."})},"user"),(0,r.jsx)(ef,{name:"last_id",type:"string",children:(0,r.jsx)(n.p,{children:"(Optional) The ID of the last record on the current page, default is null."})},"last_id"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"(Optional) How many records to return in one request, default is the most recent 20 entries. Maximum 100, minimum 1."})},"limit"),(0,r.jsxs)(ef,{name:"sort_by",type:"string",children:[(0,r.jsx)(n.p,{children:"(Optional) Sorting Field, Default: -updated_at (sorted in descending order by update time)"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Available Values: created_at, -created_at, updated_at, -updated_at"}),"\n",(0,r.jsx)(n.li,{children:'The symbol before the field represents the order or reverse, "-" represents reverse order.'}),"\n"]})]},"sort_by")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object]) List of conversations","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Conversation ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) Conversation name, by default, is a snippet of the first question asked by the user in the conversation."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) User input parameters."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) Conversation status"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"introduction"})," (string) Introduction"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) Creation timestamp, e.g., 1705395332"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (timestamp) Update timestamp, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) Number of entries returned, if input exceeds system limit, system limit number is returned"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/conversations",targetCode:`curl -X GET '${e.appDetail.api_base_url}/conversations?user=abc-123&last_id=&limit=20' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "limit": 20,\n  "has_more": false,\n  "data": [\n    {\n      "id": "10799fb8-64f7-4296-bbf7-b42bfbe0ae54",\n      "name": "New chat",\n      "inputs": {\n          "book": "book",\n          "myName": "Lucy"\n      },\n      "status": "normal",\n      "created_at": 1679667915,\n      "updated_at": 1679667915\n    },\n    {\n      "id": "hSIhXBhNe8X1d8Et"\n      // ...\n    }\n  ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id",method:"DELETE",title:"Delete Conversation",name:"#delete"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Delete a conversation."}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) Conversation ID"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"The user identifier, defined by the developer, must ensure uniqueness within the application."})},"user")}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"}),' (string) Always returns "success"']}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"DELETE",label:"/conversations/:conversation_id",targetCode:`curl -X DELETE '${e.appDetail.api_base_url}/conversations/:conversation_id' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"204 No Content\n"})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id/name",method:"POST",title:"Conversation Rename",name:"#rename"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsx)(n.p,{children:"Rename the session, the session name is used for display on clients that support multiple sessions."}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) Conversation ID"]}),"\n"]}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"name",type:"string",children:(0,r.jsxs)(n.p,{children:["(Optional) The name of the conversation. This parameter can be omitted if ",(0,r.jsx)(n.code,{children:"auto_generate"})," is set to ",(0,r.jsx)(n.code,{children:"true"}),"."]})},"name"),(0,r.jsx)(ef,{name:"auto_generate",type:"bool",children:(0,r.jsxs)(n.p,{children:["(Optional) Automatically generate the title, default is ",(0,r.jsx)(n.code,{children:"false"})]})},"auto_generate"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"The user identifier, defined by the developer, must ensure uniqueness within the application."})},"user")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Conversation ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) Conversation name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) User input parameters"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) Conversation status"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"introduction"})," (string) Introduction"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) Creation timestamp, e.g., 1705395332"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (timestamp) Update timestamp, e.g., 1705395332"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/conversations/:conversation_id/name",targetCode:`curl -X POST '${e.appDetail.api_base_url}/conversations/:conversation_id/name' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "name": "",
  "auto_generate": true,
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "id": "cd78daf6-f9e4-4463-9ff2-54257230a0ce",\n    "name": "Chat vs AI",\n    "inputs": {},\n    "status": "normal",\n    "introduction": "",\n    "created_at": 1705569238,\n    "updated_at": 1705569238\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id/variables",method:"GET",title:"Get Conversation Variables",name:"#conversation-variables"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Retrieve variables from a specific conversation. This endpoint is useful for extracting structured data that was captured during the conversation."}),(0,r.jsx)(n.h3,{children:"Path Parameters"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"The ID of the conversation to retrieve variables from."})},"conversation_id")}),(0,r.jsx)(n.h3,{children:"Query Parameters"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"The user identifier, defined by the developer, must ensure uniqueness within the application"})},"user"),(0,r.jsx)(ef,{name:"last_id",type:"string",children:(0,r.jsx)(n.p,{children:"(Optional) The ID of the last record on the current page, default is null."})},"last_id"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"(Optional) How many records to return in one request, default is the most recent 20 entries. Maximum 100, minimum 1."})},"limit")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) Number of items per page"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool) Whether there is a next page"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object]) List of variables","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Variable ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) Variable name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value_type"})," (string) Variable type (string, number, object, etc.)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value"})," (string) Variable value"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) Variable description"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (int) Last update timestamp"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"conversation_not_exists"}),", Conversation not found"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/conversations/:conversation_id/variables",targetCode:`curl -X GET '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables?user=abc-123' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Request with variable name filter",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -X GET '${props.appDetail.api_base_url}/conversations/{conversation_id}/variables?user=abc-123&variable_name=customer_name' \\\n--header 'Authorization: Bearer {api_key}'\n"})})}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "limit": 100,\n  "has_more": false,\n  "data": [\n    {\n      "id": "variable-uuid-1",\n      "name": "customer_name",\n      "value_type": "string",\n      "value": "John Doe",\n      "description": "Customer name extracted from the conversation",\n      "created_at": 1650000000000,\n      "updated_at": 1650000000000\n    },\n    {\n      "id": "variable-uuid-2",\n      "name": "order_details",\n      "value_type": "json",\n      "value": "{\\"product\\":\\"Widget\\",\\"quantity\\":5,\\"price\\":19.99}",\n      "description": "Order details from the customer",\n      "created_at": 1650000000000,\n      "updated_at": 1650000000000\n    }\n  ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id/variables/:variable_id",method:"PUT",title:"Update Conversation Variable",name:"#update-conversation-variable"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Update the value of a specific conversation variable. This endpoint allows you to modify the value of a variable that was captured during the conversation while preserving its name, type, and description."}),(0,r.jsx)(n.h3,{children:"Path Parameters"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"The ID of the conversation containing the variable to update."})},"conversation_id"),(0,r.jsx)(ef,{name:"variable_id",type:"string",children:(0,r.jsx)(n.p,{children:"The ID of the variable to update."})},"variable_id")]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"value",type:"any",children:(0,r.jsx)(n.p,{children:"The new value for the variable. Must match the variable's expected type (string, number, object, etc.)."})},"value"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"The user identifier, defined by the developer, must ensure uniqueness within the application."})},"user")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsx)(n.p,{children:"Returns the updated variable object with:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Variable ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) Variable name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value_type"})," (string) Variable type (string, number, object, etc.)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value"})," (any) Updated variable value"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) Variable description"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (int) Last update timestamp"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"Type mismatch: variable expects {expected_type}, but got {actual_type} type"}),", Value type doesn't match variable's expected type"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"conversation_not_exists"}),", Conversation not found"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"conversation_variable_not_exists"}),", Variable not found"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"PUT",label:"/conversations/:conversation_id/variables/:variable_id",targetCode:`curl -X PUT '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "value": "Updated Value",
  "user": "abc-123"
}'`}),(0,r.jsxs)(eu,{title:"Update with different value types",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -X PUT '${props.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\\n--header 'Content-Type: application/json' \\\n--header 'Authorization: Bearer {api_key}' \\\n--data-raw '{\n    \"value\": \"New string value\",\n    \"user\": \"abc-123\"\n}'\n"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -X PUT '${props.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\\n--header 'Content-Type: application/json' \\\n--header 'Authorization: Bearer {api_key}' \\\n--data-raw '{\n    \"value\": 42,\n    \"user\": \"abc-123\"\n}'\n"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X PUT \'${props.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}\' \\\n--header \'Content-Type: application/json\' \\\n--header \'Authorization: Bearer {api_key}\' \\\n--data-raw \'{\n    "value": {"product": "Widget", "quantity": 10, "price": 29.99},\n    "user": "abc-123"\n}\'\n'})})]}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "variable-uuid-1",\n  "name": "customer_name",\n  "value_type": "string",\n  "value": "Updated Value",\n  "description": "Customer name extracted from the conversation",\n  "created_at": 1650000000000,\n  "updated_at": 1650000001000\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/audio-to-text",method:"POST",title:"Speech to Text",name:"#audio-to-text"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"This endpoint requires a multipart/form-data request."}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"file",type:"file",children:(0,r.jsxs)(n.p,{children:["Audio file.\nSupported formats: ",(0,r.jsx)(n.code,{children:"['mp3', 'mp4', 'mpeg', 'mpga', 'm4a', 'wav', 'webm']"}),"\nFile size limit: 15MB"]})},"file"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"User identifier, defined by the developer's rules, must be unique within the application."})},"user")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text"})," (string) Output text"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/audio-to-text",targetCode:`curl -X POST '${e.appDetail.api_base_url}/audio-to-text' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=audio/[mp3|mp4|mpeg|mpga|m4a|wav|webm]'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "text": ""\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/text-to-audio",method:"POST",title:"Text to Audio",name:"#text-to-audio"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Text to speech."}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"message_id",type:"str",children:(0,r.jsx)(n.p,{children:"For text messages generated by Dify, simply pass the generated message-id directly. The backend will use the message-id to look up the corresponding content and synthesize the voice information directly. If both message_id and text are provided simultaneously, the message_id is given priority."})},"message_id"),(0,r.jsx)(ef,{name:"text",type:"str",children:(0,r.jsx)(n.p,{children:"Speech generated content。"})},"text"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"The user identifier, defined by the developer, must ensure uniqueness within the app."})},"user")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/text-to-audio",targetCode:`curl --location --request POST '${e.appDetail.api_base_url}/text-to-audio' \\
--header 'Authorization: Bearer ENTER-YOUR-SECRET-KEY' \\
--form 'text=Hello Dify;user=abc-123;message_id=5ad4cb98-f0c7-4085-b384-88c403be6290`}),(0,r.jsx)(eu,{title:"headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "Content-Type": "audio/wav"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/info",method:"GET",title:"Get Application Basic Information",name:"#info"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Used to get basic information about this application"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) application name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) application description"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tags"})," (array[string]) application tags"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) application mode"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"author_name"})," (string) application author name"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/info",targetCode:`curl -X GET '${e.appDetail.api_base_url}/info' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "My App",\n  "description": "This is my app.",\n  "tags": [\n    "tag1",\n    "tag2"\n  ],\n  "mode": "advanced-chat",\n  "author_name": "Dify"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/parameters",method:"GET",title:"Get Application Parameters Information",name:"#parameters"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Used at the start of entering the page to obtain information such as features, input parameter names, types, and default values."}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"User identifier, defined by the developer's rules, must be unique within the application."})},"user")}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"opening_statement"})," (string) Opening statement"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"suggested_questions"})," (array[string]) List of suggested questions for the opening"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"suggested_questions_after_answer"})," (object) Suggest questions after enabling the answer.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"speech_to_text"})," (object) Speech to text","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text_to_speech"})," (object) Text to speech","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"voice"})," (string) Voice type"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"language"})," (string) Language"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"autoPlay"})," (string) Auto play","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"}),"   Enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"disabled"}),"  Disabled"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resource"})," (object) Citation and Attribution","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"annotation_reply"})," (object) Annotation reply","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user_input_form"})," (array[object]) User input form configuration","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text-input"})," (object) Text input control","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) Variable display label name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) Variable ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) Whether it is required"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) Default value"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"paragraph"})," (object) Paragraph text input control","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) Variable display label name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) Variable ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) Whether it is required"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) Default value"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"select"})," (object) Dropdown control","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) Variable display label name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) Variable ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) Whether it is required"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) Default value"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"options"})," (array[string]) Option values"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_upload"})," (object) File upload configuration","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," (object) Document settings\nCurrently only supports document types: ",(0,r.jsx)(n.code,{children:"txt"}),", ",(0,r.jsx)(n.code,{children:"md"}),", ",(0,r.jsx)(n.code,{children:"markdown"}),", ",(0,r.jsx)(n.code,{children:"pdf"}),", ",(0,r.jsx)(n.code,{children:"html"}),", ",(0,r.jsx)(n.code,{children:"xlsx"}),", ",(0,r.jsx)(n.code,{children:"xls"}),", ",(0,r.jsx)(n.code,{children:"docx"}),", ",(0,r.jsx)(n.code,{children:"csv"}),", ",(0,r.jsx)(n.code,{children:"eml"}),", ",(0,r.jsx)(n.code,{children:"msg"}),", ",(0,r.jsx)(n.code,{children:"pptx"}),", ",(0,r.jsx)(n.code,{children:"ppt"}),", ",(0,r.jsx)(n.code,{children:"xml"}),", ",(0,r.jsx)(n.code,{children:"epub"}),".","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Document number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," (object) Image settings\nCurrently only supports image types: ",(0,r.jsx)(n.code,{children:"png"}),", ",(0,r.jsx)(n.code,{children:"jpg"}),", ",(0,r.jsx)(n.code,{children:"jpeg"}),", ",(0,r.jsx)(n.code,{children:"webp"}),", ",(0,r.jsx)(n.code,{children:"gif"}),".","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Image number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (object) Audio settings\nCurrently only supports audio types: ",(0,r.jsx)(n.code,{children:"mp3"}),", ",(0,r.jsx)(n.code,{children:"m4a"}),", ",(0,r.jsx)(n.code,{children:"wav"}),", ",(0,r.jsx)(n.code,{children:"webm"}),", ",(0,r.jsx)(n.code,{children:"amr"}),".","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Audio number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," (object) Video settings\nCurrently only supports video types: ",(0,r.jsx)(n.code,{children:"mp4"}),", ",(0,r.jsx)(n.code,{children:"mov"}),", ",(0,r.jsx)(n.code,{children:"mpeg"}),", ",(0,r.jsx)(n.code,{children:"mpga"}),".","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Video number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," (object) Custom settings","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Custom number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"system_parameters"})," (object) System parameters","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_size_limit"})," (int) Document upload size limit (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image_file_size_limit"})," (int) Image file upload size limit (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio_file_size_limit"})," (int) Audio file upload size limit (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video_file_size_limit"})," (int) Video file upload size limit (MB)"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/parameters",targetCode:` curl -X GET '${e.appDetail.api_base_url}/parameters'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "opening_statement": "Hello!",\n  "suggested_questions_after_answer": {\n      "enabled": true\n  },\n  "speech_to_text": {\n      "enabled": true\n  },\n  "text_to_speech": {\n      "enabled": true,\n      "voice": "sambert-zhinan-v1",\n      "language": "zh-Hans",\n      "autoPlay": "disabled"\n  },\n  "retriever_resource": {\n      "enabled": true\n  },\n  "annotation_reply": {\n      "enabled": true\n  },\n  "user_input_form": [\n      {\n          "paragraph": {\n              "label": "Query",\n              "variable": "query",\n              "required": true,\n              "default": ""\n          }\n      }\n  ],\n  "file_upload": {\n      "image": {\n          "enabled": false,\n          "number_limits": 3,\n          "detail": "high",\n          "transfer_methods": [\n              "remote_url",\n              "local_file"\n          ]\n      }\n  },\n  "system_parameters": {\n      "file_size_limit": 15,\n      "image_file_size_limit": 10,\n      "audio_file_size_limit": 50,\n      "video_file_size_limit": 100\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/meta",method:"GET",title:"Get Application Meta Information",name:"#meta"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Used to get icons of tools in this application"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool_icons"}),"(object[string]) tool icons","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool_name"})," (string)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon"})," (object|string)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["(object) icon object","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"background"})," (string) background color in hex format"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"content"}),"(string) emoji"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"(string) url of icon"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/meta",targetCode:`curl -X GET '${e.appDetail.api_base_url}/meta' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "tool_icons": {\n    "dalle2": "https://cloud.dify.ai/console/api/workspaces/current/tool-provider/builtin/dalle/icon",\n    "api_tool": {\n      "background": "#252525",\n      "content": "\\ud83d\\ude01"\n    }\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/site",method:"GET",title:"Get Application WebApp Settings",name:"#site"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Used to get the WebApp settings of the application."}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) WebApp name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"chat_color_theme"})," (string) Chat color theme, in hex format"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"chat_color_theme_inverted"})," (bool) Whether the chat color theme is inverted"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_type"})," (string) Icon type, ",(0,r.jsx)(n.code,{children:"emoji"})," - emoji, ",(0,r.jsx)(n.code,{children:"image"})," - picture"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon"})," (string) Icon. If it's ",(0,r.jsx)(n.code,{children:"emoji"})," type, it's an emoji symbol; if it's ",(0,r.jsx)(n.code,{children:"image"})," type, it's an image URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_background"})," (string) Background color in hex format"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_url"})," (string) Icon URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) Description"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"copyright"})," (string) Copyright information"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"privacy_policy"})," (string) Privacy policy link"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom_disclaimer"})," (string) Custom disclaimer"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default_language"})," (string) Default language"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"show_workflow_steps"})," (bool) Whether to show workflow details"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"use_icon_as_answer_icon"})," (bool) Whether to replace 🤖 in chat with the WebApp icon"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/site",targetCode:`curl -X GET '${e.appDetail.api_base_url}/site' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "title": "My App",\n  "chat_color_theme": "#ff4a4a",\n  "chat_color_theme_inverted": false,\n  "icon_type": "emoji",\n  "icon": "😄",\n  "icon_background": "#FFEAD5",\n  "icon_url": null,\n  "description": "This is my app.",\n  "copyright": "all rights reserved",\n  "privacy_policy": "",\n  "custom_disclaimer": "All generated by AI",\n  "default_language": "en-US",\n  "show_workflow_steps": false,\n  "use_icon_as_answer_icon": false,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotations",method:"GET",title:"Get Annotation List",name:"#annotation_list"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"page",type:"string",children:(0,r.jsx)(n.p,{children:"Page number"})},"page"),(0,r.jsx)(ef,{name:"limit",type:"string",children:(0,r.jsx)(n.p,{children:"Number of items returned, default 20, range 1-100"})},"limit")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/apps/annotations",targetCode:`curl --location --request GET '${e.apiBaseUrl}/apps/annotations?page=1&limit=20' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "data": [\n    {\n      "id": "69d48372-ad81-4c75-9c46-2ce197b4d402",\n      "question": "What is your name?",\n      "answer": "I am Dify.",\n      "hit_count": 0,\n      "created_at": 1735625869\n    }\n  ],\n  "has_more": false,\n  "limit": 20,\n  "total": 1,\n  "page": 1\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotations",method:"POST",title:"Create Annotation",name:"#create_annotation"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"question",type:"string",children:(0,r.jsx)(n.p,{children:"Question"})},"question"),(0,r.jsx)(ef,{name:"answer",type:"string",children:(0,r.jsx)(n.p,{children:"Answer"})},"answer")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/apps/annotations",targetCode:`curl --location --request POST '${e.apiBaseUrl}/apps/annotations' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{"question": "What is your name?","answer": "I am Dify."}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  {\n    "id": "69d48372-ad81-4c75-9c46-2ce197b4d402",\n    "question": "What is your name?",\n    "answer": "I am Dify.",\n    "hit_count": 0,\n    "created_at": 1735625869\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotations/{annotation_id}",method:"PUT",title:"Update Annotation",name:"#update_annotation"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"annotation_id",type:"string",children:(0,r.jsx)(n.p,{children:"Annotation ID"})},"annotation_id"),(0,r.jsx)(ef,{name:"question",type:"string",children:(0,r.jsx)(n.p,{children:"Question"})},"question"),(0,r.jsx)(ef,{name:"answer",type:"string",children:(0,r.jsx)(n.p,{children:"Answer"})},"answer")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"PUT",label:"/apps/annotations/{annotation_id}",targetCode:`curl --location --request POST '${e.apiBaseUrl}/apps/annotations/{annotation_id}' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{"question": "What is your name?","answer": "I am Dify."}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  {\n    "id": "69d48372-ad81-4c75-9c46-2ce197b4d402",\n    "question": "What is your name?",\n    "answer": "I am Dify.",\n    "hit_count": 0,\n    "created_at": 1735625869\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotations/{annotation_id}",method:"DELETE",title:"Delete Annotation",name:"#delete_annotation"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"annotation_id",type:"string",children:(0,r.jsx)(n.p,{children:"Annotation ID"})},"annotation_id")})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"PUT",label:"/apps/annotations/{annotation_id}",targetCode:`curl --location --request DELETE '${e.apiBaseUrl}/apps/annotations/{annotation_id}' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"204 No Content\n"})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotation-reply/{action}",method:"POST",title:"Initial Annotation Reply Settings",name:"#initial_annotation_reply_settings"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"action",type:"string",children:(0,r.jsx)(n.p,{children:"Action, can only be 'enable' or 'disable'"})},"action"),(0,r.jsx)(ef,{name:"embedding_model_provider",type:"string",children:(0,r.jsx)(n.p,{children:"Specified embedding model provider, must be set up in the system first, corresponding to the provider field(Optional)"})},"embedding_model_provider"),(0,r.jsx)(ef,{name:"embedding_model",type:"string",children:(0,r.jsx)(n.p,{children:"Specified embedding model, corresponding to the model field(Optional)"})},"embedding_model"),(0,r.jsx)(ef,{name:"score_threshold",type:"number",children:(0,r.jsx)(n.p,{children:"The similarity threshold for matching annotated replies. Only annotations with scores above this threshold will be recalled."})},"score_threshold")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.p,{children:"The provider and model name of the embedding model can be obtained through the following interface: v1/workspaces/current/models/model-types/text-embedding. For specific instructions, see: Maintain Knowledge Base via API. The Authorization used is the Dataset API Token."}),(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/apps/annotation-reply/{action}",targetCode:`curl --location --request POST '${e.apiBaseUrl}/apps/annotation-reply/{action}' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{"score_threshold": 0.9, "embedding_provider_name": "zhipu", "embedding_model_name": "embedding_3"}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "job_id": "b15c8f68-1cf4-4877-bf21-ed7cf2011802",\n  "job_status": "waiting"\n}\n'})})}),(0,r.jsx)(n.p,{children:"This interface is executed asynchronously, so it will return a job_id. You can get the final execution result by querying the job status interface."})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/apps/annotation-reply/{action}/status/{job_id}",method:"GET",title:"Query Initial Annotation Reply Settings Task Status",name:"#initial_annotation_reply_settings_task_status"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"action",type:"string",children:(0,r.jsx)(n.p,{children:"Action, can only be 'enable' or 'disable', must be the same as the action in the initial annotation reply settings interface"})},"action"),(0,r.jsx)(ef,{name:"job_id",type:"string",children:(0,r.jsx)(n.p,{children:"Job ID,"})},"job_id")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/apps/annotations",targetCode:`curl --location --request GET '${e.apiBaseUrl}/apps/annotation-reply/{action}/status/{job_id}' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "job_id": "b15c8f68-1cf4-4877-bf21-ed7cf2011802",\n  "job_status": "waiting",\n  "error_msg": ""\n}\n'})})})]})]})]})}function eE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...b(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(eS,{...e})}):eS(e)}function eG(e){let n={a:"a",code:"code",h1:"h1",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...b(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{children:"チャットアプリ API"}),"\n",(0,r.jsx)(n.p,{children:"チャットアプリケーションはセッションの持続性をサポートしており、以前のチャット履歴を応答のコンテキストとして使用できます。これは、チャットボットやカスタマーサービス AI などに適用できます。"}),"\n",(0,r.jsxs)("div",{children:[(0,r.jsx)(n.h3,{children:"ベース URL"}),(0,r.jsx)(eu,{title:"コード",targetCode:e.appDetail.api_base_url}),(0,r.jsx)(n.h3,{children:"認証"}),(0,r.jsxs)(n.p,{children:["サービス API は ",(0,r.jsx)(n.code,{children:"API-Key"})," 認証を使用します。\n",(0,r.jsx)("i",{children:(0,r.jsx)(n.strong,{children:"API キーの漏洩を防ぐため、API キーはクライアント側で共有または保存せず、サーバー側で保存することを強くお勧めします。"})})]}),(0,r.jsxs)(n.p,{children:["すべての API リクエストにおいて、以下のように ",(0,r.jsx)(n.code,{children:"Authorization"}),"HTTP ヘッダーに API キーを含めてください："]}),(0,r.jsx)(eu,{title:"コード",targetCode:"Authorization: Bearer {API_KEY}"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/chat-messages",method:"POST",title:"チャットメッセージを送信",name:"#Send-Chat-Message"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"チャットアプリケーションにリクエストを送信します。"}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"query",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー入力/質問内容"})},"query"),(0,r.jsx)(ef,{name:"inputs",type:"object",children:(0,r.jsxs)(n.p,{children:["アプリで定義されたさまざまな変数値の入力を許可します。\n",(0,r.jsx)(n.code,{children:"inputs"}),"パラメータには複数のキー/値ペアが含まれ、各キーは特定の変数に対応し、各値はその変数の特定の値です。デフォルトは",(0,r.jsx)(n.code,{children:"{}"})]})},"inputs"),(0,r.jsxs)(ef,{name:"response_mode",type:"string",children:[(0,r.jsx)(n.p,{children:"応答の返却モードを指定します。サポートされているモード："}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"streaming"})," ストリーミングモード（推奨）、SSE（",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events",children:"Server-Sent Events"}),"）を通じてタイプライターのような出力を実装します。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"blocking"})," ブロッキングモード、実行完了後に結果を返します。（プロセスが長い場合、リクエストが中断される可能性があります）\nCloudflareの制限により、100秒後に応答がない場合、リクエストは中断されます。\n",(0,r.jsx)("i",{children:"注：エージェントアシスタントモードではブロッキングモードはサポートされていません"})]}),"\n"]})]},"response_mode"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子、エンドユーザーのアイデンティティを定義するために使用されます。\nアプリケーション内で開発者によって一意に定義される必要があります。"})},"user"),(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"会話ID、以前のチャット記録に基づいて会話を続けるには、前のメッセージのconversation_idを渡す必要があります。"})},"conversation_id"),(0,r.jsxs)(ef,{name:"files",type:"array[object]",children:[(0,r.jsx)(n.p,{children:"ファイルリスト、モデルが Vision/Video 機能をサポートしている場合に限り、ファイルをテキスト理解および質問応答に組み合わせて入力するのに適しています。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) サポートされるタイプ：","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," サポートされるタイプには以下が含まれます：'TXT', 'MD', 'MARKDOWN', 'MDX', 'PDF', 'HTML', 'XLSX', 'XLS', 'VTT', 'PROPERTIES', 'DOC', 'DOCX', 'CSV', 'EML', 'MSG', 'PPTX', 'PPT', 'XML', 'EPUB'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," サポートされるタイプには以下が含まれます：'JPG', 'JPEG', 'PNG', 'GIF', 'WEBP', 'SVG'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," サポートされるタイプには以下が含まれます：'MP3', 'M4A', 'WAV', 'WEBM', 'MPGA'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," サポートされるタイプには以下が含まれます：'MP4', 'MOV', 'MPEG', 'WEBM'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," サポートされるタイプには以下が含まれます：その他のファイルタイプ"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_method"})," (string) 転送方法:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"remote_url"}),": ファイルのURL。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"local_file"}),": ファイルをアップロード。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," ファイルのURL。（転送方法が ",(0,r.jsx)(n.code,{children:"remote_url"})," の場合のみ）。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"upload_file_id"})," アップロードされたファイルID。（転送方法が ",(0,r.jsx)(n.code,{children:"local_file"})," の場合のみ）。"]}),"\n"]})]},"files"),(0,r.jsx)(ef,{name:"auto_generate_name",type:"bool",children:(0,r.jsxs)(n.p,{children:["タイトルを自動生成します。デフォルトは",(0,r.jsx)(n.code,{children:"true"}),"です。\n",(0,r.jsx)(n.code,{children:"false"}),"に設定すると、会話のリネームAPIを呼び出し、",(0,r.jsx)(n.code,{children:"auto_generate"}),"を",(0,r.jsx)(n.code,{children:"true"}),"に設定することで非同期タイトル生成を実現できます。"]})},"auto_generate_name"),(0,r.jsx)(ef,{name:"workflow_id",type:"string",children:(0,r.jsxs)(n.p,{children:["（オプション）ワークフローID、特定のバージョンを指定するために使用、提供されない場合はデフォルトの公開バージョンを使用。",(0,r.jsx)("br",{}),"\n取得方法：バージョン履歴インターフェースで、各バージョンエントリの右側にあるコピーアイコンをクリックすると、完全なワークフローIDをコピーできます。"]})},"workflow_id"),(0,r.jsxs)(ef,{name:"trace_id",type:"string",children:[(0,r.jsxs)(n.p,{children:["（オプション）トレースID。既存の業務システムのトレースコンポーネントと連携し、エンドツーエンドの分散トレーシングを実現するために使用します。指定がない場合、システムが自動的に trace_id を生成します。以下の3つの方法で渡すことができ、優先順位は次のとおりです：",(0,r.jsx)("br",{})]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Header：HTTPヘッダー ",(0,r.jsx)("code",{children:"X-Trace-Id"})," で渡す（最優先）。",(0,r.jsx)("br",{})]}),"\n",(0,r.jsxs)(n.li,{children:["クエリパラメータ：URLクエリパラメータ ",(0,r.jsx)("code",{children:"trace_id"})," で渡す。",(0,r.jsx)("br",{})]}),"\n",(0,r.jsxs)(n.li,{children:["リクエストボディ：リクエストボディの ",(0,r.jsx)("code",{children:"trace_id"})," フィールドで渡す（本フィールド）。",(0,r.jsx)("br",{})]}),"\n"]})]},"trace_id")]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsx)(n.p,{children:"response_modeがブロッキングの場合、CompletionResponseオブジェクトを返します。\nresponse_modeがストリーミングの場合、ChunkCompletionResponseストリームを返します。"}),(0,r.jsx)(n.h3,{children:"ChatCompletionResponse"}),(0,r.jsxs)(n.p,{children:["完全なアプリ結果を返します。",(0,r.jsx)(n.code,{children:"Content-Type"}),"は",(0,r.jsx)(n.code,{children:"application/json"}),"です。"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) イベントタイプ、固定で ",(0,r.jsx)(n.code,{children:"message"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下のStop Generate APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ユニークID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会話ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) アプリモード、",(0,r.jsx)(n.code,{children:"chat"}),"として固定"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) 完全な応答内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"metadata"})," (object) メタデータ","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usage"})," (Usage) モデル使用情報"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) 引用と帰属リスト"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) メッセージ作成タイムスタンプ、例：1705395332"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"ChunkChatCompletionResponse"}),(0,r.jsxs)(n.p,{children:["アプリによって出力されたストリームチャンクを返します。",(0,r.jsx)(n.code,{children:"Content-Type"}),"は",(0,r.jsx)(n.code,{children:"text/event-stream"}),"です。\n各ストリーミングチャンクは",(0,r.jsx)(n.code,{children:"data:"}),"で始まり、2つの改行文字",(0,r.jsx)(n.code,{children:"\\n\\n"}),"で区切られます。以下のように表示されます："]}),(0,r.jsx)(eu,{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'data: {"event": "message", "task_id": "900bbd43-dc0b-4383-a372-aa6e6c414227", "id": "663c5084-a254-4040-8ad3-51f2a3c1a77c", "answer": "Hi", "created_at": 1705398420}\\n\\n\n'})})}),(0,r.jsxs)(n.p,{children:["ストリーミングチャンクの構造は",(0,r.jsx)(n.code,{children:"event"}),"に応じて異なります："]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message"})," LLMはテキストチャンクイベントを返します。つまり、完全なテキストがチャンク形式で出力されます。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下のStop Generate APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会話ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) LLMが返したテキストチャンク内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: agent_message"})," LLMはテキストチャンクイベントを返します。つまり、エージェントアシスタントが有効な場合、完全なテキストがチャンク形式で出力されます（エージェントモードでのみサポート）","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下のStop Generate APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会話ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) LLMが返したテキストチャンク内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message"})," TTSオーディオストリームイベント、つまり音声合成出力。内容はMp3形式のオーディオブロックで、base64文字列としてエンコードされています。再生時には、base64をデコードしてプレーヤーに入力するだけです。（このメッセージは自動再生が有効な場合にのみ利用可能）","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下の停止応答インターフェースに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 音声合成後のオーディオ、base64テキストコンテンツとしてエンコードされており、再生時にはbase64をデコードしてプレーヤーに入力するだけです"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message_end"})," TTSオーディオストリーム終了イベント。このイベントを受信すると、オーディオストリームの終了を示します。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下の停止応答インターフェースに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 終了イベントにはオーディオがないため、これは空の文字列です"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: agent_thought"})," エージェントの思考、LLMの思考、ツール呼び出しの入力と出力を含みます（エージェントモードでのみサポート）","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) エージェント思考ID、各反復には一意のエージェント思考IDがあります"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string)  タスクID、リクエスト追跡と以下のStop Generate APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"position"})," (int) 現在のエージェント思考の位置、各メッセージには順番に複数の思考が含まれる場合があります。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"thought"})," (string) LLMが考えていること"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"observation"})," (string) ツール呼び出しからの応答"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool"})," (string) 呼び出されたツールのリスト、;で区切られます"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool_input"})," (string) ツールの入力、JSON形式。例：",(0,r.jsx)(n.code,{children:'{"dalle3": {"prompt": "a cute cat"}}'}),"。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ、例：1705395332"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_files"})," (array[string]) message_fileイベントを参照","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_id"})," (string) ファイルID"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会話ID"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_file"})," メッセージファイルイベント、ツールによって新しいファイルが作成されました","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ファイル一意ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"}),' (string) ファイルタイプ、現在は"image"のみ許可']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"belongs_to"})," (string) 所属、ここでは'assistant'のみ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," (string) ファイルのリモートURL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"}),"  (string) 会話ID"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_end"})," メッセージ終了イベント、このイベントを受信するとストリーミングが終了したことを意味します。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下のStop Generate APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会話ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"metadata"})," (object) メタデータ","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usage"})," (Usage) モデル使用情報"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) 引用と帰属リスト"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_replace"})," メッセージ内容置換イベント。\n出力内容のモデレーションが有効な場合、内容がフラグされると、このイベントを通じてメッセージ内容が事前設定された返信に置き換えられます。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下のStop Generate APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会話ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) 置換内容（すべてのLLM返信テキストを直接置換）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: error"}),"\nストリーミングプロセス中に発生した例外はストリームイベントの形式で出力され、エラーイベントを受信するとストリームが終了します。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下のStop Generate APIに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (int) HTTPステータスコード"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"code"})," (string) エラーコード"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message"})," (string) エラーメッセージ"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: ping"})," 接続を維持するために10秒ごとにpingイベントが発生します。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"エラー"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"404, 会話が存在しません"}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"invalid_param"}),", 異常なパラメータ入力"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"app_unavailable"}),", アプリ構成が利用できません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"provider_not_initialize"}),", 利用可能なモデル資格情報構成がありません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"provider_quota_exceeded"}),", モデル呼び出しクォータが不足しています"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"model_currently_not_support"}),", 現在のモデルは利用できません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"workflow_not_found"}),", 指定されたワークフローバージョンが見つかりません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"draft_workflow_error"}),", ドラフトワークフローバージョンは使用できません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"workflow_id_format_error"}),", ワークフローID形式エラー、UUID形式が必要です"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"completion_request_error"}),", テキスト生成に失敗しました"]}),"\n",(0,r.jsx)(n.li,{children:"500, 内部サーバーエラー"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"POST",label:"/chat-messages",targetCode:`curl -X POST '${e.appDetail.api_base_url}/chat-messages' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "inputs": ${JSON.stringify(e.inputs)},
  "query": "What are the specs of the iPhone 13 Pro Max?",
  "response_mode": "streaming",
  "conversation_id": "",
  "user": "abc-123",
  "files": [
      {
        "type": "image",
      "transfer_method": "remote_url",
      "url": "https://cloud.dify.ai/logo/logo-site.png"
    }
  ]
}'`}),(0,r.jsx)(n.h3,{children:"ブロッキングモード"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "event": "message",\n    "task_id": "c3800678-a077-43df-a102-53f23ed20b88",\n    "id": "9da23599-e713-473b-982c-4328d4f5c78a",\n    "message_id": "9da23599-e713-473b-982c-4328d4f5c78a",\n    "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2",\n    "mode": "chat",\n    "answer": "iPhone 13 Pro Maxの仕様は次のとおりです:...",\n    "metadata": {\n        "usage": {\n            "prompt_tokens": 1033,\n            "prompt_unit_price": "0.001",\n            "prompt_price_unit": "0.001",\n            "prompt_price": "0.0010330",\n            "completion_tokens": 128,\n            "completion_unit_price": "0.002",\n            "completion_price_unit": "0.001",\n            "completion_price": "0.0002560",\n            "total_tokens": 1161,\n            "total_price": "0.0012890",\n            "currency": "USD",\n            "latency": 0.7682376249867957\n        },\n        "retriever_resources": [\n            {\n                "position": 1,\n                "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb",\n                "dataset_name": "iPhone",\n                "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00",\n                "document_name": "iPhone List",\n                "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a",\n                "score": 0.98457545,\n                "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""\n            }\n        ]\n    },\n    "created_at": 1705407629\n}\n'})})}),(0,r.jsx)(n.h3,{children:"ストリーミングモード（基本アシスタント）"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " I", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": "\'m", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " glad", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " to", "created_at": 1679586595}\n  data: {"event": "message", "message_id" : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " meet", "created_at": 1679586595}\n  data: {"event": "message", "message_id" : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " you", "created_at": 1679586595}\n  data: {"event": "message_end", "id": "5e52ce04-874b-4d27-9045-b3bc80def685", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "metadata": {"usage": {"prompt_tokens": 1033, "prompt_unit_price": "0.001", "prompt_price_unit": "0.001", "prompt_price": "0.0010330", "completion_tokens": 135, "completion_unit_price": "0.002", "completion_price_unit": "0.001", "completion_price": "0.0002700", "total_tokens": 1168, "total_price": "0.0013030", "currency": "USD", "latency": 1.381760165997548}, "retriever_resources": [{"position": 1, "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb", "dataset_name": "iPhone", "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00", "document_name": "iPhone List", "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a", "score": 0.98457545, "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""}]}}\n  data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}\n  data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}\n'})})}),(0,r.jsx)(n.h3,{children:"応答例（エージェントアシスタント）"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " I", "created_at": 1679586595}\ndata: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": "\'m", "created_at": 1679586595}\ndata: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " glad", "created_at": 1679586595}\ndata: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " to", "created_at": 1679586595}\ndata: {"event": "message", "message_id" : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " meet", "created_at": 1679586595}\ndata: {"event": "message", "message_id" : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " you", "created_at": 1679586595}\ndata: {"event": "message_end", "id": "5e52ce04-874b-4d27-9045-b3bc80def685", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "metadata": {"usage": {"prompt_tokens": 1033, "prompt_unit_price": "0.001", "prompt_price_unit": "0.001", "prompt_price": "0.0010330", "completion_tokens": 135, "completion_unit_price": "0.002", "completion_price_unit": "0.001", "completion_price": "0.0002700", "total_tokens": 1168, "total_price": "0.0013030", "currency": "USD", "latency": 1.381760165997548}, "retriever_resources": [{"position": 1, "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb", "dataset_name": "iPhone", "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00", "document_name": "iPhone List", "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a", "score": 0.98457545, "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""}]}}\ndata: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}\ndata: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/upload",method:"POST",title:"ファイルアップロード",name:"#file-upload"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"メッセージ送信時に使用するためのファイルをアップロードします（現在は画像のみサポート）。画像とテキストのマルチモーダル理解を可能にします。\npng、jpg、jpeg、webp、gif 形式をサポートしています。\nアップロードされたファイルは現在のエンドユーザーのみが使用できます。"}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(n.p,{children:["このインターフェースは",(0,r.jsx)(n.code,{children:"multipart/form-data"}),"リクエストを必要とします。"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file"})," (File) 必須\nアップロードするファイル。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) 必須\nユーザー識別子、開発者のルールで定義され、アプリケーション内で一意でなければなりません。サービス API は WebApp によって作成された会話を共有しません。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsx)(n.p,{children:"アップロードが成功すると、サーバーはファイルの ID と関連情報を返します。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (uuid) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) ファイル名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"size"})," (int) ファイルサイズ（バイト）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"extension"})," (string) ファイル拡張子"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mime_type"})," (string) ファイルの MIME タイプ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by"})," (uuid) エンドユーザーID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"エラー"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"no_file_uploaded"}),", ファイルが提供されなければなりません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"too_many_files"}),", 現在は 1 つのファイルのみ受け付けます"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"unsupported_preview"}),", ファイルはプレビューをサポートしていません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"unsupported_estimate"}),", ファイルは推定をサポートしていません"]}),"\n",(0,r.jsxs)(n.li,{children:["413, ",(0,r.jsx)(n.code,{children:"file_too_large"}),", ファイルが大きすぎます"]}),"\n",(0,r.jsxs)(n.li,{children:["415, ",(0,r.jsx)(n.code,{children:"unsupported_file_type"}),", サポートされていない拡張子、現在はドキュメントファイルのみ受け付けます"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_connection_failed"}),", S3 サービスに接続できません"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_permission_denied"}),", S3 にファイルをアップロードする権限がありません"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_file_too_large"}),", ファイルが S3 のサイズ制限を超えています"]}),"\n",(0,r.jsx)(n.li,{children:"500, 内部サーバーエラー"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"リクエスト例"}),(0,r.jsx)(eu,{title:"リクエスト",tag:"POST",label:"/files/upload",targetCode:`curl -X POST '${e.appDetail.api_base_url}/files/upload' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=image/[png|jpeg|jpg|webp|gif]' \\
--form 'user=abc-123'`}),(0,r.jsx)(n.h3,{children:"応答例"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "72fa9618-8f89-4a37-9b33-7e1178a24a67",\n  "name": "example.png",\n  "size": 1024,\n  "extension": "png",\n  "mime_type": "image/png",\n  "created_by": "6ad1ab0a-73ff-4ac1-b9e4-cdb312f71f13",\n  "created_at": 1577836800,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/:file_id/preview",method:"GET",title:"ファイルプレビュー",name:"#file-preview"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"アップロードされたファイルをプレビューまたはダウンロードします。このエンドポイントを使用すると、以前にファイルアップロード API でアップロードされたファイルにアクセスできます。"}),(0,r.jsx)("i",{children:"ファイルは、リクエストしているアプリケーションのメッセージ範囲内にある場合のみアクセス可能です。"}),(0,r.jsx)(n.h3,{children:"パスパラメータ"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_id"})," (string) 必須\nプレビューするファイルの一意識別子。ファイルアップロード API レスポンスから取得します。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"クエリパラメータ"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"as_attachment"})," (boolean) オプション\nファイルを添付ファイルとして強制ダウンロードするかどうか。デフォルトは ",(0,r.jsx)(n.code,{children:"false"}),"（ブラウザでプレビュー）。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"レスポンス"}),(0,r.jsx)(n.p,{children:"ブラウザ表示またはダウンロード用の適切なヘッダー付きでファイル内容を返します。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Type"})," ファイル MIME タイプに基づいて設定"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Length"})," ファイルサイズ（バイト、利用可能な場合）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Disposition"})," ",(0,r.jsx)(n.code,{children:"as_attachment=true"}),' の場合は "attachment" に設定']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Cache-Control"})," パフォーマンス向上のためのキャッシュヘッダー"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Accept-Ranges"}),' 音声/動画ファイルの場合は "bytes" に設定']}),"\n"]}),(0,r.jsx)(n.h3,{children:"エラー"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"invalid_param"}),", パラメータ入力異常"]}),"\n",(0,r.jsxs)(n.li,{children:["403, ",(0,r.jsx)(n.code,{children:"file_access_denied"}),", ファイルアクセス拒否またはファイルが現在のアプリケーションに属していません"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"file_not_found"}),", ファイルが見つからないか削除されています"]}),"\n",(0,r.jsx)(n.li,{children:"500, サーバー内部エラー"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"リクエスト例"}),(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/files/:file_id/preview",targetCode:`curl -X GET '${e.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(n.h3,{children:"添付ファイルとしてダウンロード"}),(0,r.jsx)(eu,{title:"Download Request",tag:"GET",label:"/files/:file_id/preview?as_attachment=true",targetCode:`curl -X GET '${e.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview?as_attachment=true' \\
--header 'Authorization: Bearer {api_key}' \\
--output downloaded_file.png`}),(0,r.jsx)(n.h3,{children:"レスポンスヘッダー例"}),(0,r.jsx)(eu,{title:"Response Headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"Content-Type: image/png\nContent-Length: 1024\nCache-Control: public, max-age=3600\n"})})}),(0,r.jsx)(n.h3,{children:"ダウンロードレスポンスヘッダー"}),(0,r.jsx)(eu,{title:"Download Response Headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"Content-Type: image/png\nContent-Length: 1024\nContent-Disposition: attachment; filename*=UTF-8''example.png\nCache-Control: public, max-age=3600\n"})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/chat-messages/:task_id/stop",method:"POST",title:"生成停止",name:"#stop-generatebacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"ストリーミングモードでのみサポートされています。"}),(0,r.jsx)(n.h3,{children:"パス"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスク ID、ストリーミングチャンクの返り値から取得できます"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) 必須\nユーザー識別子、エンドユーザーのアイデンティティを定義するために使用され、メッセージ送信インターフェースで渡されたユーザーと一致している必要があります。サービス API は WebApp によって作成された会話を共有しません。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"}),' (string) 常に"success"を返します']}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"リクエスト例"}),(0,r.jsx)(eu,{title:"リクエスト",tag:"POST",label:"/chat-messages/:task_id/stop",targetCode:`curl -X POST '${e.appDetail.api_base_url}/chat-messages/:task_id/stop' \\
-H 'Authorization: Bearer {api_key}' \\
-H 'Content-Type: application/json' \\
--data-raw '{"user": "abc-123"}'`}),(0,r.jsx)(n.h3,{children:"応答例"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages/:message_id/feedbacks",method:"POST",title:"メッセージフィードバック",name:"#feedbacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"エンドユーザーはフィードバックメッセージを提供でき、アプリケーション開発者が期待される出力を最適化するのに役立ちます。"}),(0,r.jsx)(n.h3,{children:"パス"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"message_id",type:"string",children:(0,r.jsx)(n.p,{children:"メッセージID"})},"message_id")}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"rating",type:"string",children:(0,r.jsxs)(n.p,{children:["アップボートは",(0,r.jsx)(n.code,{children:"like"}),"、ダウンボートは",(0,r.jsx)(n.code,{children:"dislike"}),"、アップボートの取り消しは",(0,r.jsx)(n.code,{children:"null"})]})},"rating"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子、開発者のルールで定義され、アプリケーション内で一意でなければなりません。"})},"user"),(0,r.jsx)(ef,{name:"content",type:"string",children:(0,r.jsx)(n.p,{children:"メッセージのフィードバックです。"})},"content")]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"}),' (string) 常に"success"を返します']}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"POST",label:"/messages/:message_id/feedbacks",targetCode:`curl -X POST '${e.appDetail.api_base_url}/messages/:message_id/feedbacks \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "rating": "like",
  "user": "abc-123",
  "content": "message feedback information"
}'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/app/feedbacks",method:"GET",title:"アプリのメッセージの「いいね」とフィードバックを取得",name:"#app-feedbacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"アプリのエンドユーザーからのフィードバックや「いいね」を取得します。"}),(0,r.jsx)(n.h3,{children:"クエリ"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"page",type:"string",children:(0,r.jsx)(n.p,{children:"（任意）ページ番号。デフォルト値：1"})},"page")}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"limit",type:"string",children:(0,r.jsx)(n.p,{children:"（任意）1ページあたりの件数。デフォルト値：20"})},"limit")}),(0,r.jsx)(n.h3,{children:"レスポンス"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (リスト) このアプリの「いいね」とフィードバックの一覧を返します。"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/app/feedbacks",targetCode:`curl -X GET '${e.appDetail.api_base_url}/app/feedbacks?page=1&limit=20'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'    {\n    "data": [\n        {\n            "id": "8c0fbed8-e2f9-49ff-9f0e-15a35bdd0e25",\n            "app_id": "f252d396-fe48-450e-94ec-e184218e7346",\n            "conversation_id": "2397604b-9deb-430e-b285-4726e51fd62d",\n            "message_id": "709c0b0f-0a96-4a4e-91a4-ec0889937b11",\n            "rating": "like",\n            "content": "message feedback information-3",\n            "from_source": "user",\n            "from_end_user_id": "74286412-9a1a-42c1-929c-01edb1d381d5",\n            "from_account_id": null,\n            "created_at": "2025-04-24T09:24:38",\n            "updated_at": "2025-04-24T09:24:38"\n        }\n    ]\n    }\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages/{message_id}/suggested",method:"GET",title:"次の推奨質問",name:"#suggested"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"現在のメッセージに対する次の質問の提案を取得します"}),(0,r.jsx)(n.h3,{children:"パスパラメータ"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"message_id",type:"string",children:(0,r.jsx)(n.p,{children:"メッセージID"})},"message_id")}),(0,r.jsx)(n.h3,{children:"クエリ"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子、エンドユーザーのアイデンティティを定義するために使用され、統計のために使用されます。\nアプリケーション内で開発者によって一意に定義される必要があります。"})},"user")})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/messages/{message_id}/suggested",targetCode:`curl --location --request GET '${e.appDetail.api_base_url}/messages/{message_id}/suggested?user=abc-123& \\
--header 'Authorization: Bearer ENTER-YOUR-SECRET-KEY' \\
--header 'Content-Type: application/json'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success",\n  "data": [\n        "a",\n        "b",\n        "c"\n    ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages",method:"GET",title:"会話履歴メッセージを取得",name:"#messages"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsxs)(n.p,{children:["スクロールロード形式で過去のチャット記録を返し、最初のページは最新の",(0,r.jsx)(n.code,{children:"{limit}"}),"メッセージを返します。つまり、逆順です。"]}),(0,r.jsx)(n.h3,{children:"クエリ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"会話ID"})},"conversation_id"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子、エンドユーザーのアイデンティティを定義するために使用され、統計のために使用されます。\nアプリケーション内で開発者によって一意に定義される必要があります。"})},"user"),(0,r.jsx)(ef,{name:"first_id",type:"string",children:(0,r.jsx)(n.p,{children:"現在のページの最初のチャット記録のID、デフォルトはnullです。"})},"first_id"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"1回のリクエストで返すチャット履歴メッセージの数、デフォルトは20です。"})},"limit")]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object]) メッセージリスト","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) メッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会話ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) ユーザー入力パラメータ。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"query"})," (string) ユーザー入力/質問内容。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_files"})," (array[object]) メッセージファイル","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) ファイルタイプ、画像の場合はimage"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," (string) ファイルプレビューURL、ファイルアクセスにはファイルプレビューAPI（",(0,r.jsx)(n.code,{children:"/files/{file_id}/preview"}),"）を使用してください"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"belongs_to"})," (string) 所属、ユーザーまたはアシスタント"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"agent_thoughts"})," (array[object]) エージェントの思考（基本アシスタントの場合は空）","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) エージェント思考ID、各反復には一意のエージェント思考IDがあります"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"position"})," (int) 現在のエージェント思考の位置、各メッセージには順番に複数の思考が含まれる場合があります。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"thought"})," (string) LLMが考えていること"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"observation"})," (string) ツール呼び出しからの応答"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool"})," (string) 呼び出されたツールのリスト、;で区切られます"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool_input"})," (string) ツールの入力、JSON形式。例：",(0,r.jsx)(n.code,{children:'{"dalle3": {"prompt": "a cute cat"}}'}),"。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ、例：1705395332"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_files"})," (array[string]) message_fileイベントを参照","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_id"})," (string) ファイルID"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) 応答メッセージ内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 作成タイムスタンプ、例：1705395332"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"feedback"})," (object) フィードバック情報","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"rating"})," (string) アップボートは",(0,r.jsx)(n.code,{children:"like"})," / ダウンボートは",(0,r.jsx)(n.code,{children:"dislike"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) 引用と帰属リスト"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool) 次のページがあるかどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) 返されたアイテムの数、入力がシステム制限を超える場合、システム制限の数を返します"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/messages",targetCode:`curl -X GET '${e.appDetail.api_base_url}/messages?user=abc-123&conversation_id='\\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(n.h3,{children:"応答例（基本アシスタント）"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "limit": 20,\n  "has_more": false,\n  "data": [\n    {\n        "id": "a076a87f-31e5-48dc-b452-0061adbbc922",\n        "conversation_id": "cd78daf6-f9e4-4463-9ff2-54257230a0ce",\n        "inputs": {\n            "name": "dify"\n        },\n        "query": "iphone 13 pro",\n        "answer": "iPhone 13 Proは2021年9月24日に発売され、6.1インチのディスプレイと1170 x 2532の解像度を備えています。Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)プロセッサ、6 GBのRAMを搭載し、128 GB、256 GB、512 GB、1 TBのストレージオプションを提供します。カメラは12 MP、バッテリー容量は3095 mAhで、iOS 15を搭載しています。",\n        "message_files": [],\n        "feedback": null,\n        "retriever_resources": [\n            {\n                "position": 1,\n                "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb",\n                "dataset_name": "iPhone",\n                "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00",\n                "document_name": "iPhone List",\n                "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a",\n                "score": 0.98457545,\n                "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""\n            }\n        ],\n        "agent_thoughts": [],\n        "created_at": 1705569239,\n    }\n  ]\n}\n'})})}),(0,r.jsx)(n.h3,{children:"応答例（エージェントアシスタント）"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "limit": 20,\n    "has_more": false,\n    "data": [\n        {\n            "id": "d35e006c-7c4d-458f-9142-be4930abdf94",\n            "conversation_id": "957c068b-f258-4f89-ba10-6e8a0361c457",\n            "inputs": {},\n            "query": "draw a cat",\n            "answer": "猫の画像を生成しました。メッセージを確認して画像を表示してください。",\n            "message_files": [\n                {\n                    "id": "976990d2-5294-47e6-8f14-7356ba9d2d76",\n                    "type": "image",\n                    "url": "http://127.0.0.1:5001/files/tools/976990d2-5294-47e6-8f14-7356ba9d2d76.png?timestamp=1705988524&nonce=55df3f9f7311a9acd91bf074cd524092&sign=z43nMSO1L2HBvoqADLkRxr7Biz0fkjeDstnJiCK1zh8=",\n                    "belongs_to": "assistant"\n                }\n            ],\n            "feedback": null,\n            "retriever_resources": [],\n            "created_at": 1705988187,\n            "agent_thoughts": [\n                {\n                    "id": "592c84cf-07ee-441c-9dcc-ffc66c033469",\n                    "chain_id": null,\n                    "message_id": "d35e006c-7c4d-458f-9142-be4930abdf94",\n                    "position": 1,\n                    "thought": "",\n                    "tool": "dalle2",\n                    "tool_input": "{\\"dalle2\\": {\\"prompt\\": \\"cat\\"}}",\n                    "created_at": 1705988186,\n                    "observation": "画像はすでに作成され、ユーザーに送信されました。今すぐユーザーに確認するように伝えてください。",\n                    "files": [\n                        "976990d2-5294-47e6-8f14-7356ba9d2d76"\n                    ]\n                },\n                {\n                    "id": "73ead60d-2370-4780-b5ed-532d2762b0e5",\n                    "chain_id": null,\n                    "message_id": "d35e006c-7c4d-458f-9142-be4930abdf94",\n                    "position": 2,\n                    "thought": "猫の画像を生成しました。メッセージを確認して画像を表示してください。",\n                    "tool": "",\n                    "tool_input": "",\n                    "created_at": 1705988199,\n                    "observation": "",\n                    "files": []\n                }\n            ]\n        }\n    ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations",method:"GET",title:"会話を取得",name:"#conversations"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"現在のユーザーの会話リストを取得し、デフォルトで最新の 20 件を返します。"}),(0,r.jsx)(n.h3,{children:"クエリ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子、エンドユーザーのアイデンティティを定義するために使用され、統計のために使用されます。\nアプリケーション内で開発者によって一意に定義される必要があります。"})},"user"),(0,r.jsx)(ef,{name:"last_id",type:"string",children:(0,r.jsx)(n.p,{children:"(Optional)現在のページの最後のレコードのID、デフォルトはnullです。"})},"last_id"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"(Optional)1回のリクエストで返すレコードの数、デフォルトは最新の20件です。最大100、最小1。"})},"limit"),(0,r.jsxs)(ef,{name:"sort_by",type:"string",children:[(0,r.jsx)(n.p,{children:"(Optional)ソートフィールド、デフォルト：-updated_at（更新時間で降順にソート）"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"利用可能な値：created_at, -created_at, updated_at, -updated_at"}),"\n",(0,r.jsx)(n.li,{children:'フィールドの前の記号は順序または逆順を表し、"-"は逆順を表します。'}),"\n"]})]},"sort_by")]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object]) 会話のリスト","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) 会話ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 会話名、デフォルトでは、ユーザーが会話で最初に尋ねた質問のスニペットです。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) ユーザー入力パラメータ。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"introduction"})," (string) 紹介"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 作成タイムスタンプ、例：1705395332"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (timestamp) 更新タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) 返されたエントリの数、入力がシステム制限を超える場合、システム制限の数を返します"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/conversations",targetCode:`curl -X GET '${e.appDetail.api_base_url}/conversations?user=abc-123&last_id=&limit=20' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "limit": 20,\n  "has_more": false,\n  "data": [\n    {\n      "id": "10799fb8-64f7-4296-bbf7-b42bfbe0ae54",\n      "name": "新しいチャット",\n      "inputs": {\n          "book": "book",\n          "myName": "Lucy"\n      },\n      "status": "normal",\n      "created_at": 1679667915,\n      "updated_at": 1679667915\n    },\n    {\n      "id": "hSIhXBhNe8X1d8Et"\n      // ...\n    }\n  ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id",method:"DELETE",title:"会話を削除",name:"#delete"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"会話を削除します。"}),(0,r.jsx)(n.h3,{children:"パス"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会話ID"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子、開発者によって定義され、アプリケーション内で一意である必要があります。"})},"user")}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"}),' (string) 常に"success"を返します']}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"DELETE",label:"/conversations/:conversation_id",targetCode:`curl -X DELETE '${e.appDetail.api_base_url}/conversations/:conversation_id' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"204 No Content\n"})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id/name",method:"POST",title:"会話の名前を変更",name:"#rename"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsx)(n.p,{children:"セッションの名前を変更します。セッション名は、複数のセッションをサポートするクライアントでの表示に使用されます。"}),(0,r.jsx)(n.h3,{children:"パス"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会話ID"]}),"\n"]}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"name",type:"string",children:(0,r.jsxs)(n.p,{children:["(Optional)会話の名前。このパラメータは、",(0,r.jsx)(n.code,{children:"auto_generate"}),"が",(0,r.jsx)(n.code,{children:"true"}),"に設定されている場合、省略できます。"]})},"name"),(0,r.jsx)(ef,{name:"auto_generate",type:"bool",children:(0,r.jsxs)(n.p,{children:["(Optional)タイトルを自動生成します。デフォルトは",(0,r.jsx)(n.code,{children:"false"}),"です。"]})},"auto_generate"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子、開発者によって定義され、アプリケーション内で一意である必要があります。"})},"user")]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) 会話ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 会話名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) ユーザー入力パラメータ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 会話状態"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"introduction"})," (string) 紹介"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 作成タイムスタンプ、例：1705395332"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (timestamp) 更新タイムスタンプ、例：1705395332"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"POST",label:"/conversations/:conversation_id/name",targetCode:`curl -X POST '${e.appDetail.api_base_url}/conversations/:conversation_id/name' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "name": "",
  "auto_generate": true,
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "id": "cd78daf6-f9e4-4463-9ff2-54257230a0ce",\n    "name": "Chat vs AI",\n    "inputs": {},\n    "introduction": "",\n    "created_at": 1705569238,\n    "updated_at": 1705569238\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id/variables",method:"GET",title:"会話変数の取得",name:"#conversation-variables"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"特定の会話から変数を取得します。このエンドポイントは、会話中に取得された構造化データを抽出するのに役立ちます。"}),(0,r.jsx)(n.h3,{children:"パスパラメータ"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"変数を取得する会話のID。"})},"conversation_id")}),(0,r.jsx)(n.h3,{children:"クエリパラメータ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子。開発者によって定義されたルールに従い、アプリケーション内で一意である必要があります。"})},"user"),(0,r.jsx)(ef,{name:"last_id",type:"string",children:(0,r.jsx)(n.p,{children:"(Optional)現在のページの最後のレコードのID、デフォルトはnullです。"})},"last_id"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"(Optional)1回のリクエストで返すレコードの数、デフォルトは最新の20件です。最大100、最小1。"})},"limit")]}),(0,r.jsx)(n.h3,{children:"レスポンス"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) ページごとのアイテム数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool) さらにアイテムがあるかどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object]) 変数のリスト","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) 変数 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 変数名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value_type"})," (string) 変数タイプ（文字列、数値、真偽値など）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value"})," (string) 変数値"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 変数の説明"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (int) 最終更新タイムスタンプ"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"エラー"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"conversation_not_exists"}),", 会話が見つかりません"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/conversations/:conversation_id/variables",targetCode:`curl -X GET '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables?user=abc-123' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Request with variable name filter",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -X GET '${props.appDetail.api_base_url}/conversations/{conversation_id}/variables?user=abc-123&variable_name=customer_name' \\\n--header 'Authorization: Bearer {api_key}'\n"})})}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "limit": 100,\n  "has_more": false,\n  "data": [\n    {\n      "id": "variable-uuid-1",\n      "name": "customer_name",\n      "value_type": "string",\n      "value": "John Doe",\n      "description": "会話から抽出された顧客名",\n      "created_at": 1650000000000,\n      "updated_at": 1650000000000\n    },\n    {\n      "id": "variable-uuid-2",\n      "name": "order_details",\n      "value_type": "json",\n      "value": "{\\"product\\":\\"Widget\\",\\"quantity\\":5,\\"price\\":19.99}",\n      "description": "顧客の注文詳細",\n      "created_at": 1650000000000,\n      "updated_at": 1650000000000\n    }\n  ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id/variables/:variable_id",method:"PUT",title:"会話変数の更新",name:"#update-conversation-variable"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"特定の会話変数の値を更新します。このエンドポイントは、名前、型、説明を保持しながら、会話中にキャプチャされた変数の値を変更することを可能にします。"}),(0,r.jsx)(n.h3,{children:"パスパラメータ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"更新する変数を含む会話のID。"})},"conversation_id"),(0,r.jsx)(ef,{name:"variable_id",type:"string",children:(0,r.jsx)(n.p,{children:"更新する変数のID。"})},"variable_id")]}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"value",type:"any",children:(0,r.jsx)(n.p,{children:"変数の新しい値。変数の期待される型（文字列、数値、オブジェクトなど）と一致する必要があります。"})},"value"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子。開発者によって定義されたルールに従い、アプリケーション内で一意である必要があります。"})},"user")]}),(0,r.jsx)(n.h3,{children:"レスポンス"}),(0,r.jsx)(n.p,{children:"以下を含む更新された変数オブジェクトを返します："}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) 変数ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 変数名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value_type"})," (string) 変数型（文字列、数値、オブジェクトなど）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value"})," (any) 更新された変数値"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 変数の説明"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (int) 最終更新タイムスタンプ"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"エラー"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"Type mismatch: variable expects {expected_type}, but got {actual_type} type"}),", 値の型が変数の期待される型と一致しません"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"conversation_not_exists"}),", 会話が見つかりません"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"conversation_variable_not_exists"}),", 変数が見つかりません"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"PUT",label:"/conversations/:conversation_id/variables/:variable_id",targetCode:`curl -X PUT '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "value": "Updated Value",
  "user": "abc-123"
}'`}),(0,r.jsxs)(eu,{title:"異なる値型での更新",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -X PUT '${props.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\\n--header 'Content-Type: application/json' \\\n--header 'Authorization: Bearer {api_key}' \\\n--data-raw '{\n    \"value\": \"新しい文字列値\",\n    \"user\": \"abc-123\"\n}'\n"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -X PUT '${props.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\\n--header 'Content-Type: application/json' \\\n--header 'Authorization: Bearer {api_key}' \\\n--data-raw '{\n    \"value\": 42,\n    \"user\": \"abc-123\"\n}'\n"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X PUT \'${props.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}\' \\\n--header \'Content-Type: application/json\' \\\n--header \'Authorization: Bearer {api_key}\' \\\n--data-raw \'{\n    "value": {"product": "Widget", "quantity": 10, "price": 29.99},\n    "user": "abc-123"\n}\'\n'})})]}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "variable-uuid-1",\n  "name": "customer_name",\n  "value_type": "string",\n  "value": "Updated Value",\n  "description": "会話から抽出された顧客名",\n  "created_at": 1650000000000,\n  "updated_at": 1650000001000\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/audio-to-text",method:"POST",title:"音声からテキストへ",name:"#audio-to-text"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"このエンドポイントは multipart/form-data リクエストを必要とします。"}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"file",type:"file",children:(0,r.jsxs)(n.p,{children:["オーディオファイル。\nサポートされている形式：",(0,r.jsx)(n.code,{children:"['mp3', 'mp4', 'mpeg', 'mpga', 'm4a', 'wav', 'webm']"}),"\nファイルサイズ制限：15MB"]})},"file"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子、開発者のルールで定義され、アプリケーション内で一意でなければなりません。"})},"user")]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text"})," (string) 出力テキスト"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"POST",label:"/audio-to-text",targetCode:`curl -X POST '${e.appDetail.api_base_url}/audio-to-text' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=audio/[mp3|mp4|mpeg|mpga|m4a|wav|webm]'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "text": ""\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/text-to-audio",method:"POST",title:"テキストから音声へ",name:"#text-to-audio"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"テキストを音声に変換します。"}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"message_id",type:"str",children:(0,r.jsx)(n.p,{children:"Difyによって生成されたテキストメッセージの場合、生成されたメッセージIDを直接渡します。バックエンドはメッセージIDを使用して対応するコンテンツを検索し、音声情報を直接合成します。message_idとtextが同時に提供される場合、message_idが優先されます。"})},"message_id"),(0,r.jsx)(ef,{name:"text",type:"str",children:(0,r.jsx)(n.p,{children:"音声生成コンテンツ。"})},"text"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"ユーザー識別子、開発者によって定義され、アプリ内で一意である必要があります。"})},"user")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"POST",label:"/text-to-audio",targetCode:`curl --location --request POST '${e.appDetail.api_base_url}/text-to-audio' \\
--header 'Authorization: Bearer ENTER-YOUR-SECRET-KEY' \\
--form 'text=Hello Dify;user=abc-123;message_id=5ad4cb98-f0c7-4085-b384-88c403be6290`}),(0,r.jsx)(eu,{title:"ヘッダー",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "Content-Type": "audio/wav"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/info",method:"GET",title:"アプリケーションの基本情報を取得",name:"#info"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"このアプリケーションの基本情報を取得するために使用されます"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) アプリケーションの名前"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) アプリケーションの説明"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tags"})," (array[string]) アプリケーションのタグ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) アプリケーションのモード"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"author_name"})," (string) 作者の名前"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/info",targetCode:`curl -X GET '${e.appDetail.api_base_url}/info' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "My App",\n  "description": "This is my app.",\n  "tags": [\n    "tag1",\n    "tag2"\n  ],\n  "mode": "chat",\n  "author_name": "Dify"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/parameters",method:"GET",title:"アプリケーションのパラメータ情報を取得",name:"#parameters"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"ページに入る際に、機能、入力パラメータ名、タイプ、デフォルト値などの情報を取得するために使用されます。"}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"opening_statement"})," (string) 開始文"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"suggested_questions"})," (array[string]) 開始時の推奨質問のリスト"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"suggested_questions_after_answer"})," (object) 答えを有効にした後の質問を提案します。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"speech_to_text"})," (object) 音声からテキストへ","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text_to_speech"})," (object) テキストから音声へ","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"voice"})," (string) 音声タイプ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"language"})," (string) 言語"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"autoPlay"})," (string) 自動再生","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"}),"  有効"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"disabled"})," 無効"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resource"})," (object) 引用と帰属","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"annotation_reply"})," (object) 注釈返信","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user_input_form"})," (array[object]) ユーザー入力フォームの構成","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text-input"})," (object) テキスト入力コントロール","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 変数表示ラベル名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 変数ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 必須かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) デフォルト値"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"paragraph"})," (object) 段落テキスト入力コントロール","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 変数表示ラベル名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 変数ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 必須かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) デフォルト値"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"select"})," (object) ドロップダウンコントロール","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 変数表示ラベル名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 変数ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 必須かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) デフォルト値"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"options"})," (array[string]) オプション値"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_upload"})," (object) ファイルアップロード設定","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," (object) ドキュメント設定\n現在サポートされているドキュメントタイプ：",(0,r.jsx)(n.code,{children:"txt"}),", ",(0,r.jsx)(n.code,{children:"md"}),", ",(0,r.jsx)(n.code,{children:"markdown"}),", ",(0,r.jsx)(n.code,{children:"pdf"}),", ",(0,r.jsx)(n.code,{children:"html"}),", ",(0,r.jsx)(n.code,{children:"xlsx"}),", ",(0,r.jsx)(n.code,{children:"xls"}),", ",(0,r.jsx)(n.code,{children:"docx"}),", ",(0,r.jsx)(n.code,{children:"csv"}),", ",(0,r.jsx)(n.code,{children:"eml"}),", ",(0,r.jsx)(n.code,{children:"msg"}),", ",(0,r.jsx)(n.code,{children:"pptx"}),", ",(0,r.jsx)(n.code,{children:"ppt"}),", ",(0,r.jsx)(n.code,{children:"xml"}),", ",(0,r.jsx)(n.code,{children:"epub"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) ドキュメント数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," (object) 画像設定\n現在サポートされている画像タイプ：",(0,r.jsx)(n.code,{children:"png"}),", ",(0,r.jsx)(n.code,{children:"jpg"}),", ",(0,r.jsx)(n.code,{children:"jpeg"}),", ",(0,r.jsx)(n.code,{children:"webp"}),", ",(0,r.jsx)(n.code,{children:"gif"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 画像数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (object) オーディオ設定\n現在サポートされているオーディオタイプ：",(0,r.jsx)(n.code,{children:"mp3"}),", ",(0,r.jsx)(n.code,{children:"m4a"}),", ",(0,r.jsx)(n.code,{children:"wav"}),", ",(0,r.jsx)(n.code,{children:"webm"}),", ",(0,r.jsx)(n.code,{children:"amr"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) オーディオ数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," (object) ビデオ設定\n現在サポートされているビデオタイプ：",(0,r.jsx)(n.code,{children:"mp4"}),", ",(0,r.jsx)(n.code,{children:"mov"}),", ",(0,r.jsx)(n.code,{children:"mpeg"}),", ",(0,r.jsx)(n.code,{children:"mpga"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) ビデオ数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," (object) カスタム設定","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) カスタム数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"system_parameters"})," (object) システムパラメータ","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_size_limit"})," (int) ドキュメントアップロードサイズ制限（MB）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image_file_size_limit"})," (int) 画像ファイルアップロードサイズ制限（MB）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio_file_size_limit"})," (int) オーディオファイルアップロードサイズ制限（MB）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video_file_size_limit"})," (int) ビデオファイルアップロードサイズ制限（MB）"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/parameters",targetCode:` curl -X GET '${e.appDetail.api_base_url}/parameters'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "opening_statement": "こんにちは！",\n  "suggested_questions_after_answer": {\n      "enabled": true\n  },\n  "speech_to_text": {\n      "enabled": true\n  },\n  "text_to_speech": {\n      "enabled": true,\n      "voice": "sambert-zhinan-v1",\n      "language": "zh-Hans",\n      "autoPlay": "disabled"\n  },\n  "retriever_resource": {\n      "enabled": true\n  },\n  "annotation_reply": {\n      "enabled": true\n  },\n  "user_input_form": [\n      {\n          "paragraph": {\n              "label": "クエリ",\n              "variable": "query",\n              "required": true,\n              "default": ""\n          }\n      }\n  ],\n  "file_upload": {\n      "image": {\n          "enabled": false,\n          "number_limits": 3,\n          "detail": "high",\n          "transfer_methods": [\n              "remote_url",\n              "local_file"\n          ]\n      }\n  },\n  "system_parameters": {\n      "file_size_limit": 15,\n      "image_file_size_limit": 10,\n      "audio_file_size_limit": 50,\n      "video_file_size_limit": 100\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/meta",method:"GET",title:"アプリケーションのメタ情報を取得",name:"#meta"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"このアプリケーションのツールのアイコンを取得するために使用されます"}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool_icons"}),"(object[string]) ツールアイコン","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool_name"})," (string)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon"})," (object|string)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["(object) アイコンオブジェクト","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"background"})," (string) 背景色（16 進数形式）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"content"}),"(string) 絵文字"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"(string) アイコンの URL"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/meta",targetCode:`curl -X GET '${e.appDetail.api_base_url}/meta' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "tool_icons": {\n    "dalle2": "https://cloud.dify.ai/console/api/workspaces/current/tool-provider/builtin/dalle/icon",\n    "api_tool": {\n      "background": "#252525",\n      "content": "\\ud83d\\ude01"\n    }\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/site",method:"GET",title:"アプリのWebApp設定を取得",name:"#site"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"アプリの WebApp 設定を取得するために使用します。"}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) WebApp 名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"chat_color_theme"})," (string) チャットの色テーマ、16 進数形式"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"chat_color_theme_inverted"})," (bool) チャットの色テーマを反転するかどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_type"})," (string) アイコンタイプ、",(0,r.jsx)(n.code,{children:"emoji"}),"-絵文字、",(0,r.jsx)(n.code,{children:"image"}),"-画像"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon"})," (string) アイコン。",(0,r.jsx)(n.code,{children:"emoji"}),"タイプの場合は絵文字、",(0,r.jsx)(n.code,{children:"image"}),"タイプの場合は画像 URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_background"})," (string) 16 進数形式の背景色"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_url"})," (string) アイコンの URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 説明"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"copyright"})," (string) 著作権情報"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"privacy_policy"})," (string) プライバシーポリシーのリンク"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom_disclaimer"})," (string) カスタム免責事項"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default_language"})," (string) デフォルト言語"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"show_workflow_steps"})," (bool) ワークフローの詳細を表示するかどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"use_icon_as_answer_icon"})," (bool) WebApp のアイコンをチャット内の🤖に置き換えるかどうか"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/site",targetCode:`curl -X GET '${e.appDetail.api_base_url}/site' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "title": "My App",\n  "chat_color_theme": "#ff4a4a",\n  "chat_color_theme_inverted": false,\n  "icon_type": "emoji",\n  "icon": "😄",\n  "icon_background": "#FFEAD5",\n  "icon_url": null,\n  "description": "This is my app.",\n  "copyright": "all rights reserved",\n  "privacy_policy": "",\n  "custom_disclaimer": "All generated by AI",\n  "default_language": "en-US",\n  "show_workflow_steps": false,\n  "use_icon_as_answer_icon": false,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{})]})}function eB(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...b(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(eG,{...e})}):eG(e)}function eM(e){let n={a:"a",code:"code",h1:"h1",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...b(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{children:"对话型应用 API"}),"\n",(0,r.jsx)(n.p,{children:"对话应用支持会话持久化，可将之前的聊天记录作为上下文进行回答，可适用于聊天/客服 AI 等。"}),"\n",(0,r.jsxs)("div",{children:[(0,r.jsx)(n.h3,{children:"基础 URL"}),(0,r.jsx)(eu,{title:"Code",targetCode:e.appDetail.api_base_url}),(0,r.jsx)(n.h3,{children:"鉴权"}),(0,r.jsxs)(n.p,{children:["Service API 使用 ",(0,r.jsx)(n.code,{children:"API-Key"})," 进行鉴权。\n",(0,r.jsx)("i",{children:(0,r.jsxs)(n.strong,{children:["强烈建议开发者把 ",(0,r.jsx)(n.code,{children:"API-Key"})," 放在后端存储，而非分享或者放在客户端存储，以免 ",(0,r.jsx)(n.code,{children:"API-Key"})," 泄露，导致财产损失。"]})}),"\n所有 API 请求都应在 ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"Authorization"})})," HTTP Header 中包含您的 ",(0,r.jsx)(n.code,{children:"API-Key"}),"，如下所示："]}),(0,r.jsx)(eu,{title:"Code",targetCode:"Authorization: Bearer {API_KEY}"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/chat-messages",method:"POST",title:"发送对话消息",name:"#Create-Chat-Message"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"创建会话消息。"}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"query",type:"string",children:(0,r.jsx)(n.p,{children:"用户输入/提问内容。"})},"query"),(0,r.jsx)(ef,{name:"inputs",type:"object",children:(0,r.jsxs)(n.p,{children:["允许传入 App 定义的各变量值。\ninputs 参数包含了多组键值对（Key/Value pairs），每组的键对应一个特定变量，每组的值则是该变量的具体值。\n默认 ",(0,r.jsx)(n.code,{children:"{}"})]})},"inputs"),(0,r.jsx)(ef,{name:"response_mode",type:"string",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"streaming"})," 流式模式（推荐）。基于 SSE（",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events",children:"Server-Sent Events"})}),"）实现类似打字机输出方式的流式返回。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"blocking"})," 阻塞模式，等待执行完毕后返回结果。（请求若流程较长可能会被中断）。\n",(0,r.jsx)("i",{children:"由于 Cloudflare 限制，请求会在 100 秒超时无返回后中断。"}),"\n注：Agent模式下不允许blocking。"]}),"\n"]})},"response_mode"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，用于定义终端用户的身份，方便检索、统计。\n由开发者定义规则，需保证用户标识在应用内唯一。服务 API 不会共享 WebApp 创建的对话。"})},"user"),(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"（选填）会话 ID，需要基于之前的聊天记录继续对话，必须传之前消息的 conversation_id。"})},"conversation_id"),(0,r.jsxs)(ef,{name:"files",type:"array[object]",children:[(0,r.jsx)(n.p,{children:"文件列表，适用于传入文件结合文本理解并回答问题，仅当模型支持 Vision/Video 能力时可用。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) 支持类型：","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," 具体类型包含：'TXT', 'MD', 'MARKDOWN', 'MDX', 'PDF', 'HTML', 'XLSX', 'XLS', 'VTT', 'PROPERTIES', 'DOC', 'DOCX', 'CSV', 'EML', 'MSG', 'PPTX', 'PPT', 'XML', 'EPUB'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," 具体类型包含：'JPG', 'JPEG', 'PNG', 'GIF', 'WEBP', 'SVG'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," 具体类型包含：'MP3', 'M4A', 'WAV', 'WEBM', 'MPGA'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," 具体类型包含：'MP4', 'MOV', 'MPEG', 'WEBM'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," 具体类型包含：其他文件类型"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_method"})," (string)  传递方式:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"remote_url"}),": 文件地址。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"local_file"}),": 上传文件。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," 文件地址。（仅当传递方式为 ",(0,r.jsx)(n.code,{children:"remote_url"})," 时）。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"upload_file_id"})," 上传文件 ID。（仅当传递方式为 ",(0,r.jsx)(n.code,{children:"local_file "}),"时）。"]}),"\n"]})]},"files"),(0,r.jsx)(ef,{name:"auto_generate_name",type:"bool",children:(0,r.jsxs)(n.p,{children:["（选填）自动生成标题，默认 ",(0,r.jsx)(n.code,{children:"true"}),"。 若设置为 ",(0,r.jsx)(n.code,{children:"false"}),"，则可通过调用会话重命名接口并设置 ",(0,r.jsx)(n.code,{children:"auto_generate"})," 为 ",(0,r.jsx)(n.code,{children:"true"})," 实现异步生成标题。"]})},"auto_generate_name"),(0,r.jsx)(ef,{name:"workflow_id",type:"string",children:(0,r.jsxs)(n.p,{children:["（选填）工作流ID，用于指定特定版本，如果不提供则使用默认的已发布版本。",(0,r.jsx)("br",{}),"\n获取方式：在版本历史界面，点击每个版本条目右侧的复制图标即可复制完整的工作流 ID。"]})},"workflow_id"),(0,r.jsxs)(ef,{name:"trace_id",type:"string",children:[(0,r.jsxs)(n.p,{children:["（选填）链路追踪ID。适用于与业务系统已有的trace组件打通，实现端到端分布式追踪等场景。如果未指定，系统会自动生成",(0,r.jsx)("code",{children:"trace_id"}),"。支持以下三种方式传递，具体优先级依次为：",(0,r.jsx)("br",{})]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Header：通过 HTTP Header ",(0,r.jsx)("code",{children:"X-Trace-Id"})," 传递，优先级最高。",(0,r.jsx)("br",{})]}),"\n",(0,r.jsxs)(n.li,{children:["Query 参数：通过 URL 查询参数 ",(0,r.jsx)("code",{children:"trace_id"})," 传递。",(0,r.jsx)("br",{})]}),"\n",(0,r.jsxs)(n.li,{children:["Request Body：通过请求体字段 ",(0,r.jsx)("code",{children:"trace_id"})," 传递（即本字段）。",(0,r.jsx)("br",{})]}),"\n"]})]},"trace_id")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(eb,{children:[(0,r.jsxs)(n.p,{children:["当 ",(0,r.jsx)(n.code,{children:"response_mode"})," 为 ",(0,r.jsx)(n.code,{children:"blocking"})," 时，返回 ChatCompletionResponse object。\n当 ",(0,r.jsx)(n.code,{children:"response_mode"})," 为 ",(0,r.jsx)(n.code,{children:"streaming"}),"时，返回 ChunkChatCompletionResponse object 流式序列。"]}),(0,r.jsx)(n.h3,{children:"ChatCompletionResponse"}),(0,r.jsxs)(n.p,{children:["返回完整的 App 结果，",(0,r.jsx)(n.code,{children:"Content-Type"})," 为 ",(0,r.jsx)(n.code,{children:"application/json"}),"。"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) 事件类型，固定为 ",(0,r.jsx)(n.code,{children:"message"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) 唯一ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会话 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) App 模式，固定为 chat"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) 完整回复内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"metadata"})," (object) 元数据","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usage"})," (Usage) 模型用量信息"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) 引用和归属分段列表"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 消息创建时间戳，如：1705395332"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"ChunkChatCompletionResponse"}),(0,r.jsxs)(n.p,{children:["返回 App 输出的流式块，",(0,r.jsx)(n.code,{children:"Content-Type"})," 为 ",(0,r.jsx)(n.code,{children:"text/event-stream"}),"。\n每个流式块均为 data: 开头，块之间以 \\n\\n 即两个换行符分隔，如下所示："]}),(0,r.jsx)(eu,{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'data: {"event": "message", "task_id": "900bbd43-dc0b-4383-a372-aa6e6c414227", "id": "663c5084-a254-4040-8ad3-51f2a3c1a77c", "answer": "Hi", "created_at": 1705398420}\\n\\n\n'})})}),(0,r.jsx)(n.p,{children:"流式块中根据 event 不同，结构也不同："}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message"})," LLM 返回文本块事件，即：完整的文本以分块的方式输出。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会话 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) LLM 返回文本块内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳，如：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: agent_message"})," Agent模式下返回文本块事件，即：在Agent模式下，文章的文本以分块的方式输出（仅Agent模式下使用）","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会话 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) LLM 返回文本块内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳，如：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: agent_thought"})," Agent模式下有关Agent思考步骤的相关内容，涉及到工具调用（仅Agent模式下使用）","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) agent_thought ID，每一轮Agent迭代都会有一个唯一的id"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务ID，用于请求跟踪下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"position"})," (int) agent_thought在消息中的位置，如第一轮迭代position为1"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"thought"})," (string) agent的思考内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"observation"})," (string) 工具调用的返回结果"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool"})," (string) 使用的工具列表，以 ; 分割多个工具"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool_input"})," (string) 工具的输入，JSON格式的字符串(object)。如：",(0,r.jsx)(n.code,{children:'{"dalle3": {"prompt": "a cute cat"}}'})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳，如：1705395332"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_files"})," (array[string])  当前 ",(0,r.jsx)(n.code,{children:"agent_thought"})," 关联的文件ID","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_id"})," (string) 文件ID"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会话ID"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_file"})," 文件事件，表示有新文件需要展示","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) 文件唯一ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) 文件类型，目前仅为image"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"belongs_to"})," (string) 文件归属，user或assistant，该接口返回仅为 ",(0,r.jsx)(n.code,{children:"assistant"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," (string) 文件访问地址"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"}),"  (string) 会话ID"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_end"})," 消息结束事件，收到此事件则代表流式返回结束。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会话 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"metadata"})," (object) 元数据","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usage"})," (Usage) 模型用量信息"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) 引用和归属分段列表"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message"})," TTS 音频流事件，即：语音合成输出。内容是Mp3格式的音频块，使用 base64 编码后的字符串，播放的时候直接解码即可。(开启自动播放才有此消息)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 语音合成之后的音频块使用 Base64 编码之后的文本内容，播放的时候直接 base64 解码送入播放器即可"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳，如：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message_end"})," TTS 音频流结束事件，收到这个事件表示音频流返回结束。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 结束事件是没有音频的，所以这里是空字符串"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳，如：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: message_replace"})," 消息内容替换事件。\n开启内容审查和审查输出内容时，若命中了审查条件，则会通过此事件替换消息内容为预设回复。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会话 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string) 替换内容（直接替换 LLM 所有回复文本）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳，如：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: error"}),"\n流式输出过程中出现的异常会以 stream event 形式输出，收到异常事件后即结束。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (int) HTTP 状态码"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"code"})," (string) 错误码"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message"})," (string) 错误消息"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: ping"})," 每 10s 一次的 ping 事件，保持连接存活。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"404，对话不存在"}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"invalid_param"}),"，传入参数异常"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"app_unavailable"}),"，App 配置不可用"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"provider_not_initialize"}),"，无可用模型凭据配置"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"provider_quota_exceeded"}),"，模型调用额度不足"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"model_currently_not_support"}),"，当前模型不可用"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"workflow_not_found"}),"，指定的工作流版本未找到"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"draft_workflow_error"}),"，无法使用草稿工作流版本"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"workflow_id_format_error"}),"，工作流ID格式错误，需要UUID格式"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"completion_request_error"}),"，文本生成失败"]}),"\n",(0,r.jsx)(n.li,{children:"500，服务内部异常"}),"\n"]})]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/chat-messages",targetCode:`curl -X POST '${e.appDetail.api_base_url}/chat-messages' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "inputs": ${JSON.stringify(e.inputs)},
  "query": "What are the specs of the iPhone 13 Pro Max?",
  "response_mode": "streaming",
  "conversation_id": "",
  "user": "abc-123",
  "files": [
      {
        "type": "image",
      "transfer_method": "remote_url",
      "url": "https://cloud.dify.ai/logo/logo-site.png"
    }
  ]
}'`}),(0,r.jsx)(n.h3,{children:"阻塞模式"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "event": "message",\n    "task_id": "c3800678-a077-43df-a102-53f23ed20b88",\n    "id": "9da23599-e713-473b-982c-4328d4f5c78a",\n    "message_id": "9da23599-e713-473b-982c-4328d4f5c78a",\n    "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2",\n    "mode": "chat",\n    "answer": "iPhone 13 Pro Max specs are listed here:...",\n    "metadata": {\n        "usage": {\n            "prompt_tokens": 1033,\n            "prompt_unit_price": "0.001",\n            "prompt_price_unit": "0.001",\n            "prompt_price": "0.0010330",\n            "completion_tokens": 128,\n            "completion_unit_price": "0.002",\n            "completion_price_unit": "0.001",\n            "completion_price": "0.0002560",\n            "total_tokens": 1161,\n            "total_price": "0.0012890",\n            "currency": "USD",\n            "latency": 0.7682376249867957\n        },\n        "retriever_resources": [\n            {\n                "position": 1,\n                "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb",\n                "dataset_name": "iPhone",\n                "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00",\n                "document_name": "iPhone List",\n                "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a",\n                "score": 0.98457545,\n                "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""\n            }\n        ]\n    },\n    "created_at": 1705407629\n}\n'})})}),(0,r.jsx)(n.h3,{children:"流式模式（基础助手）"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " I", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": "\'m", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " glad", "created_at": 1679586595}\n  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " to", "created_at": 1679586595}\n  data: {"event": "message", "message_id" : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " meet", "created_at": 1679586595}\n  data: {"event": "message", "message_id" : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " you", "created_at": 1679586595}\n  data: {"event": "message_end", "id": "5e52ce04-874b-4d27-9045-b3bc80def685", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "metadata": {"usage": {"prompt_tokens": 1033, "prompt_unit_price": "0.001", "prompt_price_unit": "0.001", "prompt_price": "0.0010330", "completion_tokens": 135, "completion_unit_price": "0.002", "completion_price_unit": "0.001", "completion_price": "0.0002700", "total_tokens": 1168, "total_price": "0.0013030", "currency": "USD", "latency": 1.381760165997548}, "retriever_resources": [{"position": 1, "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb", "dataset_name": "iPhone", "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00", "document_name": "iPhone List", "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a", "score": 0.98457545, "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""}]}}\n  data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}\n  data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}\n'})})}),(0,r.jsx)(n.h3,{children:"流式模式（智能助手）"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'  data: {"event": "agent_thought", "id": "8dcf3648-fbad-407a-85dd-73a6f43aeb9f", "task_id": "9cf1ddd7-f94b-459b-b942-b77b26c59e9b", "message_id": "1fb10045-55fd-4040-99e6-d048d07cbad3", "position": 1, "thought": "", "observation": "", "tool": "", "tool_input": "", "created_at": 1705639511, "message_files": [], "conversation_id": "c216c595-2d89-438c-b33c-aae5ddddd142"}\n  data: {"event": "agent_thought", "id": "8dcf3648-fbad-407a-85dd-73a6f43aeb9f", "task_id": "9cf1ddd7-f94b-459b-b942-b77b26c59e9b", "message_id": "1fb10045-55fd-4040-99e6-d048d07cbad3", "position": 1, "thought": "", "observation": "", "tool": "dalle3", "tool_input": "{\\"dalle3\\": {\\"prompt\\": \\"cute Japanese anime girl with white hair, blue eyes, bunny girl suit\\"}}", "created_at": 1705639511, "message_files": [], "conversation_id": "c216c595-2d89-438c-b33c-aae5ddddd142"}\n  data: {"event": "message_file", "id": "d75b7a5c-ce5e-442e-ab1b-d6a5e5b557b0", "type": "image", "belongs_to": "assistant", "url": "http://127.0.0.1:5001/files/tools/d75b7a5c-ce5e-442e-ab1b-d6a5e5b557b0.png?timestamp=1705639526&nonce=70423256c60da73a9c96d1385ff78487&sign=7B5fKV9890YJuqchQvrABvW4AIupDvDvxGdu1EOJT94=", "conversation_id": "c216c595-2d89-438c-b33c-aae5ddddd142"}\n  data: {"event": "agent_thought", "id": "8dcf3648-fbad-407a-85dd-73a6f43aeb9f", "task_id": "9cf1ddd7-f94b-459b-b942-b77b26c59e9b", "message_id": "1fb10045-55fd-4040-99e6-d048d07cbad3", "position": 1, "thought": "", "observation": "image has been created and sent to user already, you should tell user to check it now.", "tool": "dalle3", "tool_input": "{\\"dalle3\\": {\\"prompt\\": \\"cute Japanese anime girl with white hair, blue eyes, bunny girl suit\\"}}", "created_at": 1705639511, "message_files": ["d75b7a5c-ce5e-442e-ab1b-d6a5e5b557b0"], "conversation_id": "c216c595-2d89-438c-b33c-aae5ddddd142"}\n  data: {"event": "agent_thought", "id": "67a99dc1-4f82-42d3-b354-18d4594840c8", "task_id": "9cf1ddd7-f94b-459b-b942-b77b26c59e9b", "message_id": "1fb10045-55fd-4040-99e6-d048d07cbad3", "position": 2, "thought": "", "observation": "", "tool": "", "tool_input": "", "created_at": 1705639511, "message_files": [], "conversation_id": "c216c595-2d89-438c-b33c-aae5ddddd142"}\n  data: {"event": "agent_message", "id": "1fb10045-55fd-4040-99e6-d048d07cbad3", "task_id": "9cf1ddd7-f94b-459b-b942-b77b26c59e9b", "message_id": "1fb10045-55fd-4040-99e6-d048d07cbad3", "answer": "I have created an image of a cute Japanese", "created_at": 1705639511, "conversation_id": "c216c595-2d89-438c-b33c-aae5ddddd142"}\n  data: {"event": "agent_message", "id": "1fb10045-55fd-4040-99e6-d048d07cbad3", "task_id": "9cf1ddd7-f94b-459b-b942-b77b26c59e9b", "message_id": "1fb10045-55fd-4040-99e6-d048d07cbad3", "answer": " anime girl with white hair and blue", "created_at": 1705639511, "conversation_id": "c216c595-2d89-438c-b33c-aae5ddddd142"}\n  data: {"event": "agent_message", "id": "1fb10045-55fd-4040-99e6-d048d07cbad3", "task_id": "9cf1ddd7-f94b-459b-b942-b77b26c59e9b", "message_id": "1fb10045-55fd-4040-99e6-d048d07cbad3", "answer": " eyes wearing a bunny girl" ,"created_at": 1705639511, "conversation_id": "c216c595-2d89-438c-b33c-aae5ddddd142"}\n  data: {"event": "agent_message", "id": "1fb10045-55fd-4040-99e6-d048d07cbad3", "task_id": "9cf1ddd7-f94b-459b-b942-b77b26c59e9b", "message_id": "1fb10045-55fd-4040-99e6-d048d07cbad3", "answer": " suit .", "created_at": 1705639511, "conversation_id": "c216c595-2d89-438c-b33c-aae5ddddd142"}\n  data: {"event": "agent_thought", "id": "67a99dc1-4f82-42d3-b354-18d4594840c8", "task_id": "9cf1ddd7-f94b-459b-b942-b77b26c59e9b", "message_id": "1fb10045-55fd-4040-99e6-d048d07cbad3", "position": 2, "thought": "I have created an image of a cute Japanese anime girl with white hair and blue eyes wearing a bunny girl suit.", "observation": "", "tool": "", "tool_input": "", "created_at": 1705639511, "message_files": [], "conversation_id": "c216c595-2d89-438c-b33c-aae5ddddd142"}\n  data: {"event": "message_end", "id": "5e52ce04-874b-4d27-9045-b3bc80def685", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "metadata": {"usage": {"prompt_tokens": 1033, "prompt_unit_price": "0.001", "prompt_price_unit": "0.001", "prompt_price": "0.0010330", "completion_tokens": 135, "completion_unit_price": "0.002", "completion_price_unit": "0.001", "completion_price": "0.0002700", "total_tokens": 1168, "total_price": "0.0013030", "currency": "USD", "latency": 1.381760165997548}, "retriever_resources": [{"position": 1, "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb", "dataset_name": "iPhone", "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00", "document_name": "iPhone List", "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a", "score": 0.98457545, "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""}]}}\n  data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}\n  data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/upload",method:"POST",title:"上传文件",name:"#files-upload"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsxs)(n.p,{children:["上传文件（目前仅支持图片）并在发送消息时使用，可实现图文多模态理解。\n支持 png, jpg, jpeg, webp, gif 格式。\n",(0,r.jsx)("i",{children:"上传的文件仅供当前终端用户使用。"})]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.p,{children:["该接口需使用  ",(0,r.jsx)(n.code,{children:"multipart/form-data"})," 进行请求。"]}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"file",type:"file",children:(0,r.jsx)(n.p,{children:"要上传的文件。"})},"file"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，用于定义终端用户的身份，必须和发送消息接口传入 user 保持一致。服务 API 不会共享 WebApp 创建的对话。"})},"user")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsx)(n.p,{children:"成功上传后，服务器会返回文件的 ID 和相关信息。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (uuid) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 文件名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"size"})," (int) 文件大小（byte）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"extension"})," (string) 文件后缀"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mime_type"})," (string) 文件 mime-type"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by"})," (uuid) 上传人 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 上传时间"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"no_file_uploaded"}),"，必须提供文件"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"too_many_files"}),"，目前只接受一个文件"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"unsupported_preview"}),"，该文件不支持预览"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"unsupported_estimate"}),"，该文件不支持估算"]}),"\n",(0,r.jsxs)(n.li,{children:["413，",(0,r.jsx)(n.code,{children:"file_too_large"}),"，文件太大"]}),"\n",(0,r.jsxs)(n.li,{children:["415，",(0,r.jsx)(n.code,{children:"unsupported_file_type"}),"，不支持的扩展名，当前只接受文档类文件"]}),"\n",(0,r.jsxs)(n.li,{children:["503，",(0,r.jsx)(n.code,{children:"s3_connection_failed"}),"，无法连接到 S3 服务"]}),"\n",(0,r.jsxs)(n.li,{children:["503，",(0,r.jsx)(n.code,{children:"s3_permission_denied"}),"，无权限上传文件到 S3"]}),"\n",(0,r.jsxs)(n.li,{children:["503，",(0,r.jsx)(n.code,{children:"s3_file_too_large"}),"，文件超出 S3 大小限制"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/files/upload",targetCode:`curl -X POST '${e.appDetail.api_base_url}/files/upload' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=image/[png|jpeg|jpg|webp|gif]' \\
--form 'user=abc-123'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "72fa9618-8f89-4a37-9b33-7e1178a24a67",\n  "name": "example.png",\n  "size": 1024,\n  "extension": "png",\n  "mime_type": "image/png",\n  "created_by": 123,\n  "created_at": 1577836800,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/:file_id/preview",method:"GET",title:"文件预览",name:"#file-preview"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"预览或下载已上传的文件。此端点允许您访问先前通过文件上传 API 上传的文件。"}),(0,r.jsx)("i",{children:"文件只能在属于请求应用程序的消息范围内访问。"}),(0,r.jsx)(n.h3,{children:"路径参数"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_id"})," (string) 必需\n要预览的文件的唯一标识符，从文件上传 API 响应中获得。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"查询参数"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"as_attachment"})," (boolean) 可选\n是否强制将文件作为附件下载。默认为 ",(0,r.jsx)(n.code,{children:"false"}),"（在浏览器中预览）。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"响应"}),(0,r.jsx)(n.p,{children:"返回带有适当浏览器显示或下载标头的文件内容。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Type"})," 根据文件 MIME 类型设置"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Length"})," 文件大小（以字节为单位，如果可用）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Content-Disposition"})," 如果 ",(0,r.jsx)(n.code,{children:"as_attachment=true"}),' 则设置为 "attachment"']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Cache-Control"})," 用于性能的缓存标头"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Accept-Ranges"}),' 对于音频/视频文件设置为 "bytes"']}),"\n"]}),(0,r.jsx)(n.h3,{children:"错误"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"invalid_param"}),", 参数输入异常"]}),"\n",(0,r.jsxs)(n.li,{children:["403, ",(0,r.jsx)(n.code,{children:"file_access_denied"}),", 文件访问被拒绝或文件不属于当前应用程序"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"file_not_found"}),", 文件未找到或已被删除"]}),"\n",(0,r.jsx)(n.li,{children:"500, 服务内部错误"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"请求示例"}),(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/files/:file_id/preview",targetCode:`curl -X GET '${e.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview' \\
--header 'Authorization: Bearer {api_key}'`,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -X GET '${props.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview' \\\n--header 'Authorization: Bearer {api_key}'\n"})})}),(0,r.jsx)(n.h3,{children:"作为附件下载"}),(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/files/:file_id/preview?as_attachment=true",targetCode:`curl -X GET '${e.appDetail.api_base_url}/files/72fa9618-8f89-4a37-9b33-7e1178a24a67/preview?as_attachment=true' \\
--header 'Authorization: Bearer {api_key}' \\
--output downloaded_file.png`}),(0,r.jsx)(n.h3,{children:"响应标头示例"}),(0,r.jsx)(eu,{title:"Response Headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"Content-Type: image/png\nContent-Length: 1024\nCache-Control: public, max-age=3600\n"})})}),(0,r.jsx)(n.h3,{children:"文件下载响应标头"}),(0,r.jsx)(eu,{title:"Download Response Headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:"Content-Type: image/png\nContent-Length: 1024\nContent-Disposition: attachment; filename*=UTF-8''example.png\nCache-Control: public, max-age=3600\n"})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/chat-messages/:task_id/stop",method:"POST",title:"停止响应",name:"#Stop"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"仅支持流式模式。"}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，可在流式返回 Chunk 中获取"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) Required\n用户标识，用于定义终端用户的身份，必须和发送消息接口传入 user 保持一致。API 无法访问 WebApp 创建的会话。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"})," (string) 固定返回 success"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/chat-messages/:task_id/stop",targetCode:`curl -X POST '${e.appDetail.api_base_url}/chat-messages/:task_id/stop' \\
-H 'Authorization: Bearer {api_key}' \\
-H 'Content-Type: application/json' \\
--data-raw '{ "user": "abc-123"}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages/:message_id/feedbacks",method:"POST",title:"消息反馈（点赞）",name:"#feedbacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"消息终端用户反馈、点赞，方便应用开发者优化输出预期。"}),(0,r.jsx)(n.h3,{children:"Path Params"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"message_id",type:"string",children:(0,r.jsx)(n.p,{children:"消息 ID"})},"message_id")}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"rating",type:"string",children:(0,r.jsx)(n.p,{children:"点赞 like, 点踩 dislike,  撤销点赞 null"})},"rating"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，由开发者定义规则，需保证用户标识在应用内唯一。服务 API 不会共享 WebApp 创建的对话。"})},"user"),(0,r.jsx)(ef,{name:"content",type:"string",children:(0,r.jsx)(n.p,{children:"消息反馈的具体信息。"})},"content")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"})," (string) 固定返回 success"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/messages/:message_id/feedbacks",targetCode:`curl -X POST '${e.appDetail.api_base_url}/messages/:message_id/feedbacks \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "rating": "like",
  "user": "abc-123",
  "content": "message feedback information"
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/app/feedbacks",method:"GET",title:"获取APP的消息点赞和反馈",name:"#app-feedbacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"获取应用的终端用户反馈、点赞。"}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"page",type:"string",children:(0,r.jsx)(n.p,{children:"（选填）分页，默认值：1"})},"page")}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"limit",type:"string",children:(0,r.jsx)(n.p,{children:"（选填）每页数量，默认值：20"})},"limit")}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (List) 返回该APP的点赞、反馈列表。"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/app/feedbacks",targetCode:`curl -X GET '${e.appDetail.api_base_url}/app/feedbacks?page=1&limit=20'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'    {\n    "data": [\n        {\n            "id": "8c0fbed8-e2f9-49ff-9f0e-15a35bdd0e25",\n            "app_id": "f252d396-fe48-450e-94ec-e184218e7346",\n            "conversation_id": "2397604b-9deb-430e-b285-4726e51fd62d",\n            "message_id": "709c0b0f-0a96-4a4e-91a4-ec0889937b11",\n            "rating": "like",\n            "content": "message feedback information-3",\n            "from_source": "user",\n            "from_end_user_id": "74286412-9a1a-42c1-929c-01edb1d381d5",\n            "from_account_id": null,\n            "created_at": "2025-04-24T09:24:38",\n            "updated_at": "2025-04-24T09:24:38"\n        }\n    ]\n    }\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages/{message_id}/suggested",method:"GET",title:"获取下一轮建议问题列表",name:"#suggested"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"获取下一轮建议问题列表。"}),(0,r.jsx)(n.h3,{children:"Path Params"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"message_id",type:"string",children:(0,r.jsx)(n.p,{children:"Message ID"})},"message_id")}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，由开发者定义规则，需保证用户标识在应用内唯一。"})},"user")})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/messages/{message_id}/suggested",targetCode:`curl --location --request GET '${e.appDetail.api_base_url}/messages/{message_id}/suggested?user=abc-123 \\
--header 'Authorization: Bearer ENTER-YOUR-SECRET-KEY' \\
--header 'Content-Type: application/json'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success",\n  "data": [\n        "a",\n        "b",\n        "c"\n    ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/messages",method:"GET",title:"获取会话历史消息",name:"#messages"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsxs)(n.p,{children:["滚动加载形式返回历史聊天记录，第一页返回最新  ",(0,r.jsx)(n.code,{children:"limit"})," 条，即：倒序返回。"]}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"会话 ID"})},"conversation_id"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，由开发者定义规则，需保证用户标识在应用内唯一。"})},"user"),(0,r.jsx)(ef,{name:"first_id",type:"string",children:(0,r.jsx)(n.p,{children:"当前页第一条聊天记录的 ID，默认 null"})},"first_id"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"一次请求返回多少条聊天记录，默认 20 条。"})},"limit")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object])  消息列表","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"}),"  (string) 消息 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string)  会话 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) 用户输入参数。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"query"}),"  (string) 用户输入 / 提问内容。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_files"})," (array[object]) 消息文件","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) 文件类型，image 图片"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," (string) 文件预览地址，使用文件预览 API (",(0,r.jsx)(n.code,{children:"/files/{file_id}/preview"}),") 访问文件"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"belongs_to"})," (string) 文件归属方，user 或 assistant"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"agent_thoughts"})," (array[object]) Agent思考内容（仅Agent模式下不为空）","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) agent_thought ID，每一轮Agent迭代都会有一个唯一的id"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"position"})," (int) agent_thought在消息中的位置，如第一轮迭代position为1"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"thought"})," (string) agent的思考内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"observation"})," (string) 工具调用的返回结果"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool"})," (string) 使用的工具列表，以 ; 分割多个工具"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool_input"})," (string) 工具的输入，JSON格式的字符串(object)。如：",(0,r.jsx)(n.code,{children:'{"dalle3": {"prompt": "a cute cat"}}'})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳，如：1705395332"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_files"})," (array[string])  当前agent_thought 关联的文件ID","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_id"})," (string) 文件ID"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会话ID"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"answer"})," (string)  回答消息内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"}),"  (timestamp) 创建时间"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"feedback"})," (object) 反馈信息","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"rating"})," (string) 点赞 like / 点踩 dislike"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resources"})," (array[RetrieverResource]) 引用和归属分段列表"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool) 是否存在下一页"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) 返回条数，若传入超过系统限制，返回系统限制数量"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"Request Example"}),(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/messages",targetCode:`curl -X GET '${e.appDetail.api_base_url}/messages?user=abc-123&conversation_id=' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(n.h3,{children:"Response Example(基础助手)"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n"limit": 20,\n"has_more": false,\n"data": [\n    {\n        "id": "a076a87f-31e5-48dc-b452-0061adbbc922",\n        "conversation_id": "cd78daf6-f9e4-4463-9ff2-54257230a0ce",\n        "inputs": {\n            "name": "dify"\n        },\n        "query": "iphone 13 pro",\n        "answer": "The iPhone 13 Pro, released on September 24, 2021, features a 6.1-inch display with a resolution of 1170 x 2532. It is equipped with a Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard) processor, 6 GB of RAM, and offers storage options of 128 GB, 256 GB, 512 GB, and 1 TB. The camera is 12 MP, the battery capacity is 3095 mAh, and it runs on iOS 15.",\n        "message_files": [],\n        "feedback": null,\n        "retriever_resources": [\n            {\n                "position": 1,\n                "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb",\n                "dataset_name": "iPhone",\n                "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00",\n                "document_name": "iPhone List",\n                "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a",\n                "score": 0.98457545,\n                "content": "\\"Model\\",\\"Release Date\\",\\"Display Size\\",\\"Resolution\\",\\"Processor\\",\\"RAM\\",\\"Storage\\",\\"Camera\\",\\"Battery\\",\\"Operating System\\"\\n\\"iPhone 13 Pro Max\\",\\"September 24, 2021\\",\\"6.7 inch\\",\\"1284 x 2778\\",\\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\\",\\"6 GB\\",\\"128, 256, 512 GB, 1TB\\",\\"12 MP\\",\\"4352 mAh\\",\\"iOS 15\\""\n            }\n        ],\n        "agent_thoughts": [],\n        "created_at": 1705569239\n    }\n  ]\n}\n'})})}),(0,r.jsx)(n.h3,{children:"Response Example(智能助手)"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n"limit": 20,\n"has_more": false,\n"data": [\n    {\n        "id": "d35e006c-7c4d-458f-9142-be4930abdf94",\n        "conversation_id": "957c068b-f258-4f89-ba10-6e8a0361c457",\n        "inputs": {},\n        "query": "draw a cat",\n        "answer": "I have generated an image of a cat for you. Please check your messages to view the image.",\n        "message_files": [\n            {\n                "id": "976990d2-5294-47e6-8f14-7356ba9d2d76",\n                "type": "image",\n                "url": "http://127.0.0.1:5001/files/tools/976990d2-5294-47e6-8f14-7356ba9d2d76.png?timestamp=1705988524&nonce=55df3f9f7311a9acd91bf074cd524092&sign=z43nMSO1L2HBvoqADLkRxr7Biz0fkjeDstnJiCK1zh8=",\n                "belongs_to": "assistant"\n            }\n        ],\n        "feedback": null,\n        "retriever_resources": [],\n        "created_at": 1705988187,\n        "agent_thoughts": [\n            {\n                "id": "592c84cf-07ee-441c-9dcc-ffc66c033469",\n                "chain_id": null,\n                "message_id": "d35e006c-7c4d-458f-9142-be4930abdf94",\n                "position": 1,\n                "thought": "",\n                "tool": "dalle2",\n                "tool_input": "{\\"dalle2\\": {\\"prompt\\": \\"cat\\"}}",\n                "created_at": 1705988186,\n                "observation": "image has been created and sent to user already, you should tell user to check it now.",\n                "files": [\n                    "976990d2-5294-47e6-8f14-7356ba9d2d76"\n                ]\n            },\n            {\n                "id": "73ead60d-2370-4780-b5ed-532d2762b0e5",\n                "chain_id": null,\n                "message_id": "d35e006c-7c4d-458f-9142-be4930abdf94",\n                "position": 2,\n                "thought": "I have generated an image of a cat for you. Please check your messages to view the image.",\n                "tool": "",\n                "tool_input": "",\n                "created_at": 1705988199,\n                "observation": "",\n                "files": []\n            }\n        ]\n    }\n    ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations",method:"GET",title:"获取会话列表",name:"#conversations"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"获取当前用户的会话列表，默认返回最近的 20 条。"}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，由开发者定义规则，需保证用户标识在应用内唯一。"})},"user"),(0,r.jsx)(ef,{name:"last_id",type:"string",children:(0,r.jsx)(n.p,{children:"（选填）当前页最后面一条记录的 ID，默认 null"})},"last_id"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"（选填）一次请求返回多少条记录，默认 20 条，最大 100 条，最小 1 条。"})},"limit"),(0,r.jsxs)(ef,{name:"sort_by",type:"string",children:[(0,r.jsx)(n.p,{children:"（选填）排序字段，默认 -updated_at(按更新时间倒序排列)"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"可选值：created_at, -created_at, updated_at, -updated_at"}),"\n",(0,r.jsx)(n.li,{children:"字段前面的符号代表顺序或倒序，-代表倒序"}),"\n"]})]},"sort_by")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object]) 会话列表","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"}),"  (string) 会话 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"}),"  (string) 会话名称，默认为会话中用户最开始问题的截取。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) 用户输入参数。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 会话状态"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"introduction"})," (string) 开场白"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 创建时间"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (timestamp) 更新时间"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) 返回条数，若传入超过系统限制，返回系统限制数量"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/conversations",targetCode:`curl -X GET '${e.appDetail.api_base_url}/conversations?user=abc-123&last_id=&limit=20'\\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "limit": 20,\n  "has_more": false,\n  "data": [\n    {\n      "id": "10799fb8-64f7-4296-bbf7-b42bfbe0ae54",\n      "name": "New chat",\n      "inputs": {\n          "book": "book",\n          "myName": "Lucy"\n      },\n      "status": "normal",\n      "created_at": 1679667915,\n      "updated_at": 1679667915\n    },\n    {\n      "id": "hSIhXBhNe8X1d8Et"\n      // ...\n    }\n  ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id",method:"DELETE",title:"删除会话",name:"#delete"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"删除会话。"}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会话 ID"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，由开发者定义规则，需保证用户标识在应用内唯一。"})},"user")}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"})," (string) 固定返回 success"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"DELETE",label:"/conversations/:conversation_id",targetCode:`curl -X DELETE '${e.appDetail.api_base_url}/conversations/:conversation_id' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"204 No Content\n"})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id/name",method:"POST",title:"会话重命名",name:"#rename"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"对会话进行重命名，会话名称用于显示在支持多会话的客户端上。"}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"conversation_id"})," (string) 会话 ID"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"name",type:"string",children:(0,r.jsxs)(n.p,{children:["（选填）名称，若 ",(0,r.jsx)(n.code,{children:"auto_generate"})," 为 ",(0,r.jsx)(n.code,{children:"true"})," 时，该参数可不传。"]})},"name"),(0,r.jsx)(ef,{name:"auto_generate",type:"bool",children:(0,r.jsx)(n.p,{children:"（选填）自动生成标题，默认 false。"})},"auto_generate"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，由开发者定义规则，需保证用户标识在应用内唯一。"})},"user")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"}),"  (string) 会话 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"}),"  (string) 会话名称"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) 用户输入参数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 会话状态"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"introduction"})," (string) 开场白"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 创建时间"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (timestamp) 更新时间"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/conversations/:conversation_id/name",targetCode:`curl -X POST '${e.appDetail.api_base_url}/conversations/:conversation_id/name' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "name": "",
  "auto_generate": true,
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "34d511d5-56de-4f16-a997-57b379508443",\n  "name": "hello",\n  "inputs": {},\n  "status": "normal",\n  "introduction": "",\n  "created_at": 1732731141,\n  "updated_at": 1732734510\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id/variables",method:"GET",title:"获取对话变量",name:"#conversation-variables"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"从特定对话中检索变量。此端点对于提取对话过程中捕获的结构化数据非常有用。"}),(0,r.jsx)(n.h3,{children:"路径参数"}),(0,r.jsx)(eb,{children:(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"要从中检索变量的对话ID。"})},"conversation_id")}),(0,r.jsx)(n.h3,{children:"查询参数"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识符，由开发人员定义的规则，在应用程序内必须唯一。"})},"user"),(0,r.jsx)(ef,{name:"last_id",type:"string",children:(0,r.jsx)(n.p,{children:"（选填）当前页最后面一条记录的 ID，默认 null"})},"last_id"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"（选填）一次请求返回多少条记录，默认 20 条，最大 100 条，最小 1 条。"})},"limit")]}),(0,r.jsx)(n.h3,{children:"响应"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) 每页项目数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool) 是否有更多项目"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object]) 变量列表","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) 变量 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 变量名称"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value_type"})," (string) 变量类型（字符串、数字、布尔等）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value"})," (string) 变量值"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 变量描述"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (int) 最后更新时间戳"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"错误"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"conversation_not_exists"}),", 对话不存在"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/conversations/:conversation_id/variables",targetCode:`curl -X GET '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables?user=abc-123' \\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Request with variable name filter",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -X GET '${props.appDetail.api_base_url}/conversations/{conversation_id}/variables?user=abc-123&variable_name=customer_name' \\\n--header 'Authorization: Bearer {api_key}'\n"})})}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "limit": 100,\n  "has_more": false,\n  "data": [\n    {\n      "id": "variable-uuid-1",\n      "name": "customer_name",\n      "value_type": "string",\n      "value": "John Doe",\n      "description": "客户名称（从对话中提取）",\n      "created_at": 1650000000000,\n      "updated_at": 1650000000000\n    },\n    {\n      "id": "variable-uuid-2",\n      "name": "order_details",\n      "value_type": "json",\n      "value": "{\\"product\\":\\"Widget\\",\\"quantity\\":5,\\"price\\":19.99}",\n      "description": "客户的订单详情",\n      "created_at": 1650000000000,\n      "updated_at": 1650000000000\n    }\n  ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/conversations/:conversation_id/variables/:variable_id",method:"PUT",title:"更新对话变量",name:"#update-conversation-variable"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"更新特定对话变量的值。此端点允许您修改在对话过程中捕获的变量值，同时保留其名称、类型和描述。"}),(0,r.jsx)(n.h3,{children:"路径参数"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"conversation_id",type:"string",children:(0,r.jsx)(n.p,{children:"包含要更新变量的对话ID。"})},"conversation_id"),(0,r.jsx)(ef,{name:"variable_id",type:"string",children:(0,r.jsx)(n.p,{children:"要更新的变量ID。"})},"variable_id")]}),(0,r.jsx)(n.h3,{children:"请求体"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"value",type:"any",children:(0,r.jsx)(n.p,{children:"变量的新值。必须匹配变量的预期类型（字符串、数字、对象等）。"})},"value"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识符，由开发人员定义的规则，在应用程序内必须唯一。"})},"user")]}),(0,r.jsx)(n.h3,{children:"响应"}),(0,r.jsx)(n.p,{children:"返回包含以下内容的更新变量对象："}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) 变量ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 变量名称"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value_type"})," (string) 变量类型（字符串、数字、对象等）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"value"})," (any) 更新后的变量值"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 变量描述"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"updated_at"})," (int) 最后更新时间戳"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"错误"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"Type mismatch: variable expects {expected_type}, but got {actual_type} type"}),", 值类型与变量的预期类型不匹配"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"conversation_not_exists"}),", 对话不存在"]}),"\n",(0,r.jsxs)(n.li,{children:["404, ",(0,r.jsx)(n.code,{children:"conversation_variable_not_exists"}),", 变量不存在"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"PUT",label:"/conversations/:conversation_id/variables/:variable_id",targetCode:`curl -X PUT '${e.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "value": "Updated Value",
  "user": "abc-123"
}'`}),(0,r.jsxs)(eu,{title:"使用不同值类型更新",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -X PUT '${props.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\\n--header 'Content-Type: application/json' \\\n--header 'Authorization: Bearer {api_key}' \\\n--data-raw '{\n    \"value\": \"新的字符串值\",\n    \"user\": \"abc-123\"\n}'\n"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -X PUT '${props.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}' \\\n--header 'Content-Type: application/json' \\\n--header 'Authorization: Bearer {api_key}' \\\n--data-raw '{\n    \"value\": 42,\n    \"user\": \"abc-123\"\n}'\n"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X PUT \'${props.appDetail.api_base_url}/conversations/{conversation_id}/variables/{variable_id}\' \\\n--header \'Content-Type: application/json\' \\\n--header \'Authorization: Bearer {api_key}\' \\\n--data-raw \'{\n    "value": {"product": "Widget", "quantity": 10, "price": 29.99},\n    "user": "abc-123"\n}\'\n'})})]}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "variable-uuid-1",\n  "name": "customer_name",\n  "value_type": "string",\n  "value": "Updated Value",\n  "description": "客户名称（从对话中提取）",\n  "created_at": 1650000000000,\n  "updated_at": 1650000001000\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/audio-to-text",method:"POST",title:"语音转文字",name:"#audio-to-text"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.p,{children:["该接口需使用 ",(0,r.jsx)(n.code,{children:"multipart/form-data"})," 进行请求。"]}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"file",type:"file",children:(0,r.jsxs)(n.p,{children:["语音文件。\n支持格式：",(0,r.jsx)(n.code,{children:"['mp3', 'mp4', 'mpeg', 'mpga', 'm4a', 'wav', 'webm']"}),"\n文件大小限制：15MB"]})},"file"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，由开发者定义规则，需保证用户标识在应用内唯一。"})},"user")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text"})," (string) 输出文字"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/audio-to-text",targetCode:`curl -X POST '${e.appDetail.api_base_url}/audio-to-text' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=audio/[mp3|mp4|mpeg|mpga|m4a|wav|webm]`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "text": "hello"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/text-to-audio",method:"POST",title:"文字转语音",name:"#text-to-audio"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"文字转语音。"}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"message_id",type:"str",children:(0,r.jsx)(n.p,{children:"Dify 生成的文本消息，那么直接传递生成的message-id 即可，后台会通过 message_id 查找相应的内容直接合成语音信息。如果同时传 message_id 和 text，优先使用 message_id。"})},"message_id"),(0,r.jsx)(ef,{name:"text",type:"str",children:(0,r.jsx)(n.p,{children:"语音生成内容。如果没有传 message-id的话，则会使用这个字段的内容"})},"text"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，由开发者定义规则，需保证用户标识在应用内唯一。"})},"user")]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/text-to-audio",targetCode:`curl --location --request POST '${e.appDetail.api_base_url}/text-to-audio' \\
--header 'Authorization: Bearer ENTER-YOUR-SECRET-KEY' \\
--form 'text=你好Dify;user=abc-123;message_id=5ad4cb98-f0c7-4085-b384-88c403be6290`}),(0,r.jsx)(eu,{title:"headers",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "Content-Type": "audio/wav"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/info",method:"GET",title:"获取应用基本信息",name:"#info"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"用于获取应用的基本信息"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 应用名称"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 应用描述"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tags"})," (array[string]) 应用标签"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) 应用模式"]}),"\n",(0,r.jsx)(n.li,{children:"'author_name' (string) 作者名称"}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/info",targetCode:`curl -X GET '${e.appDetail.api_base_url}/info' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "My App",\n  "description": "This is my app.",\n  "tags": [\n    "tag1",\n    "tag2"\n  ],\n  "mode": "chat",\n  "author_name": "Dify"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/parameters",method:"GET",title:"获取应用参数",name:"#parameters"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"用于进入页面一开始，获取功能开关、输入参数名称、类型及默认值等使用。"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"opening_statement"})," (string) 开场白"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"suggested_questions"})," (array[string]) 开场推荐问题列表"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"suggested_questions_after_answer"})," (object) 启用回答后给出推荐问题。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否开启"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"speech_to_text"})," (object) 语音转文本","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否开启"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text_to_speech"})," (object) 文本转语音","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否开启"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"voice"})," (string) 语音类型"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"language"})," (string) 语言"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"autoPlay"})," (string) 自动播放","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"}),"  开启"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"disabled"})," 关闭"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retriever_resource"})," (object) 引用和归属","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否开启"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"annotation_reply"})," (object) 标记回复","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否开启"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user_input_form"})," (array[object]) 用户输入表单配置","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text-input"})," (object) 文本输入控件","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 控件展示标签名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 控件 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 是否必填"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) 默认值"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"paragraph"})," (object) 段落文本输入控件","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 控件展示标签名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 控件 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 是否必填"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) 默认值"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"select"})," (object) 下拉控件","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 控件展示标签名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 控件 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 是否必填"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) 默认值"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"options"})," (array[string]) 选项值"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_upload"})," (object) 文件上传配置","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," (object) 文档设置\n当前仅支持文档类型：",(0,r.jsx)(n.code,{children:"txt"}),", ",(0,r.jsx)(n.code,{children:"md"}),", ",(0,r.jsx)(n.code,{children:"markdown"}),", ",(0,r.jsx)(n.code,{children:"pdf"}),", ",(0,r.jsx)(n.code,{children:"html"}),", ",(0,r.jsx)(n.code,{children:"xlsx"}),", ",(0,r.jsx)(n.code,{children:"xls"}),", ",(0,r.jsx)(n.code,{children:"docx"}),", ",(0,r.jsx)(n.code,{children:"csv"}),", ",(0,r.jsx)(n.code,{children:"eml"}),", ",(0,r.jsx)(n.code,{children:"msg"}),", ",(0,r.jsx)(n.code,{children:"pptx"}),", ",(0,r.jsx)(n.code,{children:"ppt"}),", ",(0,r.jsx)(n.code,{children:"xml"}),", ",(0,r.jsx)(n.code,{children:"epub"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 文档数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," (object) 图片设置\n当前仅支持图片类型：",(0,r.jsx)(n.code,{children:"png"}),", ",(0,r.jsx)(n.code,{children:"jpg"}),", ",(0,r.jsx)(n.code,{children:"jpeg"}),", ",(0,r.jsx)(n.code,{children:"webp"}),", ",(0,r.jsx)(n.code,{children:"gif"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 图片数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (object) 音频设置\n当前仅支持音频类型：",(0,r.jsx)(n.code,{children:"mp3"}),", ",(0,r.jsx)(n.code,{children:"m4a"}),", ",(0,r.jsx)(n.code,{children:"wav"}),", ",(0,r.jsx)(n.code,{children:"webm"}),", ",(0,r.jsx)(n.code,{children:"amr"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 音频数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," (object) 视频设置\n当前仅支持视频类型：",(0,r.jsx)(n.code,{children:"mp4"}),", ",(0,r.jsx)(n.code,{children:"mov"}),", ",(0,r.jsx)(n.code,{children:"mpeg"}),", ",(0,r.jsx)(n.code,{children:"mpga"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 视频数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," (object) 自定义设置","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 自定义数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"system_parameters"})," (object) 系统参数","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_size_limit"})," (int) 文档上传大小限制 (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image_file_size_limit"})," (int) 图片文件上传大小限制（MB）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio_file_size_limit"})," (int) 音频文件上传大小限制 (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video_file_size_limit"})," (int) 视频文件上传大小限制 (MB)"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/parameters",targetCode:` curl -X GET '${e.appDetail.api_base_url}/parameters'\\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "introduction": "nice to meet you",\n  "user_input_form": [\n    {\n      "text-input": {\n        "label": "a",\n        "variable": "a",\n        "required": true,\n        "max_length": 48,\n        "default": ""\n      }\n    },\n    {\n      // ...\n    }\n  ],\n  "file_upload": {\n    "image": {\n      "enabled": true,\n      "number_limits": 3,\n      "transfer_methods": [\n        "remote_url",\n        "local_file"\n      ]\n    }\n  },\n  "system_parameters": {\n      "file_size_limit": 15,\n      "image_file_size_limit": 10,\n      "audio_file_size_limit": 50,\n      "video_file_size_limit": 100\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/meta",method:"GET",title:"获取应用Meta信息",name:"#meta"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"用于获取工具 icon"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tool_icons"}),"(object[string]) 工具图标","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"工具名称"})," (string)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon"})," (object|string)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["(object) 图标","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"background"})," (string) hex 格式的背景色"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"content"}),"(string) emoji"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"(string) 图标 URL"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/meta",targetCode:`curl -X GET '${e.appDetail.api_base_url}/meta' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "tool_icons": {\n      "dalle2": "https://cloud.dify.ai/console/api/workspaces/current/tool-provider/builtin/dalle/icon",\n      "api_tool": {\n          "background": "#252525",\n          "content": "\\ud83d\\ude01"\n      }\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/site",method:"GET",title:"获取应用 WebApp 设置",name:"#site"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"用于获取应用的 WebApp 设置"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) WebApp 名称"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"chat_color_theme"})," (string) 聊天颜色主题，hex 格式"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"chat_color_theme_inverted"})," (bool) 聊天颜色主题是否反转"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_type"})," (string) 图标类型，",(0,r.jsx)(n.code,{children:"emoji"}),"-表情，",(0,r.jsx)(n.code,{children:"image"}),"-图片"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon"})," (string) 图标，如果是 ",(0,r.jsx)(n.code,{children:"emoji"})," 类型，则是 emoji 表情符号，如果是 ",(0,r.jsx)(n.code,{children:"image"})," 类型，则是图片 URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_background"})," (string) hex 格式的背景色"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_url"})," (string) 图标 URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 描述"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"copyright"})," (string) 版权信息"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"privacy_policy"})," (string) 隐私政策链接"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom_disclaimer"})," (string) 自定义免责声明"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default_language"})," (string) 默认语言"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"show_workflow_steps"})," (bool) 是否显示工作流详情"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"use_icon_as_answer_icon"})," (bool) 是否使用 WebApp 图标替换聊天中的 🤖"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/site",targetCode:`curl -X GET '${e.appDetail.api_base_url}/site' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "title": "My App",\n  "chat_color_theme": "#ff4a4a",\n  "chat_color_theme_inverted": false,\n  "icon_type": "emoji",\n  "icon": "😄",\n  "icon_background": "#FFEAD5",\n  "icon_url": null,\n  "description": "This is my app.",\n  "copyright": "all rights reserved",\n  "privacy_policy": "",\n  "custom_disclaimer": "All generated by AI",\n  "default_language": "en-US",\n  "show_workflow_steps": false,\n  "use_icon_as_answer_icon": false,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{})]})}function ez(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...b(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(eM,{...e})}):eM(e)}function eO(e){let n={a:"a",code:"code",h1:"h1",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...b(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{children:"Workflow App API"}),"\n",(0,r.jsx)(n.p,{children:"Workflow applications offers non-session support and is ideal for translation, article writing, summarization AI, and more."}),"\n",(0,r.jsxs)("div",{children:[(0,r.jsx)(n.h3,{children:"Base URL"}),(0,r.jsx)(eu,{title:"Code",targetCode:e.appDetail.api_base_url}),(0,r.jsx)(n.h3,{children:"Authentication"}),(0,r.jsxs)(n.p,{children:["The Service API uses ",(0,r.jsx)(n.code,{children:"API-Key"})," authentication.\n",(0,r.jsx)("i",{children:(0,r.jsx)(n.strong,{children:"Strongly recommend storing your API Key on the server-side, not shared or stored on the client-side, to avoid possible API-Key leakage that can lead to serious consequences."})})]}),(0,r.jsxs)(n.p,{children:["For all API requests, include your API Key in the ",(0,r.jsx)(n.code,{children:"Authorization"})," HTTP Header, as shown below:"]}),(0,r.jsx)(eu,{title:"Code",targetCode:"Authorization: Bearer {API_KEY}"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/workflows/run",method:"POST",title:"Execute Workflow",name:"#Execute-Workflow"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Execute workflow, cannot be executed without a published workflow."}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) Required\nAllows the entry of various variable values defined by the App.\nThe ",(0,r.jsx)(n.code,{children:"inputs"})," parameter contains multiple key/value pairs, with each key corresponding to a specific variable and each value being the specific value for that variable.\nThe workflow application requires at least one key/value pair to be inputted. The variable can be of File Array type.\nFile Array type variable is suitable for inputting files combined with text understanding and answering questions, available only when the model supports file parsing and understanding capability.\nIf the variable is of File Array type, the corresponding value should be a list whose elements contain following attributions:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) Supported type:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," Supported types include: 'TXT', 'MD', 'MARKDOWN', 'MDX', 'PDF', 'HTML', 'XLSX', 'XLS', 'VTT', 'PROPERTIES', 'DOC', 'DOCX', 'CSV', 'EML', 'MSG', 'PPTX', 'PPT', 'XML', 'EPUB'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," Supported types include: 'JPG', 'JPEG', 'PNG', 'GIF', 'WEBP', 'SVG'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," Supported types include: 'MP3', 'M4A', 'WAV', 'WEBM', 'MPGA'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," Supported types include: 'MP4', 'MOV', 'MPEG', 'WEBM'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," Supported types include: other file types"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_method"})," (string) Transfer method:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"remote_url"}),": File URL."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"local_file"}),": Upload file."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," File URL. (Only when transfer method is ",(0,r.jsx)(n.code,{children:"remote_url"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"upload_file_id"})," Upload file ID. (Only when transfer method is ",(0,r.jsx)(n.code,{children:"local_file"}),")."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"response_mode"})," (string) Required\nThe mode of response return, supporting:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"streaming"})," Streaming mode (recommended), implements a typewriter-like output through SSE (",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events",children:"Server-Sent Events"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"blocking"})," Blocking mode, returns result after execution is complete. (Requests may be interrupted if the process is long)\n",(0,r.jsx)("i",{children:"Due to Cloudflare restrictions, the request will be interrupted without a return after 100 seconds."})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) Required\nUser identifier, used to define the identity of the end-user for retrieval and statistics.\nShould be uniquely defined by the developer within the application."]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)("i",{children:"The user identifier should be consistent with the user passed in the message sending interface. The Service API does not share conversations created by the WebApp."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"files"})," (array[object]) Optional"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"trace_id"})," (string) Optional\nTrace ID. Used for integration with existing business trace components to achieve end-to-end distributed tracing. If not provided, the system will automatically generate a trace_id. Supports the following three ways to pass, in order of priority:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Header: via HTTP Header ",(0,r.jsx)(n.code,{children:"X-Trace-Id"}),", highest priority."]}),"\n",(0,r.jsxs)(n.li,{children:["Query parameter: via URL query parameter ",(0,r.jsx)(n.code,{children:"trace_id"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Request Body: via request body field ",(0,r.jsx)(n.code,{children:"trace_id"})," (i.e., this field)."]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"response_mode"})," is ",(0,r.jsx)(n.code,{children:"blocking"}),", return a CompletionResponse object.\nWhen ",(0,r.jsx)(n.code,{children:"response_mode"})," is ",(0,r.jsx)(n.code,{children:"streaming"}),", return a ChunkCompletionResponse stream."]}),(0,r.jsx)(n.h3,{children:"CompletionResponse"}),(0,r.jsxs)(n.p,{children:["Returns the App result, ",(0,r.jsx)(n.code,{children:"Content-Type"})," is ",(0,r.jsx)(n.code,{children:"application/json"}),"."]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) detail of result","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) ID of related workflow"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) status of execution, ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) Optional content of output"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) Optional reason of error"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) Optional total seconds to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) Optional tokens to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) default 0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) start time"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) end time"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"ChunkCompletionResponse"}),(0,r.jsxs)(n.p,{children:["Returns the stream chunks outputted by the App, ",(0,r.jsx)(n.code,{children:"Content-Type"})," is ",(0,r.jsx)(n.code,{children:"text/event-stream"}),".\nEach streaming chunk starts with ",(0,r.jsx)(n.code,{children:"data:"}),", separated by two newline characters ",(0,r.jsx)(n.code,{children:"\\n\\n"}),", as shown below:"]}),(0,r.jsx)(eu,{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'data: {"event": "text_chunk", "workflow_run_id": "b85e5fc5-751b-454d-b14e-dc5f240b0a31", "task_id": "bd029338-b068-4d34-a331-fc85478922c2", "data": {"text": "\\u4e3a\\u4e86", "from_variable_selector": ["1745912968134", "text"]}}\\n\\n\n'})})}),(0,r.jsxs)(n.p,{children:["The structure of the streaming chunks varies depending on the ",(0,r.jsx)(n.code,{children:"event"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: workflow_started"})," workflow starts execution","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) fixed to ",(0,r.jsx)(n.code,{children:"workflow_started"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) detail","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) ID of related workflow"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) Creation timestamp, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: node_started"})," node execution started","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) fixed to ",(0,r.jsx)(n.code,{children:"node_started"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) detail","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_id"})," (string) ID of node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_type"})," (string) type of node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) name of node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index"})," (int) Execution sequence number, used to display Tracing Node sequence"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"predecessor_node_id"})," (string) optional Prefix node ID, used for canvas display execution path"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) Contents of all preceding node variables used in the node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) timestamp of start, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: text_chunk"})," Text fragment","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) fixed to ",(0,r.jsx)(n.code,{children:"text_chunk"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) detail","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text"})," (string) Text content"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"from_variable_selector"})," (array) Text source path, helping developers understand which node and variable generated the text"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: node_finished"})," node execution ends, success or failure in different states in the same event","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) fixed to ",(0,r.jsx)(n.code,{children:"node_finished"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) detail","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_id"})," (string) ID of node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_type"})," (string) type of node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) name of node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index"})," (int) Execution sequence number, used to display Tracing Node sequence"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"predecessor_node_id"})," (string) optional Prefix node ID, used for canvas display execution path"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) Contents of all preceding node variables used in the node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"process_data"})," (json) Optional node process data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) Optional content of output"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) status of execution, ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) Optional reason of error"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) Optional total seconds to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"execution_metadata"})," (json) meta data","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) optional tokens to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_price"})," (decimal) optional Total cost"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"currency"})," (string) optional e.g. ",(0,r.jsx)(n.code,{children:"USD"})," / ",(0,r.jsx)(n.code,{children:"RMB"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) timestamp of start, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: workflow_finished"})," workflow execution ends, success or failure in different states in the same event","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) fixed to ",(0,r.jsx)(n.code,{children:"workflow_finished"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) detail","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) ID of related workflow"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) status of execution, ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) Optional content of output"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) Optional reason of error"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) Optional total seconds to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) Optional tokens to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) default 0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) start time"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) end time"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message"})," TTS audio stream event, that is, speech synthesis output. The content is an audio block in Mp3 format, encoded as a base64 string. When playing, simply decode the base64 and feed it into the player. (This message is available only when auto-play is enabled)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the stop response interface below"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) The audio after speech synthesis, encoded in base64 text content, when playing, simply decode the base64 and feed it into the player"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp, e.g.: 1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message_end"})," TTS audio stream end event, receiving this event indicates the end of the audio stream.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the stop response interface below"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) The end event has no audio, so this is an empty string"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp, e.g.: 1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: ping"})," Ping event every 10 seconds to keep the connection alive."]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"invalid_param"}),", abnormal parameter input"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"app_unavailable"}),", App configuration unavailable"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"provider_not_initialize"}),", no available model credential configuration"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"provider_quota_exceeded"}),", model invocation quota insufficient"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"model_currently_not_support"}),", current model unavailable"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"workflow_request_error"}),", workflow execution failed"]}),"\n",(0,r.jsx)(n.li,{children:"500, internal server error"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/workflows/run",targetCode:`curl -X POST '${e.appDetail.api_base_url}/workflows/run' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "inputs": ${JSON.stringify(e.inputs)},
  "response_mode": "streaming",
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"Example: file array as an input variable",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "inputs": {\n    "{variable_name}":\n    [\n      {\n      "transfer_method": "local_file",\n      "upload_file_id": "{upload_file_id}",\n      "type": "{document_type}"\n      }\n    ]\n  }\n}\n'})})}),(0,r.jsx)(n.h3,{children:"Blocking Mode"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "workflow_run_id": "djflajgkldjgd",\n    "task_id": "9da23599-e713-473b-982c-4328d4f5c78a",\n    "data": {\n        "id": "fdlsjfjejkghjda",\n        "workflow_id": "fldjaslkfjlsda",\n        "status": "succeeded",\n        "outputs": {\n          "text": "Nice to meet you."\n        },\n        "error": null,\n        "elapsed_time": 0.875,\n        "total_tokens": 3562,\n        "total_steps": 8,\n        "created_at": 1705407629,\n        "finished_at": 1727807631\n    }\n}\n'})})}),(0,r.jsx)(n.h3,{children:"Streaming Mode"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'  data: {"event": "workflow_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "created_at": 1679586595}}\n  data: {"event": "node_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "created_at": 1679586595}}\n  data: {"event": "node_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "execution_metadata": {"total_tokens": 63127864, "total_price": 2.378, "currency": "USD"},  "created_at": 1679586595}}\n  data: {"event": "workflow_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "total_tokens": 63127864, "total_steps": "1", "created_at": 1679586595, "finished_at": 1679976595}}\n  data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}\n  data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}\n'})})}),(0,r.jsx)(eu,{title:"File upload sample code",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'import requests\nimport json\n\ndef upload_file(file_path, user):\n    upload_url = "https://api.dify.ai/v1/files/upload"\n    headers = {\n        "Authorization": "Bearer app-xxxxxxxx",\n    }\n\n    try:\n        print("Upload file...")\n        with open(file_path, \'rb\') as file:\n            files = {\n                \'file\': (file_path, file, \'text/plain\')  # Make sure the file is uploaded with the appropriate MIME type\n            }\n            data = {\n                "user": user,\n                "type": "TXT"  # Set the file type to TXT\n            }\n\n            response = requests.post(upload_url, headers=headers, files=files, data=data)\n            if response.status_code == 201:  # 201 means creation is successful\n                print("File uploaded successfully")\n                return response.json().get("id")  # Get the uploaded file ID\n            else:\n                print(f"File upload failed, status code: {response.status_code}")\n                return None\n    except Exception as e:\n        print(f"Error occurred: {str(e)}")\n        return None\n\ndef run_workflow(file_id, user, response_mode="blocking"):\n    workflow_url = "https://api.dify.ai/v1/workflows/run"\n    headers = {\n        "Authorization": "Bearer app-xxxxxxxxx",\n        "Content-Type": "application/json"\n    }\n\n    data = {\n        "inputs": {\n            "orig_mail": [{\n                "transfer_method": "local_file",\n                "upload_file_id": file_id,\n                "type": "document"\n            }]\n        },\n        "response_mode": response_mode,\n        "user": user\n    }\n\n    try:\n        print("Run Workflow...")\n        response = requests.post(workflow_url, headers=headers, json=data)\n        if response.status_code == 200:\n            print("Workflow execution successful")\n            return response.json()\n        else:\n            print(f"Workflow execution failed, status code: {response.status_code}")\n            return {"status": "error", "message": f"Failed to execute workflow, status code: {response.status_code}"}\n    except Exception as e:\n        print(f"Error occurred: {str(e)}")\n        return {"status": "error", "message": str(e)}\n\n# Usage Examples\nfile_path = "{your_file_path}"\nuser = "difyuser"\n\n# Upload files\nfile_id = upload_file(file_path, user)\nif file_id:\n    # The file was uploaded successfully, and the workflow continues to run\n    result = run_workflow(file_id, user)\n    print(result)\nelse:\n    print("File upload failed and workflow cannot be executed")\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/workflows/:workflow_id/run",method:"POST",title:"Execute Specific Workflow",name:"#Execute-Specific-Workflow"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Execute a specific version of workflow by specifying the workflow ID in the path parameter."}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) Required Workflow ID to specify a specific version of workflow"]}),"\n"]}),(0,r.jsx)(n.p,{children:"How to obtain: In the version history interface, click the copy icon on the right side of each version entry to copy the complete workflow ID. Each version entry contains a copyable ID field."}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) Required\nAllows the entry of various variable values defined by the App.\nThe ",(0,r.jsx)(n.code,{children:"inputs"})," parameter contains multiple key/value pairs, with each key corresponding to a specific variable and each value being the specific value for that variable.\nThe workflow application requires at least one key/value pair to be inputted. The variable can be of File Array type.\nFile Array type variable is suitable for inputting files combined with text understanding and answering questions, available only when the model supports file parsing and understanding capability.\nIf the variable is of File Array type, the corresponding value should be a list whose elements contain following attributions:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) Supported type:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," ('TXT', 'MD', 'MARKDOWN', 'PDF', 'HTML', 'XLSX', 'XLS', 'DOCX', 'CSV', 'EML', 'MSG', 'PPTX', 'PPT', 'XML', 'EPUB')"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," ('JPG', 'JPEG', 'PNG', 'GIF', 'WEBP', 'SVG')"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," ('MP3', 'M4A', 'WAV', 'WEBM', 'AMR')"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," ('MP4', 'MOV', 'MPEG', 'MPGA')"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," (Other file types)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_method"})," (string) Transfer method, ",(0,r.jsx)(n.code,{children:"remote_url"})," for image URL / ",(0,r.jsx)(n.code,{children:"local_file"})," for file upload"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," (string) Image URL (when the transfer method is ",(0,r.jsx)(n.code,{children:"remote_url"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"upload_file_id"})," (string) Uploaded file ID, which must be obtained by uploading through the File Upload API in advance (when the transfer method is ",(0,r.jsx)(n.code,{children:"local_file"}),")"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"response_mode"})," (string) Required\nThe mode of response return, supporting:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"streaming"})," Streaming mode (recommended), implements a typewriter-like output through SSE (",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events",children:"Server-Sent Events"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"blocking"})," Blocking mode, returns result after execution is complete. (Requests may be interrupted if the process is long)\n",(0,r.jsx)("i",{children:"Due to Cloudflare restrictions, the request will be interrupted without a return after 100 seconds."})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) Required\nUser identifier, used to define the identity of the end-user for retrieval and statistics.\nShould be uniquely defined by the developer within the application."]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)("i",{children:"The user identifier should be consistent with the user passed in the message sending interface. The Service API does not share conversations created by the WebApp."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"files"})," (array[object]) Optional"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"trace_id"})," (string) Optional\nTrace ID. Used for integration with existing business trace components to achieve end-to-end distributed tracing. If not provided, the system will automatically generate a trace_id. Supports the following three ways to pass, in order of priority:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Header: via HTTP Header ",(0,r.jsx)(n.code,{children:"X-Trace-Id"}),", highest priority."]}),"\n",(0,r.jsxs)(n.li,{children:["Query parameter: via URL query parameter ",(0,r.jsx)(n.code,{children:"trace_id"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Request Body: via request body field ",(0,r.jsx)(n.code,{children:"trace_id"})," (i.e., this field)."]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"response_mode"})," is ",(0,r.jsx)(n.code,{children:"blocking"}),", return a CompletionResponse object.\nWhen ",(0,r.jsx)(n.code,{children:"response_mode"})," is ",(0,r.jsx)(n.code,{children:"streaming"}),", return a ChunkCompletionResponse stream."]}),(0,r.jsx)(n.h3,{children:"CompletionResponse"}),(0,r.jsxs)(n.p,{children:["Returns the App result, ",(0,r.jsx)(n.code,{children:"Content-Type"})," is ",(0,r.jsx)(n.code,{children:"application/json"}),"."]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) detail of result","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) ID of related workflow"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) status of execution, ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) Optional content of output"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) Optional reason of error"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) Optional total seconds to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) Optional tokens to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) default 0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) start time"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) end time"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"ChunkCompletionResponse"}),(0,r.jsxs)(n.p,{children:["Returns the stream chunks outputted by the App, ",(0,r.jsx)(n.code,{children:"Content-Type"})," is ",(0,r.jsx)(n.code,{children:"text/event-stream"}),".\nEach streaming chunk starts with ",(0,r.jsx)(n.code,{children:"data:"}),", separated by two newline characters ",(0,r.jsx)(n.code,{children:"\\n\\n"}),", as shown below:"]}),(0,r.jsx)(eu,{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'data: {"event": "text_chunk", "workflow_run_id": "b85e5fc5-751b-454d-b14e-dc5f240b0a31", "task_id": "bd029338-b068-4d34-a331-fc85478922c2", "data": {"text": "\\u4e3a\\u4e86", "from_variable_selector": ["1745912968134", "text"]}}\\n\\n\n'})})}),(0,r.jsxs)(n.p,{children:["The structure of the streaming chunks varies depending on the ",(0,r.jsx)(n.code,{children:"event"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: workflow_started"})," workflow starts execution","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) fixed to ",(0,r.jsx)(n.code,{children:"workflow_started"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) detail","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) ID of related workflow"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) Creation timestamp, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: node_started"})," node execution started","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) fixed to ",(0,r.jsx)(n.code,{children:"node_started"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) detail","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_id"})," (string) ID of node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_type"})," (string) type of node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) name of node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index"})," (int) Execution sequence number, used to display Tracing Node sequence"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"predecessor_node_id"})," (string) optional Prefix node ID, used for canvas display execution path"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) Contents of all preceding node variables used in the node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) timestamp of start, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: text_chunk"})," Text fragment","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) fixed to ",(0,r.jsx)(n.code,{children:"text_chunk"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) detail","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text"})," (string) Text content"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"from_variable_selector"})," (array) Text source path, helps developers understand which variable of which node the text is generated from"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: node_finished"})," node execution finished, success and failure are different states in the same event","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) fixed to ",(0,r.jsx)(n.code,{children:"node_finished"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) detail","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Unique ID of node execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_id"})," (string) ID of node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index"})," (int) Execution sequence number, used to display Tracing Node sequence"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"predecessor_node_id"})," (string) optional Prefix node ID, used for canvas display execution path"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) Contents of all preceding node variables used in the node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"process_data"})," (json) Optional Process data of node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) Optional content of output"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) status of execution ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) Optional reason of error"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) Optional total seconds to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"execution_metadata"})," (json) metadata","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) optional tokens to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_price"})," (decimal) optional total cost"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"currency"})," (string) optional currency, such as ",(0,r.jsx)(n.code,{children:"USD"})," / ",(0,r.jsx)(n.code,{children:"RMB"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) timestamp of start, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: workflow_finished"})," workflow execution finished, success and failure are different states in the same event","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) fixed to ",(0,r.jsx)(n.code,{children:"workflow_finished"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) detail","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) Unique ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) ID of related workflow"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) status of execution ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) Optional content of output"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) Optional reason of error"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) Optional total seconds to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) Optional tokens to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) default 0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) start time"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) end time"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message"})," TTS audio stream event, i.e., speech synthesis output. The content is an audio block in Mp3 format, encoded as a base64 string, which can be decoded directly when playing. (Only available when auto-play is enabled)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) The audio block after speech synthesis is encoded as base64 text content, which can be directly base64 decoded and sent to the player when playing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message_end"})," TTS audio stream end event, receiving this event indicates the end of audio stream return.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, used for request tracking and the below Stop Generate API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) Unique message ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) The end event has no audio, so this is an empty string"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) Creation timestamp, e.g., 1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: ping"})," Ping event every 10s to keep the connection alive."]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"invalid_param"}),", Invalid input parameters"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"app_unavailable"}),", App configuration unavailable"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"provider_not_initialize"}),", No available model credentials configured"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"provider_quota_exceeded"}),", Insufficient model call quota"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"model_currently_not_support"}),", Current model unavailable"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"workflow_not_found"}),", Specified workflow version not found"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"draft_workflow_error"}),", Cannot use draft workflow version"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"workflow_id_format_error"}),", Workflow ID format error, UUID format required"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"workflow_request_error"}),", Workflow execution failed"]}),"\n",(0,r.jsx)(n.li,{children:"500, Internal service error"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/workflows/:workflow_id/run",targetCode:`curl -X POST '${e.appDetail.api_base_url}/workflows/{workflow_id}/run' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "inputs": ${JSON.stringify(e.inputs)},
  "response_mode": "streaming",
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"Example: file array as an input variable",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "inputs": {\n    "{variable_name}":\n    [\n      {\n      "transfer_method": "local_file",\n      "upload_file_id": "{upload_file_id}",\n      "type": "{document_type}"\n      }\n    ]\n  }\n}\n'})})}),(0,r.jsx)(n.h3,{children:"Blocking Mode"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "workflow_run_id": "djflajgkldjgd",\n    "task_id": "9da23599-e713-473b-982c-4328d4f5c78a",\n    "data": {\n        "id": "fdlsjfjejkghjda",\n        "workflow_id": "fldjaslkfjlsda",\n        "status": "succeeded",\n        "outputs": {\n          "text": "Nice to meet you."\n        },\n        "error": null,\n        "elapsed_time": 0.875,\n        "total_tokens": 3562,\n        "total_steps": 8,\n        "created_at": 1705407629,\n        "finished_at": 1727807631\n    }\n}\n'})})}),(0,r.jsx)(n.h3,{children:"Streaming Mode"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'  data: {"event": "workflow_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "created_at": 1679586595}}\n  data: {"event": "node_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "created_at": 1679586595}}\n  data: {"event": "node_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "execution_metadata": {"total_tokens": 63127864, "total_price": 2.378, "currency": "USD"},  "created_at": 1679586595}}\n  data: {"event": "workflow_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "total_tokens": 63127864, "total_steps": "1", "created_at": 1679586595, "finished_at": 1679976595}}\n  data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}\n  data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/workflows/run/:workflow_run_id",method:"GET",title:"Get Workflow Run Detail",name:"#get-workflow-run-detail"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Retrieve the current execution results of a workflow task based on the workflow execution ID."}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) Workflow run ID, can be obtained from the streaming chunk return"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ID of workflow execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) ID of related workflow"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) status of execution, ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (json) content of input"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) content of output"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) reason of error"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) total steps of task"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) total tokens to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) start time"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) end time"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) total seconds to be used"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"Request Example"}),(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/workflows/run/:workflow_run_id",targetCode:`curl -X GET '${e.appDetail.api_base_url}/workflows/run/:workflow_run_id' \\
-H 'Authorization: Bearer {api_key}' \\
-H 'Content-Type: application/json'`}),(0,r.jsx)(n.h3,{children:"Response Example"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "id": "b1ad3277-089e-42c6-9dff-6820d94fbc76",\n    "workflow_id": "19eff89f-ec03-4f75-b0fc-897e7effea02",\n    "status": "succeeded",\n    "inputs": "{\\"sys.files\\": [], \\"sys.user_id\\": \\"abc-123\\"}",\n    "outputs": null,\n    "error": null,\n    "total_steps": 3,\n    "total_tokens": 0,\n    "created_at": 1705407629,\n    "finished_at": 1727807631,\n    "elapsed_time": 30.098514399956912\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/workflows/tasks/:task_id/stop",method:"POST",title:"Stop Generate",name:"#stop-generatebacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Only supported in streaming mode."}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) Task ID, can be obtained from the streaming chunk return"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) Required\nUser identifier, used to define the identity of the end-user, must be consistent with the user passed in the message sending interface. The Service API does not share conversations created by the WebApp."]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"}),' (string) Always returns "success"']}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"Request Example"}),(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/workflows/tasks/:task_id/stop",targetCode:`curl -X POST '${e.appDetail.api_base_url}/workflows/tasks/:task_id/stop' \\
-H 'Authorization: Bearer {api_key}' \\
-H 'Content-Type: application/json' \\
--data-raw '{"user": "abc-123"}'`}),(0,r.jsx)(n.h3,{children:"Response Example"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/upload",method:"POST",title:"File Upload",name:"#file-upload"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Upload a file for use when sending messages, enabling multimodal understanding of images and text.\nSupports any formats that are supported by your workflow.\nUploaded files are for use by the current end-user only."}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.p,{children:["This interface requires a ",(0,r.jsx)(n.code,{children:"multipart/form-data"})," request."]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file"})," (File) Required\nThe file to be uploaded."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) Required\nUser identifier, defined by the developer's rules, must be unique within the application. The Service API does not share conversations created by the WebApp."]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsx)(n.p,{children:"After a successful upload, the server will return the file's ID and related information."}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (uuid) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) File name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"size"})," (int) File size (bytes)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"extension"})," (string) File extension"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mime_type"})," (string) File mime-type"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by"})," (uuid) End-user ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) Creation timestamp, e.g., 1705395332"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"no_file_uploaded"}),", a file must be provided"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"too_many_files"}),", currently only one file is accepted"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"unsupported_preview"}),", the file does not support preview"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"unsupported_estimate"}),", the file does not support estimation"]}),"\n",(0,r.jsxs)(n.li,{children:["413, ",(0,r.jsx)(n.code,{children:"file_too_large"}),", the file is too large"]}),"\n",(0,r.jsxs)(n.li,{children:["415, ",(0,r.jsx)(n.code,{children:"unsupported_file_type"}),", unsupported extension, currently only document files are accepted"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_connection_failed"}),", unable to connect to S3 service"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_permission_denied"}),", no permission to upload files to S3"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_file_too_large"}),", file exceeds S3 size limit"]}),"\n",(0,r.jsx)(n.li,{children:"500, internal server error"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"Request Example"}),(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/files/upload",targetCode:`curl -X POST '${e.appDetail.api_base_url}/files/upload' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=image/[png|jpeg|jpg|webp|gif]' \\
--form 'user=abc-123'`}),(0,r.jsx)(n.h3,{children:"Response Example"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "72fa9618-8f89-4a37-9b33-7e1178a24a67",\n  "name": "example.png",\n  "size": 1024,\n  "extension": "png",\n  "mime_type": "image/png",\n  "created_by": "6ad1ab0a-73ff-4ac1-b9e4-cdb312f71f13",\n  "created_at": 1577836800,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/workflows/logs",method:"GET",title:"Get Workflow Logs",name:"#Get-Workflow-Logs"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsxs)(n.p,{children:["Returns workflow logs, with the first page returning the latest ",(0,r.jsx)(n.code,{children:"{limit}"})," messages, i.e., in reverse order."]}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"keyword",type:"string",children:(0,r.jsx)(n.p,{children:"Keyword to search"})},"keyword"),(0,r.jsx)(ef,{name:"status",type:"string",children:(0,r.jsx)(n.p,{children:"succeeded/failed/stopped"})},"status"),(0,r.jsx)(ef,{name:"page",type:"int",children:(0,r.jsx)(n.p,{children:"current page, default is 1."})},"page"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"How many chat history messages to return in one request, default is 20."})},"limit"),(0,r.jsx)(ef,{name:"created_by_end_user_session_id",type:"str",children:(0,r.jsxs)(n.p,{children:["Created by which endUser, for example, ",(0,r.jsx)(n.code,{children:"abc-123"}),"."]})},"created_by_end_user_session_id"),(0,r.jsx)(ef,{name:"created_by_account",type:"str",children:(0,r.jsx)(n.p,{children:"Created by which email account, for example, lizb@test.com."})},"created_by_account")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"page"})," (int) Current page"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) Number of returned items, if input exceeds system limit, returns system limit amount"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total"})," (int) Number of total items"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool) Whether there is a next page"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object]) Log list","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run"})," (object) Workflow run","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"version"})," (string) Version"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) status of execution, ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) Optional reason of error"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) total seconds to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) tokens to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) default 0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) start time"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) end time"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_from"})," (string) Created from"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by_role"})," (string) Created by role"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by_account"})," (string) Optional Created by account"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by_end_user"})," (object) Created by end user","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) Type"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"is_anonymous"})," (bool) Is anonymous"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"session_id"})," (string) Session ID"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) create time"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/workflows/logs",targetCode:`curl -X GET '${e.appDetail.api_base_url}/workflows/logs'\\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(n.h3,{children:"Response Example"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "page": 1,\n    "limit": 1,\n    "total": 7,\n    "has_more": true,\n    "data": [\n        {\n            "id": "e41b93f1-7ca2-40fd-b3a8-999aeb499cc0",\n            "workflow_run": {\n                "id": "c0640fc8-03ef-4481-a96c-8a13b732a36e",\n                "version": "2024-08-01 12:17:09.771832",\n                "status": "succeeded",\n                "error": null,\n                "elapsed_time": 1.3588523610014818,\n                "total_tokens": 0,\n                "total_steps": 3,\n                "created_at": 1726139643,\n                "finished_at": 1726139644\n            },\n            "created_from": "service-api",\n            "created_by_role": "end_user",\n            "created_by_account": null,\n            "created_by_end_user": {\n                "id": "7f7d9117-dd9d-441d-8970-87e5e7e687a3",\n                "type": "service_api",\n                "is_anonymous": false,\n                "session_id": "abc-123"\n            },\n            "created_at": 1726139644\n        }\n    ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/info",method:"GET",title:"Get Application Basic Information",name:"#info"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Used to get basic information about this application"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) application name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) application description"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tags"})," (array[string]) application tags"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) application mode"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"author_name"})," (string) application author name"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/info",targetCode:`curl -X GET '${e.appDetail.api_base_url}/info' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "My App",\n  "description": "This is my app.",\n  "tags": [\n    "tag1",\n    "tag2"\n  ],\n  "mode": "workflow",\n  "author_name": "Dify"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/parameters",method:"GET",title:"Get Application Parameters Information",name:"#parameters"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Used at the start of entering the page to obtain information such as features, input parameter names, types, and default values."}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user_input_form"})," (array[object]) User input form configuration","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text-input"})," (object) Text input control","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) Variable display label name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) Variable ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) Whether it is required"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) Default value"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"paragraph"})," (object) Paragraph text input control","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) Variable display label name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) Variable ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) Whether it is required"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) Default value"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"select"})," (object) Dropdown control","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) Variable display label name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) Variable ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) Whether it is required"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) Default value"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"options"})," (array[string]) Option values"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_upload"})," (object) File upload configuration","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," (object) Document settings\nCurrently only supports document types: ",(0,r.jsx)(n.code,{children:"txt"}),", ",(0,r.jsx)(n.code,{children:"md"}),", ",(0,r.jsx)(n.code,{children:"markdown"}),", ",(0,r.jsx)(n.code,{children:"pdf"}),", ",(0,r.jsx)(n.code,{children:"html"}),", ",(0,r.jsx)(n.code,{children:"xlsx"}),", ",(0,r.jsx)(n.code,{children:"xls"}),", ",(0,r.jsx)(n.code,{children:"docx"}),", ",(0,r.jsx)(n.code,{children:"csv"}),", ",(0,r.jsx)(n.code,{children:"eml"}),", ",(0,r.jsx)(n.code,{children:"msg"}),", ",(0,r.jsx)(n.code,{children:"pptx"}),", ",(0,r.jsx)(n.code,{children:"ppt"}),", ",(0,r.jsx)(n.code,{children:"xml"}),", ",(0,r.jsx)(n.code,{children:"epub"}),".","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Document number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," (object) Image settings\nCurrently only supports image types: ",(0,r.jsx)(n.code,{children:"png"}),", ",(0,r.jsx)(n.code,{children:"jpg"}),", ",(0,r.jsx)(n.code,{children:"jpeg"}),", ",(0,r.jsx)(n.code,{children:"webp"}),", ",(0,r.jsx)(n.code,{children:"gif"}),".","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Image number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (object) Audio settings\nCurrently only supports audio types: ",(0,r.jsx)(n.code,{children:"mp3"}),", ",(0,r.jsx)(n.code,{children:"m4a"}),", ",(0,r.jsx)(n.code,{children:"wav"}),", ",(0,r.jsx)(n.code,{children:"webm"}),", ",(0,r.jsx)(n.code,{children:"amr"}),".","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Audio number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," (object) Video settings\nCurrently only supports video types: ",(0,r.jsx)(n.code,{children:"mp4"}),", ",(0,r.jsx)(n.code,{children:"mov"}),", ",(0,r.jsx)(n.code,{children:"mpeg"}),", ",(0,r.jsx)(n.code,{children:"mpga"}),".","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Video number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," (object) Custom settings","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) Whether it is enabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) Custom number limit, default is 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) List of transfer methods: ",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),". Must choose one."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"system_parameters"})," (object) System parameters","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_size_limit"})," (int) Document upload size limit (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image_file_size_limit"})," (int) Image file upload size limit (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio_file_size_limit"})," (int) Audio file upload size limit (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video_file_size_limit"})," (int) Video file upload size limit (MB)"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/parameters",targetCode:` curl -X GET '${e.appDetail.api_base_url}/parameters'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "user_input_form": [\n      {\n          "paragraph": {\n              "label": "Query",\n              "variable": "query",\n              "required": true,\n              "default": ""\n          }\n      }\n  ],\n  "file_upload": {\n      "image": {\n          "enabled": false,\n          "number_limits": 3,\n          "detail": "high",\n          "transfer_methods": [\n              "remote_url",\n              "local_file"\n          ]\n      }\n  },\n  "system_parameters": {\n      "file_size_limit": 15,\n      "image_file_size_limit": 10,\n      "audio_file_size_limit": 50,\n      "video_file_size_limit": 100\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/site",method:"GET",title:"Get Application WebApp Settings",name:"#site"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"Used to get the WebApp settings of the application."}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) WebApp name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_type"})," (string) Icon type, ",(0,r.jsx)(n.code,{children:"emoji"})," - emoji, ",(0,r.jsx)(n.code,{children:"image"})," - picture"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon"})," (string) Icon. If it's ",(0,r.jsx)(n.code,{children:"emoji"})," type, it's an emoji symbol; if it's ",(0,r.jsx)(n.code,{children:"image"})," type, it's an image URL."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_background"})," (string) Background color in hex format"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_url"})," (string) Icon URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) Description"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"copyright"})," (string) Copyright information"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"privacy_policy"})," (string) Privacy policy link"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom_disclaimer"})," (string) Custom disclaimer"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default_language"})," (string) Default language"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"show_workflow_steps"})," (bool) Whether to show workflow details"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/site",targetCode:`curl -X GET '${e.appDetail.api_base_url}/site' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "title": "My App",\n  "icon_type": "emoji",\n  "icon": "😄",\n  "icon_background": "#FFEAD5",\n  "icon_url": null,\n  "description": "This is my app.",\n  "copyright": "all rights reserved",\n  "privacy_policy": "",\n  "custom_disclaimer": "All generated by AI",\n  "default_language": "en-US",\n  "show_workflow_steps": false,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{})]})}function eU(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...b(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(eO,{...e})}):eO(e)}function eN(e){let n={a:"a",code:"code",h1:"h1",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...b(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{children:"ワークフローアプリ API"}),"\n",(0,r.jsx)(n.p,{children:"ワークフローアプリケーションは、セッションをサポートせず、翻訳、記事作成、要約 AI などに最適です。"}),"\n",(0,r.jsxs)("div",{children:[(0,r.jsx)(n.h3,{children:"ベース URL"}),(0,r.jsx)(eu,{title:"コード",targetCode:e.appDetail.api_base_url}),(0,r.jsx)(n.h3,{children:"認証"}),(0,r.jsxs)(n.p,{children:["サービス API は ",(0,r.jsx)(n.code,{children:"API-Key"})," 認証を使用します。\n",(0,r.jsx)("i",{children:(0,r.jsx)(n.strong,{children:"API キーの漏洩を防ぐため、API キーはクライアント側で共有または保存せず、サーバー側で保存することを強くお勧めします。"})})]}),(0,r.jsxs)(n.p,{children:["すべての API リクエストにおいて、以下のように ",(0,r.jsx)(n.code,{children:"Authorization"}),"HTTP ヘッダーに API キーを含めてください："]}),(0,r.jsx)(eu,{title:"コード",targetCode:"Authorization: Bearer {API_KEY}"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/workflows/run",method:"POST",title:"ワークフローを実行",name:"#Execute-Workflow"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"ワークフローを実行します。公開されたワークフローがないと実行できません。"}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) 必須\nアプリで定義されたさまざまな変数値の入力を許可します。\n",(0,r.jsx)(n.code,{children:"inputs"}),"パラメータには複数のキー/値ペアが含まれ、各キーは特定の変数に対応し、各値はその変数の特定の値です。\nワークフローアプリケーションは少なくとも1つのキー/値ペアの入力を必要とします。値はファイルリストである場合もあります。\nファイルリストは、テキスト理解と質問への回答を組み合わせたファイルの入力に適しています。モデルがファイルの解析と理解機能をサポートしている場合にのみ使用できます。"]}),"\n",(0,r.jsx)(n.p,{children:"変数がファイルリストの場合、リストの各要素は以下の属性を持つ必要があります。"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) サポートされるタイプ：","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," サポートされるタイプには以下が含まれます：'TXT', 'MD', 'MARKDOWN', 'MDX', 'PDF', 'HTML', 'XLSX', 'XLS', 'VTT', 'PROPERTIES', 'DOC', 'DOCX', 'CSV', 'EML', 'MSG', 'PPTX', 'PPT', 'XML', 'EPUB'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," サポートされるタイプには以下が含まれます：'JPG', 'JPEG', 'PNG', 'GIF', 'WEBP', 'SVG'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," サポートされるタイプには以下が含まれます：'MP3', 'M4A', 'WAV', 'WEBM', 'MPGA'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," サポートされるタイプには以下が含まれます：'MP4', 'MOV', 'MPEG', 'WEBM'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," サポートされるタイプには以下が含まれます：その他のファイルタイプ"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_method"})," (string) 転送方法:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"remote_url"}),": ファイルのURL。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"local_file"}),": ファイルをアップロード。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," ファイルのURL。（転送方法が ",(0,r.jsx)(n.code,{children:"remote_url"})," の場合のみ）。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"upload_file_id"})," アップロードされたファイルID。（転送方法が ",(0,r.jsx)(n.code,{children:"local_file"})," の場合のみ）。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"response_mode"})," (string) 必須\n応答の返却モードを指定します。サポートされているモード："]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"streaming"})," ストリーミングモード（推奨）、SSE（",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events",children:"Server-Sent Events"}),"）を通じてタイプライターのような出力を実装します。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"blocking"})," ブロッキングモード、実行完了後に結果を返します。（プロセスが長い場合、リクエストが中断される可能性があります）\n",(0,r.jsx)("i",{children:"Cloudflare の制限により、100 秒後に応答がない場合、リクエストは中断されます。"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) 必須\nユーザー識別子、エンドユーザーのアイデンティティを定義するために使用されます。\nアプリケーション内で開発者によって一意に定義される必要があります。"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"files"})," (array[object]) オプション"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"trace_id"})," (string) オプション\nトレースID。既存の業務システムのトレースコンポーネントと連携し、エンドツーエンドの分散トレーシングを実現するために使用します。指定がない場合、システムが自動的に trace_id を生成します。以下の3つの方法で渡すことができ、優先順位は次のとおりです："]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Header：HTTPヘッダー ",(0,r.jsx)(n.code,{children:"X-Trace-Id"})," で渡す（最優先）。"]}),"\n",(0,r.jsxs)(n.li,{children:["クエリパラメータ：URLクエリパラメータ ",(0,r.jsx)(n.code,{children:"trace_id"})," で渡す。"]}),"\n",(0,r.jsxs)(n.li,{children:["リクエストボディ：リクエストボディの ",(0,r.jsx)(n.code,{children:"trace_id"})," フィールドで渡す（本フィールド）。"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"response_mode"}),"が",(0,r.jsx)(n.code,{children:"blocking"}),"の場合、CompletionResponse オブジェクトを返します。\n",(0,r.jsx)(n.code,{children:"response_mode"}),"が",(0,r.jsx)(n.code,{children:"streaming"}),"の場合、ChunkCompletionResponse ストリームを返します。"]}),(0,r.jsx)(n.h3,{children:"CompletionResponse"}),(0,r.jsxs)(n.p,{children:["アプリの結果を返します。",(0,r.jsx)(n.code,{children:"Content-Type"}),"は",(0,r.jsx)(n.code,{children:"application/json"}),"です。"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) ワークフロー実行の一意の ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスク ID、リクエスト追跡と以下の Stop Generate API に使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 結果の詳細","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ワークフロー実行の ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) 関連するワークフローの ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 実行のステータス、",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) オプションの出力内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) オプションのエラー理由"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) オプションの使用時間（秒）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) オプションの使用トークン数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) デフォルト 0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 開始時間"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) 終了時間"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"ChunkCompletionResponse"}),(0,r.jsxs)(n.p,{children:["アプリによって出力されたストリームチャンクを返します。",(0,r.jsx)(n.code,{children:"Content-Type"}),"は",(0,r.jsx)(n.code,{children:"text/event-stream"}),"です。\n各ストリーミングチャンクは",(0,r.jsx)(n.code,{children:"data:"}),"で始まり、2 つの改行文字",(0,r.jsx)(n.code,{children:"\\n\\n"}),"で区切られます。以下のように表示されます："]}),(0,r.jsx)(eu,{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'data: {"event": "text_chunk", "workflow_run_id": "b85e5fc5-751b-454d-b14e-dc5f240b0a31", "task_id": "bd029338-b068-4d34-a331-fc85478922c2", "data": {"text": "\\u4e3a\\u4e86", "from_variable_selector": ["1745912968134", "text"]}}\\n\\n\n'})})}),(0,r.jsxs)(n.p,{children:["ストリーミングチャンクの構造は",(0,r.jsx)(n.code,{children:"event"}),"に応じて異なります："]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: workflow_started"})," ワークフローが実行を開始","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスク ID、リクエスト追跡と以下の Stop Generate API に使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) ワークフロー実行の一意の ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) ",(0,r.jsx)(n.code,{children:"workflow_started"}),"に固定"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 詳細","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ワークフロー実行の一意の ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) 関連するワークフローの ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: node_started"})," ノード実行開始","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスク ID、リクエスト追跡と以下の Stop Generate API に使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) ワークフロー実行の一意の ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) ",(0,r.jsx)(n.code,{children:"node_started"}),"に固定"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 詳細","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ワークフロー実行の一意の ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_id"})," (string) ノードの ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_type"})," (string) ノードのタイプ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) ノードの名前"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index"})," (int) 実行シーケンス番号、トレースノードシーケンスを表示するために使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"predecessor_node_id"})," (string) オプションのプレフィックスノード ID、キャンバス表示実行パスに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) ノードで使用されるすべての前のノード変数の内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 開始のタイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: text_chunk"})," テキストフラグメント","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスク ID、リクエスト追跡と以下の Stop Generate API に使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) ワークフロー実行の一意の ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) ",(0,r.jsx)(n.code,{children:"text_chunk"}),"に固定"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 詳細","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text"})," (string) テキスト内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"from_variable_selector"})," (array) テキスト生成元パス（開発者がどのノードのどの変数から生成されたかを理解するための情報）"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: node_finished"})," ノード実行終了、同じイベントで異なる状態で成功または失敗","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスク ID、リクエスト追跡と以下の Stop Generate API に使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) ワークフロー実行の一意の ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) ",(0,r.jsx)(n.code,{children:"node_finished"}),"に固定"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 詳細","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ワークフロー実行の一意の ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_id"})," (string) ノードの ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_type"})," (string) ノードのタイプ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) ノードの名前"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index"})," (int) 実行シーケンス番号、トレースノードシーケンスを表示するために使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"predecessor_node_id"})," (string) オプションのプレフィックスノード ID、キャンバス表示実行パスに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) ノードで使用されるすべての前のノード変数の内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"process_data"})," (json) オプションのノードプロセスデータ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) オプションの出力内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 実行のステータス、",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) オプションのエラー理由"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) オプションの使用時間（秒）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"execution_metadata"})," (json) メタデータ","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) オプションの使用トークン数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_price"})," (decimal) オプションの総コスト"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"currency"})," (string) オプション 例：",(0,r.jsx)(n.code,{children:"USD"})," / ",(0,r.jsx)(n.code,{children:"RMB"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 開始のタイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: workflow_finished"})," ワークフロー実行終了、同じイベントで異なる状態で成功または失敗","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスク ID、リクエスト追跡と以下の Stop Generate API に使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) ワークフロー実行の一意の ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) ",(0,r.jsx)(n.code,{children:"workflow_finished"}),"に固定"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 詳細","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ワークフロー実行の ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) 関連するワークフローの ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 実行のステータス、",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) オプションの出力内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) オプションのエラー理由"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) オプションの使用時間（秒）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) オプションの使用トークン数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) デフォルト 0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 開始時間"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) 終了時間"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message"})," TTS オーディオストリームイベント、つまり音声合成出力。内容は Mp3 形式のオーディオブロックで、base64 文字列としてエンコードされています。再生時には、base64 をデコードしてプレーヤーに入力するだけです。（このメッセージは自動再生が有効な場合にのみ利用可能）","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスク ID、リクエスト追跡と以下の停止応答インターフェースに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージ ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 音声合成後のオーディオ、base64 テキストコンテンツとしてエンコードされており、再生時には base64 をデコードしてプレーヤーに入力するだけです"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message_end"})," TTS オーディオストリーム終了イベント。このイベントを受信すると、オーディオストリームの終了を示します。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスク ID、リクエスト追跡と以下の停止応答インターフェースに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 一意のメッセージ ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 終了イベントにはオーディオがないため、これは空の文字列です"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: ping"})," 接続を維持するために 10 秒ごとに送信される Ping イベント。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"エラー"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"invalid_param"}),", 異常なパラメータ入力"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"app_unavailable"}),", アプリの設定が利用できません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"provider_not_initialize"}),", 利用可能なモデル資格情報の設定がありません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"provider_quota_exceeded"}),", モデル呼び出しのクォータが不足しています"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"model_currently_not_support"}),", 現在のモデルは利用できません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"workflow_request_error"}),", ワークフロー実行に失敗しました"]}),"\n",(0,r.jsx)(n.li,{children:"500, 内部サーバーエラー"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"POST",label:"/workflows/run",targetCode:`curl -X POST '${e.appDetail.api_base_url}/workflows/run' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "inputs": ${JSON.stringify(e.inputs)},
  "response_mode": "streaming",
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"ファイル変数の例",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "inputs": {\n    "{variable_name}":\n    [\n      {\n      "transfer_method": "local_file",\n      "upload_file_id": "{upload_file_id}",\n      "type": "{document_type}"\n      }\n    ]\n  }\n}\n'})})}),(0,r.jsx)(n.h3,{children:"ブロッキングモード"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "workflow_run_id": "djflajgkldjgd",\n    "task_id": "9da23599-e713-473b-982c-4328d4f5c78a",\n    "data": {\n        "id": "fdlsjfjejkghjda",\n        "workflow_id": "fldjaslkfjlsda",\n        "status": "succeeded",\n        "outputs": {\n          "text": "Nice to meet you."\n        },\n        "error": null,\n        "elapsed_time": 0.875,\n        "total_tokens": 3562,\n        "total_steps": 8,\n        "created_at": 1705407629,\n        "finished_at": 1727807631\n    }\n}\n'})})}),(0,r.jsx)(n.h3,{children:"ストリーミングモード"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'  data: {"event": "workflow_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "created_at": 1679586595}}\n  data: {"event": "node_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "created_at": 1679586595}}\n  data: {"event": "node_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "execution_metadata": {"total_tokens": 63127864, "total_price": 2.378, "currency": "USD"},  "created_at": 1679586595}}\n  data: {"event": "workflow_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "total_tokens": 63127864, "total_steps": "1", "created_at": 1679586595, "finished_at": 1679976595}}\n  data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}\n  data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}\n'})})}),(0,r.jsx)(eu,{title:"ファイルアップロードのサンプルコード",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'import requests\nimport json\n\ndef upload_file(file_path, user):\n    upload_url = "https://api.dify.ai/v1/files/upload"\n    headers = {\n        "Authorization": "Bearer app-xxxxxxxx",\n    }\n\n    try:\n        print("ファイルをアップロードしています...")\n        with open(file_path, \'rb\') as file:\n            files = {\n                \'file\': (file_path, file, \'text/plain\')  # ファイルが適切な MIME タイプでアップロードされていることを確認してください\n            }\n            data = {\n                "user": user,\n                "type": "TXT"  # ファイルタイプをTXTに設定します\n            }\n\n            response = requests.post(upload_url, headers=headers, files=files, data=data)\n            if response.status_code == 201:  # 201 は作成が成功したことを意味します\n                print("ファイルが正常にアップロードされました")\n                return response.json().get("id")  # アップロードされたファイルIDを取得する\n            else:\n                print(f"ファイルのアップロードに失敗しました。ステータス コード: {response.status_code}")\n                return None\n    except Exception as e:\n        print(f"エラーが発生しました: {str(e)}")\n        return None\n\ndef run_workflow(file_id, user, response_mode="blocking"):\n    workflow_url = "https://api.dify.ai/v1/workflows/run"\n    headers = {\n        "Authorization": "Bearer app-xxxxxxxxx",\n        "Content-Type": "application/json"\n    }\n\n    data = {\n        "inputs": {\n            "orig_mail": [{\n                "transfer_method": "local_file",\n                "upload_file_id": file_id,\n                "type": "document"\n            }]\n        },\n        "response_mode": response_mode,\n        "user": user\n    }\n\n    try:\n        print("ワークフローを実行...")\n        response = requests.post(workflow_url, headers=headers, json=data)\n        if response.status_code == 200:\n            print("ワークフローが正常に実行されました")\n            return response.json()\n        else:\n            print(f"ワークフローの実行がステータス コードで失敗しました: {response.status_code}")\n            return {"status": "error", "message": f"Failed to execute workflow, status code: {response.status_code}"}\n    except Exception as e:\n        print(f"エラーが発生しました: {str(e)}")\n        return {"status": "error", "message": str(e)}\n\n# 使用例\nfile_path = "{your_file_path}"\nuser = "difyuser"\n\n# ファイルをアップロードする\nfile_id = upload_file(file_path, user)\nif file_id:\n    # ファイルは正常にアップロードされました。ワークフローの実行を続行します\n    result = run_workflow(file_id, user)\n    print(result)\nelse:\n    print("ファイルのアップロードに失敗し、ワークフローを実行できません")\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/workflows/:workflow_id/run",method:"POST",title:"特定バージョンのワークフローを実行",name:"#Execute-Specific-Workflow"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"パスパラメータでワークフローIDを指定して、特定バージョンのワークフローを実行します。"}),(0,r.jsx)(n.h3,{children:"パス"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) 必須 特定バージョンのワークフローを指定するためのワークフローID"]}),"\n",(0,r.jsx)(n.p,{children:"取得方法：バージョン履歴インターフェースで、各バージョンエントリの右側にあるコピーアイコンをクリックすると、完全なワークフローIDをコピーできます。"}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) 必須\nApp で定義された各変数値を入力できます。\ninputs パラメータには複数のキー/値ペアが含まれており、各キーは特定の変数に対応し、各値はその変数の具体的な値です。変数はファイルリスト型にすることができます。\nファイルリスト型変数は、ファイルをテキスト理解と組み合わせて質問に答えるために入力するのに適しており、モデルがファイル解析機能をサポートしている場合のみ使用できます。変数がファイルリスト型の場合、その変数に対応する値はリスト形式である必要があり、各要素には以下の内容が含まれます：","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) サポートされるタイプ：","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," 具体的なタイプには以下が含まれます：'TXT', 'MD', 'MARKDOWN', 'PDF', 'HTML', 'XLSX', 'XLS', 'DOCX', 'CSV', 'EML', 'MSG', 'PPTX', 'PPT', 'XML', 'EPUB'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," 具体的なタイプには以下が含まれます：'JPG', 'JPEG', 'PNG', 'GIF', 'WEBP', 'SVG'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," 具体的なタイプには以下が含まれます：'MP3', 'M4A', 'WAV', 'WEBM', 'AMR'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," 具体的なタイプには以下が含まれます：'MP4', 'MOV', 'MPEG', 'MPGA'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," 具体的なタイプには以下が含まれます：その他のファイルタイプ"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_method"})," (string) 転送方法、",(0,r.jsx)(n.code,{children:"remote_url"})," 画像URL / ",(0,r.jsx)(n.code,{children:"local_file"})," ファイルアップロード"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," (string) 画像URL（転送方法が ",(0,r.jsx)(n.code,{children:"remote_url"})," の場合のみ）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"upload_file_id"})," (string) アップロードされたファイルID（転送方法が ",(0,r.jsx)(n.code,{children:"local_file"})," の場合のみ）"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"response_mode"})," (string) 必須\n応答返却モード、以下をサポート：","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"streaming"})," ストリーミングモード（推奨）。SSE（",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events",children:"Server-Sent Events"})}),"）をベースにタイプライター風の出力を実現。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"blocking"})," ブロッキングモード、実行完了後に結果を返却。（プロセスが長い場合、リクエストが中断される可能性があります）。\n",(0,r.jsx)("i",{children:"Cloudflare の制限により、100秒後に応答がない場合、リクエストは中断されます。"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) 必須\nユーザー識別子、エンドユーザーのアイデンティティを定義し、検索・統計を容易にするために使用されます。\n開発者が定義するルールで、アプリケーション内でユーザー識別子が一意である必要があります。API は WebApp で作成されたセッションにアクセスできません。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"files"})," (array[object]) オプション"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"trace_id"})," (string) オプション\nトレースID。既存のビジネスシステムのトレースコンポーネントと統合して、エンドツーエンドの分散トレーシングを実現するために使用されます。指定されていない場合、システムは自動的に ",(0,r.jsx)(n.code,{children:"trace_id"})," を生成します。以下の3つの方法で渡すことができ、優先順位は以下の通りです：","\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["ヘッダー：HTTP ヘッダー ",(0,r.jsx)(n.code,{children:"X-Trace-Id"})," で渡すことを推奨、最高優先度。"]}),"\n",(0,r.jsxs)(n.li,{children:["クエリパラメータ：URL クエリパラメータ ",(0,r.jsx)(n.code,{children:"trace_id"})," で渡す。"]}),"\n",(0,r.jsxs)(n.li,{children:["リクエストボディ：リクエストボディフィールド ",(0,r.jsx)(n.code,{children:"trace_id"})," で渡す（つまり、このフィールド）。"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"response_mode"})," が ",(0,r.jsx)(n.code,{children:"blocking"})," の場合、CompletionResponse オブジェクトを返します。\n",(0,r.jsx)(n.code,{children:"response_mode"})," が ",(0,r.jsx)(n.code,{children:"streaming"})," の場合、ChunkCompletionResponse オブジェクトのストリーミングシーケンスを返します。"]}),(0,r.jsx)(n.h3,{children:"CompletionResponse"}),(0,r.jsxs)(n.p,{children:["完全な App 結果を返し、",(0,r.jsx)(n.code,{children:"Content-Type"})," は ",(0,r.jsx)(n.code,{children:"application/json"})," です。"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) ワークフロー実行ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下の停止応答インターフェースに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 詳細内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ワークフロー実行ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) 関連するワークフローID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 実行ステータス、",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) オプション 出力内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) オプション エラー理由"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) オプション 使用時間(s)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) オプション 使用されるトークンの総数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) 総ステップ数（冗長）、デフォルト 0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 開始時間"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) 終了時間"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"ChunkCompletionResponse"}),(0,r.jsxs)(n.p,{children:["App の出力ストリーミングチャンクを返し、",(0,r.jsx)(n.code,{children:"Content-Type"})," は ",(0,r.jsx)(n.code,{children:"text/event-stream"})," です。\n各ストリーミングチャンクは ",(0,r.jsx)(n.code,{children:"data:"})," で始まり、チャンク間は ",(0,r.jsx)(n.code,{children:"\\n\\n"})," つまり2つの改行文字で区切られます。以下のようになります："]}),(0,r.jsx)(eu,{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'data: {"event": "text_chunk", "workflow_run_id": "b85e5fc5-751b-454d-b14e-dc5f240b0a31", "task_id": "bd029338-b068-4d34-a331-fc85478922c2", "data": {"text": "\\u4e3a\\u4e86", "from_variable_selector": ["1745912968134", "text"]}}\\n\\n\n'})})}),(0,r.jsxs)(n.p,{children:["ストリーミングチャンクは ",(0,r.jsx)(n.code,{children:"event"})," によって構造が異なり、以下のタイプが含まれます："]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: workflow_started"})," ワークフロー実行開始","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下の停止応答インターフェースに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) ワークフロー実行ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) ",(0,r.jsx)(n.code,{children:"workflow_started"})," に固定"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 詳細内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ワークフロー実行ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) 関連するワークフローID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 開始時間"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: node_started"})," ノード実行開始","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下の停止応答インターフェースに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) ワークフロー実行ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) ",(0,r.jsx)(n.code,{children:"node_started"})," に固定"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 詳細内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ワークフロー実行ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_id"})," (string) ノードID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_type"})," (string) ノードタイプ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) ノード名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index"})," (int) 実行シーケンス番号、Tracing Node シーケンスの表示に使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"predecessor_node_id"})," (string) 前置ノードID、キャンバス表示実行パスに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) ノードで使用されるすべての前置ノード変数の内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 開始時間"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: text_chunk"})," テキストフラグメント","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下の停止応答インターフェースに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) ワークフロー実行ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) ",(0,r.jsx)(n.code,{children:"text_chunk"})," に固定"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 詳細内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text"})," (string) テキスト内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"from_variable_selector"})," (array) テキストソースパス、開発者がテキストがどのノードのどの変数から生成されたかを理解するのに役立ちます"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: node_finished"})," ノード実行終了、成功と失敗は同じイベント内の異なる状態","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下の停止応答インターフェースに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) ワークフロー実行ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) ",(0,r.jsx)(n.code,{children:"node_finished"})," に固定"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 詳細内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ノード実行ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_id"})," (string) ノードID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index"})," (int) 実行シーケンス番号、Tracing Node シーケンスの表示に使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"predecessor_node_id"})," (string) オプション 前置ノードID、キャンバス表示実行パスに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) ノードで使用されるすべての前置ノード変数の内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"process_data"})," (json) オプション ノードプロセスデータ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) オプション 出力内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 実行ステータス ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) オプション エラー理由"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) オプション 使用時間(s)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"execution_metadata"})," (json) メタデータ","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) オプション 使用されるトークンの総数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_price"})," (decimal) オプション 総費用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"currency"})," (string) オプション 通貨、例：",(0,r.jsx)(n.code,{children:"USD"})," / ",(0,r.jsx)(n.code,{children:"RMB"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 開始時間"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: workflow_finished"})," ワークフロー実行終了、成功と失敗は同じイベント内の異なる状態","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下の停止応答インターフェースに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) ワークフロー実行ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) ",(0,r.jsx)(n.code,{children:"workflow_finished"})," に固定"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 詳細内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ワークフロー実行ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) 関連するワークフローID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 実行ステータス ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) オプション 出力内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) オプション エラー理由"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) オプション 使用時間(s)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) オプション 使用されるトークンの総数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) 総ステップ数（冗長）、デフォルト 0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 開始時間"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) 終了時間"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message"})," TTS オーディオストリームイベント、つまり：音声合成出力。内容はMp3形式のオーディオブロックで、base64エンコードされた文字列として、再生時に直接デコードできます。（自動再生が有効な場合のみこのメッセージがあります）","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下の停止応答インターフェースに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) メッセージ一意ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 音声合成後のオーディオブロックはbase64エンコードされたテキスト内容として、再生時に直接base64デコードしてプレーヤーに送信できます"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message_end"})," TTS オーディオストリーム終了イベント、このイベントを受信すると、オーディオストリームの返却が終了したことを示します。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスクID、リクエスト追跡と以下の停止応答インターフェースに使用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) メッセージ一意ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 終了イベントにはオーディオがないため、ここは空文字列です"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: ping"})," 10秒ごとのpingイベント、接続を維持します。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"エラー"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"invalid_param"}),"，入力パラメータ異常"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"app_unavailable"}),"，App 設定が利用できません"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"provider_not_initialize"}),"，利用可能なモデル認証情報設定がありません"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"provider_quota_exceeded"}),"，モデル呼び出しクォータが不足しています"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"model_currently_not_support"}),"，現在のモデルが利用できません"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"workflow_not_found"}),"，指定されたワークフローバージョンが見つかりません"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"draft_workflow_error"}),"，ドラフトワークフローバージョンを使用できません"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"workflow_id_format_error"}),"，ワークフローID形式エラー、UUID形式が必要です"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"workflow_request_error"}),"，ワークフロー実行に失敗しました"]}),"\n",(0,r.jsx)(n.li,{children:"500，サービス内部異常"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"POST",label:"/workflows/:workflow_id/run",targetCode:`curl -X POST '${e.appDetail.api_base_url}/workflows/{workflow_id}/run' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "inputs": ${JSON.stringify(e.inputs)},
  "response_mode": "streaming",
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"例：入力変数としてのファイル配列",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "inputs": {\n    "{variable_name}":\n    [\n      {\n      "transfer_method": "local_file",\n      "upload_file_id": "{upload_file_id}",\n      "type": "{document_type}"\n      }\n    ]\n  }\n}\n'})})}),(0,r.jsx)(n.h3,{children:"ブロッキングモード"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "workflow_run_id": "djflajgkldjgd",\n    "task_id": "9da23599-e713-473b-982c-4328d4f5c78a",\n    "data": {\n        "id": "fdlsjfjejkghjda",\n        "workflow_id": "fldjaslkfjlsda",\n        "status": "succeeded",\n        "outputs": {\n          "text": "Nice to meet you."\n        },\n        "error": null,\n        "elapsed_time": 0.875,\n        "total_tokens": 3562,\n        "total_steps": 8,\n        "created_at": 1705407629,\n        "finished_at": 1727807631\n    }\n}\n'})})}),(0,r.jsx)(n.h3,{children:"ストリーミングモード"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'  data: {"event": "workflow_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "created_at": 1679586595}}\n  data: {"event": "node_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "created_at": 1679586595}}\n  data: {"event": "node_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "execution_metadata": {"total_tokens": 63127864, "total_price": 2.378, "currency": "USD"},  "created_at": 1679586595}}\n  data: {"event": "workflow_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "total_tokens": 63127864, "total_steps": "1", "created_at": 1679586595, "finished_at": 1679976595}}\n  data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}\n  data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/workflows/run/:workflow_run_id",method:"GET",title:"ワークフロー実行詳細を取得",name:"#get-workflow-run-detail"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"ワークフロー実行 ID に基づいて、ワークフロータスクの現在の実行結果を取得します。"}),(0,r.jsx)(n.h3,{children:"パス"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) ワークフロー実行ID、ストリーミングチャンクの返り値から取得可能"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ワークフロー実行の ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) 関連するワークフローの ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 実行のステータス、",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (json) 入力内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) 出力内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) エラー理由"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) タスクの総ステップ数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) 使用されるトークンの総数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 開始時間"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) 終了時間"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) 使用される総秒数"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"リクエスト例"}),(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/workflows/run/:workflow_run_id",targetCode:`curl -X GET '${e.appDetail.api_base_url}/workflows/run/:workflow_run_id' \\
-H 'Authorization: Bearer {api_key}' \\
-H 'Content-Type: application/json'`}),(0,r.jsx)(n.h3,{children:"応答例"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "id": "b1ad3277-089e-42c6-9dff-6820d94fbc76",\n    "workflow_id": "19eff89f-ec03-4f75-b0fc-897e7effea02",\n    "status": "succeeded",\n    "inputs": "{\\"sys.files\\": [], \\"sys.user_id\\": \\"abc-123\\"}",\n    "outputs": null,\n    "error": null,\n    "total_steps": 3,\n    "total_tokens": 0,\n    "created_at": 1705407629,\n    "finished_at": 1727807631,\n    "elapsed_time": 30.098514399956912\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/workflows/tasks/:task_id/stop",method:"POST",title:"生成を停止",name:"#stop-generatebacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"ストリーミングモードでのみサポートされています。"}),(0,r.jsx)(n.h3,{children:"パス"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) タスク ID、ストリーミングチャンクの返り値から取得可能"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) 必須\nユーザー識別子、エンドユーザーのアイデンティティを定義するために使用され、送信メッセージインターフェースで渡されたユーザーと一致している必要があります。サービス API は WebApp によって作成された会話を共有しません。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"}),' (string) 常に"success"を返します']}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"リクエスト例"}),(0,r.jsx)(eu,{title:"リクエスト",tag:"POST",label:"/workflows/tasks/:task_id/stop",targetCode:`curl -X POST '${e.appDetail.api_base_url}/workflows/tasks/:task_id/stop' \\
-H 'Authorization: Bearer {api_key}' \\
-H 'Content-Type: application/json' \\
--data-raw '{"user": "abc-123"}'`}),(0,r.jsx)(n.h3,{children:"応答例"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/upload",method:"POST",title:"ファイルアップロード",name:"#file-upload"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"メッセージ送信時に使用するためのファイルをアップロードし、画像とテキストのマルチモーダル理解を可能にします。\nワークフローでサポートされている任意の形式をサポートします。\nアップロードされたファイルは、現在のエンドユーザーのみが使用できます。"}),(0,r.jsx)(n.h3,{children:"リクエストボディ"}),(0,r.jsxs)(n.p,{children:["このインターフェースは",(0,r.jsx)(n.code,{children:"multipart/form-data"}),"リクエストを必要とします。"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file"})," (File) 必須\nアップロードするファイル。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) 必須\nユーザー識別子、開発者のルールで定義され、アプリケーション内で一意でなければなりません。サービス API は WebApp によって作成された会話を共有しません。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsx)(n.p,{children:"アップロードが成功すると、サーバーはファイルの ID と関連情報を返します。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (uuid) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) ファイル名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"size"})," (int) ファイルサイズ（バイト）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"extension"})," (string) ファイル拡張子"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mime_type"})," (string) ファイルの MIME タイプ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by"})," (uuid) エンドユーザーID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 作成タイムスタンプ、例：1705395332"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"エラー"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"no_file_uploaded"}),", ファイルが提供されていません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"too_many_files"}),", 現在は 1 つのファイルのみ受け付けています"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"unsupported_preview"}),", ファイルはプレビューをサポートしていません"]}),"\n",(0,r.jsxs)(n.li,{children:["400, ",(0,r.jsx)(n.code,{children:"unsupported_estimate"}),", ファイルは推定をサポートしていません"]}),"\n",(0,r.jsxs)(n.li,{children:["413, ",(0,r.jsx)(n.code,{children:"file_too_large"}),", ファイルが大きすぎます"]}),"\n",(0,r.jsxs)(n.li,{children:["415, ",(0,r.jsx)(n.code,{children:"unsupported_file_type"}),", サポートされていない拡張子、現在はドキュメントファイルのみ受け付けています"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_connection_failed"}),", S3 サービスに接続できません"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_permission_denied"}),", S3 にファイルをアップロードする権限がありません"]}),"\n",(0,r.jsxs)(n.li,{children:["503, ",(0,r.jsx)(n.code,{children:"s3_file_too_large"}),", ファイルが S3 のサイズ制限を超えています"]}),"\n",(0,r.jsx)(n.li,{children:"500, 内部サーバーエラー"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"リクエスト例"}),(0,r.jsx)(eu,{title:"リクエスト",tag:"POST",label:"/files/upload",targetCode:`curl -X POST '${e.appDetail.api_base_url}/files/upload' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=image/[png|jpeg|jpg|webp|gif]' \\
--form 'user=abc-123'`}),(0,r.jsx)(n.h3,{children:"応答例"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "72fa9618-8f89-4a37-9b33-7e1178a24a67",\n  "name": "example.png",\n  "size": 1024,\n  "extension": "png",\n  "mime_type": "image/png",\n  "created_by": "6ad1ab0a-73ff-4ac1-b9e4-cdb312f71f13",\n  "created_at": 1577836800,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/workflows/logs",method:"GET",title:"ワークフローログを取得",name:"#Get-Workflow-Logs"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsxs)(n.p,{children:["ワークフローログを返します。最初のページは最新の",(0,r.jsx)(n.code,{children:"{limit}"}),"メッセージを返します。つまり、逆順です。"]}),(0,r.jsx)(n.h3,{children:"クエリ"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"keyword",type:"string",children:(0,r.jsx)(n.p,{children:"検索するキーワード"})},"keyword"),(0,r.jsx)(ef,{name:"status",type:"string",children:(0,r.jsx)(n.p,{children:"succeeded/failed/stopped"})},"status"),(0,r.jsx)(ef,{name:"page",type:"int",children:(0,r.jsx)(n.p,{children:"現在のページ、デフォルトは1。"})},"page"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"1回のリクエストで返すチャット履歴メッセージの数、デフォルトは20。"})},"limit"),(0,r.jsx)(ef,{name:"created_by_end_user_session_id",type:"str",children:(0,r.jsxs)(n.p,{children:["どのendUserによって作成されたか、例えば、",(0,r.jsx)(n.code,{children:"abc-123"}),"。"]})},"created_by_end_user_session_id"),(0,r.jsx)(ef,{name:"created_by_account",type:"str",children:(0,r.jsx)(n.p,{children:"どのメールアカウントによって作成されたか、例えば、lizb@test.com。"})},"created_by_account")]}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"page"})," (int) 現在のページ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) 返されたアイテムの数、入力がシステム制限を超える場合、システム制限量を返します"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total"})," (int) 合計アイテム数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool) 次のページがあるかどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object]) ログリスト","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run"})," (object) ワークフロー実行","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"version"})," (string) バージョン"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 実行のステータス、",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) オプションのエラー理由"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) 使用される総秒数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) 使用されるトークン数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) デフォルト 0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 開始時間"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) 終了時間"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_from"})," (string) 作成元"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by_role"})," (string) 作成者の役割"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by_account"})," (string) オプションの作成者アカウント"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by_end_user"})," (object) エンドユーザーによって作成","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) タイプ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"is_anonymous"})," (bool) 匿名かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"session_id"})," (string) セッション ID"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 作成時間"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/workflows/logs",targetCode:`curl -X GET '${e.appDetail.api_base_url}/workflows/logs'\\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(n.h3,{children:"応答例"}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "page": 1,\n    "limit": 1,\n    "total": 7,\n    "has_more": true,\n    "data": [\n        {\n            "id": "e41b93f1-7ca2-40fd-b3a8-999aeb499cc0",\n            "workflow_run": {\n                "id": "c0640fc8-03ef-4481-a96c-8a13b732a36e",\n                "version": "2024-08-01 12:17:09.771832",\n                "status": "succeeded",\n                "error": null,\n                "elapsed_time": 1.3588523610014818,\n                "total_tokens": 0,\n                "total_steps": 3,\n                "created_at": 1726139643,\n                "finished_at": 1726139644\n            },\n            "created_from": "service-api",\n            "created_by_role": "end_user",\n            "created_by_account": null,\n            "created_by_end_user": {\n                "id": "7f7d9117-dd9d-441d-8970-87e5e7e687a3",\n                "type": "service_api",\n                "is_anonymous": false,\n                "session_id": "abc-123"\n            },\n            "created_at": 1726139644\n        }\n    ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/info",method:"GET",title:"アプリケーションの基本情報を取得",name:"#info"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"このアプリケーションの基本情報を取得するために使用されます"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) アプリケーションの名前"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) アプリケーションの説明"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tags"})," (array[string]) アプリケーションのタグ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) アプリケーションのモード"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"author_name"})," (string) 作者の名前"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/info",targetCode:`curl -X GET '${e.appDetail.api_base_url}/info' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "My App",\n  "description": "This is my app.",\n  "tags": [\n    "tag1",\n    "tag2"\n  ],\n  "mode": "workflow",\n  "author_name": "Dify"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/parameters",method:"GET",title:"アプリケーションのパラメータ情報を取得",name:"#parameters"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"ページに入る際に、機能、入力パラメータ名、タイプ、デフォルト値などの情報を取得するために使用されます。"}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user_input_form"})," (array[object]) ユーザー入力フォームの設定","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text-input"})," (object) テキスト入力コントロール","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 変数表示ラベル名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 変数ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 必須かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) デフォルト値"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"paragraph"})," (object) 段落テキスト入力コントロール","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 変数表示ラベル名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 変数ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 必須かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) デフォルト値"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"select"})," (object) ドロップダウンコントロール","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 変数表示ラベル名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 変数ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 必須かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) デフォルト値"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"options"})," (array[string]) オプション値"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_upload"})," (object) ファイルアップロード設定","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," (object) ドキュメント設定\n現在サポートされているドキュメントタイプ：",(0,r.jsx)(n.code,{children:"txt"}),", ",(0,r.jsx)(n.code,{children:"md"}),", ",(0,r.jsx)(n.code,{children:"markdown"}),", ",(0,r.jsx)(n.code,{children:"pdf"}),", ",(0,r.jsx)(n.code,{children:"html"}),", ",(0,r.jsx)(n.code,{children:"xlsx"}),", ",(0,r.jsx)(n.code,{children:"xls"}),", ",(0,r.jsx)(n.code,{children:"docx"}),", ",(0,r.jsx)(n.code,{children:"csv"}),", ",(0,r.jsx)(n.code,{children:"eml"}),", ",(0,r.jsx)(n.code,{children:"msg"}),", ",(0,r.jsx)(n.code,{children:"pptx"}),", ",(0,r.jsx)(n.code,{children:"ppt"}),", ",(0,r.jsx)(n.code,{children:"xml"}),", ",(0,r.jsx)(n.code,{children:"epub"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) ドキュメント数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," (object) 画像設定\n現在サポートされている画像タイプ：",(0,r.jsx)(n.code,{children:"png"}),", ",(0,r.jsx)(n.code,{children:"jpg"}),", ",(0,r.jsx)(n.code,{children:"jpeg"}),", ",(0,r.jsx)(n.code,{children:"webp"}),", ",(0,r.jsx)(n.code,{children:"gif"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 画像数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (object) オーディオ設定\n現在サポートされているオーディオタイプ：",(0,r.jsx)(n.code,{children:"mp3"}),", ",(0,r.jsx)(n.code,{children:"m4a"}),", ",(0,r.jsx)(n.code,{children:"wav"}),", ",(0,r.jsx)(n.code,{children:"webm"}),", ",(0,r.jsx)(n.code,{children:"amr"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) オーディオ数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," (object) ビデオ設定\n現在サポートされているビデオタイプ：",(0,r.jsx)(n.code,{children:"mp4"}),", ",(0,r.jsx)(n.code,{children:"mov"}),", ",(0,r.jsx)(n.code,{children:"mpeg"}),", ",(0,r.jsx)(n.code,{children:"mpga"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) ビデオ数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," (object) カスタム設定","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 有効かどうか"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) カスタム数の上限。デフォルトは 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 転送方法リスト：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"。いずれかを選択する必要があります。"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"system_parameters"})," (object) システムパラメータ","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_size_limit"})," (int) ドキュメントアップロードサイズ制限（MB）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image_file_size_limit"})," (int) 画像ファイルアップロードサイズ制限（MB）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio_file_size_limit"})," (int) オーディオファイルアップロードサイズ制限（MB）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video_file_size_limit"})," (int) ビデオファイルアップロードサイズ制限（MB）"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"リクエスト",tag:"GET",label:"/parameters",targetCode:` curl -X GET '${e.appDetail.api_base_url}/parameters'`}),(0,r.jsx)(eu,{title:"応答",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "user_input_form": [\n      {\n          "paragraph": {\n              "label": "Query",\n              "variable": "query",\n              "required": true,\n              "default": ""\n          }\n      }\n  ],\n  "file_upload": {\n      "image": {\n          "enabled": false,\n          "number_limits": 3,\n          "detail": "high",\n          "transfer_methods": [\n              "remote_url",\n              "local_file"\n          ]\n      }\n  },\n  "system_parameters": {\n      "file_size_limit": 15,\n      "image_file_size_limit": 10,\n      "audio_file_size_limit": 50,\n      "video_file_size_limit": 100\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.p,{children:"———"}),"\n",(0,r.jsx)(e_,{url:"/site",method:"GET",title:"アプリのWebApp設定を取得",name:"#site"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"アプリの WebApp 設定を取得するために使用します。"}),(0,r.jsx)(n.h3,{children:"応答"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) WebApp 名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_type"})," (string) アイコンタイプ、",(0,r.jsx)(n.code,{children:"emoji"}),"-絵文字、",(0,r.jsx)(n.code,{children:"image"}),"-画像"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon"})," (string) アイコン。",(0,r.jsx)(n.code,{children:"emoji"}),"タイプの場合は絵文字、",(0,r.jsx)(n.code,{children:"image"}),"タイプの場合は画像 URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_background"})," (string) 16 進数形式の背景色"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_url"})," (string) アイコンの URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 説明"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"copyright"})," (string) 著作権情報"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"privacy_policy"})," (string) プライバシーポリシーのリンク"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom_disclaimer"})," (string) カスタム免責事項"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default_language"})," (string) デフォルト言語"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"show_workflow_steps"})," (bool) ワークフローの詳細を表示するかどうか"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/site",targetCode:`curl -X GET '${e.appDetail.api_base_url}/site' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "title": "My App",\n  "icon_type": "emoji",\n  "icon": "😄",\n  "icon_background": "#FFEAD5",\n  "icon_url": null,\n  "description": "This is my app.",\n  "copyright": "all rights reserved",\n  "privacy_policy": "",\n  "custom_disclaimer": "All generated by AI",\n  "default_language": "en-US",\n  "show_workflow_steps": false,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{})]})}function eL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...b(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(eN,{...e})}):eN(e)}function eW(e){let n={a:"a",code:"code",h1:"h1",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...b(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{children:"Workflow 应用 API"}),"\n",(0,r.jsx)(n.p,{children:"Workflow 应用无会话支持，适合用于翻译/文章写作/总结 AI 等等。"}),"\n",(0,r.jsxs)("div",{children:[(0,r.jsx)(n.h3,{children:"Base URL"}),(0,r.jsx)(eu,{title:"Code",targetCode:e.appDetail.api_base_url}),(0,r.jsx)(n.h3,{children:"Authentication"}),(0,r.jsxs)(n.p,{children:["Service API 使用 ",(0,r.jsx)(n.code,{children:"API-Key"})," 进行鉴权。\n",(0,r.jsx)("i",{children:(0,r.jsxs)(n.strong,{children:["强烈建议开发者把 ",(0,r.jsx)(n.code,{children:"API-Key"})," 放在后端存储，而非分享或者放在客户端存储，以免 ",(0,r.jsx)(n.code,{children:"API-Key"})," 泄露，导致财产损失。"]})}),"\n所有 API 请求都应在 ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"Authorization"})})," HTTP Header 中包含您的 ",(0,r.jsx)(n.code,{children:"API-Key"}),"，如下所示："]}),(0,r.jsx)(eu,{title:"Code",targetCode:"Authorization: Bearer {API_KEY}"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/workflows/run",method:"POST",title:"执行 Workflow",name:"#Execute-Workflow"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"执行 workflow，没有已发布的 workflow，不可执行。"}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) Required\n允许传入 App 定义的各变量值。\ninputs 参数包含了多组键值对（Key/Value pairs），每组的键对应一个特定变量，每组的值则是该变量的具体值。变量可以是文件列表类型。\n文件列表类型变量适用于传入文件结合文本理解并回答问题，仅当模型支持该类型文件解析能力时可用。如果该变量是文件列表类型，该变量对应的值应是列表格式，其中每个元素应包含以下内容：","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) 支持类型：","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," 具体类型包含：'TXT', 'MD', 'MARKDOWN', 'PDF', 'HTML', 'XLSX', 'XLS', 'DOCX', 'CSV', 'EML', 'MSG', 'PPTX', 'PPT', 'XML', 'EPUB'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," 具体类型包含：'JPG', 'JPEG', 'PNG', 'GIF', 'WEBP', 'SVG'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," 具体类型包含：'MP3', 'M4A', 'WAV', 'WEBM', 'AMR'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," 具体类型包含：'MP4', 'MOV', 'MPEG', 'MPGA'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," 具体类型包含：其他文件类型"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_method"})," (string) 传递方式，",(0,r.jsx)(n.code,{children:"remote_url"})," 图片地址 / ",(0,r.jsx)(n.code,{children:"local_file"})," 上传文件"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," (string) 图片地址（仅当传递方式为 ",(0,r.jsx)(n.code,{children:"remote_url"})," 时）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"upload_file_id"})," (string)  上传文件 ID（仅当传递方式为 ",(0,r.jsx)(n.code,{children:"local_file"})," 时）"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"response_mode"})," (string) Required\n返回响应模式，支持：","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"streaming"})," 流式模式（推荐）。基于 SSE（",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events",children:"Server-Sent Events"})}),"）实现类似打字机输出方式的流式返回。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"blocking"})," 阻塞模式，等待执行完毕后返回结果。（请求若流程较长可能会被中断）。\n",(0,r.jsx)("i",{children:"由于 Cloudflare 限制，请求会在 100 秒超时无返回后中断。"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) Required\n用户标识，用于定义终端用户的身份，方便检索、统计。\n由开发者定义规则，需保证用户标识在应用内唯一。API 无法访问 WebApp 创建的会话。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"files"})," (array[object]) 可选"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"trace_id"})," (string) Optional\n链路追踪ID。适用于与业务系统已有的trace组件打通，实现端到端分布式追踪等场景。如果未指定，系统将自动生成 ",(0,r.jsx)(n.code,{children:"trace_id"}),"。支持以下三种方式传递，具体优先级依次为：","\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Header：推荐通过 HTTP Header ",(0,r.jsx)(n.code,{children:"X-Trace-Id"})," 传递，优先级最高。"]}),"\n",(0,r.jsxs)(n.li,{children:["Query 参数：通过 URL 查询参数 ",(0,r.jsx)(n.code,{children:"trace_id"})," 传递。"]}),"\n",(0,r.jsxs)(n.li,{children:["Request Body：通过请求体字段 ",(0,r.jsx)(n.code,{children:"trace_id"})," 传递（即本字段）。"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.p,{children:["当 ",(0,r.jsx)(n.code,{children:"response_mode"})," 为 ",(0,r.jsx)(n.code,{children:"blocking"})," 时，返回 CompletionResponse object。\n当 ",(0,r.jsx)(n.code,{children:"response_mode"})," 为 ",(0,r.jsx)(n.code,{children:"streaming"}),"时，返回 ChunkCompletionResponse object 流式序列。"]}),(0,r.jsx)(n.h3,{children:"CompletionResponse"}),(0,r.jsxs)(n.p,{children:["返回完整的 App 结果，",(0,r.jsx)(n.code,{children:"Content-Type"})," 为 ",(0,r.jsx)(n.code,{children:"application/json"})," 。"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 详细内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) 关联 Workflow ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 执行状态, ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) Optional 输出内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) Optional 错误原因"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) Optional 耗时(s)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) Optional 总使用 tokens"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) 总步数（冗余），默认 0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 开始时间"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) 结束时间"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"ChunkCompletionResponse"}),(0,r.jsxs)(n.p,{children:["返回 App 输出的流式块，",(0,r.jsx)(n.code,{children:"Content-Type"})," 为 ",(0,r.jsx)(n.code,{children:"text/event-stream"}),"。\n每个流式块均为 data: 开头，块之间以 ",(0,r.jsx)(n.code,{children:"\\n\\n"})," 即两个换行符分隔，如下所示："]}),(0,r.jsx)(eu,{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'data: {"event": "text_chunk", "workflow_run_id": "b85e5fc5-751b-454d-b14e-dc5f240b0a31", "task_id": "bd029338-b068-4d34-a331-fc85478922c2", "data": {"text": "\\u4e3a\\u4e86", "from_variable_selector": ["1745912968134", "text"]}}\\n\\n\n'})})}),(0,r.jsxs)(n.p,{children:["流式块中根据 ",(0,r.jsx)(n.code,{children:"event"})," 不同，结构也不同，包含以下类型："]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: workflow_started"})," workflow 开始执行","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) 固定为 ",(0,r.jsx)(n.code,{children:"workflow_started"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 详细内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) 关联 Workflow ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 开始时间"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: node_started"})," node 开始执行","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) 固定为 ",(0,r.jsx)(n.code,{children:"node_started"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 详细内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_id"})," (string) 节点 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_type"})," (string) 节点类型"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) 节点名称"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index"})," (int) 执行序号，用于展示 Tracing Node 顺序"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"predecessor_node_id"})," (string) 前置节点 ID，用于画布展示执行路径"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) 节点中所有使用到的前置节点变量内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 开始时间"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: text_chunk"})," 文本片段","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) 固定为 ",(0,r.jsx)(n.code,{children:"text_chunk"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 详细内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text"})," (string) 文本内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"from_variable_selector"})," (array) 文本来源路径，帮助开发者了解文本是由哪个节点的哪个变量生成的"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: node_finished"})," node 执行结束，成功失败同一事件中不同状态","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) 固定为 ",(0,r.jsx)(n.code,{children:"node_finished"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 详细内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) node 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_id"})," (string) 节点 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index"})," (int) 执行序号，用于展示 Tracing Node 顺序"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"predecessor_node_id"})," (string) optional 前置节点 ID，用于画布展示执行路径"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) 节点中所有使用到的前置节点变量内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"process_data"})," (json) Optional 节点过程数据"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) Optional 输出内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 执行状态 ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) Optional 错误原因"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) Optional 耗时(s)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"execution_metadata"})," (json) 元数据","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) optional 总使用 tokens"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_price"})," (decimal) optional 总费用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"currency"})," (string) optional 货币，如 ",(0,r.jsx)(n.code,{children:"USD"})," / ",(0,r.jsx)(n.code,{children:"RMB"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 开始时间"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: workflow_finished"})," workflow 执行结束，成功失败同一事件中不同状态","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) 固定为 ",(0,r.jsx)(n.code,{children:"workflow_finished"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 详细内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) 关联 Workflow ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string)  执行状态 ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) Optional 输出内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) Optional 错误原因"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) Optional 耗时(s)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) Optional 总使用 tokens"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) 总步数（冗余），默认 0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 开始时间"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) 结束时间"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message"})," TTS 音频流事件，即：语音合成输出。内容是Mp3格式的音频块，使用 base64 编码后的字符串，播放的时候直接解码即可。(开启自动播放才有此消息)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 语音合成之后的音频块使用 Base64 编码之后的文本内容，播放的时候直接 base64 解码送入播放器即可"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳，如：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message_end"})," TTS 音频流结束事件，收到这个事件表示音频流返回结束。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 结束事件是没有音频的，所以这里是空字符串"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳，如：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: ping"})," 每 10s 一次的 ping 事件，保持连接存活。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"invalid_param"}),"，传入参数异常"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"app_unavailable"}),"，App 配置不可用"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"provider_not_initialize"}),"，无可用模型凭据配置"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"provider_quota_exceeded"}),"，模型调用额度不足"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"model_currently_not_support"}),"，当前模型不可用"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"workflow_request_error"}),"，workflow 执行失败"]}),"\n",(0,r.jsx)(n.li,{children:"500，服务内部异常"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/workflows/run",targetCode:`curl -X POST '${e.appDetail.api_base_url}/workflows/run' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "inputs": ${JSON.stringify(e.inputs)},
  "response_mode": "streaming",
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"Example: file array as an input variable",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "inputs": {\n    "{variable_name}":\n    [\n      {\n      "transfer_method": "local_file",\n      "upload_file_id": "{upload_file_id}",\n      "type": "{document_type}"\n      }\n    ]\n  }\n}\n'})})}),(0,r.jsx)(n.h3,{children:"Blocking Mode"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "workflow_run_id": "djflajgkldjgd",\n    "task_id": "9da23599-e713-473b-982c-4328d4f5c78a",\n    "data": {\n        "id": "fdlsjfjejkghjda",\n        "workflow_id": "fldjaslkfjlsda",\n        "status": "succeeded",\n        "outputs": {\n          "text": "Nice to meet you."\n        },\n        "error": null,\n        "elapsed_time": 0.875,\n        "total_tokens": 3562,\n        "total_steps": 8,\n        "created_at": 1705407629,\n        "finished_at": 1727807631\n    }\n}\n'})})}),(0,r.jsx)(n.h3,{children:"Streaming Mode"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'  data: {"event": "workflow_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "created_at": 1679586595}}\n  data: {"event": "node_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "created_at": 1679586595}}\n  data: {"event": "node_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "execution_metadata": {"total_tokens": 63127864, "total_price": 2.378, "currency": "USD"},  "created_at": 1679586595}}\n  data: {"event": "workflow_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "total_tokens": 63127864, "total_steps": "1", "created_at": 1679586595, "finished_at": 1679976595}}\n  data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}\n  data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}\n'})})}),(0,r.jsx)(eu,{title:"File upload sample code",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'import requests\nimport json\n\ndef upload_file(file_path, user):\n    upload_url = "https://api.dify.ai/v1/files/upload"\n    headers = {\n        "Authorization": "Bearer app-xxxxxxxx",\n    }\n\n    try:\n        print("上传文件中...")\n        with open(file_path, \'rb\') as file:\n            files = {\n                \'file\': (file_path, file, \'text/plain\')  # 确保文件以适当的MIME类型上传\n            }\n            data = {\n                "user": user,\n                "type": "TXT"  # 设置文件类型为TXT\n            }\n\n            response = requests.post(upload_url, headers=headers, files=files, data=data)\n            if response.status_code == 201:  # 201 表示创建成功\n                print("文件上传成功")\n                return response.json().get("id")  # 获取上传的文件 ID\n            else:\n                print(f"文件上传失败，状态码: {response.status_code}")\n                return None\n    except Exception as e:\n        print(f"发生错误: {str(e)}")\n        return None\n\ndef run_workflow(file_id, user, response_mode="blocking"):\n    workflow_url = "https://api.dify.ai/v1/workflows/run"\n    headers = {\n        "Authorization": "Bearer app-xxxxxxxxx",\n        "Content-Type": "application/json"\n    }\n\n    data = {\n        "inputs": {\n            "orig_mail": [{\n                "transfer_method": "local_file",\n                "upload_file_id": file_id,\n                "type": "document"\n            }]\n        },\n        "response_mode": response_mode,\n        "user": user\n    }\n\n    try:\n        print("运行工作流...")\n        response = requests.post(workflow_url, headers=headers, json=data)\n        if response.status_code == 200:\n            print("工作流执行成功")\n            return response.json()\n        else:\n            print(f"工作流执行失败，状态码: {response.status_code}")\n            return {"status": "error", "message": f"Failed to execute workflow, status code: {response.status_code}"}\n    except Exception as e:\n        print(f"发生错误: {str(e)}")\n        return {"status": "error", "message": str(e)}\n\n# 使用示例\nfile_path = "{your_file_path}"\nuser = "difyuser"\n\n# 上传文件\nfile_id = upload_file(file_path, user)\nif file_id:\n    # 文件上传成功，继续运行工作流\n    result = run_workflow(file_id, user)\n    print(result)\nelse:\n    print("文件上传失败，无法执行工作流")\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/workflows/:workflow_id/run",method:"POST",title:"执行指定版本 Workflow",name:"#Execute-Specific-Workflow"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"执行指定版本的工作流，通过路径参数指定工作流ID。"}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) Required 工作流ID，用于指定特定版本的工作流"]}),"\n",(0,r.jsx)(n.p,{children:"获取方式：在版本历史界面，点击每个版本条目右侧的复制图标即可复制完整的工作流 ID。"}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) Required\n允许传入 App 定义的各变量值。\ninputs 参数包含了多组键值对（Key/Value pairs），每组的键对应一个特定变量，每组的值则是该变量的具体值。变量可以是文件列表类型。\n文件列表类型变量适用于传入文件结合文本理解并回答问题，仅当模型支持该类型文件解析能力时可用。如果该变量是文件列表类型，该变量对应的值应是列表格式，其中每个元素应包含以下内容："]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) 支持类型：","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," 具体类型包含：'TXT', 'MD', 'MARKDOWN', 'MDX', 'PDF', 'HTML', 'XLSX', 'XLS', 'VTT', 'PROPERTIES', 'DOC', 'DOCX', 'CSV', 'EML', 'MSG', 'PPTX', 'PPT', 'XML', 'EPUB'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," 具体类型包含：'JPG', 'JPEG', 'PNG', 'GIF', 'WEBP', 'SVG'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," 具体类型包含：'MP3', 'M4A', 'WAV', 'WEBM', 'MPGA'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," 具体类型包含：'MP4', 'MOV', 'MPEG', 'WEBM'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," 具体类型包含：其他文件类型"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_method"})," (string)  传递方式:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"remote_url"}),": 文件地址。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"local_file"}),": 上传文件。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," 文件地址。（仅当传递方式为 ",(0,r.jsx)(n.code,{children:"remote_url"})," 时）。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"upload_file_id"})," 上传文件 ID。（仅当传递方式为 ",(0,r.jsx)(n.code,{children:"local_file "}),"时）。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"response_mode"})," (string) Required\n返回响应模式，支持："]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"streaming"})," 流式模式（推荐）。基于 SSE（",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events",children:"Server-Sent Events"})}),"）实现类似打字机输出方式的流式返回。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"blocking"})," 阻塞模式，等待执行完毕后返回结果。（请求若流程较长可能会被中断）。\n",(0,r.jsx)("i",{children:"由于 Cloudflare 限制，请求会在 100 秒超时无返回后中断。"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) Required\n用户标识，用于定义终端用户的身份，方便检索、统计。\n由开发者定义规则，需保证用户标识在应用内唯一。API 无法访问 WebApp 创建的会话。"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"files"})," (array[object]) 可选"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"trace_id"})," (string) Optional\n链路追踪ID。适用于与业务系统已有的trace组件打通，实现端到端分布式追踪等场景。如果未指定，系统将自动生成 ",(0,r.jsx)(n.code,{children:"trace_id"}),"。支持以下三种方式传递，具体优先级依次为："]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Header：推荐通过 HTTP Header ",(0,r.jsx)(n.code,{children:"X-Trace-Id"})," 传递，优先级最高。"]}),"\n",(0,r.jsxs)(n.li,{children:["Query 参数：通过 URL 查询参数 ",(0,r.jsx)(n.code,{children:"trace_id"})," 传递。"]}),"\n",(0,r.jsxs)(n.li,{children:["Request Body：通过请求体字段 ",(0,r.jsx)(n.code,{children:"trace_id"})," 传递（即本字段）。"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.p,{children:["当 ",(0,r.jsx)(n.code,{children:"response_mode"})," 为 ",(0,r.jsx)(n.code,{children:"blocking"})," 时，返回 CompletionResponse object。\n当 ",(0,r.jsx)(n.code,{children:"response_mode"})," 为 ",(0,r.jsx)(n.code,{children:"streaming"}),"时，返回 ChunkCompletionResponse object 流式序列。"]}),(0,r.jsx)(n.h3,{children:"CompletionResponse"}),(0,r.jsxs)(n.p,{children:["返回完整的 App 结果，",(0,r.jsx)(n.code,{children:"Content-Type"})," 为 ",(0,r.jsx)(n.code,{children:"application/json"})," 。"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 详细内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) 关联 Workflow ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 执行状态, ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) Optional 输出内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) Optional 错误原因"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) Optional 耗时(s)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) Optional 总使用 tokens"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) 总步数（冗余），默认 0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 开始时间"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) 结束时间"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"ChunkCompletionResponse"}),(0,r.jsxs)(n.p,{children:["返回 App 输出的流式块，",(0,r.jsx)(n.code,{children:"Content-Type"})," 为 ",(0,r.jsx)(n.code,{children:"text/event-stream"}),"。\n每个流式块均为 data: 开头，块之间以 ",(0,r.jsx)(n.code,{children:"\\n\\n"})," 即两个换行符分隔，如下所示："]}),(0,r.jsx)(eu,{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'data: {"event": "text_chunk", "workflow_run_id": "b85e5fc5-751b-454d-b14e-dc5f240b0a31", "task_id": "bd029338-b068-4d34-a331-fc85478922c2", "data": {"text": "\\u4e3a\\u4e86", "from_variable_selector": ["1745912968134", "text"]}}\\n\\n\n'})})}),(0,r.jsxs)(n.p,{children:["流式块中根据 ",(0,r.jsx)(n.code,{children:"event"})," 不同，结构也不同，包含以下类型："]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: workflow_started"})," workflow 开始执行","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) 固定为 ",(0,r.jsx)(n.code,{children:"workflow_started"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 详细内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) 关联 Workflow ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 开始时间"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: node_started"})," node 开始执行","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) 固定为 ",(0,r.jsx)(n.code,{children:"node_started"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 详细内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_id"})," (string) 节点 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_type"})," (string) 节点类型"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) 节点名称"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index"})," (int) 执行序号，用于展示 Tracing Node 顺序"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"predecessor_node_id"})," (string) 前置节点 ID，用于画布展示执行路径"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) 节点中所有使用到的前置节点变量内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 开始时间"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: text_chunk"})," 文本片段","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) 固定为 ",(0,r.jsx)(n.code,{children:"text_chunk"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 详细内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text"})," (string) 文本内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"from_variable_selector"})," (array) 文本来源路径，帮助开发者了解文本是由哪个节点的哪个变量生成的"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: node_finished"})," node 执行结束，成功失败同一事件中不同状态","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) 固定为 ",(0,r.jsx)(n.code,{children:"node_finished"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 详细内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) node 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"node_id"})," (string) 节点 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index"})," (int) 执行序号，用于展示 Tracing Node 顺序"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"predecessor_node_id"})," (string) optional 前置节点 ID，用于画布展示执行路径"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (object) 节点中所有使用到的前置节点变量内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"process_data"})," (json) Optional 节点过程数据"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) Optional 输出内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 执行状态 ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) Optional 错误原因"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) Optional 耗时(s)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"execution_metadata"})," (json) 元数据","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) optional 总使用 tokens"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_price"})," (decimal) optional 总费用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"currency"})," (string) optional 货币，如 ",(0,r.jsx)(n.code,{children:"USD"})," / ",(0,r.jsx)(n.code,{children:"RMB"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 开始时间"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: workflow_finished"})," workflow 执行结束，成功失败同一事件中不同状态","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string) 固定为 ",(0,r.jsx)(n.code,{children:"workflow_finished"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object) 详细内容","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) 关联 Workflow ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string)  执行状态 ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) Optional 输出内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) Optional 错误原因"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) Optional 耗时(s)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) Optional 总使用 tokens"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) 总步数（冗余），默认 0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 开始时间"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) 结束时间"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message"})," TTS 音频流事件，即：语音合成输出。内容是Mp3格式的音频块，使用 base64 编码后的字符串，播放的时候直接解码即可。(开启自动播放才有此消息)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 语音合成之后的音频块使用 Base64 编码之后的文本内容，播放的时候直接 base64 解码送入播放器即可"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳，如：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: tts_message_end"})," TTS 音频流结束事件，收到这个事件表示音频流返回结束。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，用于请求跟踪和下方的停止响应接口"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"message_id"})," (string) 消息唯一 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (string) 结束事件是没有音频的，所以这里是空字符串"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (int) 创建时间戳，如：1705395332"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event: ping"})," 每 10s 一次的 ping 事件，保持连接存活。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"invalid_param"}),"，传入参数异常"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"app_unavailable"}),"，App 配置不可用"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"provider_not_initialize"}),"，无可用模型凭据配置"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"provider_quota_exceeded"}),"，模型调用额度不足"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"model_currently_not_support"}),"，当前模型不可用"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"workflow_not_found"}),"，指定的工作流版本未找到"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"draft_workflow_error"}),"，无法使用草稿工作流版本"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"workflow_id_format_error"}),"，工作流ID格式错误，需要UUID格式"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"workflow_request_error"}),"，workflow 执行失败"]}),"\n",(0,r.jsx)(n.li,{children:"500，服务内部异常"}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/workflows/:workflow_id/run",targetCode:`curl -X POST '${e.appDetail.api_base_url}/workflows/{workflow_id}/run' \\
--header 'Authorization: Bearer {api_key}' \\
--header 'Content-Type: application/json' \\
--data-raw '{
  "inputs": ${JSON.stringify(e.inputs)},
  "response_mode": "streaming",
  "user": "abc-123"
}'`}),(0,r.jsx)(eu,{title:"Example: file array as an input variable",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "inputs": {\n    "{variable_name}":\n    [\n      {\n      "transfer_method": "local_file",\n      "upload_file_id": "{upload_file_id}",\n      "type": "{document_type}"\n      }\n    ]\n  }\n}\n'})})}),(0,r.jsx)(n.h3,{children:"Blocking Mode"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "workflow_run_id": "djflajgkldjgd",\n    "task_id": "9da23599-e713-473b-982c-4328d4f5c78a",\n    "data": {\n        "id": "fdlsjfjejkghjda",\n        "workflow_id": "fldjaslkfjlsda",\n        "status": "succeeded",\n        "outputs": {\n          "text": "Nice to meet you."\n        },\n        "error": null,\n        "elapsed_time": 0.875,\n        "total_tokens": 3562,\n        "total_steps": 8,\n        "created_at": 1705407629,\n        "finished_at": 1727807631\n    }\n}\n'})})}),(0,r.jsx)(n.h3,{children:"Streaming Mode"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-streaming",children:'  data: {"event": "workflow_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "created_at": 1679586595}}\n  data: {"event": "node_started", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "created_at": 1679586595}}\n  data: {"event": "node_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "node_id": "dfjasklfjdslag", "node_type": "start", "title": "Start", "index": 0, "predecessor_node_id": "fdljewklfklgejlglsd", "inputs": {}, "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "execution_metadata": {"total_tokens": 63127864, "total_price": 2.378, "currency": "USD"},  "created_at": 1679586595}}\n  data: {"event": "workflow_finished", "task_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "workflow_run_id": "5ad498-f0c7-4085-b384-88cbe6290", "data": {"id": "5ad498-f0c7-4085-b384-88cbe6290", "workflow_id": "dfjasklfjdslag", "outputs": {}, "status": "succeeded", "elapsed_time": 0.324, "total_tokens": 63127864, "total_steps": "1", "created_at": 1679586595, "finished_at": 1679976595}}\n  data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}\n  data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/workflows/run/:workflow_run_id",method:"GET",title:"获取 Workflow 执行情况",name:"#get-workflow-run-detail"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"根据 workflow 执行 ID 获取 workflow 任务当前执行结果"}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run_id"})," (string) workflow 执行 ID，可在流式返回 Chunk 中获取"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) workflow 执行 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," (string) 关联的 Workflow ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 执行状态 ",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inputs"})," (json) 任务输入内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"outputs"})," (json) 任务输出内容"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) 错误原因"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) 任务执行总步数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) 任务执行总 tokens"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 任务开始时间"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) 任务结束时间"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) 耗时 (s)"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"Request Example"}),(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/workflows/run/:workflow_run_id",targetCode:`curl -X GET '${e.appDetail.api_base_url}/workflows/run/:workflow_run_id' \\
-H 'Authorization: Bearer {api_key}' \\
-H 'Content-Type: application/json'`}),(0,r.jsx)(n.h3,{children:"Response Example"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "id": "b1ad3277-089e-42c6-9dff-6820d94fbc76",\n    "workflow_id": "19eff89f-ec03-4f75-b0fc-897e7effea02",\n    "status": "succeeded",\n    "inputs": "{\\"sys.files\\": [], \\"sys.user_id\\": \\"abc-123\\"}",\n    "outputs": null,\n    "error": null,\n    "total_steps": 3,\n    "total_tokens": 0,\n    "created_at": 1705407629,\n    "finished_at": 1727807631,\n    "elapsed_time": 30.098514399956912\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/workflows/tasks/:task_id/stop",method:"POST",title:"停止响应",name:"#stop-generatebacks"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"仅支持流式模式。"}),(0,r.jsx)(n.h3,{children:"Path"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task_id"})," (string) 任务 ID，可在流式返回 Chunk 中获取"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string) Required\n用户标识，用于定义终端用户的身份，必须和发送消息接口传入 user 保持一致。API 无法访问 WebApp 创建的会话。"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"result"}),' (string) 固定返回 "success"']}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(n.h3,{children:"Request Example"}),(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/workflows/tasks/:task_id/stop",targetCode:`curl -X POST '${e.appDetail.api_base_url}/workflows/tasks/:task_id/stop' \\
-H 'Authorization: Bearer {api_key}' \\
-H 'Content-Type: application/json' \\
--data-raw '{"user": "abc-123"}'`}),(0,r.jsx)(n.h3,{children:"Response Example"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "result": "success"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/files/upload",method:"POST",title:"上传文件",name:"#files-upload"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsxs)(n.p,{children:["上传文件并在发送消息时使用，可实现图文多模态理解。\n支持您的工作流程所支持的任何格式。\n",(0,r.jsx)("i",{children:"上传的文件仅供当前终端用户使用。"})]}),(0,r.jsx)(n.h3,{children:"Request Body"}),(0,r.jsxs)(n.p,{children:["该接口需使用  ",(0,r.jsx)(n.code,{children:"multipart/form-data"})," 进行请求。"]}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"file",type:"file",children:(0,r.jsx)(n.p,{children:"要上传的文件。"})},"file"),(0,r.jsx)(ef,{name:"user",type:"string",children:(0,r.jsx)(n.p,{children:"用户标识，用于定义终端用户的身份，必须和发送消息接口传入 user 保持一致。服务 API 不会共享 WebApp 创建的对话。"})},"user")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsx)(n.p,{children:"成功上传后，服务器会返回文件的 ID 和相关信息。"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (uuid) ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 文件名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"size"})," (int) 文件大小（byte）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"extension"})," (string) 文件后缀"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mime_type"})," (string) 文件 mime-type"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by"})," (uuid) 上传人 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 上传时间"]}),"\n"]}),(0,r.jsx)(n.h3,{children:"Errors"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"no_file_uploaded"}),"，必须提供文件"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"too_many_files"}),"，目前只接受一个文件"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"unsupported_preview"}),"，该文件不支持预览"]}),"\n",(0,r.jsxs)(n.li,{children:["400，",(0,r.jsx)(n.code,{children:"unsupported_estimate"}),"，该文件不支持估算"]}),"\n",(0,r.jsxs)(n.li,{children:["413，",(0,r.jsx)(n.code,{children:"file_too_large"}),"，文件太大"]}),"\n",(0,r.jsxs)(n.li,{children:["415，",(0,r.jsx)(n.code,{children:"unsupported_file_type"}),"，不支持的扩展名，当前只接受文档类文件"]}),"\n",(0,r.jsxs)(n.li,{children:["503，",(0,r.jsx)(n.code,{children:"s3_connection_failed"}),"，无法连接到 S3 服务"]}),"\n",(0,r.jsxs)(n.li,{children:["503，",(0,r.jsx)(n.code,{children:"s3_permission_denied"}),"，无权限上传文件到 S3"]}),"\n",(0,r.jsxs)(n.li,{children:["503，",(0,r.jsx)(n.code,{children:"s3_file_too_large"}),"，文件超出 S3 大小限制"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"POST",label:"/files/upload",targetCode:`curl -X POST '${e.appDetail.api_base_url}/files/upload' \\
--header 'Authorization: Bearer {api_key}' \\
--form 'file=@localfile;type=image/[png|jpeg|jpg|webp|gif]' \\
--form 'user=abc-123'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "72fa9618-8f89-4a37-9b33-7e1178a24a67",\n  "name": "example.png",\n  "size": 1024,\n  "extension": "png",\n  "mime_type": "image/png",\n  "created_by": 123,\n  "created_at": 1577836800,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/workflows/logs",method:"GET",title:"获取 Workflow 日志",name:"#Get-Workflow-Logs"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"倒序返回 workflow 日志"}),(0,r.jsx)(n.h3,{children:"Query"}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{name:"keyword",type:"string",children:(0,r.jsx)(n.p,{children:"关键字"})},"keyword"),(0,r.jsx)(ef,{name:"status",type:"string",children:(0,r.jsx)(n.p,{children:"执行状态 succeeded/failed/stopped"})},"status"),(0,r.jsx)(ef,{name:"page",type:"int",children:(0,r.jsx)(n.p,{children:"当前页码, 默认1."})},"page"),(0,r.jsx)(ef,{name:"limit",type:"int",children:(0,r.jsx)(n.p,{children:"每页条数, 默认20."})},"limit"),(0,r.jsx)(ef,{name:"created_by_end_user_session_id",type:"str",children:(0,r.jsxs)(n.p,{children:["由哪个endUser创建，例如，",(0,r.jsx)(n.code,{children:"abc-123"}),"."]})},"created_by_end_user_session_id"),(0,r.jsx)(ef,{name:"created_by_account",type:"str",children:(0,r.jsx)(n.p,{children:"由哪个邮箱账户创建，例如，lizb@test.com."})},"created_by_account")]}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"page"})," (int) 当前页码"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (int) 每页条数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total"})," (int) 总条数"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"has_more"})," (bool) 是否还有更多数据"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (array[object]) 当前页码的数据","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) 标识"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_run"})," (object) Workflow 执行日志","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) 标识"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"version"})," (string) 版本"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status"})," (string) 执行状态，",(0,r.jsx)(n.code,{children:"running"})," / ",(0,r.jsx)(n.code,{children:"succeeded"})," / ",(0,r.jsx)(n.code,{children:"failed"})," / ",(0,r.jsx)(n.code,{children:"stopped"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"error"})," (string) (可选) 错误"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"elapsed_time"})," (float) 耗时，单位秒"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_tokens"})," (int) 消耗的 token 数量"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"total_steps"})," (int) 执行步骤长度"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 开始时间"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"finished_at"})," (timestamp) 结束时间"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_from"})," (string) 来源"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by_role"})," (string) 角色"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by_account"})," (string) (可选) 帐号"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_by_end_user"})," (object) 用户","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"})," (string) 标识"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," (string) 类型"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"is_anonymous"})," (bool) 是否匿名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"session_id"})," (string) 会话标识"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"created_at"})," (timestamp) 创建时间"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/workflows/logs",targetCode:`curl -X GET '${e.appDetail.api_base_url}/workflows/logs'\\
--header 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(n.h3,{children:"Response Example"}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "page": 1,\n    "limit": 1,\n    "total": 7,\n    "has_more": true,\n    "data": [\n        {\n            "id": "e41b93f1-7ca2-40fd-b3a8-999aeb499cc0",\n            "workflow_run": {\n                "id": "c0640fc8-03ef-4481-a96c-8a13b732a36e",\n                "version": "2024-08-01 12:17:09.771832",\n                "status": "succeeded",\n                "error": null,\n                "elapsed_time": 1.3588523610014818,\n                "total_tokens": 0,\n                "total_steps": 3,\n                "created_at": 1726139643,\n                "finished_at": 1726139644\n            },\n            "created_from": "service-api",\n            "created_by_role": "end_user",\n            "created_by_account": null,\n            "created_by_end_user": {\n                "id": "7f7d9117-dd9d-441d-8970-87e5e7e687a3",\n                "type": "service_api",\n                "is_anonymous": false,\n                "session_id": "abc-123"\n            },\n            "created_at": 1726139644\n        }\n    ]\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/info",method:"GET",title:"获取应用基本信息",name:"#info"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"用于获取应用的基本信息"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," (string) 应用名称"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 应用描述"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tags"})," (array[string]) 应用标签"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"})," (string) 应用模式"]}),"\n",(0,r.jsx)(n.li,{children:"'author_name' (string) 作者名称"}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/info",targetCode:`curl -X GET '${e.appDetail.api_base_url}/info' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "My App",\n  "description": "This is my app.",\n  "tags": [\n    "tag1",\n    "tag2"\n  ],\n  "mode": "workflow",\n  "author_name": "Dify"\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/parameters",method:"GET",title:"获取应用参数",name:"#parameters"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"用于进入页面一开始，获取功能开关、输入参数名称、类型及默认值等使用。"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user_input_form"})," (array[object]) 用户输入表单配置","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"text-input"})," (object) 文本输入控件","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 控件展示标签名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 控件 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 是否必填"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) 默认值"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"paragraph"})," (object) 段落文本输入控件","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 控件展示标签名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 控件 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 是否必填"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) 默认值"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"select"})," (object) 下拉控件","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"})," (string) 控件展示标签名"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"variable"})," (string) 控件 ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"required"})," (bool) 是否必填"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"})," (string) 默认值"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"options"})," (array[string]) 选项值"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_upload"})," (object) 文件上传配置","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document"})," (object) 文档设置\n当前仅支持文档类型：",(0,r.jsx)(n.code,{children:"txt"}),", ",(0,r.jsx)(n.code,{children:"md"}),", ",(0,r.jsx)(n.code,{children:"markdown"}),", ",(0,r.jsx)(n.code,{children:"pdf"}),", ",(0,r.jsx)(n.code,{children:"html"}),", ",(0,r.jsx)(n.code,{children:"xlsx"}),", ",(0,r.jsx)(n.code,{children:"xls"}),", ",(0,r.jsx)(n.code,{children:"docx"}),", ",(0,r.jsx)(n.code,{children:"csv"}),", ",(0,r.jsx)(n.code,{children:"eml"}),", ",(0,r.jsx)(n.code,{children:"msg"}),", ",(0,r.jsx)(n.code,{children:"pptx"}),", ",(0,r.jsx)(n.code,{children:"ppt"}),", ",(0,r.jsx)(n.code,{children:"xml"}),", ",(0,r.jsx)(n.code,{children:"epub"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 文档数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"})," (object) 图片设置\n当前仅支持图片类型：",(0,r.jsx)(n.code,{children:"png"}),", ",(0,r.jsx)(n.code,{children:"jpg"}),", ",(0,r.jsx)(n.code,{children:"jpeg"}),", ",(0,r.jsx)(n.code,{children:"webp"}),", ",(0,r.jsx)(n.code,{children:"gif"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 图片数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio"})," (object) 音频设置\n当前仅支持音频类型：",(0,r.jsx)(n.code,{children:"mp3"}),", ",(0,r.jsx)(n.code,{children:"m4a"}),", ",(0,r.jsx)(n.code,{children:"wav"}),", ",(0,r.jsx)(n.code,{children:"webm"}),", ",(0,r.jsx)(n.code,{children:"amr"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 音频数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video"})," (object) 视频设置\n当前仅支持视频类型：",(0,r.jsx)(n.code,{children:"mp4"}),", ",(0,r.jsx)(n.code,{children:"mov"}),", ",(0,r.jsx)(n.code,{children:"mpeg"}),", ",(0,r.jsx)(n.code,{children:"mpga"}),"。","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 视频数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom"})," (object) 自定义设置","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," (bool) 是否启用"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"number_limits"})," (int) 自定义数量限制，默认为 3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"transfer_methods"})," (array[string]) 传输方式列表：",(0,r.jsx)(n.code,{children:"remote_url"}),", ",(0,r.jsx)(n.code,{children:"local_file"}),"，必须选择一个。"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"system_parameters"})," (object) 系统参数","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file_size_limit"})," (int) 文档上传大小限制 (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image_file_size_limit"})," (int) 图片文件上传大小限制（MB）"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"audio_file_size_limit"})," (int) 音频文件上传大小限制 (MB)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"video_file_size_limit"})," (int) 视频文件上传大小限制 (MB)"]}),"\n"]}),"\n"]}),"\n"]})]}),(0,r.jsxs)(eg,{sticky:!0,children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/parameters",targetCode:` curl -X GET '${e.appDetail.api_base_url}/parameters'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "user_input_form": [\n      {\n          "paragraph": {\n              "label": "Query",\n              "variable": "query",\n              "required": true,\n              "default": ""\n          }\n      }\n  ],\n  "file_upload": {\n      "image": {\n          "enabled": false,\n          "number_limits": 3,\n          "detail": "high",\n          "transfer_methods": [\n              "remote_url",\n              "local_file"\n          ]\n      }\n  },\n  "system_parameters": {\n      "file_size_limit": 15,\n      "image_file_size_limit": 10,\n      "audio_file_size_limit": 50,\n      "video_file_size_limit": 100\n  }\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(e_,{url:"/site",method:"GET",title:"获取应用 WebApp 设置",name:"#site"}),"\n",(0,r.jsxs)(em,{children:[(0,r.jsxs)(eg,{children:[(0,r.jsx)(n.p,{children:"用于获取应用的 WebApp 设置"}),(0,r.jsx)(n.h3,{children:"Response"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"title"})," (string) WebApp 名称"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_type"})," (string) 图标类型，",(0,r.jsx)(n.code,{children:"emoji"}),"-表情，",(0,r.jsx)(n.code,{children:"image"}),"-图片"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon"})," (string) 图标，如果是 ",(0,r.jsx)(n.code,{children:"emoji"})," 类型，则是 emoji 表情符号，如果是 ",(0,r.jsx)(n.code,{children:"image"})," 类型，则是图片 URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_background"})," (string) hex 格式的背景色"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"icon_url"})," (string) 图标 URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"description"})," (string) 描述"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"copyright"})," (string) 版权信息"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"privacy_policy"})," (string) 隐私政策链接"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"custom_disclaimer"})," (string) 自定义免责声明"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default_language"})," (string) 默认语言"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"show_workflow_steps"})," (bool) 是否显示工作流详情"]}),"\n"]})]}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(eu,{title:"Request",tag:"GET",label:"/site",targetCode:`curl -X GET '${e.appDetail.api_base_url}/site' \\
-H 'Authorization: Bearer {api_key}'`}),(0,r.jsx)(eu,{title:"Response",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "title": "My App",\n  "icon_type": "emoji",\n  "icon": "😄",\n  "icon_background": "#FFEAD5",\n  "icon_url": null,\n  "description": "This is my app.",\n  "copyright": "all rights reserved",\n  "privacy_policy": "",\n  "custom_disclaimer": "All generated by AI",\n  "default_language": "en-US",\n  "show_workflow_steps": false,\n}\n'})})})]})]}),"\n",(0,r.jsx)(n.hr,{})]})}function eX(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...b(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(eW,{...e})}):eW(e)}let eH=e=>{let{appDetail:n}=e,s=(0,j.useLocale)(),{t:i}=(0,c.useTranslation)(),[d,l]=(0,x.useState)([]),[t,a]=(0,x.useState)(!1),[o,g]=(0,x.useState)(""),{theme:b}=(0,p.default)(),f=n?.model_config?.configs?.prompt_variables||[],q=f.reduce((e,n)=>(e[n.key]=n.name||"",e),{});(0,x.useEffect)(()=>{a(window.matchMedia("(min-width: 1280px)").matches)},[]),(0,x.useEffect)(()=>{setTimeout(()=>{let e=document.querySelector("article");if(e){let n=Array.from(e.querySelectorAll("h2")).map(e=>{let n=e.querySelector("a");return n?{href:n.getAttribute("href")||"",text:n.textContent||""}:null}).filter(e=>null!==e);l(n),n.length>0&&g(n[0].href.replace("#",""))}},0)},[n,s]),(0,x.useEffect)(()=>{let e=()=>{if(!document.querySelector(".overflow-auto")||0===d.length)return;let e="";d.forEach(n=>{let s=n.href.replace("#",""),i=document.getElementById(s);i&&i.getBoundingClientRect().top<=window.innerHeight/2&&(e=s)}),e&&e!==o&&g(e)},n=document.querySelector(".overflow-auto");if(n)return n.addEventListener("scroll",e),e(),()=>n.removeEventListener("scroll",e)},[d,o]);let y=(0,x.useMemo)(()=>{if(n?.mode===_.AppModeEnum.CHAT||n?.mode===_.AppModeEnum.AGENT_CHAT)switch(s){case u.LanguagesSupported[1]:return(0,r.jsx)(ez,{appDetail:n,variables:f,inputs:q});case u.LanguagesSupported[7]:return(0,r.jsx)(eB,{appDetail:n,variables:f,inputs:q});default:return(0,r.jsx)(eE,{appDetail:n,variables:f,inputs:q})}if(n?.mode===_.AppModeEnum.ADVANCED_CHAT)switch(s){case u.LanguagesSupported[1]:return(0,r.jsx)(eC,{appDetail:n,variables:f,inputs:q});case u.LanguagesSupported[7]:return(0,r.jsx)(eA,{appDetail:n,variables:f,inputs:q});default:return(0,r.jsx)(eI,{appDetail:n,variables:f,inputs:q})}if(n?.mode===_.AppModeEnum.WORKFLOW)switch(s){case u.LanguagesSupported[1]:return(0,r.jsx)(eX,{appDetail:n,variables:f,inputs:q});case u.LanguagesSupported[7]:return(0,r.jsx)(eL,{appDetail:n,variables:f,inputs:q});default:return(0,r.jsx)(eU,{appDetail:n,variables:f,inputs:q})}if(n?.mode===_.AppModeEnum.COMPLETION)switch(s){case u.LanguagesSupported[1]:return(0,r.jsx)(eT,{appDetail:n,variables:f,inputs:q});case u.LanguagesSupported[7]:return(0,r.jsx)(ek,{appDetail:n,variables:f,inputs:q});default:return(0,r.jsx)(ey,{appDetail:n,variables:f,inputs:q})}return null},[n,s,f,q]);return(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:`fixed right-20 top-32 z-10 transition-all duration-150 ease-out ${t?"w-[280px]":"w-11"}`,children:t?(0,r.jsxs)("nav",{className:"toc flex max-h-[calc(100vh-150px)] w-full flex-col overflow-hidden rounded-xl border-[0.5px] border-components-panel-border bg-background-default-hover shadow-xl",children:[(0,r.jsxs)("div",{className:"relative z-10 flex items-center justify-between border-b border-components-panel-border-subtle bg-background-default-hover px-4 py-2.5",children:[(0,r.jsx)("span",{className:"text-xs font-medium uppercase tracking-wide text-text-tertiary",children:i("develop.toc",{ns:"appApi"})}),(0,r.jsx)("button",{type:"button",onClick:()=>a(!1),className:"group flex h-6 w-6 items-center justify-center rounded-md transition-colors hover:bg-state-base-hover","aria-label":"Close",children:(0,r.jsx)(h.RiCloseLine,{className:"h-3 w-3 text-text-quaternary transition-colors group-hover:text-text-secondary"})})]}),(0,r.jsx)("div",{className:"from-components-panel-border-subtle/20 pointer-events-none absolute left-0 right-0 top-[41px] z-10 h-2 bg-gradient-to-b to-transparent"}),(0,r.jsx)("div",{className:"pointer-events-none absolute left-0 right-0 top-[43px] z-10 h-3 bg-gradient-to-b from-background-default-hover to-transparent"}),(0,r.jsx)("div",{className:"relative flex-1 overflow-y-auto px-3 py-3 pt-1",children:0===d.length?(0,r.jsx)("div",{className:"px-2 py-8 text-center text-xs text-text-quaternary",children:i("develop.noContent",{ns:"appApi"})}):(0,r.jsx)("ul",{className:"space-y-0.5",children:d.map((e,n)=>{let s=o===e.href.replace("#","");return(0,r.jsx)("li",{children:(0,r.jsxs)("a",{href:e.href,onClick:n=>((e,n)=>{e.preventDefault();let s=n.href.replace("#",""),i=document.getElementById(s);if(i){let e=document.querySelector(".overflow-auto");if(e){let n=i.offsetTop-80;e.scrollTo({top:n,behavior:"smooth"})}}})(n,e),className:(0,m.cn)("group relative flex items-center rounded-md px-3 py-2 text-[13px] transition-all duration-200",s?"bg-state-base-hover font-medium text-text-primary":"text-text-tertiary hover:bg-state-base-hover hover:text-text-secondary"),children:[(0,r.jsx)("span",{className:(0,m.cn)("mr-2 h-1.5 w-1.5 rounded-full transition-all duration-200",s?"scale-100 bg-text-accent":"scale-75 bg-components-panel-border")}),(0,r.jsx)("span",{className:"flex-1 truncate",children:e.text})]})},n)})})}),(0,r.jsx)("div",{className:"pointer-events-none absolute bottom-0 left-0 right-0 z-10 h-4 rounded-b-xl bg-gradient-to-t from-background-default-hover to-transparent"})]}):(0,r.jsx)("button",{type:"button",onClick:()=>a(!0),className:"group flex h-11 w-11 items-center justify-center rounded-full border-[0.5px] border-components-panel-border bg-components-panel-bg shadow-lg transition-all duration-150 hover:bg-background-default-hover hover:shadow-xl","aria-label":"Open table of contents",children:(0,r.jsx)(h.RiListUnordered,{className:"h-5 w-5 text-text-tertiary transition-colors group-hover:text-text-secondary"})})}),(0,r.jsx)("article",{className:(0,m.cn)("prose-xl prose",b===_.Theme.dark&&"prose-invert"),children:y})]})};e.s(["default",0,e=>{let{appId:n}=e,s=(0,d.useStore)(e=>e.appDetail);return s?(0,r.jsxs)("div",{className:"relative flex h-full flex-col overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex shrink-0 items-center justify-between border-b border-solid border-b-divider-regular px-6 py-2",children:[(0,r.jsx)("div",{className:"text-lg font-medium text-text-primary"}),(0,r.jsx)(o,{apiBaseUrl:s.api_base_url,appId:n})]}),(0,r.jsx)("div",{className:"grow overflow-auto px-4 py-4 sm:px-10",children:(0,r.jsx)(eH,{appDetail:s})})]}):(0,r.jsx)("div",{className:"flex h-full items-center justify-center bg-background-default",children:(0,r.jsx)(l.default,{})})}],291758)}]);