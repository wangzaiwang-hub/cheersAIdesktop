(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,653356,e=>{"use strict";var t=e.i(268255);let n=t.forwardRef(function(e,n){let{title:o,titleId:i,...a}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":i},a),o?t.createElement("title",{id:i},o):null,t.createElement("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"}))});e.s(["XMarkIcon",0,n],653356)},789604,882568,702941,516457,e=>{"use strict";let t,n,o,i;var a=e.i(182370),s=e.i(725968),r=e.i(268255),l=e.i(688393),d=e.i(876581);function u(e,t){return null!==e&&null!==t&&"object"==typeof e&&"object"==typeof t&&"id"in e&&"id"in t?e.id===t.id:e===t}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return(0,r.useCallback)((t,n)=>"string"==typeof e?(null==t?void 0:t[e])===(null==n?void 0:n[e]):e(t,n),[e])}e.s(["useByComparator",()=>c],882568);var p=e.i(614653),m=e.i(125234),x=e.i(97986),f=e.i(969350),v=e.i(589393),b=e.i(71216),g=e.i(741064),h=e.i(782165),y=e.i(518836),E=e.i(775885),S=e.i(122783),w=e.i(944296),C=e.i(777009),O=e.i(135477),j=e.i(329512),_=e.i(720048),N=e.i(326898),R=e.i(988851),k=e.i(602652),I=e.i(939895),D=e.i(274406);function L(e){let{children:t,freeze:n}=e,o=P(n,t);return r.default.createElement(r.default.Fragment,null,o)}function P(e,t){let[n,o]=(0,r.useState)(t);return e||n===t||o(t),e?n:t}e.s(["Frozen",()=>L,"useFrozenData",()=>P],702941);var F=e.i(344554),T=e.i(268850),M=e.i(294662),A=e.i(162023),B=e.i(708684),K=e.i(455028),z=e.i(330620),V=e.i(652038),H=e.i(875880),U=e.i(858023),q=e.i(869873),Q=e.i(198136),$=e.i(90158),W=e.i(642330),G=((t=G||{})[t.Open=0]="Open",t[t.Closed=1]="Closed",t),Z=((n=Z||{})[n.Single=0]="Single",n[n.Multi=1]="Multi",n),X=((o=X||{})[o.Pointer=0]="Pointer",o[o.Other=1]="Other",o),J=((i=J||{})[i.OpenListbox=0]="OpenListbox",i[i.CloseListbox=1]="CloseListbox",i[i.GoToOption=2]="GoToOption",i[i.Search=3]="Search",i[i.ClearSearch=4]="ClearSearch",i[i.RegisterOption=5]="RegisterOption",i[i.UnregisterOption=6]="UnregisterOption",i[i.SetButtonElement=7]="SetButtonElement",i[i.SetOptionsElement=8]="SetOptionsElement",i);function Y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e,n=null!==e.activeOptionIndex?e.options[e.activeOptionIndex]:null,o=(0,K.sortByDomNode)(t(e.options.slice()),e=>e.dataRef.current.domRef.current),i=n?o.indexOf(n):null;return -1===i&&(i=null),{options:o,activeOptionIndex:i}}let ee={1:e=>e.dataRef.current.disabled||1===e.listboxState?e:{...e,activeOptionIndex:null,listboxState:1,__demoMode:!1},0(e){if(e.dataRef.current.disabled||0===e.listboxState)return e;let t=e.activeOptionIndex,{isSelected:n}=e.dataRef.current,o=e.options.findIndex(e=>n(e.dataRef.current.value));return -1!==o&&(t=o),{...e,listboxState:0,activeOptionIndex:t,__demoMode:!1}},2(e,t){var n,o,i,a,s;if(e.dataRef.current.disabled||1===e.listboxState)return e;let r={...e,searchQuery:"",activationTrigger:null!=(n=t.trigger)?n:1,__demoMode:!1};if(t.focus===A.Focus.Nothing)return{...r,activeOptionIndex:null};if(t.focus===A.Focus.Specific)return{...r,activeOptionIndex:e.options.findIndex(e=>e.id===t.id)};if(t.focus===A.Focus.Previous){let n=e.activeOptionIndex;if(null!==n){let a=e.options[n].dataRef.current.domRef,s=(0,A.calculateActiveIndex)(t,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});if(null!==s){let t=e.options[s].dataRef.current.domRef;if((null==(o=a.current)?void 0:o.previousElementSibling)===t.current||(null==(i=t.current)?void 0:i.previousElementSibling)===null)return{...r,activeOptionIndex:s}}}}else if(t.focus===A.Focus.Next){let n=e.activeOptionIndex;if(null!==n){let o=e.options[n].dataRef.current.domRef,i=(0,A.calculateActiveIndex)(t,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});if(null!==i){let t=e.options[i].dataRef.current.domRef;if((null==(a=o.current)?void 0:a.nextElementSibling)===t.current||(null==(s=t.current)?void 0:s.nextElementSibling)===null)return{...r,activeOptionIndex:i}}}}let l=Y(e),d=(0,A.calculateActiveIndex)(t,{resolveItems:()=>l.options,resolveActiveIndex:()=>l.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return{...r,...l,activeOptionIndex:d}},3:(e,t)=>{if(e.dataRef.current.disabled||1===e.listboxState)return e;let n=+(""===e.searchQuery),o=e.searchQuery+t.value.toLowerCase(),i=(null!==e.activeOptionIndex?e.options.slice(e.activeOptionIndex+n).concat(e.options.slice(0,e.activeOptionIndex+n)):e.options).find(e=>{var t;return!e.dataRef.current.disabled&&(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(o))}),a=i?e.options.indexOf(i):-1;return -1===a||a===e.activeOptionIndex?{...e,searchQuery:o}:{...e,searchQuery:o,activeOptionIndex:a,activationTrigger:1}},4:e=>e.dataRef.current.disabled||1===e.listboxState||""===e.searchQuery?e:{...e,searchQuery:""},5:(e,t)=>{let n={id:t.id,dataRef:t.dataRef},o=Y(e,e=>[...e,n]);return null===e.activeOptionIndex&&e.dataRef.current.isSelected(t.dataRef.current.value)&&(o.activeOptionIndex=o.options.indexOf(n)),{...e,...o}},6:(e,t)=>{let n=Y(e,e=>{let n=e.findIndex(e=>e.id===t.id);return -1!==n&&e.splice(n,1),e});return{...e,...n,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.optionsElement===t.element?e:{...e,optionsElement:t.element}},et=(0,r.createContext)(null);function en(e){let t=(0,r.useContext)(et);if(null===t){let t=Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,en),t}return t}et.displayName="ListboxActionsContext";let eo=(0,r.createContext)(null);function ei(e){let t=(0,r.useContext)(eo);if(null===t){let t=Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ei),t}return t}function ea(e,t){return(0,V.match)(t.type,ee,e,t)}eo.displayName="ListboxDataContext";let es=r.Fragment,er=(0,r.createContext)(!1),el=U.RenderFeatures.RenderStrategy|U.RenderFeatures.Static,ed=r.Fragment,eu=(0,U.forwardRefWithAs)(function(e,t){var n;let o=(0,k.useDisabled)(),{value:i,defaultValue:a,form:s,name:l,onChange:d,by:u,invalid:x=!1,disabled:v=o||!1,horizontal:g=!1,multiple:y=!1,__demoMode:E=!1,...w}=e,C=g?"horizontal":"vertical",O=(0,j.useSyncRefs)(t),_=(0,m.useDefaultValue)(a),[N=y?[]:void 0,R]=(0,p.useControllable)(i,d,_),[L,P]=(0,r.useReducer)(ea,{dataRef:(0,r.createRef)(),listboxState:+!E,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1,optionsVisible:!1,buttonElement:null,optionsElement:null,__demoMode:E}),F=(0,r.useRef)({static:!1,hold:!1}),M=(0,r.useRef)(new Map),B=c(u),z=(0,r.useCallback)(e=>(0,V.match)(H.mode,{1:()=>N.some(t=>B(t,e)),0:()=>B(N,e)}),[N]),H=(0,r.useMemo)(()=>({...L,value:N,disabled:v,invalid:x,mode:+!!y,orientation:C,compare:B,isSelected:z,optionsPropsRef:F,listRef:M}),[N,v,x,y,L,M]);(0,h.useIsoMorphicEffect)(()=>{L.dataRef.current=H},[H]);let q=0===H.listboxState;(0,S.useOutsideClick)(q,[H.buttonElement,H.optionsElement],(e,t)=>{var n;P({type:1}),(0,K.isFocusableElement)(t,K.FocusableMode.Loose)||(e.preventDefault(),null==(n=H.buttonElement)||n.focus())});let Q=(0,r.useMemo)(()=>({open:0===H.listboxState,disabled:v,invalid:x,value:N}),[H,v,N,x]),W=(0,b.useEvent)(e=>{let t=H.options.find(t=>t.id===e);t&&en(t.dataRef.current.value)}),G=(0,b.useEvent)(()=>{if(null!==H.activeOptionIndex){let{dataRef:e,id:t}=H.options[H.activeOptionIndex];en(e.current.value),P({type:2,focus:A.Focus.Specific,id:t})}}),Z=(0,b.useEvent)(()=>P({type:0})),X=(0,b.useEvent)(()=>P({type:1})),J=(0,f.useDisposables)(),Y=(0,b.useEvent)((e,t,n)=>{J.dispose(),J.microTask(()=>e===A.Focus.Specific?P({type:2,focus:A.Focus.Specific,id:t,trigger:n}):P({type:2,focus:e,trigger:n}))}),ee=(0,b.useEvent)((e,t)=>(P({type:5,id:e,dataRef:t}),()=>P({type:6,id:e}))),en=(0,b.useEvent)(e=>(0,V.match)(H.mode,{0:()=>null==R?void 0:R(e),1(){let t=H.value.slice(),n=t.findIndex(t=>B(t,e));return -1===n?t.push(e):t.splice(n,1),null==R?void 0:R(t)}})),ei=(0,b.useEvent)(e=>P({type:3,value:e})),er=(0,b.useEvent)(()=>P({type:4})),el=(0,b.useEvent)(e=>{P({type:7,element:e})}),ed=(0,b.useEvent)(e=>{P({type:8,element:e})}),eu=(0,r.useMemo)(()=>({onChange:en,registerOption:ee,goToOption:Y,closeListbox:X,openListbox:Z,selectActiveOption:G,selectOption:W,search:ei,clearSearch:er,setButtonElement:el,setOptionsElement:ed}),[]),[ec,ep]=(0,$.useLabels)({inherit:!0}),em=(0,r.useCallback)(()=>{if(void 0!==_)return null==R?void 0:R(_)},[R,_]),ex=(0,U.useRender)();return r.default.createElement(ep,{value:ec,props:{htmlFor:null==(n=H.buttonElement)?void 0:n.id},slot:{open:0===H.listboxState,disabled:v}},r.default.createElement(I.FloatingProvider,null,r.default.createElement(et.Provider,{value:eu},r.default.createElement(eo.Provider,{value:H},r.default.createElement(T.OpenClosedProvider,{value:(0,V.match)(H.listboxState,{0:T.State.Open,1:T.State.Closed})},null!=l&&null!=N&&r.default.createElement(D.FormFields,{disabled:v,data:{[l]:N},form:s,onReset:em}),ex({ourProps:{ref:O},theirProps:w,slot:Q,defaultTag:es,name:"Listbox"}))))))}),ec=(0,U.forwardRefWithAs)(function(e,t){var n;let o=ei("Listbox.Button"),i=en("Listbox.Button"),u=(0,r.useId)(),c=(0,F.useProvidedId)(),{id:p=c||`headlessui-listbox-button-${u}`,disabled:m=o.disabled||!1,autoFocus:x=!1,...f}=e,v=(0,j.useSyncRefs)(t,(0,I.useFloatingReference)(),i.setButtonElement),g=(0,I.useFloatingReferenceProps)(),h=(0,b.useEvent)(e=>{switch(e.key){case Q.Keys.Enter:(0,z.attemptSubmit)(e.currentTarget);break;case Q.Keys.Space:case Q.Keys.ArrowDown:e.preventDefault(),(0,l.flushSync)(()=>i.openListbox()),o.value||i.goToOption(A.Focus.First);break;case Q.Keys.ArrowUp:e.preventDefault(),(0,l.flushSync)(()=>i.openListbox()),o.value||i.goToOption(A.Focus.Last)}}),y=(0,b.useEvent)(e=>{e.key===Q.Keys.Space&&e.preventDefault()}),E=(0,b.useEvent)(e=>{var t;if((0,M.isDisabledReactIssue7711)(e.currentTarget))return e.preventDefault();0===o.listboxState?((0,l.flushSync)(()=>i.closeListbox()),null==(t=o.buttonElement)||t.focus({preventScroll:!0})):(e.preventDefault(),i.openListbox())}),S=(0,b.useEvent)(e=>e.preventDefault()),w=(0,$.useLabelledBy)([p]),O=(0,q.useDescribedBy)(),{isFocusVisible:_,focusProps:N}=(0,a.useFocusRing)({autoFocus:x}),{isHovered:R,hoverProps:k}=(0,s.useHover)({isDisabled:m}),{pressed:D,pressProps:L}=(0,d.useActivePress)({disabled:m}),P=(0,r.useMemo)(()=>({open:0===o.listboxState,active:D||0===o.listboxState,disabled:m,invalid:o.invalid,value:o.value,hover:R,focus:_,autofocus:x}),[o.listboxState,o.value,m,R,_,D,o.invalid,x]),T=(0,U.mergeProps)(g(),{ref:v,id:p,type:(0,C.useResolveButtonType)(e,o.buttonElement),"aria-haspopup":"listbox","aria-controls":null==(n=o.optionsElement)?void 0:n.id,"aria-expanded":0===o.listboxState,"aria-labelledby":w,"aria-describedby":O,disabled:m||void 0,autoFocus:x,onKeyDown:h,onKeyUp:y,onKeyPress:S,onClick:E},N,k,L);return(0,U.useRender)()({ourProps:T,theirProps:f,slot:P,defaultTag:"button",name:"Listbox.Button"})}),ep=$.Label,em=(0,U.forwardRefWithAs)(function(e,t){var n,o;let i=(0,r.useId)(),{id:a=`headlessui-listbox-options-${i}`,anchor:s,portal:d=!1,modal:u=!0,transition:c=!1,...p}=e,m=(0,I.useResolvedAnchor)(s),[h,y]=(0,r.useState)(null);m&&(d=!0);let S=ei("Listbox.Options"),C=en("Listbox.Options"),_=(0,w.useOwnerDocument)(S.buttonElement),N=(0,w.useOwnerDocument)(S.optionsElement),k=(0,T.useOpenClosed)(),[D,L]=(0,R.useTransition)(c,h,null!==k?(k&T.State.Open)===T.State.Open:0===S.listboxState);(0,E.useOnDisappear)(D,S.buttonElement,C.closeListbox);let F=!S.__demoMode&&u&&0===S.listboxState;(0,O.useScrollLock)(F,N);let M=!S.__demoMode&&u&&0===S.listboxState;(0,g.useInertOthers)(M,{allowed:(0,r.useCallback)(()=>[S.buttonElement,S.optionsElement],[S.buttonElement,S.optionsElement])});let B=0!==S.listboxState,z=!(0,x.useDidElementMove)(B,S.buttonElement)&&D,q=P(D&&1===S.listboxState,S.value),$=(0,b.useEvent)(e=>S.compare(q,e)),G=(0,r.useMemo)(()=>{var e;if(null==m||!(null!=(e=null==m?void 0:m.to)&&e.includes("selection")))return null;let t=S.options.findIndex(e=>$(e.dataRef.current.value));return -1===t&&(t=0),t},[m,S.options]),Z=(()=>{if(null==m)return;if(null===G)return{...m,inner:void 0};let e=Array.from(S.listRef.current.values());return{...m,inner:{listRef:{current:e},index:G}}})(),[X,J]=(0,I.useFloatingPanel)(Z),Y=(0,I.useFloatingPanelProps)(),ee=(0,j.useSyncRefs)(t,m?X:null,C.setOptionsElement,y),et=(0,f.useDisposables)();(0,r.useEffect)(()=>{var e;let t=S.optionsElement;t&&0===S.listboxState&&t!==(null==(e=(0,H.getOwnerDocument)(t))?void 0:e.activeElement)&&(null==t||t.focus({preventScroll:!0}))},[S.listboxState,S.optionsElement]);let ea=(0,b.useEvent)(e=>{var t,n;switch(et.dispose(),e.key){case Q.Keys.Space:if(""!==S.searchQuery)return e.preventDefault(),e.stopPropagation(),C.search(e.key);case Q.Keys.Enter:if(e.preventDefault(),e.stopPropagation(),null!==S.activeOptionIndex){let{dataRef:e}=S.options[S.activeOptionIndex];C.onChange(e.current.value)}0===S.mode&&((0,l.flushSync)(()=>C.closeListbox()),null==(t=S.buttonElement)||t.focus({preventScroll:!0}));break;case(0,V.match)(S.orientation,{vertical:Q.Keys.ArrowDown,horizontal:Q.Keys.ArrowRight}):return e.preventDefault(),e.stopPropagation(),C.goToOption(A.Focus.Next);case(0,V.match)(S.orientation,{vertical:Q.Keys.ArrowUp,horizontal:Q.Keys.ArrowLeft}):return e.preventDefault(),e.stopPropagation(),C.goToOption(A.Focus.Previous);case Q.Keys.Home:case Q.Keys.PageUp:return e.preventDefault(),e.stopPropagation(),C.goToOption(A.Focus.First);case Q.Keys.End:case Q.Keys.PageDown:return e.preventDefault(),e.stopPropagation(),C.goToOption(A.Focus.Last);case Q.Keys.Escape:e.preventDefault(),e.stopPropagation(),(0,l.flushSync)(()=>C.closeListbox()),null==(n=S.buttonElement)||n.focus({preventScroll:!0});return;case Q.Keys.Tab:e.preventDefault(),e.stopPropagation(),(0,l.flushSync)(()=>C.closeListbox()),(0,K.focusFrom)(S.buttonElement,e.shiftKey?K.Focus.Previous:K.Focus.Next);break;default:1===e.key.length&&(C.search(e.key),et.setTimeout(()=>C.clearSearch(),350))}}),es=null==(n=S.buttonElement)?void 0:n.id,er=(0,r.useMemo)(()=>({open:0===S.listboxState}),[S.listboxState]),ed=(0,U.mergeProps)(m?Y():{},{id:a,ref:ee,"aria-activedescendant":null===S.activeOptionIndex||null==(o=S.options[S.activeOptionIndex])?void 0:o.id,"aria-multiselectable":1===S.mode||void 0,"aria-labelledby":es,"aria-orientation":S.orientation,onKeyDown:ea,role:"listbox",tabIndex:0===S.listboxState?0:void 0,style:{...p.style,...J,"--button-width":(0,v.useElementSize)(S.buttonElement,!0).width},...(0,R.transitionDataAttributes)(L)}),eu=(0,U.useRender)();return r.default.createElement(W.Portal,{enabled:!!d&&(e.static||D),ownerDocument:_},r.default.createElement(eo.Provider,{value:1===S.mode?S:{...S,isSelected:$}},eu({ourProps:ed,theirProps:p,slot:er,defaultTag:"div",features:el,visible:z,name:"Listbox.Options"})))}),ex=(0,U.forwardRefWithAs)(function(e,t){let n=(0,r.useId)(),{id:o=`headlessui-listbox-option-${n}`,disabled:i=!1,value:a,...s}=e,d=!0===(0,r.useContext)(er),u=ei("Listbox.Option"),c=en("Listbox.Option"),p=null!==u.activeOptionIndex&&u.options[u.activeOptionIndex].id===o,m=u.isSelected(a),x=(0,r.useRef)(null),f=(0,_.useTextValue)(x),v=(0,y.useLatestValue)({disabled:i,value:a,domRef:x,get textValue(){return f()}}),g=(0,j.useSyncRefs)(t,x,e=>{e?u.listRef.current.set(o,e):u.listRef.current.delete(o)});(0,h.useIsoMorphicEffect)(()=>{if(!u.__demoMode&&0===u.listboxState&&p&&0!==u.activationTrigger)return(0,B.disposables)().requestAnimationFrame(()=>{var e,t;null==(t=null==(e=x.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})},[x,p,u.__demoMode,u.listboxState,u.activationTrigger,u.activeOptionIndex]),(0,h.useIsoMorphicEffect)(()=>{if(!d)return c.registerOption(o,v)},[v,o,d]);let E=(0,b.useEvent)(e=>{var t;if(i)return e.preventDefault();c.onChange(a),0===u.mode&&((0,l.flushSync)(()=>c.closeListbox()),null==(t=u.buttonElement)||t.focus({preventScroll:!0}))}),S=(0,b.useEvent)(()=>{if(i)return c.goToOption(A.Focus.Nothing);c.goToOption(A.Focus.Specific,o)}),w=(0,N.useTrackedPointer)(),C=(0,b.useEvent)(e=>{w.update(e),!i&&(p||c.goToOption(A.Focus.Specific,o,0))}),O=(0,b.useEvent)(e=>{w.wasMoved(e)&&(i||p||c.goToOption(A.Focus.Specific,o,0))}),R=(0,b.useEvent)(e=>{w.wasMoved(e)&&(i||p&&c.goToOption(A.Focus.Nothing))}),k=(0,r.useMemo)(()=>({active:p,focus:p,selected:m,disabled:i,selectedOption:m&&d}),[p,m,i,d]),I=d?{}:{id:o,ref:g,role:"option",tabIndex:!0===i?void 0:-1,"aria-disabled":!0===i||void 0,"aria-selected":m,disabled:void 0,onClick:E,onFocus:S,onPointerEnter:C,onMouseEnter:C,onPointerMove:O,onMouseMove:O,onPointerLeave:R,onMouseLeave:R},D=(0,U.useRender)();return!m&&d?null:D({ourProps:I,theirProps:s,slot:k,defaultTag:"div",name:"Listbox.Option"})}),ef=Object.assign(eu,{Button:ec,Label:ep,Options:em,Option:ex,SelectedOption:(0,U.forwardRefWithAs)(function(e,t){let{options:n,placeholder:o,...i}=e,a={ref:(0,j.useSyncRefs)(t)},s=ei("ListboxSelectedOption"),l=(0,r.useMemo)(()=>({}),[]),d=void 0===s.value||null===s.value||1===s.mode&&Array.isArray(s.value)&&0===s.value.length,u=(0,U.useRender)();return r.default.createElement(er.Provider,{value:!0},u({ourProps:a,theirProps:{...i,children:r.default.createElement(r.default.Fragment,null,o&&d?o:n)},slot:l,defaultTag:ed,name:"ListboxSelectedOption"}))})});e.s(["Listbox",()=>ef,"ListboxButton",()=>ec,"ListboxOption",()=>ex,"ListboxOptions",()=>em],789604);let ev=r.forwardRef(function(e,t){let{title:n,titleId:o,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},i),n?r.createElement("title",{id:o},n):null,r.createElement("path",{fillRule:"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))});e.s(["ChevronDownIcon",0,ev],516457)},410893,e=>{"use strict";var t=e.i(797181);e.s(["ArrowUpRight",()=>t.default])},462505,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{id:"book-open-01"},children:[{type:"element",name:"path",attributes:{id:"Fill",opacity:"0.12",d:"M1 3.1C1 2.53995 1 2.25992 1.10899 2.04601C1.20487 1.85785 1.35785 1.70487 1.54601 1.60899C1.75992 1.5 2.03995 1.5 2.6 1.5H2.8C3.9201 1.5 4.48016 1.5 4.90798 1.71799C5.28431 1.90973 5.59027 2.21569 5.78201 2.59202C6 3.01984 6 3.5799 6 4.7V10.5L5.94997 10.425C5.60265 9.90398 5.42899 9.64349 5.19955 9.45491C4.99643 9.28796 4.76238 9.1627 4.5108 9.0863C4.22663 9 3.91355 9 3.28741 9H2.6C2.03995 9 1.75992 9 1.54601 8.89101C1.35785 8.79513 1.20487 8.64215 1.10899 8.45399C1 8.24008 1 7.96005 1 7.4V3.1Z",fill:"currentColor"},children:[]},{type:"element",name:"path",attributes:{id:"Icon",d:"M6 10.5L5.94997 10.425C5.60265 9.90398 5.42899 9.64349 5.19955 9.45491C4.99643 9.28796 4.76238 9.1627 4.5108 9.0863C4.22663 9 3.91355 9 3.28741 9H2.6C2.03995 9 1.75992 9 1.54601 8.89101C1.35785 8.79513 1.20487 8.64215 1.10899 8.45399C1 8.24008 1 7.96005 1 7.4V3.1C1 2.53995 1 2.25992 1.10899 2.04601C1.20487 1.85785 1.35785 1.70487 1.54601 1.60899C1.75992 1.5 2.03995 1.5 2.6 1.5H2.8C3.9201 1.5 4.48016 1.5 4.90798 1.71799C5.28431 1.90973 5.59027 2.21569 5.78201 2.59202C6 3.01984 6 3.5799 6 4.7M6 10.5V4.7M6 10.5L6.05003 10.425C6.39735 9.90398 6.57101 9.64349 6.80045 9.45491C7.00357 9.28796 7.23762 9.1627 7.4892 9.0863C7.77337 9 8.08645 9 8.71259 9H9.4C9.96005 9 10.2401 9 10.454 8.89101C10.6422 8.79513 10.7951 8.64215 10.891 8.45399C11 8.24008 11 7.96005 11 7.4V3.1C11 2.53995 11 2.25992 10.891 2.04601C10.7951 1.85785 10.6422 1.70487 10.454 1.60899C10.2401 1.5 9.96005 1.5 9.4 1.5H9.2C8.07989 1.5 7.51984 1.5 7.09202 1.71799C6.71569 1.90973 6.40973 2.21569 6.21799 2.59202C6 3.01984 6 3.5799 6 4.7",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},children:[]}]}]},name:"BookOpen01"})},50874,258703,e=>{"use strict";var t=e.i(563199),n=e.i(807324),o=e.i(462505);let i=e=>{let{ref:i,...a}=e;return(0,t.jsx)(n.default,{...a,ref:i,data:o.default})};i.displayName="BookOpen01",e.s([],50874),e.s(["BookOpen01",0,i],258703)},963636,e=>{"use strict";var t=e.i(563199),n=e.i(837699),o=e.i(268255);e.i(152567);var i=e.i(408767);e.i(668763);var a=e.i(410893),s=e.i(391185),r=e.i(59375),l=e.i(296124),d=e.i(652669);e.s(["default",0,e=>{let{value:u,onChange:c}=e,{t:p}=(0,i.useTranslation)(),[m,x]=(0,o.useState)(!1),{setShowAccountSettingModal:f,setShowApiBasedExtensionModal:v}=(0,l.useModalContext)(),{data:b,refetch:g}=(0,d.useApiBasedExtensions)(),h=b?.find(e=>e.id===u);return(0,t.jsxs)(s.PortalToFollowElem,{open:m,onOpenChange:x,placement:"bottom-start",offset:4,children:[(0,t.jsx)(s.PortalToFollowElemTrigger,{onClick:()=>x(e=>!e),className:"w-full",children:h?(0,t.jsxs)("div",{className:"flex h-9 cursor-pointer items-center justify-between rounded-lg bg-components-input-bg-normal pl-3 pr-2.5",children:[(0,t.jsx)("div",{className:"text-sm text-text-primary",children:h.name}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"mr-1.5 w-[270px] truncate text-right text-xs text-text-quaternary",children:h.api_endpoint}),(0,t.jsx)(n.RiArrowDownSLine,{className:`h-4 w-4 text-text-secondary ${!m&&"opacity-60"}`})]})]}):(0,t.jsxs)("div",{className:"flex h-9 cursor-pointer items-center justify-between rounded-lg bg-components-input-bg-normal pl-3 pr-2.5 text-sm text-text-quaternary",children:[p("apiBasedExtension.selector.placeholder",{ns:"common"}),(0,t.jsx)(n.RiArrowDownSLine,{className:`h-4 w-4 text-text-secondary ${!m&&"opacity-60"}`})]})}),(0,t.jsx)(s.PortalToFollowElemContent,{className:"z-[102] w-[calc(100%-32px)] max-w-[576px]",children:(0,t.jsxs)("div",{className:"z-10 w-full rounded-lg border-[0.5px] border-components-panel-border bg-components-panel-bg shadow-lg",children:[(0,t.jsxs)("div",{className:"p-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-3 pb-1 pt-2",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-text-tertiary",children:p("apiBasedExtension.selector.title",{ns:"common"})}),(0,t.jsxs)("div",{className:"flex cursor-pointer items-center text-xs text-text-accent",onClick:()=>{x(!1),f({payload:r.ACCOUNT_SETTING_TAB.API_BASED_EXTENSION})},children:[p("apiBasedExtension.selector.manage",{ns:"common"}),(0,t.jsx)(a.ArrowUpRight,{className:"ml-0.5 h-3 w-3"})]})]}),(0,t.jsx)("div",{className:"max-h-[250px] overflow-y-auto",children:b?.map(e=>(0,t.jsxs)("div",{className:"w-full cursor-pointer rounded-md px-3 py-1.5 text-left hover:stroke-state-base-hover",onClick:()=>{c(e.id),x(!1)},children:[(0,t.jsx)("div",{className:"text-sm text-text-primary",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-text-tertiary",children:e.api_endpoint})]},e.id))})]}),(0,t.jsx)("div",{className:"h-px bg-divider-regular"}),(0,t.jsx)("div",{className:"p-1",children:(0,t.jsxs)("div",{className:"flex h-8 cursor-pointer items-center px-3 text-sm text-text-accent",onClick:()=>{x(!1),v({payload:{},onSaveCallback:()=>g()})},children:[(0,t.jsx)(n.RiAddLine,{className:"mr-2 h-4 w-4"}),p("operation.add",{ns:"common"})]})})]})})]})}])},740083,e=>{"use strict";var t=e.i(563199),n=e.i(299951),o=e.i(873517),i=e.i(683257);e.s(["default",0,e=>{let{forms:a,value:s,onChange:r}=e,l=(0,i.useLocale)(),d=(e,t)=>{r({...s,[e]:t})};return(0,t.jsx)(t.Fragment,{children:a.map((e,i)=>(0,t.jsxs)("div",{className:"py-2",children:[(0,t.jsx)("div",{className:"flex h-9 items-center text-sm font-medium text-text-primary",children:"zh-Hans"===l?e.label["zh-Hans"]:e.label["en-US"]}),"text-input"===e.type&&(0,t.jsx)("input",{value:s?.[e.variable]||"",className:"block h-9 w-full appearance-none rounded-lg bg-components-input-bg-normal px-3 text-sm text-text-primary outline-none",placeholder:e.placeholder,onChange:t=>d(e.variable,t.target.value)}),"paragraph"===e.type&&(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)(o.default,{className:"resize-none",value:s?.[e.variable]||"",placeholder:e.placeholder,onChange:t=>d(e.variable,t.target.value)})}),"select"===e.type&&(0,t.jsx)(n.PortalSelect,{value:s?.[e.variable],items:e.options.map(e=>({name:e.label["zh-Hans"===l?"zh-Hans":"en-US"],value:e.value})),onSelect:t=>d(e.variable,t.value),popupClassName:"w-[576px] !z-[102]"})]},i))})}])},139574,e=>{"use strict";var t=e.i(563199),n=e.i(837699),o=e.i(124836),i=e.i(268255);e.i(152567);var a=e.i(408767),s=e.i(151094),r=e.i(757198);e.i(50874);var l=e.i(258703);e.i(47690);var d=e.i(218043),d=d,u=e.i(21151),c=e.i(137667),p=e.i(963636),m=e.i(59375),x=e.i(739255),f=e.i(683257),v=e.i(296124),b=e.i(491234),g=e.i(652669),h=e.i(935139),y=e.i(740083),E=e.i(260484);let S=e=>{let{title:n,info:o,showPreset:i=!0,config:s,onConfigChange:r}=e,{t:l}=(0,a.useTranslation)(),d=(e,t)=>{"preset_response"===e&&"string"==typeof t&&(t=t.slice(0,100)),r({...s,[e]:t})};return(0,t.jsx)("div",{className:"py-2",children:(0,t.jsxs)("div",{className:"rounded-lg border border-components-panel-border bg-components-panel-bg",children:[(0,t.jsxs)("div",{className:"flex h-10 items-center justify-between rounded-lg px-3",children:[(0,t.jsx)("div",{className:"shrink-0 text-sm font-medium text-text-primary",children:n}),(0,t.jsxs)("div",{className:"flex grow items-center justify-end",children:[o&&(0,t.jsx)("div",{className:"mr-2 truncate text-xs text-text-tertiary",title:o,children:o}),(0,t.jsx)(E.default,{size:"l",defaultValue:s.enabled,onChange:e=>d("enabled",e)})]})]}),s.enabled&&i&&(0,t.jsxs)("div",{className:"rounded-lg bg-components-panel-bg px-3 pb-3 pt-1",children:[(0,t.jsxs)("div",{className:"flex h-8 items-center justify-between text-[13px] font-medium text-text-secondary",children:[l("feature.moderation.modal.content.preset",{ns:"appDebug"}),(0,t.jsx)("span",{className:"text-xs font-normal text-text-tertiary",children:l("feature.moderation.modal.content.supportMarkdown",{ns:"appDebug"})})]}),(0,t.jsxs)("div",{className:"relative h-20 rounded-lg bg-components-input-bg-normal px-3 py-2",children:[(0,t.jsx)("textarea",{value:s.preset_response||"",className:"block h-full w-full resize-none appearance-none bg-transparent text-sm text-text-secondary outline-none",placeholder:l("feature.moderation.modal.content.placeholder",{ns:"appDebug"})||"",onChange:e=>d("preset_response",e.target.value)}),(0,t.jsxs)("div",{className:"absolute bottom-2 right-2 flex h-5 items-center rounded-md bg-background-section px-1 text-xs font-medium text-text-quaternary",children:[(0,t.jsx)("span",{children:(s.preset_response||"").length}),"/",(0,t.jsx)("span",{className:"text-text-tertiary",children:"100"})]})]})]})]})})},w=["openai_moderation","keywords","api"];e.s(["default",0,e=>{let{data:E,onCancel:C,onSave:O}=e,{t:j}=(0,a.useTranslation)(),_=(0,f.useDocLink)(),{notify:N}=(0,c.useToastContext)(),R=(0,f.useLocale)(),{data:k,isPending:I,refetch:D}=(0,g.useModelProviders)(),[L,P]=(0,i.useState)(E),{setShowAccountSettingModal:F}=(0,v.useModalContext)(),{data:T}=(0,g.useCodeBasedExtensions)("moderation"),M=k?.data.find(e=>"langgenius/openai/openai"===e.provider),A=M?.system_configuration.enabled?M?.system_configuration.quota_configurations.find(e=>e.quota_type===M.system_configuration.current_quota_type):void 0,B=A?.is_valid,K=M?.custom_configuration.status===x.CustomConfigurationStatusEnum.active||B,z=[{key:"openai_moderation",name:j("feature.moderation.modal.provider.openai",{ns:"appDebug"})},{key:"keywords",name:j("feature.moderation.modal.provider.keywords",{ns:"appDebug"})},{key:"api",name:j("apiBasedExtension.selector.title",{ns:"common"})},...T?T.data.map(e=>({key:e.name,name:"zh-Hans"===R?e.label["zh-Hans"]:e.label["en-US"],form_schema:e.form_schema})):[]],V=z.find(e=>e.key===L.type),H=(e,t)=>{P({...L,config:{...L.config,[e]:t}})};return(0,t.jsxs)(u.default,{isShow:!0,onClose:o.noop,className:"!mt-14 !w-[600px] !max-w-none !p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"title-2xl-semi-bold text-text-primary",children:j("feature.moderation.modal.title",{ns:"appDebug"})}),(0,t.jsx)("div",{className:"cursor-pointer p-1",onClick:C,children:(0,t.jsx)(n.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})})]}),(0,t.jsxs)("div",{className:"py-2",children:[(0,t.jsx)("div",{className:"text-sm font-medium leading-9 text-text-primary",children:j("feature.moderation.modal.provider.title",{ns:"appDebug"})}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2.5",children:z.map(e=>(0,t.jsxs)("div",{className:(0,h.cn)("system-sm-regular flex h-8 cursor-default items-center rounded-md border border-components-option-card-option-border bg-components-option-card-option-bg px-2 text-text-secondary",L.type!==e.key&&"cursor-pointer hover:border-components-option-card-option-border-hover hover:bg-components-option-card-option-bg-hover hover:shadow-xs",L.type===e.key&&"system-sm-medium border-[1.5px] border-components-option-card-option-selected-border bg-components-option-card-option-selected-bg shadow-xs","openai_moderation"===L.type&&"openai_moderation"===e.key&&!K&&"text-text-disabled"),onClick:()=>{var t;let n,o;return t=e.key,o=z.find(e=>e.key===t),void(0>w.findIndex(e=>e===t)&&o?.form_schema&&(n=o?.form_schema.reduce((e,t)=>(e[t.variable]=t.default,e),{})),P({...L,type:t,config:n}))},children:[(0,t.jsx)("div",{className:(0,h.cn)("mr-2 h-4 w-4 rounded-full border border-components-radio-border bg-components-radio-bg shadow-xs",L.type===e.key&&"border-[5px] border-components-radio-border-checked")}),e.name]},e.key))}),!I&&!K&&"openai_moderation"===L.type&&(0,t.jsxs)("div",{className:"mt-2 flex items-center rounded-lg border border-[#FEF0C7] bg-[#FFFAEB] px-3 py-2",children:[(0,t.jsx)(d.default,{className:"mr-1 h-4 w-4 text-[#F79009]"}),(0,t.jsxs)("div",{className:"flex items-center text-xs font-medium text-gray-700",children:[j("feature.moderation.modal.openaiNotConfig.before",{ns:"appDebug"}),(0,t.jsxs)("span",{className:"cursor-pointer text-primary-600",onClick:()=>{F({payload:m.ACCOUNT_SETTING_TAB.PROVIDER,onCancelCallback:()=>{D()}})},children:[" ",j("settings.provider",{ns:"common"})," "]}),j("feature.moderation.modal.openaiNotConfig.after",{ns:"appDebug"})]})]})]}),"keywords"===L.type&&(0,t.jsxs)("div",{className:"py-2",children:[(0,t.jsx)("div",{className:"mb-1 text-sm font-medium text-text-primary",children:j("feature.moderation.modal.provider.keywords",{ns:"appDebug"})}),(0,t.jsx)("div",{className:"mb-2 text-xs text-text-tertiary",children:j("feature.moderation.modal.keywords.tip",{ns:"appDebug"})}),(0,t.jsxs)("div",{className:"relative h-[88px] rounded-lg bg-components-input-bg-normal px-3 py-2",children:[(0,t.jsx)("textarea",{value:L.config?.keywords||"",onChange:e=>{let t=e.target.value.split("\n").reduce((e,t)=>(""!==t&&e.push(t.slice(0,100)),""===t&&""!==e[e.length-1]&&e.push(t),e),[]);P({...L,config:{...L.config,keywords:t.slice(0,100).join("\n")}})},className:"block h-full w-full resize-none appearance-none bg-transparent text-sm text-text-secondary outline-none",placeholder:j("feature.moderation.modal.keywords.placeholder",{ns:"appDebug"})||""}),(0,t.jsxs)("div",{className:"absolute bottom-2 right-2 flex h-5 items-center rounded-md bg-background-section px-1 text-xs font-medium text-text-quaternary",children:[(0,t.jsx)("span",{children:(L.config?.keywords||"").split("\n").filter(Boolean).length}),"/",(0,t.jsxs)("span",{className:"text-text-tertiary",children:["100",j("feature.moderation.modal.keywords.line",{ns:"appDebug"})]})]})]})]}),"api"===L.type&&(0,t.jsxs)("div",{className:"py-2",children:[(0,t.jsxs)("div",{className:"flex h-9 items-center justify-between",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-text-primary",children:j("apiBasedExtension.selector.title",{ns:"common"})}),(0,t.jsxs)("a",{href:_("/use-dify/workspace/api-extension/api-extension"),target:"_blank",rel:"noopener noreferrer",className:"group flex items-center text-xs text-text-tertiary hover:text-primary-600",children:[(0,t.jsx)(l.BookOpen01,{className:"mr-1 h-3 w-3 text-text-tertiary group-hover:text-primary-600"}),j("apiBasedExtension.link",{ns:"common"})]})]}),(0,t.jsx)(p.default,{value:L.config?.api_based_extension_id||"",onChange:e=>{P({...L,config:{...L.config,api_based_extension_id:e}})}})]}),0>w.findIndex(e=>e===L.type)&&V?.form_schema&&(0,t.jsx)(y.default,{forms:V?.form_schema,value:L.config,onChange:e=>{P({...L,config:{...L.config,...e}})}}),(0,t.jsx)(r.default,{bgStyle:"gradient",className:"my-3 h-px"}),(0,t.jsx)(S,{title:j("feature.moderation.modal.content.input",{ns:"appDebug"})||"",config:L.config?.inputs_config||{enabled:!1,preset_response:""},onConfigChange:e=>H("inputs_config",e),info:"api"===L.type&&j("feature.moderation.modal.content.fromApi",{ns:"appDebug"})||"",showPreset:"api"!==L.type}),(0,t.jsx)(S,{title:j("feature.moderation.modal.content.output",{ns:"appDebug"})||"",config:L.config?.outputs_config||{enabled:!1,preset_response:""},onConfigChange:e=>H("outputs_config",e),info:"api"===L.type&&j("feature.moderation.modal.content.fromApi",{ns:"appDebug"})||"",showPreset:"api"!==L.type}),(0,t.jsx)("div",{className:"mb-8 mt-1 text-xs font-medium text-text-tertiary",children:j("feature.moderation.modal.content.condition",{ns:"appDebug"})}),(0,t.jsxs)("div",{className:"flex items-center justify-end",children:[(0,t.jsx)(s.default,{onClick:C,className:"mr-2",children:j("operation.cancel",{ns:"common"})}),(0,t.jsx)(s.default,{variant:"primary",onClick:()=>{if("openai_moderation"!==L.type||K){if(!L.config?.inputs_config?.enabled&&!L.config?.outputs_config?.enabled)return void N({type:"error",message:j("feature.moderation.modal.content.condition",{ns:"appDebug"})});if("keywords"===L.type&&!L.config.keywords)return void N({type:"error",message:j("errorMessage.valueOfVarRequired",{ns:"appDebug",key:R!==b.LanguagesSupported[1]?"keywords":"关键词"})});if("api"===L.type&&!L.config.api_based_extension_id)return void N({type:"error",message:j("errorMessage.valueOfVarRequired",{ns:"appDebug",key:R!==b.LanguagesSupported[1]?"API Extension":"API 扩展"})});if(0>w.findIndex(e=>e===L.type)&&V?.form_schema){for(let e=0;e<V.form_schema.length;e++)if(!L.config?.[V.form_schema[e].variable]&&V.form_schema[e].required)return void N({type:"error",message:j("errorMessage.valueOfVarRequired",{ns:"appDebug",key:R!==b.LanguagesSupported[1]?V.form_schema[e].label["en-US"]:V.form_schema[e].label["zh-Hans"]})})}if(L.config.inputs_config?.enabled&&!L.config.inputs_config.preset_response&&"api"!==L.type||L.config.outputs_config?.enabled&&!L.config.outputs_config.preset_response&&"api"!==L.type)return void N({type:"error",message:j("feature.moderation.modal.content.errorMessage",{ns:"appDebug"})});O((e=>{let{enabled:t,type:n,config:o}=e,{inputs_config:i,outputs_config:a}=o,s={};return"keywords"===n&&(s.keywords=o?.keywords),"api"===n&&(s.api_based_extension_id=o?.api_based_extension_id),0>w.findIndex(e=>e===n)&&V?.form_schema&&V.form_schema.forEach(e=>{s[e.variable]=o?.[e.variable]}),{type:n,enabled:t,config:{inputs_config:i||{enabled:!1},outputs_config:a||{enabled:!1},...s}}})(L))}},disabled:"openai_moderation"===L.type&&!K,children:j("operation.save",{ns:"common"})})]})]})}],139574)},157154,e=>{e.n(e.i(139574))}]);