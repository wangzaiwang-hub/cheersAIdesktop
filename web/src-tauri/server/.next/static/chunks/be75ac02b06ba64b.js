(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,766036,e=>{"use strict";var t=e.i(563199),r=e.i(837699),i=e.i(268255),n=e.i(935139);let l=i.memo(e=>{let{className:i,onClick:l}=e;return(0,t.jsx)("div",{className:(0,n.cn)(i,"cursor-pointer select-none rounded-md p-1 hover:bg-state-base-hover"),onClick:l,children:(0,t.jsx)(r.RiAddLine,{className:"h-4 w-4 text-text-tertiary"})})});e.s(["default",0,l])},359173,e=>{"use strict";var t=e.i(321124);e.s(["ChevronSelectorVertical",()=>t.default])},22461,116546,64997,e=>{"use strict";var t=e.i(563199),r=e.i(837699),i=e.i(124836),n=e.i(105845),l=e.i(268255);e.i(152567);var a=e.i(408767),o=e.i(192447),s=e.i(83278),d=e.i(766036);e.i(432024);var c=e.i(112757);e.i(39598);var u=e.i(678383),p=e.i(391185),m=e.i(421001),h=e.i(739255),x=e.i(120219),f=e.i(959752);e.i(845780);var g=e.i(720315),v=e.i(949250),y=e.i(417944),b=e.i(892081);e.i(668763);var C=e.i(359173);e.i(47690);var w=e.i(490774),j=e.i(935139);let N=l.memo(e=>{let{className:r,trigger:i,DropDownIcon:n=C.ChevronSelectorVertical,noLeft:a,options:o,allOptions:s,value:d,placeholder:c="",onChange:u,uppercase:p,triggerClassName:m,popupClassName:h,itemClassName:x,readonly:f,showChecked:g}=e,v=""===d||null==d,N=s?s.find(e=>e.value===d):o.find(e=>e.value===d),[k,{setFalse:V,toggle:L}]=(0,y.useBoolean)(!1),M=l.useRef(null);return(0,b.useClickAway)(()=>{V()},M),(0,t.jsxs)("div",{className:(0,j.cn)(!i&&!a&&"left-[-8px]","relative select-none",r),ref:M,children:[i?(0,t.jsx)("div",{onClick:L,className:(0,j.cn)(!f&&"cursor-pointer"),children:i}):(0,t.jsxs)("div",{onClick:L,className:(0,j.cn)(k&&"bg-state-base-hover","flex h-5 cursor-pointer items-center rounded-md pl-1 pr-0.5 text-xs font-semibold text-text-secondary hover:bg-state-base-hover"),children:[(0,t.jsx)("div",{className:(0,j.cn)("text-sm font-semibold",p&&"uppercase",v&&"text-text-tertiary",m),children:v?c:N?.label}),!f&&(0,t.jsx)(n,{className:"h-3 w-3 "})]}),k&&!f&&(0,t.jsx)("div",{className:(0,j.cn)("absolute top-[24px] z-10 w-[120px]  select-none rounded-lg border border-components-panel-border bg-components-panel-bg p-1 shadow-lg",h),children:o.map(e=>(0,t.jsxs)("div",{onClick:()=>{V(),u(e.value)},className:(0,j.cn)(x,p&&"uppercase","flex h-[30px] min-w-[44px] cursor-pointer items-center justify-between rounded-lg px-3 text-[13px] font-medium text-text-secondary hover:bg-state-base-hover"),children:[(0,t.jsx)("div",{children:e.label}),g&&e.value===d&&(0,t.jsx)(w.Check,{className:"h-4 w-4 text-text-primary"})]},e.value))})]})});e.s(["default",0,N],116546),e.i(603198);var k=e.i(697743);e.i(187243);var V=e.i(989425),L=e.i(390622);e.i(905691);var M=e.i(48498),I=e.i(157644),T=e.i(619507),S=e.i(249385),H=e.i(299951),R=e.i(225162);let E={},A=l.memo(e=>{let{schema:r=E,readonly:i,value:n,onChange:a,onOpenChange:o,isLoading:s}=e,d=(0,R.useLanguage)(),c=r.placeholder,u=(0,l.useCallback)(e=>{a(""===e.target.value?"":Number.parseFloat(e.target.value),V.VarType.constant)},[a]),p=(0,l.useCallback)(e=>{a(e=null===e?"":e,V.VarType.constant)},[a]);return(0,t.jsxs)(t.Fragment,{children:[(r.type===h.FormTypeEnum.select||r.type===h.FormTypeEnum.dynamicSelect)&&(0,t.jsx)(H.SimpleSelect,{wrapperClassName:"w-full !h-8",className:"flex items-center",disabled:i,defaultValue:n,items:r.options.map(e=>({value:e.value,name:e.label[d]||e.label.en_US})),onSelect:e=>p(e.value),placeholder:c?.[d]||c?.en_US,onOpenChange:o,isLoading:s}),r.type===h.FormTypeEnum.textNumber&&(0,t.jsx)("input",{type:"number",className:"h-8 w-full overflow-hidden rounded-lg bg-workflow-block-parma-bg p-2 text-[13px] font-normal leading-8 text-text-secondary placeholder:text-gray-400 focus:outline-none",value:n,onChange:u,readOnly:i,placeholder:c?.[d]||c?.en_US,min:r.min,max:r.max})]})});var B=e.i(963855),$=e.i(625285);let _=e=>{let{className:r}=e;return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"240",height:"2",viewBox:"0 0 240 2",fill:"none",className:r,children:[(0,t.jsx)("path",{d:"M0 1H240",stroke:"url(#paint0_linear_8619_59125)"}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"paint0_linear_8619_59125",x1:"240",y1:"9.99584",x2:"3.95539e-05",y2:"9.88094",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopColor:"white",stopOpacity:"0.01"}),(0,t.jsx)("stop",{offset:"0.9031",stopColor:"#101828",stopOpacity:"0.04"}),(0,t.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0.01"})]})})]})},O=e=>{let{className:r}=e;return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2",height:"132",viewBox:"0 0 2 132",fill:"none",className:r,children:[(0,t.jsx)("path",{d:"M1 0L1 132",stroke:"url(#paint0_linear_8619_59128)"}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"paint0_linear_8619_59128",x1:"-7.99584",y1:"132",x2:"-7.96108",y2:"6.4974e-07",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopColor:"white",stopOpacity:"0.01"}),(0,t.jsx)("stop",{offset:"0.877606",stopColor:"#101828",stopOpacity:"0.04"}),(0,t.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0.01"})]})})]})},F=e=>{let{title:r,description:i,icon:n}=e;return(0,t.jsxs)("div",{className:"flex w-[320px] flex-col items-start gap-2 rounded-[10px] bg-workflow-process-bg p-4",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 items-center justify-center gap-2 rounded-[10px]",children:(0,t.jsxs)("div",{className:"relative flex grow items-center justify-center gap-2 self-stretch rounded-[10px] border-[0.5px] border-components-card-border bg-components-card-bg p-1 shadow-lg",children:[n||(0,t.jsx)(u.Variable02,{className:"h-5 w-5 shrink-0 text-text-accent"}),(0,t.jsx)(O,{className:"absolute -right-[1px] top-1/2 -translate-y-1/4"}),(0,t.jsx)(O,{className:"absolute -left-[1px] top-1/2 -translate-y-1/4"}),(0,t.jsx)(_,{className:"absolute left-3/4 top-0 -translate-x-1/4 -translate-y-1/2"}),(0,t.jsx)(_,{className:"absolute left-3/4 top-full -translate-x-1/4 -translate-y-1/2"})]})}),(0,t.jsxs)("div",{className:"flex flex-col items-start gap-1 self-stretch",children:[(0,t.jsx)("div",{className:"system-sm-medium text-text-secondary",children:r}),i]})]})};e.s(["default",0,F],64997),e.i(275225);var P=e.i(705405),Z=e.i(139269);let D=l.memo(e=>{let{vars:r,popupFor:i,onChange:n,itemWidth:o,isSupportFileVar:s=!0,zIndex:d,preferSchemaType:c}=e,{t:u}=(0,a.useTranslation)(),p=(0,P.useStore)(e=>e.pipelineId),m=(0,l.useMemo)(()=>!!p,[p]),h=(0,P.useStore)(e=>e.setShowInputFieldPanel);return(0,t.jsx)("div",{className:"space-y-1 rounded-lg border border-components-panel-border bg-components-panel-bg p-1 shadow-lg",style:{width:o||228},children:(!r||0===r.length)&&i?"toAssigned"===i?(0,t.jsx)(F,{title:u("variableReference.noAvailableVars",{ns:"workflow"})||"",description:(0,t.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:u("variableReference.noVarsForOperation",{ns:"workflow"})})}):(0,t.jsx)(F,{title:u("variableReference.noAssignedVars",{ns:"workflow"})||"",description:(0,t.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:u("variableReference.assignedVarsDescription",{ns:"workflow"})})}):(0,t.jsx)(Z.default,{searchBoxClassName:"mt-1",vars:r,onChange:n,itemWidth:o,isSupportFileVar:s,zIndex:d,showManageInputField:m,onManageInputField:()=>h?.(!0),preferSchemaType:c})})}),W=[],z=l.memo(e=>{let y,b,{nodeId:C,readonly:w,className:H,isShowNodeName:R=!0,value:E=W,onOpen:_=i.noop,onChange:O,isSupportConstantValue:F,defaultVarKindType:P=V.VarType.constant,onlyLeafNodeVar:Z,filterVar:z=()=>!0,isFilterFileVar:U,availableNodes:G,availableVars:q,isAddBtnTrigger:K,schema:X,valueTypePlaceHolder:J,isInTable:Q,onRemove:Y,typePlaceHolder:ee,isSupportFileVar:et=!0,placeholder:er,minWidth:ei,popupFor:en,zIndex:el,currentTool:ea,currentProvider:eo,preferSchemaType:es}=e,{t:ed}=(0,a.useTranslation)(),ec=(0,o.useStoreApi)(),eu=(0,o.useNodes)(),ep=(0,g.useIsChatMode)(),{getCurrentVariableType:em}=(0,v.useWorkflowVariables)(),{availableVars:eh,availableNodesWithParent:ex}=(0,T.default)(C,{onlyLeafNodeVar:Z,passedInAvailableNodes:G,filterVar:z}),ef=(0,o.useReactFlow)(),eg=ex.find(e=>e.data.type===L.BlockEnum.Start),ev=eu.find(e=>e.id===C),ey=!!ev?.data?.isInIteration,eb=ey?eu.find(e=>e.id===ev?.parentId):null,eC=!!ev?.data?.isInLoop,ew=eC?eu.find(e=>e.id===ev?.parentId):null,ej=(0,l.useRef)(null),[eN,ek]=(0,l.useState)(227);(0,l.useEffect)(()=>{ej.current&&ek(ej.current.clientWidth)},[ej.current]);let[eV,eL]=(0,l.useState)(P),eM=F&&eV===V.VarType.constant,eI=(0,l.useMemo)(()=>{let e=q||eh;return U?(0,B.removeFileVars)(e):e},[q,eh,U]),[eT,eS]=(0,l.useState)(!1);(0,l.useEffect)(()=>{_()},[eT]);let eH=!eM&&E.length>0,eR=(0,l.useMemo)(()=>!!ey&&!!(E[0]===ev?.parentId&&["item","index"].includes(E[1])),[ey,E,ev]),eE=(0,l.useMemo)(()=>!!eC&&!!(E[0]===ev?.parentId&&["item","index"].includes(E[1])),[eC,E,ev]),eA=eH?E[0]:"",eB=(0,l.useMemo)(()=>{if(!eH||eM)return null;if(eR)return eb?.data;if(eE)return ew?.data;if((0,B.isSystemVar)(E))return eg?.data;let e=(0,B.getNodeInfoById)(ex,eA)?.data;if(e)return{...e,id:eA}},[E,eH,eM,eR,eb,ex,eA,eg,eE,ew]),e$=E.length>2&&!(0,B.isRagVariableVar)(E),e_=(0,l.useMemo)(()=>{if(!eH)return"";let e=f.VAR_SHOW_NAME_MAP[E.join(".")];if(e)return e;let t=(0,B.isSystemVar)(E),r=Array.isArray(E)?E[E.length-1]:"";return`${t?"sys.":""}${r}`},[eH,E]),eO=[{label:"Variable",value:V.VarType.variable},{label:"Constant",value:V.VarType.constant}],eF=(0,l.useCallback)(e=>{eL(e),e===V.VarType.constant?O("",e):O([],e)},[O]),eP=(0,l.useRef)(null),[eZ,eD]=(0,l.useState)(!1),[eW,ez]=(0,l.useState)(0);(0,l.useEffect)(()=>{eW&&eP.current&&(eP.current.focus(),eD(!0))},[eW]);let eU=(0,l.useCallback)((e,t)=>{O((0,n.produce)(e,e=>{e[1]&&e[1].startsWith("sys.")&&(e.shift(),e[0].split(".").forEach((t,r)=>{e[r]=t}))}),eV,t),eS(!1)},[O,eV]),eG=(0,l.useCallback)(()=>{eV===V.VarType.constant?O("",eV):O([],eV)},[O,eV]),eq=(0,l.useCallback)(e=>{let t=ex.findIndex(t=>t.id===e),r=ex[t],{clientWidth:i,clientHeight:n}=document.getElementById("workflow-container"),{setViewport:l}=ef,{transform:a}=ec.getState(),o=a[2],s=r.position;l({x:(i-400-r.width*o)/2-s.x*o,y:(n-r.height*o)/2-s.y*o,zoom:a[2]})},[ex,ef,ec]),eK=em({parentNode:ey?eb:ew,valueSelector:E,availableNodes:ex,isChatMode:ep,isConstant:!!eM,preferSchemaType:es}),{isEnv:eX,isChatVar:eJ,isGlobal:eQ,isRagVar:eY,isValidVar:e3,isException:e1}=(0,l.useMemo)(()=>{let e=(0,B.isENV)(E),t=(0,B.isConversationVar)(E),r=(0,B.isGlobalVar)(E),i=(0,B.isRagVariableVar)(E),n=!!eB||e||t||r||i;return{isEnv:e,isChatVar:t,isGlobal:r,isRagVar:i,isValidVar:n,isException:(0,M.isExceptionVariable)(e_,eB?.type)}},[E,eB,e_]),e6=eN-56,[e0,e2,e5]=(y=((eB?.title||"")+(e_||"")+(eK||"")).length,b=15+Math.floor((eB?.title?.length||0)/y*e6),[b,-15+Math.floor((e_?.length||0)/y*e6),Math.floor((eK?.length||0)/y*e6)]),e4=F?"div":p.PortalToFollowElemTrigger,e9=F?p.PortalToFollowElemTrigger:"div",e7=(0,l.useMemo)(()=>e3&&e$?(0,t.jsx)($.default,{nodeName:eB?.title,path:E.slice(1),varType:(0,B.varTypeToStructType)(eK),nodeType:eB?.type}):!e3&&eH?ed("errorMsg.invalidVariable",{ns:"workflow"}):null,[e3,e$,eH,ed,eB?.title,eB?.type,E,eK]),[e8,te]=(0,l.useState)(null),[tt,tr]=(0,l.useState)(!1),{mutateAsync:ti}=(0,I.useFetchDynamicOptions)(eo?.plugin_id||"",eo?.name||"",ea?.name||"",X?.variable||"","tool"),tn=async()=>{if(X?.type===h.FormTypeEnum.dynamicSelect&&ea&&eo){tr(!0);try{let e=await ti();te(e?.options||[])}finally{tr(!1)}}};(0,l.useEffect)(()=>{tn()},[ea,eo,X]);let tl=(0,l.useMemo)(()=>{if(X?.type!==h.FormTypeEnum.dynamicSelect)return X;if(e8)return{...X,options:e8};if(tt&&E&&"string"==typeof E){let e=[{value:E,label:{en_US:E,zh_Hans:E},show_on:[]}];return{...X,options:e}}return{...X,options:[]}},[X,e8,tt,E]),ta=(0,l.useMemo)(()=>eX?"environment":eJ?"conversation":eQ?"global":eE?"loop":eY?"rag":"system",[eX,eJ,eQ,eE,eY]);return(0,t.jsx)("div",{className:(0,j.cn)(H,!w&&"cursor-pointer"),children:(0,t.jsxs)(p.PortalToFollowElem,{open:eT,onOpenChange:eS,placement:K?"bottom-end":"bottom-start",children:[(0,t.jsx)(e4,{onClick:()=>{w||(eM?ez(Date.now()):eS(!eT))},className:"group/picker-trigger-wrap relative !flex",children:(0,t.jsxs)(t.Fragment,{children:[K?(0,t.jsx)("div",{children:(0,t.jsx)(d.default,{onClick:i.noop})}):(0,t.jsxs)("div",{ref:F?null:ej,className:(0,j.cn)(eT||eZ?"border-gray-300":"border-gray-100","group/wrap relative flex h-8 w-full items-center",!F&&"rounded-lg bg-components-input-bg-normal p-1",Q&&"border-none bg-transparent",w&&"bg-components-input-bg-disabled"),children:[F?(0,t.jsx)("div",{onClick:e=>{e.stopPropagation(),eS(!1),ez(Date.now())},className:"mr-1 flex h-full items-center space-x-1",children:(0,t.jsx)(N,{noLeft:!0,trigger:(0,t.jsxs)("div",{className:"radius-md flex h-8 items-center bg-components-input-bg-normal px-2",children:[(0,t.jsx)("div",{className:"system-sm-regular mr-1 text-components-input-text-filled",children:eO.find(e=>e.value===eV)?.label}),(0,t.jsx)(r.RiArrowDownSLine,{className:"h-4 w-4 text-text-quaternary"})]}),popupClassName:"top-8",readonly:w,value:eV,options:eO,onChange:eF,showChecked:!0})}):!eH&&(0,t.jsx)("div",{className:"ml-1.5 mr-1",children:(0,t.jsx)(u.Variable02,{className:`h-4 w-4 ${w?"text-components-input-text-disabled":"text-components-input-text-placeholder"}`})}),eM?(0,t.jsx)(A,{value:E,onChange:O,schema:tl,readonly:w,isLoading:tt}):(0,t.jsx)(e9,{onClick:()=>{w||(eM?ez(Date.now()):eS(!eT))},className:"h-full grow",children:(0,t.jsx)("div",{ref:F?ej:null,className:(0,j.cn)("h-full",F&&"flex items-center rounded-lg bg-components-panel-bg py-1 pl-1"),children:(0,t.jsx)(m.default,{noDecoration:e$,popupContent:e7,children:(0,t.jsx)("div",{className:(0,j.cn)("h-full items-center rounded-[5px] px-1.5",eH?"inline-flex bg-components-badge-white-to-dark":"flex"),children:eH?(0,t.jsxs)(t.Fragment,{children:[R&&!eX&&!eJ&&!eQ&&!eY&&(0,t.jsxs)("div",{className:"flex items-center",onClick:e=>{(e.metaKey||e.ctrlKey)&&(e.stopPropagation(),eq(eB?.id))},children:[(0,t.jsx)("div",{className:"h-3 px-[1px]",children:eB?.type&&(0,t.jsx)(x.VarBlockIcon,{className:"!text-text-primary",type:eB.type})}),(0,t.jsx)("div",{className:"mx-0.5 truncate text-xs font-medium text-text-secondary",title:eB?.title,style:{maxWidth:e0},children:eB?.title}),(0,t.jsx)(c.Line3,{className:"mr-0.5"})]}),e$&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(r.RiMoreLine,{className:"h-3 w-3 text-text-secondary"}),(0,t.jsx)(c.Line3,{className:"mr-0.5 text-divider-deep"})]}),(0,t.jsxs)("div",{className:"flex items-center text-text-accent",children:[tt&&(0,t.jsx)(r.RiLoader4Line,{className:"h-3.5 w-3.5 animate-spin text-text-secondary"}),(0,t.jsx)(k.VariableIconWithColor,{variables:E,variableCategory:ta,isExceptionVariable:e1}),(0,t.jsx)("div",{className:(0,j.cn)("ml-0.5 truncate text-xs font-medium",eX&&"!text-text-secondary",eJ&&"text-util-colors-teal-teal-700",e1&&"text-text-warning",eQ&&"text-util-colors-orange-orange-600"),title:e_,style:{maxWidth:e2},children:e_})]}),(0,t.jsx)("div",{className:"system-xs-regular ml-0.5 truncate text-center capitalize text-text-tertiary",title:eK,style:{maxWidth:e5},children:eK}),!e3&&(0,t.jsx)(r.RiErrorWarningFill,{className:"ml-0.5 h-3 w-3 text-text-destructive"})]}):(0,t.jsx)("div",{className:`overflow-hidden ${w?"text-components-input-text-disabled":"text-components-input-text-placeholder"} system-sm-regular text-ellipsis`,children:tt?(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(r.RiLoader4Line,{className:"mr-1 h-3.5 w-3.5 animate-spin text-text-secondary"}),(0,t.jsx)("span",{children:er??ed("common.setVarValuePlaceholder",{ns:"workflow"})})]}):er??ed("common.setVarValuePlaceholder",{ns:"workflow"})})})})})}),eH&&!w&&!Q&&(0,t.jsx)("div",{className:"group invisible absolute right-1 top-[50%] h-5 translate-y-[-50%] cursor-pointer rounded-md p-1 hover:bg-state-base-hover group-hover/wrap:visible",onClick:eG,children:(0,t.jsx)(r.RiCloseLine,{className:"h-3.5 w-3.5 text-text-tertiary group-hover:text-text-secondary"})}),!eH&&J&&(0,t.jsx)(s.default,{className:" absolute right-1 top-[50%] translate-y-[-50%] capitalize",text:J,uppercase:!1})]}),!w&&Q&&(0,t.jsx)(S.default,{className:"absolute right-1 top-0.5 hidden group-hover/picker-trigger-wrap:block",onClick:()=>Y?.()}),!eH&&ee&&(0,t.jsx)(s.default,{className:"absolute right-2 top-1.5",text:ee,uppercase:!1})]})}),(0,t.jsx)(p.PortalToFollowElemContent,{style:{zIndex:el||100},className:"mt-1",children:!eM&&(0,t.jsx)(D,{vars:eI,popupFor:en,onChange:eU,itemWidth:K?260:ei||eN,isSupportFileVar:et,zIndex:el,preferSchemaType:es})})]})})});e.s(["default",0,z],22461)},597280,e=>{"use strict";var t=e.i(563199),r=e.i(294237),i=e.i(268255),n=e.i(421001),l=e.i(935139);let a=(0,r.cva)([],{variants:{align:{left:"justify-start",center:"justify-center",right:"justify-end"}},defaultVariants:{align:"center"}}),o=i.memo(e=>{let{className:r,title:o,onSelect:s,selected:d,disabled:c,align:u="center",tooltip:p}=e,m=(0,i.useCallback)(()=>{d||c||s()},[s,d,c]);return(0,t.jsxs)("div",{className:(0,l.cn)("system-sm-regular flex h-8 cursor-default items-center rounded-md border border-components-option-card-option-border bg-components-option-card-option-bg px-2 text-text-secondary",!d&&!c&&"cursor-pointer hover:border-components-option-card-option-border-hover hover:bg-components-option-card-option-bg-hover hover:shadow-xs",d&&"system-sm-medium border-[1.5px] border-components-option-card-option-selected-border bg-components-option-card-option-selected-bg shadow-xs",c&&"text-text-disabled",a({align:u}),r),onClick:m,children:[(0,t.jsx)("span",{children:o}),p&&(0,t.jsx)(n.default,{popupContent:(0,t.jsx)("div",{className:"w-[240px]",children:p})})]})});e.s(["default",0,o])},249385,e=>{"use strict";var t=e.i(563199),r=e.i(837699),i=e.i(268255),n=e.i(654313);let l=i.memo(e=>{let{onClick:i}=e;return(0,t.jsx)(n.default,{size:"l",className:"group shrink-0 hover:!bg-state-destructive-hover",onClick:i,children:(0,t.jsx)(r.RiDeleteBinLine,{className:"h-4 w-4 text-text-tertiary group-hover:text-text-destructive"})})});e.s(["default",0,l])},619507,299075,e=>{"use strict";e.i(845780);var t=e.i(720315),r=e.i(949250);e.i(275225);var i=e.i(705405),n=e.i(390622),l=e.i(654537);let a=e=>({[l.PipelineInputVarType.number]:n.VarType.number,[l.PipelineInputVarType.singleFile]:n.VarType.file,[l.PipelineInputVarType.multiFiles]:n.VarType.arrayFile,[l.PipelineInputVarType.checkbox]:n.VarType.boolean})[e]||n.VarType.string;var o=e.i(192447);let s=e=>{let{getNodes:t}=(0,o.useStoreApi)().getState(),r=t(),i=r.find(t=>t.id===e),n=!!i?.data.isInIteration,l=!!i?.data.isInLoop,a=i?.parentId;return{node:i,isInIteration:n,isInLoop:l,parentNode:r.find(e=>e.id===a)}};e.s(["default",0,s],299075),e.s(["default",0,function(e){let{onlyLeafNodeVar:l,filterVar:o,hideEnv:d,hideChatVar:c,passedInAvailableNodes:u}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{onlyLeafNodeVar:!1,filterVar:()=>!0},{getTreeLeafNodes:p,getNodeById:m,getBeforeNodesInSameBranchIncludeParent:h}=(0,t.useWorkflow)(),{getNodeAvailableVars:x}=(0,r.useWorkflowVariables)(),f=(0,t.useIsChatMode)(),g=u||(l?p(e):h(e)),{parentNode:v}=s(e),y=m(e),b=(0,i.useStore)(e=>e.ragPipelineVariables),C=y?.data?.type===n.BlockEnum.DataSource,w=[];if(C){let t=b?.filter(t=>t.belong_to_node_id===e),r=t?.filter(t=>o({variable:t.variable,type:a(t.type),nodeId:e,isRagVariable:!0},["rag",e,t.variable]));r?.length&&w.push({nodeId:e,title:y.data?.title,vars:r.map(t=>({variable:`rag.${e}.${t.variable}`,type:a(t.type),description:t.label,isRagVariable:!0}))})}return{availableVars:[...x({parentNode:v,beforeNodes:g,isChatMode:f,filterVar:o,hideEnv:d,hideChatVar:c}),...w],availableNodes:g,availableNodesWithParent:[...g,...C?[y]:[]]}}],619507)},65932,(e,t,r)=>{"use strict";t.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((i=t.length)!=r.length)return!1;for(n=i;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((i=(l=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=i;0!=n--;)if(!Object.prototype.hasOwnProperty.call(r,l[n]))return!1;for(n=i;0!=n--;){var i,n,l,a=l[n];if(!e(t[a],r[a]))return!1}return!0}return t!=t&&r!=r}},449448,e=>{"use strict";function t(e){return[...new Set(e)]}e.s(["uniq",()=>t])},534042,141167,e=>{"use strict";var t,r=((t={}).blue="blue",t.cyan="cyan",t.green="green",t.yellow="yellow",t.pink="pink",t.violet="violet",t);e.s(["NoteTheme",()=>r],141167);let i={[r.blue]:{outer:"border-util-colors-blue-blue-500",title:"bg-util-colors-blue-blue-100",bg:"bg-util-colors-blue-blue-50",border:"border-util-colors-blue-blue-300"},[r.cyan]:{outer:"border-util-colors-cyan-cyan-500",title:"bg-util-colors-cyan-cyan-100",bg:"bg-util-colors-cyan-cyan-50",border:"border-util-colors-cyan-cyan-300"},[r.green]:{outer:"border-util-colors-green-green-500",title:"bg-util-colors-green-green-100",bg:"bg-util-colors-green-green-50",border:"border-util-colors-green-green-300"},[r.yellow]:{outer:"border-util-colors-yellow-yellow-500",title:"bg-util-colors-yellow-yellow-100",bg:"bg-util-colors-yellow-yellow-50",border:"border-util-colors-yellow-yellow-300"},[r.pink]:{outer:"border-util-colors-pink-pink-500",title:"bg-util-colors-pink-pink-100",bg:"bg-util-colors-pink-pink-50",border:"border-util-colors-pink-pink-300"},[r.violet]:{outer:"border-util-colors-violet-violet-500",title:"bg-util-colors-violet-violet-100",bg:"bg-util-colors-violet-violet-100",border:"border-util-colors-violet-violet-300"}};e.s(["CUSTOM_NOTE_NODE",0,"custom-note","THEME_MAP",0,i],534042)},986823,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{id:"Icon L"},children:[{type:"element",name:"g",attributes:{id:"Vector"},children:[{type:"element",name:"path",attributes:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.33463 3.33333C2.96643 3.33333 2.66796 3.63181 2.66796 4V10.6667C2.66796 11.0349 2.96643 11.3333 3.33463 11.3333H4.66796C5.03615 11.3333 5.33463 11.6318 5.33463 12V12.8225L7.65833 11.4283C7.76194 11.3662 7.8805 11.3333 8.00132 11.3333H12.0013C12.3695 11.3333 12.668 11.0349 12.668 10.6667C12.668 10.2985 12.9665 10 13.3347 10C13.7028 10 14.0013 10.2985 14.0013 10.6667C14.0013 11.7713 13.1058 12.6667 12.0013 12.6667H8.18598L5.01095 14.5717C4.805 14.6952 4.5485 14.6985 4.33949 14.5801C4.13049 14.4618 4.00129 14.2402 4.00129 14V12.6667H3.33463C2.23006 12.6667 1.33463 11.7713 1.33463 10.6667V4C1.33463 2.89543 2.23006 2 3.33463 2H6.66798C7.03617 2 7.33464 2.29848 7.33464 2.66667C7.33464 3.03486 7.03617 3.33333 6.66798 3.33333H3.33463Z",fill:"currentColor"},children:[]},{type:"element",name:"path",attributes:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.74113 2.66667C8.74113 2.29848 9.03961 2 9.4078 2H10.331C10.9721 2 11.5177 2.43571 11.6859 3.04075L11.933 3.93004L12.8986 2.77189C13.3045 2.28508 13.9018 2 14.536 2H14.5954C14.9636 2 15.2621 2.29848 15.2621 2.66667C15.2621 3.03486 14.9636 3.33333 14.5954 3.33333H14.536C14.3048 3.33333 14.08 3.43702 13.9227 3.6257L12.367 5.49165L12.8609 7.2689C12.8746 7.31803 12.9105 7.33333 12.9312 7.33333H13.8543C14.2225 7.33333 14.521 7.63181 14.521 8C14.521 8.36819 14.2225 8.66667 13.8543 8.66667H12.9312C12.29 8.66667 11.7444 8.23095 11.5763 7.62591L11.3291 6.73654L10.3634 7.89478C9.95758 8.38159 9.36022 8.66667 8.72604 8.66667H8.66666C8.29847 8.66667 7.99999 8.36819 7.99999 8C7.99999 7.63181 8.29847 7.33333 8.66666 7.33333H8.72604C8.95723 7.33333 9.18204 7.22965 9.33935 7.04096L10.8951 5.17493L10.4012 3.39777C10.3876 3.34863 10.3516 3.33333 10.331 3.33333H9.4078C9.03961 3.33333 8.74113 3.03486 8.74113 2.66667Z",fill:"currentColor"},children:[]}]}]}]},name:"BubbleX"})},218459,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{id:"colors","clip-path":"url(#clip0_18499_53582)"},children:[{type:"element",name:"path",attributes:{id:"Icon",d:"M7.00032 11.9422C7.61954 12.4964 8.43724 12.8334 9.33366 12.8334C11.2667 12.8334 12.8337 11.2664 12.8337 9.33342C12.8337 7.71938 11.7411 6.36051 10.2552 5.95602M3.74543 5.95601C2.25954 6.3605 1.16699 7.71937 1.16699 9.33341C1.16699 11.2664 2.734 12.8334 4.66699 12.8334C6.59999 12.8334 8.16699 11.2664 8.16699 9.33341C8.16699 8.87813 8.08006 8.44314 7.92189 8.04415M10.5003 4.66675C10.5003 6.59974 8.93332 8.16675 7.00033 8.16675C5.06733 8.16675 3.50033 6.59974 3.50033 4.66675C3.50033 2.73375 5.06733 1.16675 7.00033 1.16675C8.93332 1.16675 10.5003 2.73375 10.5003 4.66675Z",stroke:"currentColor","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},children:[]}]},{type:"element",name:"defs",attributes:{},children:[{type:"element",name:"clipPath",attributes:{id:"clip0_18499_53582"},children:[{type:"element",name:"rect",attributes:{width:"14",height:"14",fill:"white"},children:[]}]}]}]},name:"Colors"})},792257,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{id:"Drag Handle"},children:[{type:"element",name:"path",attributes:{id:"drag-handle","fill-rule":"evenodd","clip-rule":"evenodd",d:"M6 5C6.55228 5 7 4.55228 7 4C7 3.44772 6.55228 3 6 3C5.44772 3 5 3.44772 5 4C5 4.55228 5.44772 5 6 5ZM6 9C6.55228 9 7 8.55228 7 8C7 7.44772 6.55228 7 6 7C5.44772 7 5 7.44772 5 8C5 8.55228 5.44772 9 6 9ZM11 4C11 4.55228 10.5523 5 10 5C9.44772 5 9 4.55228 9 4C9 3.44772 9.44772 3 10 3C10.5523 3 11 3.44772 11 4ZM10 9C10.5523 9 11 8.55228 11 8C11 7.44772 10.5523 7 10 7C9.44772 7 9 7.44772 9 8C9 8.55228 9.44772 9 10 9ZM7 12C7 12.5523 6.55228 13 6 13C5.44772 13 5 12.5523 5 12C5 11.4477 5.44772 11 6 11C6.55228 11 7 11.4477 7 12ZM10 13C10.5523 13 11 12.5523 11 12C11 11.4477 10.5523 11 10 11C9.44772 11 9 11.4477 9 12C9 12.5523 9.44772 13 10 13Z",fill:"currentColor"},children:[]}]}]},name:"DragHandle"})},262909,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{id:"env"},children:[{type:"element",name:"g",attributes:{id:"Vector"},children:[{type:"element",name:"path",attributes:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.33325 3.33325C1.33325 2.22868 2.22868 1.33325 3.33325 1.33325H12.6666C13.7712 1.33325 14.6666 2.22869 14.6666 3.33325V3.66659C14.6666 4.03478 14.3681 4.33325 13.9999 4.33325C13.6317 4.33325 13.3333 4.03478 13.3333 3.66659V3.33325C13.3333 2.96506 13.0348 2.66659 12.6666 2.66659H3.33325C2.96506 2.66659 2.66659 2.96506 2.66659 3.33325V3.66659C2.66659 4.03478 2.36811 4.33325 1.99992 4.33325C1.63173 4.33325 1.33325 4.03478 1.33325 3.66659V3.33325Z",fill:"currentColor"},children:[]},{type:"element",name:"path",attributes:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.6666 12.6666C14.6666 13.7712 13.7712 14.6666 12.6666 14.6666L3.33325 14.6666C2.22866 14.6666 1.33325 13.7711 1.33325 12.6666L1.33325 12.3333C1.33325 11.9651 1.63173 11.6666 1.99992 11.6666C2.36811 11.6666 2.66659 11.9651 2.66659 12.3333V12.6666C2.66659 13.0348 2.96505 13.3333 3.33325 13.3333L12.6666 13.3333C13.0348 13.3333 13.3333 13.0348 13.3333 12.6666V12.3333C13.3333 11.9651 13.6317 11.6666 13.9999 11.6666C14.3681 11.6666 14.6666 11.9651 14.6666 12.3333V12.6666Z",fill:"currentColor"},children:[]},{type:"element",name:"path",attributes:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.33325 5.99992C1.33325 5.63173 1.63173 5.33325 1.99992 5.33325H4.33325C4.70144 5.33325 4.99992 5.63173 4.99992 5.99992C4.99992 6.36811 4.70144 6.66658 4.33325 6.66658H2.66659V7.33325H3.99992C4.36811 7.33325 4.66659 7.63173 4.66659 7.99992C4.66659 8.36811 4.36811 8.66658 3.99992 8.66658H2.66659V9.33325H4.33325C4.70144 9.33325 4.99992 9.63173 4.99992 9.99992C4.99992 10.3681 4.70144 10.6666 4.33325 10.6666H1.99992C1.63173 10.6666 1.33325 10.3681 1.33325 9.99992V5.99992Z",fill:"currentColor"},children:[]},{type:"element",name:"path",attributes:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.4734 5.36186C6.75457 5.27673 7.05833 5.38568 7.22129 5.63012L8.66659 7.79807V5.99992C8.66659 5.63173 8.96506 5.33325 9.33325 5.33325C9.70144 5.33325 9.99992 5.63173 9.99992 5.99992V9.99992C9.99992 10.2937 9.80761 10.5528 9.52644 10.638C9.24527 10.7231 8.94151 10.6142 8.77855 10.3697L7.33325 8.20177V9.99992C7.33325 10.3681 7.03478 10.6666 6.66659 10.6666C6.2984 10.6666 5.99992 10.3681 5.99992 9.99992V5.99992C5.99992 5.70614 6.19222 5.44699 6.4734 5.36186Z",fill:"currentColor"},children:[]},{type:"element",name:"path",attributes:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.0768 5.38453C11.4167 5.24292 11.807 5.40364 11.9486 5.74351L12.9999 8.26658L14.0512 5.74351C14.1928 5.40364 14.5831 5.24292 14.923 5.38453C15.2629 5.52614 15.4236 5.91646 15.282 6.25633L13.6153 10.2563C13.5118 10.5048 13.2691 10.6666 12.9999 10.6666C12.7308 10.6666 12.488 10.5048 12.3845 10.2563L10.7179 6.25633C10.5763 5.91646 10.737 5.52614 11.0768 5.38453Z",fill:"currentColor"},children:[]}]}]}]},name:"Env"})},341579,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"path",attributes:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.23814 1.33333H9.76188C10.4844 1.33332 11.0672 1.33332 11.5391 1.37187C12.025 1.41157 12.4518 1.49545 12.8466 1.69664C13.4739 2.01622 13.9838 2.52615 14.3034 3.15336C14.5046 3.54822 14.5884 3.97501 14.6281 4.46091C14.6667 4.93283 14.6667 5.51559 14.6667 6.23811V9.76188C14.6667 10.4844 14.6667 11.0672 14.6281 11.5391C14.5884 12.025 14.5046 12.4518 14.3034 12.8466C13.9838 13.4738 13.4739 13.9838 12.8466 14.3033C12.4518 14.5045 12.025 14.5884 11.5391 14.6281C11.0672 14.6667 10.4844 14.6667 9.7619 14.6667H6.23812C5.51561 14.6667 4.93284 14.6667 4.46093 14.6281C3.97503 14.5884 3.54824 14.5045 3.15338 14.3033C2.52617 13.9838 2.01623 13.4738 1.69666 12.8466C1.49546 12.4518 1.41159 12.025 1.37189 11.5391C1.33333 11.0672 1.33334 10.4844 1.33334 9.76187V6.23812C1.33334 5.5156 1.33333 4.93283 1.37189 4.46091C1.41159 3.97501 1.49546 3.54822 1.69666 3.15336C2.01623 2.52615 2.52617 2.01622 3.15338 1.69664C3.54824 1.49545 3.97503 1.41157 4.46093 1.37187C4.93285 1.33332 5.51561 1.33332 6.23814 1.33333ZM4.5695 2.70078C4.16606 2.73374 3.93427 2.79519 3.7587 2.88465C3.38237 3.0764 3.07641 3.38236 2.88466 3.75868C2.79521 3.93425 2.73376 4.16604 2.70079 4.56949C2.6672 4.98072 2.66668 5.50892 2.66668 6.26666V9.73333C2.66668 10.4911 2.6672 11.0193 2.70079 11.4305C2.73376 11.8339 2.79521 12.0657 2.88466 12.2413C3.07641 12.6176 3.38237 12.9236 3.7587 13.1153C3.93427 13.2048 4.16606 13.2662 4.5695 13.2992C4.98073 13.3328 5.50894 13.3333 6.26668 13.3333H9.73334C10.4911 13.3333 11.0193 13.3328 11.4305 13.2992C11.834 13.2662 12.0658 13.2048 12.2413 13.1153C12.6176 12.9236 12.9236 12.6176 13.1154 12.2413C13.2048 12.0657 13.2663 11.8339 13.2992 11.4305C13.3328 11.0193 13.3333 10.4911 13.3333 9.73333V6.26666C13.3333 5.50892 13.3328 4.98072 13.2992 4.56949C13.2663 4.16604 13.2048 3.93425 13.1154 3.75868C12.9236 3.38236 12.6176 3.0764 12.2413 2.88465C12.0658 2.79519 11.834 2.73374 11.4305 2.70078C11.0193 2.66718 10.4911 2.66666 9.73334 2.66666H6.26668C5.50894 2.66666 4.98073 2.66718 4.5695 2.70078ZM5.08339 5.33333C5.08339 4.96514 5.38187 4.66666 5.75006 4.66666H6.68433C7.324 4.66666 7.87606 5.09677 8.04724 5.70542L8.30138 6.60902L9.2915 5.43554C9.7018 4.94926 10.3035 4.66666 10.9399 4.66666H11C11.3682 4.66666 11.6667 4.96514 11.6667 5.33333C11.6667 5.70152 11.3682 5.99999 11 5.99999H10.9399C10.7005 5.99999 10.4702 6.10616 10.3106 6.29537L8.73751 8.15972L9.23641 9.93357C9.24921 9.97909 9.28574 10 9.31579 10H10.2501C10.6182 10 10.9167 10.2985 10.9167 10.6667C10.9167 11.0349 10.6182 11.3333 10.2501 11.3333H9.31579C8.67612 11.3333 8.12406 10.9032 7.95288 10.2946L7.69871 9.39088L6.70852 10.5644C6.29822 11.0507 5.6965 11.3333 5.06011 11.3333H5.00001C4.63182 11.3333 4.33334 11.0349 4.33334 10.6667C4.33334 10.2985 4.63182 10 5.00001 10H5.06011C5.29949 10 5.52982 9.89383 5.68946 9.70462L7.26258 7.84019L6.76371 6.06642C6.75091 6.0209 6.71438 5.99999 6.68433 5.99999H5.75006C5.38187 5.99999 5.08339 5.70152 5.08339 5.33333Z",fill:"currentColor"},children:[]}]},name:"GlobalVariable"})},274378,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{id:"Icon-3-dots"},children:[{type:"element",name:"path",attributes:{id:"Icon",d:"M5 6.5V5M8.93934 7.56066L10 6.5M10.0103 11.5H11.5103",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},children:[]}]}]},name:"Icon3Dots"})},641469,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"21",height:"8",viewBox:"0 0 21 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"path",attributes:{d:"M0.646446 3.64645C0.451185 3.84171 0.451185 4.15829 0.646446 4.35355L3.82843 7.53553C4.02369 7.7308 4.34027 7.7308 4.53553 7.53553C4.7308 7.34027 4.7308 7.02369 4.53553 6.82843L1.70711 4L4.53553 1.17157C4.7308 0.976311 4.7308 0.659728 4.53553 0.464466C4.34027 0.269204 4.02369 0.269204 3.82843 0.464466L0.646446 3.64645ZM21 3.5L1 3.5V4.5L21 4.5V3.5Z",fill:"currentColor","fill-opacity":"0.3"},children:[]}]},name:"LongArrowLeft"})},103751,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"26",height:"8",viewBox:"0 0 26 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"path",attributes:{d:"M25.3536 4.35355C25.5488 4.15829 25.5488 3.84171 25.3536 3.64644L22.1716 0.464465C21.9763 0.269202 21.6597 0.269202 21.4645 0.464465C21.2692 0.659727 21.2692 0.976309 21.4645 1.17157L24.2929 4L21.4645 6.82843C21.2692 7.02369 21.2692 7.34027 21.4645 7.53553C21.6597 7.73079 21.9763 7.73079 22.1716 7.53553L25.3536 4.35355ZM3.59058e-08 4.5L25 4.5L25 3.5L-3.59058e-08 3.5L3.59058e-08 4.5Z",fill:"currentColor","fill-opacity":"0.3"},children:[]}]},name:"LongArrowRight"})},862712,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"path",attributes:{d:"M28.0049 16C28.0049 20.4183 24.4231 24 20.0049 24C15.5866 24 12.0049 20.4183 12.0049 16C12.0049 11.5817 15.5866 8 20.0049 8C24.4231 8 28.0049 11.5817 28.0049 16Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},children:[]},{type:"element",name:"path",attributes:{d:"M4.00488 16H6.67155",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},children:[]},{type:"element",name:"path",attributes:{d:"M4.00488 9.33334H8.00488",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},children:[]},{type:"element",name:"path",attributes:{d:"M4.00488 22.6667H8.00488",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},children:[]},{type:"element",name:"path",attributes:{d:"M26 22L29.3333 25.3333",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},children:[]}]},name:"SearchMenu"})},234661,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{id:"Tools","clip-path":"url(#clip0_5381_39479)"},children:[{type:"element",name:"path",attributes:{id:"vector",d:"M13.4375 14.4375V6.8125H2.5625V14.4375C2.5625 14.9898 3.01022 15.4375 3.5625 15.4375H12.4375C12.9898 15.4375 13.4375 14.9898 13.4375 14.4375Z",stroke:"currentColor","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},children:[]},{type:"element",name:"path",attributes:{id:"vector_2",d:"M13.6254 2.875L11.1738 6.47327",stroke:"currentColor","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},children:[]},{type:"element",name:"path",attributes:{id:"vector_3",d:"M6.3125 9.8125H9.6875",stroke:"currentColor","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},children:[]},{type:"element",name:"path",attributes:{id:"vector_4",d:"M8.63355 1.88044L8.75 1.64754L8.86645 1.88044C8.97531 2.09816 9.15184 2.27469 9.36956 2.38355L9.60246 2.5L9.36956 2.61645C9.15184 2.72531 8.97531 2.90184 8.86645 3.11956L8.75 3.35246L8.63355 3.11956C8.52469 2.90184 8.34816 2.72531 8.13044 2.61645L7.89754 2.5L8.13044 2.38355C8.34816 2.27469 8.52469 2.09816 8.63355 1.88044Z",stroke:"currentColor","stroke-width":"1.25","stroke-linecap":"square","stroke-linejoin":"round"},children:[]},{type:"element",name:"path",attributes:{id:"vector_5",d:"M4.625 3.14754L4.61865 3.16025C4.51946 3.35862 4.35862 3.51946 4.16025 3.61865L4.14754 3.625L4.16025 3.63135C4.35862 3.73054 4.51946 3.89138 4.61865 4.08975L4.625 4.10246L4.63135 4.08975C4.73054 3.89138 4.89138 3.73054 5.08975 3.63135L5.10246 3.625L5.08975 3.61865C4.89138 3.51946 4.73054 3.35862 4.63135 3.16025L4.625 3.14754ZM4.625 3.14754L4.63135 3.16025L4.625 3.14754Z",stroke:"currentColor","stroke-width":"1.25","stroke-linecap":"square","stroke-linejoin":"round"},children:[]}]},{type:"element",name:"defs",attributes:{},children:[{type:"element",name:"clipPath",attributes:{id:"clip0_5381_39479"},children:[{type:"element",name:"rect",attributes:{width:"16",height:"16",fill:"white",transform:"translate(0 0.5)"},children:[]}]}]}]},name:"Tools"})},800218,e=>{e.v({$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0})},649538,e=>{"use strict";var t=e.i(918077);e.s(["ChevronRight",()=>t.default])},379636,e=>{"use strict";var t=e.i(737753);e.s(["GlobalVariable",()=>t.default])},505816,e=>{"use strict";var t=e.i(535614);e.s(["InputField",()=>t.default])},981875,e=>{"use strict";var t,r=((t={}).conversation="conversation",t.environment="env",t.node="node",t.system="sys",t);e.s(["VarInInspectType",()=>r])},42241,45490,370546,268571,737753,479735,484655,3371,e=>{"use strict";var t=e.i(563199),r=e.i(807324),i=e.i(986823);let n=e=>{let{ref:n,...l}=e;return(0,t.jsx)(r.default,{...l,ref:n,data:i.default})};n.displayName="BubbleX",e.s(["default",0,n],45490),e.i(218459);var l=e.i(792257);let a=e=>{let{ref:i,...n}=e;return(0,t.jsx)(r.default,{...n,ref:i,data:l.default})};a.displayName="DragHandle",e.s(["default",0,a],370546);var o=e.i(262909);let s=e=>{let{ref:i,...n}=e;return(0,t.jsx)(r.default,{...n,ref:i,data:o.default})};s.displayName="Env",e.s(["default",0,s],268571);var d=e.i(341579);let c=e=>{let{ref:i,...n}=e;return(0,t.jsx)(r.default,{...n,ref:i,data:d.default})};c.displayName="GlobalVariable",e.s(["default",0,c],737753);var u=e.i(274378);let p=e=>{let{ref:i,...n}=e;return(0,t.jsx)(r.default,{...n,ref:i,data:u.default})};p.displayName="Icon3Dots",e.s(["default",0,p],479735);var m=e.i(641469);let h=e=>{let{ref:i,...n}=e;return(0,t.jsx)(r.default,{...n,ref:i,data:m.default})};h.displayName="LongArrowLeft",e.s(["default",0,h],484655);var x=e.i(103751);let f=e=>{let{ref:i,...n}=e;return(0,t.jsx)(r.default,{...n,ref:i,data:x.default})};f.displayName="LongArrowRight",e.s(["default",0,f],3371),e.i(862712),e.i(234661),e.s([],42241)},825220,e=>{"use strict";var t=e.i(268571);e.s(["Env",()=>t.default])},678383,e=>{"use strict";var t=e.i(328960);e.s(["Variable02",()=>t.default])},226577,e=>{"use strict";var t=e.i(45490);e.s(["BubbleX",()=>t.default])},603198,866438,54010,645960,971481,95240,e=>{"use strict";var t=e.i(563199),r=e.i(268255),i=e.i(935139);e.i(42241);var n=e.i(226577),l=e.i(825220),a=e.i(379636);e.i(661734);var o=e.i(505816);e.i(39598);var s=e.i(678383);e.i(916131);var d=e.i(806436),c=e.i(959752),u=e.i(981875),p=e.i(963855);let m=(e,t,i)=>(0,r.useMemo)(()=>t?"text-text-warning":"loop"===i?"text-util-colors-cyan-cyan-500":(0,p.isENV)(e)||i===u.VarInInspectType.environment||"environment"===i?"text-util-colors-violet-violet-600":(0,p.isConversationVar)(e)||i===u.VarInInspectType.conversation||"conversation"===i?"text-util-colors-teal-teal-700":(0,p.isGlobalVar)(e)||i===u.VarInInspectType.system?"text-util-colors-orange-orange-600":"text-text-accent",[e,t,i]),h=(0,r.memo)(e=>{let{className:r,variables:c=[],variableCategory:m}=e,h="loop"===m?d.Loop:"rag"===m||(0,p.isRagVariableVar)(c)?o.InputField:(0,p.isENV)(c)||m===u.VarInInspectType.environment||"environment"===m?l.Env:(0,p.isConversationVar)(c)||m===u.VarInInspectType.conversation||"conversation"===m?n.BubbleX:(0,p.isGlobalVar)(c)||m===u.VarInInspectType.system?a.GlobalVariable:s.Variable02;return h&&(0,t.jsx)(h,{className:(0,i.cn)("size-3.5 shrink-0",r)})}),x=(0,r.memo)(e=>{let{isExceptionVariable:r,variableCategory:n,variables:l=[],className:a}=e,o=m(l,r,n);return(0,t.jsx)(h,{variables:l,variableCategory:n,className:(0,i.cn)(o,a)})});e.s(["default",0,x],866438);var f=e.i(837699),g=e.i(403861),v=e.i(421001);let y=(0,r.memo)(e=>{let n,l,a,{variables:o,className:s,notShowFullPath:d}=e,u=(n=c.VAR_SHOW_NAME_MAP[o.join(".")],l=o.slice(1).join("."),(0,p.isRagVariableVar)(o)&&(l=o.slice(2).join(".")),a=(0,r.useMemo)(()=>{l=o.slice(1).join("."),(0,p.isRagVariableVar)(o)&&(l=o.slice(2).join("."));let e=o.length,t=(0,p.isSystemVar)(o),r=d?o[e-1]:l;return`${t?"sys.":""}${r}`},[o,d]),n||a);return(0,t.jsx)("div",{className:(0,i.cn)("system-xs-medium truncate",s),title:u,children:u})});var b=e.i(120219);let C=(0,r.memo)(e=>{let{nodeType:r,nodeTitle:i}=e;return r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.VarBlockIcon,{type:r,className:"shrink-0 text-text-secondary"}),i&&(0,t.jsx)("div",{className:"system-xs-medium max-w-[60px] truncate text-text-secondary",title:i,children:i}),(0,t.jsx)("div",{className:"system-xs-regular shrink-0 text-divider-deep",children:"/"})]}):null}),w=(0,r.memo)(e=>{let{nodeType:r,nodeTitle:n,variables:l,variableType:a,className:o,errorMsg:s,onClick:d,isExceptionVariable:c,ref:u,notShowFullPath:x,rightSlot:b}=e,w=m(l,c),j=!((0,p.isENV)(l)||(0,p.isConversationVar)(l)||(0,p.isGlobalVar)(l)||(0,p.isRagVariableVar)(l));return(0,t.jsxs)("div",{className:(0,i.cn)("inline-flex h-6 max-w-full items-center space-x-0.5 rounded-md border-[0.5px] border-components-panel-border-subtle bg-components-badge-white-to-dark px-1.5 shadow-xs",o),onClick:d,ref:u,children:[j&&(0,t.jsx)(C,{nodeType:r,nodeTitle:n}),x&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.RiMoreLine,{className:"h-3 w-3 shrink-0 text-text-secondary"}),(0,t.jsx)("div",{className:"system-xs-regular shrink-0 text-divider-deep",children:"/"})]}),(0,t.jsx)(h,{variables:l,className:w}),(0,t.jsx)(y,{variables:l,className:(0,i.cn)(w),notShowFullPath:x}),!!a&&(0,t.jsx)("div",{className:"system-xs-regular shrink-0 text-text-tertiary",children:(0,g.capitalize)(a)}),!!s&&(0,t.jsx)(v.default,{popupContent:s,asChild:!0,children:(0,t.jsx)(f.RiErrorWarningFill,{className:"h-3 w-3 shrink-0 text-text-destructive"})}),b]})}),j=(0,r.memo)(e=>{let{isSelected:r,variables:n,errorMsg:l,...a}=e,{hoverBorderColor:o,hoverBgColor:s,selectedBorderColor:d,selectedBgColor:c}=l?{hoverBorderColor:"hover:border-state-destructive-active",hoverBgColor:"hover:bg-state-destructive-hover",selectedBorderColor:"!border-state-destructive-solid",selectedBgColor:"!bg-state-destructive-hover"}:(0,p.isENV)(n)?{hoverBorderColor:"hover:border-util-colors-violet-violet-100",hoverBgColor:"hover:bg-util-colors-violet-violet-50",selectedBorderColor:"border-util-colors-violet-violet-600",selectedBgColor:"bg-util-colors-violet-violet-50"}:(0,p.isConversationVar)(n)?{hoverBorderColor:"hover:border-util-colors-teal-teal-100",hoverBgColor:"hover:bg-util-colors-teal-teal-50",selectedBorderColor:"border-util-colors-teal-teal-600",selectedBgColor:"bg-util-colors-teal-teal-50"}:{hoverBorderColor:"hover:border-state-accent-alt",hoverBgColor:"hover:bg-state-accent-hover",selectedBorderColor:"border-state-accent-solid",selectedBgColor:"bg-state-accent-hover"};return(0,t.jsx)(w,{className:(0,i.cn)("h-[18px] space-x-[1px] rounded-[5px] px-1 shadow-xs",!r&&s,!r&&o,r&&"border",r&&d,r&&c),variables:n,errorMsg:l,...a})});e.s(["default",0,j],54010);let N=(0,r.memo)(e=>(0,t.jsx)(w,{className:(0,i.cn)("w-full space-x-[1px] bg-workflow-block-parma-bg px-1 shadow-none"),...e}));e.s(["default",0,N],645960);let k=(0,r.memo)(e=>(0,t.jsx)(w,{...e}));e.s(["default",0,k],971481);let V=(0,r.memo)(e=>(0,t.jsx)(w,{className:(0,i.cn)("h-[18px] space-x-[1px] rounded-[5px] px-1 shadow-xs"),...e}));e.s(["default",0,V],95240),e.s([],603198)},892081,e=>{"use strict";var t=e.i(393689),r=e.i(220431);let i=function(e){if(!e||!document.getRootNode)return document;var t,i=Array.isArray(e)?e:[e];return i.every(function(e){var t=(0,r.getTargetElement)(e);return!!t&&t.getRootNode()instanceof ShadowRoot})?(t=(0,r.getTargetElement)(i[0]))?t.getRootNode():document:document};var n=e.i(99878);function l(e,l,a){void 0===a&&(a="click");var o=(0,t.default)(e);(0,n.default)(function(){var e=function(e){(Array.isArray(l)?l:[l]).some(function(t){var i=(0,r.getTargetElement)(t);return!i||i.contains(e.target)})||o.current(e)},t=i(l),n=Array.isArray(a)?a:[a];return n.forEach(function(r){return t.addEventListener(r,e)}),function(){n.forEach(function(r){return t.removeEventListener(r,e)})}},Array.isArray(a)?a:[a],l)}e.s(["useClickAway",()=>l],892081)},112757,e=>{"use strict";var t=e.i(707844);e.s(["Line3",()=>t.default])}]);