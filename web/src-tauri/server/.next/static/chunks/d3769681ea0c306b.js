(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,893185,e=>{"use strict";var t=e.i(268255),s=e.i(192447),a=e.i(908432);e.i(275225);var o=e.i(705405);e.s(["useFloatingRight",0,e=>{let[i,l]=(0,t.useState)(!1),r=(0,o.useStore)(e=>e.nodePanelWidth),n=(0,o.useStore)(e=>e.workflowCanvasWidth),d=(0,o.useStore)(e=>e.otherPanelWidth),c=(0,s.useStore)((0,a.useShallow)(e=>{let t=e.getNodes().find(e=>e.data.selected);if(t)return t.id}));(0,t.useEffect)(()=>{"number"==typeof n&&l(n-(c?r:0)-d-400-4<e+4)},[n,r,d,c,e]);let p=(0,t.useMemo)(()=>i?Math.min(e,(c?r:0)+d):e,[i,c,r,d,e]);return{floatingRight:i,floatingRightWidth:p}}])},517067,e=>{"use strict";var t=e.i(563199),s=e.i(268255),a=e.i(18800),o=e.i(120219);e.i(845780);var i=e.i(95131),l=e.i(390622),r=e.i(935139);let n=s.memo(e=>{let{label:a,value:n,selected:d,nodeData:c,onClick:p}=e,u=(0,i.useToolIcon)(c),x=(0,s.useCallback)(()=>{p?.(n)},[n,p]);return(0,t.jsxs)("div",{className:(0,r.cn)("flex cursor-pointer flex-col gap-1 rounded-xl border border-components-option-card-option-border bg-components-option-card-option-bg p-2.5 shadow-shadow-shadow-3",d?"border-components-option-card-option-selected-border bg-components-option-card-option-selected-bg shadow-xs ring-[0.5px] ring-inset ring-components-option-card-option-selected-border":"hover:bg-components-option-card-bg-hover hover:border-components-option-card-option-border-hover hover:shadow-xs"),onClick:x,children:[(0,t.jsx)("div",{className:"flex size-7 shrink-0 items-center justify-center rounded-lg border-[0.5px] border-components-panel-border bg-background-default-dodge p-1",children:(0,t.jsx)(o.default,{type:l.BlockEnum.DataSource,toolIcon:u})}),(0,t.jsx)("div",{className:(0,r.cn)("system-sm-medium line-clamp-2 grow text-text-secondary",d&&"text-text-primary"),title:a,children:a})]})});e.s(["default",0,e=>{let{dataSourceNodeId:o,onSelect:i}=e,l=(0,a.useDatasourceOptions)(),r=(0,s.useCallback)(e=>{let t=l.find(t=>t.value===e);t&&i({nodeId:t.value,nodeData:t.data})},[i,l]);return(0,s.useEffect)(()=>{l.length>0&&!o&&r(l[0].value)},[]),(0,t.jsx)("div",{className:"grid w-full grid-cols-4 gap-1",children:l.map(e=>(0,t.jsx)(n,{label:e.label,value:e.value,nodeData:e.data,selected:o===e.value,onClick:r},e.value))})}],517067)},388026,e=>{"use strict";var t=e.i(563199),s=e.i(837699),a=e.i(268255);e.i(152567);var o=e.i(408767),i=e.i(83278),l=e.i(757198);e.i(160186);var r=e.i(621830),n=e.i(935139),d=e.i(893185);e.i(275225);var c=e.i(705405),p=e.i(475390),u=e.i(517067),x=e.i(634440),m=e.i(237363),b=e.i(849225);let h=e=>{let{variables:s}=e,a=(0,b.useInitialData)(s),o=(0,b.useConfigurations)(s),i=(0,x.useAppForm)({defaultValues:a});return(0,t.jsx)("form",{className:"w-full",onSubmit:e=>{e.preventDefault(),e.stopPropagation()},children:(0,t.jsx)("div",{className:"flex flex-col gap-y-3 px-4 py-3",children:o.map((e,s)=>{let o=(0,m.default)({initialData:a,config:e});return(0,t.jsx)(o,{form:i},s)})})})},v=a.memo(e=>{let{onSelect:s,dataSourceNodeId:a}=e,{t:i}=(0,o.useTranslation)(),l=(0,c.useStore)(e=>e.pipelineId),{data:r}=(0,p.useDraftPipelinePreProcessingParams)({pipeline_id:l,node_id:a},!!l&&!!a);return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"system-sm-semibold-uppercase px-4 pt-2 text-text-secondary",children:i("inputFieldPanel.preview.stepOneTitle",{ns:"datasetPipeline"})}),(0,t.jsx)("div",{className:"px-4 py-2",children:(0,t.jsx)(u.default,{onSelect:s,dataSourceNodeId:a})}),(0,t.jsx)(h,{variables:r?.variables||[]})]})}),f=a.memo(e=>{let{dataSourceNodeId:s}=e,{t:a}=(0,o.useTranslation)(),i=(0,c.useStore)(e=>e.pipelineId),{data:l}=(0,p.useDraftPipelineProcessingParams)({pipeline_id:i,node_id:s},!!i&&!!s);return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"system-sm-semibold-uppercase px-4 pt-2 text-text-secondary",children:a("inputFieldPanel.preview.stepTwoTitle",{ns:"datasetPipeline"})}),(0,t.jsx)(h,{variables:l?.variables||[]})]})});e.s(["default",0,()=>{let{t:e}=(0,o.useTranslation)(),[c,p]=(0,a.useState)(),{toggleInputFieldPreviewPanel:u}=(0,r.useInputFieldPanel)(),{floatingRight:x,floatingRightWidth:m}=(0,d.useFloatingRight)(480),b=(0,a.useCallback)(()=>{u()},[u]);return(0,t.jsxs)("div",{className:(0,n.cn)("mr-1 flex h-full flex-col overflow-y-auto rounded-2xl border-y-[0.5px] border-l-[0.5px] border-components-panel-border bg-components-panel-bg shadow-xl shadow-shadow-shadow-5","transition-all duration-300 ease-in-out",x&&"absolute right-0 z-[100]"),style:{width:`${m}px`},children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-2 px-4 pt-1",children:[(0,t.jsx)("div",{className:"grow py-1",children:(0,t.jsx)(i.default,{className:"border-text-accent-secondary bg-components-badge-bg-dimm text-text-accent-secondary",children:e("operations.preview",{ns:"datasetPipeline"})})}),(0,t.jsx)("button",{type:"button",className:"flex size-6 shrink-0 items-center justify-center",onClick:b,children:(0,t.jsx)(s.RiCloseLine,{className:"size-4 text-text-tertiary"})})]}),(0,t.jsx)(v,{onSelect:p,dataSourceNodeId:c?.nodeId||""}),(0,t.jsx)("div",{className:"px-4 py-2",children:(0,t.jsx)(l.default,{type:"horizontal",className:"bg-divider-subtle"})}),(0,t.jsx)(f,{dataSourceNodeId:c?.nodeId||""})]})}],388026)},645423,e=>{e.n(e.i(388026))}]);