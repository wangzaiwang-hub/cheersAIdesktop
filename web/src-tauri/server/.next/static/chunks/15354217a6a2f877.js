(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,261484,e=>{"use strict";var t=e.i(268255),s={SVG:"image/svg+xml",ICO:"image/x-icon",GIF:"image/gif",PNG:"image/png"};let n=function(e){(0,t.useEffect)(function(){if(e){var t=e.split("."),n=t[t.length-1].toLocaleUpperCase(),l=document.querySelector("link[rel*='icon']")||document.createElement("link");l.type=s[n],l.href=e,l.rel="shortcut icon",document.getElementsByTagName("head")[0].appendChild(l)}},[e])};var l=e.i(685888),a=e.i(354440),i={restoreOnUnmount:!1};let o=function(e,s){void 0===s&&(s=i);var n=(0,t.useRef)(a.default?document.title:"");(0,t.useEffect)(function(){document.title=e},[e]),(0,l.default)(function(){s.restoreOnUnmount&&(document.title=n.current)})};var r=e.i(494268),c=e.i(168014);function d(e){let s=(0,r.useIsSystemFeaturesPending)(),l=(0,r.useGlobalPublicStore)(e=>e.systemFeatures),a=e?`${e} - `:"",i="",d="";!1===s&&(l.branding.enabled?(i=`${a}${l.branding.application_title}`,d=l.branding.favicon):(i=`${a}Dify`,d=`${c.basePath}/favicon.ico`)),o(i),(0,t.useEffect)(()=>{let e=null;return l.branding.favicon&&(document.querySelectorAll("link[rel='icon'], link[rel='shortcut icon'], link[rel='apple-touch-icon'], link[rel='mask-icon']").forEach(e=>e.parentNode?.removeChild(e)),(e=document.createElement("link")).rel="apple-touch-icon",e.href=l.branding.favicon,document.head.appendChild(e)),()=>{e?.remove()}},[l.branding.favicon]),n(d)}e.s(["default",()=>d],261484)},993628,e=>{"use strict";var t=e.i(124836);let s=(0,e.i(339548).createContext)({controlUpdateInstalledApps:0,setControlUpdateInstalledApps:t.noop,hasEditPermission:!1,installedApps:[],setInstalledApps:t.noop,isFetchingInstalledApps:!1,setIsFetchingInstalledApps:t.noop,isShowTryAppPanel:!1,setShowTryAppPanel:t.noop,currentApp:void 0});e.s(["default",0,s])},217047,e=>{e.v({actionIcon:"style-module__eu-5gG__actionIcon",actionItem:"style-module__eu-5gG__actionItem",actionName:"style-module__eu-5gG__actionName",btn:"style-module__eu-5gG__btn",commonIcon:"style-module__eu-5gG__commonIcon",deleteActionItem:"style-module__eu-5gG__deleteActionItem",deleteActionItemChild:"style-module__eu-5gG__deleteActionItemChild",open:"style-module__eu-5gG__open"})},111411,e=>{e.v({dark:"style-module__1Ea5Da__dark",light:"style-module__1Ea5Da__light"})},151454,e=>{"use strict";var t=e.i(563199),s=e.i(268255);e.i(152567);var n=e.i(408767),l=e.i(326531),a=e.i(837699),i=e.i(417944),o=e.i(554327),r=e.i(339548),c=e.i(547105),d=e.i(757198),u=e.i(993628),m=e.i(271743),p=e.i(356084),x=e.i(935139),h=e.i(137667),f=e.i(726371),g=e.i(257899),b=e.i(391185);e.i(47690);var v=e.i(75498),v=v,y=e.i(217047);let j=s.memo(e=>{let{className:l,isItemHovering:o,isPinned:r,togglePin:c,isShowRenameConversation:d,onRenameConversation:u,isShowDelete:m,onDelete:p}=e,{t:h}=(0,n.useTranslation)(),[f,g]=(0,s.useState)(!1),j=(0,s.useRef)(null),[_,{setTrue:N,setFalse:k}]=(0,i.useBoolean)(!1);return(0,s.useEffect)(()=>{o||_||g(!1)},[o,_]),(0,t.jsxs)(b.PortalToFollowElem,{open:f,onOpenChange:g,placement:"bottom-end",offset:4,children:[(0,t.jsx)(b.PortalToFollowElemTrigger,{onClick:()=>g(e=>!e),children:(0,t.jsx)("div",{className:(0,x.cn)(l,y.default.btn,"h-6 w-6 rounded-md border-none py-1",(o||f)&&`${y.default.open} !bg-components-actionbar-bg !shadow-none`),"data-testid":"item-operation-trigger"})}),(0,t.jsx)(b.PortalToFollowElemContent,{className:"z-50",children:(0,t.jsxs)("div",{ref:j,className:"min-w-[120px] rounded-lg border border-components-panel-border bg-components-panel-bg-blur p-1 shadow-lg backdrop-blur-[5px]",onMouseEnter:N,onMouseLeave:k,onClick:e=>{e.stopPropagation()},children:[(0,t.jsxs)("div",{className:(0,x.cn)(y.default.actionItem,"group hover:bg-state-base-hover"),onClick:c,children:[(0,t.jsx)(v.default,{className:"h-4 w-4 shrink-0 text-text-secondary"}),(0,t.jsx)("span",{className:y.default.actionName,children:h(r?"sidebar.action.unpin":"sidebar.action.pin",{ns:"explore"})})]}),d&&(0,t.jsxs)("div",{className:(0,x.cn)(y.default.actionItem,"group hover:bg-state-base-hover"),onClick:u,children:[(0,t.jsx)(a.RiEditLine,{className:"h-4 w-4 shrink-0 text-text-secondary"}),(0,t.jsx)("span",{className:y.default.actionName,children:h("sidebar.action.rename",{ns:"explore"})})]}),m&&(0,t.jsxs)("div",{className:(0,x.cn)(y.default.actionItem,y.default.deleteActionItem,"group hover:bg-state-base-hover"),onClick:p,children:[(0,t.jsx)(a.RiDeleteBinLine,{className:(0,x.cn)(y.default.deleteActionItemChild,"h-4 w-4 shrink-0 stroke-current stroke-2 text-text-secondary")}),(0,t.jsx)("span",{className:(0,x.cn)(y.default.actionName,y.default.deleteActionItemChild),children:h("sidebar.action.delete",{ns:"explore"})})]})]})})]})});function _(e){let{isMobile:n,name:a,id:i,icon_type:o,icon:r,icon_background:c,icon_url:d,isSelected:u,isPinned:m,togglePin:p,uninstallable:h,onDelete:b}=e,v=(0,l.useRouter)(),y=`/explore/installed/${i}`,_=(0,s.useRef)(null),N=(0,f.useHover)(_);return(0,t.jsxs)("div",{ref:_,className:(0,x.cn)("system-sm-medium flex h-8 items-center justify-between rounded-lg px-2 text-sm font-normal text-components-menu-item-text mobile:justify-center mobile:px-1",u?"bg-state-base-active text-components-menu-item-text-active":"hover:bg-state-base-hover hover:text-components-menu-item-text-hover"),onClick:()=>{v.push(y)},children:[n&&(0,t.jsx)(g.default,{size:"tiny",iconType:o,icon:r,background:c,imageUrl:d}),!n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex w-0 grow items-center space-x-2",children:[(0,t.jsx)(g.default,{size:"tiny",iconType:o,icon:r,background:c,imageUrl:d}),(0,t.jsx)("div",{className:"system-sm-regular truncate text-components-menu-item-text",title:a,children:a})]}),(0,t.jsx)("div",{className:"h-6 shrink-0",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(j,{isPinned:m,isItemHovering:N,togglePin:p,isShowDelete:!h&&!u,onDelete:()=>b(i)})})]})]},i)}var N=e.i(683257),k=e.i(922521),w=e.i(648404),A=e.i(111411);let I="sidebar.noApps",C=s.memo(()=>{let{t:e}=(0,n.useTranslation)(),{theme:s}=(0,k.default)(),l=(0,N.useDocLink)();return(0,t.jsxs)("div",{className:"rounded-xl bg-background-default-subtle p-4",children:[(0,t.jsx)("div",{className:(0,x.cn)("h-[35px] w-[86px] bg-contain bg-center bg-no-repeat",s===w.Theme.dark?A.default.dark:A.default.light)}),(0,t.jsx)("div",{className:"system-sm-semibold mt-2 text-text-secondary",children:e(`${I}.title`,{ns:"explore"})}),(0,t.jsx)("div",{className:"system-xs-regular my-1 text-text-tertiary",children:e(`${I}.description`,{ns:"explore"})}),(0,t.jsx)("a",{className:"system-xs-regular text-text-accent",target:"_blank",rel:"noopener noreferrer",href:l("/use-dify/publish/README"),children:e(`${I}.learnMore`,{ns:"explore"})})]})}),E=s.memo(e=>{let{controlUpdateInstalledApps:f}=e,{t:g}=(0,n.useTranslation)(),b=(0,l.useSelectedLayoutSegments)().slice(-1)[0],v="apps"===b,{installedApps:y,setInstalledApps:j,setIsFetchingInstalledApps:N}=(0,r.useContext)(u.default),{isFetching:k,data:w,refetch:A}=(0,p.useGetInstalledApps)(),{mutateAsync:I}=(0,p.useUninstallApp)(),{mutateAsync:E}=(0,p.useUpdateAppPinStatus)(),S=(0,m.default)()===m.MediaType.mobile,[T,{toggle:P}]=(0,i.useBoolean)(!1),[R,F]=(0,s.useState)(!1),[G,U]=(0,s.useState)(""),L=async()=>{await I(G),F(!1),h.default.notify({type:"success",message:g("api.remove",{ns:"common"})})},$=async(e,t)=>{await E({appId:e,isPinned:t}),h.default.notify({type:"success",message:g("api.success",{ns:"common"})})};(0,s.useEffect)(()=>{let e=w?.installed_apps;e&&e.length>0?j(e):j([])},[w,j]),(0,s.useEffect)(()=>{N(k)},[k,N]),(0,s.useEffect)(()=>{A()},[f,A]);let D=y.filter(e=>{let{is_pinned:t}=e;return t}).length;return(0,t.jsxs)("div",{className:(0,x.cn)("relative w-fit shrink-0 cursor-pointer px-3 pt-6 sm:w-[240px]",T&&"sm:w-[56px]"),children:[(0,t.jsx)("div",{className:(0,x.cn)(v?"text-text-accent":"text-text-tertiary"),children:(0,t.jsxs)(o.default,{href:"/explore/apps",className:(0,x.cn)(v?"bg-state-base-active":"hover:bg-state-base-hover","flex h-8 items-center gap-2 rounded-lg px-1 mobile:w-fit mobile:justify-center pc:w-full pc:justify-start"),children:[(0,t.jsx)("div",{className:"flex size-6 shrink-0 items-center justify-center rounded-md bg-components-icon-bg-blue-solid",children:(0,t.jsx)(a.RiAppsFill,{className:"size-3.5 text-components-avatar-shape-fill-stop-100"})}),!S&&!T&&(0,t.jsx)("div",{className:(0,x.cn)("truncate",v?"system-sm-semibold text-components-menu-item-text-active":"system-sm-regular text-components-menu-item-text"),children:g("sidebar.title",{ns:"explore"})})]})}),0===y.length&&!S&&!T&&(0,t.jsx)("div",{className:"mt-5",children:(0,t.jsx)(C,{})}),y.length>0&&(0,t.jsxs)("div",{className:"mt-5",children:[!S&&!T&&(0,t.jsx)("p",{className:"system-xs-medium-uppercase mb-1.5 break-all pl-2 uppercase text-text-tertiary mobile:px-0",children:g("sidebar.webApps",{ns:"explore"})}),(0,t.jsx)("div",{className:"space-y-0.5 overflow-y-auto overflow-x-hidden",style:{height:"calc(100vh - 250px)"},children:y.map((e,n)=>{let{id:l,is_pinned:a,uninstallable:i,app:{name:o,icon_type:r,icon:c,icon_url:u,icon_background:m}}=e;return(0,t.jsxs)(s.Fragment,{children:[(0,t.jsx)(_,{isMobile:S||T,name:o,icon_type:r,icon:c,icon_background:m,icon_url:u,id:l,isSelected:b?.toLowerCase()===l,isPinned:a,togglePin:()=>$(l,!a),uninstallable:i,onDelete:e=>{U(e),F(!0)}}),n===D-1&&n!==y.length-1&&(0,t.jsx)(d.default,{})]},l)})})]}),!S&&(0,t.jsx)("div",{className:"absolute bottom-3 left-3 flex size-8 cursor-pointer items-center justify-center text-text-tertiary",onClick:P,children:T?(0,t.jsx)(a.RiExpandRightLine,{className:"size-4.5"}):(0,t.jsx)(a.RiLayoutLeft2Line,{className:"size-4.5"})}),R&&(0,t.jsx)(c.default,{title:g("sidebar.delete.title",{ns:"explore"}),content:g("sidebar.delete.content",{ns:"explore"}),isShow:R,onConfirm:L,onCancel:()=>F(!1)})]})});var S=e.i(711536),T=e.i(261484),P=e.i(652669);let R=s.memo(e=>{let{children:a}=e,i=(0,l.useRouter)(),[o,r]=(0,s.useState)(0),{userProfile:c,isCurrentWorkspaceDatasetOperator:d}=(0,S.useAppContext)(),[m,p]=(0,s.useState)(!1),[x,h]=(0,s.useState)([]),[f,g]=(0,s.useState)(!1),{t:b}=(0,n.useTranslation)(),{data:v}=(0,P.useMembers)();(0,T.default)(b("menus.explore",{ns:"common"})),(0,s.useEffect)(()=>{if(!v?.accounts)return;let e=v.accounts.find(e=>e.id===c.id);p(e?.role!=="normal")},[v,c.id]),(0,s.useEffect)(()=>{if(d)return i.replace("/datasets")},[d]);let[y,j]=(0,s.useState)(void 0),[_,N]=(0,s.useState)(!1);return(0,t.jsx)("div",{className:"flex h-full overflow-hidden border-t border-divider-regular bg-background-body",children:(0,t.jsxs)(u.default.Provider,{value:{controlUpdateInstalledApps:o,setControlUpdateInstalledApps:r,hasEditPermission:m,installedApps:x,setInstalledApps:h,isFetchingInstalledApps:f,setIsFetchingInstalledApps:g,currentApp:y,isShowTryAppPanel:_,setShowTryAppPanel:(e,t)=>{e?j(t):j(void 0),N(e)}},children:[(0,t.jsx)(E,{controlUpdateInstalledApps:o}),(0,t.jsx)("div",{className:"w-0 grow",children:a})]})})}),F=s.memo(e=>{let{children:s}=e,{t:l}=(0,n.useTranslation)();return(0,T.default)(l("menus.explore",{ns:"common"})),(0,t.jsx)(R,{children:s})});e.s(["default",0,F],151454)}]);