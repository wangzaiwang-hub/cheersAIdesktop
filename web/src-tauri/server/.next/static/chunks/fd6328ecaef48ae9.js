(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10190,e=>{"use strict";let t;function r(e){return Array.isArray(e)?e:null==e?[]:[e]}let n="orpc";class a extends Error{constructor(...e){super(...e),this.name="AbortError"}}function i(){return globalThis["__@orpc/shared@1.13.4/otel/config__"]}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=i()?.tracer;return n?.startSpan(e,t,r)}function o(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return;let n=function(e){if(e instanceof Error){let t={message:e.message,name:e.name,stack:e.stack};return"code"in e&&("string"==typeof e.code||"number"==typeof e.code)&&(t.code=e.code),t}return{message:String(e)}}(t);e.recordException(n),r.signal?.aborted&&r.signal.reason===t||e.setStatus({code:2,message:n.message})}async function u(e,t){let{name:r,context:n,...a}=e,s=i()?.tracer;if(!s)return t();let u=async e=>{try{return await t(e)}catch(t){throw o(e,t,a),t}finally{e.end()}};return n?s.startActiveSpan(r,a,n,u):s.startActiveSpan(r,a,u)}async function l(e,t){let r=i();if(!e||!r)return t();let n=r.trace.setSpan(r.context.active(),e);return r.context.with(n,t)}function c(e){return!!e&&"object"==typeof e&&"next"in e&&"function"==typeof e.next&&Symbol.asyncIterator in e&&"function"==typeof e[Symbol.asyncIterator]}let p=Symbol.for("asyncDispose"),d=Symbol.asyncDispose??p;class h{#e=!1;#t=!1;#r;#n;constructor(e,t){this.#r=t,this.#n=function(e){let t=Promise.resolve();return function(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=t.catch(()=>{}).then(()=>e(...n))}}(async()=>{if(this.#e)return{done:!0,value:void 0};try{let t=await e();return t.done&&(this.#e=!0),t}catch(e){throw this.#e=!0,e}finally{this.#e&&!this.#t&&(this.#t=!0,await this.#r("next"))}})}next(){return this.#n()}async return(e){return this.#e=!0,this.#t||(this.#t=!0,await this.#r("return")),{done:!0,value:e}}async throw(e){throw this.#e=!0,this.#t||(this.#t=!0,await this.#r("throw")),e}async [d](){this.#e=!0,this.#t||(this.#t=!0,await this.#r("dispose"))}[Symbol.asyncIterator](){return this}}function f(e,t){let r,{name:n,...a}=e;return new h(async()=>{r??=s(n);try{let e=await l(r,()=>t.next());return r?.addEvent(e.done?"completed":"yielded"),e}catch(e){throw o(r,e,a),e}},async e=>{try{"next"!==e&&await l(r,()=>t.return?.())}catch(e){throw o(r,e,a),e}finally{r?.end()}})}function y(e){return async function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];try{return await t.next()}catch(r){throw await e(r,t,...n),r}}}function m(e,t,r){let n=(t,a)=>{let i=e[a];return i?i({...t,next:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;return n(e,a+1)}}):r(t)};return n(t,0)}function v(e){if(e)return JSON.parse(e)}function g(e){return JSON.stringify(e)}function w(e){if(!e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return t===Object.prototype||!t||!t.constructor}function E(e){return!!e&&("object"==typeof e||"function"==typeof e)}function S(e,t){let r=e;for(let e of t){if(!E(r))return;r=r[e]}return r}let x=((t=function(){}).prototype=Object.create(null),Object.freeze(t.prototype),t);function b(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return"function"==typeof e?e(...r):e}let A=/^\s*function\s*\(\)\s*\{\s*\[native code\]\s*\}\s*$/,O={BAD_REQUEST:{status:400,message:"Bad Request"},UNAUTHORIZED:{status:401,message:"Unauthorized"},FORBIDDEN:{status:403,message:"Forbidden"},NOT_FOUND:{status:404,message:"Not Found"},METHOD_NOT_SUPPORTED:{status:405,message:"Method Not Supported"},NOT_ACCEPTABLE:{status:406,message:"Not Acceptable"},TIMEOUT:{status:408,message:"Request Timeout"},CONFLICT:{status:409,message:"Conflict"},PRECONDITION_FAILED:{status:412,message:"Precondition Failed"},PAYLOAD_TOO_LARGE:{status:413,message:"Payload Too Large"},UNSUPPORTED_MEDIA_TYPE:{status:415,message:"Unsupported Media Type"},UNPROCESSABLE_CONTENT:{status:422,message:"Unprocessable Content"},TOO_MANY_REQUESTS:{status:429,message:"Too Many Requests"},CLIENT_CLOSED_REQUEST:{status:499,message:"Client Closed Request"},INTERNAL_SERVER_ERROR:{status:500,message:"Internal Server Error"},NOT_IMPLEMENTED:{status:501,message:"Not Implemented"},BAD_GATEWAY:{status:502,message:"Bad Gateway"},SERVICE_UNAVAILABLE:{status:503,message:"Service Unavailable"},GATEWAY_TIMEOUT:{status:504,message:"Gateway Timeout"}},T=Symbol.for("__@orpc/client@1.13.4/error/ORPC_ERROR_CONSTRUCTORS__");globalThis[T]??=new WeakSet;let I=globalThis[T];class R extends Error{defined;code;status;data;constructor(e,...t){const r=t[0]??{};if(void 0!==r.status&&!_(r.status))throw Error("[ORPCError] Invalid error status code.");super(function(e,t){return t||O[e]?.message||e}(e,r.message),r),this.code=e,this.status=r.status??O[e]?.status??500,this.defined=r.defined??!1,this.data=r.data}toJSON(){return{defined:this.defined,code:this.code,status:this.status,message:this.message,data:this.data}}static[Symbol.hasInstance](e){if(I.has(this)){let t=E(e)?Object.getPrototypeOf(e)?.constructor:null;if(t&&I.has(t))return!0}return super[Symbol.hasInstance](e)}}function _(e){return e<200||e>=400}function C(e){if(!w(e))return!1;let t=["defined","code","status","message","data"];return!Object.keys(e).some(e=>!t.includes(e))&&"defined"in e&&"boolean"==typeof e.defined&&"code"in e&&"string"==typeof e.code&&"status"in e&&"number"==typeof e.status&&_(e.status)&&"message"in e&&"string"==typeof e.message}function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new R(e.code,{...t,...e})}I.add(R);class k extends TypeError{}class q extends TypeError{}class N extends Error{data;constructor(e){super(e?.message??"An error event was received",e),this.data=e?.data}}class F{constructor(e={}){this.options=e}incomplete="";feed(e){this.incomplete+=e;let t=this.incomplete.lastIndexOf("\n\n");if(-1===t)return;let r=this.incomplete.slice(0,t).split(/\n\n/);for(let e of(this.incomplete=this.incomplete.slice(t+2),r)){let t=function(e){let t=e.replace(/\n+$/,"").split(/\n/),r={data:void 0,event:void 0,id:void 0,retry:void 0,comments:[]};for(let e of t){let t=e.indexOf(":"),n=-1===t?e:e.slice(0,t),a=-1===t?"":e.slice(t+1).replace(/^\s/,"");if(0===t)r.comments.push(a);else if("data"===n)r.data??="",r.data+=`${a}
`;else if("event"===n)r.event=a;else if("id"===n)r.id=a;else if("retry"===n){let e=Number.parseInt(a);Number.isInteger(e)&&e>=0&&e.toString()===a&&(r.retry=e)}}return r.data=r.data?.replace(/\n$/,""),r}(`${e}

`);this.options.onEvent&&this.options.onEvent(t)}}end(){if(this.incomplete)throw new q("Event Iterator ended before complete")}}class D extends TransformStream{constructor(){let e;super({start(t){e=new F({onEvent:e=>{t.enqueue(e)}})},transform(t){e.feed(t)},flush(){e.end()}})}}function $(e){if(e.includes("\n"))throw new k("Event's id must not contain a newline character")}function z(e){if(!Number.isInteger(e)||e<0)throw new k("Event's retry must be a integer and >= 0")}function U(e){if(e.includes("\n"))throw new k("Event's comment must not contain a newline character")}function K(e){let t="";if(t+=function(e){let t="";for(let r of e??[])U(r),t+=`: ${r}
`;return t}(e.comments),void 0!==e.event){if(e.event.includes("\n"))throw new k("Event's event must not contain a newline character");t+=`event: ${e.event}
`}return void 0!==e.retry&&(z(e.retry),t+=`retry: ${e.retry}
`),void 0!==e.id&&($(e.id),t+=`id: ${e.id}
`),t+=function(e){let t=e?.split(/\n/)??[],r="";for(let e of t)r+=`data: ${e}
`;return r}(e.data),t+="\n"}let j=Symbol("ORPC_EVENT_SOURCE_META");function L(e,t){if(void 0===t.id&&void 0===t.retry&&!t.comments?.length)return e;if(void 0!==t.id&&$(t.id),void 0!==t.retry&&z(t.retry),void 0!==t.comments)for(let e of t.comments)U(e);return new Proxy(e,{get:(e,r,n)=>r===j?t:Reflect.get(e,r,n)})}function M(e){return E(e)?Reflect.get(e,j):void 0}function B(e,t){let n={...e};for(let e in t)Array.isArray(t[e])?n[e]=[...r(n[e]),...t[e]]:void 0!==t[e]&&(Array.isArray(n[e])?n[e]=[...n[e],t[e]]:void 0!==n[e]?n[e]=[n[e],t[e]]:n[e]=t[e]);return n}function Q(e,t){let r=async e=>{let r=await t.error(e);if(r!==e){let t=M(e);t&&E(r)&&(r=L(r,t))}return r};return new h(async()=>{let{done:n,value:a}=await (async()=>{try{return await e.next()}catch(e){throw await r(e)}})(),i=await t.value(a,n);if(i!==a){let e=M(a);e&&E(i)&&(i=L(i,e))}return{done:n,value:i}},async()=>{try{await e.return?.()}catch(e){throw await r(e)}})}function G(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.path??[];return function e(t){return new Proxy(t,{get(t,r,n){let a=Reflect.get(t,r,n);return"then"!==r||"function"!=typeof a?a:new Proxy(a,{apply(r,n,a){if(2!==a.length||a.some(e=>{var t;return!("function"==typeof(t=e)&&A.test(t.toString()))}))return Reflect.apply(r,n,a);let i=!0;a[0].call(n,e(new Proxy(t,{get:(e,t,r)=>{if(i&&"then"===t){i=!1;return}return Reflect.get(e,t,r)}})))}})}})}(new Proxy(async function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];let[i,s={}]=n;return await e.call(r,i,{...s,context:s.context??{}})},{get:(n,a)=>"string"!=typeof a?Reflect.get(n,a):G(e,{...t,path:[...r,a]})}))}function W(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.forEach((e,r)=>{Array.isArray(t[r])?t[r].push(e):void 0!==t[r]?t[r]=[t[r],e]:t[r]=e}),t}class V{plugins;constructor(e=[]){this.plugins=[...e].sort((e,t)=>(e.order??0)-(t.order??0))}init(e){for(let t of this.plugins)t.init?.(e)}}class J{constructor(e,t,n={}){this.codec=e,this.sender=t,new V(n.plugins).init(n),this.interceptors=r(n.interceptors),this.clientInterceptors=r(n.clientInterceptors)}interceptors;clientInterceptors;call(e,t,r){return u({name:`${n}.${e.join("/")}`,signal:r.signal},a=>(a?.setAttribute("rpc.system",n),a?.setAttribute("rpc.method",e.join(".")),c(t)&&(t=f({name:"consume_event_iterator_input",signal:r.signal},t)),m(this.interceptors,{...r,path:e,input:t},async e=>{let t,{path:r,input:n,...s}=e,o=i(),l=o?.trace.getActiveSpan()??a;l&&o&&(t=o?.trace.setSpan(o.context.active(),l));let p=await u({name:"encode_request",context:t},()=>this.codec.encode(r,n,s)),d=await m(this.clientInterceptors,{...s,input:n,path:r,request:p},e=>{let{input:r,path:n,request:a,...i}=e;return u({name:"send_request",signal:i.signal,context:t},()=>this.sender.call(a,i,n,r))}),h=await u({name:"decode_response",context:t},()=>this.codec.decode(d,s,r,n));return c(h)?f({name:"consume_event_iterator_output",signal:s.signal},h):h})))}}function Y(e){return`/${e.map(encodeURIComponent).join("/")}`}class H extends V{initRuntimeAdapter(e){for(let t of this.plugins)t.initRuntimeAdapter?.(e)}}class X{fetch;toFetchRequestOptions;adapterInterceptors;constructor(e){new H(e.plugins).initRuntimeAdapter(e),this.fetch=e.fetch??globalThis.fetch.bind(globalThis),this.toFetchRequestOptions=e,this.adapterInterceptors=r(e.adapterInterceptors)}async call(e,t,r,n){let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Headers;for(let[r,n]of Object.entries(e))if(Array.isArray(n))for(let e of n)t.append(r,e);else void 0!==n&&t.append(r,n);return t}(e.headers),n=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t.get("content-disposition");if(t.delete("content-type"),t.delete("content-disposition"),void 0!==e){if(e instanceof Blob){var a;let r,i;return t.set("content-type",e.type),t.set("content-length",e.size.toString()),t.set("content-disposition",n??(r=(a=e instanceof File?e.name:"blob").replace(/"/g,'\\"'),i=encodeURIComponent(a).replace(/['()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`).replace(/%(7C|60|5E)/g,(e,t)=>String.fromCharCode(Number.parseInt(t,16))),`inline; filename="${r}"; filename*=utf-8''${i}`)),e}return e instanceof FormData||e instanceof URLSearchParams?e:c(e)?(t.set("content-type","text/event-stream"),function(e){let t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.eventIteratorKeepAliveEnabled??!0,i=n.eventIteratorKeepAliveInterval??5e3,u=n.eventIteratorKeepAliveComment??"",c=n.eventIteratorInitialCommentEnabled??!0,p=n.eventIteratorInitialComment??"",d=!1;return new ReadableStream({start(e){r=s("stream_event_iterator"),c&&e.enqueue(K({comments:[p]}))},async pull(n){try{a&&(t=setInterval(()=>{n.enqueue(K({comments:[u]})),r?.addEvent("keepalive")},i));let s=await l(r,()=>e.next());if(clearInterval(t),d)return;let o=M(s.value);if(!s.done||void 0!==s.value||void 0!==o){let e=s.done?"done":"message";n.enqueue(K({...o,event:e,data:g(s.value)})),r?.addEvent(e)}s.done&&(n.close(),r?.end())}catch(e){if(clearInterval(t),d)return;e instanceof N?(n.enqueue(K({...M(e),event:"error",data:g(e.data)})),r?.addEvent("error"),n.close()):(o(r,e),n.error(e)),r?.end()}},async cancel(){try{d=!0,clearInterval(t),r?.addEvent("cancelled"),await l(r,()=>e.return?.())}catch(e){throw o(r,e),e}finally{r?.end()}}}).pipeThrough(new TextEncoderStream)}(e,r)):(t.set("content-type","application/json"),g(e))}}(e.body,r,t);return new Request(e.url,{signal:e.signal,method:e.method,headers:r,body:n})}(e,this.toFetchRequestOptions);return function(e){var t;let r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{body:(t=()=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u({name:"parse_standard_body",signal:t.signal},async()=>{let r=e.headers.get("content-disposition");if("string"==typeof r){let t=function(e){let t=e.match(/filename\*=(UTF-8'')?([^;]*)/i);if(t&&"string"==typeof t[2]){var r=t[2];try{return decodeURIComponent(r)}catch{return r}}let n=e.match(/filename="((?:\\"|[^"])*)"/i);if(n&&"string"==typeof n[1])return n[1].replace(/\\"/g,'"')}(r)??"blob",n=await e.blob();return new File([n],t,{type:n.type})}let n=e.headers.get("content-type");if(!n||n.startsWith("application/json"))return v(await e.text());if(n.startsWith("multipart/form-data"))return await e.formData();if(n.startsWith("application/x-www-form-urlencoded"))return new URLSearchParams(await e.text());if(n.startsWith("text/event-stream"))return function(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e?.pipeThrough(new TextDecoderStream).pipeThrough(new D),i=n?.getReader(),u=!1;return new h(async()=>{t??=s("consume_event_iterator_stream");try{for(;;){if(void 0===i)return{done:!0,value:void 0};let{done:e,value:r}=await l(t,()=>i.read());if(e){if(u)throw new a("Stream was cancelled");return{done:!0,value:void 0}}switch(r.event){case"message":{let e=v(r.data);return E(e)&&(e=L(e,r)),t?.addEvent("message"),{done:!1,value:e}}case"error":{let e=new N({data:v(r.data)});throw e=L(e,r),t?.addEvent("error"),e}case"done":{let e=v(r.data);return E(e)&&(e=L(e,r)),t?.addEvent("done"),{done:!0,value:e}}default:t?.addEvent("maybe_keepalive")}}}catch(e){throw e instanceof N||o(t,e,r),e}},async e=>{try{"next"!==e&&(u=!0,t?.addEvent("cancelled")),await l(t,()=>i?.cancel())}catch(e){throw o(t,e,r),e}finally{t?.end()}})}(e.body,t);if(n.startsWith("text/plain"))return await e.text();let i=await e.blob();return new File([i],"blob",{type:i.type})})})(e,n),()=>{if(r)return r.result;let e=t();return r={result:e},e}),status:e.status,get headers(){let t=W(e.headers);return Object.defineProperty(this,"headers",{value:t,writable:!0}),t},set headers(value){Object.defineProperty(this,"headers",{value,writable:!0})}}}(await m(this.adapterInterceptors,{...t,request:i,path:r,input:n,init:{redirect:"manual"}},e=>{let{request:t,path:r,input:n,init:a,...i}=e;return this.fetch(t,a,i,r,n)}),{signal:i.signal})}}class Z{"~orpc";constructor(e){if(e.route?.successStatus&&_(e.route.successStatus))throw Error("[ContractProcedure] Invalid successStatus.");if(Object.values(e.errorMap).some(e=>e&&e.status&&!_(e.status)))throw Error("[ContractProcedure] Invalid error status code.");this["~orpc"]=e}}function ee(e){return e instanceof Z||("object"==typeof e||"function"==typeof e)&&null!==e&&"~orpc"in e&&"object"==typeof e["~orpc"]&&null!==e["~orpc"]&&"errorMap"in e["~orpc"]&&"route"in e["~orpc"]&&"meta"in e["~orpc"]}class et extends Z{constructor(e){super(e),this["~orpc"].prefix=e.prefix,this["~orpc"].tags=e.tags}$meta(e){return new et({...this["~orpc"],meta:e})}$route(e){return new et({...this["~orpc"],route:e})}$input(e){return new et({...this["~orpc"],inputSchema:e})}errors(e){var t;return new et({...this["~orpc"],errorMap:(t=this["~orpc"].errorMap,{...t,...e})})}meta(e){var t;return new et({...this["~orpc"],meta:(t=this["~orpc"].meta,{...t,...e})})}route(e){var t;return new et({...this["~orpc"],route:(t=this["~orpc"].route,{...t,...e})})}input(e){return new et({...this["~orpc"],inputSchema:e})}output(e){return new et({...this["~orpc"],outputSchema:e})}prefix(e){var t;return new et({...this["~orpc"],prefix:(t=this["~orpc"].prefix,t?`${t}${e}`:e)})}tag(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return new et({...this["~orpc"],tags:(e=this["~orpc"].tags,e?[...e,...r]:r)})}router(e){return function e(t,r){if(ee(t)){var n,a,i,s,o,u,l;let e;return new Z({...t["~orpc"],errorMap:(n=r.errorMap,a=t["~orpc"].errorMap,{...n,...a}),route:(i=t["~orpc"].route,e=i,r.prefix&&(s=e,o=r.prefix,e=s.path?{...s,path:`${o}${s.path}`}:s),r.tags?.length&&(u=e,l=r.tags,e={...u,tags:[...l,...u.tags??[]]}),e)})}let c={};for(let n in t)c[n]=e(t[n],r);return c}(e,this["~orpc"])}}let er=new et({errorMap:{},route:{},meta:{}}),en={defaultMethod:"POST",defaultSuccessStatus:200,defaultSuccessDescription:"OK",defaultInputStructure:"compact",defaultOutputStructure:"compact"};function ea(e,t){return void 0===t?en[e]:t}function ei(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[n]=t;return{"~standard":{vendor:"custom",version:1,validate:async e=>n?{value:await n(e)}:{value:e}}}}Symbol("ORPC_EVENT_ITERATOR_DETAILS");class es{maxArrayIndex;constructor(e={}){this.maxArrayIndex=e.maxBracketNotationArrayIndex??9999}serialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(Array.isArray(e))e.forEach((e,n)=>{this.serialize(e,[...t,n],r)});else if(w(e))for(let n in e)this.serialize(e[n],[...t,n],r);else r.push([this.stringifyPath(t),e]);return r}deserialize(e){if(0===e.length)return{};let t=new WeakSet,r={value:[]};for(let[n,a]of e){let e=this.parsePath(n),i=r,s="value";e.forEach((r,n)=>{Array.isArray(i[s])||w(i[s])||(i[s]=[]),n!==e.length-1?Array.isArray(i[s])&&!eo(r,this.maxArrayIndex)&&(t.has(i[s])?(t.delete(i[s]),i[s]=el(i[s])):i[s]=eu(i[s])):Array.isArray(i[s])&&(""===r?i[s].length&&!t.has(i[s])&&(i[s]=eu(i[s])):t.has(i[s])?(t.delete(i[s]),i[s]=el(i[s])):eo(r,this.maxArrayIndex)||(i[s]=eu(i[s]))),i=i[s],s=r}),Array.isArray(i)&&""===s?(t.add(i),i.push(a)):s in i?Array.isArray(i[s])?i[s].push(a):i[s]=[i[s],a]:i[s]=a}return r.value}stringifyPath(e){return e.map(e=>e.toString().replace(/[\\[\]]/g,e=>{switch(e){case"\\":return"\\\\";case"[":return"\\[";case"]":return"\\]";default:return e}})).reduce((e,t,r)=>0===r?t:`${e}[${t}]`,"")}parsePath(e){let t=[],r=!1,n="",a=0;for(let i=0;i<e.length;i++){let s=e[i],o=e[i+1];r&&"]"===s&&(void 0===o||"["===o)&&a%2==0?(void 0===o&&(r=!1),t.push(n),n="",i++):0===t.length&&"["===s&&a%2==0?(r=!0,t.push(n),n=""):"\\"===s?a++:(n+="\\".repeat(a/2)+s,a=0)}return r||0===t.length?[e]:t}}function eo(e,t){return/^0$|^[1-9]\d*$/.test(e)&&Number(e)<=t}function eu(e){let t=new x;return e.forEach((e,r)=>{t[r]=e}),t}function el(e){let t=new x;return t[""]=1===e.length?e[0]:e,t}class ec{customSerializers;constructor(e={}){this.customSerializers=e.customJsonSerializers??[]}serialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{value:!1};for(let r of this.customSerializers)if(r.condition(e))return this.serialize(r.serialize(e),t);if(e instanceof Blob)return t.value=!0,[e,t.value];if(e instanceof Set)return this.serialize(Array.from(e),t);if(e instanceof Map)return this.serialize(Array.from(e.entries()),t);if(Array.isArray(e))return[e.map(e=>void 0===e?null:this.serialize(e,t)[0]),t.value];if(w(e)){let r={};for(let n in e)("toJSON"!==n||"function"!=typeof e[n])&&(r[n]=this.serialize(e[n],t)[0]);return[r,t.value]}return"bigint"==typeof e||e instanceof RegExp||e instanceof URL?[e.toString(),t.value]:e instanceof Date?[Number.isNaN(e.getTime())?null:e.toISOString(),t.value]:Number.isNaN(e)?[null,t.value]:[e,t.value]}}function ep(e){return`/${e.replace(/\/{2,}/g,"/").replace(/^\/|\/$/g,"")}`}function ed(e){return e?ep(e).match(/\/\{[^}]+\}/g)?.map(e=>({raw:e,name:e.match(/\{\+?([^}]+)\}/)[1]})):void 0}class eh{constructor(e,t,r){this.contract=e,this.serializer=t,this.baseUrl=r.url,this.headers=r.headers??{},this.customErrorResponseBodyDecoder=r.customErrorResponseBodyDecoder}baseUrl;headers;customErrorResponseBodyDecoder;async encode(e,t,r){var n;let a="function"==typeof(n=await b(this.headers,r,e,t)).forEach?W(n):n;void 0!==r.lastEventId&&(a=B(a,{"last-event-id":r.lastEventId}));let i=await b(this.baseUrl,r,e,t),s=S(this.contract,e);if(!ee(s))throw Error(`[StandardOpenapiLinkCodec] expect a contract procedure at ${e.join(".")}`);return"compact"===ea("defaultInputStructure",s["~orpc"].route.inputStructure)?this.#a(s,e,t,r,i,a):this.#i(s,e,t,r,i,a)}#a(e,t,r,n,a,i){let s=ep(e["~orpc"].route.path??Y(t)),o=r,u=ed(s);if(u?.length){if(!w(r))throw TypeError(`[StandardOpenapiLinkCodec] Invalid input shape for "compact" structure when has dynamic params at ${t.join(".")}.`);let e={...r};for(let t of u){let n=r[t.name];s=s.replace(t.raw,`/${encodeURIComponent(`${this.serializer.serialize(n)}`)}`),delete e[t.name]}o=Object.keys(e).length?e:void 0}let l=ea("defaultMethod",e["~orpc"].route.method),c=new URL(a);if(c.pathname=`${c.pathname.replace(/\/$/,"")}${s}`,"GET"===l){for(let[e,t]of this.serializer.serialize(o,{outputFormat:"URLSearchParams"}))c.searchParams.append(e,t);return{url:c,method:l,headers:i,body:void 0,signal:n.signal}}return{url:c,method:l,headers:i,body:this.serializer.serialize(o),signal:n.signal}}#i(e,t,r,n,a,i){let s=ep(e["~orpc"].route.path??Y(t)),o=ed(s);if(!w(r)&&void 0!==r)throw TypeError(`[StandardOpenapiLinkCodec] Invalid input shape for "detailed" structure at ${t.join(".")}.`);if(o?.length){if(!w(r?.params))throw TypeError(`[StandardOpenapiLinkCodec] Invalid input.params shape for "detailed" structure when has dynamic params at ${t.join(".")}.`);for(let e of o){let t=r.params[e.name];s=s.replace(e.raw,`/${encodeURIComponent(`${this.serializer.serialize(t)}`)}`)}}let u=i;if(r?.headers!==void 0){if(!w(r.headers))throw TypeError(`[StandardOpenapiLinkCodec] Invalid input.headers shape for "detailed" structure at ${t.join(".")}.`);u=B(r.headers,i)}let l=ea("defaultMethod",e["~orpc"].route.method),c=new URL(a);if(c.pathname=`${c.pathname.replace(/\/$/,"")}${s}`,r?.query!==void 0)for(let[e,t]of this.serializer.serialize(r.query,{outputFormat:"URLSearchParams"}))c.searchParams.append(e,t);return"GET"===l?{url:c,method:l,headers:u,body:void 0,signal:n.signal}:{url:c,method:l,headers:u,body:this.serializer.serialize(r?.body),signal:n.signal}}async decode(e,t,r){let n=!_(e.status),a=await (async()=>{let t=!1;try{let r=await e.body();return t=!0,this.serializer.deserialize(r)}catch(e){if(!t)throw Error("Cannot parse response body, please check the response body and content-type.",{cause:e});throw Error("Invalid OpenAPI response format.",{cause:e})}})();if(!n){var i;let t=this.customErrorResponseBodyDecoder?.(a,e);if(null!=t)throw t;if(C(a))throw P(a);throw new R((i=e.status,Object.entries(O).find(e=>{let[,t]=e;return t.status===i})?.[0]??"MALFORMED_ORPC_ERROR_RESPONSE"),{status:e.status,data:{...e,body:a}})}let s=S(this.contract,r);if(!ee(s))throw Error(`[StandardOpenapiLinkCodec] expect a contract procedure at ${r.join(".")}`);return"compact"===ea("defaultOutputStructure",s["~orpc"].route.outputStructure)?a:{status:e.status,headers:e.headers,body:a}}}class ef{constructor(e,t){this.jsonSerializer=e,this.bracketNotation=t}serialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(e)&&!t.outputFormat?Q(e,{value:async e=>this.#s(e,{outputFormat:"plain"}),error:async e=>new N({data:this.#s((e instanceof R?e:new R("INTERNAL_SERVER_ERROR",{message:"Internal server error",cause:e})).toJSON(),{outputFormat:"plain"}),cause:e})}):this.#s(e,t)}#s(e,t){let[r,n]=this.jsonSerializer.serialize(e);if("plain"===t.outputFormat)return r;if("URLSearchParams"===t.outputFormat){let e=new URLSearchParams;for(let[t,n]of this.bracketNotation.serialize(r))("string"==typeof n||"number"==typeof n||"boolean"==typeof n)&&e.append(t,n.toString());return e}if(r instanceof Blob||void 0===r||!n)return r;let a=new FormData;for(let[e,t]of this.bracketNotation.serialize(r))"string"==typeof t||"number"==typeof t||"boolean"==typeof t?a.append(e,t.toString()):t instanceof Blob&&a.append(e,t);return a}deserialize(e){return e instanceof URLSearchParams||e instanceof FormData?this.bracketNotation.deserialize(Array.from(e.entries())):c(e)?Q(e,{value:async e=>e,error:async e=>e instanceof N&&C(e.data)?P(e.data,{cause:e}):e}):e}}class ey extends J{constructor(e,t,r){super(new eh(e,new ef(new ec(r),new es({maxBracketNotationArrayIndex:0xfffffffe})),r),t,r)}}class em extends ey{constructor(e,t){super(e,new X(t),t)}}var ev=e.i(615046);function eg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[e,{...void 0!==t.input?{input:t.input}:{},...void 0!==t.type?{type:t.type}:{},...void 0!==t.fnOptions?{fnOptions:t.fnOptions}:{}}]}function ew(e,t){return e.length<=t?e:e.slice(e.length-t)}let eE=Symbol("ORPC_OPERATION_CONTEXT");function eS(e){var t;let n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r(a.path),s={key:e=>eg(i,e)},o=(t={path:i,experimental_defaults:a.experimental_defaults},n={call:e,queryKey(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];let[a={}]=r;return(a={...t.experimental_defaults?.queryKey,...a}).queryKey??eg(t.path,{type:"query",input:a.input})},queryOptions(){for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];let[s={}]=a;s={...t.experimental_defaults?.queryOptions,...s};let o=n.queryKey(s);return{queryFn:t=>{let{signal:r}=t;if(s.input===ev.skipToken)throw Error("queryFn should not be called with skipToken used as input");return e(s.input,{signal:r,context:{[eE]:{key:o,type:"query"},...s.context}})},...s.input===ev.skipToken?{enabled:!1}:{},...s,queryKey:o}},experimental_streamedKey(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];let[a={}]=r;return(a={...t.experimental_defaults?.experimental_streamedKey,...a}).queryKey??eg(t.path,{type:"streamed",input:a.input,fnOptions:a.queryFnOptions})},experimental_streamedOptions(){for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];let[s={}]=a;s={...t.experimental_defaults?.experimental_streamedOptions,...s};let o=n.experimental_streamedKey(s);return{queryFn:function(e){let{refetchMode:t="reset",maxChunks:r=1/0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async n=>{let a=n.client.getQueryCache().find({queryKey:n.queryKey,exact:!0}),i=!!a&&void 0!==a.state.data;i&&("reset"===t?a.setState({status:"pending",data:void 0,error:null,fetchStatus:"fetching"}):n.client.setQueryData(n.queryKey,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return ew(e,r)}));let s=[],o=await e(n),u=!i||"replace"!==t;for await(let e of(n.client.setQueryData(n.queryKey,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return ew(e,r)}),o)){if(n.signal.aborted)throw n.signal.reason;s.push(e),s=ew(s,r),u&&n.client.setQueryData(n.queryKey,function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return ew([...t,e],r)})}u||n.client.setQueryData(n.queryKey,s);let l=n.client.getQueryData(n.queryKey);return l?ew(l,r):s}}(async t=>{let{signal:r}=t;if(s.input===ev.skipToken)throw Error("queryFn should not be called with skipToken used as input");let n=await e(s.input,{signal:r,context:{[eE]:{key:o,type:"streamed"},...s.context}});if(!c(n))throw Error("streamedQuery requires an event iterator output");return n},s.queryFnOptions),...s.input===ev.skipToken?{enabled:!1}:{},...s,queryKey:o}},experimental_liveKey(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];let[a={}]=r;return(a={...t.experimental_defaults?.experimental_liveKey,...a}).queryKey??eg(t.path,{type:"live",input:a.input})},experimental_liveOptions(){for(var r,a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];let[o={}]=i;o={...t.experimental_defaults?.experimental_liveOptions,...o};let u=n.experimental_liveKey(o);return{queryFn:(r=async t=>{let{signal:r}=t;if(o.input===ev.skipToken)throw Error("queryFn should not be called with skipToken used as input");let n=await e(o.input,{signal:r,context:{[eE]:{key:u,type:"live"},...o.context}});if(!c(n))throw Error("liveQuery requires an event iterator output");return n},async e=>{let t;for await(let n of(await r(e))){if(e.signal.aborted)throw e.signal.reason;t={chunk:n},e.client.setQueryData(e.queryKey,n)}if(!t)throw Error(`Live query for ${g(e.queryKey)} did not yield any data. Ensure the query function returns an AsyncIterable with at least one chunk.`);return t.chunk}),...o.input===ev.skipToken?{enabled:!1}:{},...o,queryKey:u}},infiniteKey:e=>(e={...t.experimental_defaults?.infiniteKey,...e}).queryKey??eg(t.path,{type:"infinite",input:e.input===ev.skipToken?ev.skipToken:e.input(e.initialPageParam)}),infiniteOptions(r){r={...t.experimental_defaults?.infiniteOptions,...r};let a=n.infiniteKey(r);return{queryFn:t=>{let{pageParam:n,signal:i}=t;if(r.input===ev.skipToken)throw Error("queryFn should not be called with skipToken used as input");return e(r.input(n),{signal:i,context:{[eE]:{key:a,type:"infinite"},...r.context}})},...r.input===ev.skipToken?{enabled:!1}:{},...r,queryKey:a}},mutationKey(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];let[a={}]=r;return(a={...t.experimental_defaults?.mutationKey,...a}).mutationKey??eg(t.path,{type:"mutation"})},mutationOptions(){for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];let[s={}]=a;s={...t.experimental_defaults?.mutationOptions,...s};let o=n.mutationKey(s);return{mutationFn:t=>e(t,{context:{[eE]:{key:o,type:"mutation"},...s.context}}),...s,mutationKey:o}}});return new Proxy({...s,...o},{get(t,r){let n=Reflect.get(t,r);if("string"!=typeof r)return n;let s=eS(e[r],{...a,path:[...i,r],experimental_defaults:S(a.experimental_defaults,[r])});return"function"!=typeof n?s:new Proxy(n,{get:(e,t)=>Reflect.get(s,t)})}})}var ex=e.i(925521);let eb=er.$route({inputStructure:"detailed"}),eA=eb.route({path:"/billing/invoices",method:"GET"}).input(ei()).output(ei()),eO=eb.route({path:"/billing/partners/{partnerKey}/tenants",method:"PUT"}).input(ei()).output(ei()),eT=eb.route({path:"/system-features",method:"GET"}).input(ei()).output(ei()),eI=eb.route({path:"/trial-apps/{appId}",method:"GET"}).input(ei()).output(ei()),eR=eb.route({path:"/trial-apps/{appId}/datasets",method:"GET"}).input(ei()).output(ei()),e_=eb.route({path:"/trial-apps/{appId}/workflows",method:"GET"}).input(ei()).output(ei()),eC=eb.route({path:"/trial-apps/{appId}/parameters",method:"GET"}).input(ei()).output(ei()),eP=eb.route({path:"/collections",method:"GET"}).input(ei()).output(ei()),ek=eb.route({path:"/collections/{collectionId}/plugins",method:"POST"}).input(ei()).output(ei()),eq=eb.route({path:"/{kind}/search/advanced",method:"POST"}).input(ei()).output(ei());var eN=e.i(367916);let eF=G(new em({collections:eP,collectionPlugins:ek,searchAdvanced:eq},{url:ex.MARKETPLACE_API_PREFIX,headers:()=>new Headers({"X-Dify-Version":ex.IS_MARKETPLACE?"999.0.0":ex.APP_VERSION}),fetch:(e,t)=>globalThis.fetch(e,{...t,cache:"no-store"}),interceptors:[y(e=>{console.error(e)})]})),eD=eS(eF,{path:["marketplace"]}),e$=G(new em({systemFeatures:eT,trialApps:{info:eI,datasets:eR,parameters:eC,workflows:e_},billing:{invoices:eA,bindPartnerStack:eO}},{url:ex.API_PREFIX,fetch:(e,t)=>(0,eN.request)(e.url,t,{fetchCompat:!0,request:e}),interceptors:[y(e=>{console.error(e)})]})),ez=eS(e$,{path:["console"]});e.s(["consoleClient",0,e$,"consoleQuery",0,ez,"marketplaceClient",0,eF,"marketplaceQuery",0,eD],10190)},130119,e=>{"use strict";var t=e.i(81828);let r="setup_status",n=async()=>{if("finished"===localStorage.getItem(r))return{step:"finished"};let e=await (0,t.fetchSetupStatus)();return"finished"===e.step?localStorage.setItem(r,"finished"):localStorage.removeItem(r),e};e.s(["fetchSetupStatusWithCache",0,n])},494268,e=>{"use strict";var t=e.i(563199),r=e.i(562572),n=e.i(639751),a=e.i(449980),i=e.i(10190),s=e.i(547682),o=e.i(130119);let u=(0,n.create)(e=>({systemFeatures:s.defaultSystemFeatures,setSystemFeatures:t=>e(()=>({systemFeatures:t}))})),l=["systemFeatures"],c=["setupStatus"];async function p(){let e=await i.consoleClient.systemFeatures(),{setSystemFeatures:t}=u.getState();return t({...s.defaultSystemFeatures,...e}),e}function d(){return(0,r.useQuery)({queryKey:l,queryFn:p})}function h(){let{isPending:e}=d();return e}function f(){return(0,r.useQuery)({queryKey:c,queryFn:o.fetchSetupStatusWithCache,staleTime:1/0})}e.s(["default",0,e=>{let{children:r}=e,{isPending:n}=d();return(f(),n)?(0,t.jsx)("div",{className:"flex h-screen w-screen items-center justify-center",children:(0,t.jsx)(a.default,{})}):(0,t.jsx)(t.Fragment,{children:r})},"useGlobalPublicStore",0,u,"useIsSystemFeaturesPending",()=>h,"useSetupStatusQuery",()=>f,"useSystemFeaturesQuery",()=>d])}]);