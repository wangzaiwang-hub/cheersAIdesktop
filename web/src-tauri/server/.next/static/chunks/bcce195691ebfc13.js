(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,933620,e=>{"use strict";var t=e.i(563199),s=e.i(837699),a=e.i(268255);e.i(152567);var n=e.i(408767),r=e.i(339548),o=e.i(21151),i=e.i(137667),c=e.i(807801),d=e.i(364203),l=e.i(38532),m=e.i(547105),u=e.i(421001),x=e.i(935139);let p=e=>{let{tag:o}=e,{t:p}=(0,n.useTranslation)(),{notify:g}=(0,r.useContext)(i.ToastContext),h=(0,d.useStore)(e=>e.tagList),y=(0,d.useStore)(e=>e.setTagList),[f,v]=(0,a.useState)(!1),[b,j]=(0,a.useState)(o.name),w=async(e,t)=>{if(t===o.name)return void v(!1);if(!t){g({type:"error",message:"tag name is empty"}),j(o.name),v(!1);return}try{let s=h.map(s=>s.id===e?{...s,name:t}:s);y([...s]),v(!1),await (0,c.updateTag)(e,t),g({type:"success",message:p("actionMsg.modifiedSuccessfully",{ns:"common"})}),j(t)}catch{g({type:"error",message:p("actionMsg.modifiedUnsuccessfully",{ns:"common"})}),j(o.name),y([...h.map(t=>t.id===e?{...t,name:t.name}:t)]),v(!1)}},[C,S]=(0,a.useState)(!1),[T,N]=(0,a.useState)(!1),k=async e=>{if(!T)try{N(!0),await (0,c.deleteTag)(e),g({type:"success",message:p("actionMsg.modifiedSuccessfully",{ns:"common"})});let t=h.filter(t=>t.id!==e);y([...t]),N(!1)}catch{g({type:"error",message:p("actionMsg.modifiedUnsuccessfully",{ns:"common"})}),N(!1)}},{run:L}=(0,l.useDebounceFn)(()=>{k(o.id)},{wait:200});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:(0,x.cn)("flex shrink-0 items-center gap-0.5 rounded-lg border border-components-panel-border py-1 pl-2 pr-1 text-sm leading-5 text-text-secondary"),children:[!f&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"text-sm leading-5 text-text-secondary",children:o.name}),(0,t.jsx)(u.default,{popupContent:(0,t.jsx)("div",{children:p("common.tagBound",{ns:"workflow"})}),needsDelay:!0,children:(0,t.jsx)("div",{className:"leading-4.5 shrink-0 px-1 text-sm font-medium text-text-tertiary",children:o.binding_count})}),(0,t.jsx)("div",{className:"group/edit shrink-0 cursor-pointer rounded-md p-1 hover:bg-state-base-hover",onClick:()=>v(!0),children:(0,t.jsx)(s.RiEditLine,{className:"h-3 w-3 text-text-tertiary group-hover/edit:text-text-secondary"})}),(0,t.jsx)("div",{className:"group/remove shrink-0 cursor-pointer rounded-md p-1 hover:bg-state-base-hover",onClick:()=>{o.binding_count?S(!0):L()},children:(0,t.jsx)(s.RiDeleteBinLine,{className:"h-3 w-3 text-text-tertiary group-hover/remove:text-text-secondary"})})]}),f&&(0,t.jsx)("input",{className:"shrink-0 appearance-none caret-primary-600 outline-none placeholder:text-text-quaternary",autoFocus:!0,value:b,onChange:e=>j(e.target.value),onKeyDown:e=>"Enter"===e.key&&w(o.id,b),onBlur:()=>w(o.id,b)})]}),(0,t.jsx)(m.default,{title:`${p("tag.delete",{ns:"common"})} "${o.name}"`,isShow:C,content:p("tag.deleteTip",{ns:"common"}),onConfirm:()=>{L(),S(!1)},onCancel:()=>S(!1)})]})};e.s(["default",0,e=>{let{show:l,type:m}=e,{t:u}=(0,n.useTranslation)(),{notify:x}=(0,r.useContext)(i.ToastContext),g=(0,d.useStore)(e=>e.tagList),h=(0,d.useStore)(e=>e.setTagList),y=(0,d.useStore)(e=>e.setShowTagManagementModal),f=async e=>{h(await (0,c.fetchTagList)(e))},[v,b]=(0,a.useState)(!1),[j,w]=(0,a.useState)(""),C=async()=>{if(j&&!v)try{b(!0);let e=await (0,c.createTag)(j,m);x({type:"success",message:u("tag.created",{ns:"common"})}),h([e,...g]),w(""),b(!1)}catch{x({type:"error",message:u("tag.failed",{ns:"common"})}),b(!1)}};return(0,a.useEffect)(()=>{f(m)},[m]),(0,t.jsxs)(o.default,{className:"!w-[600px] !max-w-[600px] rounded-xl px-8 py-6",isShow:l,onClose:()=>y(!1),children:[(0,t.jsx)("div",{className:"relative pb-2 text-xl font-semibold leading-[30px] text-text-primary",children:u("tag.manageTags",{ns:"common"})}),(0,t.jsx)("div",{className:"absolute right-4 top-4 cursor-pointer p-2",onClick:()=>y(!1),children:(0,t.jsx)(s.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})}),(0,t.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,t.jsx)("input",{className:"w-[100px] shrink-0 appearance-none rounded-lg border border-dashed border-divider-regular bg-transparent px-2 py-1 text-sm leading-5 text-text-secondary caret-primary-600  outline-none placeholder:text-text-quaternary focus:border-solid",placeholder:u("tag.addNew",{ns:"common"})||"",autoFocus:!0,value:j,onChange:e=>w(e.target.value),onKeyDown:e=>"Enter"===e.key&&!e.nativeEvent.isComposing&&C(),onBlur:C}),g.map(e=>(0,t.jsx)(p,{tag:e},e.id))]})]})}],933620)},903565,e=>{e.n(e.i(933620))}]);