(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,324935,e=>{"use strict";var t=e.i(563199),r=e.i(837699),o=e.i(935139);let n=()=>(0,t.jsx)("div",{"data-testid":"indeterminate-icon",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,t.jsx)("path",{d:"M2.5 6H9.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})});e.s(["default",0,e=>{let{id:a,checked:s,onCheck:i,className:l,disabled:u,indeterminate:d}=e,c=s||d?"bg-components-checkbox-bg text-components-checkbox-icon hover:bg-components-checkbox-bg-hover":"border border-components-checkbox-border bg-components-checkbox-bg-unchecked hover:bg-components-checkbox-bg-unchecked-hover hover:border-components-checkbox-border-hover",p=s||d?"cursor-not-allowed bg-components-checkbox-bg-disabled-checked text-components-checkbox-icon-disabled hover:bg-components-checkbox-bg-disabled-checked":"cursor-not-allowed border-components-checkbox-border-disabled bg-components-checkbox-bg-disabled hover:border-components-checkbox-border-disabled hover:bg-components-checkbox-bg-disabled";return(0,t.jsxs)("div",{id:a,className:(0,o.cn)("flex h-4 w-4 shrink-0 cursor-pointer items-center justify-center rounded-[4px] shadow-xs shadow-shadow-shadow-3",c,u&&p,l),onClick:e=>{u||i?.(e)},"data-testid":`checkbox-${a}`,children:[!s&&d&&(0,t.jsx)(n,{}),s&&(0,t.jsx)(r.RiCheckLine,{className:"h-3 w-3","data-testid":`check-icon-${a}`})]})}],324935)},618403,e=>{"use strict";let t=e=>{let{url:t,fileName:r,rel:o,target:n}=e;if(!t)return;let a=document.createElement("a");a.href=t,r&&(a.download=r),o&&(a.rel=o),n&&(a.target=n),a.style.display="none",document.body.appendChild(a),a.click(),a.remove()};e.s(["downloadBlob",0,e=>{let{data:r,fileName:o}=e,n=window.URL.createObjectURL(r);t({url:n,fileName:o,rel:"noopener noreferrer"}),window.URL.revokeObjectURL(n)},"downloadUrl",0,e=>{let{url:r,fileName:o,rel:n="noopener noreferrer",target:a}=e;t({url:r,fileName:o,rel:n,target:a})}])},65932,(e,t,r)=>{"use strict";t.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((o=t.length)!=r.length)return!1;for(n=o;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((o=(a=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=o;0!=n--;)if(!Object.prototype.hasOwnProperty.call(r,a[n]))return!1;for(n=o;0!=n--;){var o,n,a,s=a[n];if(!e(t[s],r[s]))return!1}return!0}return t!=t&&r!=r}},972282,e=>{"use strict";var t=e.i(367916);let r=async e=>{let{url:r,id:o}=e;return(0,t.get)(`${r}/${o}`)};e.s(["addTracingConfig",0,e=>{let{appId:r,body:o}=e;return(0,t.post)(`/apps/${r}/trace-config`,{body:o})},"copyApp",0,e=>{let{appID:r,name:o,icon_type:n,icon:a,icon_background:s,mode:i,description:l}=e;return(0,t.post)(`apps/${r}/copy`,{body:{name:o,icon_type:n,icon:a,icon_background:s,mode:i,description:l}})},"createApikey",0,e=>{let{url:r,body:o}=e;return(0,t.post)(r,o)},"createApp",0,e=>{let{name:r,icon_type:o,icon:n,icon_background:a,mode:s,description:i,config:l}=e;return(0,t.post)("apps",{body:{name:r,icon_type:o,icon:n,icon_background:a,mode:s,description:i,model_config:l}})},"delApikey",0,e=>{let{url:r,params:o}=e;return(0,t.del)(r,o)},"deleteApp",0,e=>(0,t.del)(`apps/${e}`),"exportAppConfig",0,e=>{let{appID:r,include:o=!1,workflowID:n}=e,a=new URLSearchParams({include_secret:o.toString()});return n&&a.append("workflow_id",n),(0,t.get)(`apps/${r}/export?${a.toString()}`)},"fetchAppDetail",0,e=>{let{url:r,id:o}=e;return(0,t.get)(`${r}/${o}`)},"fetchAppDetailDirect",0,r,"fetchAppList",0,e=>{let{url:r,params:o}=e;return(0,t.get)(r,{params:o})},"fetchTracingConfig",0,e=>{let{appId:r,provider:o}=e;return(0,t.get)(`/apps/${r}/trace-config`,{params:{tracing_provider:o}})},"fetchTracingStatus",0,e=>{let{appId:r}=e;return(0,t.get)(`/apps/${r}/trace`)},"fetchWebhookUrl",0,e=>{let{appId:r,nodeId:o}=e;return(0,t.get)(`apps/${r}/workflows/triggers/webhook`,{params:{node_id:o}},{silent:!0})},"importDSL",0,e=>{let{mode:r,yaml_content:o,yaml_url:n,app_id:a,name:s,description:i,icon_type:l,icon:u,icon_background:d}=e;return(0,t.post)("apps/imports",{body:{mode:r,yaml_content:o,yaml_url:n,app_id:a,name:s,description:i,icon:u,icon_type:l,icon_background:d}})},"importDSLConfirm",0,e=>{let{import_id:r}=e;return(0,t.post)(`apps/imports/${r}/confirm`,{body:{}})},"removeTracingConfig",0,e=>{let{appId:r,provider:o}=e;return(0,t.del)(`/apps/${r}/trace-config?tracing_provider=${o}`)},"switchApp",0,e=>{let{appID:r,name:o,icon_type:n,icon:a,icon_background:s}=e;return(0,t.post)(`apps/${r}/convert-to-workflow`,{body:{name:o,icon_type:n,icon:a,icon_background:s}})},"updateAppInfo",0,e=>{let{appID:r,name:o,icon_type:n,icon:a,icon_background:s,description:i,use_icon_as_answer_icon:l,max_active_requests:u}=e;return(0,t.put)(`apps/${r}`,{body:{name:o,icon_type:n,icon:a,icon_background:s,description:i,use_icon_as_answer_icon:l,max_active_requests:u}})},"updateAppModelConfig",0,e=>{let{url:r,body:o}=e;return(0,t.post)(r,{body:o})},"updateAppSiteAccessToken",0,e=>{let{url:r}=e;return(0,t.post)(r)},"updateAppSiteConfig",0,e=>{let{url:r,body:o}=e;return(0,t.post)(r,{body:o})},"updateAppSiteStatus",0,e=>{let{url:r,body:o}=e;return(0,t.post)(r,{body:o})},"updateTracingConfig",0,e=>{let{appId:r,body:o}=e;return(0,t.patch)(`/apps/${r}/trace-config`,{body:o})},"updateTracingStatus",0,e=>{let{appId:r,body:o}=e;return(0,t.post)(`/apps/${r}/trace`,{body:o})}])},189299,e=>{"use strict";let t=(0,e.i(639751).create)(e=>({appDetail:void 0,setAppDetail:t=>e(()=>({appDetail:t})),appSidebarExpand:"",setAppSidebarExpand:t=>e(()=>({appSidebarExpand:t})),currentLogItem:void 0,currentLogModalActiveTab:"DETAIL",setCurrentLogItem:t=>e(()=>({currentLogItem:t})),setCurrentLogModalActiveTab:t=>e(()=>({currentLogModalActiveTab:t})),showPromptLogModal:!1,setShowPromptLogModal:t=>e(()=>({showPromptLogModal:t})),showAgentLogModal:!1,setShowAgentLogModal:t=>e(()=>({showAgentLogModal:t})),showMessageLogModal:!1,setShowMessageLogModal:t=>e(()=>t?{showMessageLogModal:t}:{showMessageLogModal:t,currentLogModalActiveTab:"DETAIL"}),showAppConfigureFeaturesModal:!1,setShowAppConfigureFeaturesModal:t=>e(()=>({showAppConfigureFeaturesModal:t}))}));e.s(["useStore",0,t])},935914,480600,e=>{"use strict";var t,r=((t={}).appFlow="appFlow",t.ragPipeline="ragPipeline",t);e.s(["FlowType",()=>r],480600);let o={[r.appFlow]:"apps",[r.ragPipeline]:"rag/pipelines"};e.s(["getFlowPrefix",0,e=>o[e]||o[r.appFlow]],935914)},845296,e=>{"use strict";let t,r=(0,e.i(639751).create)()((t=(e,t)=>({triggerStatuses:{},setTriggerStatus:(t,r)=>{e(e=>({triggerStatuses:{...e.triggerStatuses,[t]:r}}))},setTriggerStatuses:t=>{e({triggerStatuses:t})},getTriggerStatus:e=>t().triggerStatuses[e]||"disabled",clearTriggerStatuses:()=>{e({triggerStatuses:{}})}}),(e,r,o)=>{let n=o.subscribe;return o.subscribe=(e,t,r)=>{let a=e;if(t){let n=(null==r?void 0:r.equalityFn)||Object.is,s=e(o.getState());a=r=>{let o=e(r);if(!n(s,o)){let e=s;t(s=o,e)}},(null==r?void 0:r.fireImmediately)&&t(s,s)}return n(a)},t(e,r,o)}));e.s(["useTriggerStatusStore",0,r],845296)},387852,e=>{"use strict";var t=e.i(236063),r=e.i(875037),o=e.i(562572),n=e.i(214309),a=e.i(367916),s=e.i(722384),i=e.i(935914);let l="workflow",u=[l,"versionHistory"],d=[l,"last-run"];e.s(["useAppWorkflow",0,e=>(0,o.useQuery)({enabled:!!e,queryKey:[l,"publish",e],queryFn:()=>(0,a.get)(`/apps/${e}/workflows/publish`)}),"useConversationVarValues",0,(e,t)=>(0,o.useQuery)({enabled:!!t,queryKey:[l,e,"conversation var values",t],queryFn:async()=>{let{items:r}=await (0,a.get)(`${(0,i.getFlowPrefix)(e)}/${t}/workflows/draft/conversation-variables`);return r}}),"useDeleteAllInspectorVars",0,(e,t)=>(0,r.useMutation)({mutationKey:[l,e,"delete all inspector vars",t],mutationFn:async()=>(0,a.del)(`${(0,i.getFlowPrefix)(e)}/${t}/workflows/draft/variables`)}),"useDeleteInspectVar",0,(e,t)=>(0,r.useMutation)({mutationKey:[l,e,"delete inspector var",t],mutationFn:async r=>(0,a.del)(`${(0,i.getFlowPrefix)(e)}/${t}/workflows/draft/variables/${r}`)}),"useDeleteNodeInspectorVars",0,(e,t)=>(0,r.useMutation)({mutationKey:[l,e,"delete node inspector vars",t],mutationFn:async r=>(0,a.del)(`${(0,i.getFlowPrefix)(e)}/${t}/workflows/draft/nodes/${r}/variables`)}),"useDeleteWorkflow",0,()=>(0,r.useMutation)({mutationKey:[l,"delete"],mutationFn:e=>(0,a.del)(e)}),"useEditInspectorVar",0,(e,t)=>(0,r.useMutation)({mutationKey:[l,e,"edit inspector var",t],mutationFn:async r=>{let{varId:o,...n}=r;return(0,a.patch)(`${(0,i.getFlowPrefix)(e)}/${t}/workflows/draft/variables/${o}`,{body:n})}}),"useInvalidAllLastRun",0,(e,t)=>(0,s.useInvalid)([...d,e,t]),"useInvalidLastRun",0,(e,t,r)=>(0,s.useInvalid)([...d,e,t,r]),"useInvalidateAppWorkflow",0,()=>{let e=(0,n.useQueryClient)();return t=>{e.invalidateQueries({queryKey:[l,"publish",t]})}},"useInvalidateConversationVarValues",0,(e,t)=>(0,s.useInvalid)([l,e,"conversation var values",t]),"useInvalidateSysVarValues",0,(e,t)=>(0,s.useInvalid)([l,e,"sys var values",t]),"useLastRun",0,(e,t,r,n)=>(0,o.useQuery)({enabled:n,queryKey:[...d,e,t,r],queryFn:async()=>(0,a.get)(`${(0,i.getFlowPrefix)(e)}/${t}/workflows/draft/nodes/${r}/last-run`,{},{silent:!0}),retry:0}),"usePublishWorkflow",0,()=>(0,r.useMutation)({mutationKey:[l,"publish"],mutationFn:e=>(0,a.post)(e.url,{body:{marked_name:e.title,marked_comment:e.releaseNotes}})}),"useResetConversationVar",0,(e,t)=>(0,r.useMutation)({mutationKey:[l,e,"reset conversation var",t],mutationFn:async r=>(0,a.put)(`${(0,i.getFlowPrefix)(e)}/${t}/workflows/draft/variables/${r}/reset`)}),"useResetToLastRunValue",0,(e,t)=>(0,r.useMutation)({mutationKey:[l,e,"reset to last run value",t],mutationFn:async r=>(0,a.put)(`${(0,i.getFlowPrefix)(e)}/${t}/workflows/draft/variables/${r}/reset`)}),"useResetWorkflowVersionHistory",0,()=>(0,s.useReset)([...u]),"useSysVarValues",0,(e,t)=>(0,o.useQuery)({enabled:!!t,queryKey:[l,e,"sys var values",t],queryFn:async()=>{let{items:r}=await (0,a.get)(`${(0,i.getFlowPrefix)(e)}/${t}/workflows/draft/system-variables`);return r}}),"useUpdateWorkflow",0,()=>(0,r.useMutation)({mutationKey:[l,"update"],mutationFn:e=>(0,a.patch)(e.url,{body:{marked_name:e.title,marked_comment:e.releaseNotes}})}),"useWorkflowConfig",0,(e,t)=>(0,o.useQuery)({enabled:!!e,queryKey:[l,"config",e],staleTime:0,queryFn:async()=>{let r=await (0,a.get)(e);return t(r),r}}),"useWorkflowRunHistory",0,function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return(0,o.useQuery)({queryKey:[l,"runHistory",e],queryFn:()=>(0,a.get)(e),enabled:!!e&&t})},"useWorkflowVersionHistory",0,e=>{let{url:r,initialPage:o,limit:n,userId:s,namedOnly:i}=e;return(0,t.useInfiniteQuery)({enabled:!!r,queryKey:[...u,r,o,n,s,i],queryFn:e=>{let{pageParam:t=1}=e;return(0,a.get)(r,{params:{page:t,limit:n,user_id:s||"",named_only:!!i}})},getNextPageParam:e=>e.has_more?e.page+1:null,initialPageParam:o})}])},813672,e=>{"use strict";function t(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"!=typeof o&&(o={});let{leading:n=!1,trailing:a=!0,maxWait:s}=o,i=[,,];n&&(i[0]="leading"),a&&(i[1]="trailing");let l=null,u=function(e,t){let r,{signal:o,edges:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=null,s=null!=n&&n.includes("leading"),i=null==n||n.includes("trailing"),l=()=>{null!==a&&(e.apply(r,a),r=void 0,a=null)},u=null,d=()=>{null!=u&&clearTimeout(u),u=setTimeout(()=>{u=null,i&&l(),c()},t)},c=()=>{null!==u&&(clearTimeout(u),u=null),r=void 0,a=null},p=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(o?.aborted)return;r=this,a=t;let i=null==u;d(),s&&i&&l()};return p.schedule=d,p.cancel=c,p.flush=()=>{l()},o?.addEventListener("abort",c,{once:!0}),p}(function(){for(var r=arguments.length,o=Array(r),n=0;n<r;n++)o[n]=arguments[n];t=e.apply(this,o),l=null},r,{edges:i}),d=function(){for(var r=arguments.length,o=Array(r),n=0;n<r;n++)o[n]=arguments[n];return null!=s&&(null===l&&(l=Date.now()),Date.now()-l>=s)?(t=e.apply(this,o),l=Date.now(),u.cancel(),u.schedule(),t):(u.apply(this,o),t)};return d.cancel=u.cancel,d.flush=()=>(u.flush(),t),d}e.s(["debounce",()=>t],813672)},571566,289931,e=>{"use strict";var t=e.i(563199),r=e.i(837699);e.i(152567);var o=e.i(858765),n=e.i(959752);let a=new Map,s=e=>{a.delete(e)},i=async(e,t)=>{let r=a.get(e);r&&await r(t)},l=e=>{Object.entries(e).forEach(e=>{let[t,r]=e;a.set(t,r)})},u=e=>{e.forEach(s)};e.s(["executeCommand",0,i,"registerCommands",0,l,"unregisterCommands",0,u],289931);let d="zen-toggle-maximize",c=()=>{window.dispatchEvent(new CustomEvent(d))};e.s(["ZEN_TOGGLE_EVENT",0,d,"zenCommand",0,{name:"zen",description:"Toggle canvas focus mode",mode:"direct",isAvailable:()=>(0,n.isInWorkflowPage)(),execute:c,async search(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",a=(0,o.getI18n)();return[{id:"zen",title:a.t("gotoAnything.actions.zenTitle",{ns:"app",lng:n})||"Zen Mode",description:a.t("gotoAnything.actions.zenDesc",{ns:"app",lng:n})||"Toggle canvas focus mode",type:"command",icon:(0,t.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded-md border-[0.5px] border-divider-regular bg-components-panel-bg",children:(0,t.jsx)(r.RiFullscreenLine,{className:"h-4 w-4 text-text-tertiary"})}),data:{command:"workflow.zen",args:{}}}]},register(e){l({"workflow.zen":async()=>c()})},unregister(){u(["workflow.zen"])}}],571566)},87403,e=>{"use strict";let t={key:"@node",shortcut:"@node",title:"Search Workflow Nodes",description:"Find and jump to nodes in the current workflow by name or type",searchFn:void 0,search:async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";arguments.length>2&&arguments[2];try{if(t.searchFn)return t.searchFn(r);return[]}catch(e){return console.warn("Workflow nodes search failed:",e),[]}}};e.s(["workflowNodesAction",0,t])},997908,e=>{"use strict";function t(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new CustomEvent("workflow:select-node",{detail:{nodeId:e,focus:t}});document.dispatchEvent(r)}function r(e){let t=new CustomEvent("workflow:scroll-to-node",{detail:{nodeId:e}});document.dispatchEvent(t)}function o(e){let t=t=>{let{nodeId:o,focus:n}=t.detail;o&&(e(o),n&&setTimeout(()=>{r(o)},100))};return document.addEventListener("workflow:select-node",t),()=>{document.removeEventListener("workflow:select-node",t)}}function n(e,t){let r=r=>{let{nodeId:o}=r.detail;if(o){let r=e.find(e=>e.id===o);if(r){let e={x:r.position.x,y:r.position.y},o=e.x+.25*window.innerWidth,n=e.y+.25*window.innerHeight;t.setCenter(o,n,{zoom:1,duration:800})}}};return document.addEventListener("workflow:scroll-to-node",r),()=>{document.removeEventListener("workflow:scroll-to-node",r)}}e.s(["scrollToWorkflowNode",()=>r,"selectWorkflowNode",()=>t,"setupNodeSelectionListener",()=>o,"setupScrollToNodeListener",()=>n])},432024,579417,735586,794909,809910,707844,296776,757071,502662,322e3,e=>{"use strict";var t=e.i(563199),r=e.i(807324);e.i(716342),e.i(382174),e.i(155382);var o=e.i(58376);let n=e=>{let{ref:n,...a}=e;return(0,t.jsx)(r.default,{...a,ref:n,data:o.default})};n.displayName="Gdpr",e.s(["default",0,n],579417);var a=e.i(586212);let s=e=>{let{ref:o,...n}=e;return(0,t.jsx)(r.default,{...n,ref:o,data:a.default})};s.displayName="Github",e.s(["default",0,s],735586);var i=e.i(794403);let l=e=>{let{ref:o,...n}=e;return(0,t.jsx)(r.default,{...n,ref:o,data:i.default})};l.displayName="Highlight",e.s(["default",0,l],794909);var u=e.i(109755);let d=e=>{let{ref:o,...n}=e;return(0,t.jsx)(r.default,{...n,ref:o,data:u.default})};d.displayName="Iso",e.s(["default",0,d],809910);var c=e.i(831084);let p=e=>{let{ref:o,...n}=e;return(0,t.jsx)(r.default,{...n,ref:o,data:c.default})};p.displayName="Line3",e.s(["default",0,p],707844),e.i(680599),e.i(481114),e.i(549540);var f=e.i(944996);let g=e=>{let{ref:o,...n}=e;return(0,t.jsx)(r.default,{...n,ref:o,data:f.default})};g.displayName="Notion",e.s(["default",0,g],296776),e.i(877196);var m=e.i(117263);let b=e=>{let{ref:o,...n}=e;return(0,t.jsx)(r.default,{...n,ref:o,data:m.default})};b.displayName="Soc2",e.s(["default",0,b],757071);var v=e.i(672877);let y=e=>{let{ref:o,...n}=e;return(0,t.jsx)(r.default,{...n,ref:o,data:v.default})};y.displayName="SparklesSoft",e.s(["default",0,y],502662);var h=e.i(515393);let w=e=>{let{ref:o,...n}=e;return(0,t.jsx)(r.default,{...n,ref:o,data:h.default})};w.displayName="SparklesSoftAccent",e.s(["default",0,w],322e3),e.s([],432024)},757198,e=>{"use strict";var t=e.i(563199),r=e.i(294237),o=e.i(935139);let n=(0,r.cva)("",{variants:{type:{horizontal:"w-full h-[0.5px] my-2 ",vertical:"w-[1px] h-full mx-2"},bgStyle:{gradient:"bg-gradient-to-r from-divider-regular to-background-gradient-mask-transparent",solid:"bg-divider-regular"}},defaultVariants:{type:"horizontal",bgStyle:"solid"}});e.s(["default",0,e=>{let{type:r,bgStyle:a,className:s="",style:i}=e;return(0,t.jsx)("div",{className:(0,o.cn)(n({type:r,bgStyle:a}),"shrink-0",s),style:i})}])},873517,e=>{"use strict";var t=e.i(563199),r=e.i(294237),o=e.i(268255),n=e.i(935139);let a=(0,r.cva)("",{variants:{size:{small:"py-1 rounded-md system-xs-regular",regular:"px-3 rounded-md system-sm-regular",large:"px-4 rounded-lg system-md-regular"}},defaultVariants:{size:"regular"}}),s=o.forwardRef((e,r)=>{let{className:o,value:s,onChange:i,disabled:l,size:u,destructive:d,styleCss:c,onFocus:p,onBlur:f,...g}=e;return(0,t.jsx)("textarea",{ref:r,onFocus:p,onBlur:f,style:c,className:(0,n.cn)("min-h-20 w-full appearance-none border border-transparent bg-components-input-bg-normal p-2 text-components-input-text-filled caret-primary-600 outline-none placeholder:text-components-input-text-placeholder hover:border-components-input-border-hover hover:bg-components-input-bg-hover focus:border-components-input-border-active focus:bg-components-input-bg-active focus:shadow-xs",a({size:u}),l&&"cursor-not-allowed border-transparent bg-components-input-bg-disabled text-components-input-text-filled-disabled hover:border-transparent hover:bg-components-input-bg-disabled",d&&"border-components-input-border-destructive bg-components-input-bg-destructive text-components-input-text-filled hover:border-components-input-border-destructive hover:bg-components-input-bg-destructive focus:border-components-input-border-destructive focus:bg-components-input-bg-destructive",o),value:s??"",onChange:i,disabled:l,...g})});s.displayName="Textarea",e.s(["default",0,s])},619507,299075,e=>{"use strict";e.i(845780);var t=e.i(720315),r=e.i(949250);e.i(275225);var o=e.i(705405),n=e.i(390622),a=e.i(654537);let s=e=>({[a.PipelineInputVarType.number]:n.VarType.number,[a.PipelineInputVarType.singleFile]:n.VarType.file,[a.PipelineInputVarType.multiFiles]:n.VarType.arrayFile,[a.PipelineInputVarType.checkbox]:n.VarType.boolean})[e]||n.VarType.string;var i=e.i(192447);let l=e=>{let{getNodes:t}=(0,i.useStoreApi)().getState(),r=t(),o=r.find(t=>t.id===e),n=!!o?.data.isInIteration,a=!!o?.data.isInLoop,s=o?.parentId;return{node:o,isInIteration:n,isInLoop:a,parentNode:r.find(e=>e.id===s)}};e.s(["default",0,l],299075),e.s(["default",0,function(e){let{onlyLeafNodeVar:a,filterVar:i,hideEnv:u,hideChatVar:d,passedInAvailableNodes:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{onlyLeafNodeVar:!1,filterVar:()=>!0},{getTreeLeafNodes:p,getNodeById:f,getBeforeNodesInSameBranchIncludeParent:g}=(0,t.useWorkflow)(),{getNodeAvailableVars:m}=(0,r.useWorkflowVariables)(),b=(0,t.useIsChatMode)(),v=c||(a?p(e):g(e)),{parentNode:y}=l(e),h=f(e),w=(0,o.useStore)(e=>e.ragPipelineVariables),k=h?.data?.type===n.BlockEnum.DataSource,x=[];if(k){let t=w?.filter(t=>t.belong_to_node_id===e),r=t?.filter(t=>i({variable:t.variable,type:s(t.type),nodeId:e,isRagVariable:!0},["rag",e,t.variable]));r?.length&&x.push({nodeId:e,title:h.data?.title,vars:r.map(t=>({variable:`rag.${e}.${t.variable}`,type:s(t.type),description:t.label,isRagVariable:!0}))})}return{availableVars:[...m({parentNode:y,beforeNodes:v,isChatMode:b,filterVar:i,hideEnv:u,hideChatVar:d}),...x],availableNodes:v,availableNodesWithParent:[...v,...k?[h]:[]]}}],619507)},892081,e=>{"use strict";var t=e.i(393689),r=e.i(220431);let o=function(e){if(!e||!document.getRootNode)return document;var t,o=Array.isArray(e)?e:[e];return o.every(function(e){var t=(0,r.getTargetElement)(e);return!!t&&t.getRootNode()instanceof ShadowRoot})?(t=(0,r.getTargetElement)(o[0]))?t.getRootNode():document:document};var n=e.i(99878);function a(e,a,s){void 0===s&&(s="click");var i=(0,t.default)(e);(0,n.default)(function(){var e=function(e){(Array.isArray(a)?a:[a]).some(function(t){var o=(0,r.getTargetElement)(t);return!o||o.contains(e.target)})||i.current(e)},t=o(a),n=Array.isArray(s)?s:[s];return n.forEach(function(r){return t.addEventListener(r,e)}),function(){n.forEach(function(r){return t.removeEventListener(r,e)})}},Array.isArray(s)?s:[s],a)}e.s(["useClickAway",()=>a],892081)}]);