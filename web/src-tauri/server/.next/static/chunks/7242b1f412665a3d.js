(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,261484,e=>{"use strict";var t=e.i(268255),n={SVG:"image/svg+xml",ICO:"image/x-icon",GIF:"image/gif",PNG:"image/png"};let r=function(e){(0,t.useEffect)(function(){if(e){var t=e.split("."),r=t[t.length-1].toLocaleUpperCase(),a=document.querySelector("link[rel*='icon']")||document.createElement("link");a.type=n[r],a.href=e,a.rel="shortcut icon",document.getElementsByTagName("head")[0].appendChild(a)}},[e])};var a=e.i(685888),i=e.i(354440),s={restoreOnUnmount:!1};let l=function(e,n){void 0===n&&(n=s);var r=(0,t.useRef)(i.default?document.title:"");(0,t.useEffect)(function(){document.title=e},[e]),(0,a.default)(function(){n.restoreOnUnmount&&(document.title=r.current)})};var o=e.i(494268),c=e.i(168014);function d(e){let n=(0,o.useIsSystemFeaturesPending)(),a=(0,o.useGlobalPublicStore)(e=>e.systemFeatures),i=e?`${e} - `:"",s="",d="";!1===n&&(a.branding.enabled?(s=`${i}${a.branding.application_title}`,d=a.branding.favicon):(s=`${i}Dify`,d=`${c.basePath}/favicon.ico`)),l(s),(0,t.useEffect)(()=>{let e=null;return a.branding.favicon&&(document.querySelectorAll("link[rel='icon'], link[rel='shortcut icon'], link[rel='apple-touch-icon'], link[rel='mask-icon']").forEach(e=>e.parentNode?.removeChild(e)),(e=document.createElement("link")).rel="apple-touch-icon",e.href=a.branding.favicon,document.head.appendChild(e)),()=>{e?.remove()}},[a.branding.favicon]),r(d)}e.s(["default",()=>d],261484)},210644,e=>{"use strict";var t=e.i(824627),n=e.i(585458),r=e.i(268255),a=e.i(393689),i=e.i(773923),s=function(e){if(!e)return 0;var t=(0,n.default)(e).valueOf()-Date.now();return t<0?0:t};e.s(["useCountDown",0,function(e){void 0===e&&(e={});var n=e||{},l=n.leftTime,o=n.targetDate,c=n.interval,d=void 0===c?1e3:c,u=n.onEnd,m=(0,r.useMemo)(function(){return(0,i.isNumber)(l)&&l>0?Date.now()+l:void 0},[l]),f="leftTime"in e?m:o,g=(0,t.__read)((0,r.useState)(function(){return s(f)}),2),h=g[0],x=g[1],v=(0,a.default)(u);(0,r.useEffect)(function(){if(!f)return void x(0);x(s(f));var e=setInterval(function(){var t,n=s(f);x(n),0===n&&(clearInterval(e),null==(t=v.current)||t.call(v))},d);return function(){return clearInterval(e)}},[f,d]);var p=(0,r.useMemo)(function(){return{days:Math.floor(h/864e5),hours:Math.floor(h/36e5)%24,minutes:Math.floor(h/6e4)%60,seconds:Math.floor(h/1e3)%60,milliseconds:Math.floor(h)%1e3}},[h]);return[h,p]}],210644)},508430,e=>{"use strict";var t=e.i(563199),n=e.i(210644),r=e.i(268255);e.i(152567);var a=e.i(408767);let i="leftTime";function s(e){let{onResend:s}=e,{t:l}=(0,a.useTranslation)(),[o,c]=(0,r.useState)(()=>Number(localStorage.getItem(i)||59e3)),[d]=(0,n.useCountDown)({leftTime:o,onEnd:()=>{c(0),localStorage.removeItem(i)}}),u=async function(){c(59e3),localStorage.setItem(i,"59000"),s?.()};return(0,r.useEffect)(()=>{localStorage.setItem(i,`${d}`)},[d]),(0,t.jsxs)("p",{className:"system-xs-regular text-text-tertiary",children:[(0,t.jsx)("span",{children:l("checkCode.didNotReceiveCode",{ns:"login"})}),d>0&&(0,t.jsxs)("span",{children:[Math.round(d/1e3),"s"]}),d<=0&&(0,t.jsx)("span",{className:"system-xs-medium cursor-pointer text-text-accent-secondary",onClick:u,children:l("checkCode.resend",{ns:"login"})})]})}e.s(["COUNT_DOWN_KEY",0,i,"COUNT_DOWN_TIME_MS",0,59e3,"default",()=>s])},730601,e=>{"use strict";var t=e.i(563199),n=e.i(837699),r=e.i(124836),a=e.i(554327),i=e.i(326531),s=e.i(268255);e.i(152567);var l=e.i(408767),o=e.i(151094),c=e.i(291631),d=e.i(137667),u=e.i(925521),m=e.i(683257),f=e.i(261484),g=e.i(81828),h=e.i(508430);function x(){let{t:e}=(0,l.useTranslation)();(0,f.default)("");let x=(0,i.useSearchParams)(),v=(0,i.useRouter)(),[p,y]=(0,s.useState)(""),[b,N]=(0,s.useState)(!1),j=(0,m.useLocale)(),k=async()=>{try{if(!p)return void d.default.notify({type:"error",message:e("error.emailEmpty",{ns:"login"})});if(!u.emailRegex.test(p))return void d.default.notify({type:"error",message:e("error.emailInValid",{ns:"login"})});N(!0);let t=await (0,g.sendResetPasswordCode)(p,j);if("success"===t.result){localStorage.setItem(h.COUNT_DOWN_KEY,`${h.COUNT_DOWN_TIME_MS}`);let e=new URLSearchParams(x);e.set("token",encodeURIComponent(t.data)),e.set("email",encodeURIComponent(p)),v.push(`/reset-password/check-code?${e.toString()}`)}else d.default.notify({type:"error",message:t.data})}catch(e){console.error(e)}finally{N(!1)}};return(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"inline-flex h-14 w-14 items-center justify-center rounded-2xl border border-components-panel-border-subtle bg-background-default-dodge shadow-lg",children:(0,t.jsx)(n.RiLockPasswordLine,{className:"h-6 w-6 text-2xl text-text-accent-light-mode-only"})}),(0,t.jsxs)("div",{className:"pb-4 pt-2",children:[(0,t.jsx)("h2",{className:"title-4xl-semi-bold text-text-primary",children:e("resetPassword",{ns:"login"})}),(0,t.jsx)("p",{className:"body-md-regular mt-2 text-text-secondary",children:e("resetPasswordDesc",{ns:"login"})})]}),(0,t.jsxs)("form",{onSubmit:r.noop,children:[(0,t.jsx)("input",{type:"text",className:"hidden"}),(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("label",{htmlFor:"email",className:"system-md-semibold my-2 text-text-secondary",children:e("email",{ns:"login"})}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(c.default,{id:"email",type:"email",disabled:b,value:p,placeholder:e("emailPlaceholder",{ns:"login"}),onChange:e=>y(e.target.value)})}),(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsx)(o.default,{loading:b,disabled:b,variant:"primary",className:"w-full",onClick:k,children:e("sendVerificationCode",{ns:"login"})})})]})]}),(0,t.jsx)("div",{className:"py-2",children:(0,t.jsx)("div",{className:"h-px bg-gradient-to-r from-background-gradient-mask-transparent via-divider-regular to-background-gradient-mask-transparent"})}),(0,t.jsxs)(a.default,{href:`/signin?${x.toString()}`,className:"flex h-9 items-center justify-center text-text-tertiary hover:text-text-primary",children:[(0,t.jsx)("div",{className:"inline-block rounded-full bg-background-default-dimmed p-1",children:(0,t.jsx)(n.RiArrowLeftLine,{size:12})}),(0,t.jsx)("span",{className:"system-xs-regular ml-2",children:e("backToLogin",{ns:"login"})})]})]})}e.s(["default",()=>x])}]);