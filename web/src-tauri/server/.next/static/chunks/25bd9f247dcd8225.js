(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,349714,844367,e=>{"use strict";var t=e.i(268255);function a(e){try{let t=new URL(e);if("http:"!==t.protocol&&"https:"!==t.protocol)throw Error("Authorization URL must be HTTP or HTTPS")}catch(t){if(t instanceof Error&&"Authorization URL must be HTTP or HTTPS"===t.message)throw t;throw Error(`Invalid URL: ${e}`)}}function s(e){try{let t=new URL(e).hostname.toLowerCase();if("localhost"===t||"127.0.0.1"===t||"::1"===t)return!0;let a=t.match(/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/);if(a){let[,e,t]=a.map(Number);if(10===e||172===e&&t>=16&&t<=31||192===e&&168===t||169===e&&254===t)return!0}return t.endsWith(".local")}catch{return!1}}e.s(["isPrivateOrLocalAddress",()=>s,"validateRedirectUrl",()=>a],844367),e.s(["openOAuthPopup",0,(e,t)=>{let s=window.screenX+(window.outerWidth-600)/2,n=window.screenY+(window.outerHeight-600)/2;a(e);let l=window.open(e,"OAuth",`width=600,height=600,left=${s},top=${n},scrollbars=yes`),r=e=>{e.data?.type==="oauth_callback"&&(window.removeEventListener("message",r),t(e.data))};window.addEventListener("message",r);let i=setInterval(()=>{l?.closed&&(clearInterval(i),window.removeEventListener("message",r),t())},1e3);return l},"useOAuthCallback",0,()=>{(0,t.useEffect)(()=>{let e=new URLSearchParams(window.location.search),t=e.get("subscription_id"),a=e.get("error"),s=e.get("error_description");if(window.opener){let e=window.opener?.origin||"*";t?window.opener.postMessage({type:"oauth_callback",success:!0,subscriptionId:t},e):a?window.opener.postMessage({type:"oauth_callback",success:!1,error:a,errorDescription:s},e):window.opener.postMessage({type:"oauth_callback"},e),window.close()}},[])}],349714)},453284,e=>{"use strict";var t=e.i(563199),a=e.i(837699),s=e.i(268255);e.i(152567);var n=e.i(408767),l=e.i(935139);e.s(["default",0,e=>{let{placeholder:r,className:i,value:u,onChange:o,white:c}=e,{t:d}=(0,n.useTranslation)(),p=(0,s.useRef)(null),[m,g]=(0,s.useState)(!1),f=(0,s.useRef)(!1),[h,y]=(0,s.useState)("");return(0,t.jsxs)("div",{className:(0,l.cn)("group flex h-8 items-center overflow-hidden rounded-lg border-none bg-components-input-bg-normal px-2 hover:bg-components-input-bg-hover",m&&"!bg-components-input-bg-active",c&&"!border-gray-300 !bg-white shadow-xs hover:!border-gray-300 hover:!bg-white",i),children:[(0,t.jsx)("div",{className:"pointer-events-none mr-1.5 flex h-4 w-4 shrink-0 items-center justify-center",children:(0,t.jsx)(a.RiSearchLine,{className:"h-4 w-4 text-components-input-text-placeholder","aria-hidden":"true"})}),(0,t.jsx)("input",{ref:p,type:"text",name:"query",className:(0,l.cn)("system-sm-regular caret-#295EFF block h-[18px] grow appearance-none border-0 bg-transparent text-components-input-text-filled outline-none placeholder:text-components-input-text-placeholder",c&&"!bg-white placeholder:!text-gray-400 hover:!bg-white group-hover:!bg-white"),placeholder:r||d("operation.search",{ns:"common"}),value:f.current?h:u,onChange:e=>{let t=e.target.value;f.current?y(t):o(t)},onCompositionStart:()=>{f.current=!0,y(u)},onCompositionEnd:e=>{f.current=!1,y(""),o(e.currentTarget.value)},onFocus:()=>g(!0),onBlur:()=>g(!1),autoComplete:"off"}),u&&(0,t.jsx)("button",{type:"button","aria-label":d("operation.clear",{ns:"common"}),className:"group/clear flex h-4 w-4 shrink-0 cursor-pointer items-center justify-center border-none bg-transparent p-0",onClick:()=>{o(""),p.current?.focus()},children:(0,t.jsx)(a.RiCloseCircleFill,{className:"h-4 w-4 text-text-quaternary group-hover/clear:text-text-tertiary"})})]})}])},588226,449758,566210,456721,610683,e=>{"use strict";var t=e.i(563199),a=e.i(268255);e.s([],456721);var s=e.i(837699),n=e.i(888468);e.i(152567);var l=e.i(408767),r=e.i(658547),i=e.i(83278),u=e.i(324935),o=e.i(453284);let c={src:e.i(48803).default,width:32,height:32,blurWidth:0,blurHeight:0};var d=e.i(935139),p=e.i(151094);let m=e=>{let{title:s="",label:n,description:m,options:g,value:f=[],onChange:h,disabled:y=!1,containerClassName:v,showSelectAll:x=!0,showCount:b=!0,showSearch:k=!0,maxHeight:w}=e,{t:P}=(0,l.useTranslation)(),[I,_]=(0,a.useState)(""),F=(0,a.useMemo)(()=>{if(!I?.trim())return g;let e=I.toLowerCase();return g.filter(t=>t.label.toLowerCase().includes(e)||t.value.toLowerCase().includes(e))},[g,I]),C=f.length,j=(0,a.useMemo)(()=>{let e=g.filter(e=>!e.disabled);return e.length>0&&e.every(e=>f.includes(e.value))},[g,f]),S=(0,a.useMemo)(()=>{let e=g.filter(e=>!e.disabled),t=e.filter(e=>f.includes(e.value)).length;return t>0&&t<e.length},[g,f]),N=(0,a.useCallback)(()=>{if(!y)if(j)h?.([]);else{let e=g.filter(e=>!e.disabled).map(e=>e.value);h?.(e)}},[j,g,h,y]),M=(0,a.useCallback)(e=>{if(y)return;let t=f.includes(e)?f.filter(t=>t!==e):[...f,e];h?.(t)},[f,h,y]);return(0,t.jsxs)("div",{className:(0,d.cn)("flex w-full flex-col gap-1",v),children:[n&&(0,t.jsx)("div",{className:"system-sm-medium text-text-secondary",children:n}),m&&(0,t.jsx)("div",{className:"body-xs-regular text-text-tertiary",children:m}),(0,t.jsxs)("div",{className:"rounded-lg border border-components-panel-border bg-components-panel-bg",children:[(x||s||k)&&(0,t.jsxs)("div",{className:"relative flex items-center gap-2 border-b border-divider-subtle px-3 py-2",children:[!I&&x&&(0,t.jsx)(u.default,{checked:j,indeterminate:S,onCheck:N,disabled:y}),I?(0,t.jsx)("div",{className:"system-sm-medium-uppercase flex-1 leading-6 text-text-secondary",children:F.length>0?P("operation.searchCount",{ns:"common",count:F.length,content:s}):P("operation.noSearchCount",{ns:"common",content:s})}):(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-1",children:[s&&(0,t.jsx)("span",{className:"system-xs-semibold-uppercase truncate leading-5 text-text-secondary",children:s}),b&&C>0&&(0,t.jsx)(i.default,{uppercase:!0,children:P("operation.selectCount",{ns:"common",count:C})})]}),k&&(0,t.jsx)(o.default,{value:I,onChange:_,placeholder:P("placeholder.search",{ns:"common"}),className:"w-40"})]}),(0,t.jsx)("div",{className:"p-1",style:w?{maxHeight:w,overflowY:"auto"}:{},children:F.length?F.map(e=>{let a=f.includes(e.value);return(0,t.jsxs)("div",{className:(0,d.cn)("flex cursor-pointer items-center gap-2 rounded-md px-2 py-1.5 transition-colors hover:bg-state-base-hover",e.disabled&&"cursor-not-allowed opacity-50"),onClick:()=>{e.disabled||y||M(e.value)},children:[(0,t.jsx)(u.default,{checked:a,onCheck:()=>{e.disabled||y||M(e.value)},disabled:e.disabled||y}),(0,t.jsx)("div",{className:"system-sm-medium flex-1 truncate text-text-secondary",title:e.label,children:e.label})]},e.value)}):(0,t.jsx)("div",{className:"px-3 py-6 text-center text-sm text-text-tertiary",children:I?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2",children:[(0,t.jsx)(r.default,{alt:"search menu",src:c,width:32}),(0,t.jsx)("span",{className:"system-sm-regular text-text-secondary",children:P("operation.noSearchResults",{ns:"common",content:s})}),(0,t.jsx)(p.default,{variant:"secondary-accent",size:"small",onClick:()=>_(""),children:P("operation.resetKeywords",{ns:"common"})})]}):P("noData",{ns:"common"})})})]})]})};e.s(["default",0,m],449758);var g=e.i(603135),f=e.i(291631),h=e.i(545766),y=e.i(574270),v=e.i(306101),x=e.i(421001),b=e.i(225162),k=e.i(645429);let w=()=>{let e=(0,b.useLanguage)();return t=>(0,k.renderI18nObject)(t,e)};e.s(["useRenderI18nObject",0,w],566210);var P=e.i(819114);let I=e=>{let{content:t,render:s}=e;return(0,a.isValidElement)(t)||"string"==typeof t?t:"object"==typeof t&&null!==t?s(t):""},_={[g.FormItemValidateStatusEnum.Error]:{componentClassName:"border-components-input-border-destructive focus:border-components-input-border-destructive",textClassName:"text-text-destructive",infoFieldName:"errors"},[g.FormItemValidateStatusEnum.Warning]:{componentClassName:"border-components-input-border-warning focus:border-components-input-border-warning",textClassName:"text-text-warning",infoFieldName:"warnings"},[g.FormItemValidateStatusEnum.Success]:{componentClassName:"",textClassName:"",infoFieldName:""},[g.FormItemValidateStatusEnum.Validating]:{componentClassName:"",textClassName:"",infoFieldName:""}},F=(0,a.memo)(e=>{let{fieldClassName:r,labelClassName:i,inputContainerClassName:u,inputClassName:o,formSchema:c,field:p,disabled:b,onChange:k,fieldState:F}=e,C=w(),{t:j}=(0,l.useTranslation)(),{name:S,label:N,required:M,placeholder:q,options:T,labelClassName:$,disabled:E,type:L,dynamicSelectParams:A,multiple:K=!1,tooltip:R,showCopy:D,description:Q,url:V,help:z}=c,O=b||E,[U,B,G,H,W]=(0,a.useMemo)(()=>{let e=[N,q,R,Q,z].map(e=>I({content:e,render:C}));return e[1]||(e[1]=j("placeholder.input",{ns:"common"})),e},[N,q,R,Q,z,C]),X=(0,a.useMemo)(()=>{let e=new Set;for(let t of T||[])for(let a of t.show_on||[])e.add(a.variable);return Array.from(e)},[T]),Y=(0,n.useStore)(p.form.store,e=>{let t={};for(let a of X)t[a]=e.values[a];return t}),J=(0,a.useMemo)(()=>T?.filter(e=>!e.show_on?.length||e.show_on.every(e=>Y[e.variable]===e.value)).map(e=>({label:I({content:e.label,render:C}),value:e.value}))||[],[T,C,Y]),Z=(0,n.useStore)(p.form.store,e=>e.values[p.name]),{data:ee,isLoading:et,error:ea}=(0,P.useTriggerPluginDynamicOptions)(A||{plugin_id:"",provider:"",action:"",parameter:"",credential_id:""},L===g.FormTypeEnum.dynamicSelect),es=(0,a.useMemo)(()=>ee?.options?ee.options.map(e=>({label:I({content:e.label,render:C}),value:e.value})):[],[ee,C]),en=(0,a.useCallback)(e=>{p.handleChange(e),k?.(p.name,e)},[p,k]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:(0,d.cn)(r),children:[(0,t.jsxs)("div",{className:(0,d.cn)(i,$),children:[U,M&&!(0,a.isValidElement)(N)&&(0,t.jsx)("span",{className:"ml-1 text-text-destructive-secondary",children:"*"}),R&&(0,t.jsx)(x.default,{popupContent:(0,t.jsx)("div",{className:"w-[200px]",children:G}),triggerClassName:"ml-0.5 w-4 h-4"})]}),(0,t.jsxs)("div",{className:(0,d.cn)(u),children:[[g.FormTypeEnum.textInput,g.FormTypeEnum.secretInput,g.FormTypeEnum.textNumber].includes(L)&&(0,t.jsx)(f.default,{id:p.name,name:p.name,className:(0,d.cn)(o,_[F?.validateStatus]?.componentClassName),value:Z||"",onChange:e=>{en(e.target.value)},onBlur:p.handleBlur,disabled:O,placeholder:B,...(e=>{switch(e){case g.FormTypeEnum.secretInput:return{type:"password",autoComplete:"new-password"};case g.FormTypeEnum.textNumber:return{type:"number"};default:return{type:"text"}}})(L),showCopyIcon:D}),L===g.FormTypeEnum.select&&!K&&(0,t.jsx)(v.default,{value:Z,onChange:e=>en(e),disabled:O,placeholder:B,options:J,triggerPopupSameWidth:!0,popupProps:{className:"max-h-[320px] overflow-y-auto"}}),L===g.FormTypeEnum.checkbox&&(0,t.jsx)(m,{title:S,value:Z,onChange:e=>p.handleChange(e),options:J,maxHeight:"200px"}),L===g.FormTypeEnum.dynamicSelect&&(0,t.jsx)(v.default,{options:es,value:Z,onChange:p.handleChange,disabled:O||et,placeholder:et?j("dynamicSelect.loading",{ns:"common"}):B,...ea?{popupProps:{title:j("dynamicSelect.error",{ns:"common"}),titleClassName:"text-text-destructive-secondary"}}:!es.length?{popupProps:{title:j("dynamicSelect.noData",{ns:"common"})}}:{},triggerPopupSameWidth:!0,multiple:K}),L===g.FormTypeEnum.radio&&(0,t.jsx)("div",{className:(0,d.cn)(J.length<3?"flex items-center space-x-2":"space-y-2"),children:J.map(e=>(0,t.jsxs)("div",{className:(0,d.cn)("system-sm-regular hover:bg-components-option-card-option-hover-bg hover:border-components-option-card-option-hover-border flex h-8 flex-[1] grow cursor-pointer items-center justify-center gap-2 rounded-lg border border-components-option-card-option-border bg-components-option-card-option-bg p-2 text-text-secondary",Z===e.value&&"border-components-option-card-option-selected-border bg-components-option-card-option-selected-bg text-text-primary shadow-xs",O&&"cursor-not-allowed opacity-50",o),onClick:()=>!O&&en(e.value),children:[c.showRadioUI&&(0,t.jsx)(y.default,{className:"mr-2",isChecked:Z===e.value}),e.label]},e.value))}),L===g.FormTypeEnum.boolean&&(0,t.jsxs)(h.default.Group,{className:"flex w-fit items-center",value:Z,onChange:e=>p.handleChange(e),children:[(0,t.jsx)(h.default,{value:!0,className:"!mr-1",children:"True"}),(0,t.jsx)(h.default,{value:!1,children:"False"})]}),F?.validateStatus&&[g.FormItemValidateStatusEnum.Error,g.FormItemValidateStatusEnum.Warning].includes(F?.validateStatus)&&(0,t.jsx)("div",{className:(0,d.cn)("system-xs-regular mt-1 px-0 py-[2px]",_[F?.validateStatus].textClassName),children:F?.[_[F?.validateStatus].infoFieldName]})]})]}),Q&&(0,t.jsx)("div",{className:"system-xs-regular mt-4 text-text-tertiary",children:H}),V&&(0,t.jsxs)("a",{className:"system-xs-regular mt-4 flex items-center text-text-accent",href:V,target:"_blank",children:[(0,t.jsx)("span",{className:"break-all",children:W}),(0,t.jsx)(s.RiExternalLinkLine,{className:"ml-1 h-3 w-3 shrink-0"})]})]})});var C=e.i(102188),j=e.i(137667);let S=(0,a.memo)(e=>{let{formSchemas:s=[],defaultValues:r,formClassName:i,fieldClassName:u,labelClassName:o,inputContainerClassName:c,inputClassName:p,ref:m,disabled:f,formFromProps:h,onChange:y,onSubmit:v,preventDefaultSubmit:x=!1}=e,b=(0,a.useMemo)(()=>r||s.reduce((e,t)=>(t.default&&(e[t.name]=t.default),e),{}),[r]),k=(0,C.useForm)({defaultValues:b}),P=h||k,{getFormValues:I}=((e,t)=>{let{checkValidated:s}=((e,t)=>{let{notify:s}=(0,j.useToastContext)();return{checkValidated:(0,a.useCallback)(()=>{let a=e?.getAllErrors(),n=e.state.values;if(a){let e=a.fields,l=Object.keys(e).reduce((a,s)=>{let{show_on:l=[]}=t.find(e=>e.name===s)||{},r=l.reduce((e,t)=>(e[t.variable]=n[t.variable],e),{});return[...a,...l?.every(e=>r[e.variable]===e.value)?e[s].errors:[]]},[]);if(l.length)return s({type:"error",message:l[0]}),!1}return!0},[e,s,t])}})(e,t);return{getFormValues:(0,a.useCallback)(a=>{let{needCheckValidatedValues:n=!0,needTransformWhenSecretFieldIsPristine:l}=a,r=e?.store.state.values||{};return n?s()?{values:l?((e,t)=>{let a,s=t?.store.state.values||{},n=[];for(let a=0;a<e.length;a++){let s=e[a];if(s.type===g.FormTypeEnum.secretInput){let e=t?.getFieldMeta(s.name);e?.isPristine&&n.push(s.name)}}return a={...s},n.forEach(e=>{a[e]&&(a[e]="[__HIDDEN__]")}),a})(t,e):r,isCheckValidated:!0}:{values:{},isCheckValidated:!1}:{values:r,isCheckValidated:!0}},[e,s,t])}})(P,s),{getValidators:_}=(()=>{let{t:e}=(0,l.useTranslation)(),t=w(),s=(0,a.useCallback)(e=>(0,a.isValidElement)(e)?"":"string"==typeof e?e:"object"==typeof e&&null!==e?t(e):void 0,[]);return{getValidators:(0,a.useCallback)(t=>{let{name:a,validators:n,required:l,label:r}=t,i=n,u=s(r);return l&&!n&&(i={onMount:t=>{let{value:s}=t;if(!s)return e("errorMsg.fieldRequired",{ns:"common",field:u||a})},onChange:t=>{let{value:s}=t;if(!s)return e("errorMsg.fieldRequired",{ns:"common",field:u||a})},onBlur:t=>{let{value:a}=t;if(!a)return e("errorMsg.fieldRequired",{ns:"common",field:u})}}),i},[e,s])}})(),[S,N]=(0,a.useState)({}),M=(0,n.useStore)(P.store,e=>{let t={};return s.forEach(a=>{let{show_on:s}=a;s?.length&&s.forEach(a=>{t[a.variable]=e.values[a.variable]})}),t}),q=(0,a.useCallback)(e=>{let t={...S};for(let a of e){let{name:e,value:s,errors:n,warnings:l,validateStatus:r,help:i}=a;void 0!==s&&P.setFieldValue(e,s);let u=r;!u&&(n&&n.length>0?u=g.FormItemValidateStatusEnum.Error:l&&l.length>0&&(u=g.FormItemValidateStatusEnum.Warning)),t[e]={validateStatus:u,help:i,errors:n,warnings:l}}N(t)},[P,S]);(0,a.useImperativeHandle)(m,()=>({getForm:()=>P,getFormValues:e=>I(e),setFields:q}),[P,I,q]);let T=(0,a.useCallback)(e=>{let a=s?.find(t=>t.name===e.name);return a?(0,t.jsx)(F,{field:e,formSchema:a,fieldClassName:u??a.fieldClassName,labelClassName:o??a.labelClassName,inputContainerClassName:c,inputClassName:p,disabled:f,onChange:y,fieldState:S[e.name]}):null},[s,u,o,c,p,f,y,S]),$=(0,a.useCallback)(e=>{let a=_(e),{name:s,show_on:n=[]}=e;return n?.every(e=>M[e.variable]===e.value)?(0,t.jsx)(P.Field,{name:s,validators:a,children:T},s):null},[T,P,_,M]);return s?.length?(0,t.jsx)("form",{className:(0,d.cn)(i),onSubmit:e=>{x&&(e.preventDefault(),e.stopPropagation()),v?.(e)},children:s.map($)}):null});e.s(["BaseForm",0,S],610683);let N=(0,a.memo)(e=>{let{formSchemas:a=[],defaultValues:s,ref:n,formFromProps:l,...r}=e;return(0,t.jsx)(S,{ref:n,formSchemas:a,defaultValues:s,formClassName:"space-y-4",labelClassName:"h-6 flex items-center mb-1 system-sm-medium text-text-secondary",formFromProps:l,...r})});e.s(["default",0,N],588226)},475390,e=>{"use strict";var t=e.i(875037),a=e.i(562572);e.i(214309);var s=e.i(654537),n=e.i(367916),l=e.i(722384);let r="pipeline",i=[r,"template-list"],u=[r,"published-pipeline"];e.s(["publishedPipelineInfoQueryKeyPrefix",0,u,"useCheckPipelineDependencies",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[r,"check-dependencies"],mutationFn:e=>(0,n.get)(`/rag/pipelines/imports/${e}/check-dependencies`),...e})},"useConvertDatasetToPipeline",0,()=>(0,t.useMutation)({mutationKey:[r,"convert-dataset-to-pipeline"],mutationFn:e=>(0,n.post)(`/rag/pipelines/transform/datasets/${e}`)}),"useDataSourceList",0,(e,t)=>(0,a.useQuery)({enabled:e,queryKey:[r,"datasource"],staleTime:0,queryFn:async()=>{let e=await (0,n.get)("/rag/pipelines/datasource-plugins");return t?.(e),e},retry:!1}),"useDatasourceSingleRun",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[r,"datasource-node-single-run"],mutationFn:e=>{let{pipeline_id:t,...a}=e;return(0,n.post)(`/rag/pipelines/${t}/workflows/draft/datasource/variables-inspect`,{body:a})},...e})},"useDeleteTemplate",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[r,"template-delete"],mutationFn:e=>(0,n.del)(`/rag/pipeline/customized/templates/${e}`),...e})},"useDraftPipelinePreProcessingParams",0,function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{pipeline_id:s,node_id:l}=e;return(0,a.useQuery)({queryKey:[r,"draft-pipeline-pre-processing-params",s,l],queryFn:()=>(0,n.get)(`/rag/pipelines/${s}/workflows/draft/pre-processing/parameters`,{params:{node_id:l}}),staleTime:0,enabled:t})},"useDraftPipelineProcessingParams",0,function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{pipeline_id:s,node_id:l}=e;return(0,a.useQuery)({queryKey:[r,"draft-pipeline-processing-params",s,l],queryFn:()=>(0,n.get)(`/rag/pipelines/${s}/workflows/draft/processing/parameters`,{params:{node_id:l}}),staleTime:0,enabled:t})},"useExportPipelineDSL",0,()=>(0,t.useMutation)({mutationKey:[r,"export-pipeline-dsl"],mutationFn:e=>{let{pipelineId:t,include:a=!1}=e;return(0,n.get)(`/rag/pipelines/${t}/exports?include_secret=${a}`)}}),"useExportTemplateDSL",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[r,"template-dsl-export"],mutationFn:e=>(0,n.post)(`/rag/pipeline/customized/templates/${e}`),...e})},"useImportPipelineDSL",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[r,"dsl-import"],mutationFn:e=>(0,n.post)("/rag/pipelines/imports",{body:e}),...e})},"useImportPipelineDSLConfirm",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[r,"dsl-import-confirm"],mutationFn:e=>(0,n.post)(`/rag/pipelines/imports/${e}/confirm`),...e})},"useInvalidCustomizedTemplateList",0,()=>(0,l.useInvalid)([...i,"customized"]),"useInvalidDataSourceList",0,()=>(0,l.useInvalid)([r,"datasource"]),"usePipelineExecutionLog",0,e=>{let{dataset_id:t,document_id:s}=e;return(0,a.useQuery)({queryKey:[r,"pipeline-execution-log",t,s],queryFn:()=>(0,n.get)(`/datasets/${t}/documents/${s}/pipeline-execution-log`),staleTime:0})},"usePipelineTemplateById",0,(e,t)=>{let{template_id:s,type:l}=e;return(0,a.useQuery)({queryKey:[r,"template",l,s],queryFn:()=>(0,n.get)(`/rag/pipeline/templates/${s}`,{params:{type:l}}),enabled:t,staleTime:0})},"usePipelineTemplateList",0,function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return(0,a.useQuery)({queryKey:[...i,e],queryFn:()=>(0,n.get)("/rag/pipeline/templates",{params:e}),enabled:t})},"usePreviewOnlineDocument",0,()=>(0,t.useMutation)({mutationKey:[r,"preview-online-document"],mutationFn:e=>{let{pipelineId:t,datasourceNodeId:a,workspaceID:l,pageID:r,pageType:i,credentialId:u}=e;return(0,n.post)(`/rag/pipelines/${t}/workflows/published/datasource/nodes/${a}/preview`,{body:{datasource_type:s.DatasourceType.onlineDocument,credential_id:u,inputs:{workspace_id:l,page_id:r,type:i}}})}}),"usePublishAsCustomizedPipeline",0,()=>(0,t.useMutation)({mutationKey:[r,"publish-as-customized-pipeline"],mutationFn:e=>{let{pipelineId:t,name:a,icon_info:s,description:l}=e;return(0,n.post)(`/rag/pipelines/${t}/customized/publish`,{body:{name:a,icon_info:s,description:l}})}}),"usePublishedPipelineInfo",0,e=>(0,a.useQuery)({queryKey:[...u,e],queryFn:()=>(0,n.get)(`/rag/pipelines/${e}/workflows/publish`),enabled:!!e}),"usePublishedPipelinePreProcessingParams",0,function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{pipeline_id:s,node_id:l}=e;return(0,a.useQuery)({queryKey:[r,"published-pipeline-pre-processing-params",s,l],queryFn:()=>(0,n.get)(`/rag/pipelines/${s}/workflows/published/pre-processing/parameters`,{params:{node_id:l}}),staleTime:0,enabled:t})},"usePublishedPipelineProcessingParams",0,e=>{let{pipeline_id:t,node_id:s}=e;return(0,a.useQuery)({queryKey:[r,"published-pipeline-processing-params",t,s],queryFn:()=>(0,n.get)(`/rag/pipelines/${t}/workflows/published/processing/parameters`,{params:{node_id:s}}),staleTime:0})},"useRunPublishedPipeline",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[r,"run-published-pipeline"],mutationFn:e=>{let{pipeline_id:t,is_preview:a,...s}=e;return(0,n.post)(`/rag/pipelines/${t}/workflows/published/run`,{body:{...s,is_preview:a,response_mode:"blocking"}})},...e})},"useUpdateTemplateInfo",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[r,"template-update"],mutationFn:e=>{let{template_id:t,...a}=e;return(0,n.patch)(`/rag/pipeline/customized/templates/${t}`,{body:a})},...e})}])},255202,e=>{"use strict";var t=e.i(875037),a=e.i(562572),s=e.i(367916),n=e.i(722384);let l="data-source-auth";e.s(["useGetDataSourceAuth",0,e=>{let{pluginId:t,provider:n}=e;return(0,a.useQuery)({queryKey:[l,"specific-data-source",t,n],queryFn:()=>(0,s.get)(`/auth/plugin/datasource/${t}/${n}`),retry:0})},"useGetDataSourceListAuth",0,()=>(0,a.useQuery)({queryKey:[l,"list"],queryFn:()=>(0,s.get)("/auth/plugin/datasource/list"),retry:0}),"useGetDataSourceOAuthUrl",0,e=>(0,t.useMutation)({mutationKey:[l,"oauth-url",e],mutationFn:t=>(0,s.get)(`/oauth/plugin/${e}/datasource/get-authorization-url?credential_id=${t}`)}),"useGetDefaultDataSourceListAuth",0,()=>(0,a.useQuery)({queryKey:[l,"default-list"],queryFn:()=>(0,s.get)("/auth/plugin/datasource/default-list"),retry:0}),"useInvalidDataSourceAuth",0,e=>{let{pluginId:t,provider:a}=e;return(0,n.useInvalid)([l,"specific-data-source",t,a])},"useInvalidDataSourceListAuth",0,()=>(0,n.useInvalid)([l,"list"]),"useInvalidDefaultDataSourceListAuth",0,()=>(0,n.useInvalid)([l,"default-list"])])},95085,e=>{"use strict";e.s(["default",()=>d,"useCanInstallPluginFromMarketplace",()=>c]);var t=e.i(268255);e.i(152567);var a=e.i(408767),s=e.i(711536),n=e.i(494268),l=e.i(157644),r=e.i(137667),i=e.i(944911);let u=(e,t)=>!!e&&e!==i.PermissionType.noOne&&(e===i.PermissionType.everyone||t),o=()=>{let{t:e}=(0,a.useTranslation)(),{isCurrentWorkspaceManager:t,isCurrentWorkspaceOwner:n}=(0,s.useAppContext)(),{data:i}=(0,l.useReferenceSettings)(),{permission:o}=i||{},c=(0,l.useInvalidateReferenceSettings)(),{mutate:d,isPending:p}=(0,l.useMutationReferenceSettings)({onSuccess:()=>{c(),r.default.notify({type:"success",message:e("api.actionSuccess",{ns:"common"})})}}),m=t||n;return{referenceSetting:i,setReferenceSettings:d,canManagement:u(o?.install_permission,m),canDebugger:u(o?.debug_permission,m),canSetPermissions:m,isUpdatePending:p}},c=()=>{let{enable_marketplace:e}=(0,n.useGlobalPublicStore)(e=>e.systemFeatures),{canManagement:a}=o();return{canInstallPluginFromMarketplace:(0,t.useMemo)(()=>e&&a,[e,a])}},d=o},887460,e=>{"use strict";var t=e.i(367916);let a=async(e,a)=>{let s=new FormData;return s.append(a?"bundle":"pkg",e),(0,t.upload)({xhr:new XMLHttpRequest,data:s},!1,`/workspaces/current/plugin/upload/${a?"bundle":"pkg"}`)},s=async e=>(0,t.post)("/workspaces/current/plugin/upgrade/marketplace",{body:e}),n=async(e,a,s,n,l)=>(0,t.post)("/workspaces/current/plugin/upgrade/github",{body:{repo:e,version:a,package:s,original_plugin_unique_identifier:n,new_plugin_unique_identifier:l}}),l=async(e,a,s)=>(0,t.post)("/workspaces/current/plugin/upload/github",{body:{repo:e,version:a,package:s}}),r=async e=>(0,t.getMarketplace)(`/plugins/identifier?unique_identifier=${e}`),i=async e=>{let{org:a,name:s,version:n}=e;return(0,t.getMarketplace)(`/bundles/${a}/${s}/${n}`)},u=async e=>{let{org:a,name:s}=e;return(0,t.getMarketplace)(`/plugins/${a}/${s}`)},o=async e=>(0,t.get)(`/workspaces/current/plugin/tasks/${e}`),c=async e=>(0,t.post)("/workspaces/current/plugin/uninstall",{body:{plugin_installation_id:e}});e.s(["checkTaskStatus",0,o,"fetchBundleInfoFromMarketPlace",0,i,"fetchManifestFromMarketPlace",0,r,"fetchPluginInfoFromMarketPlace",0,u,"uninstallPlugin",0,c,"updateFromGitHub",0,n,"updateFromMarketPlace",0,s,"uploadFile",0,a,"uploadGitHub",0,l])},157644,e=>{"use strict";e.s(["useCheckInstalled",()=>y,"useDebugKey",()=>T,"useDownloadPlugin",()=>U,"useFeaturedToolsRecommendations",()=>b,"useFeaturedTriggersRecommendations",()=>k,"useFetchDynamicOptions",()=>W,"useFetchPluginsInMarketPlaceByIds",()=>R,"useFetchPluginsInMarketPlaceByInfo",()=>D,"useInstallOrUpdate",()=>q,"useInstallPackageFromGitHub",()=>N,"useInstallPackageFromLocal",()=>S,"useInstallPackageFromMarketPlace",()=>_,"useInstalledLatestVersion",()=>P,"useInstalledPluginList",()=>w,"useInvalidateInstalledPluginList",()=>I,"useInvalidateReferenceSettings",()=>L,"useModelInList",()=>G,"useMutationCheckDependencies",()=>B,"useMutationClearTaskPlugin",()=>z,"useMutationReferenceSettings",()=>A,"usePluginDeclarationFromMarketPlace",()=>C,"usePluginInfo",()=>H,"usePluginManifestInfo",()=>O,"usePluginReadme",()=>X,"usePluginReadmeAsset",()=>Y,"usePluginTaskList",()=>V,"useReferenceSettings",()=>E,"useRemoveAutoUpgrade",()=>K,"useUpdatePackageFromMarketPlace",()=>F,"useUploadGitHub",()=>M,"useVersionListOfPlugin",()=>j]);var t=e.i(236063),a=e.i(875037),s=e.i(562572),n=e.i(214309),l=e.i(361126),r=e.i(268255),i=e.i(632717),u=e.i(108185),o=e.i(95085),c=e.i(944911),d=e.i(81828),p=e.i(887460),m=e.i(367916),g=e.i(154033);let f="plugins",h=[f,"installedPluginList"],y=e=>{let{pluginIds:t,enabled:a}=e;return(0,s.useQuery)({queryKey:[f,"checkInstalled",t],queryFn:()=>(0,m.post)("/workspaces/current/plugin/list/installations/ids",{body:{plugin_ids:t}}),enabled:a,staleTime:0})},v=[f,"recommendedMarketplacePlugins"],x=function(){let{collection:e="__recommended-plugins-tools",enabled:t=!0,limit:a=15}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.useQuery)({queryKey:[...v,e,a],queryFn:async()=>(await (0,m.postMarketplace)(`/collections/${e}/plugins`,{body:{limit:a}})).data.plugins.map(e=>(0,u.getFormattedPlugin)(e)),enabled:t,staleTime:6e4})},b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,{data:a=[],isLoading:s}=x({collection:"__recommended-plugins-tools",enabled:e,limit:t});return{plugins:a,isLoading:s}},k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,{data:a=[],isLoading:s}=x({collection:"__recommended-plugins-triggers",enabled:e,limit:t});return{plugins:a,isLoading:s}},w=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=async e=>{let{pageParam:t=1}=e;return await (0,m.get)(`/workspaces/current/plugin/list?page=${t}&page_size=${a}`)},{data:n,error:l,fetchNextPage:r,hasNextPage:i,isFetchingNextPage:u,isLoading:o,isSuccess:c}=(0,t.useInfiniteQuery)({enabled:!e,queryKey:h,queryFn:s,getNextPageParam:(e,t)=>{let s=e.total,n=t.length;if(!(n*a>=s))return n+1},initialPageParam:1}),d=n?.pages.flatMap(e=>e.plugins)??[],p=n?.pages[0].total??0;return{data:e?void 0:{plugins:d,total:p},isLastPage:!i,loadNextPage:()=>{r()},isLoading:o,isFetching:u,error:l,isSuccess:c}},P=e=>(0,s.useQuery)({queryKey:[f,"installedLatestVersion",e],queryFn:()=>(0,m.post)("/workspaces/current/plugin/list/latest-versions",{body:{plugin_ids:e}}),enabled:!!e.length,initialData:e.length?void 0:{versions:{}}}),I=()=>{let e=(0,n.useQueryClient)(),t=(0,g.useInvalidateAllBuiltInTools)();return()=>{e.invalidateQueries({queryKey:h}),t()}},_=e=>(0,a.useMutation)({...e,mutationFn:e=>(0,m.post)("/workspaces/current/plugin/install/marketplace",{body:{plugin_unique_identifiers:[e]}})}),F=e=>(0,a.useMutation)({...e,mutationFn:e=>(0,m.post)("/workspaces/current/plugin/upgrade/marketplace",{body:e})}),C=e=>(0,s.useQuery)({queryKey:[f,"pluginDeclaration",e],queryFn:()=>(0,m.get)("/workspaces/current/plugin/marketplace/pkg",{params:{plugin_unique_identifier:e}}),enabled:!!e}),j=e=>(0,s.useQuery)({enabled:!!e,queryKey:[f,"versions",e],queryFn:()=>(0,m.getMarketplace)(`/plugins/${e}/versions`,{params:{page:1,page_size:100}})}),S=()=>(0,a.useMutation)({mutationFn:e=>(0,m.post)("/workspaces/current/plugin/install/pkg",{body:{plugin_unique_identifiers:[e]}})}),N=()=>(0,a.useMutation)({mutationFn:e=>{let{repoUrl:t,selectedVersion:a,selectedPackage:s,uniqueIdentifier:n}=e;return(0,m.post)("/workspaces/current/plugin/install/github",{body:{repo:t,version:a,package:s,plugin_unique_identifier:n}})}}),M=e=>(0,s.useQuery)({queryKey:[f,"uploadGitHub",e],queryFn:()=>(0,m.post)("/workspaces/current/plugin/upload/github",{body:e}),retry:0}),q=e=>{let{onSuccess:t}=e,{mutateAsync:s}=F();return(0,a.useMutation)({mutationFn:e=>{let{payload:t,plugin:a,installedInfo:n}=e;return Promise.all(t.map(async(e,t)=>{try{let l=n[`${a[t]?.org||a[t]?.author}/${a[t]?.name}`],r=!!l,i="",u="",o=!1;if("github"===e.type){if(!(i=e.value.github_plugin_unique_identifier)){let{unique_identifier:t}=await (0,m.post)("/workspaces/current/plugin/upload/github",{body:{repo:e.value.repo,version:e.value.release||e.value.version,package:e.value.packages||e.value.package}});if((i=e.value.github_plugin_unique_identifier||t)===l?.uniqueIdentifier)return{status:c.TaskStatus.success,taskId:"",uniqueIdentifier:""}}if(!r){let{task_id:t,all_installed:a}=await (0,m.post)("/workspaces/current/plugin/install/github",{body:{repo:e.value.repo,version:e.value.release||e.value.version,package:e.value.packages||e.value.package,plugin_unique_identifier:i}});u=t,o=a}}if("marketplace"===e.type){if((i=e.value.marketplace_plugin_unique_identifier||a[t]?.plugin_id)===l?.uniqueIdentifier)return{status:c.TaskStatus.success,taskId:"",uniqueIdentifier:""};if(!r){let{task_id:e,all_installed:t}=await (0,m.post)("/workspaces/current/plugin/install/marketplace",{body:{plugin_unique_identifiers:[i]}});u=e,o=t}}if("package"===e.type){if((i=e.value.unique_identifier)===l?.uniqueIdentifier)return{status:c.TaskStatus.success,taskId:"",uniqueIdentifier:""};if(!r){let{task_id:e,all_installed:t}=await (0,m.post)("/workspaces/current/plugin/install/pkg",{body:{plugin_unique_identifiers:[i]}});u=e,o=t}}if(r)if("package"===e.type){await (0,p.uninstallPlugin)(l.installedId);let{task_id:e,all_installed:t}=await (0,m.post)("/workspaces/current/plugin/install/pkg",{body:{plugin_unique_identifiers:[i]}});u=e,o=t}else{let{task_id:e,all_installed:t}=await s({original_plugin_unique_identifier:l?.uniqueIdentifier,new_plugin_unique_identifier:i});u=e,o=t}if(o)return{status:c.TaskStatus.success,taskId:"",uniqueIdentifier:""};return{status:c.TaskStatus.running,taskId:u,uniqueIdentifier:i}}catch(e){return Promise.resolve({status:c.TaskStatus.failed,taskId:"",uniqueIdentifier:""})}}))},onSuccess:t})},T=()=>(0,s.useQuery)({queryKey:[f,"debugKey"],queryFn:()=>(0,m.get)("/workspaces/current/plugin/debugging-key")}),$=[f,"referenceSettings"],E=()=>(0,s.useQuery)({queryKey:$,queryFn:()=>(0,m.get)("/workspaces/current/plugin/preferences/fetch")}),L=()=>{let e=(0,n.useQueryClient)();return()=>{e.invalidateQueries({queryKey:$})}},A=e=>{let{onSuccess:t}=e;return(0,a.useMutation)({mutationFn:e=>(0,m.post)("/workspaces/current/plugin/preferences/change",{body:e}),onSuccess:t})},K=()=>(0,a.useMutation)({mutationFn:e=>(0,m.post)("/workspaces/current/plugin/preferences/autoupgrade/exclude",{body:e})}),R=(e,t)=>(0,s.useQuery)({...t,queryKey:[f,"fetchPluginsInMarketPlaceByIds",e],queryFn:()=>(0,m.postMarketplace)("/plugins/identifier/batch",{body:{unique_identifiers:e}}),enabled:e?.filter(e=>!!e).length>0,retry:0}),D=e=>(0,s.useQuery)({queryKey:[f,"fetchPluginsInMarketPlaceByInfo",e],queryFn:()=>(0,m.postMarketplace)("/plugins/versions/batch",{body:{plugin_tuples:e.map(e=>({org:e.organization,name:e.plugin,version:e.version}))}}),enabled:e?.filter(e=>!!e).length>0,retry:0}),Q=[f,"pluginTaskList"],V=e=>{let[t,a]=(0,r.useState)(!1),{canManagement:n}=(0,o.default)(),{refreshPluginList:u}=(0,i.default)(),{data:d,isFetched:p,isRefetching:g,refetch:f,...h}=(0,s.useQuery)({enabled:n,queryKey:Q,queryFn:()=>(0,m.get)("/workspaces/current/plugin/tasks?page=1&page_size=100"),refetchInterval:e=>{let t=e.state.data;return!t?.tasks.every(e=>e.status===c.TaskStatus.success||e.status===c.TaskStatus.failed)&&5e3}});(0,r.useEffect)(()=>{if(!t||g)return;let a=(0,l.cloneDeep)(d),s=a?.tasks.every(e=>e.status===c.TaskStatus.success||e.status===c.TaskStatus.failed),n=a?.tasks.every(e=>e.status===c.TaskStatus.failed);s&&a?.tasks.length&&!n&&u(e?{category:e}:void 0,!e)},[g]),(0,r.useEffect)(()=>{a(!0)},[]);let y=(0,r.useCallback)(()=>{f()},[f]);return{data:d,pluginTasks:d?.tasks||[],isFetched:p,handleRefetch:y,...h}},z=()=>(0,a.useMutation)({mutationFn:e=>{let{taskId:t,pluginId:a}=e,s=encodeURIComponent(a);return(0,m.post)(`/workspaces/current/plugin/tasks/${t}/delete/${s}`)}}),O=e=>(0,s.useQuery)({enabled:!!e,queryKey:[[f,"manifest",e]],queryFn:()=>(0,m.getMarketplace)(`/plugins/${e}`),retry:0}),U=(e,t)=>(0,s.useQuery)({queryKey:[f,"downloadPlugin",e],queryFn:()=>(0,m.getMarketplace)(`/plugins/${e.organization}/${e.pluginName}/${e.version}/download`),enabled:t,retry:0}),B=()=>(0,a.useMutation)({mutationFn:e=>(0,m.get)(`/apps/imports/${e}/check-dependencies`)}),G=(e,t)=>{let a=e?.provider;return(0,s.useQuery)({queryKey:["modelInList",a,t],queryFn:async()=>{if(!t||!a)return!1;try{let e=await (0,d.fetchModelProviderModelList)(`/workspaces/current/model-providers/${a}/models`);return!!t&&!!e.data.find(e=>e.model===t)}catch{return!1}},enabled:!!t&&!!a})},H=e=>(0,s.useQuery)({queryKey:["pluginInfo",e],queryFn:async()=>{if(!e)return null;let t=e.split("/"),a=t[0],s=t[1];try{let e=await (0,p.fetchPluginInfoFromMarketPlace)({org:a,name:s});return e.data.plugin.category===c.PluginCategoryEnum.model?e.data.plugin:null}catch{return null}},enabled:!!e}),W=(e,t,s,n,l,r)=>(0,a.useMutation)({mutationFn:()=>(0,m.get)("/workspaces/current/plugin/parameters/dynamic-options",{params:{plugin_id:e,provider:t,action:s,parameter:n,provider_type:l,...r}})}),X=e=>{let{plugin_unique_identifier:t,language:a}=e;return(0,s.useQuery)({queryKey:["pluginReadme",t,a],queryFn:()=>(0,m.get)("/workspaces/current/plugin/readme",{params:{plugin_unique_identifier:t,language:a}},{silent:!0}),enabled:!!t,retry:0})},Y=e=>{let{file_name:t,plugin_unique_identifier:a}=e,n=t?.replace(/(^\.\/_assets\/|^_assets\/)/,"");return(0,s.useQuery)({queryKey:["pluginReadmeAsset",a,n],queryFn:()=>(0,m.get)("/workspaces/current/plugin/asset",{params:{plugin_unique_identifier:a,file_name:n}},{silent:!0}),enabled:!!a&&!!t&&/(^\.\/_assets|^_assets)/.test(t)})}},632717,e=>{"use strict";e.s(["default",()=>d]);var t=e.i(739255),a=e.i(225162),s=e.i(56971),n=e.i(255202),l=e.i(475390),r=e.i(157644),i=e.i(243922),u=e.i(154033),o=e.i(819114),c=e.i(944911);let d=()=>{let e=(0,r.useInvalidateInstalledPluginList)(),{mutate:d}=(0,a.useModelList)(t.ModelTypeEnum.textGeneration),{mutate:p}=(0,a.useModelList)(t.ModelTypeEnum.textEmbedding),{mutate:m}=(0,a.useModelList)(t.ModelTypeEnum.rerank),{refreshModelProviders:g}=(0,s.useProviderContext)(),f=(0,u.useInvalidateAllToolProviders)(),h=(0,u.useInvalidateAllBuiltInTools)(),y=(0,l.useInvalidDataSourceList)(),v=(0,n.useInvalidDataSourceListAuth)(),x=(0,i.useInvalidateStrategyProviders)(),b=(0,o.useInvalidateAllTriggerPlugins)(),k=(0,u.useInvalidateRAGRecommendedPlugins)();return{refreshPluginList:(t,a)=>{e(),(t&&c.PluginCategoryEnum.tool.includes(t.category)||a)&&(f(),h(),k("tool")),(t&&c.PluginCategoryEnum.trigger.includes(t.category)||a)&&b(),(t&&c.PluginCategoryEnum.datasource.includes(t.category)||a)&&(y(),v()),(t&&c.PluginCategoryEnum.model.includes(t.category)||a)&&(g(),d(),p(),m()),(t&&c.PluginCategoryEnum.agent.includes(t.category)||a)&&x()}}}},574270,e=>{"use strict";var t=e.i(563199),a=e.i(268255),s=e.i(935139);let n=a.memo(e=>{let{isChecked:a,disabled:n=!1,onCheck:l,className:r}=e;return(0,t.jsx)("div",{role:"radio","aria-checked":a,"aria-disabled":n,className:(0,s.cn)("size-4 rounded-full",a&&!n&&"border-[5px] border-components-radio-border-checked hover:border-components-radio-border-checked-hover",!a&&!n&&"border border-components-radio-border hover:border-components-radio-border-hover",a&&n&&"border-[5px] border-components-radio-border-checked-disabled",!a&&n&&"border border-components-radio-border-disabled bg-components-radio-bg-disabled",!n&&"bg-components-radio-bg shadow-xs shadow-shadow-shadow-3 hover:bg-components-radio-bg-hover",r),onClick:e=>{n||l?.(e)}})});e.s(["default",0,n])},931576,598898,381480,70486,e=>{"use strict";var t=e.i(563199),a=e.i(268255);e.i(152567);var s=e.i(408767),n=e.i(21151),l=e.i(935139),r=e.i(944911),i=e.i(568349),u=e.i(664826),o=e.i(632717),c=e.i(837699),d=e.i(151094),p=e.i(324935),m=e.i(95085),g=e.i(124836),f=e.i(339548);let h=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object.assign({},...t)},y={enabled:!0};function v(e){var t;let s=(0,a.useRef)(void 0);s.current||(s.current=e??{all:t=t||new Map,on:function(e,a){var s=t.get(e);s?s.push(a):t.set(e,[a])},off:function(e,a){var s=t.get(e);s&&(a?s.splice(s.indexOf(a)>>>0,1):t.set(e,[]))},emit:function(e,a){var s=t.get(e);s&&s.slice().map(function(e){e(a)}),(s=t.get("*"))&&s.slice().map(function(t){t(e,a)})}}),e&&s.current!==e&&(s.current.off("*"),s.current=e);let n=s.current;return{emit:n.emit,useSubscribe:(e,t,s)=>{let{enabled:l}=h(y,s);(0,a.useEffect)(()=>{if(l)return n.on(e,t),()=>n.off(e,t)})}}}e.s(["useMitt",()=>v],598898);let x=(0,f.createContext)({emit:g.noop,useSubscribe:g.noop});function b(e){return(0,f.useContextSelector)(x,e)}e.s(["MittProvider",0,e=>{let{children:a}=e,s=v();return(0,t.jsx)(x.Provider,{value:s,children:a})},"useMittContextSelector",()=>b],381480);var k=e.i(157644),w=e.i(745754),P=e.i(105845),I=e.i(99649),_=e.i(494268),F=e.i(21693);e.i(36860);var C=e.i(438270);let j=a.memo(()=>{let{t:e}=(0,s.useTranslation)();return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(p.default,{className:"shrink-0",checked:!1,disabled:!0}),(0,t.jsxs)("div",{className:"hover-bg-components-panel-on-panel-item-bg relative grow rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-on-panel-item-bg p-4 pb-3 shadow-xs",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsxs)("div",{className:"relative flex h-10 w-10 items-center justify-center gap-2 rounded-[10px] border-[0.5px] border-state-destructive-border bg-state-destructive-hover p-1 backdrop-blur-sm",children:[(0,t.jsx)("div",{className:"flex h-5 w-5 items-center justify-center",children:(0,t.jsx)(C.Group,{className:"text-text-quaternary"})}),(0,t.jsx)("div",{className:"absolute bottom-[-4px] right-[-4px] rounded-full border-[2px] border-components-panel-bg bg-state-destructive-solid",children:(0,t.jsx)(c.RiCloseLine,{className:"h-3 w-3 text-text-primary-on-surface"})})]}),(0,t.jsxs)("div",{className:"ml-3 grow",children:[(0,t.jsx)("div",{className:"system-md-semibold flex h-5 items-center text-text-destructive",children:e("installModal.pluginLoadError",{ns:"plugin"})}),(0,t.jsx)("div",{className:"system-xs-regular mt-0.5 text-text-tertiary",children:e("installModal.pluginLoadErrorDesc",{ns:"plugin"})})]})]}),(0,t.jsx)(F.LoadingPlaceholder,{className:"mt-3 w-[420px]"})]})]})});var S=e.i(547682);function N(e,t){if(t.plugin_installation_permission.restrict_to_marketplace_only&&("github"===e.from||"package"===e.from))return{canInstall:!1};if(t.plugin_installation_permission.plugin_installation_scope===S.InstallationScope.ALL)return{canInstall:!0};if(t.plugin_installation_permission.plugin_installation_scope===S.InstallationScope.NONE)return{canInstall:!1};let a=e.verification||{};return(e.verification&&e.verification.authorized_category||(a.authorized_category="langgenius"),t.plugin_installation_permission.plugin_installation_scope===S.InstallationScope.OFFICIAL_ONLY)?{canInstall:"langgenius"===a.authorized_category}:t.plugin_installation_permission.plugin_installation_scope===S.InstallationScope.OFFICIAL_AND_PARTNER?{canInstall:"langgenius"===a.authorized_category||"partner"===a.authorized_category}:{canInstall:!0}}function M(e){return N(e,(0,_.useGlobalPublicStore)(e=>e.systemFeatures))}let q=a.memo(()=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(p.default,{className:"shrink-0",checked:!1,disabled:!0}),(0,t.jsx)("div",{className:"hover-bg-components-panel-on-panel-item-bg relative grow rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-on-panel-item-bg p-4 pb-3 shadow-xs",children:(0,t.jsx)(F.default,{wrapClassName:"w-full"})})]}));var T=e.i(228403),$=e.i(925521),E=e.i(365181),L=e.i(222573),A=e.i(292005);let K=a.memo(e=>{let{checked:a,onCheckedChange:s,payload:n,isFromMarketPlace:l,versionInfo:r}=e,{getIconUrl:i}=(0,L.default)(),u={...r,toInstallVersion:n.version},{canInstall:o}=M(n);return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(p.default,{disabled:!o,className:"shrink-0",checked:a,onCheck:()=>s(n)}),(0,t.jsx)(E.default,{className:"grow",payload:{...n,icon:l?`${$.MARKETPLACE_API_PREFIX}/plugins/${n.org}/${n.name}/icon`:i(n.icon)},titleLeft:n.version?(0,t.jsx)(A.default,{...u}):null,limitedInstall:!o})]})}),R=a.memo(e=>{let{checked:s,onCheckedChange:n,dependency:l,versionInfo:r,onFetchedPayload:i,onFetchError:u}=e,o=l.value,{data:c,error:d}=(0,k.useUploadGitHub)({repo:o.repo,version:o.release||o.version,package:o.packages||o.package}),[p,m]=a.useState(null);return((0,a.useEffect)(()=>{if(c){let e={...(0,T.pluginManifestToCardPluginProps)(c.manifest),plugin_id:c.unique_identifier};i(e),m({...e,from:l.type})}},[c]),(0,a.useEffect)(()=>{d&&u()},[d]),p)?(0,t.jsx)(K,{payload:p,versionInfo:r,checked:s,onCheckedChange:n}):(0,t.jsx)(q,{})}),D=a.memo(e=>{let{checked:a,onCheckedChange:s,payload:n,version:l,versionInfo:r}=e;return n?(0,t.jsx)(K,{checked:a,onCheckedChange:s,payload:{...n,version:l},isFromMarketPlace:!0,versionInfo:r}):(0,t.jsx)(q,{})}),Q=a.memo(e=>{let{payload:a,checked:s,onCheckedChange:n,isFromMarketPlace:l,versionInfo:r}=e;if(!a.value?.manifest)return(0,t.jsx)(j,{});let i=(0,T.pluginManifestToCardPluginProps)(a.value.manifest);return(0,t.jsx)(K,{payload:{...i,from:a.type},checked:s,onCheckedChange:n,isFromMarketPlace:l,versionInfo:r})}),V=e=>{let{allPlugins:s,selectedPlugins:n,onSelect:l,onSelectAll:r,onDeSelectAll:i,onLoadedAllPlugin:u,isFromMarketPlace:o,ref:c}=e,d=(0,_.useGlobalPublicStore)(e=>e.systemFeatures),{isLoading:p,data:m,error:g}=(0,k.useFetchPluginsInMarketPlaceByInfo)(s.filter(e=>"marketplace"===e.type).map(e=>{let[t,a]=e.value.marketplace_plugin_unique_identifier.split("@")[0].split("/"),[s,n]=a.split(":");return{organization:t,plugin:s,version:n}})),{isLoading:f,data:h,error:y}=(0,k.useFetchPluginsInMarketPlaceByInfo)(s.filter(e=>"marketplace"===e.type).map(e=>e.value)),[v,x]=(0,a.useState)(s.some(e=>"package"===e.type)?s.map(e=>{if("package"===e.type)return{...e.value.manifest,plugin_id:e.value.unique_identifier}}):[]),b=a.useRef(v),w=(0,a.useCallback)(e=>{x(e),b.current=e},[]),[F,C]=(0,a.useState)([]),S=(0,a.useCallback)(e=>t=>{w((0,P.produce)(b.current,a=>{a[e]=t}))},[w]),M=(0,a.useCallback)(e=>()=>{C([...F,e])},[F]),q=(0,a.useMemo)(()=>{let e=[];return s.forEach((t,a)=>{"marketplace"===t.type&&e.push(a)}),e},[s]);(0,a.useEffect)(()=>{if(!p&&m?.data.list){let e=s.filter(e=>"marketplace"===e.type).map(e=>{let t=e.value.marketplace_plugin_unique_identifier?.split(":")[0];return{...m.data.list.find(e=>e.plugin.plugin_id===t)?.plugin,from:e.type}}),t=[];w((0,P.produce)(b.current,a=>{q.forEach((s,n)=>{e[n]?a[s]={...e[n],version:e[n].version||e[n].latest_version}:t.push(s)})})),t.length>0&&C([...F,...t])}},[p]),(0,a.useEffect)(()=>{if(!f&&h?.data.list){let e=h?.data.list,t=[];w((0,P.produce)(b.current,a=>{q.forEach((s,n)=>{if(e[n]){let t=e[n];a[s]={...t.plugin,plugin_id:t.version.unique_identifier}}else t.push(s)})})),t.length>0&&C([...F,...t])}},[f]),(0,a.useEffect)(()=>{(y||g)&&C([...F,...q])},[y,g]);let T=v.filter(e=>!!e).length+F.length===s.length,{installedInfo:$}=(0,I.default)({pluginIds:v?.filter(e=>!!e).map(e=>`${e?.org||e?.author}/${e?.name}`)||[],enabled:T}),E=(0,a.useCallback)(e=>{let t=$?.[e];return{hasInstalled:!!t,installedVersion:t?.installedVersion,toInstallVersion:""}},[$]);(0,a.useEffect)(()=>{T&&$&&u($)},[T,$]);let L=(0,a.useCallback)(e=>()=>{let t=v.filter(e=>{let{canInstall:t}=N(e,d);return t});l(v[e],e,t.length)},[l,v,d]);return(0,a.useImperativeHandle)(c,()=>({selectAllPlugins:()=>{let e=[],t=[];s.forEach((a,s)=>{let n=v[s];if(!n)return;let{canInstall:l}=N(n,d);l&&(e.push(s),t.push(n))}),r(t,e)},deSelectAllPlugins:()=>{i()}})),(0,t.jsx)(t.Fragment,{children:s.map((e,a)=>{if(F.includes(a))return(0,t.jsx)(j,{},a);let s=v[a];return"github"===e.type?(0,t.jsx)(R,{checked:!!n.find(e=>e.plugin_id===v[a]?.plugin_id),onCheckedChange:L(a),dependency:e,onFetchedPayload:S(a),onFetchError:M(a),versionInfo:E(`${s?.org||s?.author}/${s?.name}`)},a):"marketplace"===e.type?(0,t.jsx)(D,{checked:!!n.find(e=>e.plugin_id===v[a]?.plugin_id),onCheckedChange:L(a),payload:{...s,from:e.type},version:e.value.version||s?.version||"",versionInfo:E(`${s?.org||s?.author}/${s?.name}`)},a):(0,t.jsx)(Q,{checked:!!n.find(e=>e.plugin_id===v[a]?.plugin_id),onCheckedChange:L(a),payload:e,isFromMarketPlace:o,versionInfo:E(`${s?.org||s?.author}/${s?.name}`)},a)})})},z="installModal",O=a.memo(e=>{let{allPlugins:n,onStartToInstall:l,onInstalled:i,onCancel:u,isFromMarketPlace:g,isHideButton:f}=e,{t:h}=(0,s.useTranslation)(),y=b(e=>e.emit),[v,x]=a.useState([]),[P,I]=a.useState([]),_=v.length,F=(0,a.useRef)(null),{refreshPluginList:C}=(0,o.default)(),[j,S]=(0,a.useState)(!1),N=(0,a.useCallback)(()=>{j?F.current?.deSelectAllPlugins():F.current?.selectAllPlugins()},[j]),[M,q]=a.useState(!1),[T,$]=(0,a.useState)(void 0),E=(0,a.useCallback)(e=>{N(),$(e),q(!0)},[]),{check:L,stop:A}=(0,w.default)(),K=(0,a.useCallback)(()=>{A(),u()},[u,A]),{handleRefetch:R}=(0,k.usePluginTaskList)(),{mutate:D,isPending:Q}=(0,k.useInstallOrUpdate)({onSuccess:async e=>{if(e.every(e=>e.status===r.TaskStatus.success||e.status===r.TaskStatus.failed)){i(v,e.map((e,t)=>({success:e.status===r.TaskStatus.success,isFromMarketPlace:"marketplace"===n[P[t]].type}))),e.some(e=>e.status===r.TaskStatus.success)&&(C(void 0,!0),y("plugin:install:success",v.map(e=>`${e.plugin_id}/${e.name}`)));return}R();let t=await Promise.all(e.map(async(e,t)=>{if(e.status!==r.TaskStatus.running)return{success:e.status===r.TaskStatus.success,isFromMarketPlace:"marketplace"===n[P[t]].type};let{status:a}=await L({taskId:e.taskId,pluginUniqueIdentifier:e.uniqueIdentifier});return{success:a===r.TaskStatus.success,isFromMarketPlace:"marketplace"===n[P[t]].type}}));i(v,t),t.some(e=>e.success)&&y("plugin:install:success",v.map(e=>`${e.plugin_id}/${e.name}`))}}),[O,U]=(0,a.useState)(!1),B=(0,a.useCallback)((e,t)=>{x(e),I(t),S(!0),U(!1)},[]),G=(0,a.useCallback)(()=>{x([]),I([]),S(!1),U(!1)},[]),H=(0,a.useCallback)((e,t,a)=>{let s,n=!!v.find(t=>t.plugin_id===e.plugin_id);x(s=n?v.filter(t=>t.plugin_id!==e.plugin_id):[...v,e]),I(n?P.filter(e=>e!==t):[...P,t]),0===s.length?(S(!1),U(!1)):s.length===a?(S(!0),U(!1)):(U(!0),S(!1))},[v,P]),{canInstallPluginFromMarketplace:W}=(0,m.useCanInstallPluginFromMarketplace)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col items-start justify-center gap-4 self-stretch px-6 py-3",children:[(0,t.jsx)("div",{className:"system-md-regular text-text-secondary",children:(0,t.jsx)("p",{children:h(`${z}.${_>1?"readyToInstallPackages":"readyToInstallPackage"}`,{ns:"plugin",num:_})})}),(0,t.jsx)("div",{className:"w-full space-y-1 rounded-2xl bg-background-section-burn p-2",children:(0,t.jsx)(V,{ref:F,allPlugins:n,selectedPlugins:v,onSelect:H,onSelectAll:B,onDeSelectAll:G,onLoadedAllPlugin:E,isFromMarketPlace:g})})]}),!f&&(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 self-stretch p-6 pt-5",children:[(0,t.jsx)("div",{className:"px-2",children:M&&(0,t.jsxs)("div",{className:"flex items-center gap-x-2",onClick:N,children:[(0,t.jsx)(p.default,{checked:j,indeterminate:O}),(0,t.jsx)("p",{className:"system-sm-medium cursor-pointer text-text-secondary",children:h(j?"operation.deSelectAll":"operation.selectAll",{ns:"common"})})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2 self-stretch",children:[!M&&(0,t.jsx)(d.default,{variant:"secondary",className:"min-w-[72px]",onClick:K,children:h("operation.cancel",{ns:"common"})}),(0,t.jsxs)(d.default,{variant:"primary",className:"flex min-w-[72px] space-x-0.5",disabled:!M||Q||0===v.length||!W,onClick:()=>{l?.(),D({payload:n.filter((e,t)=>P.includes(t)),plugin:v,installedInfo:T})},children:[Q&&(0,t.jsx)(c.RiLoader2Line,{className:"h-4 w-4 animate-spin-slow"}),(0,t.jsx)("span",{children:h(`${z}.${Q?"installing":"install"}`,{ns:"plugin"})})]})]})]})]})});var U=e.i(500536);let B=a.memo(e=>{let{list:a,installStatus:n,onCancel:l,isHideButton:r}=e,{t:i}=(0,s.useTranslation)(),{getIconUrl:u}=(0,L.default)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex flex-col items-start justify-center gap-4 self-stretch px-6 py-3",children:(0,t.jsx)("div",{className:"flex flex-wrap content-start items-start gap-1 space-y-1 self-stretch rounded-2xl bg-background-section-burn p-2",children:a.map((e,a)=>(0,t.jsx)(E.default,{className:"w-full",payload:{...e,icon:n[a].isFromMarketPlace?`${$.MARKETPLACE_API_PREFIX}/plugins/${e.org}/${e.name}/icon`:u(e.icon)},installed:n[a].success,installFailed:!n[a].success,titleLeft:e.version?(0,t.jsx)(U.default,{className:"mx-1",size:"s",state:U.BadgeState.Default,children:e.version}):null},e.plugin_id))})}),!r&&(0,t.jsx)("div",{className:"flex items-center justify-end gap-2 self-stretch p-6 pt-5",children:(0,t.jsx)(d.default,{variant:"primary",className:"min-w-[72px]",onClick:l,children:i("operation.close",{ns:"common"})})})]})}),G=a.memo(e=>{let{step:s,onStepChange:n,onStartToInstall:l,setIsInstalling:i,allPlugins:u,onClose:o,isFromMarketPlace:c}=e,[d,p]=(0,a.useState)([]),[m,g]=(0,a.useState)([]),f=(0,a.useCallback)((e,t)=>{g(t),p(e),n(r.InstallStep.installed),i(!1)},[n,i]);return(0,t.jsxs)(t.Fragment,{children:[s===r.InstallStep.readyToInstall&&(0,t.jsx)(O,{allPlugins:u,onCancel:o,onStartToInstall:l,onInstalled:f,isFromMarketPlace:c}),s===r.InstallStep.installed&&(0,t.jsx)(B,{list:d,installStatus:m,onCancel:o})]})});e.s(["default",0,G],70486);var H=e.i(36503),W=e.i(711536);let X="installModal",Y=a.memo(e=>{let{uniqueIdentifier:n,payload:l,onCancel:i,onStartToInstall:u,onInstalled:o,onFailed:p}=e,{t:m}=(0,s.useTranslation)(),g=l.version||l.latest_version,f=l.plugin_id,{installedInfo:h,isLoading:y}=(0,I.default)({pluginIds:[f],enabled:!!f}),v=h?.[f],x=v?.installedVersion,b=!!x,{mutateAsync:P}=(0,k.useInstallPackageFromMarketPlace)(),{mutateAsync:_}=(0,k.useUpdatePackageFromMarketPlace)(),[F,C]=a.useState(!1),{check:j,stop:S}=(0,w.default)(),{handleRefetch:N}=(0,k.usePluginTaskList)(l.category);(0,a.useEffect)(()=>{b&&n===v.uniqueIdentifier&&o()},[b]);let q=async()=>{if(!F){u?.(),C(!0);try{let e,t;if(b){let{all_installed:a,task_id:s}=await _({original_plugin_unique_identifier:v.uniqueIdentifier,new_plugin_unique_identifier:n});e=s,t=a}else{let{all_installed:a,task_id:s}=await P(n);e=s,t=a}if(t)return void o();N();let{status:a,error:s}=await j({taskId:e,pluginUniqueIdentifier:n});if(a===r.TaskStatus.failed)return void p(s);o(!0)}catch(e){if("string"==typeof e)return void p(e);p()}}},{langGeniusVersionInfo:$}=(0,W.useAppContext)(),{data:L}=(0,k.usePluginDeclarationFromMarketPlace)(n),K=(0,a.useMemo)(()=>!L||!$.current_version||(0,H.gte)($.current_version,L?.manifest.meta.minimum_dify_version??"0.0.0"),[$.current_version,L]),{canInstall:R}=M({...l,from:"marketplace"});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col items-start justify-center gap-4 self-stretch px-6 py-3",children:[(0,t.jsxs)("div",{className:"system-md-regular text-text-secondary",children:[(0,t.jsx)("p",{children:m(`${X}.readyToInstall`,{ns:"plugin"})}),!K&&(0,t.jsx)("p",{className:"system-md-regular text-text-warning",children:m("difyVersionNotCompatible",{ns:"plugin",minimalDifyVersion:L?.manifest.meta.minimum_dify_version})})]}),(0,t.jsx)("div",{className:"flex flex-wrap content-start items-start gap-1 self-stretch rounded-2xl bg-background-section-burn p-2",children:(0,t.jsx)(E.default,{className:"w-full",payload:(0,T.pluginManifestInMarketToPluginProps)(l),titleLeft:!y&&(0,t.jsx)(A.default,{hasInstalled:b,installedVersion:x,toInstallVersion:g}),limitedInstall:!R})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2 self-stretch p-6 pt-5",children:[!F&&(0,t.jsx)(d.default,{variant:"secondary",className:"min-w-[72px]",onClick:()=>{S(),i()},children:m("operation.cancel",{ns:"common"})}),(0,t.jsxs)(d.default,{variant:"primary",className:"flex min-w-[72px] space-x-0.5",disabled:F||y||!R,onClick:q,children:[F&&(0,t.jsx)(c.RiLoader2Line,{className:"h-4 w-4 animate-spin-slow"}),(0,t.jsx)("span",{children:m(`${X}.${F?"installing":"install"}`,{ns:"plugin"})})]})]})]})}),J="installModal";e.s(["default",0,e=>{let{uniqueIdentifier:c,manifest:d,isBundle:p,dependencies:m,onSuccess:g,onClose:f}=e,{t:h}=(0,s.useTranslation)(),[y,v]=(0,a.useState)(r.InstallStep.readyToInstall),[x,b]=(0,a.useState)(null),{refreshPluginList:k}=(0,o.default)(),{modalClassName:w,foldAnimInto:P,setIsInstalling:I,handleStartToInstall:_}=(0,u.default)(f),F=(0,a.useCallback)(()=>p&&y===r.InstallStep.installed?h(`${J}.installComplete`,{ns:"plugin"}):y===r.InstallStep.installed?h(`${J}.installedSuccessfully`,{ns:"plugin"}):y===r.InstallStep.installFailed?h(`${J}.installFailed`,{ns:"plugin"}):h(`${J}.installPlugin`,{ns:"plugin"}),[p,y,h]),C=(0,a.useCallback)(e=>{v(r.InstallStep.installed),e||k(d),I(!1)},[d,k,I]),j=(0,a.useCallback)(e=>{v(r.InstallStep.installFailed),I(!1),e&&b(e)},[I]);return(0,t.jsxs)(n.default,{isShow:!0,onClose:P,wrapperClassName:"z-[9999]",className:(0,l.cn)(w,"shadows-shadow-xl flex min-w-[560px] flex-col items-start rounded-2xl border-[0.5px] border-components-panel-border bg-components-panel-bg p-0"),closable:!0,children:[(0,t.jsx)("div",{className:"flex items-start gap-2 self-stretch pb-3 pl-6 pr-14 pt-6",children:(0,t.jsx)("div",{className:"title-2xl-semi-bold self-stretch text-text-primary",children:F()})}),p?(0,t.jsx)(G,{step:y,onStepChange:v,onStartToInstall:_,setIsInstalling:I,onClose:f,allPlugins:m,isFromMarketPlace:!0}):(0,t.jsxs)(t.Fragment,{children:[y===r.InstallStep.readyToInstall&&(0,t.jsx)(Y,{uniqueIdentifier:c,payload:d,onCancel:f,onInstalled:C,onFailed:j,onStartToInstall:_}),[r.InstallStep.installed,r.InstallStep.installFailed].includes(y)&&(0,t.jsx)(i.default,{payload:d,isMarketPayload:!0,isFailed:y===r.InstallStep.installFailed,errMsg:x,onCancel:g})]})]})}],931576)}]);