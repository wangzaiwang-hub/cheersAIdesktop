(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,309235,t=>{"use strict";var e=t.i(217242);t.s(["default",0,function(t){return(null==t?0:t.length)?(0,e.default)(t,1):[]}])},34197,786587,22279,785639,499517,t=>{"use strict";var e=t.i(201912),i=t.i(875811),a=t.i(332505),r=t.i(42125);let n=function(t,e){var i=-1,n=(0,r.default)(t)?Array(t.length):[];return(0,a.default)(t,function(t,a,r){n[++i]=e(t,a,r)}),n};t.s(["default",0,n],786587);var s=t.i(494878);t.s(["default",0,function(t,a){return((0,s.default)(t)?e.default:n)(t,(0,i.default)(a,3))}],34197);var o=t.i(385647);let d=function(t,e,i){for(var a=-1,r=t.length;++a<r;){var n=t[a],s=e(n);if(null!=s&&(void 0===d?s==s&&!(0,o.default)(s):i(s,d)))var d=s,g=n}return g};t.s(["default",0,d],22279);let g=function(t,e){return t<e};t.s(["default",0,g],785639);var l=t.i(16481);t.s(["default",0,function(t){return t&&t.length?d(t,l.default,g):void 0}],499517)},795036,t=>{"use strict";var e=t.i(206655),i=t.i(418274),a=(0,i.__name)((t,a,s,o)=>{t.attr("class",s);let{width:d,height:g,x:l,y:u}=r(t,a);(0,e.configureSvgSize)(t,g,d,o);let h=n(l,u,d,g,a);t.attr("viewBox",h),i.log.debug(`viewBox configured: ${h} with padding: ${a}`)},"setupViewPortForSVG"),r=(0,i.__name)((t,e)=>{let i=t.node()?.getBBox()||{width:0,height:0,x:0,y:0};return{width:i.width+2*e,height:i.height+2*e,x:i.x,y:i.y}},"calculateDimensionsWithPadding"),n=(0,i.__name)((t,e,i,a,r)=>`${t-r} ${e-r} ${i} ${a}`,"createViewBox");t.s(["setupViewPortForSVG",()=>a])},165715,t=>{"use strict";var e=t.i(418274);t.i(991577);var i=t.i(692423),a=(0,e.__name)((t,e)=>{let a;return"sandbox"===e&&(a=(0,i.select)("#i"+t)),("sandbox"===e?(0,i.select)(a.nodes()[0].contentDocument.body):(0,i.select)("body")).select(`[id="${t}"]`)},"getDiagramElement");t.s(["getDiagramElement",()=>a])},949051,853282,370473,45365,57030,657623,778031,295751,t=>{"use strict";var e=t.i(862511);t.s(["constant",()=>e.default],853282);var e=e,i=t.i(83689),i=i,a=t.i(826054),a=a,r=t.i(690919);t.s(["filter",()=>r.default],370473);var r=r,n=t.i(775949),n=n,s=t.i(413759);t.s(["each",()=>s.default],45365);var s=s;let o=function(t){return void 0===t};t.s(["isUndefined",0,o],57030);var d=t.i(217242),g=t.i(468464),l=t.i(385435),u=t.i(229536),h=(0,g.default)(function(t){return(0,l.default)((0,d.default)(t,1,u.default,!0))}),f=t.i(201912),c=a;let p=function(t){var e;return null==t?[]:(e=(0,c.default)(t),(0,f.default)(e,function(e){return t[e]}))};t.s(["values",0,p],657623);var _=t.i(171638);t.s(["reduce",()=>_.default],778031);var _=_;class b{constructor(t={}){this._isDirected=!Object.prototype.hasOwnProperty.call(t,"directed")||t.directed,this._isMultigraph=!!Object.prototype.hasOwnProperty.call(t,"multigraph")&&t.multigraph,this._isCompound=!!Object.prototype.hasOwnProperty.call(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=e.default(void 0),this._defaultEdgeLabelFn=e.default(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return i.default(t)||(t=e.default(t)),this._defaultNodeLabelFn=t,this}nodeCount(){return this._nodeCount}nodes(){return a.default(this._nodes)}sources(){var t=this;return r.default(this.nodes(),function(e){return n.default(t._in[e])})}sinks(){var t=this;return r.default(this.nodes(),function(e){return n.default(t._out[e])})}setNodes(t,e){var i=arguments,a=this;return s.default(t,function(t){i.length>1?a.setNode(t,e):a.setNode(t)}),this}setNode(t,e){return Object.prototype.hasOwnProperty.call(this._nodes,t)?arguments.length>1&&(this._nodes[t]=e):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\0",this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount),this}node(t){return this._nodes[t]}hasNode(t){return Object.prototype.hasOwnProperty.call(this._nodes,t)}removeNode(t){if(Object.prototype.hasOwnProperty.call(this._nodes,t)){var e=t=>this.removeEdge(this._edgeObjs[t]);delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],s.default(this.children(t),t=>{this.setParent(t)}),delete this._children[t]),s.default(a.default(this._in[t]),e),delete this._in[t],delete this._preds[t],s.default(a.default(this._out[t]),e),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,e){if(!this._isCompound)throw Error("Cannot set parent in a non-compound graph");if(o(e))e="\0";else{e+="";for(var i=e;!o(i);i=this.parent(i))if(i===t)throw Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var e=this._parent[t];if("\0"!==e)return e}}children(t){if(o(t)&&(t="\0"),this._isCompound){var e=this._children[t];if(e)return a.default(e)}else if("\0"===t)return this.nodes();else if(this.hasNode(t))return[]}predecessors(t){var e=this._preds[t];if(e)return a.default(e)}successors(t){var e=this._sucs[t];if(e)return a.default(e)}neighbors(t){var e=this.predecessors(t);if(e)return h(e,this.successors(t))}isLeaf(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length}filterNodes(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var i=this;s.default(this._nodes,function(i,a){t(a)&&e.setNode(a,i)}),s.default(this._edgeObjs,function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,i.edge(t))});var a={};return this._isCompound&&s.default(e.nodes(),function(t){e.setParent(t,function t(r){var n=i.parent(r);return void 0===n||e.hasNode(n)?(a[r]=n,n):n in a?a[n]:t(n)}(t))}),e}setDefaultEdgeLabel(t){return i.default(t)||(t=e.default(t)),this._defaultEdgeLabelFn=t,this}edgeCount(){return this._edgeCount}edges(){return p(this._edgeObjs)}setPath(t,e){var i=this,a=arguments;return _.default(t,function(t,r){return a.length>1?i.setEdge(t,r,e):i.setEdge(t,r),r}),this}setEdge(){var t,e,i,a,r=!1,n=arguments[0];"object"==typeof n&&null!==n&&"v"in n?(t=n.v,e=n.w,i=n.name,2==arguments.length&&(a=arguments[1],r=!0)):(t=n,e=arguments[1],i=arguments[3],arguments.length>2&&(a=arguments[2],r=!0)),t=""+t,e=""+e,o(i)||(i=""+i);var s=C(this._isDirected,t,e,i);if(Object.prototype.hasOwnProperty.call(this._edgeLabels,s))return r&&(this._edgeLabels[s]=a),this;if(!o(i)&&!this._isMultigraph)throw Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[s]=r?a:this._defaultEdgeLabelFn(t,e,i);var d=function(t,e,i,a){var r=""+e,n=""+i;if(!t&&r>n){var s=r;r=n,n=s}var o={v:r,w:n};return a&&(o.name=a),o}(this._isDirected,t,e,i);return t=d.v,e=d.w,Object.freeze(d),this._edgeObjs[s]=d,y(this._preds[e],t),y(this._sucs[t],e),this._in[e][s]=d,this._out[t][s]=d,this._edgeCount++,this}edge(t,e,i){var a=1==arguments.length?x(this._isDirected,arguments[0]):C(this._isDirected,t,e,i);return this._edgeLabels[a]}hasEdge(t,e,i){var a=1==arguments.length?x(this._isDirected,arguments[0]):C(this._isDirected,t,e,i);return Object.prototype.hasOwnProperty.call(this._edgeLabels,a)}removeEdge(t,e,i){var a=1==arguments.length?x(this._isDirected,arguments[0]):C(this._isDirected,t,e,i),r=this._edgeObjs[a];return r&&(t=r.v,e=r.w,delete this._edgeLabels[a],delete this._edgeObjs[a],v(this._preds[e],t),v(this._sucs[t],e),delete this._in[e][a],delete this._out[t][a],this._edgeCount--),this}inEdges(t,e){var i=this._in[t];if(i){var a=p(i);return e?r.default(a,function(t){return t.v===e}):a}}outEdges(t,e){var i=this._out[t];if(i){var a=p(i);return e?r.default(a,function(t){return t.w===e}):a}}nodeEdges(t,e){var i=this.inEdges(t,e);if(i)return i.concat(this.outEdges(t,e))}}function y(t,e){t[e]?t[e]++:t[e]=1}function v(t,e){--t[e]||delete t[e]}function C(t,e,i,a){var r=""+e,n=""+i;if(!t&&r>n){var s=r;r=n,n=s}return r+"\x01"+n+"\x01"+(o(a)?"\0":a)}function x(t,e){return C(t,e.v,e.w,e.name)}b.prototype._nodeCount=0,b.prototype._edgeCount=0,t.s(["Graph",()=>b],295751),t.s([],949051)},849218,t=>{"use strict";var e=t.i(301685),i=t.i(296668),a=t.i(922523),r=t.i(104366),n=t.i(826054),s=t.i(365218),o=t.i(832726),d=t.i(920750),g=t.i(416236),l=t.i(166534),u=t.i(750920),h=t.i(9209),f=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)(0,l.default)(e,(0,g.default)(t)),t=(0,u.default)(t);return e}:h.default,c=t.i(502890),p=t.i(921777);let _=function(t){return(0,p.default)(t,s.default,f)};var b=t.i(493405),y=Object.prototype.hasOwnProperty;let v=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&y.call(t,"index")&&(i.index=t.index,i.input=t.input),i};var C=t.i(126885);let x=function(t,e){var i=e?(0,C.default)(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)};var m=/\w*$/;let w=function(t){var e=new t.constructor(t.source,m.exec(t));return e.lastIndex=t.lastIndex,e};var j=t.i(476238),B=j.default?j.default.prototype:void 0,E=B?B.valueOf:void 0,S=t.i(278883);let N=function(t,e,i){var a=t.constructor;switch(e){case"[object ArrayBuffer]":return(0,C.default)(t);case"[object Boolean]":case"[object Date]":return new a(+t);case"[object DataView]":return x(t,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return(0,S.default)(t,i);case"[object Map]":case"[object Set]":return new a;case"[object Number]":case"[object String]":return new a(t);case"[object RegExp]":return w(t);case"[object Symbol]":return E?Object(E.call(t)):{}}};var O=t.i(971527),D=t.i(494878),A=t.i(215529),M=t.i(924904),L=t.i(568648),P=t.i(175995),k=P.default&&P.default.isMap,F=k?(0,L.default)(k):function(t){return(0,M.default)(t)&&"[object Map]"==(0,b.default)(t)},U=t.i(791947),z=P.default&&P.default.isSet,T=z?(0,L.default)(z):function(t){return(0,M.default)(t)&&"[object Set]"==(0,b.default)(t)},G="[object Arguments]",H="[object Function]",I="[object Object]",R={};R[G]=R["[object Array]"]=R["[object ArrayBuffer]"]=R["[object DataView]"]=R["[object Boolean]"]=R["[object Date]"]=R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Map]"]=R["[object Number]"]=R[I]=R["[object RegExp]"]=R["[object Set]"]=R["[object String]"]=R["[object Symbol]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R["[object Error]"]=R[H]=R["[object WeakMap]"]=!1,t.s(["default",0,function t(l,u,h,p,y,C){var x,m=1&u,w=2&u,j=4&u;if(h&&(x=y?h(l,p,y,C):h(l)),void 0!==x)return x;if(!(0,U.default)(l))return l;var B=(0,D.default)(l);if(B){if(x=v(l),!m)return(0,d.default)(l,x)}else{var E,S,M,L,P=(0,b.default)(l),k=P==H||"[object GeneratorFunction]"==P;if((0,A.default)(l))return(0,o.default)(l,m);if(P==I||P==G||k&&!y){if(x=w||k?{}:(0,O.default)(l),!m)return w?(S=(E=x)&&(0,r.default)(l,(0,s.default)(l),E),(0,r.default)(l,f(l),S)):(L=(M=x)&&(0,r.default)(l,(0,n.default)(l),M),(0,r.default)(l,(0,g.default)(l),L))}else{if(!R[P])return y?l:{};x=N(l,P,m)}}C||(C=new e.default);var z=C.get(l);if(z)return z;C.set(l,x),T(l)?l.forEach(function(e){x.add(t(e,u,h,e,l,C))}):F(l)&&l.forEach(function(e,i){x.set(i,t(e,u,h,i,l,C))});var $=j?w?_:c.default:w?s.default:n.default,V=B?void 0:$(l);return(0,i.default)(V||l,function(e,i){V&&(e=l[i=e]),(0,a.default)(x,i,t(e,u,h,i,l,C))}),x}],849218)},172898,t=>{"use strict";var e,i=t.i(635884);t.i(165715),t.i(795036),t.i(856192),t.i(849566),t.i(498274),t.i(64856),t.i(804893),t.i(737652),t.i(362988);var a=t.i(948827),r=t.i(206655),n=t.i(418274);t.i(991577);var s=t.i(692423);t.i(641667);var o=t.i(969519);t.i(949051);var d=t.i(295751),g=t.i(358424),l=t.i(352195),u=(0,n.__name)(t=>t.append("circle").attr("class","start-state").attr("r",(0,r.getConfig2)().state.sizeUnit).attr("cx",(0,r.getConfig2)().state.padding+(0,r.getConfig2)().state.sizeUnit).attr("cy",(0,r.getConfig2)().state.padding+(0,r.getConfig2)().state.sizeUnit),"drawStartState"),h=(0,n.__name)(t=>t.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",(0,r.getConfig2)().state.textHeight).attr("class","divider").attr("x2",2*(0,r.getConfig2)().state.textHeight).attr("y1",0).attr("y2",0),"drawDivider"),f=(0,n.__name)((t,e)=>{let i=t.append("text").attr("x",2*(0,r.getConfig2)().state.padding).attr("y",(0,r.getConfig2)().state.textHeight+2*(0,r.getConfig2)().state.padding).attr("font-size",(0,r.getConfig2)().state.fontSize).attr("class","state-title").text(e.id),a=i.node().getBBox();return t.insert("rect",":first-child").attr("x",(0,r.getConfig2)().state.padding).attr("y",(0,r.getConfig2)().state.padding).attr("width",a.width+2*(0,r.getConfig2)().state.padding).attr("height",a.height+2*(0,r.getConfig2)().state.padding).attr("rx",(0,r.getConfig2)().state.radius),i},"drawSimpleState"),c=(0,n.__name)((t,e)=>{let i=(0,n.__name)(function(t,e,i){let a=t.append("tspan").attr("x",2*(0,r.getConfig2)().state.padding).text(e);i||a.attr("dy",(0,r.getConfig2)().state.textHeight)},"addTspan"),a=t.append("text").attr("x",2*(0,r.getConfig2)().state.padding).attr("y",(0,r.getConfig2)().state.textHeight+1.3*(0,r.getConfig2)().state.padding).attr("font-size",(0,r.getConfig2)().state.fontSize).attr("class","state-title").text(e.descriptions[0]).node().getBBox(),s=a.height,o=t.append("text").attr("x",(0,r.getConfig2)().state.padding).attr("y",s+.4*(0,r.getConfig2)().state.padding+(0,r.getConfig2)().state.dividerMargin+(0,r.getConfig2)().state.textHeight).attr("class","state-description"),d=!0,g=!0;e.descriptions.forEach(function(t){d||(i(o,t,g),g=!1),d=!1});let l=t.append("line").attr("x1",(0,r.getConfig2)().state.padding).attr("y1",(0,r.getConfig2)().state.padding+s+(0,r.getConfig2)().state.dividerMargin/2).attr("y2",(0,r.getConfig2)().state.padding+s+(0,r.getConfig2)().state.dividerMargin/2).attr("class","descr-divider"),u=o.node().getBBox(),h=Math.max(u.width,a.width);return l.attr("x2",h+3*(0,r.getConfig2)().state.padding),t.insert("rect",":first-child").attr("x",(0,r.getConfig2)().state.padding).attr("y",(0,r.getConfig2)().state.padding).attr("width",h+2*(0,r.getConfig2)().state.padding).attr("height",u.height+s+2*(0,r.getConfig2)().state.padding).attr("rx",(0,r.getConfig2)().state.radius),t},"drawDescrState"),p=(0,n.__name)((t,e,i)=>{let a,n=(0,r.getConfig2)().state.padding,s=2*(0,r.getConfig2)().state.padding,o=t.node().getBBox(),d=o.width,g=o.x,l=t.append("text").attr("x",0).attr("y",(0,r.getConfig2)().state.titleShift).attr("font-size",(0,r.getConfig2)().state.fontSize).attr("class","state-title").text(e.id),u=l.node().getBBox().width+s,h=Math.max(u,d);h===d&&(h+=s);let f=t.node().getBBox();e.doc,a=g-n,u>d&&(a=(d-h)/2+n),Math.abs(g-f.x)<n&&u>d&&(a=g-(u-d)/2);let c=1-(0,r.getConfig2)().state.textHeight;return t.insert("rect",":first-child").attr("x",a).attr("y",c).attr("class",i?"alt-composit":"composit").attr("width",h).attr("height",f.height+(0,r.getConfig2)().state.textHeight+(0,r.getConfig2)().state.titleShift+1).attr("rx","0"),l.attr("x",a+n),u<=d&&l.attr("x",g+(h-s)/2-u/2+n),t.insert("rect",":first-child").attr("x",a).attr("y",(0,r.getConfig2)().state.titleShift-(0,r.getConfig2)().state.textHeight-(0,r.getConfig2)().state.padding).attr("width",h).attr("height",3*(0,r.getConfig2)().state.textHeight).attr("rx",(0,r.getConfig2)().state.radius),t.insert("rect",":first-child").attr("x",a).attr("y",(0,r.getConfig2)().state.titleShift-(0,r.getConfig2)().state.textHeight-(0,r.getConfig2)().state.padding).attr("width",h).attr("height",f.height+3+2*(0,r.getConfig2)().state.textHeight).attr("rx",(0,r.getConfig2)().state.radius),t},"addTitleAndBox"),_=(0,n.__name)(t=>(t.append("circle").attr("class","end-state-outer").attr("r",(0,r.getConfig2)().state.sizeUnit+(0,r.getConfig2)().state.miniPadding).attr("cx",(0,r.getConfig2)().state.padding+(0,r.getConfig2)().state.sizeUnit+(0,r.getConfig2)().state.miniPadding).attr("cy",(0,r.getConfig2)().state.padding+(0,r.getConfig2)().state.sizeUnit+(0,r.getConfig2)().state.miniPadding),t.append("circle").attr("class","end-state-inner").attr("r",(0,r.getConfig2)().state.sizeUnit).attr("cx",(0,r.getConfig2)().state.padding+(0,r.getConfig2)().state.sizeUnit+2).attr("cy",(0,r.getConfig2)().state.padding+(0,r.getConfig2)().state.sizeUnit+2)),"drawEndState"),b=(0,n.__name)((t,e)=>{let i=(0,r.getConfig2)().state.forkWidth,a=(0,r.getConfig2)().state.forkHeight;if(e.parentId){let t=i;i=a,a=t}return t.append("rect").style("stroke","black").style("fill","black").attr("width",i).attr("height",a).attr("x",(0,r.getConfig2)().state.padding).attr("y",(0,r.getConfig2)().state.padding)},"drawForkJoinState"),y=(0,n.__name)((t,e,i,a)=>{let n=0,s=a.append("text");s.style("text-anchor","start"),s.attr("class","noteText");let o=t.replace(/\r\n/g,"<br/>"),d=(o=o.replace(/\n/g,"<br/>")).split(r.common_default.lineBreakRegex),g=1.25*(0,r.getConfig2)().state.noteMargin;for(let t of d){let a=t.trim();if(a.length>0){let t=s.append("tspan");t.text(a),0===g&&(g+=t.node().getBBox().height),n+=g,t.attr("x",e+(0,r.getConfig2)().state.noteMargin),t.attr("y",i+n+1.25*(0,r.getConfig2)().state.noteMargin)}}return{textWidth:s.node().getBBox().width,textHeight:n}},"_drawLongText"),v=(0,n.__name)((t,e)=>{e.attr("class","state-note");let i=e.append("rect").attr("x",0).attr("y",(0,r.getConfig2)().state.padding),{textWidth:a,textHeight:n}=y(t,0,0,e.append("g"));return i.attr("height",n+2*(0,r.getConfig2)().state.noteMargin),i.attr("width",a+2*(0,r.getConfig2)().state.noteMargin),i},"drawNote"),C=(0,n.__name)(function(t,e){let i=e.id,a={id:i,label:e.id,width:0,height:0},n=t.append("g").attr("id",i).attr("class","stateGroup");"start"===e.type&&u(n),"end"===e.type&&_(n),("fork"===e.type||"join"===e.type)&&b(n,e),"note"===e.type&&v(e.note.text,n),"divider"===e.type&&h(n),"default"===e.type&&0===e.descriptions.length&&f(n,e),"default"===e.type&&e.descriptions.length>0&&c(n,e);let s=n.node().getBBox();return a.width=s.width+2*(0,r.getConfig2)().state.padding,a.height=s.height+2*(0,r.getConfig2)().state.padding,a},"drawState"),x=0,m=(0,n.__name)(function(t,e,s){let o=(0,n.__name)(function(t){switch(t){case i.StateDB.relationType.AGGREGATION:return"aggregation";case i.StateDB.relationType.EXTENSION:return"extension";case i.StateDB.relationType.COMPOSITION:return"composition";case i.StateDB.relationType.DEPENDENCY:return"dependency"}},"getRelationType");e.points=e.points.filter(t=>!Number.isNaN(t.y));let d=e.points,u=(0,g.line)().x(function(t){return t.x}).y(function(t){return t.y}).curve(l.curveBasis),h=t.append("path").attr("d",u(d)).attr("id","edge"+x).attr("class","transition"),f="";if((0,r.getConfig2)().state.arrowMarkerAbsolute&&(f=(0,r.getUrl)(!0)),h.attr("marker-end","url("+f+"#"+o(i.StateDB.relationType.DEPENDENCY)+"End)"),void 0!==s.title){let i=t.append("g").attr("class","stateLabel"),{x:o,y:d}=a.utils_default.calcLabelPosition(e.points),g=r.common_default.getRows(s.title),l=0,u=[],h=0,f=0;for(let t=0;t<=g.length;t++){let e=i.append("text").attr("text-anchor","middle").text(g[t]).attr("x",o).attr("y",d+l),a=e.node().getBBox();h=Math.max(h,a.width),f=Math.min(f,a.x),n.log.info(a.x,o,d+l),0===l&&(l=e.node().getBBox().height,n.log.info("Title height",l,d)),u.push(e)}let c=l*g.length;if(g.length>1){let t=(g.length-1)*l*.5;u.forEach((e,i)=>e.attr("y",d+i*l-t)),c=l*g.length}let p=i.node().getBBox();i.insert("rect",":first-child").attr("class","box").attr("x",o-h/2-(0,r.getConfig2)().state.padding/2).attr("y",d-c/2-(0,r.getConfig2)().state.padding/2-3.5).attr("width",h+(0,r.getConfig2)().state.padding).attr("height",c+(0,r.getConfig2)().state.padding),n.log.info(p)}x++},"drawEdge"),w={},j=(0,n.__name)(function(){},"setConf"),B=(0,n.__name)(function(t){t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"insertMarkers"),E=(0,n.__name)(function(t,i,a,o){let d;e=(0,r.getConfig2)().state;let g=(0,r.getConfig2)().securityLevel;"sandbox"===g&&(d=(0,s.select)("#i"+i));let l="sandbox"===g?(0,s.select)(d.nodes()[0].contentDocument.body):(0,s.select)("body"),u="sandbox"===g?d.nodes()[0].contentDocument:document;n.log.debug("Rendering diagram "+t);let h=l.select(`[id='${i}']`);B(h),N(o.db.getRootDoc(),h,void 0,!1,l,u,o);let f=e.padding,c=h.node().getBBox(),p=c.width+2*f,_=c.height+2*f;(0,r.configureSvgSize)(h,_,1.75*p,e.useMaxWidth),h.attr("viewBox",`${c.x-e.padding}  ${c.y-e.padding} `+p+" "+_)},"draw"),S=(0,n.__name)(t=>t?t.length*e.fontSizeFactor:1,"getLabelWidth"),N=(0,n.__name)((t,i,a,s,g,l,u)=>{let h,f=new d.Graph({compound:!0,multigraph:!0}),c=!0;for(h=0;h<t.length;h++)if("relation"===t[h].stmt){c=!1;break}a?f.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:c?1:e.edgeLengthFactor,nodeSep:c?1:50,isMultiGraph:!0}):f.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:c?1:e.edgeLengthFactor,nodeSep:c?1:50,ranker:"tight-tree",isMultiGraph:!0}),f.setDefaultEdgeLabel(function(){return{}});let _=u.db.getStates(),b=u.db.getRelations();for(let t of Object.keys(_)){let r,n=_[t];if(a&&(n.parentId=a),n.doc){let t=i.append("g").attr("id",n.id).attr("class","stateGroup");r=N(n.doc,t,n.id,!s,g,l,u);{let i=(t=p(t,n,s)).node().getBBox();r.width=i.width,r.height=i.height+e.padding/2,w[n.id]={y:e.compositTitleSize}}}else r=C(i,n,f);if(n.note){let t=C(i,{descriptions:[],id:n.id+"-note",note:n.note,type:"note"},f);"left of"===n.note.position?(f.setNode(r.id+"-note",t),f.setNode(r.id,r)):(f.setNode(r.id,r),f.setNode(r.id+"-note",t)),f.setParent(r.id,r.id+"-group"),f.setParent(r.id+"-note",r.id+"-group")}else f.setNode(r.id,r)}n.log.debug("Count=",f.nodeCount(),f);let y=0;b.forEach(function(t){y++,n.log.debug("Setting edge",t),f.setEdge(t.id1,t.id2,{relation:t,width:S(t.title),height:e.labelHeight*r.common_default.getRows(t.title).length,labelpos:"c"},"id"+y)}),(0,o.layout)(f),n.log.debug("Graph after layout",f.nodes());let v=i.node();f.nodes().forEach(function(t){void 0!==t&&void 0!==f.node(t)?(n.log.warn("Node "+t+": "+JSON.stringify(f.node(t))),g.select("#"+v.id+" #"+t).attr("transform","translate("+(f.node(t).x-f.node(t).width/2)+","+(f.node(t).y+(w[t]?w[t].y:0)-f.node(t).height/2)+" )"),g.select("#"+v.id+" #"+t).attr("data-x-shift",f.node(t).x-f.node(t).width/2),l.querySelectorAll("#"+v.id+" #"+t+" .divider").forEach(t=>{let e=t.parentElement,i=0,a=0;e&&(e.parentElement&&(i=e.parentElement.getBBox().width),Number.isNaN(a=parseInt(e.getAttribute("data-x-shift"),10))&&(a=0)),t.setAttribute("x1",0-a+8),t.setAttribute("x2",i-a-8)})):n.log.debug("No Node "+t+": "+JSON.stringify(f.node(t)))});let x=v.getBBox();f.edges().forEach(function(t){void 0!==t&&void 0!==f.edge(t)&&(n.log.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(f.edge(t))),m(i,f.edge(t),f.edge(t).relation))});let j={id:a||"root",label:a||"root",width:0,height:0};return j.width=(x=v.getBBox()).width+2*e.padding,j.height=x.height+2*e.padding,n.log.debug("Doc rendered",j,f),j},"renderDoc"),O={parser:i.stateDiagram_default,get db(){return new i.StateDB(1)},renderer:{setConf:j,draw:E},styles:i.styles_default,init:(0,n.__name)(t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute},"init")};t.s(["diagram",()=>O])}]);