(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,261484,e=>{"use strict";var t=e.i(268255),r={SVG:"image/svg+xml",ICO:"image/x-icon",GIF:"image/gif",PNG:"image/png"};let a=function(e){(0,t.useEffect)(function(){if(e){var t=e.split("."),a=t[t.length-1].toLocaleUpperCase(),o=document.querySelector("link[rel*='icon']")||document.createElement("link");o.type=r[a],o.href=e,o.rel="shortcut icon",document.getElementsByTagName("head")[0].appendChild(o)}},[e])};var o=e.i(685888),s=e.i(354440),n={restoreOnUnmount:!1};let i=function(e,r){void 0===r&&(r=n);var a=(0,t.useRef)(s.default?document.title:"");(0,t.useEffect)(function(){document.title=e},[e]),(0,o.default)(function(){r.restoreOnUnmount&&(document.title=a.current)})};var l=e.i(494268),d=e.i(168014);function c(e){let r=(0,l.useIsSystemFeaturesPending)(),o=(0,l.useGlobalPublicStore)(e=>e.systemFeatures),s=e?`${e} - `:"",n="",c="";!1===r&&(o.branding.enabled?(n=`${s}${o.branding.application_title}`,c=o.branding.favicon):(n=`${s}Dify`,c=`${d.basePath}/favicon.ico`)),i(n),(0,t.useEffect)(()=>{let e=null;return o.branding.favicon&&(document.querySelectorAll("link[rel='icon'], link[rel='shortcut icon'], link[rel='apple-touch-icon'], link[rel='mask-icon']").forEach(e=>e.parentNode?.removeChild(e)),(e=document.createElement("link")).rel="apple-touch-icon",e.href=o.branding.favicon,document.head.appendChild(e)),()=>{e?.remove()}},[o.branding.favicon]),a(c)}e.s(["default",()=>c],261484)},141696,e=>{"use strict";var t=e.i(367916),r=e.i(935914);e.i(105845);var a=e.i(390622);let o=async(e,a,o)=>(0,t.get)(`${(0,r.getFlowPrefix)(e)}/${a}/workflows/draft/variables`,{params:{page:o,limit:100}}),s=async(e,t)=>{let{items:r,total:a}=await o(e,t,1);if(a<=100)return r;let s=Math.ceil(a/100),n=[];for(let r=2;r<=s;r++)n.push(o(e,t,r));return(await Promise.all(n)).forEach(e=>{let{items:t}=e;r.push(...t)}),r},n=async(e,a,o)=>{let{items:s}=await (0,t.get)(`${(0,r.getFlowPrefix)(e)}/${a}/workflows/draft/nodes/${o}/variables`);return s};e.s(["fetchAllInspectVars",0,s,"fetchCurrentValueOfConversationVariable",0,e=>{let{url:r,params:a}=e;return(0,t.get)(r,{params:a})},"fetchNodeDefault",0,function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,t.get)(`apps/${e}/workflows/default-workflow-block-configs/${r}`,{params:{q:JSON.stringify(a)}})},"fetchNodeInspectVars",0,n,"fetchNodesDefaultConfigs",0,e=>(0,t.get)(e),"fetchPipelineNodeDefault",0,function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,t.get)(`rag/pipelines/${e}/workflows/default-workflow-block-configs/${r}`,{params:{q:JSON.stringify(a)}})},"fetchPublishedWorkflow",0,e=>(0,t.get)(e),"fetchWorkflowDraft",0,e=>(0,t.get)(e,{},{silent:!0}),"getIterationSingleNodeRunUrl",0,(e,t,a,o)=>`${(0,r.getFlowPrefix)(e)}/${a}/${t?"advanced-chat/":""}workflows/draft/iteration/nodes/${o}/run`,"getLoopSingleNodeRunUrl",0,(e,t,a,o)=>`${(0,r.getFlowPrefix)(e)}/${a}/${t?"advanced-chat/":""}workflows/draft/loop/nodes/${o}/run`,"singleNodeRun",0,(e,a,o,s)=>(0,t.post)(`${(0,r.getFlowPrefix)(e)}/${a}/workflows/draft/nodes/${o}/run`,{body:s}),"stopWorkflowRun",0,e=>(0,t.post)(e),"syncWorkflowDraft",0,e=>{let{url:r,params:o}=e,s=(e=>{let{graph:t}=e;if(!t?.nodes?.length)return e;let r=t.nodes.map(e=>{let t=(e=>{let t=e.data;if(!t||t.type!==a.BlockEnum.TriggerPlugin)return e;let r={type:a.BlockEnum.TriggerPlugin,title:t.title??"",desc:t.desc??"",plugin_id:t.plugin_id??"",provider_id:t.provider_id??"",event_name:t.event_name??"",subscription_id:t.subscription_id??"",plugin_unique_identifier:t.plugin_unique_identifier??"",event_parameters:"object"==typeof t.event_parameters&&null!==t.event_parameters?t.event_parameters:{}};return{...e,data:r}})(e);if(t.data?.type===a.BlockEnum.Start&&Array.isArray(t.data.variables)){let e={...t,data:{...t.data}};return e.data.variables=t.data.variables.map(e=>{if(e&&"json_object"===e.type&&"string"==typeof e.json_schema)try{let t=JSON.parse(e.json_schema);return{...e,json_schema:t}}catch{}return e}),e}return t});return{...e,graph:{...t,nodes:r}}})(o);return(0,t.post)(r,{body:s},{silent:!0})}],141696)},219278,e=>{"use strict";function t(e,t,r){let a=[],o=new Set(t.map(r));for(let t=0;t<e.length;t++){let s=e[t],n=r(s);o.has(n)&&(a.push(s),o.delete(n))}return a}e.s(["intersectionBy",()=>t])},948493,e=>{"use strict";function t(e){return e[e.length-1]}e.s(["last",()=>t])},966739,e=>{"use strict";var t=e.i(219278),r=e.i(948493),a=e.i(449448),o=e.i(783527),s=e.i(957200),n=e.i(255916);function i(e){for(var i=arguments.length,l=Array(i>1?i-1:0),d=1;d<i;d++)l[d-1]=arguments[d];if(!(0,n.isArrayLikeObject)(e))return[];let c=(0,r.last)(l);if(void 0===c)return Array.from(e);let u=(0,a.uniq)(Array.from(e)),m=(0,n.isArrayLikeObject)(c)?l.length:l.length-1;for(let e=0;e<m;++e){let r=l[e];if(!(0,n.isArrayLikeObject)(r))return[];(0,n.isArrayLikeObject)(c)?u=(0,t.intersectionBy)(u,Array.from(r),o.identity):"function"==typeof c?u=(0,t.intersectionBy)(u,Array.from(r),e=>c(e)):"string"==typeof c&&(u=(0,t.intersectionBy)(u,Array.from(r),(0,s.property)(c)))}return u}e.s(["intersectionBy",()=>i])},29267,13432,665456,e=>{"use strict";var t=e.i(948493),r=e.i(553682);function a(e){if((0,r.isArrayLike)(e))return(0,t.last)(Array.isArray(e)?e:Array.from(e))}e.s(["last",()=>a],13432);var o=e.i(255916);function s(e){let t=[];for(let r=0;r<e.length;r++){let a=e[r];if((0,o.isArrayLikeObject)(a))for(let e=0;e<a.length;e++)t.push(a[e])}return t}e.s(["flattenArrayLike",()=>s],665456);var n=e.i(388103);function i(e){let t;for(var r,i,l,d=arguments.length,c=Array(d>1?d-1:0),u=1;u<d;u++)c[u-1]=arguments[u];if(!(0,o.isArrayLikeObject)(e))return[];let m=a(c),p=s(c);if((0,o.isArrayLikeObject)(m)){let t;return r=Array.from(e),t=new Set(p),r.filter(e=>!t.has(e))}return i=Array.from(e),l=(0,n.iteratee)(m),t=new Set(p.map(e=>l(e))),i.filter(e=>!t.has(l(e)))}e.s(["differenceBy",()=>i],29267)},88961,762767,e=>{"use strict";var t=e.i(449448),r=e.i(29267),a=e.i(966739),o=e.i(13432),s=e.i(948493),n=e.i(10060),i=e.i(665456),l=e.i(255916),d=e.i(388103);function c(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];let o=(0,s.last)(r),c=(0,i.flattenArrayLike)(r);return(0,l.isArrayLikeObject)(o)||null==o?(0,t.uniq)(c):(0,n.uniqBy)(c,(0,d.iteratee)(o))}e.s(["unionBy",()=>c],762767);var u=e.i(783527),m=e.i(925521),p=e.i(621379),h=e.i(648404);let x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];null===e&&(e=[]);let r=!0,a=!0,o=!0,s=!0,n=!0,i=!0,l=!0,d=!0,c=!1;return e.length||(r=!1,a=!1,o=!1,s=!1,n=!1,i=!1,l=!1,d=!1),e.forEach(e=>{"economy"===e.indexing_technique&&(r=!1,a=!1,o=!1),"high_quality"===e.indexing_technique&&(s=!1,e.retrieval_model_dict.search_method!==h.RETRIEVE_METHOD.semantic&&(a=!1),e.retrieval_model_dict.search_method!==h.RETRIEVE_METHOD.fullText&&(o=!1)),"external"!==e.provider?i=!1:(l=!1,r=!1,a=!1,o=!1,n=!1)}),(i||l)&&(d=!1),(r||s)&&(n=!1),r&&(c=(0,t.uniq)(e.map(e=>e.embedding_model)).length>1),{allHighQuality:r,allHighQualityVectorSearch:a,allHighQualityFullTextSearch:o,allEconomic:s,mixtureHighQualityAndEconomic:n,allInternal:l,allExternal:i,mixtureInternalAndExternal:d,inconsistentEmbeddingModel:c}};e.s(["checkoutRerankModelConfiguredInRetrievalSettings",0,(e,t)=>{if(!t)return!0;let{allEconomic:r,allExternal:a,allInternal:o}=x(e),{reranking_enable:s,reranking_mode:n,reranking_model:i}=t;return n!==p.RerankingModeEnum.RerankingModel||!!i?.provider&&!!i?.model||(r&&o||a)&&!s},"getMultipleRetrievalConfig",0,(e,t,s,n)=>{let i=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];let n=(0,o.last)(t),i=u.identity;(0,l.isArrayLikeObject)(n)||null==n||(i=(0,d.iteratee)(n),t=t.slice(0,-1));let m=t.filter(l.isArrayLikeObject),p=c(...m,i),h=(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{partialWindows:a=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t<=0||!Number.isInteger(t))throw Error("Size must be a positive integer.");if(r<=0||!Number.isInteger(r))throw Error("Step must be a positive integer.");let o=[],s=a?e.length:e.length-t+1;for(let a=0;a<s;a+=r)o.push(e.slice(a,a+t));return o})(m,2).map(e=>{let[t,r]=e;return(0,a.intersectionBy)(t,r,i)});return(0,r.differenceBy)(p,c(...h,i),i)}(t,s,"id").length>0,h=!!(n?.provider&&n?.model),{allHighQuality:g,allHighQualityVectorSearch:f,allHighQualityFullTextSearch:b,allEconomic:y,mixtureHighQualityAndEconomic:v,allInternal:w,allExternal:k,mixtureInternalAndExternal:j,inconsistentEmbeddingModel:N}=x(t),{top_k:C=m.DATASET_DEFAULT.top_k,score_threshold:T,reranking_mode:E,reranking_model:_,weights:S,reranking_enable:I}=e||{top_k:m.DATASET_DEFAULT.top_k},A={top_k:C,score_threshold:T,reranking_mode:E,reranking_model:_,weights:S,reranking_enable:I},L=()=>{A.weights={weight_type:p.WeightedScoreEnum.Customized,vector_setting:{vector_weight:f?p.DEFAULT_WEIGHTED_SCORE.allHighQualityVectorSearch.semantic:b?p.DEFAULT_WEIGHTED_SCORE.allHighQualityFullTextSearch.semantic:p.DEFAULT_WEIGHTED_SCORE.other.semantic,embedding_provider_name:t[0].embedding_model_provider,embedding_model_name:t[0].embedding_model},keyword_setting:{keyword_weight:f?p.DEFAULT_WEIGHTED_SCORE.allHighQualityVectorSearch.keyword:b?p.DEFAULT_WEIGHTED_SCORE.allHighQualityFullTextSearch.keyword:p.DEFAULT_WEIGHTED_SCORE.other.keyword}}};return(y&&w||k)&&(A.reranking_mode=p.RerankingModeEnum.RerankingModel,A.reranking_model?.provider&&A.reranking_model?.model||!h||(A.reranking_model={provider:n.provider||"",model:n.model||""}),A.reranking_enable=I),(v||N||j)&&(A.reranking_mode=p.RerankingModeEnum.RerankingModel,A.reranking_model?.provider&&A.reranking_model?.model||!h||(A.reranking_model={provider:n.provider||"",model:n.model||""}),A.reranking_enable=!0),g&&!N&&w&&(E||(h?(A.reranking_mode=p.RerankingModeEnum.RerankingModel,A.reranking_enable=!0,A.reranking_model={provider:n.provider||"",model:n.model||""}):(A.reranking_mode=p.RerankingModeEnum.WeightedScore,A.reranking_enable=!1,L())),E===p.RerankingModeEnum.WeightedScore&&(A.reranking_enable=!1,S||L()),E===p.RerankingModeEnum.RerankingModel&&(A.reranking_model?.provider&&A.reranking_model?.model||!h||(A.reranking_model={provider:n.provider||"",model:n.model||""}),A.reranking_enable=!0),E===p.RerankingModeEnum.WeightedScore&&S&&i&&(A.reranking_model?.provider&&A.reranking_model?.model||h?(A.reranking_mode=p.RerankingModeEnum.RerankingModel,A.reranking_enable=!0,A.reranking_model?.provider&&A.reranking_model?.model||!h||(A.reranking_model={provider:n.provider||"",model:n.model||""})):L()),E!==p.RerankingModeEnum.RerankingModel||A.reranking_model?.provider&&A.reranking_model?.model||h||!i||(A.reranking_mode=p.RerankingModeEnum.WeightedScore,A.reranking_enable=!1,L())),A},"getSelectedDatasetsMode",0,x],88961)},142410,e=>{"use strict";var t=e.i(268255);e.s(["useAsyncWindowOpen",0,()=>(0,t.useCallback)(async(e,t)=>{let{immediateUrl:r,target:a="_blank",features:o,onError:s}=t??{},n=o?`${o},noopener,noreferrer`:"noopener,noreferrer";if(r){let e=window.open(r,a,n);if(!e)return void s?.(Error("Failed to open new window"));try{e.opener=null}catch{}return}let i=window.open("about:blank",a,o);if(!i)return void s?.(Error("Failed to open new window"));try{i.opener=null}catch{}try{let t=await e();if(t){i.location.href=t;return}i.close(),s?.(Error("No url resolved for new window"))}catch(e){i.close(),s?.(e instanceof Error?e:Error(String(e)))}},[])])},199947,e=>{"use strict";var t=e.i(339548),r=e.i(167362);class a{chatColorTheme;chatColorThemeInverted;primaryColor="#1C64F2";backgroundHeaderColorStyle="backgroundImage: linear-gradient(to right, #2563eb, #0ea5e9)";headerBorderBottomStyle="";colorFontOnHeaderStyle="color: white";colorPathOnHeader="text-text-primary-on-surface";backgroundButtonDefaultColorStyle="backgroundColor: #1C64F2";roundedBackgroundColorStyle="backgroundColor: rgb(245 248 255)";chatBubbleColorStyle="";constructor(e=null,t=!1){this.chatColorTheme=e,this.chatColorThemeInverted=t,this.configCustomColor(),this.configInvertedColor()}configCustomColor(){null!==this.chatColorTheme&&""!==this.chatColorTheme&&(this.primaryColor=this.chatColorTheme??"#1C64F2",this.backgroundHeaderColorStyle=`backgroundColor: ${this.primaryColor}`,this.backgroundButtonDefaultColorStyle=`backgroundColor: ${this.primaryColor}; color: ${this.colorFontOnHeaderStyle};`,this.roundedBackgroundColorStyle=`backgroundColor: ${(0,r.hexToRGBA)(this.primaryColor,.05)}`,this.chatBubbleColorStyle=`backgroundColor: ${(0,r.hexToRGBA)(this.primaryColor,.15)}`)}configInvertedColor(){this.chatColorThemeInverted&&(this.backgroundHeaderColorStyle="backgroundColor: #ffffff",this.colorFontOnHeaderStyle=`color: ${this.primaryColor}`,this.headerBorderBottomStyle="borderBottom: 1px solid #ccc",this.colorPathOnHeader=this.primaryColor)}}let o=(0,t.createContext)(new class{_theme;buildChecker=!1;get theme(){return void 0===this._theme&&(this._theme=new a),this._theme}buildTheme(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.buildChecker?(this.theme?.chatColorTheme!==e||this.theme?.chatColorThemeInverted!==t)&&(this._theme=new a(e,t),this.buildChecker=!0):(this._theme=new a(e,t),this.buildChecker=!0)}});e.s(["useThemeContext",0,()=>(0,t.useContext)(o)])},927897,e=>{"use strict";var t=e.i(236063),r=e.i(875037),a=e.i(562572),o=e.i(214309),s=e.i(494268),n=e.i(367916),i=e.i(447301);let l="access-control";e.s(["useAppWhiteListSubjects",0,(e,t)=>(0,a.useQuery)({queryKey:[l,"app-whitelist-subjects",e],queryFn:()=>(0,n.get)(`/enterprise/webapp/app/subjects?appId=${e}`),enabled:!!e&&t,staleTime:0,gcTime:0}),"useGetUserCanAccessApp",0,e=>{let{appId:t,isInstalledApp:r=!0,enabled:o}=e,n=(0,s.useGlobalPublicStore)(e=>e.systemFeatures);return(0,a.useQuery)({queryKey:[l,"user-can-access-app",t,n.webapp_auth.enabled,r],queryFn:()=>n.webapp_auth.enabled?(0,i.getUserCanAccess)(t,r):{result:!0},enabled:void 0!==o?o:!!t,staleTime:0,gcTime:0})},"useSearchForWhiteListCandidates",0,(e,r)=>(0,t.useInfiniteQuery)({queryKey:[l,"app-whitelist-candidates",e],queryFn:t=>{let{pageParam:r}=t,a=new URLSearchParams;return Object.keys(e).forEach(t=>{e[t]&&a.append(t,`${e[t]}`)}),a.append("pageNumber",`${r}`),(0,n.get)(`/enterprise/webapp/app/subject/search?${new URLSearchParams(a).toString()}`)},initialPageParam:1,getNextPageParam:e=>{if(e.hasMore)return e.currPage+1},gcTime:0,staleTime:0,enabled:r}),"useUpdateAccessMode",0,()=>{let e=(0,o.useQueryClient)();return(0,r.useMutation)({mutationKey:[l,"update-access-mode"],mutationFn:e=>(0,n.post)("/enterprise/webapp/app/access-mode",{body:e}),onSuccess:()=>{e.invalidateQueries({queryKey:[l,"app-whitelist-subjects"]})}})}])},216425,e=>{"use strict";var t=e.i(268255);e.i(152567);var r=e.i(408767);e.s(["useKnowledge",0,()=>{let{t:e}=(0,r.useTranslation)(),a=(0,t.useCallback)(t=>e(`indexingTechnique.${t}`,{ns:"dataset"}),[e]),o=(0,t.useCallback)((t,r)=>r?e("indexingMethod.invertedIndex",{ns:"dataset"}):e(`indexingMethod.${t}`,{ns:"dataset"}),[e]),s=(0,t.useCallback)((e,t)=>{let r=a(e);return t&&(r+=` \xb7 ${o(t,"economy"===e)}`),r},[a,o]);return{formatIndexingTechnique:a,formatIndexingMethod:o,formatIndexingTechniqueAndMethod:s}}])},841054,e=>{"use strict";var t=e.i(268255),r=e.i(773923),a=e.i(703440);e.s(["default",0,function(e){a.default&&!(0,r.isFunction)(e)&&console.error('useMount: parameter `fn` expected to be a function, but got "'.concat(typeof e,'".')),(0,t.useEffect)(function(){var t=null==e?void 0:e();if(!t||"object"!=typeof t||"function"!=typeof t.then)return t},[])}])},167574,e=>{"use strict";var t=e.i(585458),r=e.i(287200);t.default.extend(r.default),e.s(["formatTime",0,e=>{let{date:r,dateFormat:a}=e;return(0,t.default)(r).format(a)},"getDaysUntilEndOfMonth",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,t.default)(),r=(0,t.default)(e).startOf("day");return Math.max((0,t.default)(e).endOf("month").startOf("day").diff(r,"day"),0)},"isAfter",0,(e,r)=>(0,t.default)(e).isAfter((0,t.default)(r))])},198269,e=>{"use strict";var t=e.i(563199),r=e.i(268255),a=e.i(324935),o=e.i(421001),s=e.i(935139);let n=r.memo(e=>{let{className:r="",isChecked:n,onChange:i,label:l,labelClassName:d,tooltip:c,testId:u}=e;return(0,t.jsxs)("label",{className:(0,s.cn)(r,"flex h-7 items-center space-x-2"),children:[(0,t.jsx)(a.default,{checked:n,onCheck:()=>i(!n),id:u}),(0,t.jsx)("div",{className:(0,s.cn)("text-sm font-normal text-text-secondary",d),children:l}),c&&(0,t.jsx)(o.default,{popupContent:(0,t.jsx)("div",{className:"w-[200px]",children:c}),triggerClassName:"ml-0.5 w-4 h-4"})]})});e.s(["default",0,n])},661509,e=>{"use strict";var t=e.i(563199),r=e.i(837699),a=e.i(268255);e.i(152567);var o=e.i(408767),s=e.i(654313),n=e.i(151094),i=e.i(521632),l=e.i(449980),d=e.i(988720),c=e.i(633957),u=e.i(580932),m=e.i(519436),p=e.i(312343);e.i(302047);var h=e.i(674245),x=e.i(325011),g=e.i(665127),f=e.i(946700),b=e.i(885327),y=e.i(683257),v=e.i(491234),w=e.i(344600),k=e.i(935139);let j=a.memo(e=>{let j,{showBackButton:N=!1,collection:C,isBuiltIn:T=!0,isModel:E=!0,toolName:_,setting:S={},readonly:I,onHide:A,onSave:L,credentialId:R,onAuthorizationItemClick:O}=e,M=(0,y.useLocale)(),P=(0,v.getLanguage)(M),{t:B}=(0,o.useTranslation)(),F=C.tools,z=F?.length>0,[D,$]=(0,a.useState)(!z),[H,U]=(0,a.useState)(z?F:[]),q=H.find(e=>e.name===_),V=q?(0,b.toolParametersToFormSchemas)(q.parameters):[],G=V.filter(e=>"llm"===e.form),W=V.filter(e=>"llm"!==e.form),K=W.length>0,[Q,Z]=(0,a.useState)(S),[Y,X]=(0,a.useState)("info"),J="info"===Y;(0,a.useEffect)(()=>{C&&!z&&(async()=>{$(!0);try{let e=await new Promise(e=>{!async function(){E?e(await (0,w.fetchModelToolList)(C.name)):T?e(await (0,w.fetchBuiltInToolList)(C.name)):C.type===f.CollectionType.workflow?e(await (0,w.fetchWorkflowToolList)(C.id)):e(await (0,w.fetchCustomToolList)(C.name))}()});U(e)}catch{}$(!1)})()},[C?.name,C?.id,C?.type]),(0,a.useEffect)(()=>{X(!I&&K?"setting":"info")},[K]);let ee=(j=!0,W.forEach(e=>{e.required&&!Q[e.name]&&(j=!1)}),j),et=(0,t.jsx)("div",{className:"",children:G.length>0&&(0,t.jsx)("div",{className:"space-y-1 py-2",children:G.map((e,r)=>{var a;return(0,t.jsxs)("div",{className:"py-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"code-sm-semibold text-text-secondary",children:e.label[P]}),(0,t.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:"number-input"===(a=e.type)?B("setBuiltInTools.number",{ns:"tools"}):"text-input"===a?B("setBuiltInTools.string",{ns:"tools"}):"checkbox"===a?"boolean":"file"===a?B("setBuiltInTools.file",{ns:"tools"}):a}),e.required&&(0,t.jsx)("div",{className:"system-xs-medium text-text-warning-secondary",children:B("setBuiltInTools.required",{ns:"tools"})})]}),e.human_description&&(0,t.jsx)("div",{className:"system-xs-regular mt-0.5 text-text-tertiary",children:e.human_description?.[P]})]},r)})})}),er=(0,t.jsx)(c.default,{value:Q,onChange:Z,formSchemas:W,isEditMode:!1,showOnVariableMap:{},validating:!1,readonly:I});return(0,t.jsx)(i.default,{isOpen:!0,clickOutsideNotOpen:!1,onClose:A,footer:null,mask:!1,positionCenter:!1,panelClassName:(0,k.cn)("mb-2 mr-2 mt-[64px] !w-[420px] !max-w-[420px] justify-start rounded-2xl border-[0.5px] border-components-panel-border !bg-components-panel-bg !p-0 shadow-xl"),children:(0,t.jsxs)(t.Fragment,{children:[D&&(0,t.jsx)(l.default,{type:"app"}),!D&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"relative border-b border-divider-subtle p-4 pb-3",children:[(0,t.jsx)("div",{className:"absolute right-3 top-3",children:(0,t.jsx)(s.default,{onClick:A,children:(0,t.jsx)(r.RiCloseLine,{className:"h-4 w-4"})})}),N&&(0,t.jsxs)("div",{className:"system-xs-semibold-uppercase mb-2 flex cursor-pointer items-center gap-1 text-text-accent-secondary",onClick:A,children:[(0,t.jsx)(r.RiArrowLeftLine,{className:"h-4 w-4"}),B("detailPanel.operation.back",{ns:"plugin"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(u.default,{size:"tiny",className:"h-6 w-6",src:C.icon}),(0,t.jsx)(p.default,{packageNameClassName:"w-auto",orgName:C.author,packageName:C.name.split("/").pop()||""})]}),(0,t.jsx)("div",{className:"system-md-semibold mt-1 text-text-primary",children:q?.label[P]}),!!q?.description[P]&&(0,t.jsx)(m.default,{className:"mb-2 mt-3 h-auto",text:q.description[P],descriptionLineRows:2}),C.allow_delete&&C.type===f.CollectionType.builtIn&&(0,t.jsx)(x.PluginAuthInAgent,{pluginPayload:{provider:C.name,category:h.AuthCategory.tool,providerType:C.type,detail:C},credentialId:R,onAuthorizationItemClick:O})]}),(0,t.jsx)("div",{className:"h-full",children:(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[K&&!I?(0,t.jsx)(d.default,{className:"mt-1 shrink-0 px-4",itemClassName:"py-3",noBorderBottom:!0,value:Y,onChange:e=>{X(e)},options:[{value:"info",text:B("setBuiltInTools.parameters",{ns:"tools"})},{value:"setting",text:B("setBuiltInTools.setting",{ns:"tools"})}]}):(0,t.jsx)("div",{className:"system-sm-semibold-uppercase p-4 pb-1 text-text-primary",children:B("setBuiltInTools.parameters",{ns:"tools"})}),(0,t.jsxs)("div",{className:"h-0 grow overflow-y-auto px-4",children:[J?et:er,!I&&!J&&(0,t.jsxs)("div",{className:"flex shrink-0 justify-end space-x-2 rounded-b-[10px] bg-components-panel-bg py-2",children:[(0,t.jsx)(n.default,{className:"flex h-8 items-center !px-3 !text-[13px] font-medium ",onClick:A,children:B("operation.cancel",{ns:"common"})}),(0,t.jsx)(n.default,{className:"flex h-8 items-center !px-3 !text-[13px] font-medium",variant:"primary",disabled:!ee,onClick:()=>L?.(Q),children:B("operation.save",{ns:"common"})})]})]}),(0,t.jsx)(g.ReadmeEntrance,{pluginDetail:C,className:"mt-auto"})]})})]})]})})});e.s(["default",0,j])},458266,e=>{"use strict";e.i(733437),e.s([])},16453,e=>{e.v({item:"style-module__2BvUtq__item"})},823660,781276,e=>{"use strict";var t=e.i(563199),r=e.i(268255);e.i(152567);var a=e.i(408767),o=e.i(151094),s=e.i(16453);let n=r.memo(e=>{let{name:r,className:a=""}=e;return(0,t.jsxs)("div",{className:`${s.default.item} ${a} mb-2 inline-flex h-5 items-center justify-center rounded-md px-1 text-xs font-medium text-primary-600`,children:[(0,t.jsx)("span",{className:"opacity-60",children:"{{"}),(0,t.jsx)("span",{children:r}),(0,t.jsx)("span",{className:"opacity-60",children:"}}"})]},r)});e.s(["default",0,n],781276);let i=(0,t.jsxs)("svg",{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M13.8683 0.704745C13.7051 0.374685 13.3053 0.239393 12.9752 0.402563C12.6452 0.565732 12.5099 0.965573 12.673 1.29563C13.5221 3.01316 13.9999 4.94957 13.9999 7.00019C13.9999 9.05081 13.5221 10.9872 12.673 12.7047C12.5099 13.0348 12.6452 13.4346 12.9752 13.5978C13.3053 13.761 13.7051 13.6257 13.8683 13.2956C14.8063 11.3983 15.3333 9.26009 15.3333 7.00019C15.3333 4.74029 14.8063 2.60209 13.8683 0.704745Z",fill:"#FD853A"}),(0,t.jsx)("path",{d:"M3.32687 1.29563C3.49004 0.965573 3.35475 0.565732 3.02469 0.402563C2.69463 0.239393 2.29479 0.374685 2.13162 0.704745C1.19364 2.60209 0.666626 4.74029 0.666626 7.00019C0.666626 9.26009 1.19364 11.3983 2.13162 13.2956C2.29479 13.6257 2.69463 13.761 3.02469 13.5978C3.35475 13.4346 3.49004 13.0348 3.32687 12.7047C2.47779 10.9872 1.99996 9.05081 1.99996 7.00019C1.99996 4.94957 2.47779 3.01316 3.32687 1.29563Z",fill:"#FD853A"}),(0,t.jsx)("path",{d:"M9.33238 4.8413C9.74208 4.36081 10.3411 4.08337 10.9726 4.08337H11.0324C11.4006 4.08337 11.6991 4.38185 11.6991 4.75004C11.6991 5.11823 11.4006 5.41671 11.0324 5.41671H10.9726C10.7329 5.41671 10.5042 5.52196 10.347 5.7064L8.78693 7.536L9.28085 9.27382C9.29145 9.31112 9.32388 9.33337 9.35696 9.33337H10.2864C10.6545 9.33337 10.953 9.63185 10.953 10C10.953 10.3682 10.6545 10.6667 10.2864 10.6667H9.35696C8.72382 10.6667 8.17074 10.245 7.99832 9.63834L7.74732 8.75524L6.76373 9.90878C6.35403 10.3893 5.75501 10.6667 5.1235 10.6667H5.06372C4.69553 10.6667 4.39705 10.3682 4.39705 10C4.39705 9.63185 4.69553 9.33337 5.06372 9.33337H5.1235C5.3632 9.33337 5.59189 9.22812 5.74915 9.04368L7.30926 7.21399L6.81536 5.47626C6.80476 5.43897 6.77233 5.41671 6.73925 5.41671H5.80986C5.44167 5.41671 5.14319 5.11823 5.14319 4.75004C5.14319 4.38185 5.44167 4.08337 5.80986 4.08337H6.73925C7.37239 4.08337 7.92547 4.50508 8.0979 5.11174L8.34887 5.99475L9.33238 4.8413Z",fill:"#FD853A"})]}),l=r.memo(e=>{let{varNameArr:s,onConfirm:l,onCancel:d}=e,{t:c}=(0,a.useTranslation)(),u=(0,r.useRef)(null);return(0,t.jsx)("div",{className:"absolute inset-0  flex items-center justify-center rounded-xl",style:{backgroundColor:"rgba(35, 56, 118, 0.2)"},children:(0,t.jsxs)("div",{ref:u,className:"w-[420px] rounded-xl bg-components-panel-bg p-6",style:{boxShadow:"0px 12px 16px -4px rgba(16, 24, 40, 0.08), 0px 4px 6px -2px rgba(16, 24, 40, 0.03)"},children:[(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl border border-components-card-border bg-components-card-bg-alt shadow-lg",children:i}),(0,t.jsxs)("div",{className:"grow-1",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-text-primary",children:c("autoAddVar",{ns:"appDebug"})}),(0,t.jsx)("div",{className:"mt-[15px] flex max-h-[66px] flex-wrap space-x-1 overflow-y-auto px-1",children:s.map(e=>(0,t.jsx)(n,{name:e},e))})]})]}),(0,t.jsxs)("div",{className:"mt-7 flex justify-end space-x-2",children:[(0,t.jsx)(o.default,{onClick:d,children:c("operation.cancel",{ns:"common"})}),(0,t.jsx)(o.default,{variant:"primary",onClick:l,children:c("operation.add",{ns:"common"})})]})]})})});e.s(["default",0,l],823660)},445924,e=>{"use strict";var t,r=e.i(563199),a=e.i(268255),o=e.i(389358),s=e.i(192447),n=e.i(876057),i=e.i(234766),l=e.i(959752),d=e.i(490525),c=e.i(786191),u=e.i(4520),m=e.i(534042),p=e.i(794611),h=e.i(322034),x=e.i(935139),g=e.i(174383),f=e.i(381086),b=e.i(390622);e.i(905691);var y=e.i(735900);let v=(0,a.memo)(e=>{let{id:t,data:o,sourceHandleId:n,sourceX:i,sourceY:l,targetX:d,targetY:c,selected:u}=e,[m]=(0,s.getBezierPath)({sourceX:i-8,sourceY:l,sourcePosition:s.Position.Right,targetX:d+8,targetY:c,targetPosition:s.Position.Left,curvature:.16}),{_sourceRunningStatus:p,_targetRunningStatus:h}=o,x=(0,a.useMemo)(()=>{if((p===b.NodeRunningStatus.Succeeded||p===b.NodeRunningStatus.Failed||p===b.NodeRunningStatus.Exception)&&(h===b.NodeRunningStatus.Succeeded||h===b.NodeRunningStatus.Failed||h===b.NodeRunningStatus.Exception||h===b.NodeRunningStatus.Running))return t},[p,h,t]),v=(0,a.useMemo)(()=>u?(0,y.getEdgeColor)(b.NodeRunningStatus.Running):x?`url(#${x})`:o?._connectedNodeIsHovering?(0,y.getEdgeColor)(b.NodeRunningStatus.Running,n===f.ErrorHandleTypeEnum.failBranch):(0,y.getEdgeColor)(),[o._connectedNodeIsHovering,x,u,n]);return(0,r.jsxs)(r.Fragment,{children:[x&&(0,r.jsx)(g.default,{id:x,startColor:(0,y.getEdgeColor)(p),stopColor:(0,y.getEdgeColor)(h),position:{x1:i,y1:l,x2:d,y2:c}}),(0,r.jsx)(s.BaseEdge,{id:t,path:m,style:{stroke:v,strokeWidth:2,opacity:o._waitingRun?.7:1}})]})});e.i(152567);var w=e.i(408767),k=e.i(421001),j=e.i(120219),N=e.i(911684);let C=(0,a.memo)(e=>{let{data:t,handleId:a,handleClassName:o}=e,n=t._connectedTargetHandleIds?.includes(a);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.Handle,{id:a,type:"target",position:s.Position.Left,className:(0,x.cn)("z-[1] !h-4 !w-4 !rounded-none !border-none !bg-transparent !outline-none","after:absolute after:left-1.5 after:top-1 after:h-2 after:w-0.5 after:bg-workflow-link-line-handle","transition-all hover:scale-125",!n&&"after:opacity-0",(t.type===b.BlockEnum.Start||t.type===b.BlockEnum.TriggerWebhook||t.type===b.BlockEnum.TriggerSchedule||t.type===b.BlockEnum.TriggerPlugin)&&"opacity-0",o)})})});C.displayName="NodeTargetHandle";let T=(0,a.memo)(e=>{let{data:t,handleId:a,handleClassName:o}=e,n=t._connectedSourceHandleIds?.includes(a);return(0,r.jsx)(s.Handle,{id:a,type:"source",position:s.Position.Right,className:(0,x.cn)("group/handle z-[1] !h-4 !w-4 !rounded-none !border-none !bg-transparent !outline-none","after:absolute after:right-1.5 after:top-1 after:h-2 after:w-0.5 after:bg-workflow-link-line-handle","transition-all hover:scale-125",!n&&"after:opacity-0",o)})});T.displayName="NodeSourceHandle";let E=e=>{let{id:t,data:o}=e,{t:n}=(0,w.useTranslation)(),{error_strategy:i}=o,l=(0,s.useUpdateNodeInternals)();return((0,a.useEffect)(()=>{i===f.ErrorHandleTypeEnum.failBranch&&l(t)},[i,t,l]),i)?(0,r.jsx)("div",{className:"relative px-3 pb-2 pt-1",children:(0,r.jsxs)("div",{className:(0,x.cn)("relative flex h-6 items-center justify-between rounded-md bg-workflow-block-parma-bg px-[5px]",o._runningStatus===b.NodeRunningStatus.Exception&&"border-[0.5px] border-components-badge-status-light-warning-halo bg-state-warning-hover"),children:[(0,r.jsx)("div",{className:"system-xs-medium-uppercase text-text-tertiary",children:n("common.onFailure",{ns:"workflow"})}),(0,r.jsxs)("div",{className:(0,x.cn)("system-xs-medium text-text-secondary",o._runningStatus===b.NodeRunningStatus.Exception&&"text-text-warning"),children:[i===f.ErrorHandleTypeEnum.defaultValue&&n("nodes.common.errorHandle.defaultValue.output",{ns:"workflow"}),i===f.ErrorHandleTypeEnum.failBranch&&n("nodes.common.errorHandle.failBranch.title",{ns:"workflow"})]}),i===f.ErrorHandleTypeEnum.failBranch&&(0,r.jsx)(T,{id:t,data:o,handleId:f.ErrorHandleTypeEnum.failBranch,handleClassName:"!top-1/2 !-right-[21px] !-translate-y-1/2 after:!bg-workflow-link-line-failure-button-bg"})]})}):null},_=(0,a.memo)(e=>{let{id:t,data:o,children:s}=e,{t:n}=(0,w.useTranslation)();return(0,r.jsx)("div",{className:(0,x.cn)("flex rounded-2xl border-[2px] border-transparent"),style:{width:o.type===b.BlockEnum.Iteration||o.type===b.BlockEnum.Loop?o.width:"auto",height:o.type===b.BlockEnum.Iteration||o.type===b.BlockEnum.Loop?o.height:"auto"},children:(0,r.jsxs)("div",{className:(0,x.cn)("group relative pb-1 shadow-xs","rounded-[15px] border border-transparent","bg-workflow-block-bg hover:shadow-lg"),style:{width:o.type===b.BlockEnum.Iteration||o.type===b.BlockEnum.Loop?o.width:"240px",height:o.type===b.BlockEnum.Iteration||o.type===b.BlockEnum.Loop?o.height:"auto"},children:[(0,r.jsxs)("div",{className:(0,x.cn)("flex items-center rounded-t-2xl px-3 pb-2 pt-3"),children:[(0,r.jsx)(C,{id:t,data:o,handleClassName:"!top-4 !-left-[9px] !translate-y-0",handleId:"target"}),o.type!==b.BlockEnum.IfElse&&o.type!==b.BlockEnum.QuestionClassifier&&(0,r.jsx)(T,{id:t,data:o,handleClassName:"!top-4 !-right-[9px] !translate-y-0",handleId:"source"}),(0,r.jsx)(j.default,{className:"mr-2 shrink-0",type:o.type,size:"md"}),(0,r.jsxs)("div",{title:o.title,className:"system-sm-semibold-uppercase mr-1 flex grow items-center truncate text-text-primary",children:[(0,r.jsx)("div",{children:o.title}),o.type===b.BlockEnum.Iteration&&o.is_parallel&&(0,r.jsx)(k.default,{popupContent:(0,r.jsxs)("div",{className:"w-[180px]",children:[(0,r.jsx)("div",{className:"font-extrabold",children:n("nodes.iteration.parallelModeEnableTitle",{ns:"workflow"})}),n("nodes.iteration.parallelModeEnableDesc",{ns:"workflow"})]}),children:(0,r.jsx)("div",{className:"system-2xs-medium-uppercase ml-1 flex items-center justify-center rounded-[5px] border-[1px] border-text-warning px-[5px] py-[3px] text-text-warning ",children:n("nodes.iteration.parallelModeUpper",{ns:"workflow"})})})]})]}),o.type!==b.BlockEnum.Iteration&&o.type!==b.BlockEnum.Loop&&s&&(0,a.cloneElement)(s,{id:t,data:o}),(o.type===b.BlockEnum.Iteration||o.type===b.BlockEnum.Loop)&&s&&(0,r.jsx)("div",{className:"h-[calc(100%-42px)] w-full grow pb-1 pl-1 pr-1",children:(0,a.cloneElement)(s,{id:t,data:o})}),(0,N.hasErrorHandleNode)(o.type)&&(0,r.jsx)(E,{id:t,data:o}),o.desc&&o.type!==b.BlockEnum.Iteration&&o.type!==b.BlockEnum.Loop&&(0,r.jsx)("div",{className:"system-xs-regular whitespace-pre-line break-words px-3 pb-2 pt-1 text-text-tertiary",children:o.desc})]})})});var S=e.i(555503),I=e.i(166211),A=e.i(146106);let L="nodes.ifElse",R=a.memo(e=>{let{data:t}=e,{t:o}=(0,w.useTranslation)(),{cases:s}=t,n=s.length,i=(0,a.useCallback)(e=>!!e.variable_selector&&0!==e.variable_selector.length&&(e.sub_variable_condition?e.sub_variable_condition.conditions.every(e=>!!e.comparison_operator&&(!!(0,A.isEmptyRelatedOperator)(e.comparison_operator)||!!e.value)):!!(0,A.isEmptyRelatedOperator)(e.comparison_operator)||!!e.value),[]),l=(0,r.jsx)("div",{className:"flex h-6 items-center space-x-1 rounded-md bg-workflow-block-parma-bg px-1 text-xs font-normal text-text-secondary",children:o(`${L}.conditionNotSetup`,{ns:"workflow"})});return(0,r.jsxs)("div",{className:"px-3",children:[s.map((t,a)=>(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"relative flex h-6 items-center px-1",children:[(0,r.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,r.jsx)("div",{className:"text-[10px] font-semibold text-text-tertiary",children:n>1&&`CASE ${a+1}`}),(0,r.jsx)("div",{className:"text-[12px] font-semibold text-text-secondary",children:0===a?"IF":"ELIF"})]}),(0,r.jsx)(T,{...e,handleId:t.case_id,handleClassName:"!top-1/2 !-right-[21px] !-translate-y-1/2"})]}),(0,r.jsx)("div",{className:"space-y-0.5",children:t.conditions.map((e,a)=>(0,r.jsxs)("div",{className:"relative",children:[i(e)?!(0,A.isEmptyRelatedOperator)(e.comparison_operator)&&e.sub_variable_condition?(0,r.jsx)(S.default,{condition:e}):(0,r.jsx)(I.default,{variableSelector:e.variable_selector,operator:e.comparison_operator,value:e.value}):l,a!==t.conditions.length-1&&(0,r.jsx)("div",{className:"absolute bottom-[-10px] right-1 z-10 text-[10px] font-medium uppercase leading-4 text-text-accent",children:o(`${L}.${t.logical_operator}`,{ns:"workflow"})})]},e.id))})]},t.case_id)),(0,r.jsxs)("div",{className:"relative flex h-6 items-center px-1",children:[(0,r.jsx)("div",{className:"w-full text-right text-xs font-semibold text-text-secondary",children:"ELSE"}),(0,r.jsx)(T,{...e,handleId:"false",handleClassName:"!top-1/2 !-right-[21px] !-translate-y-1/2"})]})]})}),O=(0,a.memo)(e=>{let{id:t}=e,{zoom:a}=(0,s.useViewport)();return(0,r.jsx)("div",{className:(0,x.cn)("relative h-full min-h-[90px] w-full min-w-[240px] rounded-2xl bg-workflow-canvas-workflow-bg"),children:(0,r.jsx)(n.Background,{id:`iteration-background-${t}`,className:"!z-0 rounded-2xl",gap:[14/a,14/a],size:2/a,color:"var(--color-workflow-canvas-workflow-dot-color)"})})});var M=e.i(105845);let P=(0,a.memo)(e=>{let t,{id:o,data:i}=e,{zoom:d}=(0,s.useViewport)(),c=(0,s.useNodesInitialized)(),{handleNodeLoopRerender:u}=(t=(0,s.useStoreApi)(),{handleNodeLoopRerender:(0,a.useCallback)(e=>{let r,a,{getNodes:o,setNodes:s}=t.getState(),n=o(),i=n.find(t=>t.id===e);n.filter(t=>t.parentId===e).forEach(e=>{r?e.position.x+e.width>r.position.x+r.width&&(r=e):r=e,a?e.position.y+e.height>a.position.y+a.height&&(a=e):a=e});let d=r&&i.width<r.position.x+r.width,c=a&&i.height<a.position.y+a.height;(d||c)&&s((0,M.produce)(n,t=>{t.forEach(t=>{t.id===e&&(d&&(t.data.width=r.position.x+r.width+l.LOOP_PADDING.right,t.width=r.position.x+r.width+l.LOOP_PADDING.right),c&&(t.data.height=a.position.y+a.height+l.LOOP_PADDING.bottom,t.height=a.position.y+a.height+l.LOOP_PADDING.bottom))})}))},[t])});return(0,a.useEffect)(()=>{c&&u(o)},[c,o,u]),(0,r.jsx)("div",{className:(0,x.cn)("relative h-full min-h-[90px] w-full min-w-[240px] rounded-2xl bg-workflow-canvas-workflow-bg"),children:(0,r.jsx)(n.Background,{id:`loop-background-${o}`,className:"!z-0 rounded-2xl",gap:[14/d,14/d],size:2/d,color:"var(--color-workflow-canvas-workflow-dot-color)"})})});var B=e.i(617178);let F=a.memo(e=>{let{t}=(0,w.useTranslation)(),{data:a}=e,o=a.classes;return(0,r.jsx)("div",{className:"mb-1 px-3 py-1",children:!!o.length&&(0,r.jsx)("div",{className:"mt-2 space-y-0.5",children:o.map((a,o)=>(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(B.default,{title:`${t("nodes.questionClassifiers.class",{ns:"workflow"})} ${o+1}`,content:""}),(0,r.jsx)(T,{...e,handleId:a.id,handleClassName:"!top-1/2 !-translate-y-1/2 !-right-[21px]"})]},o))})})}),z={[b.BlockEnum.QuestionClassifier]:F,[b.BlockEnum.IfElse]:R,[b.BlockEnum.Iteration]:O,[b.BlockEnum.Loop]:P},D=e=>{let t=z[e.data.type];return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(_,{...e,children:t&&(0,r.jsx)(t,{})})})};var $=e.i(837699);let H=(0,a.memo)(e=>{let{id:t,data:a}=e,{t:o}=(0,w.useTranslation)();return(0,r.jsxs)("div",{className:"nodrag group mt-1 flex h-11 w-11 items-center justify-center rounded-2xl border border-workflow-block-border bg-workflow-block-bg shadow-xs",children:[(0,r.jsx)(k.default,{popupContent:o("blocks.iteration-start",{ns:"workflow"}),asChild:!1,children:(0,r.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border-[0.5px] border-components-panel-border-subtle bg-util-colors-blue-brand-blue-brand-500",children:(0,r.jsx)($.RiHome5Fill,{className:"h-3 w-3 text-text-primary-on-surface"})})}),(0,r.jsx)(T,{id:t,data:a,handleClassName:"!top-1/2 !-right-[9px] !-translate-y-1/2",handleId:"source"})]})}),U=(0,a.memo)(e=>{let{id:t,data:a}=e,{t:o}=(0,w.useTranslation)();return(0,r.jsxs)("div",{className:"nodrag group mt-1 flex h-11 w-11 items-center justify-center rounded-2xl border border-workflow-block-border bg-workflow-block-bg",children:[(0,r.jsx)(k.default,{popupContent:o("blocks.loop-start",{ns:"workflow"}),asChild:!1,children:(0,r.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border-[0.5px] border-components-panel-border-subtle bg-util-colors-blue-brand-blue-brand-500",children:(0,r.jsx)($.RiHome5Fill,{className:"h-3 w-3 text-text-primary-on-surface"})})}),(0,r.jsx)(T,{id:t,data:a,handleClassName:"!top-1/2 !-right-[9px] !-translate-y-1/2",handleId:"source"})]})});e.i(444462);var q=e.i(212838),V=e.i(378675);let G=(0,a.memo)(e=>{let{data:t}=e,{t:o}=(0,w.useTranslation)(),s=(0,a.useRef)(null),n=t.theme;return(0,r.jsx)("div",{className:(0,x.cn)("relative flex flex-col rounded-md border shadow-xs hover:shadow-md",m.THEME_MAP[n].bg,t.selected?m.THEME_MAP[n].border:"border-black/5"),style:{width:t.width,height:t.height},ref:s,children:(0,r.jsx)(V.NoteEditorContextProvider,{value:t.text,editable:!1,children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:(0,x.cn)("h-2 shrink-0 rounded-t-md opacity-50",m.THEME_MAP[n].title)}),(0,r.jsx)("div",{className:"grow overflow-y-auto px-3 py-2.5",children:(0,r.jsx)("div",{className:(0,x.cn)(t.selected&&"nodrag nopan nowheel cursor-text"),children:(0,r.jsx)(q.NoteEditor,{containerElement:s.current,placeholder:o("nodes.note.editor.placeholder",{ns:"workflow"})||""})})}),t.showAuthor&&(0,r.jsx)("div",{className:"p-3 pt-0 text-xs text-text-tertiary",children:t.author})]})})})});var W=e.i(757198),K=e.i(391185),Q=e.i(175179),Z=e.i(194902),Y=((t=Y||{}).zoomIn="zoomIn",t.zoomOut="zoomOut",t.zoomToFit="zoomToFit",t.zoomTo25="zoomTo25",t.zoomTo50="zoomTo50",t.zoomTo75="zoomTo75",t.zoomTo100="zoomTo100",t.zoomTo200="zoomTo200",t);let X=(0,a.memo)(()=>{let{t:e}=(0,w.useTranslation)(),{zoomIn:t,zoomOut:o,zoomTo:n,fitView:i}=(0,s.useReactFlow)(),{zoom:l}=(0,s.useViewport)(),[d,c]=(0,a.useState)(!1),u=[[{key:"zoomTo200",text:"200%"},{key:"zoomTo100",text:"100%"},{key:"zoomTo75",text:"75%"},{key:"zoomTo50",text:"50%"},{key:"zoomTo25",text:"25%"}],[{key:"zoomToFit",text:e("operator.zoomToFit",{ns:"workflow"})}]],m=(0,a.useCallback)(()=>{c(e=>!e)},[]);return(0,r.jsxs)(K.PortalToFollowElem,{placement:"top-start",open:d,onOpenChange:c,offset:{mainAxis:4,crossAxis:-2},children:[(0,r.jsx)(K.PortalToFollowElemTrigger,{asChild:!0,children:(0,r.jsx)("div",{className:(0,x.cn)("h-9 cursor-pointer rounded-lg border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg","p-0.5 text-[13px] shadow-lg backdrop-blur-[5px]","hover:bg-state-base-hover"),children:(0,r.jsxs)("div",{className:(0,x.cn)("flex h-8 w-[98px] items-center justify-between rounded-lg"),children:[(0,r.jsx)(Q.default,{title:e("operator.zoomOut",{ns:"workflow"}),shortcuts:["ctrl","-"],children:(0,r.jsx)("div",{className:`flex h-8 w-8 items-center justify-center rounded-lg ${l<=.25?"cursor-not-allowed":"cursor-pointer hover:bg-black/5"}`,onClick:e=>{l<=.25||(e.stopPropagation(),o())},children:(0,r.jsx)($.RiZoomOutLine,{className:"h-4 w-4 text-text-tertiary hover:text-text-secondary"})})}),(0,r.jsxs)("div",{onClick:m,className:(0,x.cn)("system-sm-medium w-[34px] text-text-tertiary hover:text-text-secondary"),children:[Number.parseFloat(`${100*l}`).toFixed(0),"%"]}),(0,r.jsx)(Q.default,{title:e("operator.zoomIn",{ns:"workflow"}),shortcuts:["ctrl","+"],children:(0,r.jsx)("div",{className:`flex h-8 w-8 items-center justify-center rounded-lg ${l>=2?"cursor-not-allowed":"cursor-pointer hover:bg-black/5"}`,onClick:e=>{l>=2||(e.stopPropagation(),t())},children:(0,r.jsx)($.RiZoomInLine,{className:"h-4 w-4 text-text-tertiary hover:text-text-secondary"})})})]})})}),(0,r.jsx)(K.PortalToFollowElemContent,{className:"z-10",children:(0,r.jsx)("div",{className:"w-[145px] rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg-blur shadow-lg backdrop-blur-[5px]",children:u.map((e,t)=>(0,r.jsxs)(a.Fragment,{children:[0!==t&&(0,r.jsx)(W.default,{className:"m-0"}),(0,r.jsx)("div",{className:"p-1",children:e.map(e=>(0,r.jsxs)("div",{className:"system-md-regular flex h-8 cursor-pointer items-center justify-between space-x-1 rounded-lg py-1.5 pl-3 pr-2 text-text-secondary hover:bg-state-base-hover",onClick:()=>{var t;"zoomToFit"===(t=e.key)&&i(),"zoomTo25"===t&&n(.25),"zoomTo50"===t&&n(.5),"zoomTo75"===t&&n(.75),"zoomTo100"===t&&n(1),"zoomTo200"===t&&n(2)},children:[(0,r.jsx)("span",{children:e.text}),(0,r.jsxs)("div",{className:"flex items-center space-x-0.5",children:["zoomToFit"===e.key&&(0,r.jsx)(Z.default,{keys:["ctrl","1"]}),"zoomTo50"===e.key&&(0,r.jsx)(Z.default,{keys:["shift","5"]}),"zoomTo100"===e.key&&(0,r.jsx)(Z.default,{keys:["shift","1"]})]})]},e.key))})]},t))})})]})}),J={[l.CUSTOM_NODE]:D,[m.CUSTOM_NOTE_NODE]:G,[p.CUSTOM_SIMPLE_NODE]:D,[c.CUSTOM_ITERATION_START_NODE]:H,[u.CUSTOM_LOOP_START_NODE]:U},ee={[l.CUSTOM_EDGE]:v},et=e=>{let{nodes:t,edges:c,viewport:u,className:m,miniMapToRight:p}=e,[g,f]=(0,a.useState)(()=>(0,h.initialNodes)(t,c)),[b,y]=(0,a.useState)(()=>(0,h.initialEdges)(c,t)),v=(0,a.useCallback)(e=>f(t=>(0,s.applyNodeChanges)(e,t)),[]),w=(0,a.useCallback)(e=>y(t=>(0,s.applyEdgeChanges)(e,t)),[]);return(0,r.jsxs)("div",{id:"workflow-container",className:(0,x.cn)("relative h-full w-full",m),children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.MiniMap,{pannable:!0,zoomable:!0,style:{width:102,height:72},maskColor:"var(--color-workflow-minimap-bg)",className:(0,x.cn)("!absolute !bottom-14 z-[9] !m-0 !h-[72px] !w-[102px] !rounded-lg !border-[0.5px] !border-divider-subtle !bg-background-default-subtle !shadow-md !shadow-shadow-shadow-5",p?"!right-4":"!left-4")}),(0,r.jsx)("div",{className:"absolute bottom-4 left-4 z-[9] mt-1 flex items-center gap-2",children:(0,r.jsx)(X,{})})]}),(0,r.jsx)(o.default,{nodeTypes:J,edgeTypes:ee,nodes:g,onNodesChange:v,edges:b,onEdgesChange:w,connectionLineComponent:d.default,connectionLineContainerStyle:{zIndex:l.ITERATION_CHILDREN_Z_INDEX},defaultViewport:u,multiSelectionKeyCode:null,deleteKeyCode:null,nodesDraggable:!0,nodesConnectable:!1,nodesFocusable:!1,edgesFocusable:!1,panOnScroll:!1,selectionKeyCode:null,selectionMode:s.SelectionMode.Partial,minZoom:.25,children:(0,r.jsx)(n.Background,{gap:[14,14],size:2,className:"bg-workflow-canvas-workflow-bg",color:"var(--color-workflow-canvas-workflow-dot-color)"})})]})};e.s(["default",0,e=>(0,r.jsx)(s.ReactFlowProvider,{children:(0,r.jsx)(et,{...e})})],445924)},23651,e=>{"use strict";var t=e.i(343050);e.s(["Tag01",()=>t.default])},207853,e=>{"use strict";var t=e.i(563199),r=e.i(935139);e.s(["default",0,e=>{let{className:a,value:o,onChange:s,options:n}=e;return(0,t.jsx)("div",{className:(0,r.cn)(a,"relative flex"),children:n.map(e=>(0,t.jsxs)("div",{onClick:()=>s(e.value),className:(0,r.cn)("mr-1 flex h-[32px] cursor-pointer items-center rounded-lg border-[0.5px] border-transparent px-3 py-[7px] text-[13px] font-medium leading-[18px] text-text-tertiary hover:bg-state-base-hover",o===e.value&&"border-components-main-nav-nav-button-border bg-state-base-hover text-components-main-nav-nav-button-text-active shadow-xs"),children:[e.icon,e.text]},e.value))})}])},246913,e=>{"use strict";var t=e.i(38532),r=e.i(881110),a=e.i(585458),o=e.i(73920),s=e.i(287200),n=e.i(326531),i=e.i(268255),l=e.i(59375),d=e.i(711536),c=e.i(296124),u=e.i(56971),m=e.i(218631),p=e.i(948124);a.default.extend(s.default),a.default.extend(o.default);let h=(e,t)=>{if(!e||!t)return!1;let r=(0,a.default)().tz(t).startOf("day"),o=a.default.unix(e).tz(t).startOf("day");return r.isSame(o)||r.isAfter(o)};e.s(["useEducation",0,()=>{let{mutateAsync:e,isPending:r,data:a}=(0,m.useEducationAutocomplete)(),[o,s]=(0,i.useState)([]),n=(0,i.useCallback)(t=>{t.keywords&&e(t).then(e=>{let r=t.page||0,a=e.data;r>0?s(e=>[...e||[],...a]):s(a)})},[e]),{run:l}=(0,t.useDebounceFn)(e=>{n(e)},{wait:300});return{schools:o,setSchools:s,querySchoolsWithDebounced:l,handleUpdateSchools:n,isLoading:r,hasNext:a?.has_next}},"useEducationInit",0,()=>{let e=(0,c.useModalContextSelector)(e=>e.setShowAccountSettingModal),t=(0,c.useModalContextSelector)(e=>e.setShowEducationExpireNoticeModal),a=localStorage.getItem(p.EDUCATION_VERIFYING_LOCALSTORAGE_ITEM),o=(0,n.useSearchParams)().get("action");(e=>{let{onNotice:t}=e,{userProfile:{timezone:a}}=(0,d.useAppContext)(),{educationAccountExpireAt:o,allowRefreshEducationVerify:s,isLoadingEducationAccountInfo:n}=(0,u.useProviderContext)(),[l,c]=(0,r.useLocalStorageState)("education-reverify-prev-expire-at",{defaultValue:0}),[m,p]=(0,r.useLocalStorageState)("education-reverify-has-noticed",{defaultValue:!1}),[x,g]=(0,r.useLocalStorageState)("education-expired-has-noticed",{defaultValue:!1});return(0,i.useEffect)(()=>{if(!n&&a&&s){let e=h(o,a),r=l!==o;r&&(c(o),p(!1),g(!1)),!r&&(e?x:m)||(t({expireAt:o,expired:e}),e?g(!0):p(!0))}},[s,a]),h(o,a)})({onNotice:e=>{t({payload:e})}});let s=(0,n.useRouter)(),{mutateAsync:x}=(0,m.useEducationVerify)(),g=async()=>{let{token:e}=await x();e&&s.push(`/education-apply?token=${e}`)};(0,i.useEffect)(()=>{("yes"===a||o===p.EDUCATION_VERIFY_URL_SEARCHPARAMS_ACTION)&&(e({payload:l.ACCOUNT_SETTING_TAB.BILLING}),o===p.EDUCATION_VERIFY_URL_SEARCHPARAMS_ACTION&&localStorage.setItem(p.EDUCATION_VERIFYING_LOCALSTORAGE_ITEM,"yes")),o===p.EDUCATION_RE_VERIFY_ACTION&&g()},[e,a,o])}])},364203,e=>{"use strict";let t=(0,e.i(639751).create)(e=>({tagList:[],setTagList:t=>e(()=>({tagList:t})),showTagManagementModal:!1,setShowTagManagementModal:t=>e(()=>({showTagManagementModal:t}))}));e.s(["useStore",0,t])},807801,e=>{"use strict";var t=e.i(367916);e.s(["bindTag",0,(e,r,a)=>(0,t.post)("/tag-bindings/create",{body:{tag_ids:e,target_id:r,type:a}}),"createTag",0,(e,r)=>(0,t.post)("/tags",{body:{name:e,type:r}}),"deleteTag",0,e=>(0,t.del)(`/tags/${e}`),"fetchTagList",0,e=>(0,t.get)("/tags",{params:{type:e}}),"unBindTag",0,(e,r,a)=>(0,t.post)("/tag-bindings/remove",{body:{tag_id:e,target_id:r,type:a}}),"updateTag",0,(e,r)=>(0,t.patch)(`/tags/${e}`,{body:{name:r}})])},922944,e=>{"use strict";var t=e.i(841054);e.s(["useMount",()=>t.default])},860053,747271,e=>{"use strict";var t=e.i(563199),r=e.i(837699),a=e.i(38532),o=e.i(922944),s=e.i(268255);e.i(152567);var n=e.i(408767);e.i(77445);var i=e.i(23651),l=e.i(360052);e.i(47690);var d=e.i(490774);e.i(288243);var c=e.i(744256),u=e.i(291631),m=e.i(391185),p=e.i(807801),h=e.i(935139),x=e.i(364203);e.s(["default",0,e=>{let{type:g,value:f,onChange:b}=e,{t:y}=(0,n.useTranslation)(),[v,w]=(0,s.useState)(!1),k=(0,x.useStore)(e=>e.tagList),j=(0,x.useStore)(e=>e.setTagList),N=(0,x.useStore)(e=>e.setShowTagManagementModal),[C,T]=(0,s.useState)(""),[E,_]=(0,s.useState)(""),{run:S}=(0,a.useDebounceFn)(()=>{_(C)},{wait:500}),I=e=>{T(e),S()},A=(0,s.useMemo)(()=>k.filter(e=>e.type===g&&e.name.includes(E)),[g,k,E]),L=(0,s.useMemo)(()=>k.find(e=>e.id===f[0]),[f,k]);return(0,o.useMount)(()=>{(0,p.fetchTagList)(g).then(e=>{j(e)})}),(0,t.jsx)(m.PortalToFollowElem,{open:v,onOpenChange:w,placement:"bottom-start",offset:4,children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(m.PortalToFollowElemTrigger,{onClick:()=>w(e=>!e),className:"block",children:(0,t.jsxs)("div",{className:(0,h.cn)("flex h-8 cursor-pointer select-none items-center gap-1 rounded-lg border-[0.5px] border-transparent bg-components-input-bg-normal px-2",!v&&!!f.length&&"shadow-xs",v&&!!f.length&&"shadow-xs"),children:[(0,t.jsx)("div",{className:"p-[1px]",children:(0,t.jsx)(i.Tag01,{className:"h-3.5 w-3.5 text-text-tertiary"})}),(0,t.jsxs)("div",{className:"text-[13px] leading-[18px] text-text-secondary",children:[!f.length&&y("tag.placeholder",{ns:"common"}),!!f.length&&L?.name]}),f.length>1&&(0,t.jsx)("div",{className:"text-xs font-medium leading-[18px] text-text-tertiary",children:`+${f.length-1}`}),!f.length&&(0,t.jsx)("div",{className:"p-[1px]",children:(0,t.jsx)(r.RiArrowDownSLine,{className:"h-3.5 w-3.5 text-text-tertiary"})}),!!f.length&&(0,t.jsx)("div",{className:"group/clear cursor-pointer p-[1px]",onClick:e=>{e.stopPropagation(),b([])},children:(0,t.jsx)(c.XCircle,{className:"h-3.5 w-3.5 text-text-tertiary group-hover/clear:text-text-secondary"})})]})}),(0,t.jsx)(m.PortalToFollowElemContent,{className:"z-[1002]",children:(0,t.jsxs)("div",{className:"relative w-[240px] rounded-lg border-[0.5px] border-components-panel-border bg-components-panel-bg-blur shadow-lg backdrop-blur-[5px]",children:[(0,t.jsx)("div",{className:"p-2",children:(0,t.jsx)(u.default,{showLeftIcon:!0,showClearIcon:!0,value:C,onChange:e=>I(e.target.value),onClear:()=>I("")})}),(0,t.jsxs)("div",{className:"max-h-72 overflow-auto p-1",children:[A.map(e=>(0,t.jsxs)("div",{className:"flex cursor-pointer select-none items-center gap-2 rounded-lg py-[6px] pl-3 pr-2 hover:bg-state-base-hover",onClick:()=>{f.includes(e.id)?b(f.filter(t=>t!==e.id)):b([...f,e.id])},children:[(0,t.jsx)("div",{title:e.name,className:"grow truncate text-sm leading-5 text-text-tertiary",children:e.name}),f.includes(e.id)&&(0,t.jsx)(d.Check,{className:"h-4 w-4 shrink-0 text-text-secondary"})]},e.id)),!A.length&&(0,t.jsxs)("div",{className:"flex flex-col items-center gap-1 p-3",children:[(0,t.jsx)(l.Tag03,{className:"h-6 w-6 text-text-tertiary"}),(0,t.jsx)("div",{className:"text-xs leading-[14px] text-text-tertiary",children:y("tag.noTag",{ns:"common"})})]})]}),(0,t.jsx)("div",{className:"border-t-[0.5px] border-divider-regular"}),(0,t.jsx)("div",{className:"p-1",children:(0,t.jsxs)("div",{className:"flex cursor-pointer select-none items-center gap-2 rounded-lg py-[6px] pl-3 pr-2 hover:bg-state-base-hover",onClick:()=>{N(!0),w(!1)},children:[(0,t.jsx)(l.Tag03,{className:"h-4 w-4 text-text-tertiary"}),(0,t.jsx)("div",{className:"grow truncate text-sm leading-5 text-text-secondary",children:y("tag.manageTags",{ns:"common"})})]})})]})})]})})}],860053);var g=e.i(964596),f=e.i(59848),b=e.i(124836),y=e.i(339548),v=e.i(324935),w=e.i(757198),k=e.i(137667);let j=s.memo(e=>{let{t:a}=(0,n.useTranslation)(),{notify:o}=(0,y.useContext)(k.ToastContext),{targetID:i,type:l,value:d,selectedTags:c,onCacheUpdate:m,onChange:h,onCreate:g}=e,j=(0,x.useStore)(e=>e.tagList),N=(0,x.useStore)(e=>e.setTagList),C=(0,x.useStore)(e=>e.setShowTagManagementModal),[T,E]=(0,s.useState)(d),[_,S]=(0,s.useState)(""),I=e=>{S(e)},A=(0,s.useMemo)(()=>j.every(e=>e.type===l&&e.name!==_),[l,j,_]),L=(0,s.useMemo)(()=>c.filter(e=>e.name.includes(_)),[_,c]),R=(0,s.useMemo)(()=>j.filter(e=>e.type===l&&!d.includes(e.id)&&e.name.includes(_)),[l,j,d,_]),[O,M]=(0,s.useState)(!1),P=async()=>{if(_&&!O)try{M(!0);let e=await (0,p.createTag)(_,l);o({type:"success",message:a("tag.created",{ns:"common"})}),N([...j,e]),S(""),M(!1),g()}catch{o({type:"error",message:a("tag.failed",{ns:"common"})}),M(!1)}},B=async e=>{try{await (0,p.bindTag)(e,i,l),o({type:"success",message:a("actionMsg.modifiedSuccessfully",{ns:"common"})})}catch{o({type:"error",message:a("actionMsg.modifiedUnsuccessfully",{ns:"common"})})}},F=async e=>{try{await (0,p.unBindTag)(e,i,l),o({type:"success",message:a("actionMsg.modifiedSuccessfully",{ns:"common"})})}catch{o({type:"error",message:a("actionMsg.modifiedUnsuccessfully",{ns:"common"})})}},z=e=>{T.includes(e.id)?E(T.filter(t=>t!==e.id)):E([...T,e.id])},D=(0,s.useMemo)(()=>d.length===T.length&&d.every(e=>T.includes(e))&&T.every(e=>d.includes(e)),[d,T]);return(0,f.useUnmount)(()=>{if(!D){let e,t,r;e=T.filter(e=>!d.includes(e)),t=d.filter(e=>!T.includes(e)),m(j.filter(e=>T.includes(e.id))),r=[],e.length&&r.push(B(e)),t.length&&r.push(...t.map(e=>F(e))),Promise.all(r).finally(()=>{h&&h()})}}),(0,t.jsxs)("div",{className:"relative w-full rounded-lg border-[0.5px] border-components-panel-border bg-components-panel-bg-blur",children:[(0,t.jsx)("div",{className:"p-2 pb-1",children:(0,t.jsx)(u.default,{showLeftIcon:!0,showClearIcon:!0,value:_,placeholder:a("tag.selectorPlaceholder",{ns:"common"})||"",onChange:e=>I(e.target.value),onClear:()=>I("")})}),_&&A&&(0,t.jsx)("div",{className:"p-1",children:(0,t.jsxs)("div",{className:"flex cursor-pointer items-center gap-x-1 rounded-lg px-2 py-1.5 hover:bg-state-base-hover",onClick:P,children:[(0,t.jsx)(r.RiAddLine,{className:"h-4 w-4 text-text-tertiary"}),(0,t.jsxs)("div",{className:"system-md-regular grow truncate px-1 text-text-secondary",children:[`${a("tag.create",{ns:"common"})} `,(0,t.jsx)("span",{className:"system-md-medium",children:`'${_}'`})]})]})}),_&&A&&R.length>0&&(0,t.jsx)(w.default,{type:"horizontal",className:"my-0 h-px bg-divider-subtle"}),(R.length>0||L.length>0)&&(0,t.jsxs)("div",{className:"max-h-[232px] overflow-y-auto p-1",children:[L.map(e=>(0,t.jsxs)("div",{className:"flex cursor-pointer items-center gap-x-1 rounded-lg px-2 py-1.5 hover:bg-state-base-hover",onClick:()=>z(e),children:[(0,t.jsx)(v.default,{className:"shrink-0",checked:T.includes(e.id),onCheck:b.noop}),(0,t.jsx)("div",{title:e.name,className:"system-md-regular grow truncate px-1 text-text-secondary",children:e.name})]},e.id)),R.map(e=>(0,t.jsxs)("div",{className:"flex cursor-pointer items-center gap-x-1 rounded-lg px-2 py-1.5 hover:bg-state-base-hover",onClick:()=>z(e),children:[(0,t.jsx)(v.default,{className:"shrink-0",checked:T.includes(e.id),onCheck:b.noop}),(0,t.jsx)("div",{title:e.name,className:"system-md-regular grow truncate px-1 text-text-secondary",children:e.name})]},e.id))]}),!_&&!R.length&&!L.length&&(0,t.jsx)("div",{className:"p-1",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-y-1 p-3",children:[(0,t.jsx)(r.RiPriceTag3Line,{className:"h-6 w-6 text-text-quaternary"}),(0,t.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:a("tag.noTag",{ns:"common"})})]})}),(0,t.jsx)(w.default,{type:"horizontal",className:"my-0 h-px bg-divider-subtle"}),(0,t.jsx)("div",{className:"p-1",children:(0,t.jsxs)("div",{className:"flex cursor-pointer items-center gap-x-1 rounded-lg px-2 py-1.5 hover:bg-state-base-hover",onClick:()=>C(!0),children:[(0,t.jsx)(r.RiPriceTag3Line,{className:"h-4 w-4 text-text-tertiary"}),(0,t.jsx)("div",{className:"system-md-regular grow truncate px-1 text-text-secondary",children:a("tag.manageTags",{ns:"common"})})]})})]})}),N=s.memo(e=>{let{tags:a}=e,{t:o}=(0,n.useTranslation)();return(0,t.jsx)("div",{className:"flex w-full cursor-pointer items-center gap-1 overflow-hidden rounded-lg p-1 hover:bg-state-base-hover",children:a.length?(0,t.jsx)(t.Fragment,{children:a.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center gap-x-0.5 rounded-[5px] border border-divider-deep bg-components-badge-bg-dimm px-[5px] py-[3px]",children:[(0,t.jsx)(r.RiPriceTag3Line,{className:"h-3 w-3 shrink-0 text-text-quaternary"}),(0,t.jsx)("div",{className:"system-2xs-medium-uppercase text-nowrap text-text-tertiary",children:e})]},a))}):(0,t.jsxs)("div",{className:"flex items-center gap-x-0.5 rounded-[5px] border border-dashed border-divider-deep bg-components-badge-bg-dimm px-[5px] py-[3px]",children:[(0,t.jsx)(r.RiPriceTag3Line,{className:"h-3 w-3 shrink-0 text-text-quaternary"}),(0,t.jsx)("div",{className:"system-2xs-medium-uppercase text-nowrap text-text-tertiary",children:o("tag.addTag",{ns:"common"})})]})})});e.s(["default",0,e=>{let{targetID:r,isPopover:a=!0,position:o,type:n,value:i,selectedTags:l,onCacheUpdate:d,onChange:c,minWidth:u}=e,m=(0,x.useStore)(e=>e.tagList),f=(0,x.useStore)(e=>e.setTagList),b=(0,s.useCallback)(async()=>{f(await (0,p.fetchTagList)(n))},[f,n]),y=(0,s.useMemo)(()=>l?.length?l.filter(e=>m.find(t=>t.id===e.id)).map(e=>e.name):[],[l,m]);return(0,t.jsx)(t.Fragment,{children:a&&(0,t.jsx)(g.default,{htmlContent:(0,t.jsx)(j,{type:n,targetID:r,value:i,selectedTags:l,onCacheUpdate:d,onChange:c,onCreate:b}),position:o,trigger:"click",btnElement:(0,t.jsx)(N,{tags:y}),btnClassName:e=>(0,h.cn)(e?"!bg-state-base-hover !text-text-secondary":"!bg-transparent","!w-full !border-0 !p-0 !text-text-tertiary hover:!bg-state-base-hover hover:!text-text-secondary"),popupClassName:(0,h.cn)("!w-full !ring-0",u&&"!min-w-80"),className:"!z-20 h-fit !w-full"})})}],747271)},201201,e=>{e.v(t=>Promise.all(["static/chunks/33d89f7067007c66.js","static/chunks/c798d4f27fd7256a.js","static/chunks/093735e21ea40753.css"].map(t=>e.l(t))).then(()=>t(661305)))},170830,e=>{e.v(e=>Promise.resolve().then(()=>e(81828)))},977869,e=>{e.v(t=>Promise.all(["static/chunks/dc0aa229d9b1b1f5.js"].map(t=>e.l(t))).then(()=>t(23120)))},274156,e=>{e.v(t=>Promise.all(["static/chunks/2bb789852e45ac8e.js"].map(t=>e.l(t))).then(()=>t(823278)))},778712,e=>{e.v(t=>Promise.all(["static/chunks/331802b287c0373e.js"].map(t=>e.l(t))).then(()=>t(339556)))},623391,e=>{e.v(t=>Promise.all(["static/chunks/25607ad0918230f9.js"].map(t=>e.l(t))).then(()=>t(920226)))},606117,e=>{e.v(t=>Promise.all(["static/chunks/a13b81c089323280.js"].map(t=>e.l(t))).then(()=>t(356881)))},675420,e=>{e.v(t=>Promise.all(["static/chunks/37685f16d64cedfb.js"].map(t=>e.l(t))).then(()=>t(351332)))},181127,e=>{e.v(t=>Promise.all(["static/chunks/b7513bb004cd89b8.js"].map(t=>e.l(t))).then(()=>t(239024)))},219345,e=>{e.v(t=>Promise.all(["static/chunks/fc3fb89fc2bca26a.js"].map(t=>e.l(t))).then(()=>t(457094)))},622467,e=>{e.v(t=>Promise.all(["static/chunks/d5feea30daaad843.js"].map(t=>e.l(t))).then(()=>t(512728)))},64459,e=>{e.v(t=>Promise.all(["static/chunks/bcce195691ebfc13.js"].map(t=>e.l(t))).then(()=>t(903565)))}]);