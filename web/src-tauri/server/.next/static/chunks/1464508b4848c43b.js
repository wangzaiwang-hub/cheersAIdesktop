(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,346563,e=>{"use strict";var t=e.i(978912);function r(e){if(!e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}var i=e.i(744277),n=e.i(91595),o=e.i(908421),s=e.i(482777),a=e.i(124836);function l(e,l){return function e(a,l,u,c,d,p,m){let f=m(a,l,u,c,d,p);if(void 0!==f)return f;if(typeof a==typeof l)switch(typeof a){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return a===l;case"number":return a===l||Object.is(a,l)}return function a(l,u,c,d){if(Object.is(l,u))return!0;let p=(0,n.getTag)(l),m=(0,n.getTag)(u);if(p===o.argumentsTag&&(p=o.objectTag),m===o.argumentsTag&&(m=o.objectTag),p!==m)return!1;switch(p){case o.stringTag:return l.toString()===u.toString();case o.numberTag:{let e=l.valueOf(),t=u.valueOf();return(0,s.eq)(e,t)}case o.booleanTag:case o.dateTag:case o.symbolTag:return Object.is(l.valueOf(),u.valueOf());case o.regexpTag:return l.source===u.source&&l.flags===u.flags;case o.functionTag:return l===u}let f=(c=c??new Map).get(l),h=c.get(u);if(null!=f&&null!=h)return f===u;c.set(l,u),c.set(u,l);try{switch(p){case o.mapTag:if(l.size!==u.size)return!1;for(let[t,r]of l.entries())if(!u.has(t)||!e(r,u.get(t),t,l,u,c,d))return!1;return!0;case o.setTag:{if(l.size!==u.size)return!1;let t=Array.from(l.values()),r=Array.from(u.values());for(let i=0;i<t.length;i++){let n=t[i],o=r.findIndex(t=>e(n,t,void 0,l,u,c,d));if(-1===o)return!1;r.splice(o,1)}return!0}case o.arrayTag:case o.uint8ArrayTag:case o.uint8ClampedArrayTag:case o.uint16ArrayTag:case o.uint32ArrayTag:case o.bigUint64ArrayTag:case o.int8ArrayTag:case o.int16ArrayTag:case o.int32ArrayTag:case o.bigInt64ArrayTag:case o.float32ArrayTag:case o.float64ArrayTag:if(void 0!==t.Buffer&&t.Buffer.isBuffer(l)!==t.Buffer.isBuffer(u)||l.length!==u.length)return!1;for(let t=0;t<l.length;t++)if(!e(l[t],u[t],t,l,u,c,d))return!1;return!0;case o.arrayBufferTag:if(l.byteLength!==u.byteLength)return!1;return a(new Uint8Array(l),new Uint8Array(u),c,d);case o.dataViewTag:if(l.byteLength!==u.byteLength||l.byteOffset!==u.byteOffset)return!1;return a(new Uint8Array(l),new Uint8Array(u),c,d);case o.errorTag:return l.name===u.name&&l.message===u.message;case o.objectTag:{if(!(a(l.constructor,u.constructor,c,d)||r(l)&&r(u)))return!1;let t=[...Object.keys(l),...(0,i.getSymbols)(l)],n=[...Object.keys(u),...(0,i.getSymbols)(u)];if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],n=l[i];if(!Object.hasOwn(u,i))return!1;let o=u[i];if(!e(n,o,i,l,u,c,d))return!1}return!0}default:return!1}}finally{c.delete(l),c.delete(u)}}(a,l,p,m)}(e,l,void 0,void 0,void 0,void 0,a.noop)}e.s(["isEqual",()=>l],346563)},237855,59101,773934,27808,33199,297162,e=>{"use strict";var t=e.i(377397),r=e.i(563199),i=e.i(837699),n=e.i(268255);e.i(152567);var o=e.i(408767),s=e.i(151094),a=e.i(648404),l=e.i(935139),u=e.i(391185);let c=/^(https?|ftp):\/\//;var d=e.i(471981),p=e.i(390622),m=e.i(124836),f=e.i(105845),h=e.i(326531),g=e.i(503144),y=e.i(137667),x=e.i(81828),v=e.i(128984),b=e.i(346563),w=e.i(639751);let j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return(0,w.create)(r=>({files:e?[...e]:[],setFiles:e=>{r({files:e}),t?.(e)}}))},k=(0,n.createContext)(null);function C(e){let t=(0,n.useContext)(k);if(!t)throw Error("Missing FileContext.Provider in the tree");return(0,w.useStore)(t,e)}let N=()=>(0,n.useContext)(k),_=e=>{let{children:t,value:i,onChange:o}=e,s=(0,n.useRef)(void 0);return s.current||(s.current=j(i,o)),(0,n.useEffect)(()=>{!s.current||(0,b.isEqual)(i,s.current.getState().files)||s.current.setState({files:i?[...i]:[]})},[i]),(0,r.jsx)(k.Provider,{value:s.current,children:t})};e.s(["FileContextProvider",0,_,"useFileStore",0,N,"useStore",()=>C],59101);var S=e.i(223314);let T=e=>{let t=1024*Number(e?.image_file_size_limit)*1024||0xa00000,r=1024*Number(e?.file_size_limit)*1024||0xf00000,i=1024*Number(e?.audio_file_size_limit)*1024||0x3200000;return{imgSizeLimit:t,docSizeLimit:r,audioSizeLimit:i,videoSizeLimit:1024*Number(e?.video_file_size_limit)*1024||0x6400000,maxFileUploadLimit:Number(e?.workflow_file_upload_limit)||10}},F=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{t:r}=(0,o.useTranslation)(),{notify:i}=(0,y.useToastContext)(),s=N(),l=(0,h.useParams)(),{imgSizeLimit:u,docSizeLimit:c,audioSizeLimit:d,videoSizeLimit:b}=T(e.fileUploadConfig),w=(0,n.useCallback)((e,t)=>{switch(e){case p.SupportUploadFileTypes.image:if(t>u)return i({type:"error",message:r("fileUploader.uploadFromComputerLimit",{ns:"common",type:p.SupportUploadFileTypes.image,size:(0,v.formatFileSize)(u)})}),!1;return!0;case p.SupportUploadFileTypes.custom:case p.SupportUploadFileTypes.document:if(t>c)return i({type:"error",message:r("fileUploader.uploadFromComputerLimit",{ns:"common",type:p.SupportUploadFileTypes.document,size:(0,v.formatFileSize)(c)})}),!1;return!0;case p.SupportUploadFileTypes.audio:if(t>d)return i({type:"error",message:r("fileUploader.uploadFromComputerLimit",{ns:"common",type:p.SupportUploadFileTypes.audio,size:(0,v.formatFileSize)(d)})}),!1;return!0;case p.SupportUploadFileTypes.video:if(t>b)return i({type:"error",message:r("fileUploader.uploadFromComputerLimit",{ns:"common",type:p.SupportUploadFileTypes.video,size:(0,v.formatFileSize)(b)})}),!1;return!0;default:return!0}},[d,c,u,i,r,b]),j=(0,n.useCallback)(e=>{let{files:t,setFiles:r}=s.getState();r((0,f.produce)(t,t=>{t.push(e)}))},[s]),k=(0,n.useCallback)(e=>{let{files:t,setFiles:r}=s.getState();r((0,f.produce)(t,t=>{let r=t.findIndex(t=>t.id===e.id);r>-1&&(t[r]=e)}))},[s]),C=(0,n.useCallback)(e=>{let{files:t,setFiles:r}=s.getState();r(t.filter(t=>t.id!==e))},[s]),_=(0,n.useCallback)(e=>{let{files:t,setFiles:n}=s.getState(),o=t.findIndex(t=>t.id===e);if(o>-1){let e=t[o];n((0,f.produce)(t,e=>{e[o].progress=0})),(0,S.fileUpload)({file:e.originalFile,onProgressCallback:t=>{k({...e,progress:t})},onSuccessCallback:t=>{k({...e,uploadedId:t.id,progress:100})},onErrorCallback:t=>{i({type:"error",message:(0,S.getFileUploadErrorMessage)(t,r("fileUploader.uploadFromComputerUploadError",{ns:"common"}),r)}),k({...e,progress:-1})}},!!l.token)}},[s,i,r,k,l]),F=(0,n.useCallback)(e=>{let t=setInterval(()=>{let r=s.getState().files.find(t=>t.id===e);r&&r.progress<80&&r.progress>=0?k({...r,progress:r.progress+20}):clearTimeout(t)},200)},[s,k]),L=(0,n.useCallback)(t=>{let n=e.allowed_file_types,o={id:(0,g.v4)(),name:t,type:"",size:0,progress:0,transferMethod:a.TransferMethod.remote_url,supportFileType:"",url:t,isRemote:!0};j(o),F(o.id),(0,x.uploadRemoteFileInfo)(t,!!l.token).then(t=>{let s={...o,type:t.mime_type,size:t.size,progress:100,supportFileType:(0,S.getSupportFileType)(t.name,t.mime_type,n?.includes(p.SupportUploadFileTypes.custom)),uploadedId:t.id,url:t.url};(0,S.isAllowedFileExtension)(t.name,t.mime_type,e.allowed_file_types||[],e.allowed_file_extensions||[])||(i({type:"error",message:`${r("fileUploader.fileExtensionNotSupport",{ns:"common"})} ${s.type}`}),C(o.id)),w(s.supportFileType,s.size)?k(s):C(o.id)}).catch(()=>{i({type:"error",message:r("fileUploader.pasteFileLinkInvalid",{ns:"common"})}),C(o.id)})},[w,j,k,i,r,C,e?.allowed_file_types,e.allowed_file_extensions,F,l.token]),R=(0,n.useCallback)(m.noop,[]),U=(0,n.useCallback)(m.noop,[]),E=(0,n.useCallback)(()=>{let{setFiles:e}=s.getState();e([])},[s]),z=(0,n.useCallback)(n=>{if(!t&&!e.enabled)return void i({type:"error",message:r("fileUploader.uploadDisabled",{ns:"common"})});if(!(0,S.isAllowedFileExtension)(n.name,n.type,e.allowed_file_types||[],e.allowed_file_extensions||[]))return void i({type:"error",message:`${r("fileUploader.fileExtensionNotSupport",{ns:"common"})} ${n.type}`});let o=e.allowed_file_types;if(!w((0,S.getSupportFileType)(n.name,n.type,o?.includes(p.SupportUploadFileTypes.custom)),n.size))return;let s=new FileReader,u=n.type.startsWith("image");s.addEventListener("load",()=>{let e={id:(0,g.v4)(),name:n.name,type:n.type,size:n.size,progress:0,transferMethod:a.TransferMethod.local_file,supportFileType:(0,S.getSupportFileType)(n.name,n.type,o?.includes(p.SupportUploadFileTypes.custom)),originalFile:n,base64Url:u?s.result:""};j(e),(0,S.fileUpload)({file:e.originalFile,onProgressCallback:t=>{k({...e,progress:t})},onSuccessCallback:t=>{k({...e,uploadedId:t.id,progress:100})},onErrorCallback:t=>{i({type:"error",message:(0,S.getFileUploadErrorMessage)(t,r("fileUploader.uploadFromComputerUploadError",{ns:"common"}),r)}),k({...e,progress:-1})}},!!l.token)},!1),s.addEventListener("error",()=>{i({type:"error",message:r("fileUploader.uploadFromComputerReadError",{ns:"common"})})},!1),s.readAsDataURL(n)},[t,w,i,r,j,k,l.token,e?.allowed_file_types,e?.allowed_file_extensions,e?.enabled]),P=(0,n.useCallback)(e=>{let t=e.clipboardData?.files[0],r=e.clipboardData?.getData("text/plain");t&&!r&&(e.preventDefault(),z(t))},[z]),[O,A]=(0,n.useState)(!1),I=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),A(!0)},[]),M=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),W=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),A(!1)},[]),D=(0,n.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),A(!1);let t=e.dataTransfer.files[0];t&&z(t)},[z]);return{handleAddFile:j,handleUpdateFile:k,handleRemoveFile:C,handleReUploadFile:_,handleLoadFileFromLink:L,handleLoadFileFromLinkSuccess:R,handleLoadFileFromLinkError:U,handleClearFiles:E,handleLocalFileUpload:z,handleClipboardPasteFile:P,isDragActive:O,handleDragFileEnter:I,handleDragFileOver:M,handleDragFileLeave:W,handleDropFile:D}};e.s(["useFile",0,F,"useFileSizeLimit",0,T],773934);let L=e=>{let{fileConfig:t}=e,i=C(e=>e.files),{handleLocalFileUpload:n}=F(t),o=t.allowed_file_types,s=(o?.includes(p.SupportUploadFileTypes.custom)?t.allowed_file_extensions||[]:(o?.map(e=>d.FILE_EXTS[e])||[]).flat().map(e=>`.${e}`)).join(",");return(0,r.jsx)("input",{className:"absolute inset-0 block w-full cursor-pointer text-[0] opacity-0 disabled:cursor-not-allowed",onClick:e=>e.target.value="",type:"file",onChange:e=>{let r=e.target.files;if(r)if(t.number_limits)for(let e=0;e<r.length;e++)e+1+i.length<=t.number_limits&&n(r[e]);else n(r[0])},accept:s,disabled:!!(t.number_limits&&i.length>=t?.number_limits),multiple:!!t.number_limits&&t.number_limits>1})},R=(0,n.memo)(e=>{let{showFromLink:t=!0,showFromLocal:a=!0,trigger:d,fileConfig:p}=e,{t:m}=(0,o.useTranslation)(),f=C(e=>e.files),[h,g]=(0,n.useState)(!1),[y,x]=(0,n.useState)(""),[v,b]=(0,n.useState)(!1),{handleLoadFileFromLink:w}=F(p),j=!!p.number_limits&&f.length>=p.number_limits;return(0,r.jsxs)(u.PortalToFollowElem,{placement:"top",offset:4,open:h,onOpenChange:g,children:[(0,r.jsx)(u.PortalToFollowElemTrigger,{onClick:()=>g(e=>!e),asChild:!0,children:d(h)}),(0,r.jsx)(u.PortalToFollowElemContent,{className:"z-[1001]",children:(0,r.jsxs)("div",{className:"w-[280px] rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg-blur p-3 shadow-lg",children:[t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:(0,l.cn)("flex h-8 items-center rounded-lg border border-components-input-border-active bg-components-input-bg-active p-1 shadow-xs",v&&"border-components-input-border-destructive"),children:[(0,r.jsx)("input",{className:"system-sm-regular mr-0.5 block grow appearance-none bg-transparent px-1 outline-none",placeholder:m("fileUploader.pasteFileLinkInputPlaceholder",{ns:"common"})||"",value:y,onChange:e=>{b(!1),x(e.target.value.trim())},disabled:j}),(0,r.jsx)(s.default,{className:"shrink-0",size:"small",variant:"primary",disabled:!y||j,onClick:()=>{if(y){if(!c.test(y))return void b(!0);w(y),x("")}},children:m("operation.ok",{ns:"common"})})]}),v&&(0,r.jsx)("div",{className:"body-xs-regular mt-0.5 text-text-destructive",children:m("fileUploader.pasteFileLinkInvalid",{ns:"common"})})]}),t&&a&&(0,r.jsxs)("div",{className:"system-2xs-medium-uppercase flex h-7 items-center p-2 text-text-quaternary",children:[(0,r.jsx)("div",{className:"mr-2 h-px w-[93px] bg-gradient-to-l from-[rgba(16,24,40,0.08)]"}),"OR",(0,r.jsx)("div",{className:"ml-2 h-px w-[93px] bg-gradient-to-r from-[rgba(16,24,40,0.08)]"})]}),a&&(0,r.jsxs)(s.default,{className:"relative w-full",variant:"secondary-accent",disabled:j,children:[(0,r.jsx)(i.RiUploadCloud2Line,{className:"mr-1 h-4 w-4"}),m("fileUploader.uploadFromComputer",{ns:"common"}),(0,r.jsx)(L,{fileConfig:p})]})]})})]})});var U=e.i(387124);let E=e=>{let{isDisabled:t,fileConfig:u}=e,{t:c}=(0,o.useTranslation)(),d=C(e=>e.files),{handleRemoveFile:p,handleReUploadFile:m}=F(u),f=[{value:a.TransferMethod.local_file,label:c("fileUploader.uploadFromComputer",{ns:"common"}),icon:(0,r.jsx)(i.RiUploadCloud2Line,{className:"h-4 w-4"})},{value:a.TransferMethod.remote_url,label:c("fileUploader.pasteFileLink",{ns:"common"}),icon:(0,r.jsx)(i.RiLink,{className:"h-4 w-4"})}],h=(0,n.useCallback)((e,t)=>(0,r.jsxs)(s.default,{variant:"tertiary",className:(0,l.cn)("relative grow",t&&"bg-components-button-tertiary-bg-hover"),disabled:!!(u.number_limits&&d.length>=u.number_limits),children:[e.icon,(0,r.jsx)("span",{className:"ml-1",children:e.label}),e.value===a.TransferMethod.local_file&&(0,r.jsx)(L,{fileConfig:u})]},e.value),[u,d.length]),g=(0,n.useCallback)(e=>t=>h(e,t),[h]),y=(0,n.useCallback)(e=>e.value===a.TransferMethod.local_file&&u?.allowed_file_upload_methods?.includes(a.TransferMethod.local_file)?h(e):e.value===a.TransferMethod.remote_url&&u?.allowed_file_upload_methods?.includes(a.TransferMethod.remote_url)?(0,r.jsx)(R,{showFromLocal:!1,trigger:g(e),fileConfig:u},e.value):void 0,[h,g,u]);return(0,r.jsxs)("div",{children:[!t&&(0,r.jsx)("div",{className:"flex items-center space-x-1",children:f.map(y)}),(0,r.jsx)("div",{className:"mt-1 space-y-1",children:d.map(e=>(0,r.jsx)(U.default,{file:e,showDeleteAction:!t,showDownloadAction:!1,onRemove:()=>p(e.id),onReUpload:()=>m(e.id),canPreview:u.preview_config?.file_type_list?.includes(e.type),previewMode:u.preview_config?.mode},e.id))})]})};e.s(["default",0,e=>{let{value:t,onChange:i,fileConfig:n,isDisabled:o}=e;return(0,r.jsx)(_,{value:t,onChange:i,children:(0,r.jsx)(E,{isDisabled:o,fileConfig:n})})}],27808);var z=e.i(654313);let P=(0,n.memo)(e=>{let{fileConfig:t,readonly:o}=e,s=(0,n.useCallback)(e=>(0,r.jsx)(z.default,{size:"l",className:(0,l.cn)(e&&"bg-state-base-hover"),disabled:o,children:(0,r.jsx)(i.RiAttachmentLine,{className:"h-5 w-5"})}),[]);return o?s(!1):(0,r.jsx)(R,{trigger:s,fileConfig:t,showFromLocal:t?.allowed_file_upload_methods?.includes(a.TransferMethod.local_file),showFromLink:t?.allowed_file_upload_methods?.includes(a.TransferMethod.remote_url)})});e.s(["default",0,P],33199);var O=e.i(688393),A=e.i(15585);let I=e=>{let{url:t,title:n,onCancel:o}=e;return(0,A.useHotkeys)("esc",o),(0,O.createPortal)((0,r.jsxs)("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/80 p-8",onClick:e=>e.stopPropagation(),tabIndex:-1,children:[(0,r.jsx)("div",{children:(0,r.jsx)("audio",{controls:!0,title:n,autoPlay:!1,preload:"metadata",children:(0,r.jsx)("source",{type:"audio/mpeg",src:t,className:"max-h-full max-w-full"})})}),(0,r.jsx)("div",{className:"absolute right-6 top-6 flex h-8 w-8 cursor-pointer items-center justify-center rounded-lg bg-white/[0.08] backdrop-blur-[2px]",onClick:o,children:(0,r.jsx)(i.RiCloseLine,{className:"h-4 w-4 text-gray-500"})})]}),document.body)},M=(0,e.i(233697).default)(()=>e.A(201201),{loadableGenerated:{modules:[661305]},ssr:!1}),W=e=>{let{url:t,title:n,onCancel:o}=e;return(0,A.useHotkeys)("esc",o),(0,O.createPortal)((0,r.jsxs)("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/80 p-8",onClick:e=>e.stopPropagation(),tabIndex:-1,children:[(0,r.jsx)("div",{children:(0,r.jsx)("video",{controls:!0,title:n,autoPlay:!1,preload:"metadata",children:(0,r.jsx)("source",{type:"video/mp4",src:t,className:"max-h-full max-w-full"})})}),(0,r.jsx)("div",{className:"absolute right-6 top-6 flex h-8 w-8 cursor-pointer items-center justify-center rounded-lg bg-white/[0.08] backdrop-blur-[2px]",onClick:o,children:(0,r.jsx)(i.RiCloseLine,{className:"h-4 w-4 text-gray-500"})})]}),document.body)};e.i(36860);var D=e.i(47481),$=e.i(584186),H=e.i(618403);let B=e=>{let{file:o,showDeleteAction:a,showDownloadAction:u=!0,onRemove:c,onReUpload:d,canPreview:p}=e,{id:m,name:f,type:h,progress:g,url:y,base64Url:x,isRemote:b}=o,[w,j]=(0,n.useState)(""),k=(0,S.getFileExtension)(f,h,b),C=-1===g,N=y||x;!N&&o?.originalFile&&(N=URL.createObjectURL(o.originalFile.slice()).toString());let _=y?`${y}&as_attachment=true`:x;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:(0,l.cn)("group/file-item relative h-[68px] w-[144px] rounded-lg border-[0.5px] border-components-panel-border bg-components-card-bg p-2 shadow-xs",!C&&"hover:bg-components-card-bg-alt",C&&"border border-state-destructive-border bg-state-destructive-hover",C&&"bg-state-destructive-hover-alt hover:border-[0.5px] hover:border-state-destructive-border"),children:[a&&(0,r.jsx)(s.default,{className:"absolute -right-1.5 -top-1.5 z-[11] hidden h-5 w-5 rounded-full p-0 group-hover/file-item:flex",onClick:()=>c?.(m),children:(0,r.jsx)(i.RiCloseLine,{className:"h-4 w-4 text-components-button-secondary-text"})}),(0,r.jsx)("div",{className:"system-xs-medium mb-1 line-clamp-2 h-8 cursor-pointer break-all text-text-tertiary",title:f,onClick:()=>p&&j(N||""),children:f}),(0,r.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"system-2xs-medium-uppercase flex items-center text-text-tertiary",children:[(0,r.jsx)(t.default,{size:"sm",type:(0,S.getFileAppearanceType)(f,h),className:"mr-1"}),k&&(0,r.jsxs)(r.Fragment,{children:[k,(0,r.jsx)("div",{className:"mx-1",children:"·"})]}),!!o.size&&(0,v.formatFileSize)(o.size)]}),u&&_&&(0,r.jsx)(z.default,{size:"m",className:"absolute -right-1 -top-1 hidden group-hover/file-item:flex",onClick:e=>{e.stopPropagation(),(0,H.downloadUrl)({url:_||"",fileName:f,target:"_blank"})},children:(0,r.jsx)(i.RiDownloadLine,{className:"h-3.5 w-3.5 text-text-tertiary"})}),g>=0&&!(0,S.fileIsUploaded)(o)&&(0,r.jsx)($.default,{percentage:g,size:12,className:"shrink-0"}),C&&(0,r.jsx)(D.ReplayLine,{className:"h-4 w-4 text-text-tertiary",onClick:()=>d?.(m)})]})]}),"audio"===h.split("/")[0]&&p&&w&&(0,r.jsx)(I,{title:f,url:w,onCancel:()=>j("")}),"video"===h.split("/")[0]&&p&&w&&(0,r.jsx)(W,{title:f,url:w,onCancel:()=>j("")}),"pdf"===h.split("/")[1]&&p&&w&&(0,r.jsx)(M,{url:w,onCancel:()=>{j("")}})]})};var K=e.i(998020),q=e.i(357e3);let V=e=>{let{file:t,showDeleteAction:o,showDownloadAction:a,canPreview:l,onRemove:u,onReUpload:c}=e,{id:d,progress:p,base64Url:m,url:f,name:h}=t,[g,y]=(0,n.useState)(""),x=f?`${f}&as_attachment=true`:m;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"group/file-image relative cursor-pointer",onClick:()=>l&&y(m||f||""),children:[o&&(0,r.jsx)(s.default,{className:"absolute -right-1.5 -top-1.5 z-[11] hidden h-5 w-5 rounded-full p-0 group-hover/file-image:flex",onClick:()=>u?.(d),children:(0,r.jsx)(i.RiCloseLine,{className:"h-4 w-4 text-components-button-secondary-text"})}),(0,r.jsx)(q.default,{className:"h-[68px] w-[68px] shadow-md",imageUrl:m||f||"",showDownloadAction:a}),p>=0&&!(0,S.fileIsUploaded)(t)&&(0,r.jsx)("div",{className:"absolute inset-0 z-10 flex items-center justify-center border-[2px] border-effects-image-frame bg-background-overlay-alt",children:(0,r.jsx)($.default,{percentage:p,size:12,circleStrokeColor:"stroke-components-progress-white-border",circleFillColor:"fill-transparent",sectorFillColor:"fill-components-progress-white-progress"})}),-1===p&&(0,r.jsx)("div",{className:"absolute inset-0 z-10 flex items-center justify-center border-[2px] border-state-destructive-border bg-background-overlay-destructive",children:(0,r.jsx)(D.ReplayLine,{className:"h-5 w-5",onClick:()=>c?.(d)})}),a&&(0,r.jsx)("div",{className:"absolute inset-0.5 z-10 hidden bg-background-overlay-alt bg-opacity-[0.3] group-hover/file-image:block",children:(0,r.jsx)("div",{className:"absolute bottom-0.5 right-0.5  flex h-6 w-6 items-center justify-center rounded-lg bg-components-actionbar-bg shadow-md",onClick:e=>{e.stopPropagation(),(0,H.downloadUrl)({url:x||"",fileName:h,target:"_blank"})},children:(0,r.jsx)(i.RiDownloadLine,{className:"h-4 w-4 text-text-tertiary"})})})]}),g&&l&&(0,r.jsx)(K.default,{title:h,url:g,onCancel:()=>y("")})]})},Y=e=>{let{className:t,files:i,onReUpload:n,onRemove:o,showDeleteAction:s=!0,showDownloadAction:a=!1,canPreview:u=!0}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-wrap gap-2",t),children:i.map(e=>e.supportFileType===p.SupportUploadFileTypes.image?(0,r.jsx)(V,{file:e,showDeleteAction:s,showDownloadAction:a,onRemove:o,onReUpload:n,canPreview:u},e.id):(0,r.jsx)(B,{file:e,showDeleteAction:s,showDownloadAction:a,onRemove:o,onReUpload:n,canPreview:u},e.id))})};e.s(["FileList",0,Y,"FileListInChatInput",0,e=>{let{fileConfig:t}=e,i=C(e=>e.files),{handleRemoveFile:n,handleReUploadFile:o}=F(t);return(0,r.jsx)(Y,{files:i,onReUpload:o,onRemove:n})}],297162),e.s([],237855)},149625,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=e.r(268255),s=l(o),a=l(e.r(304153));function l(e){return e&&e.__esModule?e:{default:e}}var u={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},c=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],d=function(e,t){t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight=e.fontWeight,t.style.fontStyle=e.fontStyle,t.style.letterSpacing=e.letterSpacing,t.style.textTransform=e.textTransform},p="u">typeof window&&!!window.navigator&&/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent),m=function(){return p?"_"+Math.random().toString(36).substr(2,12):void 0},f=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function, not "+typeof e);function t(e){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");var r=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.inputRef=function(e){r.input=e,"function"==typeof r.props.inputRef&&r.props.inputRef(e)},r.placeHolderSizerRef=function(e){r.placeHolderSizer=e},r.sizerRef=function(e){r.sizer=e},r.state={inputWidth:e.minWidth,inputId:e.id||m(),prevId:e.id},r}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.id;return r!==t.prevId?{inputId:r||m(),prevId:r}:null}}]),n(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"componentDidUpdate",value:function(e,t){t.inputWidth!==this.state.inputWidth&&"function"==typeof this.props.onAutosize&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(this.mounted&&window.getComputedStyle){var e=this.input&&window.getComputedStyle(this.input);e&&(d(e,this.sizer),this.placeHolderSizer&&d(e,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(this.mounted&&this.sizer&&void 0!==this.sizer.scrollWidth){var e=void 0;(e=(this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:this.sizer.scrollWidth+2)+("number"===this.props.type&&void 0===this.props.extraWidth?16:parseInt(this.props.extraWidth)||0))<this.props.minWidth&&(e=this.props.minWidth),e!==this.state.inputWidth&&this.setState({inputWidth:e})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var e=this.props.injectStyles;return p&&e?s.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var e=[this.props.defaultValue,this.props.value,""].reduce(function(e,t){return null!=e?e:t}),t=i({},this.props.style);t.display||(t.display="inline-block");var r=i({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),n=function(e,t){var r={};for(var i in e)!(t.indexOf(i)>=0)&&Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}(this.props,[]);return c.forEach(function(e){return delete n[e]}),n.className=this.props.inputClassName,n.id=this.state.inputId,n.style=r,s.default.createElement("div",{className:this.props.className,style:t},this.renderStyles(),s.default.createElement("input",i({},n,{ref:this.inputRef})),s.default.createElement("div",{ref:this.sizerRef,style:u},e),this.props.placeholder?s.default.createElement("div",{ref:this.placeHolderSizerRef,style:u},this.props.placeholder):null)}}]),t}(o.Component);f.propTypes={className:a.default.string,defaultValue:a.default.any,extraWidth:a.default.oneOfType([a.default.number,a.default.string]),id:a.default.string,injectStyles:a.default.bool,inputClassName:a.default.string,inputRef:a.default.func,inputStyle:a.default.object,minWidth:a.default.oneOfType([a.default.number,a.default.string]),onAutosize:a.default.func,onChange:a.default.func,placeholder:a.default.string,placeholderIsMinWidth:a.default.bool,style:a.default.object,value:a.default.any},f.defaultProps={minWidth:1,injectStyles:!0},r.default=f},522977,e=>{"use strict";var t=e.i(563199),r=e.i(837699),i=e.i(268255),n=e.i(149625);e.i(152567);var o=e.i(408767),s=e.i(137667),a=e.i(935139);e.s(["default",0,e=>{let{items:l,onChange:u,disableAdd:c,disableRemove:d,customizedConfirmKey:p="Enter",isInWorkflow:m,placeholder:f,required:h=!1,inputClassName:g}=e,{t:y}=(0,o.useTranslation)(),{notify:x}=(0,s.useToastContext)(),[v,b]=(0,i.useState)(""),[w,j]=(0,i.useState)(!1),k="Tab"===p,C=(0,i.useCallback)(e=>{let t=e.trim();if(!t){h&&x({type:"error",message:y("segment.keywordEmpty",{ns:"datasetDocuments"})});return}l.find(e=>e===t)?x({type:"error",message:y("segment.keywordDuplicate",{ns:"datasetDocuments"})}):t.length>20?x({type:"error",message:y("segment.keywordError",{ns:"datasetDocuments"})}):(u([...l,t]),setTimeout(()=>{b("")}))},[l,u,x,y,h]);return(0,t.jsxs)("div",{className:(0,a.cn)("flex flex-wrap",!m&&"min-w-[200px]",k?"rounded-lg bg-components-input-bg-normal pb-1 pl-1":""),children:[(l||[]).map((e,i)=>(0,t.jsxs)("div",{className:(0,a.cn)("system-xs-regular mr-1 mt-1 flex items-center rounded-md border border-divider-deep bg-components-badge-white-to-dark py-1 pl-1.5 pr-1 text-text-secondary"),children:[e,!d&&(0,t.jsx)("div",{className:"flex h-4 w-4 cursor-pointer items-center justify-center",onClick:()=>{let e;(e=[...l]).splice(i,1),u(e)},children:(0,t.jsx)(r.RiCloseLine,{className:"ml-0.5 h-3.5 w-3.5 text-text-tertiary"})})]},e)),!c&&(0,t.jsxs)("div",{className:(0,a.cn)("group/tag-add mt-1 flex items-center gap-x-0.5",k?"":"rounded-md border border-dashed border-divider-deep px-1.5"),children:[!k&&!w&&(0,t.jsx)(r.RiAddLine,{className:"h-3.5 w-3.5 text-text-placeholder group-hover/tag-add:text-text-secondary"}),(0,t.jsx)(n.default,{inputClassName:(0,a.cn)("appearance-none text-text-primary caret-[#295EFF] outline-none placeholder:text-text-placeholder group-hover/tag-add:placeholder:text-text-secondary",k?"bg-transparent":"",g),className:(0,a.cn)(!m&&"max-w-[300px]",m&&"max-w-[146px]","system-xs-regular overflow-hidden rounded-md py-1",k&&"border border-transparent px-1.5",w&&k&&"border-dashed border-divider-deep"),onFocus:()=>j(!0),onBlur:()=>{C(v),j(!1)},value:v,onChange:e=>{b(e.target.value)},onKeyDown:e=>{k&&"Enter"===e.key&&b(`${v}↵`),e.key===p&&(k&&e.preventDefault(),C(v))},placeholder:f||(k?y("model.params.stop_sequencesPlaceholder",{ns:"common"}):y("segment.addKeyWord",{ns:"datasetDocuments"}))})]})]})}])},35305,(e,t,r)=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},561227,(e,t,r)=>{"use strict";var i=e.r(35305);function n(){}function o(){}o.resetWarningCache=n,t.exports=function(){function e(e,t,r,n,o,s){if(s!==i){var a=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:n};return r.PropTypes=r,r}},304153,(e,t,r)=>{t.exports=e.r(561227)()},15585,e=>{"use strict";var t=e.i(268255);function r(){return(r=Object.assign.bind()).apply(null,arguments)}e.i(563199);var i=["shift","alt","meta","mod","ctrl"],n={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function o(e){return(e&&n[e]||e||"").trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function s(e,t){return void 0===t&&(t=","),e.split(t)}function a(e,t,n){void 0===t&&(t="+");var s=e.toLocaleLowerCase().split(t).map(function(e){return o(e)}),a={alt:s.includes("alt"),ctrl:s.includes("ctrl")||s.includes("control"),shift:s.includes("shift"),meta:s.includes("meta"),mod:s.includes("mod")},l=s.filter(function(e){return!i.includes(e)});return r({},a,{keys:l,description:n,hotkey:e})}"u">typeof document&&(document.addEventListener("keydown",function(e){void 0!==e.key&&c([o(e.key),o(e.code)])}),document.addEventListener("keyup",function(e){void 0!==e.key&&d([o(e.key),o(e.code)])})),"u">typeof window&&window.addEventListener("blur",function(){l.clear()});var l=new Set;function u(e){return Array.isArray(e)}function c(e){var t=Array.isArray(e)?e:[e];l.has("meta")&&l.forEach(function(e){return!i.includes(e)&&l.delete(e.toLowerCase())}),t.forEach(function(e){return l.add(e.toLowerCase())})}function d(e){var t=Array.isArray(e)?e:[e];"meta"===e?l.clear():t.forEach(function(e){return l.delete(e.toLowerCase())})}function p(e,t){void 0===t&&(t=!1);var r,i=e.target,n=e.composed,o=null;return(o=(r=i).tagName&&!r.tagName.startsWith("-")&&r.tagName.includes("-")&&n?e.composedPath()[0]&&e.composedPath()[0].tagName:i&&i.tagName,u(t))?!!(o&&t&&t.some(function(e){var t;return e.toLowerCase()===(null==(t=o)?void 0:t.toLowerCase())})):!!(o&&t&&t)}var m=function(e,t,r){void 0===r&&(r=!1);var i,n=t.alt,s=t.meta,a=t.mod,c=t.shift,d=t.ctrl,p=t.keys,m=e.key,f=e.code,h=e.ctrlKey,g=e.metaKey,y=e.shiftKey,x=e.altKey,v=o(f),b=m.toLowerCase();if(!(null!=p&&p.includes(v))&&!(null!=p&&p.includes(b))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(v))return!1;if(!r){if(!x===n&&"alt"!==b||!y===c&&"shift"!==b)return!1;if(a){if(!g&&!h)return!1}else if(!g===s&&"meta"!==b&&"os"!==b||!h===d&&"ctrl"!==b&&"control"!==b)return!1}return!!(p&&1===p.length&&(p.includes(b)||p.includes(v)))||(p?(void 0===i&&(i=","),(u(p)?p:p.split(i)).every(function(e){return l.has(e.trim().toLowerCase())})):!p||!1)},f=(0,t.createContext)(void 0),h=(0,t.createContext)({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),g=function(e){e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},y="u">typeof window?t.useLayoutEffect:t.useEffect;function x(e,r,i,n){var l,x=(0,t.useState)(null),v=x[0],b=x[1],w=(0,t.useRef)(!1),j=i instanceof Array?n instanceof Array?void 0:n:i,k=u(e)?e.join(null==j?void 0:j.splitKey):e,C=i instanceof Array?i:n instanceof Array?n:void 0,N=(0,t.useCallback)(r,null!=C?C:[]),_=(0,t.useRef)(N);C?_.current=N:_.current=r;var S=(!function e(t,r){return t&&r&&"object"==typeof t&&"object"==typeof r?Object.keys(t).length===Object.keys(r).length&&Object.keys(t).reduce(function(i,n){return i&&e(t[n],r[n])},!0):t===r}((l=(0,t.useRef)(void 0)).current,j)&&(l.current=j),l.current),T=(0,t.useContext)(h).enabledScopes,F=(0,t.useContext)(f);return y(function(){var e;if((null==S?void 0:S.enabled)!==!1&&(e=null==S?void 0:S.scopes,0===T.length&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):!e||T.some(function(t){return e.includes(t)})||T.includes("*"))){var t=function(e,t){var r;if(void 0===t&&(t=!1),!p(e,["input","textarea","select"])||p(e,null==S?void 0:S.enableOnFormTags)){if(null!==v){var i=v.getRootNode();if((i instanceof Document||i instanceof ShadowRoot)&&i.activeElement!==v&&!v.contains(i.activeElement))return void g(e)}(null==(r=e.target)||!r.isContentEditable||null!=S&&S.enableOnContentEditable)&&s(k,null==S?void 0:S.splitKey).forEach(function(r){var i,n,o,s=a(r,null==S?void 0:S.combinationKey);if(m(e,s,null==S?void 0:S.ignoreModifiers)||null!=(o=s.keys)&&o.includes("*")){if(null!=S&&null!=S.ignoreEventWhen&&S.ignoreEventWhen(e)||t&&w.current)return;if(("function"==typeof(i=null==S?void 0:S.preventDefault)&&i(e,s)||!0===i)&&e.preventDefault(),"function"==typeof(n=null==S?void 0:S.enabled)?!n(e,s):!0!==n&&void 0!==n)return void g(e);_.current(e,s),t||(w.current=!0)}})}},r=function(e){void 0!==e.key&&(c(o(e.code)),((null==S?void 0:S.keydown)===void 0&&(null==S?void 0:S.keyup)!==!0||null!=S&&S.keydown)&&t(e))},i=function(e){void 0!==e.key&&(d(o(e.code)),w.current=!1,null!=S&&S.keyup&&t(e,!0))},n=v||(null==j?void 0:j.document)||document;return n.addEventListener("keyup",i,null==j?void 0:j.eventListenerOptions),n.addEventListener("keydown",r,null==j?void 0:j.eventListenerOptions),F&&s(k,null==S?void 0:S.splitKey).forEach(function(e){return F.addHotkey(a(e,null==S?void 0:S.combinationKey,null==S?void 0:S.description))}),function(){n.removeEventListener("keyup",i,null==j?void 0:j.eventListenerOptions),n.removeEventListener("keydown",r,null==j?void 0:j.eventListenerOptions),F&&s(k,null==S?void 0:S.splitKey).forEach(function(e){return F.removeHotkey(a(e,null==S?void 0:S.combinationKey,null==S?void 0:S.description))})}}},[v,k,S,T]),b}e.s(["useHotkeys",()=>x])},998020,e=>{"use strict";var t=e.i(563199),r=e.i(837699),i=e.i(124836),n=e.i(915389),o=e.i(268255),s=e.i(688393),a=e.i(15585),l=e.i(137667),u=e.i(421001),c=e.i(618403);e.s(["default",0,e=>{let{url:d,title:p,onCancel:m,onPrev:f,onNext:h}=e,[g,y]=(0,o.useState)(1),[x,v]=(0,o.useState)({x:0,y:0}),[b,w]=(0,o.useState)(!1),j=(0,o.useRef)(null),k=(0,o.useRef)({x:0,y:0}),[C,N]=(0,o.useState)(!1),_=()=>{y(e=>Math.min(1.2*e,15))},S=()=>{y(e=>{let t=Math.max(e/1.2,.5);return 1===t&&v({x:0,y:0}),t})},T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png",r=atob(e),i=[];for(let e=0;e<r.length;e+=512){let t=r.slice(e,e+512),n=Array.from({length:t.length});for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);let o=new Uint8Array(n);i.push(o)}return new Blob(i,{type:t})},F=(0,o.useCallback)(()=>{(async()=>{try{let e=d.split(",")[1],t=T(e,"image/png");await navigator.clipboard.write([new ClipboardItem({[t.type]:t})]),N(!0),l.default.notify({type:"success",message:(0,n.t)("operation.imageCopied",{ns:"common"})})}catch(e){console.error("Failed to copy image:",e),(0,c.downloadUrl)({url:d,fileName:`${p}.png`}),l.default.notify({type:"info",message:(0,n.t)("operation.imageDownloaded",{ns:"common"})})}})()},[p,d]),L=(0,o.useCallback)(e=>{e.deltaY<0?_():S()},[]),R=(0,o.useCallback)(e=>{g>1&&(w(!0),k.current={x:e.clientX-x.x,y:e.clientY-x.y})},[g,x]),U=(0,o.useCallback)(e=>{if(b&&g>1){let t=e.clientX-k.current.x,r=e.clientY-k.current.y,i=j.current?.getBoundingClientRect(),n=j.current?.parentElement?.getBoundingClientRect();if(i&&n){let e=(i.width*g-n.width)/2,o=(i.height*g-n.height)/2;v({x:Math.max(-e,Math.min(e,t)),y:Math.max(-o,Math.min(o,r))})}}},[b,g]),E=(0,o.useCallback)(()=>{w(!1)},[]);return(0,o.useEffect)(()=>(document.addEventListener("mouseup",E),()=>{document.removeEventListener("mouseup",E)}),[E]),(0,a.useHotkeys)("esc",m),(0,a.useHotkeys)("up",_),(0,a.useHotkeys)("down",S),(0,a.useHotkeys)("left",f||i.noop),(0,a.useHotkeys)("right",h||i.noop),(0,s.createPortal)((0,t.jsxs)("div",{className:"image-preview-container fixed inset-0 z-[1000] flex items-center justify-center bg-black/80 p-8",onClick:e=>e.stopPropagation(),onWheel:L,onMouseDown:R,onMouseMove:U,onMouseUp:E,style:{cursor:g>1?"move":"default"},tabIndex:-1,children:[(0,t.jsx)("img",{ref:j,alt:p,src:(e=>{try{return btoa(atob(e))===e}catch{return!1}})(d)?`data:image/png;base64,${d}`:d,className:"max-h-full max-w-full",style:{transform:`scale(${g}) translate(${x.x}px, ${x.y}px)`,transition:b?"none":"transform 0.2s ease-in-out"}}),(0,t.jsx)(u.default,{popupContent:(0,n.t)("operation.copyImage",{ns:"common"}),children:(0,t.jsx)("div",{className:"absolute right-48 top-6 flex h-8 w-8 cursor-pointer items-center justify-center rounded-lg",onClick:F,children:C?(0,t.jsx)(r.RiFileCopyLine,{className:"h-4 w-4 text-green-500"}):(0,t.jsx)(r.RiFileCopyLine,{className:"h-4 w-4 text-gray-500"})})}),(0,t.jsx)(u.default,{popupContent:(0,n.t)("operation.zoomOut",{ns:"common"}),children:(0,t.jsx)("div",{className:"absolute right-40 top-6 flex h-8 w-8 cursor-pointer items-center justify-center rounded-lg",onClick:S,children:(0,t.jsx)(r.RiZoomOutLine,{className:"h-4 w-4 text-gray-500"})})}),(0,t.jsx)(u.default,{popupContent:(0,n.t)("operation.zoomIn",{ns:"common"}),children:(0,t.jsx)("div",{className:"absolute right-32 top-6 flex h-8 w-8 cursor-pointer items-center justify-center rounded-lg",onClick:_,children:(0,t.jsx)(r.RiZoomInLine,{className:"h-4 w-4 text-gray-500"})})}),(0,t.jsx)(u.default,{popupContent:(0,n.t)("operation.download",{ns:"common"}),children:(0,t.jsx)("div",{className:"absolute right-24 top-6 flex h-8 w-8 cursor-pointer items-center justify-center rounded-lg",onClick:()=>{d.startsWith("http")||d.startsWith("https")||d.startsWith("data:image")?(0,c.downloadUrl)({url:d,fileName:p,target:"_blank"}):l.default.notify({type:"error",message:`Unable to open image: ${d}`})},children:(0,t.jsx)(r.RiDownloadCloud2Line,{className:"h-4 w-4 text-gray-500"})})}),(0,t.jsx)(u.default,{popupContent:(0,n.t)("operation.openInNewTab",{ns:"common"}),children:(0,t.jsx)("div",{className:"absolute right-16 top-6 flex h-8 w-8 cursor-pointer items-center justify-center rounded-lg",onClick:()=>{if(d.startsWith("http")||d.startsWith("https"))window.open(d,"_blank");else if(d.startsWith("data:image")){let e=window.open();e?.document.write(`<img src="${d}" alt="${p}" />`)}else l.default.notify({type:"error",message:`Unable to open image: ${d}`})},children:(0,t.jsx)(r.RiAddBoxLine,{className:"h-4 w-4 text-gray-500"})})}),(0,t.jsx)(u.default,{popupContent:(0,n.t)("operation.cancel",{ns:"common"}),children:(0,t.jsx)("div",{className:"absolute right-6 top-6 flex h-8 w-8 cursor-pointer items-center justify-center rounded-lg bg-white/8 backdrop-blur-[2px]",onClick:m,children:(0,t.jsx)(r.RiCloseLine,{className:"h-4 w-4 text-gray-500"})})})]}),document.body)}])},584186,e=>{"use strict";var t=e.i(563199),r=e.i(268255),i=e.i(935139);let n=(0,r.memo)(e=>{let{className:r,percentage:n=0,size:o=12,circleStrokeWidth:s=1,circleStrokeColor:a="stroke-components-progress-brand-border",circleFillColor:l="fill-components-progress-brand-bg",sectorFillColor:u="fill-components-progress-brand-progress"}=e,c=o/2,d=o/2,p=n/101*360*Math.PI/180,m=d+c*Math.cos(p-Math.PI/2),f=d+c*Math.sin(p-Math.PI/2),h=`
    M ${d},${d}
    L ${d},${d-c}
    A ${c},${c} 0 ${+(n>50)} 1 ${m},${f}
    Z
  `;return(0,t.jsxs)("svg",{width:o+s,height:o+s,viewBox:`0 0 ${o+s} ${o+s}`,className:r,children:[(0,t.jsx)("circle",{className:(0,i.cn)(l,a),cx:d+s/2,cy:d+s/2,r:c,strokeWidth:s}),(0,t.jsx)("path",{className:(0,i.cn)(u),d:h,transform:`translate(${s/2}, ${s/2})`})]})});e.s(["default",0,n])},711284,e=>{"use strict";var t,r,i=((t={}).NewPage="new_page",t.CurrentPage="current_page",t),n=((r={}).moreLikeThis="moreLikeThis",r.opening="opening",r.suggested="suggested",r.text2speech="text2speech",r.speech2text="speech2text",r.citation="citation",r.moderation="moderation",r.file="file",r.annotationReply="annotationReply",r);e.s(["FeatureEnum",()=>n,"PreviewMode",()=>i])},47481,e=>{"use strict";var t=e.i(186571);e.s(["ReplayLine",()=>t.default])},357e3,e=>{"use strict";var t=e.i(563199),r=e.i(935139);e.s(["default",0,e=>{let{imageUrl:i,className:n,alt:o,onLoad:s,onError:a,showDownloadAction:l}=e;return(0,t.jsx)("div",{className:(0,r.cn)("border-[2px] border-effects-image-frame shadow-xs",n),children:(0,t.jsx)("img",{className:(0,r.cn)("h-full w-full object-cover",l&&"cursor-pointer"),alt:o||"Preview",onLoad:s,onError:a,src:i})})}])},387124,e=>{"use strict";var t=e.i(563199),r=e.i(837699),i=e.i(268255),n=e.i(654313),o=e.i(711284);e.i(36860);var s=e.i(47481),a=e.i(998020),l=e.i(584186),u=e.i(390622),c=e.i(935139),d=e.i(618403),p=e.i(128984),m=e.i(357e3),f=e.i(377397),h=e.i(223314);let g=(0,i.memo)(e=>{let{file:g,showDeleteAction:y,showDownloadAction:x=!0,onRemove:v,onReUpload:b,canPreview:w,previewMode:j=o.PreviewMode.CurrentPage}=e,{id:k,name:C,type:N,progress:_,supportFileType:S,base64Url:T,url:F,isRemote:L}=g,R=(0,h.getFileExtension)(C,N,L),U=S===u.SupportUploadFileTypes.image,[E,z]=(0,i.useState)("");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:(0,c.cn)("flex h-12 items-center rounded-lg border-[0.5px] border-components-panel-border bg-components-panel-on-panel-item-bg pr-3 shadow-xs",-1===_&&"border-state-destructive-border bg-state-destructive-hover",w&&j===o.PreviewMode.NewPage&&"cursor-pointer"),onClick:()=>{w&&j===o.PreviewMode.NewPage&&window.open(F||T||"","_blank")},children:[(0,t.jsxs)("div",{className:"flex h-12 w-12 items-center justify-center",children:[U&&(0,t.jsx)(m.default,{className:"h-8 w-8",imageUrl:T||F||""}),!U&&(0,t.jsx)(f.default,{type:(0,h.getFileAppearanceType)(C,N),size:"xl"})]}),(0,t.jsxs)("div",{className:"mr-1 w-0 grow",children:[(0,t.jsx)("div",{className:"system-xs-medium mb-0.5 flex items-center truncate text-text-secondary",title:g.name,children:(0,t.jsx)("div",{className:"truncate",children:C})}),(0,t.jsxs)("div",{className:"system-2xs-medium-uppercase flex items-center text-text-tertiary",children:[R&&(0,t.jsx)("span",{children:R.toLowerCase()}),R&&(0,t.jsx)("span",{className:"system-2xs-medium mx-1",children:"•"}),!!g.size&&(0,t.jsx)("span",{children:(0,p.formatFileSize)(g.size)})]})]}),(0,t.jsxs)("div",{className:"flex shrink-0 items-center",children:[_>=0&&!(0,h.fileIsUploaded)(g)&&(0,t.jsx)(l.default,{className:"mr-2.5",percentage:_}),-1===_&&(0,t.jsx)(n.default,{className:"mr-1",onClick:()=>b?.(k),children:(0,t.jsx)(s.ReplayLine,{className:"h-4 w-4 text-text-tertiary"})}),y&&(0,t.jsx)(n.default,{onClick:()=>v?.(k),children:(0,t.jsx)(r.RiDeleteBinLine,{className:"h-4 w-4"})}),w&&U&&(0,t.jsx)(n.default,{className:"mr-1",onClick:()=>z(F||""),children:(0,t.jsx)(r.RiEyeLine,{className:"h-4 w-4"})}),x&&(0,t.jsx)(n.default,{onClick:e=>{e.stopPropagation(),(0,d.downloadUrl)({url:F||T||"",fileName:C,target:"_blank"})},children:(0,t.jsx)(r.RiDownloadLine,{className:"h-4 w-4"})})]})]}),E&&w&&(0,t.jsx)(a.default,{title:C,url:E,onCancel:()=>z("")})]})});e.s(["default",0,g])}]);