(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,670977,e=>{"use strict";var t=e.i(479147);e.s(["ArrowDownRoundFill",()=>t.default])},600839,e=>{"use strict";var t=e.i(296776);e.s(["Notion",()=>t.default])},130208,e=>{"use strict";var t=e.i(563199),s=e.i(268255);e.i(152567);var a=e.i(408767),n=e.i(421001),i=e.i(935139),r=e.i(623244),l=e.i(910808);let u=s.memo(e=>{let{className:s,Icon:u,name:o,tooltip:d,usage:c,total:m,unit:p,unitPosition:x="suffix",resetHint:h,resetInDays:f,hideIcon:g=!1,storageMode:y=!1,storageThreshold:v=50,storageTooltip:b,isSandboxPlan:j=!1}=e,{t:w}=(0,a.useTranslation)(),D=y&&c<v,C=y&&j&&c>=v,N=c/m*100,k=m===r.NUM_INFINITE,_=k?w("plansCommon.unlimited",{ns:"billing"}):m;!k&&p&&"inline"===x&&(_=`${m}${p}`);let $=!!p&&!k&&"suffix"===x,S=h??("number"==typeof f?w("usagePage.resetsIn",{ns:"billing",count:f}):void 0),T=e=>y&&b?(0,t.jsx)(n.default,{popupContent:(0,t.jsx)("div",{className:"w-[200px]",children:b}),asChild:!1,children:(0,t.jsx)("div",{className:"cursor-default",children:e})}):e;return(0,t.jsxs)("div",{className:(0,i.cn)("flex flex-col gap-2 rounded-xl bg-components-panel-bg p-4",s),children:[!g&&u&&(0,t.jsx)(u,{className:"h-4 w-4 text-text-tertiary"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{className:"system-xs-medium text-text-tertiary",children:o}),d&&(0,t.jsx)(n.default,{popupContent:(0,t.jsx)("div",{className:"w-[180px]",children:d})})]}),(0,t.jsxs)("div",{className:"system-md-semibold flex items-center gap-1 text-text-primary",children:[T((()=>{if(y){if(C)return(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:v}),(0,t.jsx)("span",{className:"system-md-regular text-text-quaternary",children:"/"}),(0,t.jsxs)("span",{children:[v," ",p]})]});if(D)return(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsxs)("span",{children:["<"," ",v]}),!j&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"system-md-regular text-text-quaternary",children:"/"}),(0,t.jsx)("span",{children:_})]}),j&&(0,t.jsx)("span",{children:p})]})}return(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:c}),(0,t.jsx)("span",{className:"system-md-regular text-text-quaternary",children:"/"}),(0,t.jsx)("span",{children:_})]})})()),S?(0,t.jsx)("div",{className:"system-xs-regular ml-auto flex-1 text-right text-text-tertiary",children:S}):$?(0,t.jsx)("div",{className:"system-xs-medium ml-auto text-text-tertiary",children:p}):null]}),T((0,t.jsx)(l.default,{percent:D?0:N,color:C||N>=100?"bg-components-progress-error-progress":N>=80?"bg-components-progress-warning-progress":"bg-components-progress-bar-progress-solid",indeterminate:D,indeterminateFull:D&&j}))]})});e.s(["default",0,u])},34628,e=>{e.v({gridBg:"style-module__T68GKq__gridBg"})},325222,e=>{"use strict";var t=e.i(563199),s=e.i(935139),a=e.i(34628);e.s(["default",0,e=>{let{children:n,wrapperClassName:i,canvasClassName:r,gradientClassName:l}=e;return(0,t.jsxs)("div",{className:(0,s.cn)("relative bg-saas-background",i),children:[(0,t.jsx)("div",{className:(0,s.cn)("absolute inset-0 z-0 h-full w-full opacity-70",r,a.default.gridBg)}),(0,t.jsx)("div",{className:(0,s.cn)("absolute z-[1] h-full w-full rounded-lg bg-grid-mask-background",l)}),(0,t.jsx)("div",{className:"relative z-[2]",children:n})]})}])},511334,e=>{"use strict";function t(){return(t=Object.assign.bind()).apply(null,arguments)}e.s(["default",()=>t])},318680,e=>{"use strict";function t(e,t){if(null==e)return{};var s={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;s[a]=e[a]}return s}e.s(["default",()=>t])},666010,788666,e=>{"use strict";var t=e.i(875037),s=e.i(562572),a=e.i(621379);let n=new Set(["all",...a.DisplayStatusList.map(e=>e.toLowerCase())]),i={active:"available"},r={enabled:"available"},l=e=>{if(!e)return"all";let t=e.toLowerCase();return i[t]?i[t]:n.has(t)?t:"all"},u=e=>{let t=l(e);return"all"===t?"all":r[t]||t};e.s(["normalizeStatusForQuery",0,u,"sanitizeStatusValue",0,l],788666);var o=e.i(367916),d=e.i(211857),c=e.i(722384);let m="knowledge/document",p=[m,"documentList"],x=[m,"autoDisabledDocument"],h=e=>(Array.isArray(e)?e:[e]).map(e=>`document_id=${e}`).join("&"),f=e=>(0,t.useMutation)({mutationFn:t=>{let{datasetId:s,documentIds:a,documentId:n}=t;return(0,o.patch)(`/datasets/${s}/documents/status/${e}/batch?${h(n||a)}`)}}),g=[m,"documentDetail","withoutMetaData"];e.s(["useAutoDisabledDocuments",0,e=>(0,s.useQuery)({queryKey:[...x,e],queryFn:()=>(0,o.get)(`/datasets/${e}/auto-disable-logs`)}),"useDocumentArchive",0,()=>f(a.DocumentActionType.archive),"useDocumentBatchRetryIndex",0,()=>(0,t.useMutation)({mutationFn:e=>{let{datasetId:t,documentIds:s}=e;return(0,o.post)(`/datasets/${t}/retry`,{body:{document_ids:s}})}}),"useDocumentDelete",0,()=>(0,t.useMutation)({mutationFn:e=>{let{datasetId:t,documentIds:s,documentId:a}=e;return(0,o.del)(`/datasets/${t}/documents?${h(a||s)}`)}}),"useDocumentDetail",0,e=>{let{datasetId:t,documentId:a,params:n}=e;return(0,s.useQuery)({queryKey:[...g,"withoutMetaData",t,a,n],queryFn:()=>(0,o.get)(`/datasets/${t}/documents/${a}`,{params:n})})},"useDocumentDisable",0,()=>f(a.DocumentActionType.disable),"useDocumentDownload",0,()=>(0,t.useMutation)({mutationFn:e=>{let{datasetId:t,documentId:s}=e;if(!t||!s)throw Error("datasetId and documentId are required");return(0,d.fetchDocumentDownloadUrl)({datasetId:t,documentId:s})}}),"useDocumentDownloadZip",0,()=>(0,t.useMutation)({mutationFn:e=>{let{datasetId:t,documentIds:s}=e;if(!t||!s?.length)throw Error("datasetId and documentIds are required");return(0,d.downloadDocumentsZip)({datasetId:t,documentIds:s})}}),"useDocumentEnable",0,()=>f(a.DocumentActionType.enable),"useDocumentList",0,e=>{let{query:t,datasetId:a,refetchInterval:n}=e,{keyword:i,page:r,limit:l,sort:d,status:c}=t,m=u(c),x={keyword:i,page:r,limit:l};return d&&(x.sort=d),m&&"all"!==m&&(x.status=m),(0,s.useQuery)({queryKey:[...p,a,x],queryFn:()=>(0,o.get)(`/datasets/${a}/documents`,{params:x}),refetchInterval:n})},"useDocumentListKey",0,p,"useDocumentMetadata",0,e=>{let{datasetId:t,documentId:a,params:n}=e;return(0,s.useQuery)({queryKey:[...g,"onlyMetaData",t,a,n],queryFn:()=>(0,o.get)(`/datasets/${t}/documents/${a}`,{params:n})})},"useDocumentPause",0,()=>(0,t.useMutation)({mutationFn:e=>{let{datasetId:t,documentId:s}=e;if(!t||!s)throw Error("datasetId and documentId are required");return(0,d.pauseDocIndexing)({datasetId:t,documentId:s})}}),"useDocumentResume",0,()=>(0,t.useMutation)({mutationFn:e=>{let{datasetId:t,documentId:s}=e;if(!t||!s)throw Error("datasetId and documentId are required");return(0,d.resumeDocIndexing)({datasetId:t,documentId:s})}}),"useDocumentSummary",0,()=>(0,t.useMutation)({mutationFn:e=>{let{datasetId:t,documentIds:s,documentId:a}=e;return(0,o.post)(`/datasets/${t}/documents/generate-summary`,{body:{document_list:a?[a]:s}})}}),"useDocumentUnArchive",0,()=>f(a.DocumentActionType.unArchive),"useInvalidDisabledDocument",0,()=>(0,c.useInvalid)(x),"useInvalidDocumentDetail",0,()=>(0,c.useInvalid)(g),"useInvalidDocumentList",0,e=>(0,c.useInvalid)(e?[...p,e]:p),"useSyncDocument",0,()=>(0,t.useMutation)({mutationFn:e=>{let{datasetId:t,documentId:s}=e;return(0,o.get)(`/datasets/${t}/documents/${s}/notion/sync`)}}),"useSyncWebsite",0,()=>(0,t.useMutation)({mutationFn:e=>{let{datasetId:t,documentId:s}=e;return(0,o.get)(`/datasets/${t}/documents/${s}/website-sync`)}})],666010)},464747,e=>{"use strict";e.s(["transformDataSourceToTool",0,e=>({id:e.plugin_id,provider:e.provider,name:e.provider,author:e.declaration.identity.author,description:e.declaration.identity.description,icon:e.declaration.identity.icon,label:e.declaration.identity.label,type:e.declaration.provider_type,team_credentials:{},allow_delete:!0,is_team_authorization:e.is_authorized,is_authorized:e.is_authorized,labels:e.declaration.identity.tags||[],plugin_id:e.plugin_id,plugin_unique_identifier:e.plugin_unique_identifier,tools:e.declaration.datasources.map(e=>({name:e.identity.name,author:e.identity.author,label:e.identity.label,description:e.description,parameters:e.parameters,labels:[],output_schema:e.output_schema})),credentialsSchema:e.declaration.credentials_schema||[],meta:{version:""}})])},799889,e=>{"use strict";var t=e.i(563199),s=e.i(268255),a=e.i(634440),n=e.i(237363),i=e.i(137667),r=e.i(837699);e.i(152567);var l=e.i(408767),u=e.i(151094);let o=s.memo(e=>{let{onReset:s,resetDisabled:a,previewDisabled:n,onPreview:i}=e,{t:o}=(0,l.useTranslation)();return(0,t.jsxs)("div",{className:"flex items-center gap-x-1 px-4 py-2",children:[(0,t.jsx)("div",{className:"system-sm-semibold-uppercase grow text-text-secondary",children:o("addDocuments.stepTwo.chunkSettings",{ns:"datasetPipeline"})}),(0,t.jsx)(u.default,{variant:"ghost",disabled:a,onClick:s,children:o("operation.reset",{ns:"common"})}),(0,t.jsxs)(u.default,{variant:"secondary-accent",onClick:i,className:"gap-x-0.5",disabled:n,children:[(0,t.jsx)(r.RiSearchEyeLine,{className:"size-4"}),(0,t.jsx)("span",{className:"px-0.5",children:o("addDocuments.stepTwo.previewChunks",{ns:"datasetPipeline"})})]})]})});e.s(["default",0,e=>{let{initialData:r,configurations:l,schema:u,onSubmit:d,onPreview:c,ref:m,isRunning:p}=e,x=(0,a.useAppForm)({defaultValues:r,validators:{onSubmit:e=>{let{value:t}=e,s=u.safeParse(t);if(!s.success){let e=s.error.issues[0],t=`"${e.path.join(".")}" ${e.message}`;return i.default.notify({type:"error",message:t}),t}}},onSubmit:e=>{let{value:t}=e;d(t)}});(0,s.useImperativeHandle)(m,()=>({submit:()=>{x.handleSubmit()}}),[x]);let h=(0,s.useCallback)(()=>{x.reset()},[x]);return(0,t.jsxs)("form",{className:"flex w-full flex-col rounded-lg border border-components-panel-border bg-components-panel-bg",onSubmit:e=>{e.preventDefault(),e.stopPropagation(),x.handleSubmit()},children:[(0,t.jsx)(x.Subscribe,{selector:e=>e.isDirty,children:e=>(0,t.jsx)(o,{onReset:h,resetDisabled:!e,onPreview:c,previewDisabled:p})}),(0,t.jsx)("div",{className:"flex flex-col gap-3 border-t border-divider-subtle px-4 py-3",children:l.map((e,s)=>{let a=(0,n.default)({initialData:r,config:e});return(0,t.jsx)(a,{form:x},s)})})]})}],799889)},378755,e=>{"use strict";var t=e.i(563199),s=e.i(837699),a=e.i(268255);e.i(152567);var n=e.i(408767),i=e.i(83278),r=e.i(151094),l=e.i(465497),u=e.i(19348),o=e.i(413159),d=e.i(621379),c=e.i(654537),m=e.i(668701),p=e.i(895650),x=e.i(341797),h=e.i(471371),f=e.i(65904),g=e.i(681277),y=e.i(688200);let v=a.memo(e=>{let{dataSourceType:v,localFiles:b,onlineDocuments:j,websitePages:w,onlineDriveFiles:D,isIdle:C,isPending:N,estimateData:k,onPreview:_,handlePreviewFileChange:$,handlePreviewOnlineDocumentChange:S,handlePreviewWebsitePageChange:T,handlePreviewOnlineDriveFileChange:q}=e,{t:F}=(0,n.useTranslation)(),I=(0,o.useDatasetDetailContextWithSelector)(e=>e.dataset?.doc_form),[M,P]=(0,a.useState)(b[0]),[A,R]=(0,a.useState)(j[0]),[z,E]=(0,a.useState)(w[0]),[L,K]=(0,a.useState)(D[0]);return(0,t.jsxs)(f.default,{header:(0,t.jsx)(g.PreviewHeader,{title:F("stepTwo.preview",{ns:"datasetCreation"}),children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[v===c.DatasourceType.localFile&&(0,t.jsx)(p.default,{files:b,onChange:e=>{P(e),$(e)},value:M}),v===c.DatasourceType.onlineDocument&&(0,t.jsx)(p.default,{files:j.map(e=>({id:e.page_id,name:e.page_name,extension:"md"})),onChange:e=>{let t=j.find(t=>t.page_id===e.id);R(t),S(t)},value:{id:A?.page_id||"",name:A?.page_name||"",extension:"md"}}),v===c.DatasourceType.websiteCrawl&&(0,t.jsx)(p.default,{files:w.map(e=>({id:e.source_url,name:e.title,extension:"md"})),onChange:e=>{let t=w.find(t=>t.source_url===e.id);E(t),T(t)},value:{id:z?.source_url||"",name:z?.title||"",extension:"md"}}),v===c.DatasourceType.onlineDrive&&(0,t.jsx)(p.default,{files:D.map(e=>({id:e.id,name:e.name,extension:(0,y.getFileExtension)(L?.name)})),onChange:e=>{let t=D.find(t=>t.id===e.id);K(t),q(t)},value:{id:L?.id||"",name:L?.name||"",extension:(0,y.getFileExtension)(L?.name)}}),I!==d.ChunkingMode.qa&&(0,t.jsx)(i.default,{text:F("stepTwo.previewChunkCount",{ns:"datasetCreation",count:k?.total_segments||0})})]})}),className:"relative flex h-full w-full shrink-0",mainClassName:"space-y-6",children:[!N&&I===d.ChunkingMode.qa&&k?.qa_preview&&k?.qa_preview.map((e,s)=>(0,t.jsx)(m.ChunkContainer,{label:`Chunk-${s+1}`,characterCount:e.question.length+e.answer.length,children:(0,t.jsx)(m.QAPreview,{qa:e})},`${e.question}-${s}`)),!N&&I===d.ChunkingMode.text&&k?.preview&&k?.preview.map((e,s)=>(0,t.jsxs)(m.ChunkContainer,{label:`Chunk-${s+1}`,characterCount:e.content.length,children:[e.content,e.summary&&(0,t.jsx)(u.default,{summary:e.summary})]},`${e.content}-${s}`)),!N&&I===d.ChunkingMode.parentChild&&k?.preview&&k?.preview?.map((e,s)=>(0,t.jsx)(m.ChunkContainer,{label:`Chunk-${s+1}`,characterCount:e.content.length,children:(0,t.jsxs)(h.FormattedText,{children:[e.child_chunks.map((e,s)=>{let a=s+1;return(0,t.jsx)(x.PreviewSlice,{label:`C-${a}`,text:e,tooltip:`Child-chunk-${a} \xb7 ${e.length} Characters`,labelInnerClassName:"text-[10px] font-semibold align-bottom leading-7",dividerClassName:"leading-7"},e)}),e.summary&&(0,t.jsx)(u.default,{summary:e.summary})]})},`${e.content}-${s}`)),C&&(0,t.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 pb-4",children:[(0,t.jsx)(s.RiSearchEyeLine,{className:"size-10 text-text-empty-state-icon"}),(0,t.jsx)("p",{className:"text-sm text-text-tertiary",children:F("stepTwo.previewChunkTip",{ns:"datasetCreation"})}),(0,t.jsx)(r.default,{onClick:_,children:F("addDocuments.stepTwo.previewChunks",{ns:"datasetPipeline"})})]})}),N&&(0,t.jsx)("div",{className:"h-full w-full space-y-6 overflow-hidden",children:Array.from({length:10},(e,s)=>(0,t.jsxs)(l.SkeletonContainer,{children:[(0,t.jsxs)(l.SkeletonRow,{children:[(0,t.jsx)(l.SkeletonRectangle,{className:"w-20"}),(0,t.jsx)(l.SkeletonPoint,{}),(0,t.jsx)(l.SkeletonRectangle,{className:"w-24"})]}),(0,t.jsx)(l.SkeletonRectangle,{className:"w-full"}),(0,t.jsx)(l.SkeletonRectangle,{className:"w-full"}),(0,t.jsx)(l.SkeletonRectangle,{className:"w-[422px]"})]},s))})]})});e.s(["default",0,v])},439387,e=>{e.v(t=>Promise.all(["static/chunks/a5cb0b72d39b9b44.js","static/chunks/13d885d133d95b7f.js","static/chunks/71abe0078e8cf32b.css"].map(t=>e.l(t))).then(()=>t(3871)))},201201,e=>{e.v(t=>Promise.all(["static/chunks/33d89f7067007c66.js","static/chunks/c798d4f27fd7256a.js","static/chunks/093735e21ea40753.css"].map(t=>e.l(t))).then(()=>t(661305)))}]);