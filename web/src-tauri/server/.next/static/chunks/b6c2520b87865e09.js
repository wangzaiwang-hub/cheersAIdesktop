(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,766036,e=>{"use strict";var t=e.i(563199),s=e.i(837699),a=e.i(268255),n=e.i(935139);let i=a.memo(e=>{let{className:a,onClick:i}=e;return(0,t.jsx)("div",{className:(0,n.cn)(a,"cursor-pointer select-none rounded-md p-1 hover:bg-state-base-hover"),onClick:i,children:(0,t.jsx)(s.RiAddLine,{className:"h-4 w-4 text-text-tertiary"})})});e.s(["default",0,i])},359173,e=>{"use strict";var t=e.i(321124);e.s(["ChevronSelectorVertical",()=>t.default])},22461,116546,64997,e=>{"use strict";var t=e.i(563199),s=e.i(837699),a=e.i(124836),n=e.i(105845),i=e.i(268255);e.i(152567);var r=e.i(408767),l=e.i(192447),u=e.i(83278),o=e.i(766036);e.i(432024);var p=e.i(112757);e.i(39598);var c=e.i(678383),d=e.i(391185),g=e.i(421001),m=e.i(739255),y=e.i(120219),f=e.i(959752);e.i(845780);var h=e.i(720315),x=e.i(949250),v=e.i(417944),b=e.i(892081);e.i(668763);var k=e.i(359173);e.i(47690);var w=e.i(490774),P=e.i(935139);let j=i.memo(e=>{let{className:s,trigger:a,DropDownIcon:n=k.ChevronSelectorVertical,noLeft:r,options:l,allOptions:u,value:o,placeholder:p="",onChange:c,uppercase:d,triggerClassName:g,popupClassName:m,itemClassName:y,readonly:f,showChecked:h}=e,x=""===o||null==o,j=u?u.find(e=>e.value===o):l.find(e=>e.value===o),[F,{setFalse:I,toggle:_}]=(0,v.useBoolean)(!1),q=i.useRef(null);return(0,b.useClickAway)(()=>{I()},q),(0,t.jsxs)("div",{className:(0,P.cn)(!a&&!r&&"left-[-8px]","relative select-none",s),ref:q,children:[a?(0,t.jsx)("div",{onClick:_,className:(0,P.cn)(!f&&"cursor-pointer"),children:a}):(0,t.jsxs)("div",{onClick:_,className:(0,P.cn)(F&&"bg-state-base-hover","flex h-5 cursor-pointer items-center rounded-md pl-1 pr-0.5 text-xs font-semibold text-text-secondary hover:bg-state-base-hover"),children:[(0,t.jsx)("div",{className:(0,P.cn)("text-sm font-semibold",d&&"uppercase",x&&"text-text-tertiary",g),children:x?p:j?.label}),!f&&(0,t.jsx)(n,{className:"h-3 w-3 "})]}),F&&!f&&(0,t.jsx)("div",{className:(0,P.cn)("absolute top-[24px] z-10 w-[120px]  select-none rounded-lg border border-components-panel-border bg-components-panel-bg p-1 shadow-lg",m),children:l.map(e=>(0,t.jsxs)("div",{onClick:()=>{I(),c(e.value)},className:(0,P.cn)(y,d&&"uppercase","flex h-[30px] min-w-[44px] cursor-pointer items-center justify-between rounded-lg px-3 text-[13px] font-medium text-text-secondary hover:bg-state-base-hover"),children:[(0,t.jsx)("div",{children:e.label}),h&&e.value===o&&(0,t.jsx)(w.Check,{className:"h-4 w-4 text-text-primary"})]},e.value))})]})});e.s(["default",0,j],116546),e.i(603198);var F=e.i(697743);e.i(187243);var I=e.i(989425),_=e.i(390622);e.i(905691);var q=e.i(48498),M=e.i(157644),N=e.i(619507),S=e.i(249385),T=e.i(299951),C=e.i(225162);let K={},L=i.memo(e=>{let{schema:s=K,readonly:a,value:n,onChange:r,onOpenChange:l,isLoading:u}=e,o=(0,C.useLanguage)(),p=s.placeholder,c=(0,i.useCallback)(e=>{r(""===e.target.value?"":Number.parseFloat(e.target.value),I.VarType.constant)},[r]),d=(0,i.useCallback)(e=>{r(e=null===e?"":e,I.VarType.constant)},[r]);return(0,t.jsxs)(t.Fragment,{children:[(s.type===m.FormTypeEnum.select||s.type===m.FormTypeEnum.dynamicSelect)&&(0,t.jsx)(T.SimpleSelect,{wrapperClassName:"w-full !h-8",className:"flex items-center",disabled:a,defaultValue:n,items:s.options.map(e=>({value:e.value,name:e.label[o]||e.label.en_US})),onSelect:e=>d(e.value),placeholder:p?.[o]||p?.en_US,onOpenChange:l,isLoading:u}),s.type===m.FormTypeEnum.textNumber&&(0,t.jsx)("input",{type:"number",className:"h-8 w-full overflow-hidden rounded-lg bg-workflow-block-parma-bg p-2 text-[13px] font-normal leading-8 text-text-secondary placeholder:text-gray-400 focus:outline-none",value:n,onChange:c,readOnly:a,placeholder:p?.[o]||p?.en_US,min:s.min,max:s.max})]})});var $=e.i(963855),V=e.i(625285);let D=e=>{let{className:s}=e;return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"240",height:"2",viewBox:"0 0 240 2",fill:"none",className:s,children:[(0,t.jsx)("path",{d:"M0 1H240",stroke:"url(#paint0_linear_8619_59125)"}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"paint0_linear_8619_59125",x1:"240",y1:"9.99584",x2:"3.95539e-05",y2:"9.88094",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopColor:"white",stopOpacity:"0.01"}),(0,t.jsx)("stop",{offset:"0.9031",stopColor:"#101828",stopOpacity:"0.04"}),(0,t.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0.01"})]})})]})},R=e=>{let{className:s}=e;return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2",height:"132",viewBox:"0 0 2 132",fill:"none",className:s,children:[(0,t.jsx)("path",{d:"M1 0L1 132",stroke:"url(#paint0_linear_8619_59128)"}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"paint0_linear_8619_59128",x1:"-7.99584",y1:"132",x2:"-7.96108",y2:"6.4974e-07",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopColor:"white",stopOpacity:"0.01"}),(0,t.jsx)("stop",{offset:"0.877606",stopColor:"#101828",stopOpacity:"0.04"}),(0,t.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0.01"})]})})]})},E=e=>{let{title:s,description:a,icon:n}=e;return(0,t.jsxs)("div",{className:"flex w-[320px] flex-col items-start gap-2 rounded-[10px] bg-workflow-process-bg p-4",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 items-center justify-center gap-2 rounded-[10px]",children:(0,t.jsxs)("div",{className:"relative flex grow items-center justify-center gap-2 self-stretch rounded-[10px] border-[0.5px] border-components-card-border bg-components-card-bg p-1 shadow-lg",children:[n||(0,t.jsx)(c.Variable02,{className:"h-5 w-5 shrink-0 text-text-accent"}),(0,t.jsx)(R,{className:"absolute -right-[1px] top-1/2 -translate-y-1/4"}),(0,t.jsx)(R,{className:"absolute -left-[1px] top-1/2 -translate-y-1/4"}),(0,t.jsx)(D,{className:"absolute left-3/4 top-0 -translate-x-1/4 -translate-y-1/2"}),(0,t.jsx)(D,{className:"absolute left-3/4 top-full -translate-x-1/4 -translate-y-1/2"})]})}),(0,t.jsxs)("div",{className:"flex flex-col items-start gap-1 self-stretch",children:[(0,t.jsx)("div",{className:"system-sm-medium text-text-secondary",children:s}),a]})]})};e.s(["default",0,E],64997),e.i(275225);var Q=e.i(705405),A=e.i(139269);let z=i.memo(e=>{let{vars:s,popupFor:a,onChange:n,itemWidth:l,isSupportFileVar:u=!0,zIndex:o,preferSchemaType:p}=e,{t:c}=(0,r.useTranslation)(),d=(0,Q.useStore)(e=>e.pipelineId),g=(0,i.useMemo)(()=>!!d,[d]),m=(0,Q.useStore)(e=>e.setShowInputFieldPanel);return(0,t.jsx)("div",{className:"space-y-1 rounded-lg border border-components-panel-border bg-components-panel-bg p-1 shadow-lg",style:{width:l||228},children:(!s||0===s.length)&&a?"toAssigned"===a?(0,t.jsx)(E,{title:c("variableReference.noAvailableVars",{ns:"workflow"})||"",description:(0,t.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:c("variableReference.noVarsForOperation",{ns:"workflow"})})}):(0,t.jsx)(E,{title:c("variableReference.noAssignedVars",{ns:"workflow"})||"",description:(0,t.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:c("variableReference.assignedVarsDescription",{ns:"workflow"})})}):(0,t.jsx)(A.default,{searchBoxClassName:"mt-1",vars:s,onChange:n,itemWidth:l,isSupportFileVar:u,zIndex:o,showManageInputField:g,onManageInputField:()=>m?.(!0),preferSchemaType:p})})}),O=[],B=i.memo(e=>{let v,b,{nodeId:k,readonly:w,className:T,isShowNodeName:C=!0,value:K=O,onOpen:D=a.noop,onChange:R,isSupportConstantValue:E,defaultVarKindType:Q=I.VarType.constant,onlyLeafNodeVar:A,filterVar:B=()=>!0,isFilterFileVar:U,availableNodes:G,availableVars:W,isAddBtnTrigger:H,schema:X,valueTypePlaceHolder:J,isInTable:Y,onRemove:Z,typePlaceHolder:ee,isSupportFileVar:et=!0,placeholder:es,minWidth:ea,popupFor:en,zIndex:ei,currentTool:er,currentProvider:el,preferSchemaType:eu}=e,{t:eo}=(0,r.useTranslation)(),ep=(0,l.useStoreApi)(),ec=(0,l.useNodes)(),ed=(0,h.useIsChatMode)(),{getCurrentVariableType:eg}=(0,x.useWorkflowVariables)(),{availableVars:em,availableNodesWithParent:ey}=(0,N.default)(k,{onlyLeafNodeVar:A,passedInAvailableNodes:G,filterVar:B}),ef=(0,l.useReactFlow)(),eh=ey.find(e=>e.data.type===_.BlockEnum.Start),ex=ec.find(e=>e.id===k),ev=!!ex?.data?.isInIteration,eb=ev?ec.find(e=>e.id===ex?.parentId):null,ek=!!ex?.data?.isInLoop,ew=ek?ec.find(e=>e.id===ex?.parentId):null,eP=(0,i.useRef)(null),[ej,eF]=(0,i.useState)(227);(0,i.useEffect)(()=>{eP.current&&eF(eP.current.clientWidth)},[eP.current]);let[eI,e_]=(0,i.useState)(Q),eq=E&&eI===I.VarType.constant,eM=(0,i.useMemo)(()=>{let e=W||em;return U?(0,$.removeFileVars)(e):e},[W,em,U]),[eN,eS]=(0,i.useState)(!1);(0,i.useEffect)(()=>{D()},[eN]);let eT=!eq&&K.length>0,eC=(0,i.useMemo)(()=>!!ev&&!!(K[0]===ex?.parentId&&["item","index"].includes(K[1])),[ev,K,ex]),eK=(0,i.useMemo)(()=>!!ek&&!!(K[0]===ex?.parentId&&["item","index"].includes(K[1])),[ek,K,ex]),eL=eT?K[0]:"",e$=(0,i.useMemo)(()=>{if(!eT||eq)return null;if(eC)return eb?.data;if(eK)return ew?.data;if((0,$.isSystemVar)(K))return eh?.data;let e=(0,$.getNodeInfoById)(ey,eL)?.data;if(e)return{...e,id:eL}},[K,eT,eq,eC,eb,ey,eL,eh,eK,ew]),eV=K.length>2&&!(0,$.isRagVariableVar)(K),eD=(0,i.useMemo)(()=>{if(!eT)return"";let e=f.VAR_SHOW_NAME_MAP[K.join(".")];if(e)return e;let t=(0,$.isSystemVar)(K),s=Array.isArray(K)?K[K.length-1]:"";return`${t?"sys.":""}${s}`},[eT,K]),eR=[{label:"Variable",value:I.VarType.variable},{label:"Constant",value:I.VarType.constant}],eE=(0,i.useCallback)(e=>{e_(e),e===I.VarType.constant?R("",e):R([],e)},[R]),eQ=(0,i.useRef)(null),[eA,ez]=(0,i.useState)(!1),[eO,eB]=(0,i.useState)(0);(0,i.useEffect)(()=>{eO&&eQ.current&&(eQ.current.focus(),ez(!0))},[eO]);let eU=(0,i.useCallback)((e,t)=>{R((0,n.produce)(e,e=>{e[1]&&e[1].startsWith("sys.")&&(e.shift(),e[0].split(".").forEach((t,s)=>{e[s]=t}))}),eI,t),eS(!1)},[R,eI]),eG=(0,i.useCallback)(()=>{eI===I.VarType.constant?R("",eI):R([],eI)},[R,eI]),eW=(0,i.useCallback)(e=>{let t=ey.findIndex(t=>t.id===e),s=ey[t],{clientWidth:a,clientHeight:n}=document.getElementById("workflow-container"),{setViewport:i}=ef,{transform:r}=ep.getState(),l=r[2],u=s.position;i({x:(a-400-s.width*l)/2-u.x*l,y:(n-s.height*l)/2-u.y*l,zoom:r[2]})},[ey,ef,ep]),eH=eg({parentNode:ev?eb:ew,valueSelector:K,availableNodes:ey,isChatMode:ed,isConstant:!!eq,preferSchemaType:eu}),{isEnv:eX,isChatVar:eJ,isGlobal:eY,isRagVar:eZ,isValidVar:e0,isException:e1}=(0,i.useMemo)(()=>{let e=(0,$.isENV)(K),t=(0,$.isConversationVar)(K),s=(0,$.isGlobalVar)(K),a=(0,$.isRagVariableVar)(K),n=!!e$||e||t||s||a;return{isEnv:e,isChatVar:t,isGlobal:s,isRagVar:a,isValidVar:n,isException:(0,q.isExceptionVariable)(eD,e$?.type)}},[K,e$,eD]),e2=ej-56,[e5,e4,e3]=(v=((e$?.title||"")+(eD||"")+(eH||"")).length,b=15+Math.floor((e$?.title?.length||0)/v*e2),[b,-15+Math.floor((eD?.length||0)/v*e2),Math.floor((eH?.length||0)/v*e2)]),e9=E?"div":d.PortalToFollowElemTrigger,e6=E?d.PortalToFollowElemTrigger:"div",e7=(0,i.useMemo)(()=>e0&&eV?(0,t.jsx)(V.default,{nodeName:e$?.title,path:K.slice(1),varType:(0,$.varTypeToStructType)(eH),nodeType:e$?.type}):!e0&&eT?eo("errorMsg.invalidVariable",{ns:"workflow"}):null,[e0,eV,eT,eo,e$?.title,e$?.type,K,eH]),[e8,te]=(0,i.useState)(null),[tt,ts]=(0,i.useState)(!1),{mutateAsync:ta}=(0,M.useFetchDynamicOptions)(el?.plugin_id||"",el?.name||"",er?.name||"",X?.variable||"","tool"),tn=async()=>{if(X?.type===m.FormTypeEnum.dynamicSelect&&er&&el){ts(!0);try{let e=await ta();te(e?.options||[])}finally{ts(!1)}}};(0,i.useEffect)(()=>{tn()},[er,el,X]);let ti=(0,i.useMemo)(()=>{if(X?.type!==m.FormTypeEnum.dynamicSelect)return X;if(e8)return{...X,options:e8};if(tt&&K&&"string"==typeof K){let e=[{value:K,label:{en_US:K,zh_Hans:K},show_on:[]}];return{...X,options:e}}return{...X,options:[]}},[X,e8,tt,K]),tr=(0,i.useMemo)(()=>eX?"environment":eJ?"conversation":eY?"global":eK?"loop":eZ?"rag":"system",[eX,eJ,eY,eK,eZ]);return(0,t.jsx)("div",{className:(0,P.cn)(T,!w&&"cursor-pointer"),children:(0,t.jsxs)(d.PortalToFollowElem,{open:eN,onOpenChange:eS,placement:H?"bottom-end":"bottom-start",children:[(0,t.jsx)(e9,{onClick:()=>{w||(eq?eB(Date.now()):eS(!eN))},className:"group/picker-trigger-wrap relative !flex",children:(0,t.jsxs)(t.Fragment,{children:[H?(0,t.jsx)("div",{children:(0,t.jsx)(o.default,{onClick:a.noop})}):(0,t.jsxs)("div",{ref:E?null:eP,className:(0,P.cn)(eN||eA?"border-gray-300":"border-gray-100","group/wrap relative flex h-8 w-full items-center",!E&&"rounded-lg bg-components-input-bg-normal p-1",Y&&"border-none bg-transparent",w&&"bg-components-input-bg-disabled"),children:[E?(0,t.jsx)("div",{onClick:e=>{e.stopPropagation(),eS(!1),eB(Date.now())},className:"mr-1 flex h-full items-center space-x-1",children:(0,t.jsx)(j,{noLeft:!0,trigger:(0,t.jsxs)("div",{className:"radius-md flex h-8 items-center bg-components-input-bg-normal px-2",children:[(0,t.jsx)("div",{className:"system-sm-regular mr-1 text-components-input-text-filled",children:eR.find(e=>e.value===eI)?.label}),(0,t.jsx)(s.RiArrowDownSLine,{className:"h-4 w-4 text-text-quaternary"})]}),popupClassName:"top-8",readonly:w,value:eI,options:eR,onChange:eE,showChecked:!0})}):!eT&&(0,t.jsx)("div",{className:"ml-1.5 mr-1",children:(0,t.jsx)(c.Variable02,{className:`h-4 w-4 ${w?"text-components-input-text-disabled":"text-components-input-text-placeholder"}`})}),eq?(0,t.jsx)(L,{value:K,onChange:R,schema:ti,readonly:w,isLoading:tt}):(0,t.jsx)(e6,{onClick:()=>{w||(eq?eB(Date.now()):eS(!eN))},className:"h-full grow",children:(0,t.jsx)("div",{ref:E?eP:null,className:(0,P.cn)("h-full",E&&"flex items-center rounded-lg bg-components-panel-bg py-1 pl-1"),children:(0,t.jsx)(g.default,{noDecoration:eV,popupContent:e7,children:(0,t.jsx)("div",{className:(0,P.cn)("h-full items-center rounded-[5px] px-1.5",eT?"inline-flex bg-components-badge-white-to-dark":"flex"),children:eT?(0,t.jsxs)(t.Fragment,{children:[C&&!eX&&!eJ&&!eY&&!eZ&&(0,t.jsxs)("div",{className:"flex items-center",onClick:e=>{(e.metaKey||e.ctrlKey)&&(e.stopPropagation(),eW(e$?.id))},children:[(0,t.jsx)("div",{className:"h-3 px-[1px]",children:e$?.type&&(0,t.jsx)(y.VarBlockIcon,{className:"!text-text-primary",type:e$.type})}),(0,t.jsx)("div",{className:"mx-0.5 truncate text-xs font-medium text-text-secondary",title:e$?.title,style:{maxWidth:e5},children:e$?.title}),(0,t.jsx)(p.Line3,{className:"mr-0.5"})]}),eV&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(s.RiMoreLine,{className:"h-3 w-3 text-text-secondary"}),(0,t.jsx)(p.Line3,{className:"mr-0.5 text-divider-deep"})]}),(0,t.jsxs)("div",{className:"flex items-center text-text-accent",children:[tt&&(0,t.jsx)(s.RiLoader4Line,{className:"h-3.5 w-3.5 animate-spin text-text-secondary"}),(0,t.jsx)(F.VariableIconWithColor,{variables:K,variableCategory:tr,isExceptionVariable:e1}),(0,t.jsx)("div",{className:(0,P.cn)("ml-0.5 truncate text-xs font-medium",eX&&"!text-text-secondary",eJ&&"text-util-colors-teal-teal-700",e1&&"text-text-warning",eY&&"text-util-colors-orange-orange-600"),title:eD,style:{maxWidth:e4},children:eD})]}),(0,t.jsx)("div",{className:"system-xs-regular ml-0.5 truncate text-center capitalize text-text-tertiary",title:eH,style:{maxWidth:e3},children:eH}),!e0&&(0,t.jsx)(s.RiErrorWarningFill,{className:"ml-0.5 h-3 w-3 text-text-destructive"})]}):(0,t.jsx)("div",{className:`overflow-hidden ${w?"text-components-input-text-disabled":"text-components-input-text-placeholder"} system-sm-regular text-ellipsis`,children:tt?(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(s.RiLoader4Line,{className:"mr-1 h-3.5 w-3.5 animate-spin text-text-secondary"}),(0,t.jsx)("span",{children:es??eo("common.setVarValuePlaceholder",{ns:"workflow"})})]}):es??eo("common.setVarValuePlaceholder",{ns:"workflow"})})})})})}),eT&&!w&&!Y&&(0,t.jsx)("div",{className:"group invisible absolute right-1 top-[50%] h-5 translate-y-[-50%] cursor-pointer rounded-md p-1 hover:bg-state-base-hover group-hover/wrap:visible",onClick:eG,children:(0,t.jsx)(s.RiCloseLine,{className:"h-3.5 w-3.5 text-text-tertiary group-hover:text-text-secondary"})}),!eT&&J&&(0,t.jsx)(u.default,{className:" absolute right-1 top-[50%] translate-y-[-50%] capitalize",text:J,uppercase:!1})]}),!w&&Y&&(0,t.jsx)(S.default,{className:"absolute right-1 top-0.5 hidden group-hover/picker-trigger-wrap:block",onClick:()=>Z?.()}),!eT&&ee&&(0,t.jsx)(u.default,{className:"absolute right-2 top-1.5",text:ee,uppercase:!1})]})}),(0,t.jsx)(d.PortalToFollowElemContent,{style:{zIndex:ei||100},className:"mt-1",children:!eq&&(0,t.jsx)(z,{vars:eM,popupFor:en,onChange:eU,itemWidth:H?260:ea||ej,isSupportFileVar:et,zIndex:ei,preferSchemaType:eu})})]})})});e.s(["default",0,B],22461)},475390,e=>{"use strict";var t=e.i(875037),s=e.i(562572);e.i(214309);var a=e.i(654537),n=e.i(367916),i=e.i(722384);let r="pipeline",l=[r,"template-list"],u=[r,"published-pipeline"];e.s(["publishedPipelineInfoQueryKeyPrefix",0,u,"useCheckPipelineDependencies",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[r,"check-dependencies"],mutationFn:e=>(0,n.get)(`/rag/pipelines/imports/${e}/check-dependencies`),...e})},"useConvertDatasetToPipeline",0,()=>(0,t.useMutation)({mutationKey:[r,"convert-dataset-to-pipeline"],mutationFn:e=>(0,n.post)(`/rag/pipelines/transform/datasets/${e}`)}),"useDataSourceList",0,(e,t)=>(0,s.useQuery)({enabled:e,queryKey:[r,"datasource"],staleTime:0,queryFn:async()=>{let e=await (0,n.get)("/rag/pipelines/datasource-plugins");return t?.(e),e},retry:!1}),"useDatasourceSingleRun",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[r,"datasource-node-single-run"],mutationFn:e=>{let{pipeline_id:t,...s}=e;return(0,n.post)(`/rag/pipelines/${t}/workflows/draft/datasource/variables-inspect`,{body:s})},...e})},"useDeleteTemplate",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[r,"template-delete"],mutationFn:e=>(0,n.del)(`/rag/pipeline/customized/templates/${e}`),...e})},"useDraftPipelinePreProcessingParams",0,function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{pipeline_id:a,node_id:i}=e;return(0,s.useQuery)({queryKey:[r,"draft-pipeline-pre-processing-params",a,i],queryFn:()=>(0,n.get)(`/rag/pipelines/${a}/workflows/draft/pre-processing/parameters`,{params:{node_id:i}}),staleTime:0,enabled:t})},"useDraftPipelineProcessingParams",0,function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{pipeline_id:a,node_id:i}=e;return(0,s.useQuery)({queryKey:[r,"draft-pipeline-processing-params",a,i],queryFn:()=>(0,n.get)(`/rag/pipelines/${a}/workflows/draft/processing/parameters`,{params:{node_id:i}}),staleTime:0,enabled:t})},"useExportPipelineDSL",0,()=>(0,t.useMutation)({mutationKey:[r,"export-pipeline-dsl"],mutationFn:e=>{let{pipelineId:t,include:s=!1}=e;return(0,n.get)(`/rag/pipelines/${t}/exports?include_secret=${s}`)}}),"useExportTemplateDSL",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[r,"template-dsl-export"],mutationFn:e=>(0,n.post)(`/rag/pipeline/customized/templates/${e}`),...e})},"useImportPipelineDSL",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[r,"dsl-import"],mutationFn:e=>(0,n.post)("/rag/pipelines/imports",{body:e}),...e})},"useImportPipelineDSLConfirm",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[r,"dsl-import-confirm"],mutationFn:e=>(0,n.post)(`/rag/pipelines/imports/${e}/confirm`),...e})},"useInvalidCustomizedTemplateList",0,()=>(0,i.useInvalid)([...l,"customized"]),"useInvalidDataSourceList",0,()=>(0,i.useInvalid)([r,"datasource"]),"usePipelineExecutionLog",0,e=>{let{dataset_id:t,document_id:a}=e;return(0,s.useQuery)({queryKey:[r,"pipeline-execution-log",t,a],queryFn:()=>(0,n.get)(`/datasets/${t}/documents/${a}/pipeline-execution-log`),staleTime:0})},"usePipelineTemplateById",0,(e,t)=>{let{template_id:a,type:i}=e;return(0,s.useQuery)({queryKey:[r,"template",i,a],queryFn:()=>(0,n.get)(`/rag/pipeline/templates/${a}`,{params:{type:i}}),enabled:t,staleTime:0})},"usePipelineTemplateList",0,function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return(0,s.useQuery)({queryKey:[...l,e],queryFn:()=>(0,n.get)("/rag/pipeline/templates",{params:e}),enabled:t})},"usePreviewOnlineDocument",0,()=>(0,t.useMutation)({mutationKey:[r,"preview-online-document"],mutationFn:e=>{let{pipelineId:t,datasourceNodeId:s,workspaceID:i,pageID:r,pageType:l,credentialId:u}=e;return(0,n.post)(`/rag/pipelines/${t}/workflows/published/datasource/nodes/${s}/preview`,{body:{datasource_type:a.DatasourceType.onlineDocument,credential_id:u,inputs:{workspace_id:i,page_id:r,type:l}}})}}),"usePublishAsCustomizedPipeline",0,()=>(0,t.useMutation)({mutationKey:[r,"publish-as-customized-pipeline"],mutationFn:e=>{let{pipelineId:t,name:s,icon_info:a,description:i}=e;return(0,n.post)(`/rag/pipelines/${t}/customized/publish`,{body:{name:s,icon_info:a,description:i}})}}),"usePublishedPipelineInfo",0,e=>(0,s.useQuery)({queryKey:[...u,e],queryFn:()=>(0,n.get)(`/rag/pipelines/${e}/workflows/publish`),enabled:!!e}),"usePublishedPipelinePreProcessingParams",0,function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{pipeline_id:a,node_id:i}=e;return(0,s.useQuery)({queryKey:[r,"published-pipeline-pre-processing-params",a,i],queryFn:()=>(0,n.get)(`/rag/pipelines/${a}/workflows/published/pre-processing/parameters`,{params:{node_id:i}}),staleTime:0,enabled:t})},"usePublishedPipelineProcessingParams",0,e=>{let{pipeline_id:t,node_id:a}=e;return(0,s.useQuery)({queryKey:[r,"published-pipeline-processing-params",t,a],queryFn:()=>(0,n.get)(`/rag/pipelines/${t}/workflows/published/processing/parameters`,{params:{node_id:a}}),staleTime:0})},"useRunPublishedPipeline",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[r,"run-published-pipeline"],mutationFn:e=>{let{pipeline_id:t,is_preview:s,...a}=e;return(0,n.post)(`/rag/pipelines/${t}/workflows/published/run`,{body:{...a,is_preview:s,response_mode:"blocking"}})},...e})},"useUpdateTemplateInfo",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[r,"template-update"],mutationFn:e=>{let{template_id:t,...s}=e;return(0,n.patch)(`/rag/pipeline/customized/templates/${t}`,{body:s})},...e})}])},255202,e=>{"use strict";var t=e.i(875037),s=e.i(562572),a=e.i(367916),n=e.i(722384);let i="data-source-auth";e.s(["useGetDataSourceAuth",0,e=>{let{pluginId:t,provider:n}=e;return(0,s.useQuery)({queryKey:[i,"specific-data-source",t,n],queryFn:()=>(0,a.get)(`/auth/plugin/datasource/${t}/${n}`),retry:0})},"useGetDataSourceListAuth",0,()=>(0,s.useQuery)({queryKey:[i,"list"],queryFn:()=>(0,a.get)("/auth/plugin/datasource/list"),retry:0}),"useGetDataSourceOAuthUrl",0,e=>(0,t.useMutation)({mutationKey:[i,"oauth-url",e],mutationFn:t=>(0,a.get)(`/oauth/plugin/${e}/datasource/get-authorization-url?credential_id=${t}`)}),"useGetDefaultDataSourceListAuth",0,()=>(0,s.useQuery)({queryKey:[i,"default-list"],queryFn:()=>(0,a.get)("/auth/plugin/datasource/default-list"),retry:0}),"useInvalidDataSourceAuth",0,e=>{let{pluginId:t,provider:s}=e;return(0,n.useInvalid)([i,"specific-data-source",t,s])},"useInvalidDataSourceListAuth",0,()=>(0,n.useInvalid)([i,"list"]),"useInvalidDefaultDataSourceListAuth",0,()=>(0,n.useInvalid)([i,"default-list"])])},632717,e=>{"use strict";e.s(["default",()=>c]);var t=e.i(739255),s=e.i(225162),a=e.i(56971),n=e.i(255202),i=e.i(475390),r=e.i(157644),l=e.i(243922),u=e.i(154033),o=e.i(819114),p=e.i(944911);let c=()=>{let e=(0,r.useInvalidateInstalledPluginList)(),{mutate:c}=(0,s.useModelList)(t.ModelTypeEnum.textGeneration),{mutate:d}=(0,s.useModelList)(t.ModelTypeEnum.textEmbedding),{mutate:g}=(0,s.useModelList)(t.ModelTypeEnum.rerank),{refreshModelProviders:m}=(0,a.useProviderContext)(),y=(0,u.useInvalidateAllToolProviders)(),f=(0,u.useInvalidateAllBuiltInTools)(),h=(0,i.useInvalidDataSourceList)(),x=(0,n.useInvalidDataSourceListAuth)(),v=(0,l.useInvalidateStrategyProviders)(),b=(0,o.useInvalidateAllTriggerPlugins)(),k=(0,u.useInvalidateRAGRecommendedPlugins)();return{refreshPluginList:(t,s)=>{e(),(t&&p.PluginCategoryEnum.tool.includes(t.category)||s)&&(y(),f(),k("tool")),(t&&p.PluginCategoryEnum.trigger.includes(t.category)||s)&&b(),(t&&p.PluginCategoryEnum.datasource.includes(t.category)||s)&&(h(),x()),(t&&p.PluginCategoryEnum.model.includes(t.category)||s)&&(m(),c(),d(),g()),(t&&p.PluginCategoryEnum.agent.includes(t.category)||s)&&v()}}}},95085,e=>{"use strict";e.s(["default",()=>c,"useCanInstallPluginFromMarketplace",()=>p]);var t=e.i(268255);e.i(152567);var s=e.i(408767),a=e.i(711536),n=e.i(494268),i=e.i(157644),r=e.i(137667),l=e.i(944911);let u=(e,t)=>!!e&&e!==l.PermissionType.noOne&&(e===l.PermissionType.everyone||t),o=()=>{let{t:e}=(0,s.useTranslation)(),{isCurrentWorkspaceManager:t,isCurrentWorkspaceOwner:n}=(0,a.useAppContext)(),{data:l}=(0,i.useReferenceSettings)(),{permission:o}=l||{},p=(0,i.useInvalidateReferenceSettings)(),{mutate:c,isPending:d}=(0,i.useMutationReferenceSettings)({onSuccess:()=>{p(),r.default.notify({type:"success",message:e("api.actionSuccess",{ns:"common"})})}}),g=t||n;return{referenceSetting:l,setReferenceSettings:c,canManagement:u(o?.install_permission,g),canDebugger:u(o?.debug_permission,g),canSetPermissions:g,isUpdatePending:d}},p=()=>{let{enable_marketplace:e}=(0,n.useGlobalPublicStore)(e=>e.systemFeatures),{canManagement:s}=o();return{canInstallPluginFromMarketplace:(0,t.useMemo)(()=>e&&s,[e,s])}},c=o},887460,e=>{"use strict";var t=e.i(367916);let s=async(e,s)=>{let a=new FormData;return a.append(s?"bundle":"pkg",e),(0,t.upload)({xhr:new XMLHttpRequest,data:a},!1,`/workspaces/current/plugin/upload/${s?"bundle":"pkg"}`)},a=async e=>(0,t.post)("/workspaces/current/plugin/upgrade/marketplace",{body:e}),n=async(e,s,a,n,i)=>(0,t.post)("/workspaces/current/plugin/upgrade/github",{body:{repo:e,version:s,package:a,original_plugin_unique_identifier:n,new_plugin_unique_identifier:i}}),i=async(e,s,a)=>(0,t.post)("/workspaces/current/plugin/upload/github",{body:{repo:e,version:s,package:a}}),r=async e=>(0,t.getMarketplace)(`/plugins/identifier?unique_identifier=${e}`),l=async e=>{let{org:s,name:a,version:n}=e;return(0,t.getMarketplace)(`/bundles/${s}/${a}/${n}`)},u=async e=>{let{org:s,name:a}=e;return(0,t.getMarketplace)(`/plugins/${s}/${a}`)},o=async e=>(0,t.get)(`/workspaces/current/plugin/tasks/${e}`),p=async e=>(0,t.post)("/workspaces/current/plugin/uninstall",{body:{plugin_installation_id:e}});e.s(["checkTaskStatus",0,o,"fetchBundleInfoFromMarketPlace",0,l,"fetchManifestFromMarketPlace",0,r,"fetchPluginInfoFromMarketPlace",0,u,"uninstallPlugin",0,p,"updateFromGitHub",0,n,"updateFromMarketPlace",0,a,"uploadFile",0,s,"uploadGitHub",0,i])},157644,e=>{"use strict";e.s(["useCheckInstalled",()=>h,"useDebugKey",()=>C,"useDownloadPlugin",()=>B,"useFeaturedToolsRecommendations",()=>b,"useFeaturedTriggersRecommendations",()=>k,"useFetchDynamicOptions",()=>H,"useFetchPluginsInMarketPlaceByIds",()=>R,"useFetchPluginsInMarketPlaceByInfo",()=>E,"useInstallOrUpdate",()=>T,"useInstallPackageFromGitHub",()=>N,"useInstallPackageFromLocal",()=>M,"useInstallPackageFromMarketPlace",()=>F,"useInstalledLatestVersion",()=>P,"useInstalledPluginList",()=>w,"useInvalidateInstalledPluginList",()=>j,"useInvalidateReferenceSettings",()=>$,"useModelInList",()=>G,"useMutationCheckDependencies",()=>U,"useMutationClearTaskPlugin",()=>z,"useMutationReferenceSettings",()=>V,"usePluginDeclarationFromMarketPlace",()=>_,"usePluginInfo",()=>W,"usePluginManifestInfo",()=>O,"usePluginReadme",()=>X,"usePluginReadmeAsset",()=>J,"usePluginTaskList",()=>A,"useReferenceSettings",()=>L,"useRemoveAutoUpgrade",()=>D,"useUpdatePackageFromMarketPlace",()=>I,"useUploadGitHub",()=>S,"useVersionListOfPlugin",()=>q]);var t=e.i(236063),s=e.i(875037),a=e.i(562572),n=e.i(214309),i=e.i(361126),r=e.i(268255),l=e.i(632717),u=e.i(108185),o=e.i(95085),p=e.i(944911),c=e.i(81828),d=e.i(887460),g=e.i(367916),m=e.i(154033);let y="plugins",f=[y,"installedPluginList"],h=e=>{let{pluginIds:t,enabled:s}=e;return(0,a.useQuery)({queryKey:[y,"checkInstalled",t],queryFn:()=>(0,g.post)("/workspaces/current/plugin/list/installations/ids",{body:{plugin_ids:t}}),enabled:s,staleTime:0})},x=[y,"recommendedMarketplacePlugins"],v=function(){let{collection:e="__recommended-plugins-tools",enabled:t=!0,limit:s=15}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.useQuery)({queryKey:[...x,e,s],queryFn:async()=>(await (0,g.postMarketplace)(`/collections/${e}/plugins`,{body:{limit:s}})).data.plugins.map(e=>(0,u.getFormattedPlugin)(e)),enabled:t,staleTime:6e4})},b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,{data:s=[],isLoading:a}=v({collection:"__recommended-plugins-tools",enabled:e,limit:t});return{plugins:s,isLoading:a}},k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,{data:s=[],isLoading:a}=v({collection:"__recommended-plugins-triggers",enabled:e,limit:t});return{plugins:s,isLoading:a}},w=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=async e=>{let{pageParam:t=1}=e;return await (0,g.get)(`/workspaces/current/plugin/list?page=${t}&page_size=${s}`)},{data:n,error:i,fetchNextPage:r,hasNextPage:l,isFetchingNextPage:u,isLoading:o,isSuccess:p}=(0,t.useInfiniteQuery)({enabled:!e,queryKey:f,queryFn:a,getNextPageParam:(e,t)=>{let a=e.total,n=t.length;if(!(n*s>=a))return n+1},initialPageParam:1}),c=n?.pages.flatMap(e=>e.plugins)??[],d=n?.pages[0].total??0;return{data:e?void 0:{plugins:c,total:d},isLastPage:!l,loadNextPage:()=>{r()},isLoading:o,isFetching:u,error:i,isSuccess:p}},P=e=>(0,a.useQuery)({queryKey:[y,"installedLatestVersion",e],queryFn:()=>(0,g.post)("/workspaces/current/plugin/list/latest-versions",{body:{plugin_ids:e}}),enabled:!!e.length,initialData:e.length?void 0:{versions:{}}}),j=()=>{let e=(0,n.useQueryClient)(),t=(0,m.useInvalidateAllBuiltInTools)();return()=>{e.invalidateQueries({queryKey:f}),t()}},F=e=>(0,s.useMutation)({...e,mutationFn:e=>(0,g.post)("/workspaces/current/plugin/install/marketplace",{body:{plugin_unique_identifiers:[e]}})}),I=e=>(0,s.useMutation)({...e,mutationFn:e=>(0,g.post)("/workspaces/current/plugin/upgrade/marketplace",{body:e})}),_=e=>(0,a.useQuery)({queryKey:[y,"pluginDeclaration",e],queryFn:()=>(0,g.get)("/workspaces/current/plugin/marketplace/pkg",{params:{plugin_unique_identifier:e}}),enabled:!!e}),q=e=>(0,a.useQuery)({enabled:!!e,queryKey:[y,"versions",e],queryFn:()=>(0,g.getMarketplace)(`/plugins/${e}/versions`,{params:{page:1,page_size:100}})}),M=()=>(0,s.useMutation)({mutationFn:e=>(0,g.post)("/workspaces/current/plugin/install/pkg",{body:{plugin_unique_identifiers:[e]}})}),N=()=>(0,s.useMutation)({mutationFn:e=>{let{repoUrl:t,selectedVersion:s,selectedPackage:a,uniqueIdentifier:n}=e;return(0,g.post)("/workspaces/current/plugin/install/github",{body:{repo:t,version:s,package:a,plugin_unique_identifier:n}})}}),S=e=>(0,a.useQuery)({queryKey:[y,"uploadGitHub",e],queryFn:()=>(0,g.post)("/workspaces/current/plugin/upload/github",{body:e}),retry:0}),T=e=>{let{onSuccess:t}=e,{mutateAsync:a}=I();return(0,s.useMutation)({mutationFn:e=>{let{payload:t,plugin:s,installedInfo:n}=e;return Promise.all(t.map(async(e,t)=>{try{let i=n[`${s[t]?.org||s[t]?.author}/${s[t]?.name}`],r=!!i,l="",u="",o=!1;if("github"===e.type){if(!(l=e.value.github_plugin_unique_identifier)){let{unique_identifier:t}=await (0,g.post)("/workspaces/current/plugin/upload/github",{body:{repo:e.value.repo,version:e.value.release||e.value.version,package:e.value.packages||e.value.package}});if((l=e.value.github_plugin_unique_identifier||t)===i?.uniqueIdentifier)return{status:p.TaskStatus.success,taskId:"",uniqueIdentifier:""}}if(!r){let{task_id:t,all_installed:s}=await (0,g.post)("/workspaces/current/plugin/install/github",{body:{repo:e.value.repo,version:e.value.release||e.value.version,package:e.value.packages||e.value.package,plugin_unique_identifier:l}});u=t,o=s}}if("marketplace"===e.type){if((l=e.value.marketplace_plugin_unique_identifier||s[t]?.plugin_id)===i?.uniqueIdentifier)return{status:p.TaskStatus.success,taskId:"",uniqueIdentifier:""};if(!r){let{task_id:e,all_installed:t}=await (0,g.post)("/workspaces/current/plugin/install/marketplace",{body:{plugin_unique_identifiers:[l]}});u=e,o=t}}if("package"===e.type){if((l=e.value.unique_identifier)===i?.uniqueIdentifier)return{status:p.TaskStatus.success,taskId:"",uniqueIdentifier:""};if(!r){let{task_id:e,all_installed:t}=await (0,g.post)("/workspaces/current/plugin/install/pkg",{body:{plugin_unique_identifiers:[l]}});u=e,o=t}}if(r)if("package"===e.type){await (0,d.uninstallPlugin)(i.installedId);let{task_id:e,all_installed:t}=await (0,g.post)("/workspaces/current/plugin/install/pkg",{body:{plugin_unique_identifiers:[l]}});u=e,o=t}else{let{task_id:e,all_installed:t}=await a({original_plugin_unique_identifier:i?.uniqueIdentifier,new_plugin_unique_identifier:l});u=e,o=t}if(o)return{status:p.TaskStatus.success,taskId:"",uniqueIdentifier:""};return{status:p.TaskStatus.running,taskId:u,uniqueIdentifier:l}}catch(e){return Promise.resolve({status:p.TaskStatus.failed,taskId:"",uniqueIdentifier:""})}}))},onSuccess:t})},C=()=>(0,a.useQuery)({queryKey:[y,"debugKey"],queryFn:()=>(0,g.get)("/workspaces/current/plugin/debugging-key")}),K=[y,"referenceSettings"],L=()=>(0,a.useQuery)({queryKey:K,queryFn:()=>(0,g.get)("/workspaces/current/plugin/preferences/fetch")}),$=()=>{let e=(0,n.useQueryClient)();return()=>{e.invalidateQueries({queryKey:K})}},V=e=>{let{onSuccess:t}=e;return(0,s.useMutation)({mutationFn:e=>(0,g.post)("/workspaces/current/plugin/preferences/change",{body:e}),onSuccess:t})},D=()=>(0,s.useMutation)({mutationFn:e=>(0,g.post)("/workspaces/current/plugin/preferences/autoupgrade/exclude",{body:e})}),R=(e,t)=>(0,a.useQuery)({...t,queryKey:[y,"fetchPluginsInMarketPlaceByIds",e],queryFn:()=>(0,g.postMarketplace)("/plugins/identifier/batch",{body:{unique_identifiers:e}}),enabled:e?.filter(e=>!!e).length>0,retry:0}),E=e=>(0,a.useQuery)({queryKey:[y,"fetchPluginsInMarketPlaceByInfo",e],queryFn:()=>(0,g.postMarketplace)("/plugins/versions/batch",{body:{plugin_tuples:e.map(e=>({org:e.organization,name:e.plugin,version:e.version}))}}),enabled:e?.filter(e=>!!e).length>0,retry:0}),Q=[y,"pluginTaskList"],A=e=>{let[t,s]=(0,r.useState)(!1),{canManagement:n}=(0,o.default)(),{refreshPluginList:u}=(0,l.default)(),{data:c,isFetched:d,isRefetching:m,refetch:y,...f}=(0,a.useQuery)({enabled:n,queryKey:Q,queryFn:()=>(0,g.get)("/workspaces/current/plugin/tasks?page=1&page_size=100"),refetchInterval:e=>{let t=e.state.data;return!t?.tasks.every(e=>e.status===p.TaskStatus.success||e.status===p.TaskStatus.failed)&&5e3}});(0,r.useEffect)(()=>{if(!t||m)return;let s=(0,i.cloneDeep)(c),a=s?.tasks.every(e=>e.status===p.TaskStatus.success||e.status===p.TaskStatus.failed),n=s?.tasks.every(e=>e.status===p.TaskStatus.failed);a&&s?.tasks.length&&!n&&u(e?{category:e}:void 0,!e)},[m]),(0,r.useEffect)(()=>{s(!0)},[]);let h=(0,r.useCallback)(()=>{y()},[y]);return{data:c,pluginTasks:c?.tasks||[],isFetched:d,handleRefetch:h,...f}},z=()=>(0,s.useMutation)({mutationFn:e=>{let{taskId:t,pluginId:s}=e,a=encodeURIComponent(s);return(0,g.post)(`/workspaces/current/plugin/tasks/${t}/delete/${a}`)}}),O=e=>(0,a.useQuery)({enabled:!!e,queryKey:[[y,"manifest",e]],queryFn:()=>(0,g.getMarketplace)(`/plugins/${e}`),retry:0}),B=(e,t)=>(0,a.useQuery)({queryKey:[y,"downloadPlugin",e],queryFn:()=>(0,g.getMarketplace)(`/plugins/${e.organization}/${e.pluginName}/${e.version}/download`),enabled:t,retry:0}),U=()=>(0,s.useMutation)({mutationFn:e=>(0,g.get)(`/apps/imports/${e}/check-dependencies`)}),G=(e,t)=>{let s=e?.provider;return(0,a.useQuery)({queryKey:["modelInList",s,t],queryFn:async()=>{if(!t||!s)return!1;try{let e=await (0,c.fetchModelProviderModelList)(`/workspaces/current/model-providers/${s}/models`);return!!t&&!!e.data.find(e=>e.model===t)}catch{return!1}},enabled:!!t&&!!s})},W=e=>(0,a.useQuery)({queryKey:["pluginInfo",e],queryFn:async()=>{if(!e)return null;let t=e.split("/"),s=t[0],a=t[1];try{let e=await (0,d.fetchPluginInfoFromMarketPlace)({org:s,name:a});return e.data.plugin.category===p.PluginCategoryEnum.model?e.data.plugin:null}catch{return null}},enabled:!!e}),H=(e,t,a,n,i,r)=>(0,s.useMutation)({mutationFn:()=>(0,g.get)("/workspaces/current/plugin/parameters/dynamic-options",{params:{plugin_id:e,provider:t,action:a,parameter:n,provider_type:i,...r}})}),X=e=>{let{plugin_unique_identifier:t,language:s}=e;return(0,a.useQuery)({queryKey:["pluginReadme",t,s],queryFn:()=>(0,g.get)("/workspaces/current/plugin/readme",{params:{plugin_unique_identifier:t,language:s}},{silent:!0}),enabled:!!t,retry:0})},J=e=>{let{file_name:t,plugin_unique_identifier:s}=e,n=t?.replace(/(^\.\/_assets\/|^_assets\/)/,"");return(0,a.useQuery)({queryKey:["pluginReadmeAsset",s,n],queryFn:()=>(0,g.get)("/workspaces/current/plugin/asset",{params:{plugin_unique_identifier:s,file_name:n}},{silent:!0}),enabled:!!s&&!!t&&/(^\.\/_assets|^_assets)/.test(t)})}},112757,e=>{"use strict";var t=e.i(707844);e.s(["Line3",()=>t.default])},597280,e=>{"use strict";var t=e.i(563199),s=e.i(294237),a=e.i(268255),n=e.i(421001),i=e.i(935139);let r=(0,s.cva)([],{variants:{align:{left:"justify-start",center:"justify-center",right:"justify-end"}},defaultVariants:{align:"center"}}),l=a.memo(e=>{let{className:s,title:l,onSelect:u,selected:o,disabled:p,align:c="center",tooltip:d}=e,g=(0,a.useCallback)(()=>{o||p||u()},[u,o,p]);return(0,t.jsxs)("div",{className:(0,i.cn)("system-sm-regular flex h-8 cursor-default items-center rounded-md border border-components-option-card-option-border bg-components-option-card-option-bg px-2 text-text-secondary",!o&&!p&&"cursor-pointer hover:border-components-option-card-option-border-hover hover:bg-components-option-card-option-bg-hover hover:shadow-xs",o&&"system-sm-medium border-[1.5px] border-components-option-card-option-selected-border bg-components-option-card-option-selected-bg shadow-xs",p&&"text-text-disabled",r({align:c}),s),onClick:g,children:[(0,t.jsx)("span",{children:l}),d&&(0,t.jsx)(n.default,{popupContent:(0,t.jsx)("div",{className:"w-[240px]",children:d})})]})});e.s(["default",0,l])},249385,e=>{"use strict";var t=e.i(563199),s=e.i(837699),a=e.i(268255),n=e.i(654313);let i=a.memo(e=>{let{onClick:a}=e;return(0,t.jsx)(n.default,{size:"l",className:"group shrink-0 hover:!bg-state-destructive-hover",onClick:a,children:(0,t.jsx)(s.RiDeleteBinLine,{className:"h-4 w-4 text-text-tertiary group-hover:text-text-destructive"})})});e.s(["default",0,i])}]);