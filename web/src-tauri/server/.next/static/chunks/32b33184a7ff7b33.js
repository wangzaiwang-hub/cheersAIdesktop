(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,744699,e=>{"use strict";var s=e.i(563199),a=e.i(837699);e.i(152567);var t=e.i(408767),l=e.i(105845),i=e.i(326531),n=e.i(268255),r=e.i(151094),d=e.i(987878),o=e.i(491939),c=e.i(718574),u=e.i(925521),m=e.i(56971),x=e.i(793359),p=e.i(842090),h=e.i(260484),b=e.i(421001);let g=e=>{let{icon:t,title:l,tooltip:i,value:n,description:r,children:d,disabled:o,onChange:c,onMouseEnter:u,onMouseLeave:m}=e;return(0,s.jsxs)("div",{className:"mb-1 rounded-xl border-l-[0.5px] border-t-[0.5px] border-effects-highlight bg-background-section-burn p-3",onMouseEnter:u,onMouseLeave:m,children:[(0,s.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[t,(0,s.jsxs)("div",{className:"system-sm-semibold flex grow items-center text-text-secondary",children:[l,i&&(0,s.jsx)(b.default,{popupContent:i,children:(0,s.jsx)("div",{className:"ml-0.5 p-px",children:(0,s.jsx)(a.RiQuestionLine,{className:"h-3.5 w-3.5 text-text-quaternary"})})})]}),(0,s.jsx)(h.default,{disabled:o,className:"shrink-0",onChange:e=>c?.(e),defaultValue:n})]}),r&&(0,s.jsx)("div",{className:"system-xs-regular line-clamp-2 min-h-8 text-text-tertiary",children:r}),d]})};e.i(966391);var f=e.i(606448),v=e.i(969789);let j=e=>{let{disabled:h,onChange:b}=e,{t:j}=(0,t.useTranslation)(),y=(0,i.useRouter)(),N=(0,i.usePathname)().match(/\/app\/([^/]+)/),w=N?.length&&N[1]?N[1]:"",C=(0,d.useFeaturesStore)(),_=(0,d.useFeatures)(e=>e.features.annotationReply),S=(0,n.useCallback)(e=>{let{features:s,setFeatures:a}=C.getState(),t=(0,l.produce)(s,s=>{s.annotationReply=e});a(t),b&&b(t)},[C,b]),{handleEnableAnnotation:k,handleDisableAnnotation:F,isShowAnnotationConfigInit:T,setIsShowAnnotationConfigInit:D,isShowAnnotationFullModal:E,setIsShowAnnotationFullModal:L}=(e=>{let{appId:s,annotationConfig:a,setAnnotationConfig:t}=e,{plan:i,enableBilling:r}=(0,m.useProviderContext)(),d=r&&i.usage.annotatedResponse>=i.total.annotatedResponse,[o,h]=(0,n.useState)(!1),[b,g]=n.useState(!1),f=async(e,a)=>{let t=!1;for(;!t&&!(t=(await (0,x.queryAnnotationJobStatus)(s,a,e)).job_status===c.JobStatus.completed);)await (0,p.sleep)(2e3)};return{handleEnableAnnotation:async(e,i)=>{if(d)return;let{job_id:n}=await (0,x.updateAnnotationStatus)(s,c.AnnotationEnableStatus.enable,e,i);await f(n,c.AnnotationEnableStatus.enable),t((0,l.produce)(a,s=>{s.enabled=!0,s.embedding_model=e,s.score_threshold||(s.score_threshold=u.ANNOTATION_DEFAULT.score_threshold)}))},handleDisableAnnotation:async e=>{a.enabled&&(await (0,x.updateAnnotationStatus)(s,c.AnnotationEnableStatus.disable,e),t((0,l.produce)(a,e=>{e.enabled=!1})))},isShowAnnotationConfigInit:b,setIsShowAnnotationConfigInit:e=>{e&&d?h(!0):g(e)},isShowAnnotationFullModal:o,setIsShowAnnotationFullModal:h,setScore:(e,s)=>{t((0,l.produce)(a,a=>{a.score_threshold=e,s&&(a.embedding_model=s)}))}}})({appId:w,annotationConfig:_||{id:"",enabled:!1,score_threshold:u.ANNOTATION_DEFAULT.score_threshold,embedding_model:{embedding_provider_name:"",embedding_model_name:""}},setAnnotationConfig:S}),M=(0,n.useCallback)(e=>{e?D(!0):F(_?.embedding_model)},[_?.embedding_model,F,D]),[A,U]=(0,n.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g,{icon:(0,s.jsx)("div",{className:"shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-indigo-indigo-600 p-1 shadow-xs",children:(0,s.jsx)(f.MessageFast,{className:"h-4 w-4 text-text-primary-on-surface"})}),title:j("feature.annotation.title",{ns:"appDebug"}),value:!!_?.enabled,onChange:e=>M(e),onMouseEnter:()=>U(!0),onMouseLeave:()=>U(!1),disabled:h,children:(0,s.jsxs)(s.Fragment,{children:[!_?.enabled&&(0,s.jsx)("div",{className:"system-xs-regular line-clamp-2 min-h-8 text-text-tertiary",children:j("feature.annotation.description",{ns:"appDebug"})}),!!_?.enabled&&(0,s.jsxs)(s.Fragment,{children:[!A&&(0,s.jsxs)("div",{className:"flex items-center gap-4 pt-0.5",children:[(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"system-2xs-medium-uppercase mb-0.5 text-text-tertiary",children:j("feature.annotation.scoreThreshold.title",{ns:"appDebug"})}),(0,s.jsx)("div",{className:"system-xs-regular text-text-secondary",children:_.score_threshold||"-"})]}),(0,s.jsx)("div",{className:"h-[27px] w-px rotate-12 bg-divider-subtle"}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"system-2xs-medium-uppercase mb-0.5 text-text-tertiary",children:j("modelProvider.embeddingModel.key",{ns:"common"})}),(0,s.jsx)("div",{className:"system-xs-regular text-text-secondary",children:_.embedding_model?.embedding_model_name})]})]}),A&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(r.default,{className:"w-[178px]",onClick:()=>D(!0),disabled:h,children:[(0,s.jsx)(a.RiEqualizer2Line,{className:"mr-1 h-4 w-4"}),j("operation.params",{ns:"common"})]}),(0,s.jsxs)(r.default,{className:"w-[178px]",onClick:()=>{y.push(`/app/${w}/annotations`)},children:[(0,s.jsx)(a.RiExternalLinkLine,{className:"mr-1 h-4 w-4"}),j("feature.annotation.cacheManagement",{ns:"appDebug"})]})]})]})]})}),(0,s.jsx)(o.default,{appId:w,isInit:!0,isShow:T,onHide:()=>{D(!1)},onSave:async(e,s)=>{await k(e,s),D(!1)},annotationConfig:_}),E&&(0,s.jsx)(v.default,{show:E,onHide:()=>L(!1)})]})};var y=e.i(711284),N=e.i(578757);let w=e=>{let{disabled:a,onChange:i}=e,{t:r}=(0,t.useTranslation)(),o=(0,d.useFeatures)(e=>e.features),c=(0,d.useFeaturesStore)(),u=(0,n.useCallback)((e,s)=>{let{features:a,setFeatures:t}=c.getState(),n=(0,l.produce)(a,a=>{a[e]={...a[e],enabled:s}});t(n),i&&i(n)},[c,i]);return(0,s.jsx)(g,{icon:(0,s.jsx)("div",{className:"shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-warning-warning-500 p-1 shadow-xs",children:(0,s.jsx)(N.Citations,{className:"h-4 w-4 text-text-primary-on-surface"})}),title:r("feature.citation.title",{ns:"appDebug"}),value:!!o.citation?.enabled,description:r("feature.citation.description",{ns:"appDebug"}),onChange:e=>u(y.FeatureEnum.citation,e),disabled:a})};var C=e.i(854233),_=e.i(296124);let S=e=>{let{disabled:i,onChange:o,promptVariables:c,workflowVariables:u,onAutoAddPromptVariable:m}=e,{t:x}=(0,t.useTranslation)(),{setShowOpeningModal:p}=(0,_.useModalContext)(),h=(0,d.useFeatures)(e=>e.features.opening),b=(0,d.useFeaturesStore)(),[f,v]=(0,n.useState)(!1),j=(0,n.useCallback)(()=>{if(i)return;let{features:e,setFeatures:s}=b.getState();p({payload:{...h,promptVariables:c,workflowVariables:u,onAutoAddPromptVariable:m},onSaveCallback:a=>{s((0,l.produce)(e,e=>{e.opening=a})),o&&o()},onCancelCallback:()=>{o&&o()}})},[i,b,m,o,h,c,p]),N=(0,n.useCallback)((e,s)=>{let{features:a,setFeatures:t}=b.getState();t((0,l.produce)(a,a=>{a[e]={...a[e],enabled:s}})),o&&o()},[b,o]);return(0,s.jsx)(g,{icon:(0,s.jsx)("div",{className:"shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-blue-light-blue-light-500 p-1 shadow-xs",children:(0,s.jsx)(C.LoveMessage,{className:"h-4 w-4 text-text-primary-on-surface"})}),title:x("feature.conversationOpener.title",{ns:"appDebug"}),value:!!h?.enabled,onChange:e=>N(y.FeatureEnum.opening,e),onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),disabled:i,children:(0,s.jsxs)(s.Fragment,{children:[!h?.enabled&&(0,s.jsx)("div",{className:"system-xs-regular line-clamp-2 min-h-8 text-text-tertiary",children:x("feature.conversationOpener.description",{ns:"appDebug"})}),!!h?.enabled&&(0,s.jsxs)(s.Fragment,{children:[!f&&(0,s.jsx)("div",{className:"system-xs-regular line-clamp-2 min-h-8 text-text-tertiary",children:h.opening_statement||x("openingStatement.placeholder",{ns:"appDebug"})}),f&&(0,s.jsxs)(r.default,{className:"w-full",onClick:j,disabled:i,children:[(0,s.jsx)(a.RiEditLine,{className:"mr-1 h-4 w-4"}),x("openingStatement.writeOpener",{ns:"appDebug"})]})]})]})})};var k=e.i(551193),F=e.i(157169),T=e.i(935139);let D=e=>{let{className:a,children:t,show:l,onClose:i,inWorkflow:r=!0}=e,d=(0,n.useCallback)(()=>i?.(),[i]);return(0,s.jsx)(F.Transition,{appear:!0,show:l,as:n.Fragment,children:(0,s.jsxs)(k.Dialog,{as:"div",className:"relative z-40",onClose:d,children:[(0,s.jsx)(F.TransitionChild,{children:(0,s.jsx)("div",{className:(0,T.cn)("fixed inset-0 bg-black/25","data-[closed]:opacity-0","data-[enter]:opacity-100 data-[enter]:duration-300 data-[enter]:ease-out","data-[leave]:opacity-0 data-[leave]:duration-200 data-[leave]:ease-in")})}),(0,s.jsx)("div",{className:"fixed inset-0",children:(0,s.jsx)("div",{className:(0,T.cn)("flex min-h-full flex-col items-end justify-center pb-2",r?"pt-[112px]":"pr-2 pt-[64px]"),children:(0,s.jsx)(F.TransitionChild,{children:(0,s.jsx)(k.DialogPanel,{className:(0,T.cn)("relative flex h-0 w-[420px] grow flex-col overflow-hidden border-components-panel-border bg-components-panel-bg-alt p-0 text-left align-middle shadow-xl transition-all",r?"rounded-l-2xl border-b-[0.5px] border-l-[0.5px] border-t-[0.5px]":"rounded-2xl border-[0.5px]","data-[closed]:scale-95  data-[closed]:opacity-0","data-[enter]:scale-100 data-[enter]:opacity-100 data-[enter]:duration-300 data-[enter]:ease-out","data-[leave]:scale-95 data-[leave]:opacity-0 data-[leave]:duration-200 data-[leave]:ease-in",a),children:t})})})})]})})};var E=e.i(471981),L=e.i(503160),M=e.i(390622);let A=n.memo(e=>{let{imageUpload:i,onClose:o,onChange:c}=e,{t:u}=(0,t.useTranslation)(),m=(0,d.useFeaturesStore)(),x=(0,d.useFeatures)(e=>e.features.file),p=(0,n.useMemo)(()=>({allowed_file_upload_methods:x?.allowed_file_upload_methods||["local_file","remote_url"],allowed_file_types:x?.allowed_file_types||[M.SupportUploadFileTypes.image],allowed_file_extensions:x?.allowed_file_extensions||E.FILE_EXTS[M.SupportUploadFileTypes.image],max_length:x?.number_limits||3}),[x]),[h,b]=(0,n.useState)(p),g=(0,n.useCallback)(()=>{let{features:e,setFeatures:s}=m.getState();s((0,l.produce)(e,e=>{e.file={...e.file,allowed_file_upload_methods:h.allowed_file_upload_methods,number_limits:h.max_length,allowed_file_types:h.allowed_file_types,allowed_file_extensions:h.allowed_file_extensions}})),c&&c()},[m,c,h]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,s.jsx)("div",{className:"system-xl-semibold text-text-primary",children:u(i?"feature.imageUpload.modalTitle":"feature.fileUpload.modalTitle",{ns:"appDebug"})}),(0,s.jsx)("div",{className:"cursor-pointer p-1",onClick:o,children:(0,s.jsx)(a.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})})]}),(0,s.jsx)(L.default,{isMultiple:!0,inFeaturePanel:!0,hideSupportFileType:i,payload:h,onChange:e=>b(e)}),(0,s.jsxs)("div",{className:"mt-4 flex items-center justify-end",children:[(0,s.jsx)(r.default,{onClick:o,className:"mr-2",children:u("operation.cancel",{ns:"common"})}),(0,s.jsx)(r.default,{variant:"primary",onClick:g,disabled:0===h.allowed_file_types.length,children:u("operation.save",{ns:"common"})})]})]})});var U=e.i(391185);let R=(0,n.memo)(e=>{let{open:a,onOpen:t,onChange:l,disabled:i,children:n,imageUpload:r}=e;return(0,s.jsxs)(U.PortalToFollowElem,{open:a,onOpenChange:t,placement:"left",offset:{mainAxis:32},children:[(0,s.jsx)(U.PortalToFollowElemTrigger,{className:"flex",onClick:()=>!i&&t(e=>!e),children:n}),(0,s.jsx)(U.PortalToFollowElemContent,{style:{zIndex:50},children:(0,s.jsx)("div",{className:"max-h-[calc(100vh-20px)] w-[360px] overflow-y-auto rounded-2xl border-[0.5px] border-components-panel-border bg-components-panel-bg p-4 shadow-2xl",children:(0,s.jsx)(A,{imageUpload:r,onClose:()=>t(!1),onChange:e=>{l?.(e),t(!1)}})})})]})});var P=e.i(575751);let O=e=>{let{disabled:i,onChange:o}=e,{t:c}=(0,t.useTranslation)(),u=(0,d.useFeatures)(e=>e.features.file),m=(0,d.useFeaturesStore)(),[x,p]=(0,n.useState)(!1),[h,b]=(0,n.useState)(!1),f=(0,n.useMemo)(()=>u?.allowed_file_types?.join(",")||"-",[u?.allowed_file_types]),v=(0,n.useCallback)((e,s)=>{let{features:a,setFeatures:t}=m.getState();t((0,l.produce)(a,a=>{a[e]={...a[e],enabled:s,image:{enabled:s}}})),o&&o()},[m,o]);return(0,s.jsx)(g,{icon:(0,s.jsx)("div",{className:"shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-blue-blue-600 p-1 shadow-xs",children:(0,s.jsx)(P.FolderUpload,{className:"h-4 w-4 text-text-primary-on-surface"})}),title:c("feature.fileUpload.title",{ns:"appDebug"}),value:u?.enabled,onChange:e=>v(y.FeatureEnum.file,e),onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),disabled:i,children:(0,s.jsxs)(s.Fragment,{children:[!u?.enabled&&(0,s.jsx)("div",{className:"system-xs-regular line-clamp-2 min-h-8 text-text-tertiary",children:c("feature.fileUpload.description",{ns:"appDebug"})}),u?.enabled&&(0,s.jsxs)(s.Fragment,{children:[!h&&!x&&(0,s.jsxs)("div",{className:"flex items-center gap-4 pt-0.5",children:[(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"system-2xs-medium-uppercase mb-0.5 text-text-tertiary",children:c("feature.fileUpload.supportedTypes",{ns:"appDebug"})}),(0,s.jsx)("div",{className:"system-xs-regular text-text-secondary",children:f})]}),(0,s.jsx)("div",{className:"h-[27px] w-px rotate-12 bg-divider-subtle"}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"system-2xs-medium-uppercase mb-0.5 text-text-tertiary",children:c("feature.fileUpload.numberLimit",{ns:"appDebug"})}),(0,s.jsx)("div",{className:"system-xs-regular text-text-secondary",children:u?.number_limits})]})]}),(h||x)&&(0,s.jsx)(R,{open:x&&!i,onOpen:e=>{p(e),b(e)},onChange:o,children:(0,s.jsxs)(r.default,{className:"w-full",disabled:i,children:[(0,s.jsx)(a.RiEqualizer2Line,{className:"mr-1 h-4 w-4"}),c("operation.settings",{ns:"common"})]})})]})]})})};var I=e.i(208507);let q=e=>{let{disabled:a,onChange:i}=e,{t:r}=(0,t.useTranslation)(),o=(0,d.useFeatures)(e=>e.features),c=(0,d.useFeaturesStore)(),u=(0,n.useCallback)((e,s)=>{let{features:a,setFeatures:t}=c.getState(),n=(0,l.produce)(a,a=>{a[e]={...a[e],enabled:s}});t(n),i&&i(n)},[c,i]);return(0,s.jsx)(g,{icon:(0,s.jsx)("div",{className:"shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-blue-light-blue-light-500 p-1 shadow-xs",children:(0,s.jsx)(I.VirtualAssistant,{className:"h-4 w-4 text-text-primary-on-surface"})}),title:r("feature.suggestedQuestionsAfterAnswer.title",{ns:"appDebug"}),value:!!o.suggested?.enabled,description:r("feature.suggestedQuestionsAfterAnswer.description",{ns:"appDebug"}),onChange:e=>u(y.FeatureEnum.suggested,e),disabled:a})};var z=e.i(83278);let V=e=>{let{disabled:i,onChange:o}=e,{t:c}=(0,t.useTranslation)(),u=(0,d.useFeatures)(e=>e.features.file),m=(0,d.useFeaturesStore)(),[x,p]=(0,n.useState)(!1),[h,b]=(0,n.useState)(!1),f=(0,n.useMemo)(()=>u?.allowed_file_types?.join(",")||"-",[u?.allowed_file_types]),v=(0,n.useCallback)((e,s)=>{let{features:a,setFeatures:t}=m.getState();t((0,l.produce)(a,a=>{a[e]={...a[e],enabled:s,image:{enabled:s}}})),o&&o()},[m,o]);return(0,s.jsx)(g,{icon:(0,s.jsx)("div",{className:"shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-indigo-indigo-600 p-1 shadow-xs",children:(0,s.jsx)(a.RiImage2Fill,{className:"h-4 w-4 text-text-primary-on-surface"})}),title:(0,s.jsxs)("div",{className:"flex items-center",children:[c("feature.imageUpload.title",{ns:"appDebug"}),(0,s.jsx)(z.default,{text:"LEGACY",className:"mx-1 shrink-0 border-text-accent-secondary text-text-accent-secondary"})]}),value:u?.enabled,onChange:e=>v(y.FeatureEnum.file,e),onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),disabled:i,children:(0,s.jsxs)(s.Fragment,{children:[!u?.enabled&&(0,s.jsx)("div",{className:"system-xs-regular line-clamp-2 min-h-8 text-text-tertiary",children:c("feature.imageUpload.description",{ns:"appDebug"})}),u?.enabled&&(0,s.jsxs)(s.Fragment,{children:[!h&&!x&&(0,s.jsxs)("div",{className:"flex items-center gap-4 pt-0.5",children:[(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"system-2xs-medium-uppercase mb-0.5 text-text-tertiary",children:c("feature.imageUpload.supportedTypes",{ns:"appDebug"})}),(0,s.jsx)("div",{className:"system-xs-regular text-text-secondary",children:f})]}),(0,s.jsx)("div",{className:"h-[27px] w-px rotate-12 bg-divider-subtle"}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"system-2xs-medium-uppercase mb-0.5 text-text-tertiary",children:c("feature.imageUpload.numberLimit",{ns:"appDebug"})}),(0,s.jsx)("div",{className:"system-xs-regular text-text-secondary",children:u?.number_limits})]})]}),(h||x)&&(0,s.jsx)(R,{imageUpload:!0,open:x&&!i,onOpen:e=>{p(e),b(e)},onChange:o,children:(0,s.jsxs)(r.default,{className:"w-full",disabled:i,children:[(0,s.jsx)(a.RiEqualizer2Line,{className:"mr-1 h-4 w-4"}),c("operation.settings",{ns:"common"})]})})]})]})})};var B=e.i(289553),Q=e.i(683257),H=e.i(652669);let J=e=>{let{disabled:i,onChange:o}=e,{t:c}=(0,t.useTranslation)(),{setShowModerationSettingModal:u}=(0,_.useModalContext)(),m=(0,Q.useLocale)(),x=(0,d.useFeaturesStore)(),p=(0,d.useFeatures)(e=>e.features.moderation),{data:h}=(0,H.useCodeBasedExtensions)("moderation"),[b,f]=(0,n.useState)(!1),v=(0,n.useCallback)((e,s)=>{let{features:a,setFeatures:t}=x.getState();if(s&&!a.moderation?.type&&e===y.FeatureEnum.moderation&&u({payload:{enabled:!0,type:"keywords",config:{keywords:"",inputs_config:{enabled:!0,preset_response:""}}},onSaveCallback:e=>{let s=(0,l.produce)(a,s=>{s.moderation=e});t(s),o&&o(s)},onCancelCallback:()=>{t((0,l.produce)(a,e=>{e.moderation={enabled:!1}})),o&&o()}}),!s){let e=(0,l.produce)(a,e=>{e.moderation={enabled:!1}});t(e),o&&o(e)}},[x,o,u]),j=(0,n.useMemo)(()=>p?.type==="openai_moderation"?c("feature.moderation.modal.provider.openai",{ns:"appDebug"}):p?.type==="keywords"?c("feature.moderation.modal.provider.keywords",{ns:"appDebug"}):p?.type==="api"?c("apiBasedExtension.selector.title",{ns:"common"}):h?.data.find(e=>e.name===p?.type)?.label[m]||"-",[h?.data,m,p?.type,c]),N=(0,n.useMemo)(()=>p?.config?.inputs_config?.enabled&&p.config?.outputs_config?.enabled?c("feature.moderation.allEnabled",{ns:"appDebug"}):p?.config?.inputs_config?.enabled?c("feature.moderation.inputEnabled",{ns:"appDebug"}):p?.config?.outputs_config?.enabled?c("feature.moderation.outputEnabled",{ns:"appDebug"}):void 0,[p?.config?.inputs_config?.enabled,p?.config?.outputs_config?.enabled,c]);return(0,s.jsx)(g,{icon:(0,s.jsx)("div",{className:"shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-text-success p-1 shadow-xs",children:(0,s.jsx)(B.ContentModeration,{className:"h-4 w-4 text-text-primary-on-surface"})}),title:c("feature.moderation.title",{ns:"appDebug"}),value:!!p?.enabled,onChange:e=>v(y.FeatureEnum.moderation,e),onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),disabled:i,children:(0,s.jsxs)(s.Fragment,{children:[!p?.enabled&&(0,s.jsx)("div",{className:"system-xs-regular line-clamp-2 min-h-8 text-text-tertiary",children:c("feature.moderation.description",{ns:"appDebug"})}),!!p?.enabled&&(0,s.jsxs)(s.Fragment,{children:[!b&&(0,s.jsxs)("div",{className:"flex items-center gap-4 pt-0.5",children:[(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"system-2xs-medium-uppercase mb-0.5 text-text-tertiary",children:c("feature.moderation.modal.provider.title",{ns:"appDebug"})}),(0,s.jsx)("div",{className:"system-xs-regular text-text-secondary",children:j})]}),(0,s.jsx)("div",{className:"h-[27px] w-px rotate-12 bg-divider-subtle"}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"system-2xs-medium-uppercase mb-0.5 text-text-tertiary",children:c("feature.moderation.contentEnableLabel",{ns:"appDebug"})}),(0,s.jsx)("div",{className:"system-xs-regular text-text-secondary",children:N})]})]}),b&&(0,s.jsxs)(r.default,{className:"w-full",onClick:()=>{if(i)return;let{features:e,setFeatures:s}=x.getState();u({payload:p,onSaveCallback:a=>{let t=(0,l.produce)(e,e=>{e.moderation=a});s(t),o&&o(t)},onCancelCallback:()=>{o&&o()}})},disabled:i,children:[(0,s.jsx)(a.RiEqualizer2Line,{className:"mr-1 h-4 w-4"}),c("operation.settings",{ns:"common"})]})]})]})})},K=e=>{let{disabled:i,onChange:r}=e,{t:o}=(0,t.useTranslation)(),c=(0,d.useFeatures)(e=>e.features),u=(0,d.useFeaturesStore)(),m=(0,n.useCallback)((e,s)=>{let{features:a,setFeatures:t}=u.getState();t((0,l.produce)(a,a=>{a[e]={...a[e],enabled:s}})),r&&r()},[u,r]);return(0,s.jsx)(g,{icon:(0,s.jsx)("div",{className:"shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-blue-light-blue-light-500 p-1 shadow-xs",children:(0,s.jsx)(a.RiSparklingFill,{className:"h-4 w-4 text-text-primary-on-surface"})}),title:o("feature.moreLikeThis.title",{ns:"appDebug"}),tooltip:o("feature.moreLikeThis.tip",{ns:"appDebug"}),value:!!c.moreLikeThis?.enabled,description:o("feature.moreLikeThis.description",{ns:"appDebug"}),onChange:e=>m(y.FeatureEnum.moreLikeThis,e),disabled:i})};var G=e.i(501630);let W=e=>{let{disabled:a,onChange:i}=e,{t:r}=(0,t.useTranslation)(),o=(0,d.useFeatures)(e=>e.features),c=(0,d.useFeaturesStore)(),u=(0,n.useCallback)((e,s)=>{let{features:a,setFeatures:t}=c.getState();t((0,l.produce)(a,a=>{a[e]={...a[e],enabled:s}})),i&&i()},[c,i]);return(0,s.jsx)(g,{icon:(0,s.jsx)("div",{className:"shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-violet-violet-600 p-1 shadow-xs",children:(0,s.jsx)(G.Microphone01,{className:"h-4 w-4 text-text-primary-on-surface"})}),title:r("feature.speechToText.title",{ns:"appDebug"}),value:!!o.speech2text?.enabled,description:r("feature.speechToText.description",{ns:"appDebug"}),onChange:e=>u(y.FeatureEnum.speech2text,e),disabled:a})};var X=e.i(627449),Y=e.i(539342),$=e.i(491234),Z=e.i(648404);let ee=e=>{let{disabled:i,onChange:o}=e,{t:c}=(0,t.useTranslation)(),u=(0,d.useFeatures)(e=>e.features.text2speech),m=$.languages.find(e=>e.value===u?.language),[x,p]=(0,n.useState)(!1),[h,b]=(0,n.useState)(!1),f=(0,d.useFeatures)(e=>e.features),v=(0,d.useFeaturesStore)(),j=(0,n.useCallback)((e,s)=>{let{features:a,setFeatures:t}=v.getState();t((0,l.produce)(a,a=>{a[e]={...a[e],enabled:s}})),o&&o()},[v,o]);return(0,s.jsx)(g,{icon:(0,s.jsx)("div",{className:"shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-violet-violet-600 p-1 shadow-xs",children:(0,s.jsx)(Y.TextToAudio,{className:"h-4 w-4 text-text-primary-on-surface"})}),title:c("feature.textToSpeech.title",{ns:"appDebug"}),value:!!f.text2speech?.enabled,onChange:e=>j(y.FeatureEnum.text2speech,e),onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),disabled:i,children:(0,s.jsxs)(s.Fragment,{children:[!f.text2speech?.enabled&&(0,s.jsx)("div",{className:"system-xs-regular line-clamp-2 min-h-8 text-text-tertiary",children:c("feature.textToSpeech.description",{ns:"appDebug"})}),!!f.text2speech?.enabled&&(0,s.jsxs)(s.Fragment,{children:[!h&&!x&&(0,s.jsxs)("div",{className:"flex items-center gap-4 pt-0.5",children:[(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"system-2xs-medium-uppercase mb-0.5 text-text-tertiary",children:c("voice.voiceSettings.language",{ns:"appDebug"})}),(0,s.jsx)("div",{className:"system-xs-regular text-text-secondary",children:m?.name||"-"})]}),(0,s.jsx)("div",{className:"h-[27px] w-px rotate-12 bg-divider-subtle"}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"system-2xs-medium-uppercase mb-0.5 text-text-tertiary",children:c("voice.voiceSettings.voice",{ns:"appDebug"})}),(0,s.jsx)("div",{className:"system-xs-regular text-text-secondary",children:f.text2speech?.voice||c("voice.defaultDisplay",{ns:"appDebug"})})]}),(0,s.jsx)("div",{className:"h-[27px] w-px rotate-12 bg-divider-subtle"}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"system-2xs-medium-uppercase mb-0.5 text-text-tertiary",children:c("voice.voiceSettings.autoPlay",{ns:"appDebug"})}),(0,s.jsx)("div",{className:"system-xs-regular text-text-secondary",children:c(f.text2speech?.autoPlay===Z.TtsAutoPlay.enabled?"voice.voiceSettings.autoPlayEnabled":"voice.voiceSettings.autoPlayDisabled",{ns:"appDebug"})})]})]}),(h||x)&&(0,s.jsx)(X.default,{open:x&&!i,onOpen:p,onChange:o,children:(0,s.jsxs)(r.default,{className:"w-full",disabled:i,children:[(0,s.jsx)(a.RiEqualizer2Line,{className:"mr-1 h-4 w-4"}),c("voice.voiceSettings.title",{ns:"appDebug"})]})})]})]})})};var es=e.i(739255),ea=e.i(225162);e.s(["default",0,e=>{let{show:l,isChatMode:i,disabled:n,onChange:r,onClose:d,inWorkflow:o=!0,showFileUpload:c=!0,promptVariables:u,workflowVariables:m,onAutoAddPromptVariable:x}=e,{t:p}=(0,t.useTranslation)(),{data:h}=(0,ea.useDefaultModel)(es.ModelTypeEnum.speech2text),{data:b}=(0,ea.useDefaultModel)(es.ModelTypeEnum.tts);return(0,s.jsx)(D,{show:l,onClose:d,inWorkflow:o,children:(0,s.jsxs)("div",{className:"flex h-full grow flex-col",children:[(0,s.jsxs)("div",{className:"flex shrink-0 justify-between p-4 pb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"system-xl-semibold text-text-primary",children:p("common.features",{ns:"workflow"})}),(0,s.jsx)("div",{className:"body-xs-regular text-text-tertiary",children:p("common.featuresDescription",{ns:"workflow"})})]}),(0,s.jsx)("div",{className:"h-8 w-8 cursor-pointer p-2",onClick:d,children:(0,s.jsx)(a.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})})]}),(0,s.jsxs)("div",{className:"grow basis-0 overflow-y-auto px-4 pb-4",children:[c&&(0,s.jsxs)("div",{className:"relative mb-1 rounded-xl border border-components-panel-border p-2 shadow-xs",children:[(0,s.jsx)("div",{className:"absolute left-0 top-0 h-full w-full rounded-xl opacity-40",style:{background:"linear-gradient(92deg, rgba(11, 165, 236, 0.25) 18.12%, rgba(255, 255, 255, 0.00) 167.31%)"}}),(0,s.jsxs)("div",{className:"relative flex h-full w-full items-start",children:[(0,s.jsx)("div",{className:"mr-0.5 shrink-0 p-0.5",children:(0,s.jsx)(a.RiInformation2Fill,{className:"h-5 w-5 text-text-accent"})}),(0,s.jsx)("div",{className:"system-xs-medium p-1 text-text-primary",children:(0,s.jsx)("span",{children:p(i?"common.fileUploadTip":"common.ImageUploadLegacyTip",{ns:"workflow"})})})]})]}),!i&&!o&&(0,s.jsx)(K,{disabled:n,onChange:r}),i&&(0,s.jsx)(S,{disabled:n,onChange:r,promptVariables:u,workflowVariables:m,onAutoAddPromptVariable:x}),i&&(0,s.jsx)(q,{disabled:n,onChange:r}),b&&(i||!o)&&(0,s.jsx)(ee,{disabled:n,onChange:r}),i&&h&&(0,s.jsx)(W,{disabled:n,onChange:r}),c&&i&&(0,s.jsx)(O,{disabled:n,onChange:r}),c&&!i&&(0,s.jsx)(V,{disabled:n,onChange:r}),i&&(0,s.jsx)(w,{disabled:n,onChange:r}),(i||!o)&&(0,s.jsx)(J,{disabled:n,onChange:r}),!o&&i&&(0,s.jsx)(j,{disabled:n,onChange:r})]})]})})}],744699)}]);