(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,722089,e=>{e.v({close:"index-module__jPL1Bq__close",form:"index-module__jPL1Bq__form",label:"index-module__jPL1Bq__label",modal:"index-module__jPL1Bq__modal",modalHeader:"index-module__jPL1Bq__modalHeader",tip:"index-module__jPL1Bq__tip",title:"index-module__jPL1Bq__title"})},752043,e=>{e.v({jinaLogo:"index-module__cWw7Lq__jinaLogo",watercrawlLogo:"index-module__cWw7Lq__watercrawlLogo"})},679499,e=>{e.v({active:"index-module__Q4Dh-a__active",comingTag:"index-module__Q4Dh-a__comingTag",dataSourceItem:"index-module__Q4Dh-a__dataSourceItem",datasetIcon:"index-module__Q4Dh-a__datasetIcon",disabled:"index-module__Q4Dh-a__disabled",form:"index-module__Q4Dh-a__form",notion:"index-module__Q4Dh-a__notion",notionIcon:"index-module__Q4Dh-a__notionIcon",stepHeader:"index-module__Q4Dh-a__stepHeader",submitButton:"index-module__Q4Dh-a__submitButton",web:"index-module__Q4Dh-a__web"})},917521,e=>{e.v({fileContent:"index-module__G3NbVq__fileContent",fileName:"index-module__G3NbVq__fileName",filePreview:"index-module__G3NbVq__filePreview",filetype:"index-module__G3NbVq__filetype",loading:"index-module__G3NbVq__loading",previewContent:"index-module__G3NbVq__previewContent",previewHeader:"index-module__G3NbVq__previewHeader",title:"index-module__G3NbVq__title"})},54817,e=>{e.v({fileContent:"index-module__tGB31q__fileContent",fileName:"index-module__tGB31q__fileName",filePreview:"index-module__tGB31q__filePreview",loading:"index-module__tGB31q__loading",previewContent:"index-module__tGB31q__previewContent",previewHeader:"index-module__tGB31q__previewHeader",title:"index-module__tGB31q__title"})},207978,e=>{"use strict";var t,a,s,r=e.i(563199),n=e.i(105845),i=e.i(268255);e.i(152567);var l=e.i(408767),o=e.i(449980),d=e.i(59375),c=e.i(225162),m=e.i(413159),u=e.i(296124),x=e.i(11512),p=e.i(621379),h=e.i(255202),g=e.i(592160),f=e.i(739255),b=e.i(837699),v=e.i(417944),j=e.i(151094);e.i(432024);var w=e.i(600839);e.i(42241);var C=e.i(479735),C=C;let N=i.memo(e=>{let{onSetting:t}=e,{t:a}=(0,l.useTranslation)();return(0,r.jsxs)("div",{className:"flex flex-col items-start rounded-2xl bg-workflow-process-bg p-6",children:[(0,r.jsx)("div",{className:"mb-2 h-12 w-12 rounded-[10px] border-[0.5px] border-components-card-border p-3 shadow-lg shadow-shadow-shadow-5",children:(0,r.jsx)(w.Notion,{className:"size-6"})}),(0,r.jsxs)("div",{className:"mb-1 flex flex-col gap-y-1 pb-3 pt-1",children:[(0,r.jsxs)("span",{className:"system-md-semibold text-text-secondary",children:[a("stepOne.notionSyncTitle",{ns:"datasetCreation"}),(0,r.jsx)(C.default,{className:"relative -left-1.5 -top-2.5 inline h-4 w-4 text-text-secondary"})]}),(0,r.jsx)("div",{className:"system-sm-regular text-text-tertiary",children:a("stepOne.notionSyncTip",{ns:"datasetCreation"})})]}),(0,r.jsx)(j.default,{variant:"primary",onClick:t,children:a("stepOne.connect",{ns:"datasetCreation"})})]})});var y=e.i(562572),_=e.i(214309),k=e.i(367916);let T="notion-pre-import-pages";var S=e.i(757198),E=e.i(935139);let I=i.memo(e=>{let{isInPipeline:t=!1,onClickConfiguration:a,title:s,buttonText:n,docTitle:i,docLink:l}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsxs)("div",{className:"flex shrink-0 grow items-center gap-x-1",children:[(0,r.jsx)("div",{className:(0,E.cn)("text-text-secondary",t?"system-sm-semibold":"system-md-semibold"),children:s}),(0,r.jsx)(S.default,{type:"vertical",className:"mx-1 h-3.5"}),(0,r.jsxs)(j.default,{variant:"secondary",size:"small",className:(0,E.cn)(t?"size-6 px-1":"gap-x-0.5 px-1.5"),onClick:a,children:[(0,r.jsx)(b.RiEqualizer2Line,{className:"size-4"}),!t&&(0,r.jsx)("span",{className:"system-xs-medium",children:n})]})]}),(0,r.jsxs)("a",{className:"system-xs-medium flex items-center gap-x-1 overflow-hidden text-text-accent",href:l,target:"_blank",rel:"noopener noreferrer",children:[(0,r.jsx)(b.RiBookOpenLine,{className:"size-3.5 shrink-0"}),(0,r.jsx)("span",{className:"grow truncate",title:i,children:i})]})]})});var D=e.i(870804),P=e.i(157169),R=e.i(965930);let L=i.memo(e=>{let{value:t,items:a,onSelect:s}=e,n=a.find(e=>e.credentialId===t),l=(0,i.useMemo)(()=>n.workspaceName||n.credentialName,[n]);return(0,r.jsx)(D.Menu,{as:"div",className:"relative inline-block text-left",children:e=>{let{open:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(D.MenuButton,{className:`flex h-7 items-center justify-center rounded-md p-1 pr-2 hover:bg-state-base-hover ${t&&"bg-state-base-hover"} cursor-pointer`,children:[(0,r.jsx)(R.CredentialIcon,{className:"mr-2",avatarUrl:n?.workspaceIcon,name:l,size:20}),(0,r.jsx)("div",{className:"mr-1 w-[90px] truncate text-left text-sm font-medium text-text-secondary",title:l,children:l}),(0,r.jsx)(b.RiArrowDownSLine,{className:"h-4 w-4 text-text-secondary"})]}),(0,r.jsx)(P.Transition,{as:i.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,r.jsx)(D.MenuItems,{className:"absolute left-0 top-8 z-10 w-80 origin-top-right rounded-lg border-[0.5px] border-components-panel-border bg-components-panel-bg-blur shadow-lg shadow-shadow-shadow-5",children:(0,r.jsx)("div",{className:"max-h-50 overflow-auto p-1",children:a.map(e=>{let t=e.workspaceName||e.credentialName;return(0,r.jsx)(D.MenuItem,{children:(0,r.jsxs)("div",{className:"flex h-9 cursor-pointer items-center rounded-lg px-3 hover:bg-state-base-hover",onClick:()=>s(e.credentialId),children:[(0,r.jsx)(R.CredentialIcon,{className:"mr-2 shrink-0",avatarUrl:e.workspaceIcon,name:t,size:20}),(0,r.jsx)("div",{className:"system-sm-medium mr-2 grow truncate text-text-secondary",title:t,children:t})]})},e.credentialId)})})})})]})}})});var O=e.i(697452),$=e.i(324935),M=e.i(394529);let F=(e,t,a,s)=>{let r=a.parent_id,n=a.page_id;if(r&&n&&"root"!==r&&e[r]){if(t[r])t[r].children.add(n),t[r].descendants.add(n),t[r].descendants.add(s.page_id);else{let a=new Set([n]),i=new Set([n,s.page_id]);t[r]={...e[r],children:a,descendants:i,depth:0,ancestors:[]}}s.depth++,s.ancestors.unshift(t[r].page_name),"root"!==t[r].parent_id&&F(e,t,t[r],s)}},A=(0,i.memo)(e=>{let{index:t,style:a,data:s}=e,{t:n}=(0,l.useTranslation)(),{dataList:i,handleToggle:o,checkedIds:d,disabledCheckedIds:c,handleCheck:m,canPreview:u,handlePreview:x,listMapWithChildrenAndDescendants:p,searchValue:h,previewPageId:g,pagesMap:f}=s,v=i[t],j=p[v.page_id],w=j.descendants.size>0,C=j.ancestors,N=C.length?[...C,v.page_name]:[v.page_name],y=c.has(v.page_id);return(0,r.jsxs)("div",{className:(0,E.cn)("group flex cursor-pointer items-center rounded-md pl-2 pr-[2px] hover:bg-state-base-hover",g===v.page_id&&"bg-state-base-hover"),style:{...a,top:a.top+8,left:8,right:8,width:"calc(100% - 16px)"},children:[(0,r.jsx)($.default,{className:"mr-2 shrink-0",checked:d.has(v.page_id),disabled:y,onCheck:()=>{m(t)}}),!h&&(w?(0,r.jsx)("div",{className:"mr-1 flex h-5 w-5 shrink-0 items-center justify-center rounded-md hover:bg-components-button-ghost-bg-hover",style:{marginLeft:8*v.depth},onClick:()=>o(t),children:v.expand?(0,r.jsx)(b.RiArrowDownSLine,{className:"h-4 w-4 text-text-tertiary"}):(0,r.jsx)(b.RiArrowRightSLine,{className:"h-4 w-4 text-text-tertiary"})}):"root"!==v.parent_id&&f[v.parent_id]?(0,r.jsx)("div",{className:"mr-1 h-5 w-5 shrink-0",style:{marginLeft:8*v.depth}}):(0,r.jsx)("div",{})),(0,r.jsx)(M.default,{className:"mr-1 shrink-0",type:"page",src:v.page_icon}),(0,r.jsx)("div",{className:"grow truncate text-[13px] font-medium leading-4 text-text-secondary",title:v.page_name,children:v.page_name}),u&&(0,r.jsx)("div",{className:"ml-1 hidden h-6 shrink-0 cursor-pointer items-center rounded-md border-[0.5px] border-components-button-secondary-border bg-components-button-secondary-bg px-2 text-xs font-medium leading-4 text-components-button-secondary-text shadow-xs shadow-shadow-shadow-3 backdrop-blur-[10px] hover:border-components-button-secondary-border-hover hover:bg-components-button-secondary-bg-hover group-hover:flex",onClick:()=>x(t),children:n("dataSource.notion.selector.preview",{ns:"common"})}),h&&(0,r.jsx)("div",{className:"ml-1 max-w-[120px] shrink-0 truncate text-xs text-text-quaternary",title:N.join(" / "),children:N.join(" / ")})]})},O.areEqual),B=e=>{let{value:t,disabledValue:a,searchValue:s,pagesMap:n,list:o,onSelect:d,canPreview:c=!0,previewPageId:m,onPreview:u}=e,{t:x}=(0,l.useTranslation)(),[p,h]=(0,i.useState)([]),[g,f]=(0,i.useState)("");(0,i.useEffect)(()=>{h(o.filter(e=>"root"===e.parent_id||!n[e.parent_id]).map(e=>({...e,expand:!1,depth:0})))},[o]);let b=o.filter(e=>e.page_name.includes(s)).map(e=>({...e,expand:!1,depth:0})),v=s?b:p,j=(0,i.useMemo)(()=>o.reduce((e,t)=>{let a=t.page_id;return e[a]||(e[a]={...t,children:new Set,descendants:new Set,depth:0,ancestors:[]}),F(n,e,e[a],e[a]),e},{}),[o,n]),w=new Set(t);return v.length?(0,r.jsx)(O.FixedSizeList,{className:"py-2",height:296,itemCount:v.length,itemSize:28,width:"100%",itemKey:(e,t)=>t.dataList[e].page_id,itemData:{dataList:v,handleToggle:e=>{let t=p[e],a=j[t.page_id],s=Array.from(a.descendants),r=Array.from(a.children),i=[];t.expand?(t.expand=!1,i=p.filter(e=>!s.includes(e.page_id))):(t.expand=!0,i=[...p.slice(0,e+1),...r.map(e=>({...n[e],expand:!1,depth:j[e].depth})),...p.slice(e+1)]),h(i)},checkedIds:t,disabledCheckedIds:a,handleCheck:e=>{let t=v[e].page_id,a=j[t];if(w.has(t)){if(!s)for(let e of a.descendants)w.delete(e);w.delete(t)}else{if(!s)for(let e of a.descendants)w.add(e);w.add(t)}d(new Set(w))},canPreview:c,handlePreview:e=>{let t=v[e].page_id;f(t),u&&u(t)},listMapWithChildrenAndDescendants:j,searchValue:s,previewPageId:void 0===m?g:m,pagesMap:n},children:A}):(0,r.jsx)("div",{className:"flex h-[296px] items-center justify-center text-[13px] text-text-tertiary",children:x("dataSource.notion.selector.noSearchResult",{ns:"common"})})};var q=e.i(706953);let z=e=>{let t,{value:a,onSelect:s,canPreview:n,previewPageId:l,onPreview:c,datasetId:m="",credentialList:x,onSelectCredential:p}=e,[h,g]=(0,i.useState)(""),f=(0,u.useModalContextSelector)(e=>e.setShowAccountSettingModal),b=(t=(0,_.useQueryClient)(),e=>{let{datasetId:a,credentialId:s}=e;t.invalidateQueries({queryKey:[T,a,s]})}),v=(0,i.useMemo)(()=>x.map(e=>({credentialId:e.id,credentialName:e.name,workspaceIcon:e.credential.workspace_icon,workspaceName:e.credential.workspace_name})),[x]),[j,w]=(0,i.useState)(v[0]);(0,i.useEffect)(()=>{let e=v.find(e=>e.credentialId===j?.credentialId);if(e)p?.(e?.credentialId||"");else{let e=v[0];b({datasetId:m,credentialId:e.credentialId}),w(v[0]),s([]),p?.(e.credentialId)}},[v]);let{data:C,isFetching:S,isError:E}=(e=>{let{datasetId:t,credentialId:a}=e;return(0,y.useQuery)({queryKey:[T,t,a],queryFn:async()=>(0,k.get)("/notion/pre-import/pages",{params:{dataset_id:t,credential_id:a}}),retry:0})})({datasetId:m,credentialId:j.credentialId||""}),D=(0,i.useMemo)(()=>{let e=new Set,t=new Set;return[(C?.notion_info||[]).reduce((a,s)=>(s.pages.forEach(r=>{r.is_bound&&(e.add(r.page_id),t.add(r.page_id)),a[r.page_id]={...r,workspace_id:s.workspace_id}}),a),{}),e,t]},[C?.notion_info]),P=(0,i.useMemo)(()=>[...Array.from(D[1]),...a||[]],[D,a]),[R,O]=(0,i.useState)(()=>new Set(P));(0,i.useEffect)(()=>{O(new Set(P))},[P]);let $=(0,i.useCallback)(e=>{g(e)},[]),M=(0,i.useCallback)(e=>{let t=v.find(t=>t.credentialId===e);b({datasetId:m,credentialId:t.credentialId}),w(t),s([]),p?.(t.credentialId)},[m,b,v,s,p]),F=(0,i.useCallback)(e=>{let t=Array.from(e).map(e=>D[0][e]);O(new Set(Array.from(e))),s(t)},[D,s]),A=(0,i.useCallback)(e=>{c&&c(D[0][e])},[D,c]),z=(0,i.useCallback)(()=>{f({payload:d.ACCOUNT_SETTING_TAB.DATA_SOURCE})},[f]);return E?(0,r.jsx)(N,{onSetting:z}):(0,r.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,r.jsx)(I,{onClickConfiguration:z,title:"Choose notion pages",buttonText:"Configure Notion",docTitle:"Notion docs",docLink:"https://www.notion.so/docs"}),(0,r.jsxs)("div",{className:"rounded-xl border border-components-panel-border bg-background-default-subtle",children:[(0,r.jsxs)("div",{className:"flex h-12 items-center gap-x-2 rounded-t-xl border-b border-b-divider-regular bg-components-panel-bg p-2",children:[(0,r.jsx)("div",{className:"flex grow items-center gap-x-1",children:(0,r.jsx)(L,{value:j.credentialId,items:v,onSelect:M})}),(0,r.jsx)(q.default,{value:h,onChange:$})]}),(0,r.jsx)("div",{className:"overflow-hidden rounded-b-xl",children:S?(0,r.jsx)("div",{className:"flex h-[296px] items-center justify-center",children:(0,r.jsx)(o.default,{})}):(0,r.jsx)(B,{value:R,disabledValue:D[2],searchValue:h,list:C.notion_info?.[0].pages||[],pagesMap:D[0],onSelect:F,canPreview:n,previewPageId:l,onPreview:A})})]})]})};var W=e.i(342687),U=e.i(742562),G=e.i(56971),V=e.i(326531),H=e.i(339548);e.i(201987);var Q=e.i(207331),J=e.i(291631),K=e.i(21151),X=e.i(137667),Y=e.i(211857),Z=e.i(225244),ee=e.i(722089);let et=e=>{let{show:t=!1,onHide:a}=e,[s,n]=(0,i.useState)(""),{t:o}=(0,l.useTranslation)(),{notify:d}=(0,H.useContext)(X.ToastContext),c=(0,V.useRouter)(),m=(0,Z.useInvalidDatasetList)(),u=async()=>{if(!s)return void d({type:"error",message:o("stepOne.modal.nameNotEmpty",{ns:"datasetCreation"})});if(s.length>40)return void d({type:"error",message:o("stepOne.modal.nameLengthInvalid",{ns:"datasetCreation"})});try{let e=await (0,Y.createEmptyDataset)({name:s});m(),(0,Q.trackEvent)("create_empty_datasets",{name:s,dataset_id:e.id}),a(),c.push(`/datasets/${e.id}/documents`)}catch{d({type:"error",message:o("stepOne.modal.failed",{ns:"datasetCreation"})})}};return(0,r.jsxs)(K.default,{isShow:t,onClose:a,className:(0,E.cn)(ee.default.modal,"!max-w-[520px]","px-8"),children:[(0,r.jsxs)("div",{className:ee.default.modalHeader,children:[(0,r.jsx)("div",{className:ee.default.title,children:o("stepOne.modal.title",{ns:"datasetCreation"})}),(0,r.jsx)("span",{className:ee.default.close,onClick:a})]}),(0,r.jsx)("div",{className:ee.default.tip,children:o("stepOne.modal.tip",{ns:"datasetCreation"})}),(0,r.jsxs)("div",{className:ee.default.form,children:[(0,r.jsx)("div",{className:ee.default.label,children:o("stepOne.modal.input",{ns:"datasetCreation"})}),(0,r.jsx)(J.default,{value:s,placeholder:o("stepOne.modal.placeholder",{ns:"datasetCreation"})||"",onChange:e=>n(e.target.value)})]}),(0,r.jsxs)("div",{className:"flex flex-row-reverse",children:[(0,r.jsx)(j.default,{className:"ml-2 w-24",variant:"primary",onClick:u,children:o("stepOne.modal.confirmButton",{ns:"datasetCreation"})}),(0,r.jsx)(j.default,{className:"w-24",onClick:a,children:o("stepOne.modal.cancelButton",{ns:"datasetCreation"})})]})]})};var ea=e.i(223314),es=e.i(153435),er=e.i(925521),en=e.i(683257),ei=e.i(922521),el=e.i(491234),eo=e.i(652669),ed=e.i(648404),ec=e.i(943963);let em=e=>{let t,{fileList:a,titleClassName:s,prepareFileList:n,onFileUpdate:o,onFileListUpdate:d,onPreview:c,supportBatchUpload:m=!1}=e,{t:u}=(0,l.useTranslation)(),{notify:x}=(0,H.useContext)(X.ToastContext),p=(0,en.useLocale)(),[h,g]=(0,i.useState)(!1),f=(0,i.useRef)(null),v=(0,i.useRef)(null),j=(0,i.useRef)(null),w=!m&&a.length>0,{data:C}=(0,eo.useFileUploadConfig)(),{data:N}=(0,eo.useFileSupportTypes)(),y=N?.allowed_extensions||[],_=(t={md:"markdown",pptx:"pptx",htm:"html",xlsx:"xlsx",docx:"docx"},[...y].map(e=>t[e]||e).map(e=>e.toLowerCase()).filter((e,t,a)=>a.indexOf(e)===t).map(e=>e.toUpperCase()).join(p!==el.LanguagesSupported[1]?", ":"ã€ ")),T=y.map(e=>`.${e}`),S=(0,i.useMemo)(()=>({file_size_limit:C?.file_size_limit??15,batch_count_limit:m?C?.batch_count_limit??5:1,file_upload_limit:m?C?.file_upload_limit??5:1}),[C,m]),I=(0,i.useRef)([]),D=e=>{if(!e)return"";let t=e.name.split(".");return t[t.length-1]},P=(0,i.useCallback)(e=>{let{size:t}=e,a=`.${D(e)}`,s=T.includes(a.toLowerCase());s||x({type:"error",message:u("stepOne.uploader.validation.typeError",{ns:"datasetCreation"})});let r=t<=1024*S.file_size_limit*1024;return r||x({type:"error",message:u("stepOne.uploader.validation.size",{ns:"datasetCreation",size:S.file_size_limit})}),s&&r},[S,x,u,T]),R=(0,i.useCallback)(async e=>{let t=new FormData;return t.append("file",e.file),(0,k.upload)({xhr:new XMLHttpRequest,data:t,onprogress:t=>{t.lengthComputable&&o(e,Math.floor(t.loaded/t.total*100),I.current)}},!1,void 0,"?source=datasets").then(t=>{let a={fileID:e.fileID,file:t,progress:-1},s=I.current.findIndex(t=>t.fileID===e.fileID);return I.current[s]=a,o(a,100,I.current),Promise.resolve({...a})}).catch(t=>(x({type:"error",message:(0,ea.getFileUploadErrorMessage)(t,u("stepOne.uploader.failed",{ns:"datasetCreation"}),u)}),o(e,-2,I.current),Promise.resolve({...e}))).finally()},[I,x,o,u]),L=(0,i.useCallback)(e=>(e.forEach(e=>e.progress=0),Promise.all(e.map(R))),[R]),O=(0,i.useCallback)(async e=>{let t=S.batch_count_limit,a=e.length,s=0,r=0;for(;s<a;){r=s+t>a?a:s+t;let n=e.slice(s,r);await L(n),s=r}},[S,L]),$=(0,i.useCallback)(e=>{let t=S.file_upload_limit;if(!e.length)return!1;if(e.length+a.length>t&&!er.IS_CE_EDITION)return x({type:"error",message:u("stepOne.uploader.validation.filesNumber",{ns:"datasetCreation",filesNumber:t})}),!1;let s=e.map((e,t)=>({fileID:`file${t}-${Date.now()}`,file:e,progress:-1})),r=[...I.current,...s];n(r),I.current=r,O(s)},[n,O,x,u,a,S]),M=e=>{e.preventDefault(),e.stopPropagation(),e.target!==v.current&&g(!0)},F=e=>{e.preventDefault(),e.stopPropagation()},A=e=>{e.preventDefault(),e.stopPropagation(),e.target===v.current&&g(!1)},B=(0,i.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise(a=>{if(e.isFile)e.file(e=>{e.relativePath=`${t}${e.name}`,a([e])});else if(e.isDirectory){let s=e.createReader(),r=[],n=()=>{s.readEntries(async s=>{s.length?(r.push(...s),n()):a((await Promise.all(r.map(a=>B(a,`${t}${e.name}/`)))).flat())})};n()}else a([])})},[]),q=(0,i.useCallback)(async e=>{if(e.preventDefault(),e.stopPropagation(),g(!1),!e.dataTransfer)return;let t=(await Promise.all(Array.from(e.dataTransfer.items).map(e=>{let t=e.webkitGetAsEntry?.();if(t)return B(t);let a=e.getAsFile?.();return a?Promise.resolve([a]):Promise.resolve([])}))).flat();m||(t=t.slice(0,1)),$((t=t.slice(0,S.batch_count_limit)).filter(P))},[$,P,m,B,S]),z=(0,i.useCallback)(e=>{let t=Array.from(e.target.files??[]);$((t=t.slice(0,S.batch_count_limit)).filter(P))},[P,$,S]),{theme:W}=(0,ei.default)(),U=(0,i.useMemo)(()=>W===ed.Theme.dark?"#5289ff":"#296dff",[W]);return(0,i.useEffect)(()=>(f.current?.addEventListener("dragenter",M),f.current?.addEventListener("dragover",F),f.current?.addEventListener("dragleave",A),f.current?.addEventListener("drop",q),()=>{f.current?.removeEventListener("dragenter",M),f.current?.removeEventListener("dragover",F),f.current?.removeEventListener("dragleave",A),f.current?.removeEventListener("drop",q)}),[q]),(0,r.jsxs)("div",{className:"mb-5 w-[640px]",children:[!w&&(0,r.jsx)("input",{ref:j,id:"fileUploader",className:"hidden",type:"file",multiple:m,accept:T.join(","),onChange:z}),(0,r.jsx)("div",{className:(0,E.cn)("mb-1 text-sm font-semibold leading-6 text-text-secondary",s),children:u("stepOne.uploader.title",{ns:"datasetCreation"})}),!w&&(0,r.jsxs)("div",{ref:f,className:(0,E.cn)("relative mb-2 box-border flex min-h-20 max-w-[640px] flex-col items-center justify-center gap-1 rounded-xl border border-dashed border-components-dropzone-border bg-components-dropzone-bg px-4 py-3 text-xs leading-4 text-text-tertiary",h&&"border-components-dropzone-border-accent bg-components-dropzone-bg-accent"),children:[(0,r.jsxs)("div",{className:"flex min-h-5 items-center justify-center text-sm leading-4 text-text-secondary",children:[(0,r.jsx)(b.RiUploadCloud2Line,{className:"mr-2 size-5"}),(0,r.jsxs)("span",{children:[m?u("stepOne.uploader.button",{ns:"datasetCreation"}):u("stepOne.uploader.buttonSingleFile",{ns:"datasetCreation"}),y.length>0&&(0,r.jsx)("label",{className:"ml-1 cursor-pointer text-text-accent",onClick:()=>{j.current&&j.current.click()},children:u("stepOne.uploader.browse",{ns:"datasetCreation"})})]})]}),(0,r.jsx)("div",{children:u("stepOne.uploader.tip",{ns:"datasetCreation",size:S.file_size_limit,supportTypes:_,batchCount:S.batch_count_limit,totalCount:S.file_upload_limit})}),h&&(0,r.jsx)("div",{ref:v,className:"absolute left-0 top-0 h-full w-full"})]}),(0,r.jsx)("div",{className:"max-w-[640px] cursor-default space-y-1",children:a.map((e,t)=>{var a;return(0,r.jsxs)("div",{onClick:()=>e.file?.id&&c(e.file),className:(0,E.cn)("flex h-12 max-w-[640px] items-center rounded-lg border border-components-panel-border bg-components-panel-on-panel-item-bg text-xs leading-3 text-text-tertiary shadow-xs"),children:[(0,r.jsx)("div",{className:"flex w-12 shrink-0 items-center justify-center",children:(0,r.jsx)(ec.default,{size:"xl",className:"shrink-0",name:e.file.name,extension:D(e.file)})}),(0,r.jsxs)("div",{className:"flex shrink grow flex-col gap-0.5",children:[(0,r.jsx)("div",{className:"flex w-full",children:(0,r.jsx)("div",{className:"w-0 grow truncate text-sm leading-4 text-text-secondary",children:e.file.name})}),(0,r.jsxs)("div",{className:"w-full truncate leading-3 text-text-tertiary",children:[(0,r.jsx)("span",{className:"uppercase",children:D(e.file)}),(0,r.jsx)("span",{className:"px-1 text-text-quaternary",children:"Â·"}),(0,r.jsx)("span",{children:(a=e.file.size)/1024<10?`${(a/1024).toFixed(2)}KB`:`${(a/1024/1024).toFixed(2)}MB`})]})]}),(0,r.jsxs)("div",{className:"flex w-16 shrink-0 items-center justify-end gap-1 pr-3",children:[e.progress<100&&e.progress>=0&&(0,r.jsx)(es.default,{percentage:e.progress,stroke:U,fill:U,animationDuration:0}),(0,r.jsx)("span",{className:"flex h-6 w-6 cursor-pointer items-center justify-center",onClick:t=>{var a;t.stopPropagation(),a=e.fileID,j.current&&(j.current.value=""),I.current=I.current.filter(e=>e.fileID!==a),d?.([...I.current])},children:(0,r.jsx)(b.RiDeleteBinLine,{className:"size-4 text-text-tertiary"})})]})]},`${e.fileID}-${t}`)})})]})};var eu=e.i(842090),ex=e.i(198269);let ep=i.memo(e=>{let{isPreview:t,payload:a,isChecked:s,onCheckChange:n,onPreview:o,testId:d}=e,{t:c}=(0,l.useTranslation)(),m=(0,i.useCallback)(()=>{n(!s)},[s,n]);return(0,r.jsx)("div",{className:(0,E.cn)(t?"bg-state-base-active":"group hover:bg-state-base-hover","cursor-pointer rounded-lg p-2"),children:(0,r.jsxs)("div",{className:"relative flex",children:[(0,r.jsx)("div",{className:"flex h-5 items-center",children:(0,r.jsx)($.default,{className:"mr-2 shrink-0",checked:s,onCheck:m,id:d})}),(0,r.jsxs)("div",{className:"flex min-w-0 grow flex-col",children:[(0,r.jsx)("div",{className:"truncate text-sm font-medium text-text-secondary",title:a.title,children:a.title}),(0,r.jsx)("div",{className:"mt-0.5 truncate text-xs text-text-tertiary",title:a.source_url,children:a.source_url})]}),(0,r.jsx)(j.default,{onClick:o,className:"right-0 top-0 hidden h-6 px-1.5 text-xs font-medium uppercase group-hover:absolute group-hover:block",children:c("stepOne.website.preview",{ns:"datasetCreation"})})]})})}),eh="stepOne.website",eg=i.memo(e=>{let{className:t="",list:a,checkedList:s,onSelectedChange:n,onPreview:o,usedTime:d}=e,{t:c}=(0,l.useTranslation)(),m=s.length===a.length,u=(0,i.useCallback)(()=>{m?n([]):n(a)},[m,a,n]),x=(0,i.useCallback)(e=>t=>{t?n([...s,e]):n(s.filter(t=>t.source_url!==e.source_url))},[s,n]),[p,h]=i.useState(-1),g=(0,i.useCallback)(e=>()=>{h(e),o(a[e])},[a,o]);return(0,r.jsxs)("div",{className:(0,E.cn)(t,"border-t-[0.5px] border-divider-regular shadow-xs shadow-shadow-shadow-3"),children:[(0,r.jsxs)("div",{className:"flex h-[34px] items-center justify-between px-4",children:[(0,r.jsx)(ex.default,{isChecked:m,onChange:u,label:c(m?`${eh}.resetAll`:`${eh}.selectAll`,{ns:"datasetCreation"}),labelClassName:"system-[13px] leading-[16px] font-medium text-text-secondary",testId:"select-all"}),(0,r.jsx)("div",{className:"text-xs text-text-tertiary",children:c(`${eh}.scrapTimeInfo`,{ns:"datasetCreation",total:a.length,time:d.toFixed(1)})})]}),(0,r.jsx)("div",{className:"p-2",children:a.map((e,t)=>(0,r.jsx)(ep,{isPreview:t===p,onPreview:g(t),payload:e,isChecked:s.some(t=>t.source_url===e.source_url),onCheckChange:x(e),testId:`item-${t}`},e.source_url))})]})});e.i(8482);var ef=e.i(706248),ef=ef;let eb=i.memo(e=>{let{className:t="",crawledNum:a,totalNum:s}=e,{t:n}=(0,l.useTranslation)();return(0,r.jsxs)("div",{className:t,children:[(0,r.jsxs)("div",{className:"flex h-[34px] items-center border-y-[0.5px] border-divider-regular px-4 text-xs text-text-tertiary shadow-xs shadow-shadow-shadow-3",children:[n("stepOne.website.totalPageScraped",{ns:"datasetCreation"})," ",a,"/",s]}),(0,r.jsx)("div",{className:"p-2",children:["","","",""].map((e,t)=>(0,r.jsx)("div",{className:"py-[5px]",children:(0,r.jsx)(ef.default,{className:"text-text-quaternary"})},t))})]})});e.i(793622);var ev=e.i(259509);let ej=i.memo(e=>{let{className:t,title:a,errorMsg:s}=e;return(0,r.jsxs)("div",{className:(0,E.cn)(t,"border-t border-divider-subtle bg-dataset-warning-message-bg px-4 py-2 opacity-40"),children:[(0,r.jsxs)("div",{className:"flex h-5 items-center",children:[(0,r.jsx)(ev.AlertTriangle,{className:"mr-2 h-4 w-4 text-text-warning-secondary"}),(0,r.jsx)("div",{className:"system-md-medium text-text-warning",children:a})]}),s&&(0,r.jsx)("div",{className:"system-xs-regular mt-1 pl-6 text-text-secondary",children:s})]})});e.i(668763);var ew=e.i(649538);let eC=i.memo(e=>{let{className:t="",children:a,controlFoldOptions:s}=e,{t:n}=(0,l.useTranslation)(),[o,{toggle:d,setTrue:c}]=(0,v.useBoolean)(!1);return(0,i.useEffect)(()=>{s&&c()},[s]),(0,r.jsxs)("div",{className:(0,E.cn)(t,o?"mb-3":"mb-0"),children:[(0,r.jsxs)("div",{className:"flex h-[26px] cursor-pointer select-none items-center gap-x-1 py-1",onClick:d,children:[(0,r.jsxs)("div",{className:"flex grow items-center",children:[(0,r.jsx)(b.RiEqualizer2Line,{className:"mr-1 h-4 w-4 text-text-secondary"}),(0,r.jsx)("span",{className:"text-[13px] font-semibold uppercase leading-[16px] text-text-secondary",children:n("stepOne.website.options",{ns:"datasetCreation"})})]}),(0,r.jsx)(ew.ChevronRight,{className:(0,E.cn)(!o&&"rotate-90","h-4 w-4 shrink-0 text-text-tertiary")})]}),!o&&(0,r.jsx)("div",{className:"mb-4",children:a})]})}),eN=i.memo(e=>{let{value:t,onChange:a,placeholder:s="",isNumber:n=!1}=e,l=(0,i.useCallback)(e=>{let t=e.target.value;if(n){let e=Number.parseInt(t,10);return Number.isNaN(e)?void a(""):(e<0&&(e=0),void a(e))}a(t)},[n,a]),o=n?{min:0}:{};return(0,r.jsx)("input",{type:n?"number":"text",...o,value:t,onChange:l,className:"system-xs-regular focus:bg-components-inout-border-active flex h-8 w-full rounded-lg border border-transparent bg-components-input-bg-normal p-2 text-components-input-text-filled caret-[#295eff] placeholder:text-components-input-text-placeholder hover:border hover:border-components-input-border-hover hover:bg-components-input-bg-hover focus:border focus:border-components-input-border-active focus:shadow-xs focus:shadow-shadow-shadow-3 focus-visible:outline-none",placeholder:s})}),ey=i.memo(e=>{let{isRunning:t,onRun:a}=e,{t:s}=(0,l.useTranslation)(),n=(0,en.useDocLink)(),[o,d]=(0,i.useState)(""),c=(0,i.useCallback)(e=>{d(e)},[]),m=(0,i.useCallback)(()=>{t||a(o)},[t,a,o]);return(0,r.jsxs)("div",{className:"flex items-center justify-between gap-x-2",children:[(0,r.jsx)(eN,{value:o,onChange:c,placeholder:n()}),(0,r.jsx)(j.default,{variant:"primary",onClick:m,loading:t,spinnerClassName:"!ml-0",children:t?"":s("stepOne.website.run",{ns:"datasetCreation"})})]})});var e_=e.i(421001);let ek=i.memo(e=>{let{className:t,label:a,labelClassName:s,value:n,onChange:i,isRequired:l=!1,placeholder:o="",isNumber:d=!1,tooltip:c}=e;return(0,r.jsxs)("div",{className:(0,E.cn)(t),children:[(0,r.jsxs)("div",{className:"flex py-[7px]",children:[(0,r.jsxs)("div",{className:(0,E.cn)(s,"flex h-[16px] items-center text-[13px] font-semibold text-text-secondary"),children:[a," "]}),l&&(0,r.jsx)("span",{className:"ml-0.5 text-xs font-semibold text-text-destructive",children:"*"}),c&&(0,r.jsx)(e_.default,{popupContent:(0,r.jsx)("div",{className:"w-[200px]",children:c}),triggerClassName:"ml-0.5 w-4 h-4"})]}),(0,r.jsx)(eN,{value:n,onChange:i,placeholder:o,isNumber:d})]})}),eT="stepOne.website",eS=i.memo(e=>{let{className:t="",payload:a,onChange:s}=e,{t:n}=(0,l.useTranslation)(),o=(0,i.useCallback)(e=>t=>{s({...a,[e]:t})},[a,s]);return(0,r.jsxs)("div",{className:(0,E.cn)(t," space-y-2"),children:[(0,r.jsx)(ex.default,{label:n(`${eT}.crawlSubPage`,{ns:"datasetCreation"}),isChecked:a.crawl_sub_pages,onChange:o("crawl_sub_pages"),labelClassName:"text-[13px] leading-[16px] font-medium text-text-secondary"}),(0,r.jsxs)("div",{className:"flex justify-between space-x-4",children:[(0,r.jsx)(ek,{className:"shrink-0 grow",label:n(`${eT}.limit`,{ns:"datasetCreation"}),value:a.limit,onChange:o("limit"),isNumber:!0,isRequired:!0}),(0,r.jsx)(ek,{className:"shrink-0 grow",label:n(`${eT}.maxDepth`,{ns:"datasetCreation"}),value:a.max_depth,onChange:o("max_depth"),isNumber:!0,tooltip:n(`${eT}.maxDepthTooltip`,{ns:"datasetCreation"})})]}),(0,r.jsxs)("div",{className:"flex justify-between space-x-4",children:[(0,r.jsx)(ek,{className:"shrink-0 grow",label:n(`${eT}.excludePaths`,{ns:"datasetCreation"}),value:a.excludes,onChange:o("excludes"),placeholder:"blog/*, /about/*"}),(0,r.jsx)(ek,{className:"shrink-0 grow",label:n(`${eT}.includeOnlyPaths`,{ns:"datasetCreation"}),value:a.includes,onChange:o("includes"),placeholder:"articles/*"})]}),(0,r.jsx)(ex.default,{label:n(`${eT}.extractOnlyMainContent`,{ns:"datasetCreation"}),isChecked:a.only_main_content,onChange:o("only_main_content"),labelClassName:"text-[13px] leading-[16px] font-medium text-text-secondary"})]})}),eE="errorMsg",eI="stepOne.website";var eD=((t=eD||{}).init="init",t.running="running",t.finished="finished",t);let eP=i.memo(e=>{let{onPreview:t,checkedCrawlResult:a,onCheckedCrawlResultChange:s,onJobIdChange:n,crawlOptions:o,onCrawlOptionsChange:c}=e,{t:m}=(0,l.useTranslation)(),[x,p]=(0,i.useState)("init"),[h,g]=(0,i.useState)(0);(0,i.useEffect)(()=>{"init"!==x&&g(Date.now())},[x]);let f=(0,u.useModalContextSelector)(e=>e.setShowAccountSettingModal),b=(0,i.useCallback)(()=>{f({payload:d.ACCOUNT_SETTING_TAB.DATA_SOURCE})},[f]),v=(0,i.useCallback)(e=>{let t="";return e||(t=m(`${eE}.fieldRequired`,{ns:"common",field:"url"})),t||e.startsWith("http://")||e.startsWith("https://")||(t=m(`${eE}.urlError`,{ns:"common"})),t||null!==o.limit&&void 0!==o.limit&&""!==o.limit||(t=m(`${eE}.fieldRequired`,{ns:"common",field:m(`${eI}.limit`,{ns:"datasetCreation"})})),{isValid:!t,errorMsg:t}},[o,m]),j="init"===x,w="finished"===x,C="running"===x,[N,y]=(0,i.useState)(void 0),[_,k]=(0,i.useState)(""),T=w&&_,S=(0,i.useCallback)(async e=>{try{let t=await (0,Y.checkFirecrawlTaskStatus)(e);if("completed"===t.status)return{isError:!1,data:{...t,total:Math.min(t.total,Number.parseFloat(o.limit))}};if("error"===t.status||!t.status)return{isError:!0,errorMessage:t.message,data:{data:[]}};return t.data=t.data.map(e=>({...e,content:e.markdown})),y({...t,total:Math.min(t.total,Number.parseFloat(o.limit))}),s(t.data||[]),await (0,eu.sleep)(2500),await S(e)}catch(e){return{isError:!0,errorMessage:(await e.json()).message,data:{data:[]}}}},[o.limit,s]),E=(0,i.useCallback)(async e=>{let{isValid:t,errorMsg:a}=v(e);if(!t)return void X.default.notify({message:a,type:"error"});p("running");try{let t={...o};""===o.max_depth&&delete t.max_depth;let a=(await (0,Y.createFirecrawlTask)({url:e,options:t})).job_id;n(a);let{isError:r,data:i,errorMessage:l}=await S(a);r?k(l||m(`${eI}.unknownError`,{ns:"datasetCreation"})):(y(i),s(i.data||[]),k(""))}catch(e){k(m(`${eI}.unknownError`,{ns:"datasetCreation"}))}finally{p("finished")}},[v,o,n,m,S,s]);return(0,r.jsxs)("div",{children:[(0,r.jsx)(I,{onClickConfiguration:b,title:m(`${eI}.firecrawlTitle`,{ns:"datasetCreation"}),buttonText:m(`${eI}.configureFirecrawl`,{ns:"datasetCreation"}),docTitle:m(`${eI}.firecrawlDoc`,{ns:"datasetCreation"}),docLink:"https://docs.firecrawl.dev/introduction"}),(0,r.jsxs)("div",{className:"mt-2 rounded-xl border border-components-panel-border bg-background-default-subtle p-4 pb-0",children:[(0,r.jsx)(ey,{onRun:E,isRunning:C}),(0,r.jsx)(eC,{className:"mt-4",controlFoldOptions:h,children:(0,r.jsx)(eS,{className:"mt-2",payload:o,onChange:c})}),!j&&(0,r.jsxs)("div",{className:"relative left-[-16px] mt-3 w-[calc(100%_+_32px)] rounded-b-xl",children:[C&&(0,r.jsx)(eb,{className:"mt-2",crawledNum:N?.current||0,totalNum:N?.total||Number.parseFloat(o.limit)||0}),T&&(0,r.jsx)(ej,{className:"rounded-b-xl",title:m(`${eI}.exceptionErrorTitle`,{ns:"datasetCreation"}),errorMsg:_}),w&&!T&&(0,r.jsx)(eg,{className:"mb-2",list:N?.data||[],checkedList:a,onSelectedChange:s,onPreview:t,usedTime:Number.parseFloat(N?.time_consuming)||0})]})]})]})});var eR=e.i(752043);let eL="stepOne.website",eO=i.memo(e=>{let{className:t="",payload:a,onChange:s}=e,{t:n}=(0,l.useTranslation)(),o=(0,i.useCallback)(e=>t=>{s({...a,[e]:t})},[a,s]);return(0,r.jsxs)("div",{className:(0,E.cn)(t," space-y-2"),children:[(0,r.jsx)(ex.default,{label:n(`${eL}.crawlSubPage`,{ns:"datasetCreation"}),isChecked:a.crawl_sub_pages,onChange:o("crawl_sub_pages"),labelClassName:"text-[13px] leading-[16px] font-medium text-text-secondary",testId:"crawl-sub-pages"}),(0,r.jsx)(ex.default,{label:n(`${eL}.useSitemap`,{ns:"datasetCreation"}),isChecked:a.use_sitemap,onChange:o("use_sitemap"),tooltip:n(`${eL}.useSitemapTooltip`,{ns:"datasetCreation"}),labelClassName:"text-[13px] leading-[16px] font-medium text-text-secondary",testId:"use-sitemap"}),(0,r.jsx)("div",{className:"flex justify-between space-x-4",children:(0,r.jsx)(ek,{className:"shrink-0 grow",label:n(`${eL}.limit`,{ns:"datasetCreation"}),value:a.limit,onChange:o("limit"),isNumber:!0,isRequired:!0})})]})}),e$="errorMsg",eM="stepOne.website";var eF=((a=eF||{}).init="init",a.running="running",a.finished="finished",a);let eA=i.memo(e=>{let{onPreview:t,checkedCrawlResult:a,onCheckedCrawlResultChange:s,onJobIdChange:n,crawlOptions:o,onCrawlOptionsChange:c}=e,{t:m}=(0,l.useTranslation)(),[x,p]=(0,i.useState)("init"),[h,g]=(0,i.useState)(0);(0,i.useEffect)(()=>{"init"!==x&&g(Date.now())},[x]);let{setShowAccountSettingModal:f}=(0,u.useModalContext)(),b=(0,i.useCallback)(()=>{f({payload:d.ACCOUNT_SETTING_TAB.DATA_SOURCE})},[f]),v=(0,i.useCallback)(e=>{let t="";return e||(t=m(`${e$}.fieldRequired`,{ns:"common",field:"url"})),t||e.startsWith("http://")||e.startsWith("https://")||(t=m(`${e$}.urlError`,{ns:"common"})),t||null!==o.limit&&void 0!==o.limit&&""!==o.limit||(t=m(`${e$}.fieldRequired`,{ns:"common",field:m(`${eM}.limit`,{ns:"datasetCreation"})})),{isValid:!t,errorMsg:t}},[o,m]),j="init"===x,w="finished"===x,C="running"===x,[N,y]=(0,i.useState)(void 0),[_,k]=(0,i.useState)(""),T=w&&_,S=(0,i.useCallback)(async e=>{try{let t=await (0,Y.checkJinaReaderTaskStatus)(e);if("completed"===t.status)return{isError:!1,data:{...t,total:Math.min(t.total,Number.parseFloat(o.limit))}};if("failed"===t.status||!t.status)return{isError:!0,errorMessage:t.message,data:{data:[]}};return y({...t,total:Math.min(t.total,Number.parseFloat(o.limit))}),s(t.data||[]),await (0,eu.sleep)(2500),await S(e)}catch(e){return{isError:!0,errorMessage:(await e.json()).message,data:{data:[]}}}},[o.limit,s]),E=(0,i.useCallback)(async e=>{let{isValid:t,errorMsg:a}=v(e);if(!t)return void X.default.notify({message:a,type:"error"});p("running");try{let t=Date.now(),a=await (0,Y.createJinaReaderTask)({url:e,options:o});if(a.data){let{title:e,content:r,description:n,url:i}=a.data,l={current:1,total:1,data:[{title:e,markdown:r,description:n,source_url:i}],time_consuming:(Date.now()-t)/1e3};y(l),s(l.data||[]),k("")}else if(a.job_id){let e=a.job_id;n(e);let{isError:t,data:r,errorMessage:i}=await S(e);t?k(i||m(`${eM}.unknownError`,{ns:"datasetCreation"})):(y(r),s(r.data||[]),k(""))}}catch(e){k(m(`${eM}.unknownError`,{ns:"datasetCreation"}))}finally{p("finished")}},[v,o,s,n,m,S]);return(0,r.jsxs)("div",{children:[(0,r.jsx)(I,{onClickConfiguration:b,title:m(`${eM}.jinaReaderTitle`,{ns:"datasetCreation"}),buttonText:m(`${eM}.configureJinaReader`,{ns:"datasetCreation"}),docTitle:m(`${eM}.jinaReaderDoc`,{ns:"datasetCreation"}),docLink:"https://jina.ai/reader"}),(0,r.jsxs)("div",{className:"mt-2 rounded-xl border border-components-panel-border bg-background-default-subtle p-4 pb-0",children:[(0,r.jsx)(ey,{onRun:E,isRunning:C}),(0,r.jsx)(eC,{className:"mt-4",controlFoldOptions:h,children:(0,r.jsx)(eO,{className:"mt-2",payload:o,onChange:c})}),!j&&(0,r.jsxs)("div",{className:"relative left-[-16px] mt-3 w-[calc(100%_+_32px)] rounded-b-xl",children:[C&&(0,r.jsx)(eb,{className:"mt-2",crawledNum:N?.current||0,totalNum:N?.total||Number.parseFloat(o.limit)||0}),T&&(0,r.jsx)(ej,{className:"rounded-b-xl",title:m(`${eM}.exceptionErrorTitle`,{ns:"datasetCreation"}),errorMsg:_}),w&&!T&&(0,r.jsx)(eg,{className:"mb-2",list:N?.data||[],checkedList:a,onSelectedChange:s,onPreview:t,usedTime:Number.parseFloat(N?.time_consuming)||0})]})]})]})});var C=C;let eB="stepOne.website",eq=i.memo(e=>{let{onConfig:t,provider:a}=e,{t:s}=(0,l.useTranslation)(),n={[x.DataSourceProvider.jinaReader]:er.ENABLE_WEBSITE_JINAREADER?{emoji:(0,r.jsx)("span",{className:eR.default.jinaLogo}),title:s(`${eB}.jinaReaderNotConfigured`,{ns:"datasetCreation"}),description:s(`${eB}.jinaReaderNotConfiguredDescription`,{ns:"datasetCreation"})}:null,[x.DataSourceProvider.fireCrawl]:er.ENABLE_WEBSITE_FIRECRAWL?{emoji:"ðŸ”¥",title:s(`${eB}.fireCrawlNotConfigured`,{ns:"datasetCreation"}),description:s(`${eB}.fireCrawlNotConfiguredDescription`,{ns:"datasetCreation"})}:null,[x.DataSourceProvider.waterCrawl]:er.ENABLE_WEBSITE_WATERCRAWL?{emoji:"ðŸ’§",title:s(`${eB}.waterCrawlNotConfigured`,{ns:"datasetCreation"}),description:s(`${eB}.waterCrawlNotConfiguredDescription`,{ns:"datasetCreation"})}:null},i=n[a]||n.jinareader;return i?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"mt-4 max-w-[640px] rounded-2xl bg-workflow-process-bg p-6",children:[(0,r.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-[10px] border-[0.5px] border-components-card-border bg-components-card-bg shadow-lg shadow-shadow-shadow-5 backdrop-blur-[5px]",children:i.emoji}),(0,r.jsxs)("div",{className:"mb-1 mt-2 flex flex-col gap-y-1 pb-3 pt-1",children:[(0,r.jsxs)("span",{className:"system-md-semibold text-text-secondary",children:[i.title,(0,r.jsx)(C.default,{className:"relative -left-1.5 -top-2.5 inline"})]}),(0,r.jsx)("div",{className:"system-sm-regular text-text-tertiary",children:i.description})]}),(0,r.jsx)(j.default,{variant:"primary",onClick:t,children:s(`${eB}.configure`,{ns:"datasetCreation"})})]})}):null}),ez="stepOne.website",eW=i.memo(e=>{let{className:t="",payload:a,onChange:s}=e,{t:n}=(0,l.useTranslation)(),o=(0,i.useCallback)(e=>t=>{s({...a,[e]:t})},[a,s]);return(0,r.jsxs)("div",{className:(0,E.cn)(t," space-y-2"),children:[(0,r.jsx)(ex.default,{label:n(`${ez}.crawlSubPage`,{ns:"datasetCreation"}),isChecked:a.crawl_sub_pages,onChange:o("crawl_sub_pages"),labelClassName:"text-[13px] leading-[16px] font-medium text-text-secondary",testId:"crawl-sub-pages"}),(0,r.jsxs)("div",{className:"flex justify-between space-x-4",children:[(0,r.jsx)(ek,{className:"shrink-0 grow",label:n(`${ez}.limit`,{ns:"datasetCreation"}),value:a.limit,onChange:o("limit"),isNumber:!0,isRequired:!0}),(0,r.jsx)(ek,{className:"shrink-0 grow",label:n(`${ez}.maxDepth`,{ns:"datasetCreation"}),value:a.max_depth,onChange:o("max_depth"),isNumber:!0,tooltip:n(`${ez}.maxDepthTooltip`,{ns:"datasetCreation"})})]}),(0,r.jsxs)("div",{className:"flex justify-between space-x-4",children:[(0,r.jsx)(ek,{className:"shrink-0 grow",label:n(`${ez}.excludePaths`,{ns:"datasetCreation"}),value:a.excludes,onChange:o("excludes"),placeholder:"blog/*, /about/*"}),(0,r.jsx)(ek,{className:"shrink-0 grow",label:n(`${ez}.includeOnlyPaths`,{ns:"datasetCreation"}),value:a.includes,onChange:o("includes"),placeholder:"articles/*"})]}),(0,r.jsx)(ex.default,{label:n(`${ez}.extractOnlyMainContent`,{ns:"datasetCreation"}),isChecked:a.only_main_content,onChange:o("only_main_content"),labelClassName:"text-[13px] leading-[16px] font-medium text-text-secondary",testId:"only-main-content"})]})}),eU="errorMsg",eG="stepOne.website";var eV=((s=eV||{}).init="init",s.running="running",s.finished="finished",s);let eH=i.memo(e=>{let{onPreview:t,checkedCrawlResult:a,onCheckedCrawlResultChange:s,onJobIdChange:n,crawlOptions:o,onCrawlOptionsChange:c}=e,{t:m}=(0,l.useTranslation)(),[x,p]=(0,i.useState)("init"),[h,g]=(0,i.useState)(0);(0,i.useEffect)(()=>{"init"!==x&&g(Date.now())},[x]);let{setShowAccountSettingModal:f}=(0,u.useModalContext)(),b=(0,i.useCallback)(()=>{f({payload:d.ACCOUNT_SETTING_TAB.DATA_SOURCE})},[f]),v=(0,i.useCallback)(e=>{let t="";return e||(t=m(`${eU}.fieldRequired`,{ns:"common",field:"url"})),t||e.startsWith("http://")||e.startsWith("https://")||(t=m(`${eU}.urlError`,{ns:"common"})),t||null!==o.limit&&void 0!==o.limit&&""!==o.limit||(t=m(`${eU}.fieldRequired`,{ns:"common",field:m(`${eG}.limit`,{ns:"datasetCreation"})})),{isValid:!t,errorMsg:t}},[o,m]),j="init"===x,w="finished"===x,C="running"===x,[N,y]=(0,i.useState)(void 0),[_,k]=(0,i.useState)(""),T=w&&_,S=(0,i.useCallback)(async e=>{try{let t=await (0,Y.checkWatercrawlTaskStatus)(e);if("completed"===t.status)return{isError:!1,data:{...t,total:Math.min(t.total,Number.parseFloat(o.limit))}};if("error"===t.status||!t.status)return{isError:!0,errorMessage:t.message,data:{data:[]}};return y({...t,total:Math.min(t.total,Number.parseFloat(o.limit))}),s(t.data||[]),await (0,eu.sleep)(2500),await S(e)}catch(t){let e="";if(t?.json)try{let a=await t.json();"string"==typeof a?.message&&(e=a.message)}catch{}return e||"string"!=typeof t?.message||(e=t.message),{isError:!0,errorMessage:e,data:{data:[]}}}},[o.limit,s]),E=(0,i.useCallback)(async e=>{let{isValid:t,errorMsg:a}=v(e);if(!t)return void X.default.notify({message:a,type:"error"});p("running");try{let t={...o};""===o.max_depth&&delete t.max_depth;let a=(await (0,Y.createWatercrawlTask)({url:e,options:t})).job_id;n(a);let{isError:r,data:i,errorMessage:l}=await S(a);r?k(l||m(`${eG}.unknownError`,{ns:"datasetCreation"})):(y(i),s(i.data||[]),k(""))}catch(e){k(m(`${eG}.unknownError`,{ns:"datasetCreation"}))}finally{p("finished")}},[v,o,s,n,m,S]);return(0,r.jsxs)("div",{children:[(0,r.jsx)(I,{onClickConfiguration:b,title:m(`${eG}.watercrawlTitle`,{ns:"datasetCreation"}),buttonText:m(`${eG}.configureWatercrawl`,{ns:"datasetCreation"}),docTitle:m(`${eG}.watercrawlDoc`,{ns:"datasetCreation"}),docLink:"https://docs.watercrawl.dev/"}),(0,r.jsxs)("div",{className:"mt-2 rounded-xl border border-components-panel-border bg-background-default-subtle p-4 pb-0",children:[(0,r.jsx)(ey,{onRun:E,isRunning:C}),(0,r.jsx)(eC,{className:"mt-4",controlFoldOptions:h,children:(0,r.jsx)(eW,{className:"mt-2",payload:o,onChange:c})}),!j&&(0,r.jsxs)("div",{className:"relative left-[-16px] mt-3 w-[calc(100%_+_32px)] rounded-b-xl",children:[C&&(0,r.jsx)(eb,{className:"mt-2",crawledNum:N?.current||0,totalNum:N?.total||Number.parseFloat(o.limit)||0}),T&&(0,r.jsx)(ej,{className:"rounded-b-xl",title:m(`${eG}.exceptionErrorTitle`,{ns:"datasetCreation"}),errorMsg:_}),w&&!T&&(0,r.jsx)(eg,{className:"mb-2",list:N?.data||[],checkedList:a,onSelectedChange:s,onPreview:t,usedTime:Number.parseFloat(N?.time_consuming)||0})]})]})]})}),eQ=i.memo(e=>{let{onPreview:t,checkedCrawlResult:a,onCheckedCrawlResultChange:s,onCrawlProviderChange:n,onJobIdChange:o,crawlOptions:c,onCrawlOptionsChange:m,authedDataSourceList:p}=e,{t:h}=(0,l.useTranslation)(),{setShowAccountSettingModal:g}=(0,u.useModalContext)(),[f,b]=(0,i.useState)(x.DataSourceProvider.jinaReader),v=(0,i.useMemo)(()=>p.filter(e=>[x.DataSourceProvider.jinaReader,x.DataSourceProvider.fireCrawl,x.DataSourceProvider.waterCrawl].includes(e.provider)&&e.credentials_list.length>0),[p]),j=(0,i.useCallback)(()=>{g({payload:d.ACCOUNT_SETTING_TAB.DATA_SOURCE})},[g]),w=v.find(e=>e.provider===f);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("div",{className:"system-md-medium mb-2 text-text-secondary",children:h("stepOne.website.chooseProvider",{ns:"datasetCreation"})}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[er.ENABLE_WEBSITE_JINAREADER&&(0,r.jsxs)("button",{type:"button",className:(0,E.cn)("flex items-center justify-center rounded-lg px-4 py-2",f===x.DataSourceProvider.jinaReader?"system-sm-medium border-[1.5px] border-components-option-card-option-selected-border bg-components-option-card-option-selected-bg text-text-primary":`system-sm-regular border border-components-option-card-option-border bg-components-option-card-option-bg text-text-secondary
                hover:border-components-option-card-option-border-hover hover:bg-components-option-card-option-bg-hover hover:shadow-xs hover:shadow-shadow-shadow-3`),onClick:()=>{b(x.DataSourceProvider.jinaReader),n(x.DataSourceProvider.jinaReader)},children:[(0,r.jsx)("span",{className:(0,E.cn)(eR.default.jinaLogo,"mr-2")}),(0,r.jsx)("span",{children:"Jina Reader"})]}),er.ENABLE_WEBSITE_FIRECRAWL&&(0,r.jsx)("button",{type:"button",className:(0,E.cn)("rounded-lg px-4 py-2",f===x.DataSourceProvider.fireCrawl?"system-sm-medium border-[1.5px] border-components-option-card-option-selected-border bg-components-option-card-option-selected-bg text-text-primary":`system-sm-regular border border-components-option-card-option-border bg-components-option-card-option-bg text-text-secondary
                hover:border-components-option-card-option-border-hover hover:bg-components-option-card-option-bg-hover hover:shadow-xs hover:shadow-shadow-shadow-3`),onClick:()=>{b(x.DataSourceProvider.fireCrawl),n(x.DataSourceProvider.fireCrawl)},children:"ðŸ”¥ Firecrawl"}),er.ENABLE_WEBSITE_WATERCRAWL&&(0,r.jsxs)("button",{type:"button",className:(0,E.cn)("flex items-center justify-center rounded-lg px-4 py-2",f===x.DataSourceProvider.waterCrawl?"system-sm-medium border-[1.5px] border-components-option-card-option-selected-border bg-components-option-card-option-selected-bg text-text-primary":`system-sm-regular border border-components-option-card-option-border bg-components-option-card-option-bg text-text-secondary
                hover:border-components-option-card-option-border-hover hover:bg-components-option-card-option-bg-hover hover:shadow-xs hover:shadow-shadow-shadow-3`),onClick:()=>{b(x.DataSourceProvider.waterCrawl),n(x.DataSourceProvider.waterCrawl)},children:[(0,r.jsx)("span",{className:(0,E.cn)(eR.default.watercrawlLogo,"mr-2")}),(0,r.jsx)("span",{children:"WaterCrawl"})]})]})]}),w&&f===x.DataSourceProvider.fireCrawl&&(0,r.jsx)(eP,{onPreview:t,checkedCrawlResult:a,onCheckedCrawlResultChange:s,onJobIdChange:o,crawlOptions:c,onCrawlOptionsChange:m}),w&&f===x.DataSourceProvider.waterCrawl&&(0,r.jsx)(eH,{onPreview:t,checkedCrawlResult:a,onCheckedCrawlResultChange:s,onJobIdChange:o,crawlOptions:c,onCrawlOptionsChange:m}),w&&f===x.DataSourceProvider.jinaReader&&(0,r.jsx)(eA,{onPreview:t,checkedCrawlResult:a,onCheckedCrawlResultChange:s,onJobIdChange:o,crawlOptions:c,onCrawlOptionsChange:m}),!w&&(0,r.jsx)(eq,{onConfig:j,provider:f})]})});var eJ=e.i(679499);let eK=[{type:p.DataSourceType.FILE,labelKey:"stepOne.dataSourceType.file"},{type:p.DataSourceType.NOTION,iconClass:eJ.default.notion,labelKey:"stepOne.dataSourceType.notion"},{type:p.DataSourceType.WEB,iconClass:eJ.default.web,labelKey:"stepOne.dataSourceType.web"}],eX=function(e){let{currentType:t,disabled:a,onChange:s,onClearPreviews:n}=e,{t:o}=(0,l.useTranslation)(),d=er.ENABLE_WEBSITE_FIRECRAWL||er.ENABLE_WEBSITE_JINAREADER||er.ENABLE_WEBSITE_WATERCRAWL,c=(0,i.useCallback)(e=>{a||(s(e),n(e))},[a,s,n]),m=(0,i.useMemo)(()=>eK.filter(e=>e.type!==p.DataSourceType.WEB||d),[d]);return(0,r.jsx)("div",{className:"mb-8 grid grid-cols-3 gap-4",children:m.map(e=>(0,r.jsxs)("div",{className:(0,E.cn)(eJ.default.dataSourceItem,"system-sm-medium",t===e.type&&eJ.default.active,a&&t!==e.type&&eJ.default.disabled),onClick:()=>c(e.type),children:[(0,r.jsx)("span",{className:(0,E.cn)(eJ.default.datasetIcon,e.iconClass)}),(0,r.jsx)("span",{title:o(e.labelKey,{ns:"datasetCreation"})||void 0,className:"truncate",children:o(e.labelKey,{ns:"datasetCreation"})})]},e.type))})},eY=function(e){let{disabled:t,onClick:a}=e,{t:s}=(0,l.useTranslation)();return(0,r.jsx)("div",{className:"flex max-w-[640px] justify-end gap-2",children:(0,r.jsx)(j.default,{disabled:t,variant:"primary",onClick:a,children:(0,r.jsxs)("span",{className:"flex gap-0.5 px-[10px]",children:[(0,r.jsx)("span",{className:"px-0.5",children:s("stepOne.button",{ns:"datasetCreation"})}),(0,r.jsx)(b.RiArrowRightLine,{className:"size-4"})]})})})};var eZ=e.i(878038),e0=e.i(653356),e1=e.i(81828),e2=e.i(917521);let e4=e=>{let{file:t,hidePreview:a}=e,{t:s}=(0,l.useTranslation)(),[n,d]=(0,i.useState)(""),[c,m]=(0,i.useState)(!0),u=async e=>{try{let t=await (0,e1.fetchFilePreview)({fileID:e});d(t.content),m(!1)}catch{}};return(0,i.useEffect)(()=>{t?.id&&(m(!0),u(t.id))},[t]),(0,r.jsxs)("div",{className:(0,E.cn)(e2.default.filePreview,"h-full"),children:[(0,r.jsxs)("div",{className:(0,E.cn)(e2.default.previewHeader),children:[(0,r.jsxs)("div",{className:(0,E.cn)(e2.default.title,"title-md-semi-bold"),children:[(0,r.jsx)("span",{children:s("stepOne.filePreview",{ns:"datasetCreation"})}),(0,r.jsx)("div",{className:"flex h-6 w-6 cursor-pointer items-center justify-center",onClick:a,children:(0,r.jsx)(e0.XMarkIcon,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:(0,E.cn)(e2.default.fileName,"system-xs-medium"),children:[(0,r.jsx)("span",{children:t?t.name.split(".").slice(0,-1).join():""}),(0,r.jsxs)("span",{className:(0,E.cn)(e2.default.filetype),children:[".",t?.extension]})]})]}),(0,r.jsxs)("div",{className:(0,E.cn)(e2.default.previewContent),children:[c&&(0,r.jsx)(o.default,{type:"area"}),!c&&(0,r.jsx)("div",{className:(0,E.cn)(e2.default.fileContent,"body-md-regular"),children:n})]})]})};var e5=e.i(54817);let e3=e=>{let{currentPage:t,notionCredentialId:a,hidePreview:s}=e,{t:n}=(0,l.useTranslation)(),[d,c]=(0,i.useState)(""),[m,u]=(0,i.useState)(!0),x=async()=>{if(t)try{let e=await (0,Y.fetchNotionPagePreview)({pageID:t.page_id,pageType:t.type,credentialID:a});c(e.content),u(!1)}catch{}};return(0,i.useEffect)(()=>{t&&(u(!0),x())},[t]),(0,r.jsxs)("div",{className:(0,E.cn)(e5.default.filePreview,"h-full"),children:[(0,r.jsxs)("div",{className:(0,E.cn)(e5.default.previewHeader),children:[(0,r.jsxs)("div",{className:(0,E.cn)(e5.default.title,"title-md-semi-bold"),children:[(0,r.jsx)("span",{children:n("stepOne.pagePreview",{ns:"datasetCreation"})}),(0,r.jsx)("div",{className:"flex h-6 w-6 cursor-pointer items-center justify-center",onClick:s,children:(0,r.jsx)(e0.XMarkIcon,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:(0,E.cn)(e5.default.fileName,"system-xs-medium"),children:[(0,r.jsx)(M.default,{className:"mr-1 shrink-0",type:"page",src:t?.page_icon}),t?.page_name]})]}),(0,r.jsxs)("div",{className:(0,E.cn)(e5.default.previewContent,"body-md-regular"),children:[m&&(0,r.jsx)(o.default,{type:"area"}),!m&&(0,r.jsx)("div",{className:(0,E.cn)(e5.default.fileContent,"body-md-regular"),children:d})]})]})},e6=e=>{let{payload:t,hidePreview:a}=e,{t:s}=(0,l.useTranslation)();return(0,r.jsxs)("div",{className:(0,E.cn)(e2.default.filePreview,"h-full"),children:[(0,r.jsxs)("div",{className:(0,E.cn)(e2.default.previewHeader),children:[(0,r.jsxs)("div",{className:(0,E.cn)(e2.default.title,"title-md-semi-bold"),children:[(0,r.jsx)("span",{children:s("stepOne.pagePreview",{ns:"datasetCreation"})}),(0,r.jsx)("div",{className:"flex h-6 w-6 cursor-pointer items-center justify-center",onClick:a,children:(0,r.jsx)(e0.XMarkIcon,{className:"h-4 w-4"})})]}),(0,r.jsx)("div",{className:"title-sm-semi-bold break-words text-text-primary",children:t.title}),(0,r.jsx)("div",{className:"system-xs-medium truncate text-text-tertiary",title:t.source_url,children:t.source_url})]}),(0,r.jsx)("div",{className:(0,E.cn)(e2.default.previewContent,"body-md-regular"),children:(0,r.jsx)("div",{className:(0,E.cn)(e2.default.fileContent),children:t.markdown})})]})},e9=function(e){let{currentFile:t,currentNotionPage:a,currentWebsite:s,notionCredentialId:n,isShowPlanUpgradeModal:i,hideFilePreview:o,hideNotionPagePreview:d,hideWebsitePreview:c,hidePlanUpgradeModal:m}=e,{t:u}=(0,l.useTranslation)();return(0,r.jsxs)("div",{className:"h-full w-1/2 overflow-y-auto",children:[t&&(0,r.jsx)(e4,{file:t,hidePreview:o}),a&&(0,r.jsx)(e3,{currentPage:a,hidePreview:d,notionCredentialId:n}),s&&(0,r.jsx)(e6,{payload:s,hidePreview:c}),i&&(0,r.jsx)(eZ.default,{show:!0,onClose:m,title:u("upgrade.uploadMultiplePages.title",{ns:"billing"}),description:u("upgrade.uploadMultiplePages.description",{ns:"billing"})})]})},e8=function(){let[e,t]=(0,i.useState)(),[a,s]=(0,i.useState)(),[r,n]=(0,i.useState)(),l=(0,i.useCallback)(e=>{t(e)},[]),o=(0,i.useCallback)(()=>{t(void 0)},[]),d=(0,i.useCallback)(e=>{s(e)},[]),c=(0,i.useCallback)(()=>{s(void 0)},[]);return{currentFile:e,currentNotionPage:a,currentWebsite:r,showFilePreview:l,hideFilePreview:o,showNotionPagePreview:d,hideNotionPagePreview:c,showWebsitePreview:(0,i.useCallback)(e=>{n(e)},[]),hideWebsitePreview:(0,i.useCallback)(()=>{n(void 0)},[])}};var e7=e.i(239216);let te={[p.DataSourceType.FILE]:e=>{let{files:t}=e;return t.length>1},[p.DataSourceType.NOTION]:e=>{let{notionPages:t}=e;return t.length>1},[p.DataSourceType.WEB]:e=>{let{websitePages:t}=e;return t.length>1}},tt=e=>{let{datasetId:t,dataSourceType:a,dataSourceTypeDisable:s,changeType:n,onSetting:o,onStepChange:d,files:c,updateFileList:u,updateFile:x,notionPages:h=[],notionCredentialId:g,updateNotionPages:f,updateNotionCredentialId:j,websitePages:w=[],updateWebsitePages:C,onWebsiteCrawlProviderChange:y,onWebsiteCrawlJobIdChange:_,crawlOptions:k,onCrawlOptionsChange:T,authedDataSourceList:S}=e,{t:I}=(0,l.useTranslation)(),D=(0,m.useDatasetDetailContextWithSelector)(e=>e.dataset),{plan:P,enableBilling:R}=(0,G.useProviderContext)(),{currentFile:L,currentNotionPage:O,currentWebsite:$,showFilePreview:M,hideFilePreview:F,showNotionPagePreview:A,hideNotionPagePreview:B,showWebsitePreview:q,hideWebsitePreview:V}=e8(),[H,{setTrue:Q,setFalse:J}]=(0,v.useBoolean)(!1),[K,{setTrue:X,setFalse:Y}]=(0,v.useBoolean)(!1),Z=!t||t&&!D?.data_source_type,ee=Z?a??p.DataSourceType.FILE:D?.data_source_type??p.DataSourceType.FILE,ea=c.length>0&&c.every(e=>e.file.id),es=h.length>0,er=P.usage.vectorSpace>=P.total.vectorSpace,en=(ea||es)&&er&&R,ei=!R||P.type!==W.Plan.sandbox,el=(0,i.useMemo)(()=>{let e;return!!((e=S.find(e=>"notion_datasource"===e.provider))&&e.credentials_list.length>0)},[S]),eo=(0,i.useMemo)(()=>S.find(e=>"notion_datasource"===e.provider)?.credentials_list||[],[S]),ed=(0,i.useMemo)(()=>!!(!c.length||c.some(e=>!e.file.id))||en,[c,en]),ec=(0,i.useCallback)(e=>{e!==p.DataSourceType.FILE&&F(),e!==p.DataSourceType.NOTION&&B(),e!==p.DataSourceType.WEB&&V()},[F,B,V]),eu=(0,i.useCallback)(()=>{if(!ei&&ee){let e=te[ee];if(e?.({files:c,notionPages:h,websitePages:w}))return void X()}d()},[ee,d,c,ei,h,X,w]);return(0,r.jsx)("div",{className:"h-full w-full overflow-x-auto",children:(0,r.jsxs)("div",{className:"flex h-full w-full min-w-[1440px]",children:[(0,r.jsx)("div",{className:"relative h-full w-1/2 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex justify-end",children:[(0,r.jsxs)("div",{className:(0,E.cn)(eJ.default.form),children:[Z&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:(0,E.cn)(eJ.default.stepHeader,"system-md-semibold text-text-secondary"),children:I("steps.one",{ns:"datasetCreation"})}),(0,r.jsx)(eX,{currentType:ee,disabled:s,onChange:n,onClearPreviews:ec})]}),ee===p.DataSourceType.FILE&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(em,{fileList:c,titleClassName:Z?void 0:"mt-[30px] !mb-[44px] !text-lg",prepareFileList:u,onFileListUpdate:u,onFileUpdate:x,onPreview:M,supportBatchUpload:ei}),en&&(0,r.jsx)("div",{className:"mb-4 max-w-[640px]",children:(0,r.jsx)(U.default,{})}),(0,r.jsx)(eY,{disabled:ed,onClick:eu}),R&&P.type===W.Plan.sandbox&&c.length>0&&(0,r.jsxs)("div",{className:"mt-5",children:[(0,r.jsx)("div",{className:"mb-4 h-px bg-divider-subtle"}),(0,r.jsx)(e7.default,{})]})]}),ee===p.DataSourceType.NOTION&&(0,r.jsxs)(r.Fragment,{children:[!el&&(0,r.jsx)(N,{onSetting:o}),el&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mb-8 w-[640px]",children:(0,r.jsx)(z,{value:h.map(e=>e.page_id),onSelect:f,onPreview:A,credentialList:eo,onSelectCredential:j,datasetId:t})}),en&&(0,r.jsx)("div",{className:"mb-4 max-w-[640px]",children:(0,r.jsx)(U.default,{})}),(0,r.jsx)(eY,{disabled:en||!h.length,onClick:eu})]})]}),ee===p.DataSourceType.WEB&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:(0,E.cn)("mb-8 w-[640px]",!Z&&"mt-12"),children:(0,r.jsx)(eQ,{onPreview:q,checkedCrawlResult:w,onCheckedCrawlResultChange:C,onCrawlProviderChange:y,onJobIdChange:_,crawlOptions:k,onCrawlOptionsChange:T,authedDataSourceList:S})}),en&&(0,r.jsx)("div",{className:"mb-4 max-w-[640px]",children:(0,r.jsx)(U.default,{})}),(0,r.jsx)(eY,{disabled:en||!w.length,onClick:eu})]}),!t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"my-8 h-px max-w-[640px] bg-divider-regular"}),(0,r.jsxs)("span",{className:"inline-flex cursor-pointer items-center text-[13px] leading-4 text-text-accent",onClick:Q,children:[(0,r.jsx)(b.RiFolder6Line,{className:"mr-1 size-4"}),I("stepOne.emptyDatasetCreation",{ns:"datasetCreation"})]})]})]}),(0,r.jsx)(et,{show:H,onHide:J})]})}),(0,r.jsx)(e9,{currentFile:L,currentNotionPage:O,currentWebsite:$,notionCredentialId:g,isShowPlanUpgradeModal:K,hideFilePreview:F,hideNotionPagePreview:B,hideWebsitePreview:V,hidePlanUpgradeModal:Y})]})})};var ta=e.i(257899),ts=e.i(271743),tr=e.i(554327),tn=e.i(606466),ti=e.i(666010),tl=e.i(64369);let to=["indexing","splitting","parsing","cleaning","waiting"],td=e=>{let{status:t,error:a}=e;return"completed"===t?(0,r.jsx)(b.RiCheckboxCircleFill,{className:"size-4 shrink-0 text-text-success"}):"error"===t?(0,r.jsx)(e_.default,{popupClassName:"px-4 py-[14px] max-w-60 body-xs-regular text-text-secondary border-[0.5px] border-components-panel-border rounded-xl",offset:4,popupContent:a,children:(0,r.jsx)("span",{children:(0,r.jsx)(b.RiErrorWarningFill,{className:"size-4 shrink-0 text-text-destructive"})})}):null},tc=e=>{let{sourceType:t,name:a,notionIcon:s}=e;if(t===p.DataSourceType.FILE)return(0,r.jsx)(ec.default,{size:"sm",className:"shrink-0",name:a,extension:a?.split(".").pop()||"txt"});return t===p.DataSourceType.NOTION?(0,r.jsx)(M.default,{className:"shrink-0",type:"page",src:s}):null},tm=e=>{let t,a,{detail:s,name:n,sourceType:i,notionIcon:l,enableBilling:o}=e,d=to.includes(s.indexing_status),c=(t=s.completed_segments||0,0===(a=s.total_segments||0)?0:Math.min(Math.round(100*t/a),100)),m="error"===s.indexing_status;return(0,r.jsxs)("div",{className:(0,E.cn)("relative h-[26px] overflow-hidden rounded-md bg-components-progress-bar-bg",m&&"bg-state-destructive-hover-alt"),children:[d&&(0,r.jsx)("div",{className:"absolute left-0 top-0 h-full min-w-0.5 border-r-[2px] border-r-components-progress-bar-progress-highlight bg-components-progress-bar-progress",style:{width:`${c}%`}}),(0,r.jsxs)("div",{className:"z-[1] flex h-full items-center gap-1 pl-[6px] pr-2",children:[(0,r.jsx)(tc,{sourceType:i,name:n,notionIcon:l}),(0,r.jsxs)("div",{className:"flex w-0 grow items-center gap-1",title:n,children:[(0,r.jsx)("div",{className:"system-xs-medium truncate text-text-secondary",children:n}),o&&(0,r.jsx)(tl.default,{className:"ml-0"})]}),d&&(0,r.jsx)("div",{className:"shrink-0 text-xs text-text-secondary",children:`${c}%`}),(0,r.jsx)(td,{status:s.indexing_status,error:s.error})]})]})};var tu=e.i(658547),tx=e.i(552188),tp=e.i(871182),th=e.i(698628),tg=e.i(127210);let tf={remove_extra_spaces:"stepTwo.removeExtraSpaces",remove_urls_emails:"stepTwo.removeUrlEmails",remove_stopwords:"stepTwo.removeStopwords"},tb={[ed.RETRIEVE_METHOD.fullText]:tp.retrievalIcon.fullText,[ed.RETRIEVE_METHOD.hybrid]:tp.retrievalIcon.hybrid,[ed.RETRIEVE_METHOD.semantic]:tp.retrievalIcon.vector,[ed.RETRIEVE_METHOD.invertedIndex]:tp.retrievalIcon.fullText,[ed.RETRIEVE_METHOD.keywordSearch]:tp.retrievalIcon.fullText},tv=e=>{let{sourceData:t,indexingType:a,retrievalMethod:s}=e,{t:n}=(0,l.useTranslation)(),o={mode:n("embedding.mode",{ns:"datasetDocuments"}),segmentLength:n("embedding.segmentLength",{ns:"datasetDocuments"}),textCleaning:n("embedding.textCleaning",{ns:"datasetDocuments"})},d=(0,i.useCallback)(e=>{let t=tf[e];return t?n(t,{ns:"datasetCreation"}):void 0},[n]),c={mode:(0,i.useCallback)(()=>{if(!t?.mode)return"-";if(t.mode===p.ProcessMode.general)return n("embedding.custom",{ns:"datasetDocuments"});let e=t.rules?.parent_mode==="paragraph"?n("parentMode.paragraph",{ns:"dataset"}):n("parentMode.fullDoc",{ns:"dataset"});return`${n("embedding.hierarchical",{ns:"datasetDocuments"})} \xb7 ${e}`},[t,n]),segmentLength:(0,i.useCallback)(()=>{if(!t?.mode)return"-";let e="number"==typeof t.rules?.segmentation?.max_tokens?t.rules.segmentation.max_tokens:"-";if(t.mode===p.ProcessMode.general)return e;let a="number"==typeof t.rules?.subchunk_segmentation?.max_tokens?t.rules.subchunk_segmentation.max_tokens:"-";return`${n("embedding.parentMaxTokens",{ns:"datasetDocuments"})} ${e}; ${n("embedding.childMaxTokens",{ns:"datasetDocuments"})} ${a}`},[t,n]),textCleaning:(0,i.useCallback)(()=>{if(!t?.mode)return"-";let e=(t.rules?.pre_processing_rules?.filter(e=>e.enabled)||[]).map(e=>{let t=d(e.id);return"string"==typeof t?t:""}).filter(e=>e);return e.length>0?e.join(","):"-"},[t,d])},m=a===tg.IndexingType.ECONOMICAL,u=m?tp.indexMethodIcon.economical:tp.indexMethodIcon.high_quality,x=n(`stepTwo.${m?"economical":"qualified"}`,{ns:"datasetCreation"}),h=n(`retrieval.${m?"keyword_search":s??"semantic_search"}.title`,{ns:"dataset"}),g=tb[s]??tp.retrievalIcon.vector;return(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[Object.keys(o).map(e=>(0,r.jsx)(tx.FieldInfo,{label:o[e],displayedValue:String(c[e]())},e)),(0,r.jsx)(tx.FieldInfo,{label:n("stepTwo.indexMode",{ns:"datasetCreation"}),displayedValue:x,valueIcon:(0,r.jsx)(tu.default,{className:"size-4",src:u,alt:""})}),(0,r.jsx)(tx.FieldInfo,{label:n("form.retrievalSetting.title",{ns:"datasetSettings"}),displayedValue:h,valueIcon:(0,r.jsx)(tu.default,{className:"size-4",src:g,alt:""})})]})};e.i(288243);var tj=e.i(677231),tj=tj,tw=e.i(84366);let tC=()=>{let{t:e}=(0,l.useTranslation)();return(0,r.jsxs)("div",{className:"flex h-14 items-center rounded-xl border-[0.5px] border-black/5 bg-white p-3 shadow-md",children:[(0,r.jsx)("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-lg bg-[#FFF6ED]",children:(0,r.jsx)(tj.default,{className:"h-4 w-4 text-[#FB6514]"})}),(0,r.jsx)("div",{className:"mx-3 grow text-[13px] font-medium text-gray-700",children:e("plansCommon.documentProcessingPriorityUpgrade",{ns:"billing"})}),(0,r.jsx)(tw.default,{loc:"knowledge-speed-up"})]})},tN=["completed","error","paused"],ty=["indexing","splitting","parsing","cleaning","waiting"],t_=e=>e.every(e=>{let t;return t=e.indexing_status,tN.includes(t)}),tk=e=>{let{isEmbedding:t,isCompleted:a}=e,{t:s}=(0,l.useTranslation)();return(0,r.jsxs)("div",{className:"system-md-semibold-uppercase flex items-center gap-x-1 text-text-secondary",children:[t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.RiLoader2Fill,{className:"size-4 animate-spin"}),(0,r.jsx)("span",{children:s("embedding.processing",{ns:"datasetDocuments"})})]}),a&&s("embedding.completed",{ns:"datasetDocuments"})]})},tT=e=>{let{apiReferenceUrl:t,onNavToDocuments:a}=e,{t:s}=(0,l.useTranslation)();return(0,r.jsxs)("div",{className:"mt-6 flex items-center gap-x-2 py-2",children:[(0,r.jsx)(tr.default,{href:t,target:"_blank",rel:"noopener noreferrer",children:(0,r.jsxs)(j.default,{className:"w-fit gap-x-0.5 px-3",children:[(0,r.jsx)(b.RiTerminalBoxLine,{className:"size-4"}),(0,r.jsx)("span",{className:"px-0.5",children:"Access the API"})]})}),(0,r.jsxs)(j.default,{className:"w-fit gap-x-0.5 px-3",variant:"primary",onClick:a,children:[(0,r.jsx)("span",{className:"px-0.5",children:s("stepThree.navTo",{ns:"datasetCreation"})}),(0,r.jsx)(b.RiArrowRightLine,{className:"size-4 stroke-current stroke-1"})]})]})},tS=e=>{let{datasetId:t,batchId:a,documents:s=[],indexingType:n,retrievalMethod:l}=e,{enableBilling:o,plan:d}=(0,G.useProviderContext)(),c=(0,V.useRouter)(),m=(0,ti.useInvalidDocumentList)(),u=(0,tn.useDatasetApiAccessUrl)(),{statusList:x,isEmbedding:p,isEmbeddingCompleted:h}=(e=>{let{datasetId:t,batchId:a}=e,[s,r]=(0,i.useState)([]),n=(0,i.useRef)(!1);(0,i.useEffect)(()=>{n.current=!1;let e=null,s=async()=>{let e=await (0,Y.fetchIndexingStatusBatch)({datasetId:t,batchId:a});return r(e.data),e.data},i=async()=>{if(!n.current){try{let e=await s();if(t_(e)){n.current=!0;return}}catch{}n.current||(e=setTimeout(()=>{i()},2500))}};return i(),()=>{n.current=!0,e&&clearTimeout(e)}},[t,a]);let l=s.some(e=>ty.includes(e?.indexing_status)),o=s.length>0&&t_(s);return{statusList:s,isEmbedding:l,isEmbeddingCompleted:o}})({datasetId:t,batchId:a}),g=s[0]?.id,{data:f}=(0,Z.useProcessRule)(g),b=(0,i.useMemo)(()=>{let e;return e=new Map(s.map(e=>[e.id,e])),{getDocument:t=>e.get(t),getName:t=>e.get(t)?.name,getSourceType:t=>e.get(t)?.data_source_type,getNotionIcon:t=>{let a=e.get(t)?.data_source_info;if(a&&null!=a&&"object"==typeof a.upload_file)return a.notion_page_icon}}},[s]),v=o&&d.type!==W.Plan.team;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,r.jsx)(tk,{isEmbedding:p,isCompleted:h}),v&&(0,r.jsx)(tC,{}),(0,r.jsx)("div",{className:"flex flex-col gap-0.5 pb-2",children:x.map(e=>(0,r.jsx)(tm,{detail:e,name:b.getName(e.id),sourceType:b.getSourceType(e.id),notionIcon:b.getNotionIcon(e.id),enableBilling:o},e.id))}),(0,r.jsx)(S.default,{type:"horizontal",className:"my-0 bg-divider-subtle"}),(0,r.jsx)(tv,{sourceData:f,indexingType:n,retrievalMethod:l})]}),(0,r.jsx)(tT,{apiReferenceUrl:u,onNavToDocuments:()=>{m(),c.push(`/datasets/${t}/documents`)}})]})},tE=e=>{let{datasetId:t,datasetName:a,indexingType:s,creationCache:n,retrievalMethod:i}=e,{t:o}=(0,l.useTranslation)(),d=(0,en.useDocLink)(),c=(0,ts.default)()===ts.MediaType.mobile,m=n?.dataset?.icon_info||{icon:"ðŸ“™",icon_type:"emoji",icon_background:"#FFF4ED",icon_url:""};return(0,r.jsxs)("div",{className:"flex h-full max-h-full w-full justify-center overflow-y-auto",children:[(0,r.jsx)("div",{className:"h-full max-w-[960px] shrink-0 grow overflow-y-auto px-14 sm:px-16",children:(0,r.jsxs)("div",{className:"mx-auto max-w-[640px] pb-8 pt-10",children:[!t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col gap-y-1 pb-3",children:[(0,r.jsx)("div",{className:"title-2xl-semi-bold text-text-primary",children:o("stepThree.creationTitle",{ns:"datasetCreation"})}),(0,r.jsx)("div",{className:"system-sm-regular text-text-tertiary",children:o("stepThree.creationContent",{ns:"datasetCreation"})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,r.jsx)(ta.default,{size:"xxl",iconType:m.icon_type,icon:m.icon,background:m.icon_background,imageUrl:m.icon_url,className:"shrink-0"}),(0,r.jsxs)("div",{className:"flex grow flex-col gap-y-1",children:[(0,r.jsx)("div",{className:"system-sm-semibold flex h-6 items-center text-text-secondary",children:o("stepThree.label",{ns:"datasetCreation"})}),(0,r.jsx)("div",{className:"system-sm-regular w-full truncate rounded-lg bg-components-input-bg-normal p-2 text-components-input-text-filled",children:(0,r.jsx)("span",{className:"px-1",children:a||n?.dataset?.name})})]})]}),(0,r.jsx)(S.default,{type:"horizontal",className:"my-6 bg-divider-subtle"})]}),t&&(0,r.jsxs)("div",{className:"flex flex-col gap-y-1 pb-3",children:[(0,r.jsx)("div",{className:"title-2xl-semi-bold text-text-primary",children:o("stepThree.additionTitle",{ns:"datasetCreation"})}),(0,r.jsx)("div",{className:"system-sm-regular text-text-tertiary",children:`${o("stepThree.additionP1",{ns:"datasetCreation"})} ${a||n?.dataset?.name} ${o("stepThree.additionP2",{ns:"datasetCreation"})}`})]}),(0,r.jsx)(tS,{datasetId:t||n?.dataset?.id||"",batchId:n?.batch||"",documents:n?.documents,indexingType:n?.dataset?.indexing_technique||s,retrievalMethod:n?.dataset?.retrieval_model_dict?.search_method||i})]})}),!c&&(0,r.jsx)("div",{className:"shrink-0 pr-8 pt-[88px] text-xs",children:(0,r.jsxs)("div",{className:"flex w-[328px] flex-col gap-3 rounded-xl bg-background-section p-6 text-text-tertiary",children:[(0,r.jsx)("div",{className:"flex size-10 items-center justify-center rounded-[10px] bg-components-card-bg shadow-lg",children:(0,r.jsx)(b.RiBookOpenLine,{className:"size-5 text-text-accent"})}),(0,r.jsx)("div",{className:"text-base font-semibold text-text-secondary",children:o("stepThree.sideTipTitle",{ns:"datasetCreation"})}),(0,r.jsx)("div",{className:"text-text-tertiary",children:o("stepThree.sideTipContent",{ns:"datasetCreation"})}),(0,r.jsx)("a",{href:d("/use-dify/knowledge/integrate-knowledge-within-application"),target:"_blank",rel:"noreferrer noopener",className:"system-sm-regular text-text-accent",children:o("addDocuments.stepThree.learnMore",{ns:"datasetPipeline"})})]})})]})},tI=e=>{let{name:t,activeIndex:a,index:s}=e,n=s===a,i=a<s,l=n?`STEP ${s+1}`:`${s+1}`;return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:(0,E.cn)("inline-flex h-5 flex-col items-center justify-center gap-2 rounded-3xl py-1",n?"bg-state-accent-solid px-2":i?"w-5 border border-divider-deep":"w-5 border border-text-quaternary"),children:(0,r.jsx)("div",{className:(0,E.cn)("system-2xs-semibold-uppercase text-center",n?"text-text-primary-on-surface":i?"text-text-quaternary":"text-text-tertiary"),children:l})}),(0,r.jsx)("div",{className:(0,E.cn)("system-xs-medium-uppercase",n?"system-xs-semibold-uppercase text-text-accent":i?"text-text-quaternary":"text-text-tertiary"),children:t})]})},tD=e=>{let{steps:t,activeIndex:a}=e;return(0,r.jsx)("div",{className:"flex items-center gap-3",children:t.map((e,s)=>{let n=s===t.length-1;return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(tI,{...e,activeIndex:a,index:s}),!n&&(0,r.jsx)("div",{className:"h-px w-4 bg-divider-deep"})]},s)})})},tP={1:"steps.one",2:"steps.two",3:"steps.three"},tR=e=>{let{className:t,datasetId:a,...s}=e,{t:n}=(0,l.useTranslation)(),o=(0,i.useMemo)(()=>a?`/datasets/${a}/documents`:"/datasets",[a]);return(0,r.jsxs)("div",{className:(0,E.cn)("relative flex h-[52px] shrink-0 items-center justify-between border-b border-b-divider-subtle",t),children:[(0,r.jsxs)(tr.default,{href:o,replace:!0,className:"inline-flex h-12 items-center justify-start gap-1 py-2 pl-2 pr-6",children:[(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(b.RiArrowLeftLine,{className:"size-4 text-text-primary"})}),(0,r.jsx)("p",{className:"system-sm-semibold-uppercase text-text-primary",children:n("steps.header.fallbackRoute",{ns:"datasetCreation"})})]}),(0,r.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:(0,r.jsx)(tD,{steps:Array.from({length:3},(e,t)=>({name:n(tP[t+1],{ns:"datasetCreation"})})),...s})})]})},tL={crawl_sub_pages:!0,only_main_content:!0,includes:"",excludes:"",limit:10,max_depth:"",use_sitemap:!0};e.s(["default",0,e=>{let{datasetId:t}=e,{t:a}=(0,l.useTranslation)(),s=(0,u.useModalContextSelector)(e=>e.setShowAccountSettingModal),b=(0,m.useDatasetDetailContextWithSelector)(e=>e.dataset),{data:v}=(0,c.useDefaultModel)(f.ModelTypeEnum.textEmbedding),[j,w]=(0,i.useState)(p.DataSourceType.FILE),[C,N]=(0,i.useState)(1),[y,_]=(0,i.useState)(""),[k,T]=(0,i.useState)(""),[S,E]=(0,i.useState)([]),[I,D]=(0,i.useState)(),[P,R]=(0,i.useState)([]),[L,O]=(0,i.useState)(""),[$,M]=(0,i.useState)([]),[F,A]=(0,i.useState)(tL),[B,q]=(0,i.useState)(x.DataSourceProvider.jinaReader),[z,W]=(0,i.useState)(""),{data:U,isLoading:G,isError:V}=(0,h.useGetDefaultDataSourceListAuth)(),H=(0,i.useCallback)(e=>{R(e)},[]),Q=(0,i.useCallback)(e=>{O(e)},[]),J=(0,i.useCallback)(e=>{E(e)},[]),K=(0,i.useCallback)((e,t,a)=>{let s=a.findIndex(t=>t.fileID===e.fileID);E((0,n.produce)(a,e=>{e[s]={...e[s],progress:t}}))},[]),X=(0,i.useCallback)(e=>{_(e)},[]),Y=(0,i.useCallback)(e=>{D(e)},[]),Z=(0,i.useCallback)(e=>{T(e)},[]),ee=(0,i.useCallback)(()=>{N(C+1)},[C,N]),et=(0,i.useCallback)(e=>{N(C+e)},[C,N]);return V?(0,r.jsx)(g.default,{code:500,unknownReason:a("error.unavailable",{ns:"datasetCreation"})}):(0,r.jsxs)("div",{className:"flex flex-col overflow-hidden bg-components-panel-bg",style:{height:"calc(100vh - 56px)"},children:[(0,r.jsx)(tR,{activeIndex:C-1,datasetId:t}),(0,r.jsxs)("div",{style:{height:"calc(100% - 52px)"},children:[G&&(0,r.jsx)(o.default,{type:"app"}),!G&&(0,r.jsxs)(r.Fragment,{children:[1===C&&(0,r.jsx)(tt,{authedDataSourceList:U?.result||[],onSetting:()=>s({payload:d.ACCOUNT_SETTING_TAB.DATA_SOURCE}),datasetId:t,dataSourceType:j,dataSourceTypeDisable:!!b?.data_source_type,changeType:w,files:S,updateFile:K,updateFileList:J,notionPages:P,notionCredentialId:L,updateNotionPages:H,updateNotionCredentialId:Q,onStepChange:ee,websitePages:$,updateWebsitePages:M,onWebsiteCrawlProviderChange:q,onWebsiteCrawlJobIdChange:W,crawlOptions:F,onCrawlOptionsChange:A}),2===C&&(!t||t&&!!b)&&(0,r.jsx)(th.default,{isAPIKeySet:!!v,onSetting:()=>s({payload:d.ACCOUNT_SETTING_TAB.PROVIDER}),indexingType:b?.indexing_technique,datasetId:t,dataSourceType:j,files:S.map(e=>e.file),notionPages:P,notionCredentialId:L,websitePages:$,websiteCrawlProvider:B,websiteCrawlJobId:z,onStepChange:et,updateIndexingTypeCache:X,updateRetrievalMethodCache:Z,updateResultCache:Y,crawlOptions:F}),3===C&&(0,r.jsx)(tE,{datasetId:t,datasetName:b?.name,indexingType:b?.indexing_technique||y,retrievalMethod:b?.retrieval_model_dict?.search_method||k||void 0,creationCache:I})]})]})]})}],207978)}]);