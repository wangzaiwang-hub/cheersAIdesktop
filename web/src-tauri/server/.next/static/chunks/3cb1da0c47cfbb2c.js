(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37234,e=>{"use strict";var s=e.i(563199),r=e.i(837699),t=e.i(268255);e.i(152567);var o=e.i(408767),a=e.i(151094),n=e.i(922521),i=e.i(387852),l=e.i(935139),c=e.i(137667);e.i(845780);var d=e.i(604208),m=e.i(556354);e.i(491401);var u=e.i(585736);e.i(275225);var x=e.i(705405),f=e.i(390622),p=e.i(363372),b=e.i(157884);let w=(0,t.memo)(()=>{let{t:e}=(0,o.useTranslation)(),{formatTimeFromNow:r}=(0,p.useFormatTimeFromNow)(),{formatTime:a}=(0,b.default)(),n=(0,x.useStore)(e=>e.currentVersion),i=n?.version===f.WorkflowVersion.Draft,l=i?e("common.unpublished",{ns:"workflow"}):e("common.published",{ns:"workflow"}),c=(0,t.useMemo)(()=>i?e("versionHistory.currentDraft",{ns:"workflow"}):n?.marked_name||e("versionHistory.defaultName",{ns:"workflow"}),[n,e,i]);return(0,s.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,s.jsx)("span",{className:"system-sm-semibold text-text-primary",children:c}),(0,s.jsx)("span",{className:"system-2xs-medium-uppercase rounded-[5px] border border-text-accent-secondary bg-components-badge-bg-dimm px-1 py-0.5 text-text-accent-secondary",children:e("common.viewOnly",{ns:"workflow"})})]}),(0,s.jsx)("div",{className:"system-xs-regular flex h-4 items-center gap-x-1 text-text-tertiary",children:n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:l}),(0,s.jsx)("span",{children:"·"}),(0,s.jsx)("span",{children:`${r((i?n.updated_at:n.created_at)*1e3)} ${a(n.created_at,"HH:mm:ss")}`}),(0,s.jsx)("span",{children:"·"}),(0,s.jsx)("span",{children:n?.created_by?.name||""})]})})]})});e.s(["default",0,e=>{let{onRestoreSettled:p}=e,{t:b}=(0,o.useTranslation)(),{theme:h}=(0,n.default)(),k=(0,x.useWorkflowStore)(),y=(0,u.useHooksStore)(e=>e.configsMap),g=(0,i.useInvalidAllLastRun)(y?.flowType,y?.flowId),{deleteAllInspectVars:j}=k.getState(),v=(0,x.useStore)(e=>e.currentVersion),S=(0,x.useStore)(e=>e.setShowWorkflowVersionHistoryPanel),{handleLoadBackupDraft:N}=(0,m.useWorkflowRun)(),{handleSyncWorkflowDraft:H}=(0,d.useNodesSyncDraft)(),T=(0,t.useCallback)(()=>{N(),k.setState({isRestoring:!1}),S(!1)},[k,N,S]),R=(0,t.useCallback)(()=>{S(!1),k.setState({isRestoring:!1}),k.setState({backupDraft:void 0}),H(!0,!1,{onSuccess:()=>{c.default.notify({type:"success",message:b("versionHistory.action.restoreSuccess",{ns:"workflow"})})},onError:()=>{c.default.notify({type:"error",message:b("versionHistory.action.restoreFailure",{ns:"workflow"})})},onSettled:()=>{p?.()}}),j(),g()},[S,k,H,j,g,b,p]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:(0,s.jsx)(w,{})}),(0,s.jsxs)("div",{className:" flex items-center justify-end gap-x-2",children:[(0,s.jsx)(a.default,{onClick:R,disabled:!v||v.version===f.WorkflowVersion.Draft,variant:"primary",className:(0,l.cn)("rounded-lg border border-transparent","dark"===h&&"border-black/5 bg-white/10 backdrop-blur-sm"),children:b("common.restore",{ns:"workflow"})}),(0,s.jsx)(a.default,{onClick:T,className:(0,l.cn)("rounded-lg border border-transparent text-components-button-secondary-accent-text","dark"===h&&"border-black/5 bg-white/10 backdrop-blur-sm"),children:(0,s.jsxs)("div",{className:"flex items-center gap-x-0.5",children:[(0,s.jsx)(r.RiHistoryLine,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"px-0.5",children:b("common.exitVersions",{ns:"workflow"})})]})})]})]})}],37234)},963740,e=>{e.n(e.i(37234))}]);