(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,634020,717522,824740,e=>{"use strict";function t(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let r=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;for(let t of(l.append("code",e),n))l.append("v",t);throw r.search=l.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function n(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let r=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;for(let t of(l.append("code",e),n))l.append("v",t);r.search=l.toString(),console.warn(`Minified Lexical warning #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let i="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement,r=i&&"documentMode"in document?document.documentMode:null,l=i&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),o=i&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),s=!(!i||!("InputEvent"in window)||r)&&"getTargetRanges"in new window.InputEvent("input"),a=i&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),u=i&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,d=i&&/Android/.test(navigator.userAgent),c=i&&/^(?=.*Chrome).*/i.test(navigator.userAgent),f=i&&d&&c,h=i&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&l&&!c;function g(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=[];for(let e of t)if(e&&"string"==typeof e)for(let[t]of e.matchAll(/\S+/g))i.push(t);return i}let _=a||u||h?" ":"​",p=o?" ":_,m="֑-߿יִ-﷽ﹰ-ﻼ",y="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",x=RegExp("^[^"+y+"]*["+m+"]"),C=RegExp("^[^"+m+"]*["+y+"]"),S={bold:1,capitalize:1024,code:16,highlight:128,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512},v={directionless:1,unmergeable:2},N={center:2,end:6,justify:4,left:1,right:3,start:5},T={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},E={normal:0,segmented:2,token:1},b={0:"normal",2:"segmented",1:"token"},O="$config",M=!1,k=0;function w(e){k=e.timeStamp}function A(e,t,n){let i="BR"===e.nodeName,r=t.__lexicalLineBreak;return r&&(e===r||i&&e.previousSibling===r)||i&&void 0!==iW(e,n)}function D(e,t,n){M=!0;let i=performance.now()-k>100;try{n3(e,()=>{let r=nE()||e.getEditorState().read(()=>{let e=nE();return null!==e?e.clone():null}),l=new Map,s=e.getRootElement(),a=e._editorState,u=e._blockCursorElement,d=!1,c="";for(let n=0;n<t.length;n++){let f=t[n],h=f.type,g=f.target,_=function(e,t,n,i){var r;for(let l=e;l&&(r=l,!0!==r.__lexicalUnmanaged);l=rs(l)){let e=iW(l,t);if(void 0!==e){let t=iB(e,n);if(t)return ie(t)||!rC(l)?void 0:[l,t]}else if(l===i)return[i,iH(n)]}}(g,e,a,s);if(!_)continue;let[p,m]=_;if("characterData"===h)i&&t8(m)&&iw(g)&&function(e,t,n){if(na(e)){let t=e.anchor.getNode();if(t.is(n)&&e.format!==t.getFormat())return!1}return iw(t)&&n.isAttached()}(r,g,m)&&function(e,t,n){let i=ry(rc(n)),r=null,l=null;null!==i&&i.anchorNode===e&&(r=i.anchorOffset,l=i.focusOffset);let o=e.nodeValue;null!==o&&i1(t,o,r,l,!1)}(g,m,e);else if("childList"===h){d=!0;let t=f.addedNodes;for(let n=0;n<t.length;n++){let i=t[n],r=iz(i),l=i.parentNode;if(null!=l&&i!==u&&null===r&&!A(i,l,e)){if(o){let e=(rC(i)?i.innerText:null)||i.nodeValue;e&&(c+=e)}l.removeChild(i)}}let n=f.removedNodes,i=n.length;if(i>0){let t=0;for(let r=0;r<i;r++){let i=n[r];(A(i,g,e)||u===i)&&(g.appendChild(i),t++)}i!==t&&l.set(p,m)}}}if(l.size>0)for(let[t,n]of l)n.reconcileObservedMutation(t,e);let f=n.takeRecords();if(f.length>0){for(let t=0;t<f.length;t++){let n=f[t],i=n.addedNodes,r=n.target;for(let t=0;t<i.length;t++){let n=i[t],l=n.parentNode;null==l||"BR"!==n.nodeName||A(n,r,e)||l.removeChild(n)}}n.takeRecords()}null!==r&&(d&&iV(r),o&&ri(e)&&r.insertRawText(c))})}finally{M=!1}}function R(e){let t=e._observer;null!==t&&D(e,t.takeRecords(),t)}function P(e){0===k&&rc(e).addEventListener("textInput",w,!0),e._observer=new MutationObserver((t,n)=>{D(e,t,n)})}function I(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"latest",i=("latest"===n?e.getLatest():e).__state;return i?i.getValue(t):t.defaultValue}function L(e,t,n){let i;if(nW(),"function"==typeof n){let r=e.getLatest(),l=I(r,t);if(i=n(l),t.isEqual(l,i))return r}else i=n;let r=e.getWritable();return $(r).updateFromKnown(t,i),r}class F{node;knownState;unknownState;sharedNodeState;size;constructor(e,t,n,i=new Map,r){this.node=e,this.sharedNodeState=t,this.unknownState=n,this.knownState=i;const{sharedConfigMap:l}=this.sharedNodeState,o=void 0!==r?r:function(e,t,n){let i=n.size;if(t)for(let r in t){let t=e.get(r);t&&n.has(t)||i++}return i}(l,n,i);this.size=o}getValue(e){let t=this.knownState.get(e);if(void 0!==t)return t;this.sharedNodeState.sharedConfigMap.set(e.key,e);let n=e.defaultValue;if(this.unknownState&&e.key in this.unknownState){let t=this.unknownState[e.key];void 0!==t&&(n=e.parse(t)),this.updateFromKnown(e,n)}return n}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){let e={...this.unknownState},t={};for(let[t,n]of this.knownState)t.isEqual(n,t.defaultValue)?delete e[t.key]:e[t.key]=t.unparse(n);for(let n of this.sharedNodeState.flatKeys)n in e&&(t[n]=e[n],delete e[n]);return B(e)&&(t.$=e),t}getWritable(e){if(this.node===e)return this;let{sharedNodeState:t,unknownState:n}=this,i=new Map(this.knownState);return new F(e,t,function(e,t,n){let i;if(n)for(let[r,l]of Object.entries(n)){let n=e.get(r);n?t.has(n)||t.set(n,n.parse(l)):(i=i||{})[r]=l}return i}(t.sharedConfigMap,i,n),i,this.size)}updateFromKnown(e,t){let n=e.key;this.sharedNodeState.sharedConfigMap.set(n,e);let{knownState:i,unknownState:r}=this;i.has(e)||r&&n in r||(r&&(delete r[n],this.unknownState=B(r)),this.size++),i.set(e,t)}updateFromUnknown(e,t){let n=this.sharedNodeState.sharedConfigMap.get(e);n?this.updateFromKnown(n,n.parse(t)):(this.unknownState=this.unknownState||{},e in this.unknownState||this.size++,this.unknownState[e]=t)}updateFromJSON(e){let{knownState:t}=this;for(let e of t.keys())t.set(e,e.defaultValue);if(this.size=t.size,this.unknownState=void 0,e)for(let[t,n]of Object.entries(e))this.updateFromUnknown(t,n)}}function $(e){let t=e.getWritable(),n=t.__state?t.__state.getWritable(t):new F(t,K(t));return t.__state=n,n}function K(e){return e.__state?e.__state.sharedNodeState:ix(rb(),e.getType()).sharedNodeState}function B(e){if(e)for(let t in e)return e}function z(e,t,n){for(let[i,r]of t.knownState){if(e.has(i.key))continue;e.add(i.key);let t=n?n.getValue(i):i.defaultValue;if(t!==r&&!i.isEqual(t,r))return!0}return!1}function W(e,t,n){let{unknownState:i}=t,r=n?n.unknownState:void 0;if(i){for(let[t,n]of Object.entries(i))if(!e.has(t)&&(e.add(t),n!==(r?r[t]:void 0)))return!0}return!1}function j(e,t){let n=e.__state;return n&&n.node===e?n.getWritable(t):n}function Y(e,t){let n=e.__mode,i=e.__format,r=e.__style,l=t.__mode,o=t.__format,s=t.__style,a=e.__state,u=t.__state;return(null===n||n===l)&&(null===i||i===o)&&(null===r||r===s)&&(null===e.__state||a===u||function(e,t){if(e===t)return!0;if(e&&t&&e.size!==t.size)return!1;let n=new Set;return!(e&&z(n,e,t)||t&&z(n,t,e)||e&&W(n,e,t)||t&&W(n,t,e))}(a,u))}function U(e,t){let n=e.mergeWithSibling(t),i=nU()._normalizedNodes;return i.add(e.__key),i.add(t.__key),n}function J(e){let t,n,i=e;if(""!==i.__text||!i.isSimpleText()||i.isUnmergeable()){for(;null!==(t=i.getPreviousSibling())&&t8(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(""!==t.__text){Y(t,i)&&(i=U(t,i));break}t.remove()}for(;null!==(n=i.getNextSibling())&&t8(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(""!==n.__text){Y(i,n)&&(i=U(i,n));break}n.remove()}}else i.remove()}function H(e){return V(e.anchor),V(e.focus),e}function V(e){for(;"element"===e.type;){let t,n,i=e.getNode(),r=e.offset;if(r===i.getChildrenSize()?(t=i.getChildAtIndex(r-1),n=!0):(t=i.getChildAtIndex(r),n=!1),t8(t)){e.set(t.__key,n?t.getTextContentSize():0,"text",!0);break}if(!n9(t))break;e.set(t.__key,n?t.getChildrenSize():0,"element",!0)}}let G,q,X,Z,Q,ee,et,en,ei,er,el="",eo=null,es="",ea="",eu=!1,ed=!1;function ec(e,t){let n=et.get(e);if(null!==t){let n=eT(e);n.parentNode===t&&t.removeChild(n)}if(en.has(e)||q._keyToDOMMap.delete(e),n9(n)){let e=eS(n,et);ef(e,0,e.length-1,null)}void 0!==n&&re(er,X,Z,n,"destroyed")}function ef(e,t,n,i){let r=t;for(;r<=n;++r){let t=e[r];void 0!==t&&ec(t,i)}}function eh(e,t){e.setProperty("text-align",t)}function eg(e,t){let n=G.theme.indent;if("string"==typeof n){let i=e.classList.contains(n);t>0&&!i?e.classList.add(n):t<1&&i&&e.classList.remove(n)}let i=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||"40px";e.style.setProperty("padding-inline-start",0===t?"":`calc(${t} * ${i})`)}function e_(e,t){let n=e.style;0===t?eh(n,""):1===t?eh(n,"left"):2===t?eh(n,"center"):3===t?eh(n,"right"):4===t?eh(n,"justify"):5===t?eh(n,"start"):6===t&&eh(n,"end")}function ep(e,t){let n=function(e){let t=e.__dir;if(null!==t)return t;if(ii(e))return null;let n=e.getParentOrThrow();return ii(n)&&null===n.__dir?"auto":null}(t);null!==n?e.dir=n:e.removeAttribute("dir")}function em(e,n){var i;let r,l=en.get(e);void 0===l&&t(60);let o=l.createDOM(G,q);if(r=(i=q)._keyToDOMMap,o[`__lexicalKey_${i._key}`]=e,r.set(e,o),t8(l)?o.setAttribute("data-lexical-text","true"):ie(l)&&o.setAttribute("data-lexical-decorator","true"),n9(l)){let e=l.__indent,t=l.__size;ep(o,l),0!==e&&eg(o,e),0!==t&&ey(eS(l,en),l,0,t-1,l.getDOMSlot(o));let n=l.__format;0!==n&&e_(o,n),l.isInline()||eC(null,l,o),rl(l)&&(el+="\n\n",ea+="\n\n")}else{let t=l.getTextContent();if(ie(l)){let t=l.decorate(q,G);null!==t&&ev(e,t),o.contentEditable="false"}el+=t,ea+=t}return null!==n&&n.insertChild(o),re(er,X,Z,l,"created"),o}function ey(e,t,n,i,r){let l=el;el="";let o=n;for(;o<=i;++o){em(e[o],r);let t=en.get(e[o]);null!==t&&t8(t)&&(null===eo&&(eo=t.getFormat()),""===es&&(es=t.getStyle()))}rl(t)&&(el+="\n\n"),r.element.__lexicalTextContent=el,el=l+el}function ex(e,t){if(e){let n=e.__last;if(n){let e=t.get(n);if(e)return tU(e)?"line-break":ie(e)&&e.isInline()?"decorator":null}return"empty"}return null}function eC(e,t,n){let i=ex(e,et),r=ex(t,en);i!==r&&t.getDOMSlot(n).setManagedLineBreak(r)}function eS(e,n){let i=[],r=e.__first;for(;null!==r;){let e=n.get(r);void 0===e&&t(101),i.push(r),r=e.__next}return i}function ev(e,t){let n=q._pendingDecorators,i=q._decorators;if(null===n){if(i[e]===t)return;n=iY(q)}n[e]=t}function eN(e){let t=e.nextSibling;return null!==t&&t===q._blockCursorElement&&(t=t.nextSibling),t}function eT(e){let n=ei.get(e);return void 0===n&&t(75,e),n}function eE(e){return{type:e}}let eb=eE("SELECTION_CHANGE_COMMAND"),eO=eE("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),eM=eE("CLICK_COMMAND"),ek=eE("DELETE_CHARACTER_COMMAND"),ew=eE("INSERT_LINE_BREAK_COMMAND"),eA=eE("INSERT_PARAGRAPH_COMMAND"),eD=eE("CONTROLLED_TEXT_INSERTION_COMMAND"),eR=eE("PASTE_COMMAND"),eP=eE("REMOVE_TEXT_COMMAND"),eI=eE("DELETE_WORD_COMMAND"),eL=eE("DELETE_LINE_COMMAND"),eF=eE("FORMAT_TEXT_COMMAND"),e$=eE("UNDO_COMMAND"),eK=eE("REDO_COMMAND"),eB=eE("KEYDOWN_COMMAND"),ez=eE("KEY_ARROW_RIGHT_COMMAND"),eW=eE("MOVE_TO_END"),ej=eE("KEY_ARROW_LEFT_COMMAND"),eY=eE("MOVE_TO_START"),eU=eE("KEY_ARROW_UP_COMMAND"),eJ=eE("KEY_ARROW_DOWN_COMMAND"),eH=eE("KEY_ENTER_COMMAND"),eV=eE("KEY_SPACE_COMMAND"),eG=eE("KEY_BACKSPACE_COMMAND"),eq=eE("KEY_ESCAPE_COMMAND"),eX=eE("KEY_DELETE_COMMAND"),eZ=eE("KEY_TAB_COMMAND"),eQ=eE("INSERT_TAB_COMMAND"),e0=eE("INDENT_CONTENT_COMMAND"),e1=eE("OUTDENT_CONTENT_COMMAND"),e2=eE("DROP_COMMAND"),e3=eE("FORMAT_ELEMENT_COMMAND"),e6=eE("DRAGSTART_COMMAND"),e4=eE("DRAGOVER_COMMAND"),e5=eE("DRAGEND_COMMAND"),e9=eE("COPY_COMMAND"),e8=eE("CUT_COMMAND"),e7=eE("SELECT_ALL_COMMAND"),te=eE("CLEAR_EDITOR_COMMAND"),tt=eE("CLEAR_HISTORY_COMMAND"),tn=eE("CAN_REDO_COMMAND"),ti=eE("CAN_UNDO_COMMAND"),tr=eE("FOCUS_COMMAND"),tl=eE("BLUR_COMMAND"),to=eE("KEY_MODIFIER_COMMAND"),ts=Object.freeze({}),ta=[["keydown",function(e,t){if((tu=e.timeStamp,td=e.key,!(t.isComposing()||rr(t,eB,e)))&&null!=e.key){if(tx&&i9(e))return n3(t,()=>{tk(t,tC)}),tx=!1,void(tC="");if(i6(e,"ArrowRight",{shiftKey:"any"}))rr(t,ez,e);else if(i6(e,"ArrowRight",i4))rr(t,eW,e);else if(i6(e,"ArrowLeft",{shiftKey:"any"}))rr(t,ej,e);else if(i6(e,"ArrowLeft",i4))rr(t,eY,e);else if(i6(e,"ArrowUp",{altKey:"any",shiftKey:"any"}))rr(t,eU,e);else if(i6(e,"ArrowDown",{altKey:"any",shiftKey:"any"}))rr(t,eJ,e);else if(i6(e,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0}))tm=!0,rr(t,eH,e);else if(" "===e.key)rr(t,eV,e);else if(l&&i6(e,"o",{ctrlKey:!0}))e.preventDefault(),tm=!0,rr(t,ew,!0);else if(i6(e,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"}))tm=!1,rr(t,eH,e);else if(i6(e,"Backspace",{shiftKey:"any"})||l&&i6(e,"h",{ctrlKey:!0}))i9(e)?rr(t,eG,e):(e.preventDefault(),rr(t,ek,!0));else if("Escape"===e.key)rr(t,eq,e);else if(i6(e,"Delete",{})||l&&i6(e,"d",{ctrlKey:!0}))"Delete"!==e.key?(e.preventDefault(),rr(t,ek,!1)):rr(t,eX,e);else if(i6(e,"Backspace",i5))e.preventDefault(),rr(t,eI,!0);else if(i6(e,"Delete",i5))e.preventDefault(),rr(t,eI,!1);else if(l&&i6(e,"Backspace",{metaKey:!0}))e.preventDefault(),rr(t,eL,!0);else if(l&&(i6(e,"Delete",{metaKey:!0})||i6(e,"k",{ctrlKey:!0})))e.preventDefault(),rr(t,eL,!1);else if(i6(e,"b",i4))e.preventDefault(),rr(t,eF,"bold");else if(i6(e,"u",i4))e.preventDefault(),rr(t,eF,"underline");else if(i6(e,"i",i4))e.preventDefault(),rr(t,eF,"italic");else if(i6(e,"Tab",{shiftKey:"any"}))rr(t,eZ,e);else if(i6(e,"z",i4))e.preventDefault(),rr(t,e$,void 0);else if(l?i6(e,"z",{metaKey:!0,shiftKey:!0}):i6(e,"y",{ctrlKey:!0})||i6(e,"z",{ctrlKey:!0,shiftKey:!0}))e.preventDefault(),rr(t,eK,void 0);else{let n=t._editorState._selection;null===n||na(n)?i6(e,"a",i4)&&(e.preventDefault(),rr(t,e7,e)):i6(e,"c",i4)?(e.preventDefault(),rr(t,e9,e)):i6(e,"x",i4)?(e.preventDefault(),rr(t,e8,e)):i6(e,"a",i4)&&(e.preventDefault(),rr(t,e7,e))}(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)&&rr(t,to,e)}}],["pointerdown",function(e,t){let n=e.target,i=e.pointerType;rS(n)&&"touch"!==i&&"pen"!==i&&0===e.button&&n3(t,()=>{ie(ij(n))||(tp=!0)})}],["compositionstart",function(e,t){n3(t,()=>{let n=nE();if(na(n)&&!t.isComposing()){let i=n.anchor,r=n.anchor.getNode();i$(i.key),(e.timeStamp<tu+30||"element"===i.type||!n.isCollapsed()||r.getFormat()!==n.format||t8(r)&&r.getStyle()!==n.style)&&rr(t,eD,p)}})}],["compositionend",function(e,t){o?ty=!0:!u&&(a||h)?(tx=!0,tC=e.data):n3(t,()=>{tk(t,e.data)})}],["input",function(e,t){e.stopPropagation(),n3(t,()=>{if(rC(e.target)&&ie(ij(e.target)))return;let n=nE(),i=e.data,r=tM(e);if(null!=i&&na(n)&&tN(n,r,i,e.timeStamp,!1)){ty&&(tk(t,i),ty=!1);let r=n.anchor.getNode(),l=ry(rc(t));if(null===l)return;let d=n.isBackward(),c=d?n.anchor.offset:n.focus.offset,f=d?n.focus.offset:n.anchor.offset;s&&!n.isCollapsed()&&t8(r)&&null!==l.anchorNode&&r.getTextContent().slice(0,c)+i+r.getTextContent().slice(c+f)===iQ(l.anchorNode)||rr(t,eD,i);let g=i.length;o&&g>1&&"insertCompositionText"===e.inputType&&!t.isComposing()&&(n.anchor.offset-=g),a||u||h||!t.isComposing()||(tu=0,i$(null))}else i0(!1,t,null!==i?i:void 0),ty&&(tk(t,i||void 0),ty=!1);nW(),R(nU())},{event:e}),tf=null}],["click",function(e,t){n3(t,()=>{let n=nE(),i=ry(rc(t)),r=nb();if(i){if(na(n)){let t=n.anchor,l=t.getNode();if("element"===t.type&&0===t.offset&&n.isCollapsed()&&!ii(l)&&1===iJ().getChildrenSize()&&l.getTopLevelElementOrThrow().isEmpty()&&null!==r&&n.is(r))i.removeAllRanges(),n.dirty=!0;else if(3===e.detail&&!n.isCollapsed()&&l!==n.focus.getNode()){let e=rL(l,e=>n9(e)&&!e.isInline());n9(e)&&e.select(0)}}else if("touch"===e.pointerType||"pen"===e.pointerType){let n=i.anchorNode;(rC(n)||iw(n))&&iV(nT(r,i,t,e))}}rr(t,eM,e)})}],["cut",ts],["copy",ts],["dragstart",ts],["dragover",ts],["dragend",ts],["paste",ts],["focus",ts],["blur",ts],["drop",ts]];s&&ta.push(["beforeinput",(e,n)=>{let i,r;return i=e.inputType,r=tM(e),void("deleteCompositionText"===i||o&&ri(n)||"insertCompositionText"!==i&&n3(n,()=>{var l;let o=nE();if("deleteContentBackward"===i){if(null===o){let e=nb();if(!na(e))return;iV(e.clone())}if(na(o)){let i=o.anchor.key===o.focus.key;if(l=e.timeStamp,"MediaLast"===td&&l<tu+30&&n.isComposing()&&i){if(i$(null),tu=0,setTimeout(()=>{n3(n,()=>{i$(null)})},30),na(o)){let e=o.anchor.getNode();e.markDirty(),t8(e)||t(142),tO(o,e)}}else{i$(null),e.preventDefault();let t=o.anchor.getNode(),r=t.getTextContent(),l=t.canInsertTextAfter(),s=0===o.anchor.offset&&o.focus.offset===r.length,a=f&&i&&!s&&l;if(a&&o.isCollapsed()&&(a=!ie(rn(o.anchor,!0))),!a){rr(n,ek,!0);let e=nE();f&&na(e)&&e.isCollapsed()&&(tS=e,setTimeout(()=>tS=null))}}return}}if(!na(o))return;let s=e.data;null!==tf&&i0(!1,n,tf),o.dirty&&null===tf||!o.isCollapsed()||ii(o.anchor.getNode())||null===r||o.applyDOMRange(r),tf=null;let a=o.anchor,d=o.focus,c=a.getNode(),h=d.getNode();if("insertText"!==i&&"insertTranspose"!==i)switch(e.preventDefault(),i){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":rr(n,eD,e);break;case"insertFromComposition":i$(null),rr(n,eD,e);break;case"insertLineBreak":i$(null),rr(n,ew,!1);break;case"insertParagraph":i$(null),tm&&!u?(tm=!1,rr(n,ew,!1)):rr(n,eA,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":rr(n,eR,e);break;case"deleteByComposition":(c!==h||n9(c)||n9(h)||!iM(c)||!iM(h))&&rr(n,eP,e);break;case"deleteByDrag":case"deleteByCut":rr(n,eP,e);break;case"deleteContent":rr(n,ek,!1);break;case"deleteWordBackward":rr(n,eI,!0);break;case"deleteWordForward":rr(n,eI,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":rr(n,eL,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":rr(n,eL,!1);break;case"formatStrikeThrough":rr(n,eF,"strikethrough");break;case"formatBold":rr(n,eF,"bold");break;case"formatItalic":rr(n,eF,"italic");break;case"formatUnderline":rr(n,eF,"underline");break;case"historyUndo":rr(n,e$,void 0);break;case"historyRedo":rr(n,eK,void 0)}else{if("\n"===s)e.preventDefault(),rr(n,ew,!1);else if("\n\n"===s)e.preventDefault(),rr(n,eA,void 0);else if(null==s&&e.dataTransfer){let t=e.dataTransfer.getData("text/plain");e.preventDefault(),o.insertRawText(t)}else null!=s&&tN(o,r,s,e.timeStamp,!0)?(e.preventDefault(),rr(n,eD,s)):tf=s;tc=e.timeStamp}}))}]);let tu=0,td=null,tc=0,tf=null,th=new WeakMap,tg=new WeakMap,t_=!1,tp=!1,tm=!1,ty=!1,tx=!1,tC="",tS=null,tv=[0,"",0,"root",0];function tN(e,t,n,i,r){let l=e.anchor,o=e.focus,a=l.getNode(),u=nU(),d=ry(rc(u)),c=null!==d?d.anchorNode:null,f=l.key,h=u.getElementByKey(f),g=n.length;return f!==o.key||!t8(a)||(!r&&(!s||tc<i+50)||a.isDirty()&&g<2||iq(n))&&l.offset!==o.offset&&!a.isComposing()||ik(a)||a.isDirty()&&g>1||(r||!s)&&null!==h&&!a.isComposing()&&c!==iD(h)||null!==d&&null!==t&&(!t.collapsed||t.startContainer!==d.anchorNode||t.startOffset!==d.anchorOffset)||a.getFormat()!==e.format||a.getStyle()!==e.style||function(e,t){let n;if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;let i=e.anchor.offset,r=t.getParentOrThrow(),l=iM(t);return 0===i?!t.canInsertTextBefore()||!r.canInsertTextBefore()&&!t.isComposing()||l||(t8(n=t.getPreviousSibling())||n9(n)&&n.isInline())&&!n.canInsertTextAfter():i===t.getTextContentSize()&&(!t.canInsertTextAfter()||!r.canInsertTextAfter()&&!t.isComposing()||l)}(e,a)}function tT(e,t){return iw(e)&&null!==e.nodeValue&&0!==t&&t!==e.nodeValue.length}function tE(e,n,i){let{anchorNode:r,anchorOffset:l,focusNode:o,focusOffset:s}=e;t_&&(t_=!1,tT(r,l)&&tT(o,s)&&!tS)||n3(n,()=>{if(!i)return void iV(null);if(!iN(n,r,o))return;let a=nE();if(tS&&na(a)&&a.isCollapsed()){let e=a.anchor,t=tS.anchor;(e.key===t.key&&e.offset===t.offset+1||1===e.offset&&t.getNode().is(e.getNode().getPreviousSibling()))&&iV(a=tS.clone())}if(tS=null,na(a)){let i=a.anchor,r=i.getNode();if(a.isCollapsed()){"Range"===e.type&&e.anchorNode===e.focusNode&&(a.dirty=!0);let l=rc(n).event,o=l?l.timeStamp:performance.now(),[s,u,d,c,f]=tv,h=iJ(),g=!1===n.isComposing()&&""===h.getTextContent();if(o<f+200&&i.offset===d&&i.key===c)tb(a,s,u);else if("text"===i.type)t8(r)||t(141),tO(a,r);else if("element"===i.type&&!g){n9(r)||t(259);let e=i.getNode();e.isEmpty()?tb(a,e.getTextFormat(),e.getTextStyle()):tb(a,0,"")}}else{let e=i.key,t=a.focus.key,n=a.getNodes(),r=n.length,o=a.isBackward(),u=o?s:l,d=o?l:s,c=o?t:e,f=o?e:t,h=2047,g=!1;for(let e=0;e<r;e++){let t=n[e],i=t.getTextContentSize();if(t8(t)&&0!==i&&(0!==e||t.__key!==c||u!==i)&&(e!==r-1||t.__key!==f||0!==d)&&(g=!0,0==(h&=t.getFormat())))break}a.format=g?h:0}}rr(n,eb,void 0)})}function tb(e,t,n){e.format===t&&e.style===n||(e.format=t,e.style=n,e.dirty=!0)}function tO(e,t){tb(e,t.getFormat(),t.getStyle())}function tM(e){if(!e.getTargetRanges)return null;let t=e.getTargetRanges();return 0===t.length?null:t[0]}function tk(e,t){let n=e._compositionKey;if(i$(null),null!==n&&null!=t){if(""===t){let t=iB(n),i=iD(e.getElementByKey(n));return void(null!==i&&null!==i.nodeValue&&t8(t)&&i1(t,i.nodeValue,null,null,!0))}if("\n"===t[t.length-1]){let t=nE();if(na(t)){let n=t.focus;return t.anchor.set(n.key,n.offset,n.type),void rr(e,eH,null)}}}i0(!0,e,t)}function tw(e){let t=e.__lexicalEventHandles;return void 0===t&&(e.__lexicalEventHandles=t=[]),t}let tA=new Map;function tD(e){let t,n=(t=rd(e.target))?t.getSelection():null;if(null===n)return;let i=iE(n.anchorNode);if(null===i)return;tp&&(tp=!1,n3(i,()=>{let t=nb(),r=n.anchorNode;(rC(r)||iw(r))&&iV(nT(t,n,i,e))}));let r=iX(i),l=r[r.length-1],o=l._key,s=tA.get(o),a=s||l;a!==i&&tE(n,a,!1),tE(n,i,!0),i!==l?tA.set(o,i):s&&tA.delete(o)}function tR(e){e._lexicalHandled=!0}function tP(e){return!0===e._lexicalHandled}let tI=()=>{};function tL(e,t,n){nW();let i=e.__key,r=e.getParent();if(null===r)return;let l=function(e){let t=nE();if(!na(t)||!n9(e))return t;let{anchor:n,focus:i}=t,r=n.getNode(),l=i.getNode();return ru(r,e)&&n.set(e.__key,0,"element"),ru(l,e)&&i.set(e.__key,0,"element"),t}(e),o=!1;if(na(l)&&t){let t=l.anchor,n=l.focus;t.key===i&&(nk(t,e,r,e.getPreviousSibling(),e.getNextSibling()),o=!0),n.key===i&&(nk(n,e,r,e.getPreviousSibling(),e.getNextSibling()),o=!0)}else nd(l)&&t&&e.isSelected()&&e.selectPrevious();if(na(l)&&t&&!o){let t=e.getIndexWithinParent();iL(e),nO(l,r,t,-1)}else iL(e);n||rf(r)||r.canBeEmpty()||!r.isEmpty()||tL(r,t),t&&l&&ii(r)&&r.isEmpty()&&r.selectEnd()}function tF(e){return e}let t$=Symbol.for("ephemeral");function tK(e){return e[t$]||!1}class tB{__type;__key;__parent;__prev;__next;__state;static getType(){let{ownNodeType:e}=rP(this);return void 0===e&&t(64,this.name),e}static clone(e){t(65,this.name)}$config(){return{}}config(e,t){let n=t.extends||Object.getPrototypeOf(this.constructor);return Object.assign(t,{extends:n,type:e}),{[e]:t}}afterCloneFrom(e){this.__key===e.__key?(this.__parent=e.__parent,this.__next=e.__next,this.__prev=e.__prev,this.__state=e.__state):e.__state&&(this.__state=e.__state.getWritable(this))}static importDOM;constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),iI(this,e)}getType(){return this.__type}isInline(){t(137,this.constructor.name)}isAttached(){let e=this.__key;for(;null!==e;){if("root"===e)return!0;let t=iB(e);if(null===t)break;e=t.__parent}return!1}isSelected(e){let t=e||nE();if(null==t)return!1;let n=t.getNodes().some(e=>e.__key===this.__key);if(t8(this))return n;if(na(t)&&"element"===t.anchor.type&&"element"===t.focus.type){if(t.isCollapsed())return!1;let e=this.getParent();if(ie(this)&&this.isInline()&&e){let n=t.isBackward()?t.focus:t.anchor;if(e.is(n.getNode())&&n.offset===e.getChildrenSize()&&this.is(e.getLastChild()))return!1}}return n}getKey(){return this.__key}getIndexWithinParent(){let e=this.getParent();if(null===e)return -1;let t=e.getFirstChild(),n=0;for(;null!==t;){if(this.is(t))return n;n++,t=t.getNextSibling()}return -1}getParent(){let e=this.getLatest().__parent;return null===e?null:iB(e)}getParentOrThrow(){let e=this.getParent();return null===e&&t(66,this.__key),e}getTopLevelElement(){let e=this;for(;null!==e;){let n=e.getParent();if(rf(n))return n9(e)||e===this&&ie(e)||t(194),e;e=n}return null}getTopLevelElementOrThrow(){let e=this.getTopLevelElement();return null===e&&t(67,this.__key),e}getParents(){let e=[],t=this.getParent();for(;null!==t;)e.push(t),t=t.getParent();return e}getParentKeys(){let e=[],t=this.getParent();for(;null!==t;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){let e=this.getLatest().__prev;return null===e?null:iB(e)}getPreviousSiblings(){let e=[],t=this.getParent();if(null===t)return e;let n=t.getFirstChild();for(;null!==n&&!n.is(this);)e.push(n),n=n.getNextSibling();return e}getNextSibling(){let e=this.getLatest().__next;return null===e?null:iB(e)}getNextSiblings(){let e=[],t=this.getNextSibling();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){let t=n9(this)?this:this.getParent(),n=n9(e)?e:e.getParent(),i=t&&n?lt(t,n):null;return i?i.commonAncestor:null}is(e){return null!=e&&this.__key===e.__key}isBefore(e){let n=lt(this,e);return null!==n&&("descendant"===n.type||("branch"===n.type?-1===r7(n):("same"!==n.type&&"ancestor"!==n.type&&t(279),!1)))}isParentOf(e){let t=lt(this,e);return null!==t&&"ancestor"===t.type}getNodesBetween(e){let n=this.isBefore(e),i=[],r=new Set,l=this;for(;null!==l;){let o=l.__key;if(r.has(o)||(r.add(o),i.push(l)),l===e)break;let s=n9(l)?n?l.getFirstChild():l.getLastChild():null;if(null!==s){l=s;continue}let a=n?l.getNextSibling():l.getPreviousSibling();if(null!==a){l=a;continue}let u=l.getParentOrThrow();if(r.has(u.__key)||i.push(u),u===e)break;let d=null,c=u;do{if(null===c&&t(68),d=n?c.getNextSibling():c.getPreviousSibling(),null===(c=c.getParent()))break;null!==d||r.has(c.__key)||i.push(c)}while(null===d)l=d}return n||i.reverse(),i}isDirty(){let e=nU()._dirtyLeaves;return null!==e&&e.has(this.__key)}getLatest(){if(tK(this))return this;let e=iB(this.__key);return null===e&&t(113),e}getWritable(){if(tK(this))return this;nW();let e=nY(),t=nU(),n=e._nodeMap,i=this.__key,r=this.getLatest(),l=t._cloneNotNeeded,o=nE();if(null!==o&&o.setCachedNodes(null),l.has(i))return iF(r),r;let s=rw(r);return l.add(i),iF(s),n.set(i,s),s}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,n){t(70)}updateDOM(e,n,i){t(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){let e=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...e}}static importJSON(e){t(18,this.name)}updateFromJSON(e){return function(e,t){let n=e.getWritable(),i=t.$,r=i;for(let e of K(n).flatKeys)e in t&&(void 0!==r&&r!==i||(r={...i}),r[e]=t[e]);return(n.__state||r)&&$(e).updateFromJSON(r),n}(this,e)}static transform(){return null}remove(e){tL(this,!0,e)}replace(e,n){nW();let i=nE();null!==i&&(i=i.clone()),r_(this,e);let r=this.getLatest(),l=this.__key,o=e.__key,s=e.getWritable(),a=this.getParentOrThrow().getWritable(),u=a.__size;iL(s);let d=r.getPreviousSibling(),c=r.getNextSibling(),f=r.__prev,h=r.__next,g=r.__parent;if((tL(r,!1,!0),null===d)?a.__first=o:d.getWritable().__next=o,(s.__prev=f,null===c)?a.__last=o:c.getWritable().__prev=o,s.__next=h,s.__parent=g,a.__size=u,n&&(n9(this)&&n9(s)||t(139),this.getChildren().forEach(e=>{s.append(e)})),na(i)){iV(i);let e=i.anchor,t=i.focus;e.key===l&&no(e,s),t.key===l&&no(t,s)}return iK()===l&&i$(o),s}insertAfter(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];nW(),r_(this,e);let n=this.getWritable(),i=e.getWritable(),r=i.getParent(),l=nE(),o=!1,s=!1;if(null!==r){let t=e.getIndexWithinParent();if(iL(i),na(l)){let e=r.__key,n=l.anchor,i=l.focus;o="element"===n.type&&n.key===e&&n.offset===t+1,s="element"===i.type&&i.key===e&&i.offset===t+1}}let a=this.getNextSibling(),u=this.getParentOrThrow().getWritable(),d=i.__key,c=n.__next;if(null===a?u.__last=d:a.getWritable().__prev=d,u.__size++,n.__next=d,i.__next=c,i.__prev=n.__key,i.__parent=n.__parent,t&&na(l)){let e=this.getIndexWithinParent();nO(l,u,e+1);let t=u.__key;o&&l.anchor.set(t,e+2,"element"),s&&l.focus.set(t,e+2,"element")}return e}insertBefore(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];nW(),r_(this,e);let n=this.getWritable(),i=e.getWritable(),r=i.__key;iL(i);let l=this.getPreviousSibling(),o=this.getParentOrThrow().getWritable(),s=n.__prev,a=this.getIndexWithinParent();null===l?o.__first=r:l.getWritable().__next=r,o.__size++,n.__prev=r,i.__prev=s,i.__next=n.__key,i.__parent=n.__parent;let u=nE();return t&&na(u)&&nO(u,this.getParentOrThrow(),a),e}isParentRequired(){return!1}createParentElementNode(){return ic()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){nW();let n=this.getPreviousSibling(),i=this.getParentOrThrow();if(null===n)return i.select(0,0);if(n9(n))return n.select();if(!t8(n)){let e=n.getIndexWithinParent()+1;return i.select(e,e)}return n.select(e,t)}selectNext(e,t){nW();let n=this.getNextSibling(),i=this.getParentOrThrow();if(null===n)return i.select();if(n9(n))return n.select(0,0);if(!t8(n)){let e=n.getIndexWithinParent();return i.select(e,e)}return n.select(e,t)}markDirty(){this.getWritable()}reconcileObservedMutation(e,t){this.markDirty()}}let tz="history-merge";class tW extends tB{static getType(){return"linebreak"}static clone(e){return new tW(e.__key)}constructor(e){super(e)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:e=>(function(e){let t=e.parentElement;if(null!==t&&rT(t)){let n=t.firstChild;if(n===e||n.nextSibling===e&&tJ(n)){let n=t.lastChild;if(n===e||n.previousSibling===e&&tJ(n))return!0}}return!1})(e)||function(e){let t=e.parentElement;if(null!==t&&rT(t)){let n=t.firstChild;if(n===e||n.nextSibling===e&&tJ(n))return!1;let i=t.lastChild;if(i===e||i.previousSibling===e&&tJ(i))return!0}return!1}(e)?null:{conversion:tj,priority:0}}}static importJSON(e){return tY().updateFromJSON(e)}}function tj(e){return{node:tY()}}function tY(){return rg(new tW)}function tU(e){return e instanceof tW}function tJ(e){return iw(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function tH(e,t){return 16&t?"code":128&t?"mark":32&t?"sub":64&t?"sup":null}function tV(e,t){return 1&t?"strong":2&t?"em":"span"}function tG(e,t,n,i,r){let l=i.classList,o=i7(r,"base");void 0!==o&&l.add(...o);let s=!1,a=8&t&&4&t;for(let e in void 0!==(o=i7(r,"underlineStrikethrough"))&&(8&n&&4&n?(s=!0,a||l.add(...o)):a&&l.remove(...o)),S){let i=S[e];if(void 0!==(o=i7(r,e)))if(n&i){if(s&&("underline"===e||"strikethrough"===e)){t&i&&l.remove(...o);continue}(0==(t&i)||a&&"underline"===e||"strikethrough"===e)&&l.add(...o)}else t&i&&l.remove(...o)}}function tq(e,t,n){let i=t.firstChild,r=n.isComposing(),l=e+(r?_:"");if(null==i)t.textContent=l;else{let e=i.nodeValue;if(e!==l)if(r||o){let[t,n,r]=function(e,t){let n=e.length,i=t.length,r=0,l=0;for(;r<n&&r<i&&e[r]===t[r];)r++;for(;l+r<n&&l+r<i&&e[n-l-1]===t[i-l-1];)l++;return[r,n-r-l,t.slice(r,i-l)]}(e,l);0!==n&&i.deleteData(t,n),i.insertData(t,r)}else i.nodeValue=l}}function tX(e,t,n,i,r,l){tq(r,e,t);let o=l.theme.text;void 0!==o&&tG(0,0,i,e,o)}function tZ(e,t){let n=document.createElement(t);return n.appendChild(e),n}class tQ extends tB{__text;__format;__style;__mode;__detail;static getType(){return"text"}static clone(e){return new tQ(e.__text,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__text=e.__text,this.__format=e.__format,this.__style=e.__style,this.__mode=e.__mode,this.__detail=e.__detail}constructor(e="",t){super(t),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){return b[this.getLatest().__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===iK()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){let t=S[e];return 0!=(this.getFormat()&t)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return iR(this.getLatest().__format,e,t)}canHaveFormat(){return!0}isInline(){return!0}createDOM(e,t){let n=this.__format,i=tH(0,n),r=tV(0,n),l=null===i?r:i,o=document.createElement(l),s=o;this.hasFormat("code")&&o.setAttribute("spellcheck","false"),null!==i&&(s=document.createElement(r),o.appendChild(s)),tX(s,this,0,n,this.__text,e);let a=this.__style;return""!==a&&(o.style.cssText=a),o}updateDOM(e,n,i){let r=this.__text,l=e.__format,o=this.__format,s=tH(0,l),a=tH(0,o),u=tV(0,l),d=tV(0,o);if((null===s?u:s)!==(null===a?d:a))return!0;if(s===a&&u!==d){let e=n.firstChild;null==e&&t(48);let l=document.createElement(d);return tX(l,this,0,o,r,i),n.replaceChild(l,e),!1}let c=n;null!==a&&null!==s&&null==(c=n.firstChild)&&t(49),tq(r,c,this);let f=i.theme.text;void 0!==f&&l!==o&&tG(0,l,o,c,f);let h=e.__style,g=this.__style;return h!==g&&(n.style.cssText=g),!1}static importDOM(){return{"#text":()=>({conversion:t3,priority:0}),b:()=>({conversion:t1,priority:0}),code:()=>({conversion:t5,priority:0}),em:()=>({conversion:t5,priority:0}),i:()=>({conversion:t5,priority:0}),mark:()=>({conversion:t5,priority:0}),s:()=>({conversion:t5,priority:0}),span:()=>({conversion:t0,priority:0}),strong:()=>({conversion:t5,priority:0}),sub:()=>({conversion:t5,priority:0}),sup:()=>({conversion:t5,priority:0}),u:()=>({conversion:t5,priority:0})}}static importJSON(e){return t9().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTextContent(e.text).setFormat(e.format).setDetail(e.detail).setMode(e.mode).setStyle(e.style)}exportDOM(e){let{element:n}=super.exportDOM(e);return rC(n)||t(132),n.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?n.style.textTransform="lowercase":this.hasFormat("uppercase")?n.style.textTransform="uppercase":this.hasFormat("capitalize")&&(n.style.textTransform="capitalize"),this.hasFormat("bold")&&(n=tZ(n,"b")),this.hasFormat("italic")&&(n=tZ(n,"i")),this.hasFormat("strikethrough")&&(n=tZ(n,"s")),this.hasFormat("underline")&&(n=tZ(n,"u")),{element:n}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(e,t){}setFormat(e){let t=this.getWritable();return t.__format="string"==typeof e?S[e]:e,t}setDetail(e){let t=this.getWritable();return t.__detail="string"==typeof e?v[e]:e,t}setStyle(e){let t=this.getWritable();return t.__style=e,t}toggleFormat(e){let t=iR(this.getFormat(),e,null);return this.setFormat(t)}toggleDirectionless(){let e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){let e=this.getWritable();return e.__detail^=2,e}setMode(e){let t=E[e];if(this.__mode===t)return this;let n=this.getWritable();return n.__mode=t,n}setTextContent(e){if(this.__text===e)return this;let t=this.getWritable();return t.__text=e,t}select(e,t){nW();let n=e,i=t,r=nE(),l=this.getTextContent(),o=this.__key;if("string"==typeof l){let e=l.length;void 0===n&&(n=e),void 0===i&&(i=e)}else n=0,i=0;if(!na(r))return nS(o,n,o,i,"text","text");{let e=iK();e!==r.anchor.key&&e!==r.focus.key||i$(o),r.setTextNodeRange(this,n,this,i)}return r}selectStart(){return this.select(0,0)}selectEnd(){let e=this.getTextContentSize();return this.select(e,e)}spliceText(e,t,n,i){let r=this.getWritable(),l=r.__text,o=n.length,s=e;s<0&&(s=o+s)<0&&(s=0);let a=nE();if(i&&na(a)){let t=e+o;a.setTextNodeRange(r,t,r,t)}return r.__text=l.slice(0,s)+n+l.slice(s+t),r}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(){let e;for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];nW();let r=this.getLatest(),l=r.getTextContent();if(""===l)return[];let o=r.__key,s=iK(),a=l.length;n.sort((e,t)=>e-t),n.push(a);let u=[],d=n.length;for(let e=0,t=0;e<a&&t<=d;t++){let i=n[t];i>e&&(u.push(l.slice(e,i)),e=i)}let c=u.length;if(1===c)return[r];let f=u[0],h=r.getParent(),g=r.getFormat(),_=r.getStyle(),p=r.__detail,m=!1,y=null,x=null,C=nE();if(na(C)){let[e,t]=C.isBackward()?[C.focus,C.anchor]:[C.anchor,C.focus];"text"===e.type&&e.key===o&&(y=e),"text"===t.type&&t.key===o&&(x=t)}r.isSegmented()?((e=t9(f)).__format=g,e.__style=_,e.__detail=p,e.__state=j(r,e),m=!0):e=r.setTextContent(f);let S=[e];for(let e=1;e<c;e++){let t=t9(u[e]);t.__format=g,t.__style=_,t.__detail=p,t.__state=j(r,t);let n=t.__key;s===o&&i$(n),S.push(t)}let v=y?y.offset:null,N=x?x.offset:null,T=0;for(let e of S){if(!y&&!x)break;let t=T+e.getTextContentSize();if(null!==y&&null!==v&&v<=t&&v>=T&&(y.set(e.getKey(),v-T,"text"),v<t&&(y=null)),null!==x&&null!==N&&N<=t&&N>=T){x.set(e.getKey(),N-T,"text");break}T=t}if(null!==h){let e,t;e=this.getPreviousSibling(),t=this.getNextSibling(),null!==e&&iF(e),null!==t&&iF(t);let n=h.getWritable(),i=this.getIndexWithinParent();m?(n.splice(i,0,S),this.remove()):n.splice(i,1,S),na(C)&&nO(C,h,i,c-1)}return S}mergeWithSibling(e){let n=e===this.getPreviousSibling();n||e===this.getNextSibling()||t(50);let i=this.__key,r=e.__key,l=this.__text,o=l.length;iK()===r&&i$(i);let s=nE();if(na(s)){let t=s.anchor,l=s.focus;null!==t&&t.key===r&&nw(t,n,i,e,o),null!==l&&l.key===r&&nw(l,n,i,e,o)}let a=e.__text,u=n?a+l:l+a;this.setTextContent(u);let d=this.getWritable();return e.remove(),d}isTextEntity(){return!1}}function t0(e){return{forChild:t7(e.style),node:null}}function t1(e){let t="normal"===e.style.fontWeight;return{forChild:t7(e.style,t?void 0:"bold"),node:null}}let t2=new WeakMap;function t3(e){null===e.parentElement&&t(129);let n=e.textContent||"";if(null!==function(e){let t,n=e.parentNode,i=[e];for(;null!==n&&void 0===(t=t2.get(n))&&!function(e){if(!rC(e))return!1;if("PRE"===e.nodeName)return!0;let t=e.style.whiteSpace;return"string"==typeof t&&t.startsWith("pre")}(n);)i.push(n),n=n.parentNode;let r=void 0===t?n:t;for(let e=0;e<i.length;e++)t2.set(i[e],r);return r}(e)){let e=n.split(/(\r?\n|\t)/),t=[],i=e.length;for(let n=0;n<i;n++){let i=e[n];"\n"===i||"\r\n"===i?t.push(tY()):"	"===i?t.push(nt()):""!==i&&t.push(t9(i))}return{node:t}}if(""===(n=n.replace(/\r/g,"").replace(/[ \t\n]+/g," ")))return{node:null};if(" "===n[0]){let t=e,i=!0;for(;null!==t&&null!==(t=t6(t,!1));){let e=t.textContent||"";if(e.length>0){/[ \t\n]$/.test(e)&&(n=n.slice(1)),i=!1;break}}i&&(n=n.slice(1))}if(" "===n[n.length-1]){let t=e,i=!0;for(;null!==t&&null!==(t=t6(t,!0));)if((t.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){i=!1;break}i&&(n=n.slice(0,n.length-1))}return""===n?{node:null}:{node:t9(n)}}function t6(e,t){let n=e;for(;;){let e;for(;null===(e=t?n.nextSibling:n.previousSibling);){let e=n.parentElement;if(null===e)return null;n=e}if(rC(n=e)){let e=n.style.display;if(""===e&&!rN(n)||""!==e&&!e.startsWith("inline"))return null}let i=n;for(;null!==(i=t?n.firstChild:n.lastChild);)n=i;if(iw(n))return n;if("BR"===n.nodeName)return null}}let t4={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function t5(e){let t=t4[e.nodeName.toLowerCase()];return void 0===t?{node:null}:{forChild:t7(e.style,t),node:null}}function t9(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return rg(new tQ(e))}function t8(e){return e instanceof tQ}function t7(e,t){let n=e.fontWeight,i=e.textDecoration.split(" "),r="700"===n||"bold"===n,l=i.includes("line-through"),o="italic"===e.fontStyle,s=i.includes("underline"),a=e.verticalAlign;return e=>(t8(e)&&(r&&!e.hasFormat("bold")&&e.toggleFormat("bold"),l&&!e.hasFormat("strikethrough")&&e.toggleFormat("strikethrough"),o&&!e.hasFormat("italic")&&e.toggleFormat("italic"),s&&!e.hasFormat("underline")&&e.toggleFormat("underline"),"sub"!==a||e.hasFormat("subscript")||e.toggleFormat("subscript"),"super"!==a||e.hasFormat("superscript")||e.toggleFormat("superscript"),t&&!e.hasFormat(t)&&e.toggleFormat(t)),e)}class ne extends tQ{static getType(){return"tab"}static clone(e){return new ne(e.__key)}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}createDOM(e){let t=super.createDOM(e),n=i7(e.theme,"tab");return void 0!==n&&t.classList.add(...n),t}static importJSON(e){return nt().updateFromJSON(e)}setTextContent(e){return"	"!==e&&""!==e&&n(126),super.setTextContent("	")}spliceText(e,n,i,r){return""===i&&0===n||"	"===i&&1===n||t(286),this}setDetail(e){return 2!==e&&t(127),this}setMode(e){return"normal"!==e&&t(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function nt(){return rg(new ne)}function nn(e){return e instanceof ne}class ni{key;offset;type;_selection;constructor(e,t,n){this._selection=null,this.key=e,this.offset=t,this.type=n}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){return this.key===e.key?this.offset<e.offset:0>r8(ld(ln(this,"next")),ld(ln(e,"next")))}getNode(){let e=iB(this.key);return null===e&&t(20),e}set(e,t,n,i){let r=this._selection,l=this.key;i&&this.key===e&&this.offset===t&&this.type===n||(this.key=e,this.offset=t,this.type=n,nz()||(iK()===l&&i$(e),null!==r&&(r.setCachedNodes(null),r.dirty=!0)))}}function nr(e,t,n){return new ni(e,t,n)}function nl(e,t){let n=t.__key,i=e.offset,r="element";if(t8(t)){r="text";let e=t.getTextContentSize();i>e&&(i=e)}else if(!n9(t)){let e=t.getNextSibling();if(t8(e))n=e.__key,i=0,r="text";else{let e=t.getParent();e&&(n=e.__key,i=t.getIndexWithinParent()+1)}}e.set(n,i,r)}function no(e,t){if(n9(t)){let n=t.getLastDescendant();n9(n)||t8(n)?nl(e,n):nl(e,t)}else nl(e,t)}class ns{_nodes;_cachedNodes;dirty;constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!nd(e))return!1;let t=this._nodes,n=e._nodes;return t.size===n.size&&Array.from(t).every(e=>n.has(e))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new ns(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){let t,n=this.getNodes(),i=n.length,r=n[i-1];if(t8(r))t=r.select();else{let e=r.getIndexWithinParent()+1;t=r.getParentOrThrow().select(e,e)}t.insertNodes(e);for(let e=0;e<i;e++)n[e].remove()}getNodes(){let e=this._cachedNodes;if(null!==e)return e;let t=this._nodes,n=[];for(let e of t){let t=iB(e);null!==t&&n.push(t)}return nz()||(this._cachedNodes=n),n}getTextContent(){let e=this.getNodes(),t="";for(let n=0;n<e.length;n++)t+=e[n].getTextContent();return t}deleteNodes(){let e=this.getNodes();if((nE()||nb())===this&&e[0]){let t=rq(e[0],"next");lr(r5(t,t))}for(let t of e)t.remove()}}function na(e){return e instanceof nu}class nu{format;style;anchor;focus;_cachedNodes;dirty;constructor(e,t,n,i){this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.format=n,this.style=i,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!na(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){let e=this._cachedNodes;if(null!==e)return e;let t=function(e){let t=[],[n,i]=e.getTextSlices();n&&t.push(n.caret.origin);let r=new Set,l=new Set;for(let n of e)if(rJ(n)){let{origin:e}=n;0===t.length?r.add(e):(l.add(e),t.push(e))}else{let{origin:e}=n;n9(e)&&l.has(e)||t.push(e)}if(i&&t.push(i.caret.origin),rU(e.focus)&&n9(e.focus.origin)&&null===e.focus.getNodeAtCaret())for(let n=rQ(e.focus.origin,"previous");rJ(n)&&r.has(n.origin)&&!n.origin.isEmpty()&&n.origin.is(t[t.length-1]);n=r1(n))r.delete(n.origin),t.pop();for(;t.length>1;){let e=t[t.length-1];if(!n9(e)||l.has(e)||e.isEmpty()||r.has(e))break;t.pop()}if(0===t.length&&e.isCollapsed()){let n=ld(e.anchor),i=ld(e.anchor.getFlipped()),r=e=>rY(e)?e.origin:e.getNodeAtCaret(),l=r(n)||r(i)||(e.anchor.getNodeAtCaret()?n.origin:i.origin);t.push(l)}return t}(lh(lo(this),"next"));return nz()||(this._cachedNodes=t),t}setTextNodeRange(e,t,n,i){this.anchor.set(e.__key,t,"text"),this.focus.set(n.__key,i,"text")}getTextContent(){let e=this.getNodes();if(0===e.length)return"";let t=e[0],n=e[e.length-1],i=this.anchor,r=this.focus,l=i.isBefore(r),[o,s]=nf(this),a="",u=!0;for(let d=0;d<e.length;d++){let c=e[d];if(n9(c)&&!c.isInline())u||(a+="\n"),u=!c.isEmpty();else if(u=!1,t8(c)){let e=c.getTextContent();c===t?c===n?"element"===i.type&&"element"===r.type&&r.offset!==i.offset||(e=o<s?e.slice(o,s):e.slice(s,o)):e=l?e.slice(o):e.slice(s):c===n&&(e=l?e.slice(0,s):e.slice(0,o)),a+=e}else!ie(c)&&!tU(c)||c===n&&this.isCollapsed()||(a+=c.getTextContent())}return a}applyDOMRange(e){let t=nU(),n=t.getEditorState()._selection,i=nx(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,n);if(null===i)return;let[r,l]=i;this.anchor.set(r.key,r.offset,r.type,!0),this.focus.set(l.key,l.offset,l.type,!0),H(this)}clone(){let e=this.anchor,t=this.focus;return new nu(nr(e.key,e.offset,e.type),nr(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=iR(this.format,e,null),this.dirty=!0}setFormat(e){this.format=e,this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){let t=S[e];return 0!=(this.format&t)}insertRawText(e){let t=e.split(/(\r?\n|\t)/),n=[],i=t.length;for(let e=0;e<i;e++){let i=t[e];"\n"===i||"\r\n"===i?n.push(tY()):"	"===i?n.push(nt()):n.push(t9(i))}this.insertNodes(n)}insertText(e){let n=this.anchor,i=this.focus,r=this.format,l=this.style,o=n,s=i;!this.isCollapsed()&&i.isBefore(n)&&(o=i,s=n),"element"===o.type&&function(e,t,n,i){let r=e.getNode(),l=r.getChildAtIndex(e.offset),o=t9();if(o.setFormat(n),o.setStyle(i),ih(l))l.splice(0,0,[o]);else{let e=ii(r)?ic().append(o):o;null===l?r.append(e):l.insertBefore(e)}e.is(t)&&t.set(o.__key,0,"text"),e.set(o.__key,0,"text")}(o,s,r,l),"element"===s.type&&li(s,ld(ln(s,"next")));let a=o.offset,u=s.offset,d=this.getNodes(),c=d.length,f=d[0];t8(f)||t(26);let h=f.getTextContent().length,g=f.getParentOrThrow(),_=d[c-1];if(1===c&&"element"===s.type&&(u=h,s.set(o.key,u,"text")),this.isCollapsed()&&a===h&&(ik(f)||!f.canInsertTextAfter()||!g.canInsertTextAfter()&&null===f.getNextSibling())){let t=f.getNextSibling();if(t8(t)&&t.canInsertTextBefore()&&!ik(t)||((t=t9()).setFormat(r),t.setStyle(l),g.canInsertTextAfter()?f.insertAfter(t):g.insertAfter(t)),t.select(0,0),f=t,""!==e)return void this.insertText(e)}else if(this.isCollapsed()&&0===a&&(ik(f)||!f.canInsertTextBefore()||!g.canInsertTextBefore()&&null===f.getPreviousSibling())){let t=f.getPreviousSibling();if(t8(t)&&!ik(t)||((t=t9()).setFormat(r),g.canInsertTextBefore()?f.insertBefore(t):g.insertBefore(t)),t.select(),f=t,""!==e)return void this.insertText(e)}else if(f.isSegmented()&&a!==h){let e=t9(f.getTextContent());e.setFormat(r),f.replace(e),f=e}else if(!this.isCollapsed()&&""!==e){let t=_.getParent();if(!g.canInsertTextBefore()||!g.canInsertTextAfter()||n9(t)&&(!t.canInsertTextBefore()||!t.canInsertTextAfter()))return this.insertText(""),ny(this.anchor,this.focus,null),void this.insertText(e)}if(1===c){if(iM(f)){let t=t9(e);return t.select(),void f.replace(t)}let t=f.getFormat(),n=f.getStyle();if(a!==u||t===r&&n===l){if(nn(f)){let t=t9(e);return t.setFormat(r),t.setStyle(l),t.select(),void f.replace(t)}}else{if(""!==f.getTextContent()){let t=t9(e);if(t.setFormat(r),t.setStyle(l),t.select(),0===a)f.insertBefore(t,!1);else{let[e]=f.splitText(a);e.insertAfter(t,!1)}return void(t.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length))}f.setFormat(r),f.setStyle(l)}let i=u-a;""===(f=f.spliceText(a,i,e,!0)).getTextContent()?f.remove():"text"===this.anchor.type&&(f.isComposing()?this.anchor.offset-=e.length:(this.format=t,this.style=n))}else{let t=new Set([...f.getParentKeys(),..._.getParentKeys()]),n=n9(f)?f:f.getParentOrThrow(),i=n9(_)?_:_.getParentOrThrow(),r=_;if(!n.is(i)&&i.isInline())do r=i,i=i.getParentOrThrow();while(i.isInline())if("text"===s.type&&(0!==u||""===_.getTextContent())||"element"===s.type&&_.getIndexWithinParent()<u)if(t8(_)&&!iM(_)&&u!==_.getTextContentSize()){if(_.isSegmented()){let e=t9(_.getTextContent());_.replace(e),_=e}ii(s.getNode())||"text"!==s.type||(_=_.spliceText(0,u,"")),t.add(_.__key)}else{let e=_.getParentOrThrow();e.canBeEmpty()||1!==e.getChildrenSize()?_.remove():e.remove()}else t.add(_.__key);let l=i.getChildren(),o=new Set(d),g=n.is(i),p=n.isInline()&&null===f.getNextSibling()?n:f;for(let e=l.length-1;e>=0;e--){let t=l[e];if(t.is(f)||n9(t)&&t.isParentOf(f))break;t.isAttached()&&(!o.has(t)||t.is(r)?g||p.insertAfter(t,!1):t.remove())}if(!g){let e=i,n=null;for(;null!==e;){let i=e.getChildren(),r=i.length;(0===r||i[r-1].is(n))&&(t.delete(e.__key),n=e),e=e.getParent()}}if(iM(f))if(a===h)f.select();else{let t=t9(e);t.select(),f.replace(t)}else""===(f=f.spliceText(a,h-a,e,!0)).getTextContent()?f.remove():f.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length);for(let e=1;e<c;e++){let n=d[e],i=n.__key;t.has(i)||n.remove()}}}removeText(){let e=nE()===this;ll(this,function(e){let n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"removeEmptySlices";if(e.isCollapsed())return e;let l="root",o="next",s=r,a=lh(e,o),u=la(a.anchor,l),d=la(a.focus.getFlipped(),l),c=new Set,f=[];for(let e of a.iterNodeCarets(l))if(rJ(e))c.add(e.origin.getKey());else if(rU(e)){let{origin:t}=e;n9(t)&&!c.has(t.getKey())||f.push(t)}for(let e of f)e.remove();for(let e of a.getTextSlices()){if(!e)continue;let{origin:t}=e.caret,n=t.getTextContentSize(),i=ls(rq(t,o)),r=t.getMode();if(Math.abs(e.distance)===n&&"removeEmptySlices"===s||"token"===r&&0!==e.distance)i.remove();else if(0!==e.distance){s="removeEmptySlices";let t=e.removeTextSlice(),n=e.caret.origin;if("segmented"===r){let e=t.origin,n=t9(e.getTextContent()).setStyle(e.getStyle()).setFormat(e.getFormat());i.replaceOrInsert(n),t=rX(n,o,t.offset)}n.is(u[0].origin)&&(u[0]=t),n.is(d[0].origin)&&(d[0]=t.getFlipped())}}for(let e of u)if(lu(e)){n=ld(e);break}for(let e of d)if(lu(e)){i=ld(e);break}let h=function(e,t,n){let i;if(!e||!t)return null;let r=e.getParentAtCaret(),l=t.getParentAtCaret();if(!r||!l)return null;let o=r.getParents().reverse();o.push(r);let s=l.getParents().reverse();s.push(l);let a=Math.min(o.length,s.length);for(i=0;i<a&&o[i]===s[i];i++);let u=(e,t)=>{let n;for(let r=i;r<e.length;r++){let i=e[r];if(rf(i))return;!n&&t(i)&&(n=i)}return n},d=u(o,rE),c=d&&u(s,e=>n.has(e.getKey())&&rE(e));return d&&c?[d,c]:null}(n,i,c);if(h){let[e,t]=h;rQ(e,"previous").splice(0,t.getChildren()),t.remove()}let g=[n,i,...u,...d].find(lu);if(g)return r4(lf(ld(g),e.direction));t(269,JSON.stringify(u.map(e=>e.origin.__key)))}(lo(this))),e&&nE()!==this&&iV(this)}formatText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isCollapsed())return this.toggleFormat(e),void i$(null);let n=this.getNodes(),i=[];for(let e of n)t8(e)&&i.push(e);let r=t=>{n.forEach(n=>{if(n9(n)){let i=n.getFormatFlags(e,t);n.setTextFormat(i)}})},l=i.length;if(0===l)return this.toggleFormat(e),i$(null),void r(t);let o=this.anchor,s=this.focus,a=this.isBackward(),u=a?s:o,d=a?o:s,c=0,f=i[0],h="element"===u.type?0:u.offset;if("text"===u.type&&h===f.getTextContentSize()&&(c=1,f=i[1],h=0),null==f)return;let g=f.getFormatFlags(e,t);r(g);let _=l-1,p=i[_],m="text"===d.type?d.offset:p.getTextContentSize();if(f.is(p)){if(h===m)return;if(ik(f)||0===h&&m===f.getTextContentSize())f.setFormat(g);else{let e=f.splitText(h,m),t=0===h?e[0]:e[1];t.setFormat(g),"text"===u.type&&u.set(t.__key,0,"text"),"text"===d.type&&d.set(t.__key,m-h,"text")}return void(this.format=g)}0===h||ik(f)||([,f]=f.splitText(h),h=0),f.setFormat(g);let y=p.getFormatFlags(e,g);m>0&&(m===p.getTextContentSize()||ik(p)||([p]=p.splitText(m)),p.setFormat(y));for(let t=c+1;t<_;t++){let n=i[t],r=n.getFormatFlags(e,y);n.setFormat(r)}"text"===u.type&&u.set(f.__key,h,"text"),"text"===d.type&&d.set(p.__key,m,"text"),this.format=g|y}insertNodes(e){var n;if(0===e.length)return;if(this.isCollapsed()||this.removeText(),"root"===this.anchor.key){this.insertParagraph();let n=nE();return na(n)||t(134),n.insertNodes(e)}let i=(this.isBackward()?this.focus:this.anchor).getNode(),r=rL(i,rE),l=e[e.length-1];if(n9(r)&&"__language"in r){if("__language"in e[0])this.insertText(e[0].getTextContent());else{let t=nR(this);r.splice(t,0,e),l.selectEnd()}return}if(!e.some(e=>(n9(e)||ie(e))&&!e.isInline())){n9(r)||t(211,i.constructor.name,i.getType());let n=nR(this);return r.splice(n,0,e),void l.selectEnd()}let o=function(e){let t=ic(),n=null;for(let i=0;i<e.length;i++){let r=e[i],l=tU(r);if(l||ie(r)&&r.isInline()||n9(r)&&r.isInline()||t8(r)||r.isParentRequired()){if(null===n&&(n=r.createParentElementNode(),t.append(n),l))continue;null!==n&&n.append(r)}else t.append(r),n=null}return t}(e),s=o.getLastDescendant(),a=o.getChildren(),u=n9(r)&&r.isEmpty()?null:this.insertParagraph(),d=a[a.length-1],c=a[0];n9(n=c)&&rE(n)&&!n.isEmpty()&&n9(r)&&(!r.isEmpty()||r.canMergeWhenEmpty())&&(n9(r)||t(211,i.constructor.name,i.getType()),r.append(...c.getChildren()),c=a[1]),c&&(null===r&&t(212,i.constructor.name,i.getType()),function(e,n){let i=n.getParentOrThrow().getLastChild(),r=n,l=[n];for(;r!==i;)r.getNextSibling()||t(140),l.push(r=r.getNextSibling());let o=e;for(let e of l)o=o.insertAfter(e)}(r,c));let f=rL(s,rE);u&&n9(f)&&(u.canMergeWhenEmpty()||rE(d))&&(f.append(...u.getChildren()),u.remove()),n9(r)&&r.isEmpty()&&r.remove(),s.selectEnd();let h=n9(r)?r.getLastChild():null;tU(h)&&f!==r&&h.remove()}insertParagraph(){if("root"===this.anchor.key){let e=ic();return iJ().splice(this.anchor.offset,0,[e]),e.select(),e}let e=nR(this),n=rL(this.anchor.getNode(),rE);n9(n)||t(213);let i=n.getChildAtIndex(e),r=i?[i,...i.getNextSiblings()]:[],l=n.insertNewAfter(this,!1);return l?(l.append(...r),l.selectStart(),l):null}insertLineBreak(e){let t=tY();if(this.insertNodes([t]),e){let e=t.getParentOrThrow(),n=t.getIndexWithinParent();e.select(n,n)}}extract(){let e=[...this.getNodes()],t=e.length,n=e[0],i=e[t-1],[r,l]=nf(this),o=this.isBackward(),[s,a]=o?[this.focus,this.anchor]:[this.anchor,this.focus],[u,d]=o?[l,r]:[r,l];if(0===t)return[];if(1===t){if(t8(n)&&!this.isCollapsed()){let e=n.splitText(u,d),t=0===u?e[0]:e[1];return t?(s.set(t.getKey(),0,"text"),a.set(t.getKey(),t.getTextContentSize(),"text"),[t]):[]}return[n]}if(t8(n)&&(u===n.getTextContentSize()?e.shift():0!==u&&([,n]=n.splitText(u),e[0]=n,s.set(n.getKey(),0,"text"))),t8(i)){let t=i.getTextContent().length;0===d?e.pop():d!==t&&([i]=i.splitText(d),e[e.length-1]=i,a.set(i.getKey(),i.getTextContentSize(),"text"))}return e}modify(e,t,n){var i;if(nP(this,e,t,n))return;let r="move"===e,l=nU(),o=ry(rc(l));if(!o)return;let s=l._blockCursorElement,a=l._rootElement,u=this.focus.getNode();if(null===a||null===s||!n9(u)||u.isInline()||u.canBeEmpty()||rm(s,l,a),this.dirty){let e=ro(l,this.anchor.key),t=ro(l,this.focus.key);"text"===this.anchor.type&&(e=iD(e)),"text"===this.focus.type&&(t=iD(t)),e&&t&&nA(o,e,this.anchor.offset,t,this.focus.offset)}if(i=t?"backward":"forward",o.modify(e,i,n),o.rangeCount>0){let e=o.getRangeAt(0),n=this.anchor.getNode(),i=ii(n)?n:function(e){let t=e.getParentOrThrow();for(;null!==t&&!rf(t);)t=t.getParentOrThrow();return t}(n);if(this.applyDOMRange(e),this.dirty=!0,!r){let n,r,l,s,a,u=this.getNodes(),d=[],c=!1;for(let e=0;e<u.length;e++){let t=u[e];ru(t,i)?d.push(t):c=!0}if(c&&d.length>0)if(t){let e=d[0];n9(e)?e.selectStart():e.getParentOrThrow().selectStart()}else{let e=d[d.length-1];n9(e)?e.selectEnd():e.getParentOrThrow().selectEnd()}o.anchorNode===e.startContainer&&o.anchorOffset===e.startOffset||(n=this.focus,l=(r=this.anchor).key,s=r.offset,a=r.type,r.set(n.key,n.offset,n.type,!0),n.set(l,s,a,!0))}}"lineboundary"===n&&nP(this,e,t,n,"decorators")}forwardDeletion(e,t,n){if(!n&&("element"===e.type&&n9(t)&&e.offset===t.getChildrenSize()||"text"===e.type&&e.offset===t.getTextContentSize())){let e=t.getParent(),n=t.getNextSibling()||(null===e?null:e.getNextSibling());if(n9(n)&&n.isShadowRoot())return!0}return!1}deleteCharacter(e){let t=this.isCollapsed();if(this.isCollapsed()){let t=this.anchor,n=t.getNode();if(this.forwardDeletion(t,n,e))return;let i=r6(ln(t,e?"previous":"next"));if(i.getTextSlices().every(e=>null===e||0===e.distance)){let e={type:"initial"};for(let t of i.iterNodeCarets("shadowRoot"))if(rJ(t))if(t.origin.isInline());else{if(t.origin.isShadowRoot()){if("merge-block"===e.type)break;if(n9(i.anchor.origin)&&i.anchor.origin.isEmpty()){let e=ld(t);ll(this,r5(e,e)),i.anchor.origin.remove()}return}"merge-next-block"!==e.type&&"merge-block"!==e.type||(e={block:e.block,caret:t,type:"merge-block"})}else{if("merge-block"===e.type)break;if(rU(t)){if(n9(t.origin)){if(t.origin.isInline()){if(!t.origin.isParentOf(i.anchor.origin))break}else e={block:t.origin,type:"merge-next-block"};continue}if(ie(t.origin)){if(t.origin.isIsolated());else if("merge-next-block"===e.type&&(t.origin.isKeyboardSelectable()||!t.origin.isInline())&&n9(i.anchor.origin)&&i.anchor.origin.isEmpty()){i.anchor.origin.remove();let e=nN();e.add(t.origin.getKey()),iV(e)}else t.origin.remove();return}break}}if("merge-block"===e.type){let{caret:t,block:n}=e;return ll(this,r5(!t.origin.isEmpty()&&n.isEmpty()?ls(rq(n,t.direction)):i.anchor,t)),this.removeText()}}let r=this.focus;if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&0===t.offset&&nh(this,t.getNode()))return}else{let i="text"===r.type?r.getNode():null;if(n="text"===t.type?t.getNode():null,null!==i&&i.isSegmented()){let t=r.offset,l=i.getTextContentSize();if(i.is(n)||e&&t!==l||!e&&0!==t)return void n_(i,e,t)}else if(null!==n&&n.isSegmented()){let r=t.offset,l=n.getTextContentSize();if(n.is(i)||e&&0!==r||!e&&r!==l)return void n_(n,e,r)}!function(e,t){let n=e.anchor,i=e.focus,r=n.getNode();if(r===i.getNode()&&"text"===n.type&&"text"===i.type){var l;let e=n.offset,o=i.offset,s=e<o,a=s?e:o,u=s?o:e,d=u-1;a===d||iq(l=r.getTextContent().slice(a,u))||ng(l)||(t?i.set(i.key,d,i.type):n.set(n.key,d,n.type))}}(this,e)}}if(this.removeText(),e&&!t&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){let e=this.anchor.getNode();e.isEmpty()&&ii(e.getParent())&&null===e.getPreviousSibling()&&nh(this,e)}}deleteLine(e){this.isCollapsed()&&this.modify("extend",e,"lineboundary"),this.isCollapsed()?this.deleteCharacter(e):this.removeText()}deleteWord(e){if(this.isCollapsed()){let t=this.anchor,n=t.getNode();if(this.forwardDeletion(t,n,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function nd(e){return e instanceof ns}function nc(e){let t=e.offset;if("text"===e.type)return t;let n=e.getNode();return t===n.getChildrenSize()?n.getTextContent().length:0}function nf(e){let t=e.getStartEndPoints();if(null===t)return[0,0];let[n,i]=t;return"element"===n.type&&"element"===i.type&&n.key===i.key&&n.offset===i.offset?[0,0]:[nc(n),nc(i)]}function nh(e,t){for(let n=t;n;n=n.getParent()){if(n9(n)){if(n.collapseAtStart(e))return!0;if(rf(n))break}if(n.getPreviousSibling())break}return!1}let ng=(()=>{try{let e=RegExp("\\p{Emoji}","u"),t=e.test.bind(e);if(t("❤️")&&t("#️⃣")&&t("👍"))return t}catch(e){}return()=>!1})();function n_(e,t,n){let i=e.getTextContent().split(/(?=\s)/g),r=i.length,l=0,o=0;for(let e=0;e<r;e++){let s=e===r-1;if(o=l,l+=i[e].length,t&&l===n||l>n||s){i.splice(e,1),s&&(o=void 0);break}}let s=i.join("").trim();""===s?e.remove():(e.setTextContent(s),e.select(o,o))}function np(e,n,i,r){let l,o=n;if(rC(e)){let s=!1,a=e.childNodes,u=a.length,d=r._blockCursorElement;o===u&&(s=!0,o=u-1);let c=a[o],f=!1;if(c===d)c=a[o+1],f=!0;else if(null!==d){let t=d.parentNode;e===t&&n>Array.prototype.indexOf.call(t.children,d)&&o--}if(t8(l=iG(c)))o=rZ(l,s?"next":"previous");else{let a=iG(e);if(null===a)return null;if(n9(a)){let u,d=r.getElementByKey(a.getKey());null===d&&t(214);let c=a.getDOMSlot(d);[a,o]=c.resolveChildIndex(a,d,e,n),n9(a)||t(215),s&&o>=a.getChildrenSize()&&(o=Math.max(0,a.getChildrenSize()-1));let h=a.getChildAtIndex(o);if(n9(h)&&(u=h.getParent(),null===i||null===u||!u.canBeEmpty()||u!==i.getNode())){let e=s?h.getLastDescendant():h.getFirstDescendant();a=null===e||n9(h=e)?h:h.getParentOrThrow(),o=0}t8(h)?(l=h,a=null,o=rZ(h,s?"next":"previous")):h!==a&&s&&!f&&(n9(a)||t(216),o=Math.min(a.getChildrenSize(),o+1))}else{let t=a.getIndexWithinParent();o=0===n&&ie(a)&&iG(e)===a?t:t+1,a=a.getParentOrThrow()}if(n9(a))return nr(a.__key,o,"element")}}else l=iG(e);return t8(l)?nr(l.__key,rZ(l,o,"clamp"),"text"):null}function nm(e,t,n){let i=e.offset,r=e.getNode();if(0===i){let i=r.getPreviousSibling(),l=r.getParent();if(t){if((n||!t)&&null===i&&n9(l)&&l.isInline()){let t=l.getPreviousSibling();t8(t)&&e.set(t.__key,t.getTextContent().length,"text")}}else n9(i)&&!n&&i.isInline()?e.set(i.__key,i.getChildrenSize(),"element"):t8(i)&&e.set(i.__key,i.getTextContent().length,"text")}else if(i===r.getTextContent().length){let i=r.getNextSibling(),l=r.getParent();if(t&&n9(i)&&i.isInline())e.set(i.__key,0,"element");else if((n||t)&&null===i&&n9(l)&&l.isInline()&&!l.canInsertTextAfter()){let t=l.getNextSibling();t8(t)&&e.set(t.__key,0,"text")}}}function ny(e,t,n){if("text"===e.type&&"text"===t.type){let i=e.isBefore(t),r=e.is(t);nm(e,i,r),nm(t,!i,r),r&&t.set(e.key,e.offset,e.type);let l=nU();if(l.isComposing()&&l._compositionKey!==e.key&&na(n)){let i=n.anchor,r=n.focus;e.set(i.key,i.offset,i.type,!0),t.set(r.key,r.offset,r.type,!0)}}}function nx(e,t,n,i,r,l){if(null===e||null===n||!iN(r,e,n))return null;let o=np(e,t,na(l)?l.anchor:null,r);if(null===o)return null;let s=np(n,i,na(l)?l.focus:null,r);if(null===s)return null;if("element"===o.type&&"element"===s.type){let t=iG(e),i=iG(n);if(ie(t)&&ie(i))return null}return ny(o,s,l),[o,s]}function nC(e){return n9(e)&&!e.isInline()}function nS(e,t,n,i,r,l){let o=nY(),s=new nu(nr(e,t,r),nr(n,i,l),0,"");return s.dirty=!0,o._selection=s,s}function nv(){return new nu(nr("root",0,"element"),nr("root",0,"element"),0,"")}function nN(){return new ns(new Set)}function nT(e,t,n,i){let r,l,o,s,a=n._window;if(null===a)return null;let u=i||a.event,d=u?u.type:void 0,c="selectionchange"===d,f=!M&&(c||"beforeinput"===d||"compositionstart"===d||"compositionend"===d||"click"===d&&u&&3===u.detail||"drop"===d||void 0===d);if(na(e)&&!f)return e.clone();if(null===t)return null;if(r=t.anchorNode,l=t.focusNode,o=t.anchorOffset,s=t.focusOffset,(c||void 0===d)&&na(e)&&!iN(n,r,l))return e.clone();let h=nx(r,o,l,s,n,e);if(null===h)return null;let[g,_]=h;return new nu(g,_,na(e)?e.format:0,na(e)?e.style:"")}function nE(){return nY()._selection}function nb(){return nU()._editorState._selection}function nO(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=e.anchor,l=e.focus,o=r.getNode(),s=l.getNode();if(!t.is(o)&&!t.is(s))return;let a=t.__key;if(e.isCollapsed()){let t=r.offset;if(n<=t&&i>0||n<t&&i<0){let n=Math.max(0,t+i);r.set(a,n,"element"),l.set(a,n,"element"),nM(e)}}else{let o=e.isBackward(),s=o?l:r,u=s.getNode(),d=o?r:l,c=d.getNode();if(t.is(u)){let e=s.offset;(n<=e&&i>0||n<e&&i<0)&&s.set(a,Math.max(0,e+i),"element")}if(t.is(c)){let e=d.offset;(n<=e&&i>0||n<e&&i<0)&&d.set(a,Math.max(0,e+i),"element")}}nM(e)}function nM(e){let t=e.anchor,n=t.offset,i=e.focus,r=i.offset,l=t.getNode(),o=i.getNode();if(e.isCollapsed()){if(!n9(l))return;let e=l.getChildrenSize(),r=n>=e,o=r?l.getChildAtIndex(e-1):l.getChildAtIndex(n);if(t8(o)){let e=0;r&&(e=o.getTextContentSize()),t.set(o.__key,e,"text"),i.set(o.__key,e,"text")}return}if(n9(l)){let e=l.getChildrenSize(),i=n>=e,r=i?l.getChildAtIndex(e-1):l.getChildAtIndex(n);if(t8(r)){let e=0;i&&(e=r.getTextContentSize()),t.set(r.__key,e,"text")}}if(n9(o)){let e=o.getChildrenSize(),t=r>=e,n=t?o.getChildAtIndex(e-1):o.getChildAtIndex(r);if(t8(n)){let e=0;t&&(e=n.getTextContentSize()),i.set(n.__key,e,"text")}}}function nk(e,t,n,i,r){let l=null,o=0,s=null;null!==i?(l=i.__key,t8(i)?(o=i.getTextContentSize(),s="text"):n9(i)&&(o=i.getChildrenSize(),s="element")):null!==r&&(l=r.__key,t8(r)?s="text":n9(r)&&(s="element")),null!==l&&null!==s?e.set(l,o,s):(-1===(o=t.getIndexWithinParent())&&(o=n.getChildrenSize()),e.set(n.__key,o,"element"))}function nw(e,t,n,i,r){"text"===e.type?e.set(n,e.offset+(t?0:r),"text"):e.offset>i.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function nA(e,t,n,i,r){try{e.setBaseAndExtent(t,n,i,r)}catch(e){}}function nD(e){let t=nE()||nb();null===t&&(t=iJ().selectEnd()),t.insertNodes(e)}function nR(e){let n=e;e.isCollapsed()||n.removeText();let i=nE();na(i)&&(n=i),na(n)||t(161);let r=n.anchor,l=r.getNode(),o=r.offset;for(;!rE(l);){let e=l;if([l,o]=function(e,t){let n=e.getParent();if(!n){let e=ic();return iJ().append(e),e.select(),[iJ(),0]}if(t8(e)){let i=e.splitText(t);if(0===i.length)return[n,e.getIndexWithinParent()];let r=+(0!==t);return[n,i[0].getIndexWithinParent()+r]}if(!n9(e)||0===t)return[n,e.getIndexWithinParent()];let i=e.getChildAtIndex(t);if(i){let n=new nu(nr(e.__key,t,"element"),nr(e.__key,t,"element"),0,""),r=e.insertNewAfter(n);r&&r.append(i,...i.getNextSiblings())}return[n,e.getIndexWithinParent()+1]}(l,o),e.is(l))break}return o}function nP(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"decorators-and-blocks";if("move"===t&&"character"===i&&!e.isCollapsed()){let[t,i]=n===e.isBackward()?[e.focus,e.anchor]:[e.anchor,e.focus];return i.set(t.key,t.offset,t.type),!0}let l=ln(e.focus,n?"previous":"next"),o="lineboundary"===i,s="move"===t,a=l,u="decorators-and-blocks"===r;if(!lc(a)){for(let e of a){u=!1;let{origin:t}=e;if(!ie(t)||t.isIsolated()||(a=e,!o||!t.isInline()))break}if(u)for(let e of r6(l).iterNodeCarets("extend"===t?"shadowRoot":"root")){if(rJ(e))e.origin.isInline()||(a=e);else{if(n9(e.origin))continue;ie(e.origin)&&!e.origin.isInline()&&(a=e)}break}}if(a===l)return!1;if(s&&!o&&ie(a.origin)&&a.origin.isKeyboardSelectable()){let e=nN();return e.add(a.origin.getKey()),iV(e),!0}return a=ld(a),s&&li(e.anchor,a),li(e.focus,a),u||!o}let nI=null,nL=null,nF=!1,n$=!1,nK=0,nB={characterData:!0,childList:!0,subtree:!0};function nz(){return nF||null!==nI&&nI._readOnly}function nW(){nF&&t(13)}function nj(){nK>99&&t(14)}function nY(){return null===nI&&t(195,nJ()),nI}function nU(){return null===nL&&t(196,nJ()),nL}function nJ(){let e=0,t=new Set,n=ip.version;if("u">typeof window)for(let i of document.querySelectorAll("[contenteditable]")){let r=ib(i);if(iT(r))e++;else if(r){let e=String(r.constructor.version||"<0.17.1");e===n&&(e+=" (separately built, likely a bundler configuration issue)"),t.add(e)}}let i=` Detected on the page: ${e} compatible editor(s) with version ${n}`;return t.size&&(i+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),i}function nH(e,t,n){let i=t.__type,r=ix(e,i),l=n.get(i);void 0===l&&(l=Array.from(r.transforms),n.set(i,l));let o=l.length;for(let e=0;e<o&&(l[e](t),t.isAttached());e++);}function nV(e,t){return void 0!==e&&e.__key!==t&&e.isAttached()}function nG(e,t){if(!t)return;let n=e._updateTags,i=t;for(let e of(Array.isArray(t)||(i=[t]),i))n.add(e)}function nq(e){return nX(e,nU()._nodes)}function nX(e,n){let i=e.type,r=n.get(i);void 0===r&&t(17,i);let l=r.klass;e.type!==l.getType()&&t(18,l.name);let o=l.importJSON(e),s=e.children;if(n9(o)&&Array.isArray(s))for(let e=0;e<s.length;e++){let t=nX(s[e],n);o.append(t)}return o}function nZ(e,t,n){let i=nI,r=nF,l=nL;nI=t,nF=!0,nL=e;try{return n()}finally{nI=i,nF=r,nL=l}}function nQ(e,n){let i,r,l=e._pendingEditorState,o=e._rootElement,s=e._headless||null===o;if(null===l)return;let a=e._editorState,u=a._selection,d=l._selection,c=0!==e._dirtyType,f=nI,h=nF,_=nL,p=e._updating,m=e._observer,y=null;if(e._pendingEditorState=null,e._editorState=l,!s&&c&&null!==m){nL=e,nI=l,nF=!1,e._updating=!0;try{let n,i=e._dirtyType,r=e._dirtyElements,o=e._dirtyLeaves;m.disconnect(),el="",ea="",eu=2===i,q=e,G=e._config,X=e._nodes,Z=q._listeners.mutation,Q=r,ee=o,et=a._nodeMap,en=l._nodeMap,ed=l._readOnly,ei=new Map(e._keyToDOMMap),er=n=new Map,function e(n,i){let r=et.get(n),l=en.get(n);void 0!==r&&void 0!==l||t(61);let o=eu||ee.has(n)||Q.has(n),s=ro(q,n);if(r===l&&!o){if(n9(r)){let e=s.__lexicalTextContent;void 0!==e&&(el+=e,ea+=e)}else{let e=r.getTextContent();ea+=e,el+=e}return s}if(r!==l&&o&&re(er,X,Z,l,"updated"),l.updateDOM(r,s,G)){let e=em(n,null);return null===i&&t(62),i.replaceChild(e,s),ec(n,null),e}if(n9(r)&&n9(l)){let n=l.__indent;(eu||n!==r.__indent)&&eg(s,n);let i=l.__format;if((eu||i!==r.__format)&&e_(s,i),o&&(function(n,i,r){eo=null,es="",function(n,i,r){let l=el,o=n.__size,s=i.__size;el="";let a=r.element;if(1===o&&1===s){let t=n.__first,r=i.__first;if(t===r)e(t,a);else{let e=eT(t),n=em(r,null);try{a.replaceChild(n,e)}catch(i){if("object"==typeof i&&null!=i)throw Error(`${i.toString()} Parent: ${a.tagName}, new child: {tag: ${n.tagName} key: ${r}}, old child: {tag: ${e.tagName}, key: ${t}}.`);throw i}ec(t,null)}let l=en.get(r);t8(l)&&(null===eo&&(eo=l.getFormat()),""===es&&(es=l.getStyle()))}else{let l=eS(n,et),u=eS(i,en);if(l.length!==o&&t(227),u.length!==s&&t(228),0===o)0!==s&&ey(u,i,0,s-1,r);else if(0===s){if(0!==o){let e=null==r.after&&null==r.before&&null==r.element.__lexicalLineBreak;ef(l,0,o-1,e?null:a),e&&(a.textContent="")}}else!function(t,n,i,r,l,o){let s=r-1,a=l-1,u,d,c=o.getFirstChild(),f=0,h=0;for(;f<=s&&h<=a;){let t=n[f],r=i[h];if(t===r)c=eN(e(r,o.element)),f++,h++;else{void 0===u&&(u=new Set(n)),void 0===d&&(d=new Set(i));let l=d.has(t),s=u.has(r);if(l)if(s){let t=ro(q,r);t===c?c=eN(e(r,o.element)):(o.withBefore(c).insertChild(t),e(r,o.element)),f++,h++}else em(r,o.withBefore(c)),h++;else c=eN(eT(t)),ec(t,o.element),f++}let l=en.get(r);null!==l&&t8(l)&&(null===eo&&(eo=l.getFormat()),""===es&&(es=l.getStyle()))}let g=f>s,_=h>a;if(g&&!_){let e=i[a+1],n=void 0===e?null:q.getElementByKey(e);ey(i,t,h,a,o.withBefore(n))}else _&&!g&&ef(n,f,s,o.element)}(i,l,u,o,s,r)}rl(i)&&(el+="\n\n"),a.__lexicalTextContent=el,el=l+el}(n,i,i.getDOMSlot(r)),null==eo||eo===i.__textFormat||ed||i.setTextFormat(eo),""===es||es===i.__textStyle||ed||i.setTextStyle(es)}(r,l,s),ii(l)||l.isInline()||eC(r,l,s)),rl(l)&&(el+="\n\n",ea+="\n\n"),(eu||l.__dir!==r.__dir)&&(ep(s,l),ii(l)&&!eu))for(let e of l.getChildren())n9(e)&&ep(ro(q,e.getKey()),e)}else{let e=l.getTextContent();if(ie(l)){let e=l.decorate(q,G);null!==e&&ev(n,e)}el+=e,ea+=e}if(!ed&&ii(l)&&l.__cachedText!==ea){let e=l.getWritable();e.__cachedText=ea,l=e}return s}("root",null),q=void 0,X=void 0,Q=void 0,ee=void 0,et=void 0,en=void 0,G=void 0,ei=void 0,er=void 0,y=n}catch(t){if(t instanceof Error&&e._onError(t),n$)throw t;return ig(e,null,o,l),P(e),e._dirtyType=2,n$=!0,nQ(e,a),void(n$=!1)}finally{m.observe(o,nB),e._updating=p,nI=f,nF=h,nL=_}}l._readOnly||(l._readOnly=!0);let x=e._dirtyLeaves,C=e._dirtyElements,S=e._normalizedNodes,v=e._updateTags,N=e._deferred;c&&(e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),function(e,t){let n,i=e._decorators,r=e._pendingDecorators||i,l=t._nodeMap;for(n in r)l.has(n)||(r===i&&(r=iY(e)),delete r[n])}(e,l);let T=s?null:ry(rc(e));if(e._editable&&null!==T&&(c||null===d||d.dirty||!d.is(u))&&null!==o&&!v.has("skip-dom-selection")){nL=e,nI=l;try{if(null!==m&&m.disconnect(),c||null===d||d.dirty){let t=e._blockCursorElement;null!==t&&rm(t,e,o),function(e,t,n,i,r,l,o){let s=i.anchorNode,a=i.focusNode,u=i.anchorOffset,d=i.focusOffset,c=document.activeElement;if(r.has("collaboration")&&c!==l||null!==c&&iv(c))return;if(!na(t))return null!==e&&iN(n,s,a)&&i.removeAllRanges();let f=t.anchor,h=t.focus,g=f.key,_=h.key,p=ro(n,g),m=ro(n,_),y=f.offset,x=h.offset,C=t.format,S=t.style,v=t.isCollapsed(),N=p,T=m,E=!1;if("text"===f.type){N=iD(p);let e=f.getNode();E=e.getFormat()!==C||e.getStyle()!==S}else na(e)&&"text"===e.anchor.type&&(E=!0);if("text"===h.type&&(T=iD(m)),null!==N&&null!==T&&(v&&(null===e||E||na(e)&&(e.format!==C||e.style!==S))&&(tv=[C,S,y,g,performance.now()]),u!==y||d!==x||s!==N||a!==T||"Range"===i.type&&v||(null!==c&&l.contains(c)||r.has("skip-selection-focus")||l.focus({preventScroll:!0}),"element"===f.type))){if(nA(i,N,y,T,x),!r.has("skip-scroll-into-view")&&t.isCollapsed()&&null!==l&&l===document.activeElement){let e=na(t)&&"element"===t.anchor.type?N.childNodes[y]||null:i.rangeCount>0?i.getRangeAt(0):null;if(null!==e){let t;if(e instanceof Text){let n=document.createRange();n.selectNode(e),t=n.getBoundingClientRect()}else t=e.getBoundingClientRect();!function(e,t,n){let i=ra(n),r=rd(i);if(null===i||null===r)return;let{top:l,bottom:o}=t,s=0,a=0,u=n;for(;null!==u;){let t=u===i.body;if(t)s=0,a=rc(e).innerHeight;else{let e=u.getBoundingClientRect();s=e.top,a=e.bottom}let n=0;if(l<s?n=-(s-l):o>a&&(n=o-a),0!==n)if(t)r.scrollBy(0,n);else{let e=u.scrollTop;u.scrollTop+=n;let t=u.scrollTop-e;l-=t,o-=t}if(t)break;u=rs(u)}}(n,t,l)}}t_=!0}}(u,d,e,T,v,o)}!function(e,t,n){let i=e._blockCursorElement;if(na(n)&&n.isCollapsed()&&"element"===n.anchor.type&&t.contains(document.activeElement)){let r=n.anchor,l=r.getNode(),o=r.offset,s=!1,a=null;if(o===l.getChildrenSize())rp(l.getChildAtIndex(o-1))&&(s=!0);else{let t=l.getChildAtIndex(o);if(null!==t&&rp(t)){let n=t.getPreviousSibling();(null===n||rp(n))&&(s=!0,a=e.getElementByKey(t.__key))}}if(s){let n,r,o,s=e.getElementByKey(l.__key);return null===i&&(n=e._config.theme,(r=document.createElement("div")).contentEditable="false",r.setAttribute("data-lexical-cursor","true"),o=n.blockCursor,void 0!==o&&("string"==typeof o&&(o=n.blockCursor=g(o)),void 0!==o&&r.classList.add(...o)),e._blockCursorElement=i=r),t.style.caretColor="transparent",null===a?s.appendChild(i):s.insertBefore(i,a)}}null!==i&&rm(i,e,t)}(e,o,d)}finally{null!==m&&m.observe(o,nB),nL=_,nI=f}}null!==y&&function(e,t,n,i,r){let l=Array.from(e._listeners.mutation),o=l.length;for(let e=0;e<o;e++){let[o,s]=l[e];for(let e of s){let l=t.get(e);void 0!==l&&o(l,{dirtyLeaves:i,prevEditorState:r,updateTags:n})}}}(e,y,v,x,a),na(d)||null===d||null!==u&&u.is(d)||e.dispatchCommand(eb,void 0);let E=e._pendingDecorators;null!==E&&(e._decorators=E,e._pendingDecorators=null,n0("decorator",e,!0,E)),i=iU(n||a),i!==(r=iU(l))&&n0("textcontent",e,!0,r),n0("update",e,!0,{dirtyElements:C,dirtyLeaves:x,editorState:l,mutatedNodes:y,normalizedNodes:S,prevEditorState:n||a,tags:v}),function(e,t){if(e._deferred=[],0!==t.length){let n=e._updating;e._updating=!0;try{for(let e=0;e<t.length;e++)t[e]()}finally{e._updating=n}}}(e,N),function(e){let t=e._updates;if(0!==t.length){let n=t.shift();if(n){let[t,i]=n;n2(e,t,i)}}}(e)}function n0(e,t,n){for(var i=arguments.length,r=Array(i>3?i-3:0),l=3;l<i;l++)r[l-3]=arguments[l];let o=t._updating;t._updating=n;try{let n=Array.from(t._listeners[e]);for(let e=0;e<n.length;e++)n[e].apply(null,r)}finally{t._updating=o}}function n1(e,n){let i=e._updates,r=n||!1;for(;0!==i.length;){let n=i.shift();if(n){let i,[l,o]=n,s=e._pendingEditorState;void 0!==o&&(i=o.onUpdate,o.skipTransforms&&(r=!0),o.discrete&&(null===s&&t(191),s._flushSync=!0),i&&e._deferred.push(i),nG(e,o.tag)),null==s?n2(e,l,o):l()}}return r}function n2(e,n,i){let r=e._updateTags,l,o=!1,s=!1;void 0!==i&&(l=i.onUpdate,nG(e,i.tag),o=i.skipTransforms||!1,s=i.discrete||!1),l&&e._deferred.push(l);let a=e._editorState,u=e._pendingEditorState,d=!1;(null===u||u._readOnly)&&(u=e._pendingEditorState=ir(u||a),d=!0),u._flushSync=s;let c=nI,f=nF,h=nL,g=e._updating;nI=u,nF=!1,e._updating=!0,nL=e;let _=e._headless||null===e.getRootElement();im=null;try{var p;let r,l;d&&(_?null!==a._selection&&(u._selection=a._selection.clone()):u._selection=(p=i&&i.event||null,r=e.getEditorState()._selection,l=ry(rc(e)),na(r)||null==r?nT(r,l,e,p):r.clone()));let s=e._compositionKey;n(),o=n1(e,o),function(e,t){let n=t.getEditorState()._selection,i=e._selection;if(na(i)){let e,t=i.anchor,r=i.focus;if("text"===t.type&&(e=t.getNode()).selectionTransform(n,i),"text"===r.type){let t=r.getNode();e!==t&&t.selectionTransform(n,i)}}}(u,e),0!==e._dirtyType&&(o?function(e,t){let n=t._dirtyLeaves,i=e._nodeMap;for(let e of n){let t=i.get(e);t8(t)&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&J(t)}}(u,e):function(e,t){let n=t._dirtyLeaves,i=t._dirtyElements,r=e._nodeMap,l=iK(),o=new Map,s=n,a=s.size,u=i,d=u.size;for(;a>0||d>0;){if(a>0){for(let e of(t._dirtyLeaves=new Set,s)){let i=r.get(e);t8(i)&&i.isAttached()&&i.isSimpleText()&&!i.isUnmergeable()&&J(i),void 0!==i&&nV(i,l)&&nH(t,i,o),n.add(e)}if((a=(s=t._dirtyLeaves).size)>0){nK++;continue}}for(let e of(t._dirtyLeaves=new Set,t._dirtyElements=new Map,u.delete("root")&&u.set("root",!0),u)){let n=e[0],s=e[1];if(i.set(n,s),!s)continue;let a=r.get(n);void 0!==a&&nV(a,l)&&nH(t,a,o)}a=(s=t._dirtyLeaves).size,d=(u=t._dirtyElements).size,nK++}t._dirtyLeaves=n,t._dirtyElements=i}(u,e),n1(e),function(e,t,n,i){let r=e._nodeMap,l=t._nodeMap,o=[];for(let[e]of i){let t=l.get(e);void 0!==t&&(t.isAttached()||(n9(t)&&function e(t,n,i,r,l,o){let s=t.getFirstChild();for(;null!==s;){let t=s.__key;s.__parent===n&&(n9(s)&&e(s,t,i,r,l,o),i.has(t)||o.delete(t),l.push(t)),s=s.getNextSibling()}}(t,e,r,l,o,i),r.has(e)||i.delete(e),o.push(e)))}for(let e of o)l.delete(e);for(let e of n){let t=l.get(e);void 0===t||t.isAttached()||(r.has(e)||n.delete(e),l.delete(e))}}(a,u,e._dirtyLeaves,e._dirtyElements)),s!==e._compositionKey&&(u._flushSync=!0);let c=u._selection;if(na(c)){let e=u._nodeMap,n=c.anchor.key,i=c.focus.key;void 0!==e.get(n)&&void 0!==e.get(i)||t(19)}else nd(c)&&0===c._nodes.size&&(u._selection=null)}catch(t){return t instanceof Error&&e._onError(t),e._pendingEditorState=a,e._dirtyType=2,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void nQ(e)}finally{nI=c,nF=f,nL=h,e._updating=g,nK=0}0!==e._dirtyType||e._deferred.length>0||function(e,t){let n=t.getEditorState()._selection,i=e._selection;if(null!==i){if(i.dirty||!i.is(n))return!0}else if(null!==n)return!0;return!1}(u,e)?u._flushSync?(u._flushSync=!1,nQ(e)):d&&iS(()=>{nQ(e)}):(u._flushSync=!1,d&&(r.clear(),e._deferred=[],e._pendingEditorState=null))}function n3(e,t,n){nL===e&&void 0===n?t():n2(e,t,n)}class n6{element;before;after;constructor(e,t,n){this.element=e,this.before=t||null,this.after=n||null}withBefore(e){return new n6(this.element,e,this.after)}withAfter(e){return new n6(this.element,this.before,e)}withElement(e){return this.element===e?this:new n6(e,this.before,this.after)}insertChild(e){let n=this.before||this.getManagedLineBreak();return null!==n&&n.parentElement!==this.element&&t(222),this.element.insertBefore(e,n),this}removeChild(e){return e.parentElement!==this.element&&t(223),this.element.removeChild(e),this}replaceChild(e,n){return n.parentElement!==this.element&&t(224),this.element.replaceChild(e,n),this}getFirstChild(){let e=this.after?this.after.nextSibling:this.element.firstChild;return e===this.before||e===this.getManagedLineBreak()?null:e}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(e){null===e?this.removeManagedLineBreak():this.insertManagedLineBreak("decorator"===e&&(h||u||a))}removeManagedLineBreak(){let e=this.getManagedLineBreak();if(e){let t=this.element,n="IMG"===e.nodeName?e.nextSibling:null;n&&t.removeChild(n),t.removeChild(e),t.__lexicalLineBreak=void 0}}insertManagedLineBreak(e){let t=this.getManagedLineBreak();if(t){if(e===("IMG"===t.nodeName))return;this.removeManagedLineBreak()}let n=this.element,i=this.before,r=document.createElement("br");if(n.insertBefore(r,i),e){let e=document.createElement("img");e.setAttribute("data-lexical-linebreak","true"),e.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",e.alt="",n.insertBefore(e,r),n.__lexicalLineBreak=e}else n.__lexicalLineBreak=r}getFirstChildOffset(){let e=0;for(let t=this.after;null!==t;t=t.previousSibling)e++;return e}resolveChildIndex(e,t,n,i){if(n===this.element){let t=this.getFirstChildOffset();return[e,Math.min(t+e.getChildrenSize(),Math.max(t,i))]}let r=n4(t,n);r.push(i);let l=n4(t,this.element),o=e.getIndexWithinParent();for(let e=0;e<l.length;e++){let t=r[e],n=l[e];if(void 0===t||t<n)break;if(t>n){o+=1;break}}return[e.getParentOrThrow(),o]}}function n4(e,n){let i=[],r=n;for(;r!==e&&null!==r;r=r.parentNode){let e=0;for(let t=r.previousSibling;null!==t;t=t.previousSibling)e++;i.push(e)}return r!==e&&t(225),i.reverse()}class n5 extends tB{__first;__last;__size;__format;__style;__indent;__dir;__textFormat;__textStyle;constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(e){super.afterCloneFrom(e),this.__key===e.__key&&(this.__first=e.__first,this.__last=e.__last,this.__size=e.__size),this.__indent=e.__indent,this.__format=e.__format,this.__style=e.__style,this.__dir=e.__dir,this.__textFormat=e.__textFormat,this.__textStyle=e.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){return T[this.getFormat()]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){let e=nU()._dirtyElements;return null!==e&&e.has(this.__key)}isLastChild(){let e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return null!==t&&t.is(e)}getAllTextNodes(){let e=[],t=this.getFirstChild();for(;null!==t;){if(t8(t)&&e.push(t),n9(t)){let n=t.getAllTextNodes();e.push(...n)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;n9(e);){let t=e.getFirstChild();if(null===t)break;e=t}return e}getLastDescendant(){let e=this.getLastChild();for(;n9(e);){let t=e.getLastChild();if(null===t)break;e=t}return e}getDescendantByIndex(e){let t=this.getChildren(),n=t.length;if(e>=n){let e=t[n-1];return n9(e)&&e.getLastDescendant()||e||null}let i=t[e];return n9(i)&&i.getFirstDescendant()||i||null}getFirstChild(){let e=this.getLatest().__first;return null===e?null:iB(e)}getFirstChildOrThrow(){let e=this.getFirstChild();return null===e&&t(45,this.__key),e}getLastChild(){let e=this.getLatest().__last;return null===e?null:iB(e)}getLastChildOrThrow(){let e=this.getLastChild();return null===e&&t(96,this.__key),e}getChildAtIndex(e){let t,n,i=this.getChildrenSize();if(e<i/2){for(t=this.getFirstChild(),n=0;null!==t&&n<=e;){if(n===e)return t;t=t.getNextSibling(),n++}return null}for(t=this.getLastChild(),n=i-1;null!==t&&n>=e;){if(n===e)return t;t=t.getPreviousSibling(),n--}return null}getTextContent(){let e="",t=this.getChildren(),n=t.length;for(let i=0;i<n;i++){let r=t[i];e+=r.getTextContent(),n9(r)&&i!==n-1&&!r.isInline()&&(e+="\n\n")}return e}getTextContentSize(){let e=0,t=this.getChildren(),n=t.length;for(let i=0;i<n;i++){let r=t[i];e+=r.getTextContentSize(),n9(r)&&i!==n-1&&!r.isInline()&&(e+=2)}return e}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(e){if(""!==e){let t=N[e];return 0!=(this.getFormat()&t)}return!1}hasTextFormat(e){let t=S[e];return 0!=(this.getTextFormat()&t)}getFormatFlags(e,t){return iR(this.getLatest().__textFormat,e,t)}getTextStyle(){return this.getLatest().__textStyle}select(e,t){nW();let n=nE(),i=e,r=t,l=this.getChildrenSize();if(!this.canBeEmpty()){if(0===e&&0===t){let e=this.getFirstChild();if(t8(e)||n9(e))return e.select(0,0)}else if((void 0===e||e===l)&&(void 0===t||t===l)){let e=this.getLastChild();if(t8(e)||n9(e))return e.select()}}void 0===i&&(i=l),void 0===r&&(r=l);let o=this.__key;return na(n)?(n.anchor.set(o,i,"element"),n.focus.set(o,r,"element"),n.dirty=!0,n):nS(o,i,o,r,"element","element")}selectStart(){let e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){let e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){let e=this.getWritable();return this.getChildren().forEach(e=>e.remove()),e}append(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.splice(this.getChildrenSize(),0,t)}setDirection(e){let t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=""!==e?N[e]:0,this}setStyle(e){return this.getWritable().__style=e||"",this}setTextFormat(e){let t=this.getWritable();return t.__textFormat=e,t}setTextStyle(e){let t=this.getWritable();return t.__textStyle=e,t}setIndent(e){return this.getWritable().__indent=e,this}splice(e,n,i){tK(this)&&t(324,this.__key,this.__type);let r=this.getChildrenSize(),l=this.getWritable();e+n<=r||t(226,String(e),String(n),String(r));let o=l.__key,s=[],a=[],u=this.getChildAtIndex(e+n),d=null,c=r-n+i.length;if(0!==e)if(e===r)d=this.getLastChild();else{let t=this.getChildAtIndex(e);null!==t&&(d=t.getPreviousSibling())}if(n>0){let e=null===d?this.getFirstChild():d.getNextSibling();for(let i=0;i<n;i++){null===e&&t(100);let n=e.getNextSibling(),i=e.__key;iL(e.getWritable()),a.push(i),e=n}}let f=d;for(let e of i){null!==f&&e.is(f)&&(d=f=f.getPreviousSibling());let n=e.getWritable();n.__parent===o&&c--,iL(n);let i=e.__key;if(null===f)l.__first=i,n.__prev=null;else{let e=f.getWritable();e.__next=i,n.__prev=e.__key}e.__key===o&&t(76),n.__parent=o,s.push(i),f=e}if(e+n===r)null!==f&&(f.getWritable().__next=null,l.__last=f.__key);else if(null!==u){let e=u.getWritable();if(null!==f){let t=f.getWritable();e.__prev=f.__key,t.__next=u.__key}else e.__prev=null}if(l.__size=c,a.length){let e=nE();if(na(e)){let t=new Set(a),n=new Set(s),{anchor:i,focus:r}=e;n8(i,t,n)&&nk(i,i.getNode(),this,d,u),n8(r,t,n)&&nk(r,r.getNode(),this,d,u),0!==c||this.canBeEmpty()||rf(this)||this.remove()}}return l}getDOMSlot(e){return new n6(e)}exportDOM(e){let{element:t}=super.exportDOM(e);if(rC(t)){let e=this.getIndent();e>0&&(t.style.paddingInlineStart=40*e+"px");let n=this.getDirection();n&&(t.dir=n)}return{element:t}}exportJSON(){let e={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},t=this.getTextFormat(),n=this.getTextStyle();return 0!==t&&(e.textFormat=t),""!==n&&(e.textStyle=n),e}updateFromJSON(e){return super.updateFromJSON(e).setFormat(e.format).setIndent(e.indent).setDirection(e.direction).setTextFormat(e.textFormat||0).setTextStyle(e.textStyle||"")}insertNewAfter(e,t){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,t,n){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(e,t){let n=this.getDOMSlot(e),i=n.getFirstChild();for(let e=this.getFirstChild();e;e=e.getNextSibling()){let r=t.getElementByKey(e.getKey());null!==r&&(null==i?(n.insertChild(r),i=r):i!==r&&n.replaceChild(r,i),i=i.nextSibling)}}}function n9(e){return e instanceof n5}function n8(e,t,n){let i=e.getNode();for(;i;){let e=i.__key;if(t.has(e)&&!n.has(e))return!0;i=i.getParent()}return!1}class n7 extends tB{decorate(e,t){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function ie(e){return e instanceof n7}class it extends n5{__cachedText;static getType(){return"root"}static clone(){return new it}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){t(51)}getTextContent(){let e=this.__cachedText;return(nz()||0===nU()._dirtyType)&&null!==e?e:super.getTextContent()}remove(){t(52)}replace(e){t(53)}insertBefore(e){t(54)}insertAfter(e){t(55)}updateDOM(e,t){return!1}splice(e,n,i){for(let e of i)n9(e)||ie(e)||t(282);return super.splice(e,n,i)}static importJSON(e){return iJ().updateFromJSON(e)}collapseAtStart(){return!0}}function ii(e){return e instanceof it}function ir(e){return new is(new Map(e._nodeMap))}function il(){return new is(new Map([["root",new it]]))}function io(e){return e instanceof is}class is{_nodeMap;_selection;_flushSync;_readOnly;constructor(e,t){this._nodeMap=e,this._selection=t||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(e,t){return nZ(t&&t.editor||null,this,e)}clone(e){let t=new is(this._nodeMap,void 0===e?this._selection:e);return t._readOnly=!0,t}toJSON(){return nZ(null,this,()=>({root:function e(n){let i=n.exportJSON(),r=n.constructor;if(i.type!==r.getType()&&t(130,r.name),n9(n)){let l=i.children;Array.isArray(l)||t(59,r.name);let o=n.getChildren();for(let t=0;t<o.length;t++){let n=e(o[t]);l.push(n)}}return i}(iJ())}))}}class ia extends n5{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}}class iu extends n5{static getType(){return"paragraph"}static clone(e){return new iu(e.__key)}createDOM(e){let t=document.createElement("p"),n=i7(e.theme,"paragraph");return void 0!==n&&t.classList.add(...n),t}updateDOM(e,t,n){return!1}static importDOM(){return{p:e=>({conversion:id,priority:0})}}exportDOM(e){let{element:t}=super.exportDOM(e);if(rC(t)){this.isEmpty()&&t.append(document.createElement("br"));let e=this.getFormatType();e&&(t.style.textAlign=e)}return{element:t}}static importJSON(e){return ic().updateFromJSON(e)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(e,t){let n=ic();n.setTextFormat(e.format),n.setTextStyle(e.style);let i=this.getDirection();return n.setDirection(i),n.setFormat(this.getFormatType()),n.setStyle(this.getStyle()),this.insertAfter(n,t),n}collapseAtStart(){let e=this.getChildren();if(0===e.length||t8(e[0])&&""===e[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function id(e){let t=ic();return e.style&&(t.setFormat(e.style.textAlign),rD(e,t)),{node:t}}function ic(){return rg(new iu)}function ih(e){return e instanceof iu}function ig(e,t,n,i){let r=e._keyToDOMMap;r.clear(),e._editorState=il(),e._pendingEditorState=i,e._compositionKey=null,e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;let l=e._observer;null!==l&&(l.disconnect(),e._observer=null),null!==t&&(t.textContent=""),null!==n&&(n.textContent="",r.set("root",n))}function i_(e){var t,n;let i,r,l,o,s=e||{},a=nL,u=s.theme||{},d=void 0===e?a:s.parentEditor||null,c=s.disableEvents||!1,f=il(),h=s.namespace||(null!==d?d._config.namespace:iZ()),g=s.editorState,_=[it,tQ,tW,ne,iu,ia,...s.nodes||[]],{onError:p,html:m}=s,y=void 0===s.editable||s.editable;if(void 0===e&&null!==a)i=a._nodes;else{i=new Map;for(let e=0;e<_.length;e++){let t=_[e],n=null,r=null;if("function"!=typeof t){let e=t;t=e.replace,n=e.with,r=e.withKlass||null}rP(t);let l=t.getType(),o=function(e){let t=new Set,n=new Set,i=e;for(;i;){let{ownNodeConfig:e}=rP(i),r=i.transform;if(!n.has(r)){n.add(r);let e=i.transform();e&&t.add(e)}if(e){let n=e.$transform;n&&t.add(n),i=e.extends}else{let e=Object.getPrototypeOf(i);i=e.prototype instanceof tB&&e!==tB?e:void 0}}return t}(t);i.set(l,{exportDOM:m&&m.export?m.export.get(t):void 0,klass:t,replace:n,replaceWithKlass:r,sharedNodeState:function(e){let t=new Map,n=new Set;for(let i="function"==typeof e?e:e.replace;i.prototype&&void 0!==i.prototype.getType;i=Object.getPrototypeOf(i)){let{ownNodeConfig:e}=rP(i);if(e&&e.stateConfigs)for(let i of e.stateConfigs){let e;"stateConfig"in i?(e=i.stateConfig,i.flat&&n.add(e.key)):e=i,t.set(e.key,e)}}return{flatKeys:n,sharedConfigMap:t}}(_[e]),transforms:o})}}let x=new ip(f,d,i,{disableEvents:c,namespace:h,theme:u},p||console.error,(t=i,n=m?m.import:void 0,r=new Map,l=new Set,o=e=>{Object.keys(e).forEach(t=>{let n=r.get(t);void 0===n&&(n=[],r.set(t,n)),n.push(e[t])})},t.forEach(e=>{let t=e.klass.importDOM;if(null==t||l.has(t))return;l.add(t);let n=t.call(e.klass);null!==n&&o(n)}),n&&o(n),r),y,e);return void 0!==g&&(x._pendingEditorState=g,x._dirtyType=2),x}class ip{static version;_headless;_parentEditor;_rootElement;_editorState;_pendingEditorState;_compositionKey;_deferred;_keyToDOMMap;_updates;_updating;_listeners;_commands;_nodes;_decorators;_pendingDecorators;_config;_dirtyType;_cloneNotNeeded;_dirtyLeaves;_dirtyElements;_normalizedNodes;_updateTags;_observer;_key;_onError;_htmlConversions;_window;_editable;_blockCursorElement;_createEditorArgs;constructor(e,t,n,i,r,l,o,s){this._createEditorArgs=s,this._parentEditor=t,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=i,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=iZ(),this._onError=r,this._htmlConversions=l,this._editable=o,this._headless=null!==t&&t._headless,this._window=null,this._blockCursorElement=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(e){let t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){let t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){let t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){let t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){let t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,n,i){void 0===i&&t(35);let r=this._commands;r.has(e)||r.set(e,[new Set,new Set,new Set,new Set,new Set]);let l=r.get(e);void 0===l&&t(36,String(e));let o=l[i];return o.add(n),()=>{o.delete(n),l.every(e=>0===e.size)&&r.delete(e)}}registerMutationListener(e,t,n){let i=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(e)).klass,r=this._listeners.mutation,l=r.get(t);void 0===l&&(l=new Set,r.set(t,l)),l.add(i);let o=n&&n.skipInitialization;return void 0!==o&&o||this.initializeMutationListener(t,i),()=>{l.delete(i),0===l.size&&r.delete(t)}}getRegisteredNode(e){let n=this._nodes.get(e.getType());return void 0===n&&t(37,e.name),n}resolveRegisteredNodeAfterReplacements(e){for(;e.replaceWithKlass;)e=this.getRegisteredNode(e.replaceWithKlass);return e}initializeMutationListener(e,t){let n=this._editorState,i=rk(n).get(t.getType());if(!i)return;let r=new Map;for(let e of i.keys())r.set(e,"created");r.size>0&&e(r,{dirtyLeaves:new Set,prevEditorState:n,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(e,t){let n=this.getRegisteredNode(e);return n.transforms.add(t),n}registerNodeTransform(e,t){let n=this.registerNodeTransformToKlass(e,t),i=[n],r=n.replaceWithKlass;if(null!=r){let e=this.registerNodeTransformToKlass(r,t);i.push(e)}return function(e,t){let n=rk(e.getEditorState()),i=[];for(let e of t){let t=n.get(e);t&&i.push(t)}0!==i.length&&e.update(()=>{for(let e of i)for(let t of e.keys()){let e=iB(t);e&&e.markDirty()}},null===e._pendingEditorState?{tag:tz}:void 0)}(this,i.map(e=>e.klass.getType())),()=>{i.forEach(e=>e.transforms.delete(t))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return rr(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){let n=this._rootElement;if(e!==n){let i=i7(this._config.theme,"root"),r=this._pendingEditorState||this._editorState;if(this._rootElement=e,ig(this,n,e,r),null!==n&&(this._config.disableEvents||function(e){let n=th.get(e);if(void 0===n)return tI();let i=tg.get(n);if(void 0===i)return tI();let r=i-1;r>=0||t(164),th.delete(e),tg.set(n,r),0===r&&n.removeEventListener("selectionchange",tD);let l=ib(e);iT(l)?(!function(e){if(null!==e._parentEditor){let t=iX(e),n=t[t.length-1]._key;tA.get(n)===e&&tA.delete(n)}else tA.delete(e._key)}(l),e.__lexicalEditor=null):l&&t(198);let o=tw(e);for(let e=0;e<o.length;e++)o[e]();e.__lexicalEventHandles=[]}(n),null!=i&&n.classList.remove(...i)),null!==e){let t=rd(e),n=e.style;n.userSelect="text",n.whiteSpace="pre-wrap",n.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=t,this._dirtyType=2,P(this),this._updateTags.add(tz),nQ(this),this._config.disableEvents||function(e,t){let n=e.ownerDocument;th.set(e,n);let i=tg.get(n)??0;i<1&&n.addEventListener("selectionchange",tD),tg.set(n,i+1),e.__lexicalEditor=t;let r=tw(e);for(let n=0;n<ta.length;n++){let[i,l]=ta[n],o="function"==typeof l?e=>{tP(e)||(tR(e),(t.isEditable()||"click"===i)&&l(e,t))}:e=>{if(tP(e))return;tR(e);let n=t.isEditable();switch(i){case"cut":return n&&rr(t,e8,e);case"copy":return rr(t,e9,e);case"paste":return n&&rr(t,eR,e);case"dragstart":return n&&rr(t,e6,e);case"dragover":return n&&rr(t,e4,e);case"dragend":return n&&rr(t,e5,e);case"focus":return n&&rr(t,tr,e);case"blur":return n&&rr(t,tl,e);case"drop":return n&&rr(t,e2,e)}};e.addEventListener(i,o),r.push(()=>{e.removeEventListener(i,o)})}}(e,this),null!=i&&e.classList.add(...i)}else this._window=null,this._updateTags.add(tz),nQ(this);n0("root",this,!1,e,n)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,n){e.isEmpty()&&t(38);let i=e;i._readOnly&&((i=ir(e))._selection=e._selection?e._selection.clone():null),R(this);let r=this._pendingEditorState,l=this._updateTags,o=void 0!==n?n.tag:null;null===r||r.isEmpty()||(null!=o&&l.add(o),nQ(this)),this._pendingEditorState=i,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=o&&l.add(o),this._updating||nQ(this)}parseEditorState(e,t){return function(e,t,n){let i=il(),r=nI,l=nF,o=nL,s=t._dirtyElements,a=t._dirtyLeaves,u=t._cloneNotNeeded,d=t._dirtyType;t._dirtyElements=new Map,t._dirtyLeaves=new Set,t._cloneNotNeeded=new Set,t._dirtyType=0,nI=i,nF=!1,nL=t,im=null;try{let r=t._nodes;nX(e.root,r),n&&n(),i._readOnly=!0}catch(e){e instanceof Error&&t._onError(e)}finally{t._dirtyElements=s,t._dirtyLeaves=a,t._cloneNotNeeded=u,t._dirtyType=d,nI=r,nF=l,nL=o}return i}("string"==typeof e?JSON.parse(e):e,this,t)}read(e){return nQ(this),this.getEditorState().read(e,{editor:this})}update(e,t){this._updating?this._updates.push([e,t]):n2(this,e,t)}focus(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._rootElement;null!==n&&(n.setAttribute("autocapitalize","off"),n3(this,()=>{var i,r;let l=nE(),o=iJ();null!==l?l.dirty||iV(l.clone()):0!==o.getChildrenSize()&&("rootStart"===t.defaultSelection?o.selectStart():o.selectEnd()),i="focus",nW(),nU()._updateTags.add(i),r=()=>{n.removeAttribute("autocapitalize"),e&&e()},nW(),nU()._deferred.push(r)}),null===this._pendingEditorState&&n.removeAttribute("autocapitalize"))}blur(){let e=this._rootElement;null!==e&&e.blur();let t=ry(this._window);null!==t&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,n0("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}ip.version="0.38.2+prod.esm";let im=null,iy=1;function ix(e,n){let i=iC(e,n);return void 0===i&&t(30,n),i}function iC(e,t){return e._nodes.get(t)}let iS="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)};function iv(e){let t=document.activeElement;if(!rC(t))return!1;let n=t.nodeName;return ie(ij(e))&&("INPUT"===n||"TEXTAREA"===n||"true"===t.contentEditable&&null==ib(t))}function iN(e,t,n){let i=e.getRootElement();try{return null!==i&&i.contains(t)&&i.contains(n)&&null!==t&&!iv(t)&&iE(t)===e}catch(e){return!1}}function iT(e){return e instanceof ip}function iE(e){let t=e;for(;null!=t;){let e=ib(t);if(iT(e))return e;t=rs(t)}return null}function ib(e){return e?e.__lexicalEditor:null}function iO(e){return x.test(e)?"rtl":C.test(e)?"ltr":null}function iM(e){return nn(e)||e.isToken()}function ik(e){return iM(e)||e.isSegmented()}function iw(e){return rS(e)&&3===e.nodeType}function iA(e){return rS(e)&&9===e.nodeType}function iD(e){let t=e;for(;null!=t;){if(iw(t))return t;t=t.firstChild}return null}function iR(e,t,n){let i=S[t];if(null!==n&&(e&i)==(n&i))return e;let r=e^i;return"subscript"===t?r&=~S.superscript:"superscript"===t?r&=~S.subscript:"lowercase"===t?(r&=~S.uppercase,r&=~S.capitalize):"uppercase"===t?(r&=~S.lowercase,r&=~S.capitalize):"capitalize"===t&&(r&=~S.lowercase,r&=~S.uppercase),r}function iP(e){return t8(e)||tU(e)||ie(e)}function iI(e,t){let n,i=(n=im,im=null,n);if(null!=(t=t||i&&i.__key))return void(e.__key=t);nW(),nj();let r=nU(),l=nY(),o=""+iy++;l._nodeMap.set(o,e),n9(e)?r._dirtyElements.set(o,!0):r._dirtyLeaves.add(o),r._cloneNotNeeded.add(o),r._dirtyType=1,e.__key=o}function iL(e){let t=e.getParent();if(null!==t){let n=e.getWritable(),i=t.getWritable(),r=e.getPreviousSibling(),l=e.getNextSibling(),o=null!==l?l.__key:null,s=null!==r?r.__key:null,a=null!==r?r.getWritable():null,u=null!==l?l.getWritable():null;null===r&&(i.__first=o),null===l&&(i.__last=s),null!==a&&(a.__next=o),null!==u&&(u.__prev=s),n.__prev=null,n.__next=null,n.__parent=null,i.__size--}}function iF(e){nj(),tK(e)&&t(323,e.__key,e.__type);let n=e.getLatest(),i=n.__parent,r=nY(),l=nU(),o=r._nodeMap,s=l._dirtyElements;null!==i&&function(e,t,n){let i=e;for(;null!==i;){if(n.has(i))return;let e=t.get(i);if(void 0===e)break;n.set(i,!1),i=e.__parent}}(i,o,s);let a=n.__key;l._dirtyType=1,n9(e)?s.set(a,!0):l._dirtyLeaves.add(a)}function i$(e){nW();let t=nU(),n=t._compositionKey;if(e!==n){if(t._compositionKey=e,null!==n){let e=iB(n);null!==e&&e.getWritable()}if(null!==e){let t=iB(e);null!==t&&t.getWritable()}}}function iK(){return nz()?null:nU()._compositionKey}function iB(e,t){let n=(t||nY())._nodeMap.get(e);return void 0===n?null:n}function iz(e,t){let n=iW(e,nU());return void 0!==n?iB(n,t):null}function iW(e,t){return e[`__lexicalKey_${t._key}`]}function ij(e,t){let n=e;for(;null!=n;){let e=iz(n,t);if(null!==e)return e;n=rs(n)}return null}function iY(e){let t=Object.assign({},e._decorators);return e._pendingDecorators=t,t}function iU(e){return e.read(()=>iJ().getTextContent())}function iJ(){return iH(nY())}function iH(e){return e._nodeMap.get("root")}function iV(e){nW();let t=nY();null!==e&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function iG(e){let t=nU(),n=function(e,t){let n=e;for(;null!=n;){let e=iW(n,t);if(void 0!==e)return e;n=rs(n)}return null}(e,t);return null===n?e===t.getRootElement()?iB("root"):null:iB(n)}function iq(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function iX(e){let t=[],n=e;for(;null!==n;)t.push(n),n=n._parentEditor;return t}function iZ(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function iQ(e){return iw(e)?e.nodeValue:null}function i0(e,t,n){let i=ry(rc(t));if(null===i)return;let r=i.anchorNode,{anchorOffset:l,focusOffset:o}=i;if(null!==r){let t=iQ(r),i=ij(r);if(null!==t&&t8(i)){if(t===_&&n){let e=n.length;t=n,l=e,o=e}null!==t&&i1(i,t,l,o,e)}}}function i1(e,t,n,i,r){let l=e;if(l.isAttached()&&(r||!l.isDirty())){let o=l.isComposing(),s=t;(o||r)&&t[t.length-1]===_&&(s=t.slice(0,-1));let d=l.getTextContent();if(r||s!==d){if(""===s){if(i$(null),a||u||h)l.remove();else{let e=nU();setTimeout(()=>{e.update(()=>{l.isAttached()&&l.remove()})},20)}return}let t=l.getParent(),r=nb(),d=l.getTextContentSize(),c=iK(),f=l.getKey();if(l.isToken()||null!==c&&f===c&&!o||na(r)&&(null!==t&&!t.canInsertTextBefore()&&0===r.anchor.offset||r.anchor.key===e.__key&&0===r.anchor.offset&&!l.canInsertTextBefore()&&!o||r.focus.key===e.__key&&r.focus.offset===d&&!l.canInsertTextAfter()&&!o))return void l.markDirty();let g=nE();if(!na(g)||null===n||null===i)return void i2(l,s,g);if(g.setTextNodeRange(l,n,l,i),l.isSegmented()){let e=t9(l.getTextContent());l.replace(e),l=e}i2(l,s,g)}}}function i2(e,t,n){if(e.setTextContent(t),na(n)){let t=e.getKey();for(let i of["anchor","focus"]){let r=n[i];"text"===r.type&&r.key===t&&(r.offset=rZ(e,r.offset,"clamp"))}}}function i3(e,t,n){let i=t[n]||!1;return"any"===i||i===e[n]}function i6(e,t,n){return i3(e,n,"altKey")&&i3(e,n,"ctrlKey")&&i3(e,n,"shiftKey")&&i3(e,n,"metaKey")&&e.key.toLowerCase()===t.toLowerCase()}let i4={ctrlKey:!l,metaKey:l},i5={altKey:l,ctrlKey:!l};function i9(e){return"Backspace"===e.key}function i8(e){let t=iJ();if(na(e)){let t=e.anchor,n=e.focus,i=t.getNode().getTopLevelElementOrThrow().getParentOrThrow();return t.set(i.getKey(),0,"element"),n.set(i.getKey(),i.getChildrenSize(),"element"),H(e),e}{let e=t.select(0,t.getChildrenSize());return iV(H(e)),e}}function i7(e,t){void 0===e.__lexicalClassNameCache&&(e.__lexicalClassNameCache={});let n=e.__lexicalClassNameCache,i=n[t];if(void 0!==i)return i;let r=e[t];if("string"==typeof r){let e=g(r);return n[t]=e,e}return r}function re(e,n,i,r,l){if(0===i.size)return;let o=r.__type,s=r.__key,a=n.get(o);void 0===a&&t(33,o);let u=a.klass,d=e.get(u);void 0===d&&(d=new Map,e.set(u,d));let c=d.get(s),f="destroyed"===c&&"created"===l;(void 0===c||f)&&d.set(s,f?"updated":l)}function rt(e,t,n){let i=e.getParent(),r=n,l=e;return null!==i&&(t&&0===n?(r=l.getIndexWithinParent(),l=i):t||n!==l.getChildrenSize()||(r=l.getIndexWithinParent()+1,l=i)),l.getChildAtIndex(t?r-1:r)}function rn(e,t){let n=e.offset;if("element"===e.type)return rt(e.getNode(),t,n);{let i=e.getNode();if(t&&0===n||!t&&n===i.getTextContentSize()){let e=t?i.getPreviousSibling():i.getNextSibling();return null===e?rt(i.getParentOrThrow(),t,i.getIndexWithinParent()+ +!t):e}}return null}function ri(e){let t=rc(e).event,n=t&&t.inputType;return"insertFromPaste"===n||"insertFromPasteAsQuotation"===n}function rr(e,t,n){return function(e,t,n){let i=iX(e);for(let r=4;r>=0;r--)for(let l=0;l<i.length;l++){let o=i[l],s=o._commands.get(t);if(void 0!==s){let t=s[r];if(void 0!==t){let i=Array.from(t),r=i.length,l=!1;if(n3(o,()=>{for(let t=0;t<r;t++)if(i[t](n,e))return void(l=!0)}),l)return l}}}return!1}(e,t,n)}function rl(e){return!ii(e)&&!e.isLastChild()&&!e.isInline()}function ro(e,n){let i=e._keyToDOMMap.get(n);return void 0===i&&t(75,n),i}function rs(e){let t=e.assignedSlot||e.parentElement;return rv(t)?t.host:t}function ra(e){return iA(e)?e:rC(e)?e.ownerDocument:null}function ru(e,t){let n=e.getParent();for(;null!==n;){if(n.is(t))return!0;n=n.getParent()}return!1}function rd(e){let t=ra(e);return t?t.defaultView:null}function rc(e){let n=e._window;return null===n&&t(78),n}function rf(e){return ii(e)||n9(e)&&e.isShadowRoot()}function rh(e){let t=e.constructor.clone(e);return iI(t,null),t.afterCloneFrom(e),t}function rg(e){let n=nU(),i=e.getType(),r=iC(n,i);void 0===r&&t(200,e.constructor.name,i);let{replace:l,replaceWithKlass:o}=r;if(null!==l){let n=l(e),r=n.constructor;return null!==o?n instanceof o||t(201,o.name,o.getType(),r.name,r.getType(),e.constructor.name,i):n instanceof e.constructor&&r!==e.constructor||t(202,r.name,r.getType(),e.constructor.name,i),n.__key===e.__key&&t(203,e.constructor.name,i,r.name,r.getType()),n}return e}function r_(e,n){!ii(e.getParent())||n9(n)||ie(n)||t(99)}function rp(e){return(ie(e)||n9(e)&&!e.canBeEmpty())&&!e.isInline()}function rm(e,t,n){n.style.removeProperty("caret-color"),t._blockCursorElement=null;let i=e.parentElement;null!==i&&i.removeChild(e)}function ry(e){return i?(e||window).getSelection():null}function rx(e){return rC(e)&&"A"===e.tagName}function rC(e){return rS(e)&&1===e.nodeType}function rS(e){return"object"==typeof e&&null!==e&&"nodeType"in e&&"number"==typeof e.nodeType}function rv(e){return rS(e)&&11===e.nodeType}function rN(e){let t=RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==e.nodeName.match(t)}function rT(e){let t=RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==e.nodeName.match(t)}function rE(e){if(ie(e)&&!e.isInline())return!0;if(!n9(e)||rf(e))return!1;let t=e.getFirstChild(),n=null===t||tU(t)||t8(t)||t.isInline();return!e.isInline()&&!1!==e.canBeEmpty()&&n}function rb(){return nU()}let rO=new WeakMap,rM=new Map;function rk(e){if(!e._readOnly&&e.isEmpty())return rM;e._readOnly||t(192);let n=rO.get(e);return n||(n=function(e){let t=new Map;for(let[n,i]of e._nodeMap){let e=i.__type,r=t.get(e);r||(r=new Map,t.set(e,r)),r.set(n,i)}return t}(e),rO.set(e,n)),n}function rw(e){let t=e.constructor.clone(e);return t.afterCloneFrom(e),t}function rA(e){var t;return(t=rw(e))[t$]=!0,t}function rD(e,t){let n=Math.round((parseInt(e.style.paddingInlineStart,10)||0)/40);t.setIndent(n)}function rR(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==tB[t]}function rP(e){let n=O in e.prototype?e.prototype[O]():void 0,i=function(e){if(!(e===tB||e.prototype instanceof tB)){let n="<unknown>",i="<unknown>";try{n=e.getType()}catch(e){}try{ip.version&&(i=JSON.parse(ip.version))}catch(e){}t(290,e.name,n,i)}return e===n7||e===n5||e===tB}(e),r=!i&&rR(e,"getType")?e.getType():void 0,l,o=r;if(n)if(r)l=n[r];else for(let[e,t]of Object.entries(n))o=e,l=t;if(!i&&o&&(rR(e,"getType")||(e.getType=()=>o),rR(e,"clone")||(e.clone=t=>(im=t,new e)),rR(e,"importJSON")||(e.importJSON=l&&l.$importJSON||(t=>(new e).updateFromJSON(t))),!rR(e,"importDOM")&&l)){let{importDOM:t}=l;t&&(e.importDOM=()=>t)}return{ownNodeConfig:l,ownNodeType:o}}function rI(e){let t=rb();return nW(),new(t.resolveRegisteredNodeAfterReplacements(t.getRegisteredNode(e))).klass}let rL=(e,t)=>{let n=e;for(;null!=n&&!ii(n);){if(t(n))return n;n=n.getParent()}return null},rF={next:"previous",previous:"next"};class r${origin;constructor(e){this.origin=e}[Symbol.iterator](){return r9({hasNext:rU,initial:this.getAdjacentCaret(),map:e=>e,step:e=>e.getAdjacentCaret()})}getAdjacentCaret(){return rq(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return rq(this.origin,this.direction)}remove(){let e=this.getNodeAtCaret();return e&&e.remove(),this}replaceOrInsert(e,t){let n=this.getNodeAtCaret();return e.is(this.origin)||e.is(n)||(null===n?this.insert(e):n.replace(e,t)),this}splice(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"next",r=i===this.direction?n:Array.from(n).reverse(),l=this,o=this.getParentAtCaret(),s=new Map;for(let t=l.getAdjacentCaret();null!==t&&s.size<e;t=t.getAdjacentCaret()){let e=t.origin.getWritable();s.set(e.getKey(),e)}for(let e of r){if(s.size>0){let n=l.getNodeAtCaret();if(n)if(s.delete(n.getKey()),s.delete(e.getKey()),n.is(e)||l.origin.is(e));else{let t=e.getParent();t&&t.is(o)&&e.remove(),n.replace(e)}else null===n&&t(263,Array.from(s).join(" "))}else l.insert(e);l=rq(e,this.direction)}for(let e of s.values())e.remove();return this}}class rK extends r${type="child";getLatest(){let e=this.origin.getLatest();return e===this.origin?this:rQ(e,this.direction)}getParentCaret(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";return rq(rz(this.getParentAtCaret(),e),this.direction)}getFlipped(){let e=rF[this.direction];return rq(this.getNodeAtCaret(),e)||rQ(this.origin,e)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(e){return e instanceof rK&&this.direction===e.direction&&this.origin.is(e.origin)}isSamePointCaret(e){return this.isSameNodeCaret(e)}}let rB={root:ii,shadowRoot:rf};function rz(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root";return rB[t](e)?null:e}class rW extends r${type="sibling";getLatest(){let e=this.origin.getLatest();return e===this.origin?this:rq(e,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return n9(this.origin)?rQ(this.origin,this.direction):null}getParentCaret(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";return rq(rz(this.getParentAtCaret(),e),this.direction)}getFlipped(){let e=rF[this.direction];return rq(this.getNodeAtCaret(),e)||rQ(this.origin.getParentOrThrow(),e)}isSamePointCaret(e){return e instanceof rW&&this.direction===e.direction&&this.origin.is(e.origin)}isSameNodeCaret(e){return(e instanceof rW||e instanceof rj)&&this.direction===e.direction&&this.origin.is(e.origin)}}class rj extends r${type="text";offset;constructor(e,t){super(e),this.offset=t}getLatest(){let e=this.origin.getLatest();return e===this.origin?this:rX(e,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";return rq(rz(this.getParentAtCaret(),e),this.direction)}getFlipped(){return rX(this.origin,rF[this.direction],this.offset)}isSamePointCaret(e){return e instanceof rj&&this.direction===e.direction&&this.origin.is(e.origin)&&this.offset===e.offset}isSameNodeCaret(e){return(e instanceof rW||e instanceof rj)&&this.direction===e.direction&&this.origin.is(e.origin)}getSiblingCaret(){return rq(this.origin,this.direction)}}function rY(e){return e instanceof rj}function rU(e){return e instanceof rW}function rJ(e){return e instanceof rK}let rH={next:class extends rj{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends rj{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},rV={next:class extends rW{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends rW{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},rG={next:class extends rK{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends rK{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function rq(e,t){return e?new rV[t](e):null}function rX(e,t,n){return e?new rH[t](e,rZ(e,n)):null}function rZ(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error",r=e.getTextContentSize(),l="next"===t?r:"previous"===t?0:t;return(l<0||l>r)&&("clamp"!==i&&n(284,String(t),String(r),e.getKey()),l=l<0?0:r),l}function rQ(e,t){return n9(e)?new rG[t](e):null}function r0(e){return e&&e.getChildCaret()||e}function r1(e){return e&&r0(e.getAdjacentCaret())}class r2{type="node-caret-range";direction;anchor;focus;constructor(e,t,n){this.anchor=e,this.focus=t,this.direction=n}getLatest(){let e=this.anchor.getLatest(),t=this.focus.getLatest();return e===this.anchor&&t===this.focus?this:new r2(e,t,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){let e=e=>{let t=this[e].getLatest();return rY(t)?function(e,t){let{direction:n,origin:i}=e;return new r3(e,rZ(i,"focus"===t?rF[n]:n)-e.offset)}(t,e):null},t=e("anchor"),n=e("focus");if(t&&n){let{caret:e}=t,{caret:i}=n;if(e.isSameNodeCaret(i))return[new r3(e,i.offset-e.offset),null]}return[t,n]}iterNodeCarets(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root",t=rY(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),n=this.focus.getLatest(),i=rY(n),r=t=>t.isSameNodeCaret(n)?null:r1(t)||t.getParentCaret(e);return r9({hasNext:e=>null!==e&&!(i&&n.isSameNodeCaret(e)),initial:t.isSameNodeCaret(n)?null:r(t),map:e=>e,step:r})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class r3{type="slice";caret;distance;constructor(e,t){this.caret=e,this.distance=t}getSliceIndices(){let{distance:e,caret:{offset:t}}=this,n=t+e;return n<t?[n,t]:[t,n]}getTextContent(){let[e,t]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(e,t)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){let{caret:{origin:e,direction:t}}=this,[n,i]=this.getSliceIndices(),r=e.getTextContent();return rX(e.setTextContent(r.slice(0,n)+r.slice(i)),t,n)}}function r6(e){return r5(e,rq(iJ(),e.direction))}function r4(e){return r5(e,e)}function r5(e,n){return e.direction!==n.direction&&t(265),new r2(e,n,e.direction)}function r9(e){let{initial:t,hasNext:n,step:i,map:r}=e,l=t;return{[Symbol.iterator](){return this},next(){if(!n(l))return{done:!0,value:void 0};let e={done:!1,value:r(l)};return l=i(l),e}}}function r8(e,n){let i=lt(e.origin,n.origin);switch(null===i&&t(275,e.origin.getKey(),n.origin.getKey()),i.type){case"same":{let t="text"===e.type,i="text"===n.type;return t&&i?Math.sign(e.offset-n.offset):e.type===n.type?0:t?-1:i?1:"child"===e.type?-1:1}case"ancestor":return"child"===e.type?-1:1;case"descendant":return"child"===n.type?1:-1;case"branch":return r7(i)}}function r7(e){let{a:t,b:n}=e,i=t.__key,r=n.__key,l=t,o=n;for(;l&&o;l=l.getNextSibling(),o=o.getNextSibling()){if(l.__key===r)return -1;if(o.__key===i)return 1}return null===l?1:-1}function le(e){return n9(e)?[e.getLatest(),null]:[e.getParent(),e.getLatest()]}function lt(e,n){if(e.is(n))return{commonAncestor:e,type:"same"};let i=new Map;for(let[t,n]=le(e);t;n=t,t=t.getParent())i.set(t,n);for(let[r,l]=le(n);r;l=r,r=r.getParent()){let o=i.get(r);if(void 0!==o)return null===o?(r.is(e)||t(276),{commonAncestor:r,type:"ancestor"}):null===l?(r.is(n)||t(277),{commonAncestor:r,type:"descendant"}):((n9(o)||o.is(e))&&(n9(l)||l.is(n))&&r.is(o.getParent())&&r.is(l.getParent())||t(278),{a:o,b:l,commonAncestor:r,type:"branch"})}return null}function ln(e,n){var i;let r,{type:l,key:o,offset:s}=e,a=(null===(r=iB(i=e.key))&&t(63,i),r);return"text"===l?(t8(a)||t(266,a.getType(),o),rX(a,n,s)):(n9(a)||t(267,a.getType(),o),function(e,t,n){let i=rQ(e,"next");for(let e=0;e<t;e++){let e=i.getAdjacentCaret();if(null===e)break;i=e}return lf(i,n)}(a,e.offset,n))}function li(e,n){let{origin:i,direction:r}=n,l="next"===r;rY(n)?e.set(i.getKey(),n.offset,"text"):rU(n)?t8(i)?e.set(i.getKey(),rZ(i,r),"text"):e.set(i.getParentOrThrow().getKey(),i.getIndexWithinParent()+ +!!l,"element"):(rJ(n)&&n9(i)||t(268),e.set(i.getKey(),l?0:i.getChildrenSize(),"element"))}function lr(e){let t=nE(),n=na(t)?t:nv();return ll(n,e),iV(n),n}function ll(e,t){li(e.anchor,t.anchor),li(e.focus,t.focus)}function lo(e){let{anchor:t,focus:n}=e,i=ln(t,"next"),r=ln(n,"next"),l=0>=r8(i,r)?"next":"previous";return r5(lf(i,l),lf(r,l))}function ls(e){let{direction:t,origin:n}=e,i=rq(n,rF[t]).getNodeAtCaret();return i?rq(i,t):rQ(n.getParentOrThrow(),t)}function la(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root",n=[e];for(let i=rJ(e)?e.getParentCaret(t):e.getSiblingCaret();null!==i;i=i.getParentCaret(t))n.push(ls(i));return n}function lu(e){return!!e&&e.origin.isAttached()}function ld(e){let t=function(e){let t=e;for(;rJ(t);){let e=r1(t);if(!rJ(e))break;t=e}return t}(e.getLatest()),{direction:n}=t;if(t8(t.origin))return rY(t)?t:rX(t.origin,n,n);let i=t.getAdjacentCaret();return rU(i)&&t8(i.origin)?rX(i.origin,n,rF[n]):t}function lc(e){return rY(e)&&e.offset!==rZ(e.origin,e.direction)}function lf(e,t){return e.direction===t?e:e.getFlipped()}function lh(e,t){return e.direction===t?e:r5(lf(e.focus,t),lf(e.anchor,t))}function lg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root",n=0,i=e,r=r1(i);for(;null===r;){if(n--,!(r=i.getParentCaret(t)))return null;r=r1(i=r)}return r&&[r,n]}function l_(e){let{origin:n,offset:i,direction:r}=e;if(i===rZ(n,r))return e.getSiblingCaret();if(i===rZ(n,rF[r]))return ls(e.getSiblingCaret());let[l]=n.splitText(i);return t8(l)||t(281),lf(rq(l,"next"),r)}function lp(e,t){return!0}function lm(e){let{$copyElementNode:t=rh,$splitTextPointCaretNext:n=l_,rootMode:i="shadowRoot",$shouldSplit:r=lp}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(rY(e))return n(e);let l=e.getParentCaret(i);if(l){let{origin:n}=l;if(rJ(e)&&(!n.canBeEmpty()||!r(n,"first")))return ls(l);let i=function(e){let t=[];for(let n=e.getAdjacentCaret();n;n=n.getAdjacentCaret())t.push(n.origin);return t}(e);(i.length>0||n.canBeEmpty()&&r(n,"last"))&&l.insert(t(n).splice(0,0,i))}return l}function ly(e){return e}function lx(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}function lC(e){return e}function lS(e,t){if(!t||e===t)return e;for(let n in t)if(e[n]!==t[n])return{...e,...t};return e}function lv(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let r=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;for(let t of(l.append("code",e),n))l.append("v",t);throw r.search=l.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}e.s(["$applyNodeReplacement",()=>rg,"$caretFromPoint",()=>ln,"$caretRangeFromSelection",()=>lo,"$cloneWithProperties",()=>rw,"$cloneWithPropertiesEphemeral",()=>rA,"$create",()=>rI,"$createLineBreakNode",()=>tY,"$createNodeSelection",()=>nN,"$createParagraphNode",()=>ic,"$createPoint",()=>nr,"$createRangeSelection",()=>nv,"$createTabNode",()=>nt,"$createTextNode",()=>t9,"$extendCaretToRange",()=>r6,"$findMatchingParent",()=>rL,"$getAdjacentChildCaret",()=>r1,"$getAdjacentNode",()=>rn,"$getAdjacentSiblingOrParentSiblingCaret",()=>lg,"$getCaretInDirection",()=>lf,"$getCaretRange",()=>r5,"$getCaretRangeInDirection",()=>lh,"$getCharacterOffsets",()=>nf,"$getChildCaret",()=>rQ,"$getChildCaretOrSelf",()=>r0,"$getCollapsedCaretRange",()=>r4,"$getEditor",()=>rb,"$getNearestNodeFromDOMNode",()=>ij,"$getNodeByKey",()=>iB,"$getNodeFromDOMNode",()=>iz,"$getPreviousSelection",()=>nb,"$getRoot",()=>iJ,"$getSelection",()=>nE,"$getSiblingCaret",()=>rq,"$getState",()=>I,"$getTextPointCaret",()=>rX,"$hasAncestor",()=>ru,"$insertNodes",()=>nD,"$isBlockElementNode",()=>nC,"$isChildCaret",()=>rJ,"$isDecoratorNode",()=>ie,"$isEditorState",()=>io,"$isElementNode",()=>n9,"$isExtendableTextPointCaret",()=>lc,"$isLeafNode",()=>iP,"$isLineBreakNode",()=>tU,"$isNodeSelection",()=>nd,"$isParagraphNode",()=>ih,"$isRangeSelection",()=>na,"$isRootNode",()=>ii,"$isRootOrShadowRoot",()=>rf,"$isSiblingCaret",()=>rU,"$isTabNode",()=>nn,"$isTextNode",()=>t8,"$isTextPointCaret",()=>rY,"$isTokenOrSegmented",()=>ik,"$normalizeCaret",()=>ld,"$normalizeSelection__EXPERIMENTAL",()=>H,"$parseSerializedNode",()=>nq,"$rewindSiblingCaret",()=>ls,"$selectAll",()=>i8,"$setPointFromCaret",()=>li,"$setSelection",()=>iV,"$setSelectionFromCaretRange",()=>lr,"$setState",()=>L,"$splitAtPointCaretNext",()=>lm,"ArtificialNode__DO_NOT_USE",()=>ia,"BLUR_COMMAND",()=>tl,"CAN_REDO_COMMAND",()=>tn,"CAN_UNDO_COMMAND",()=>ti,"CLEAR_EDITOR_COMMAND",()=>te,"CLEAR_HISTORY_COMMAND",()=>tt,"CLICK_COMMAND",()=>eM,"COMMAND_PRIORITY_CRITICAL",()=>4,"COMMAND_PRIORITY_EDITOR",()=>0,"COMMAND_PRIORITY_LOW",()=>1,"CONTROLLED_TEXT_INSERTION_COMMAND",()=>eD,"COPY_COMMAND",()=>e9,"CUT_COMMAND",()=>e8,"DELETE_CHARACTER_COMMAND",()=>ek,"DELETE_LINE_COMMAND",()=>eL,"DELETE_WORD_COMMAND",()=>eI,"DRAGOVER_COMMAND",()=>e4,"DRAGSTART_COMMAND",()=>e6,"DROP_COMMAND",()=>e2,"DecoratorNode",()=>n7,"ElementNode",()=>n5,"FOCUS_COMMAND",()=>tr,"FORMAT_ELEMENT_COMMAND",()=>e3,"FORMAT_TEXT_COMMAND",()=>eF,"HISTORIC_TAG",()=>"historic","HISTORY_MERGE_TAG",()=>tz,"HISTORY_PUSH_TAG",()=>"history-push","INDENT_CONTENT_COMMAND",()=>e0,"INSERT_LINE_BREAK_COMMAND",()=>ew,"INSERT_PARAGRAPH_COMMAND",()=>eA,"INSERT_TAB_COMMAND",()=>eQ,"INTERNAL_$isBlock",()=>rE,"KEY_ARROW_DOWN_COMMAND",()=>eJ,"KEY_ARROW_LEFT_COMMAND",()=>ej,"KEY_ARROW_RIGHT_COMMAND",()=>ez,"KEY_ARROW_UP_COMMAND",()=>eU,"KEY_BACKSPACE_COMMAND",()=>eG,"KEY_DELETE_COMMAND",()=>eX,"KEY_ENTER_COMMAND",()=>eH,"KEY_ESCAPE_COMMAND",()=>eq,"KEY_SPACE_COMMAND",()=>eV,"KEY_TAB_COMMAND",()=>eZ,"LineBreakNode",()=>tW,"MOVE_TO_END",()=>eW,"MOVE_TO_START",()=>eY,"OUTDENT_CONTENT_COMMAND",()=>e1,"PASTE_COMMAND",()=>eR,"PASTE_TAG",()=>"paste","ParagraphNode",()=>iu,"REDO_COMMAND",()=>eK,"REMOVE_TEXT_COMMAND",()=>eP,"RootNode",()=>it,"SELECTION_CHANGE_COMMAND",()=>eb,"SELECTION_INSERT_CLIPBOARD_NODES_COMMAND",()=>eO,"SELECT_ALL_COMMAND",()=>e7,"TabNode",()=>ne,"TextNode",()=>tQ,"UNDO_COMMAND",()=>e$,"buildImportMap",()=>tF,"configExtension",()=>lx,"createCommand",()=>eE,"createEditor",()=>i_,"defineExtension",()=>ly,"getDOMSelection",()=>ry,"getDOMTextNode",()=>iD,"getNearestEditorFromDOMNode",()=>iE,"getRegisteredNode",()=>iC,"getTextDirection",()=>iO,"isBlockDomNode",()=>rT,"isDOMDocumentNode",()=>iA,"isDOMNode",()=>rS,"isDocumentFragment",()=>rv,"isHTMLAnchorElement",()=>rx,"isHTMLElement",()=>rC,"isInlineDomNode",()=>rN,"isSelectionCapturedInDecoratorInput",()=>iv,"isSelectionWithinEditor",()=>iN,"makeStepwiseIterator",()=>r9,"safeCast",()=>lC,"setNodeIndentFromDOM",()=>rD,"shallowMergeConfig",()=>lS],717522);let lN=new Map;function lT(e,t){let n=e.getRootElement();if(null===n)return[];let i=n.getBoundingClientRect(),r=getComputedStyle(n),l=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),o=Array.from(t.getClientRects()),s,a=o.length;o.sort((e,t)=>{let n=e.top-t.top;return 3>=Math.abs(n)?e.left-t.left:n});for(let e=0;e<a;e++){let t=o[e],n=s&&s.top<=t.top&&s.top+s.height>t.top&&s.left+s.width>t.left,r=t.width+l===i.width;n||r?(o.splice(e--,1),a--):s=t}return o}function lE(e){let t={};if(!e)return t;for(let n of e.split(";"))if(""!==n){let[e,i]=n.split(/:([^]+)/);e&&i&&(t[e.trim()]=i.trim())}return t}function lb(e){let t=lN.get(e);return void 0===t&&(t=lE(e),lN.set(e,t)),t}function lO(e){let t=rb().getElementByKey(e.getKey());if(null===t)return null;let n=t.ownerDocument.defaultView;return null===n?null:n.getComputedStyle(t)}function lM(e){return lO(ii(e)?e:e.getParentOrThrow())}function lk(e){let t=lM(e);return null!==t&&"rtl"===t.direction}function lw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"self",i=e.getStartEndPoints();if(t.isSelected(e)&&!ik(t)&&null!==i){let[r,l]=i,o=e.isBackward(),s=r.getNode(),a=l.getNode(),u=t.is(s),d=t.is(a);if(u||d){let[i,r]=nf(e),l=s.is(a),u=t.is(o?a:s),d=t.is(o?s:a),c,f=0;l?(f=i>r?r:i,c=i>r?i:r):u?(f=o?r:i,c=void 0):d&&(f=0,c=o?i:r);let h=t.__text.slice(f,c);h!==t.__text&&("clone"===n&&(t=rA(t)),t.__text=h)}}return t}function lA(e){if("text"===e.type)return e.offset===e.getNode().getTextContentSize();let t=e.getNode();return n9(t)||lv(177),e.offset===t.getChildrenSize()}function lD(e){let t=e.getStyle(),n=lE(t);lN.set(t,n)}function lR(e,t){(na(e)?e.isCollapsed():t8(e)||n9(e))||lv(280);let n=lb(na(e)?e.style:t8(e)?e.getStyle():e.getTextStyle()),i=Object.entries(t).reduce((t,i)=>{let[r,l]=i;return"function"==typeof l?t[r]=l(n[r],e):null===l?delete t[r]:t[r]=l,t},{...n}),r=function(e){let t="";for(let n in e)n&&(t+=`${n}: ${e[n]};`);return t}(i);na(e)||t8(e)?e.setStyle(r):e.setTextStyle(r),lN.set(r,i)}function lP(e,t){if(na(e)&&e.isCollapsed()){lR(e,t);let n=e.anchor.getNode();n9(n)&&n.isEmpty()&&lR(n,t)}!function(e){let t=nE();if(!t)return;let n=new Map,i=e=>n.get(e.getKey())||[0,e.getTextContentSize()];if(na(t))for(let e of lo(t).getTextSlices())e&&n.set(e.caret.origin.getKey(),e.getSliceIndices());for(let n of t.getNodes()){if(!t8(n)||!n.canHaveFormat())continue;let[t,r]=i(n);r!==t&&e(ik(n)||0===t&&r===n.getTextContentSize()?n:n.splitText(t,r)[+(0!==t)])}na(t)&&"text"===t.anchor.type&&"text"===t.focus.type&&t.anchor.key===t.focus.key&&function(e){if(e.isBackward()){let{anchor:t,focus:n}=e,{key:i,offset:r,type:l}=t;t.set(n.key,n.offset,n.type),n.set(i,r,l)}}(t)}(e=>{lR(e,t)})}function lI(e,t){let n=e.getFormatType(),i=e.getIndent();n!==t.getFormatType()&&t.setFormat(n),i!==t.getIndent()&&t.setIndent(i)}function lL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lI;if(null===e)return;let i=e.getStartEndPoints(),r=new Map,l=null;if(i){let[e,t]=i;(l=nv()).anchor.set(e.key,e.offset,e.type),l.focus.set(t.key,t.offset,t.type);let n=rL(e.getNode(),rE),o=rL(t.getNode(),rE);n9(n)&&r.set(n.getKey(),n),n9(o)&&r.set(o.getKey(),o)}for(let t of e.getNodes())if(n9(t)&&rE(t))r.set(t.getKey(),t);else if(null===i){let e=rL(t,rE);n9(e)&&r.set(e.getKey(),e)}for(let[e,i]of r){let r=t();n(i,r),i.replace(r,!0),l&&(e===l.anchor.key&&l.anchor.set(r.getKey(),l.anchor.offset,l.anchor.type),e===l.focus.key&&l.focus.set(r.getKey(),l.focus.offset,l.focus.type))}l&&e.is(nE())&&iV(l)}function lF(e){let t=l$(e);return null!==t&&"vertical-rl"===t.writingMode}function l$(e){let t=e.anchor.getNode();return n9(t)?lO(t):lM(t)}function lK(e,t){let n=lF(e)?!t:t;lB(e)&&(n=!n);let i=ln(e.focus,n?"previous":"next");if(lc(i))return!1;for(let e of r6(i)){if(rJ(e))return!e.origin.isInline();if(!n9(e.origin)){if(ie(e.origin))return!0;break}}return!1}function lB(e){let t=l$(e);return null!==t&&"rtl"===t.direction}function lz(e,t,n){let i,r=lB(e);i=lF(e)||r?!n:n,e.modify(t?"extend":"move",i,"character")}function lW(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=null,r=e.getNodes(),l=e.anchor,o=e.focus,s=e.isBackward(),a=s?o.offset:l.offset,u=s?o.getNode():l.getNode();if(na(e)&&e.isCollapsed()&&""!==e.style){let n=lb(e.style);if(null!==n&&t in n)return n[t]}for(let e=0;e<r.length;e++){let l=r[e];if((0===e||0!==a||!l.is(u))&&t8(l)){let e=function(e,t,n){let i=lb(e.getStyle());return null!==i&&i[t]||n}(l,t,n);if(null===i)i=e;else if(i!==e){i="";break}}}return null===i?n:i}e.s(["$addNodeStyle",()=>lD,"$getSelectionStyleValueForProperty",()=>lW,"$isAtNodeEnd",()=>lA,"$isParentRTL",()=>lk,"$moveCharacter",()=>lz,"$patchStyleText",()=>lP,"$setBlocksType",()=>lL,"$shouldOverrideDefaultCharacterSelection",()=>lK,"$sliceSelectedTextNodeContent",()=>lw,"createRectsFromDOMRange",()=>lT,"getStyleObjectFromCSS",()=>lb],824740);let lj="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement,lY=lj&&"documentMode"in document?document.documentMode:null,lU=(lj&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),lj&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent));function lJ(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=[];for(let e of t)if(e&&"string"==typeof e)for(let[t]of e.matchAll(/\S+/g))i.push(t);return i}function lH(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return()=>{for(let e=t.length-1;e>=0;e--)t[e]();t.length=0}}function lV(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let r=lJ(...n);r.length>0&&e.classList.add(...r)}function lG(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let r=lJ(...n);r.length>0&&e.classList.remove(...r)}function lq(e){return e?e.getAdjacentCaret():null}function lX(e,t){let n=e;for(;null!=n;){if(n instanceof t)return n;n=n.getParent()}return null}function lZ(e){let t=rL(e,e=>n9(e)&&!e.isInline());return n9(t)||function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let r=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;for(let t of(l.append("code",e),n))l.append("v",t);throw r.search=l.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(4,e.__key),t}function lQ(e,t){return null!==e&&Object.getPrototypeOf(e).constructor.name===t.name}function l0(e,t){let n=[];for(let i=0;i<e.length;i++){let r=t(e[i]);null!==r&&n.push(r)}return n}lj&&"InputEvent"in window&&!lY&&new window.InputEvent("input"),lj&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),lj&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,lj&&/Android/.test(navigator.userAgent),lj&&/^(?=.*Chrome).*/i.test(navigator.userAgent),lj&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent);let l1=!(lU||!lj)&&void 0;function l2(e){let t=1;if(function(){if(void 0===l1){let e=document.createElement("div");e.style.cssText="position: absolute; opacity: 0; width: 100px; left: -1000px;",document.body.appendChild(e);let t=e.getBoundingClientRect();e.style.setProperty("zoom","2"),l1=e.getBoundingClientRect().width===t.width,document.body.removeChild(e)}return l1}())for(;e;)t*=Number(window.getComputedStyle(e).getPropertyValue("zoom")),e=e.parentElement;return t}e.s(["$filter",()=>l0,"$getAdjacentCaret",()=>lq,"$getNearestBlockElementAncestorOrThrow",()=>lZ,"$getNearestNodeOfType",()=>lX,"addClassNamesToElement",()=>lV,"calculateZoomLevel",()=>l2,"mergeRegister",()=>lH,"objectKlassEquals",()=>lQ,"removeClassNamesFromElement",()=>lG],634020)},969013,e=>{"use strict";let t,n;var i=e.i(717522),r=e.i(634020);let l=Symbol.for("preact-signals");function o(){if(u>1)return void u--;let e,t=!1;for(;void 0!==n;){let i=n;for(n=void 0,d++;void 0!==i;){let n=i.o;if(i.o=void 0,i.f&=-3,!(8&i.f)&&_(i))try{i.c()}catch(n){t||(e=n,t=!0)}i=n}}if(d=0,u--,t)throw e}function s(e){if(u>0)return e();u++;try{return e()}finally{o()}}function a(e){let n=t;t=void 0;try{return e()}finally{t=n}}let u=0,d=0,c=0;function f(e){if(void 0===t)return;let n=e.n;return void 0===n||n.t!==t?(n={i:0,S:e,p:t.s,n:void 0,t:t,e:void 0,x:void 0,r:n},void 0!==t.s&&(t.s.n=n),t.s=n,e.n=n,32&t.f&&e.S(n),n):-1===n.i?(n.i=0,void 0!==n.n&&(n.n.p=n.p,void 0!==n.p&&(n.p.n=n.n),n.p=t.s,n.n=void 0,t.s.n=n,t.s=n),n):void 0}function h(e,t){this.v=e,this.i=0,this.n=void 0,this.t=void 0,this.W=null==t?void 0:t.watched,this.Z=null==t?void 0:t.unwatched,this.name=null==t?void 0:t.name}function g(e,t){return new h(e,t)}function _(e){for(let t=e.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function p(e){for(let t=e.s;void 0!==t;t=t.n){let n=t.S.n;if(void 0!==n&&(t.r=n),t.S.n=t,t.i=-1,void 0===t.n){e.s=t;break}}}function m(e){let t,n=e.s;for(;void 0!==n;){let e=n.p;-1===n.i?(n.S.U(n),void 0!==e&&(e.n=n.n),void 0!==n.n&&(n.n.p=e)):t=n,n.S.n=n.r,void 0!==n.r&&(n.r=void 0),n=e}e.s=t}function y(e,t){h.call(this,void 0),this.x=e,this.s=void 0,this.g=c-1,this.f=4,this.W=null==t?void 0:t.watched,this.Z=null==t?void 0:t.unwatched,this.name=null==t?void 0:t.name}function x(e){let n=e.u;if(e.u=void 0,"function"==typeof n){u++;let i=t;t=void 0;try{n()}catch(t){throw e.f&=-2,e.f|=8,C(e),t}finally{t=i,o()}}}function C(e){for(let t=e.s;void 0!==t;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,x(e)}function S(e){if(t!==this)throw Error("Out-of-order effect");m(this),t=e,this.f&=-2,8&this.f&&C(this),o()}function v(e,t){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=null==t?void 0:t.name}function N(e,t){let n=new v(e,t);try{n.c()}catch(e){throw n.d(),e}let i=n.d.bind(n);return i[Symbol.dispose]=i,i}function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};for(let i in e){let r=t[i],l=g(void 0===r?e[i]:r);n[i]=l}return n}function E(){let e=(0,i.$getRoot)(),t=(0,i.$getSelection)(),n=(0,i.$createParagraphNode)();e.clear(),e.append(n),null!==t&&n.select(),(0,i.$isRangeSelection)(t)&&(t.format=0)}function b(e,t){let n;return g(e(),{unwatched(){n&&(n(),n=void 0)},watched(){this.value=e(),n=t(this)}})}h.prototype.brand=l,h.prototype.h=function(){return!0},h.prototype.S=function(e){let t=this.t;t!==e&&void 0===e.e&&(e.x=t,this.t=e,void 0!==t?t.e=e:a(()=>{var e;null==(e=this.W)||e.call(this)}))},h.prototype.U=function(e){if(void 0!==this.t){let t=e.e,n=e.x;void 0!==t&&(t.x=n,e.e=void 0),void 0!==n&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n,void 0===n&&a(()=>{var e;null==(e=this.Z)||e.call(this)}))}},h.prototype.subscribe=function(e){return N(()=>{let n=this.value,i=t;t=void 0;try{e(n)}finally{t=i}},{name:"sub"})},h.prototype.valueOf=function(){return this.value},h.prototype.toString=function(){return this.value+""},h.prototype.toJSON=function(){return this.value},h.prototype.peek=function(){let e=t;t=void 0;try{return this.value}finally{t=e}},Object.defineProperty(h.prototype,"value",{get(){let e=f(this);return void 0!==e&&(e.i=this.i),this.v},set(e){if(e!==this.v){if(d>100)throw Error("Cycle detected");this.v=e,this.i++,c++,u++;try{for(let e=this.t;void 0!==e;e=e.x)e.t.N()}finally{o()}}}}),y.prototype=new h,y.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f)||(this.f&=-5,this.g===c))return!0;if(this.g=c,this.f|=1,this.i>0&&!_(this))return this.f&=-2,!0;let e=t;try{p(this),t=this;let e=this.x();(16&this.f||this.v!==e||0===this.i)&&(this.v=e,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return t=e,m(this),this.f&=-2,!0},y.prototype.S=function(e){if(void 0===this.t){this.f|=36;for(let e=this.s;void 0!==e;e=e.n)e.S.S(e)}h.prototype.S.call(this,e)},y.prototype.U=function(e){if(void 0!==this.t&&(h.prototype.U.call(this,e),void 0===this.t)){this.f&=-33;for(let e=this.s;void 0!==e;e=e.n)e.S.U(e)}},y.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(let e=this.t;void 0!==e;e=e.x)e.t.N()}},Object.defineProperty(y.prototype,"value",{get(){if(1&this.f)throw Error("Cycle detected");let e=f(this);if(this.h(),void 0!==e&&(e.i=this.i),16&this.f)throw this.v;return this.v}}),v.prototype.c=function(){let e=this.S();try{if(8&this.f||void 0===this.x)return;let e=this.x();"function"==typeof e&&(this.u=e)}finally{e()}},v.prototype.S=function(){if(1&this.f)throw Error("Cycle detected");this.f|=1,this.f&=-9,x(this),p(this),u++;let e=t;return t=this,S.bind(this,e)},v.prototype.N=function(){2&this.f||(this.f|=2,this.o=n,n=this)},v.prototype.d=function(){this.f|=8,1&this.f||C(this)},v.prototype.dispose=function(){this.d()},(0,i.defineExtension)({build:(e,t,n)=>T(t),config:(0,i.safeCast)({defaultSelection:"rootEnd",disabled:!1}),name:"@lexical/extension/AutoFocus",register(e,t,n){let i=n.getOutput();return N(()=>i.disabled.value?void 0:e.registerRootListener(t=>{e.focus(()=>{let e=document.activeElement;null===t||null!==e&&t.contains(e)||t.focus({preventScroll:!0})},{defaultSelection:i.defaultSelection.peek()})}))}}),(0,i.defineExtension)({build:(e,t,n)=>T(t),config:(0,i.safeCast)({$onClear:E}),name:"@lexical/extension/ClearEditor",register(e,t,n){let{$onClear:r}=n.getOutput();return N(()=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E;return e.registerCommand(i.CLEAR_EDITOR_COMMAND,n=>(e.update(t),!0),i.COMMAND_PRIORITY_EDITOR)})(e,r.value))}});let O=(0,i.defineExtension)({build:e=>b(()=>e.getEditorState(),t=>e.registerUpdateListener(e=>{t.value=e.editorState})),name:"@lexical/extension/EditorState"});function M(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let r=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;for(let t of(l.append("code",e),n))l.append("v",t);throw r.search=l.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let k=new Set;class w{builder;configs;_dependency;_peerNameSet;extension;state;_signal;constructor(e,t){this.builder=e,this.extension=t,this.configs=new Set,this.state={id:0}}mergeConfigs(){let e=this.extension.config||{},t=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):i.shallowMergeConfig;for(let n of this.configs)e=t(e,n);return e}init(e){let t,n=this.state;2===n.id||M(306,String(n.id));let i={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},r={...i,getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)},l=Object.assign(n,{config:this.mergeConfigs(),id:3,registerState:i});this.state=l,this.extension.init&&(t=this.extension.init(e,l.config,i)),this.state=Object.assign(l,{id:4,initResult:t,registerState:r})}build(e){let t,n=this.state;4!==n.id&&M(307,String(n.id),String(5)),this.extension.build&&(t=this.extension.build(e,n.config,n.registerState));let i={...n.registerState,getOutput:()=>t,getSignal:this.getSignal.bind(this)};this.state=Object.assign(n,{id:5,output:t,registerState:i})}register(e,t){this._signal=t;let n=this.state;5!==n.id&&M(308,String(n.id),String(5));let i=this.extension.register&&this.extension.register(e,n.config,n.registerState);return this.state=Object.assign(n,{id:6}),()=>{let e=this.state;7!==e.id&&M(309,String(n.id),String(7)),this.state=Object.assign(e,{id:5}),i&&i()}}afterRegistration(e){let t,n=this.state;return 6!==n.id&&M(310,String(n.id),String(6)),this.extension.afterRegistration&&(t=this.extension.afterRegistration(e,n.config,n.registerState)),this.state=Object.assign(n,{id:7}),t}getSignal(){return void 0===this._signal&&M(311),this._signal}getInitResult(){void 0===this.extension.init&&M(312,this.extension.name);let e=this.state;return e.id>=4||M(313,String(e.id),String(4)),e.initResult}getInitPeer(e){let t=this.builder.extensionNameMap.get(e);return t?t.getExtensionInitDependency():void 0}getExtensionInitDependency(){let e=this.state;return e.id>=3||M(314,String(e.id),String(3)),{config:e.config}}getPeer(e){let t=this.builder.extensionNameMap.get(e);return t?t.getExtensionDependency():void 0}getInitDependency(e){let t=this.builder.getExtensionRep(e);return void 0===t&&M(315,this.extension.name,e.name),t.getExtensionInitDependency()}getDependency(e){let t=this.builder.getExtensionRep(e);return void 0===t&&M(315,this.extension.name,e.name),t.getExtensionDependency()}getState(){let e=this.state;return e.id>=7||M(316,String(e.id),String(7)),e}getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||k}getPeerNameSet(){let e=this._peerNameSet;return e||(e=new Set((this.extension.peerDependencies||[]).map(e=>{let[t]=e;return t})),this._peerNameSet=e),e}getExtensionDependency(){if(!this._dependency){let e=this.state;e.id>=5||M(317,this.extension.name),this._dependency={config:e.config,init:e.initResult,output:e.output}}return this._dependency}}let A={tag:i.HISTORY_MERGE_TAG};function D(){let e=(0,i.$getRoot)();e.isEmpty()&&e.append((0,i.$createParagraphNode)())}let R=(0,i.defineExtension)({config:(0,i.safeCast)({setOptions:A,updateOptions:A}),init:e=>{let{$initialEditorState:t=D}=e;return{$initialEditorState:t,initialized:!1}},afterRegistration(e,t,n){let{updateOptions:r,setOptions:l}=t,o=n.getInitResult();if(!o.initialized){o.initialized=!0;let{$initialEditorState:t}=o;if((0,i.$isEditorState)(t))e.setEditorState(t,l);else if("function"==typeof t)e.update(()=>{t(e)},r);else if(t&&("string"==typeof t||"object"==typeof t)){let n=e.parseEditorState(t);e.setEditorState(n,l)}}return()=>{}},name:"@lexical/extension/InitialState",nodes:[i.RootNode,i.TextNode,i.LineBreakNode,i.TabNode,i.ParagraphNode]}),P=Symbol.for("@lexical/extension/LexicalBuilder");function I(){}function L(e){throw e}function F(e){return Array.isArray(e)?e:[e]}let $="0.38.2+prod.esm";class K{roots;extensionNameMap;outgoingConfigEdges;incomingEdges;conflicts;_sortedExtensionReps;PACKAGE_VERSION;constructor(e){for(const t of(this.outgoingConfigEdges=new Map,this.incomingEdges=new Map,this.extensionNameMap=new Map,this.conflicts=new Map,this.PACKAGE_VERSION=$,this.roots=e,e))this.addExtension(t)}static fromExtensions(e){let t=[F(R)];for(let n of e)t.push(F(n));return new K(t)}static maybeFromEditor(e){let t=e[P];return t&&(t.PACKAGE_VERSION!==$&&M(292,t.PACKAGE_VERSION,$),t instanceof K||M(293)),t}static fromEditor(e){let t=K.maybeFromEditor(e);return void 0===t&&M(294),t}constructEditor(){let{$initialEditorState:e,onError:t,...n}=this.buildCreateEditorArgs(),r=Object.assign((0,i.createEditor)({...n,...t?{onError:e=>{t(e,r)}}:{}}),{[P]:this});for(let e of this.sortedExtensionReps())e.build(r);return r}buildEditor(){let e=I;function t(){try{e()}finally{e=I}}let n=Object.assign(this.constructEditor(),{dispose:t,[Symbol.dispose]:t});return e=(0,r.mergeRegister)(this.registerEditor(n),()=>n.setRootElement(null)),n}hasExtensionByName(e){return this.extensionNameMap.has(e)}getExtensionRep(e){let t=this.extensionNameMap.get(e.name);if(t)return t.extension!==e&&M(295,e.name),t}addEdge(e,t,n){let i=this.outgoingConfigEdges.get(e);i?i.set(t,n):this.outgoingConfigEdges.set(e,new Map([[t,n]]));let r=this.incomingEdges.get(t);r?r.add(e):this.incomingEdges.set(t,new Set([e]))}addExtension(e){void 0!==this._sortedExtensionReps&&M(296);let[t]=F(e);"string"!=typeof t.name&&M(297,typeof t.name);let n=this.extensionNameMap.get(t.name);if(void 0!==n&&n.extension!==t&&M(298,t.name),!n){n=new w(this,t),this.extensionNameMap.set(t.name,n);let e=this.conflicts.get(t.name);for(let n of("string"==typeof e&&M(299,t.name,e),t.conflictsWith||[]))this.extensionNameMap.has(n)&&M(299,t.name,n),this.conflicts.set(n,t.name);for(let e of t.dependencies||[]){let n=F(e);this.addEdge(t.name,n[0].name,n.slice(1)),this.addExtension(n)}for(let[e,n]of t.peerDependencies||[])this.addEdge(t.name,e,n?[n]:[])}}sortedExtensionReps(){if(this._sortedExtensionReps)return this._sortedExtensionReps;let e=[],t=(n,i)=>{var r,l;let o=n.state;if(2===o.id)return;let s=n.extension.name;0===o.id||M(300,s,i||"[unknown]"),0===(r=o).id||M(304,String(r.id),String(0)),n.state=o=Object.assign(r,{id:1});let a=this.outgoingConfigEdges.get(s);if(a)for(let e of a.keys()){let n=this.extensionNameMap.get(e);n&&t(n,s)}1===(l=o).id||M(305,String(l.id),String(1)),n.state=o=Object.assign(l,{id:2}),e.push(n)};for(let e of this.extensionNameMap.values())0===e.state.id&&t(e);for(let t of e)for(let[e,n]of this.outgoingConfigEdges.get(t.extension.name)||[])if(n.length>0){let t=this.extensionNameMap.get(e);if(t)for(let e of n)t.configs.add(e)}for(let[e,...t]of this.roots)if(t.length>0){let n=this.extensionNameMap.get(e.name);for(let i of(void 0===n&&M(301,e.name),t))n.configs.add(i)}return this._sortedExtensionReps=e,this._sortedExtensionReps}registerEditor(e){let t=this.sortedExtensionReps(),n=new AbortController,i=[()=>n.abort()],l=n.signal;for(let n of t){let t=n.register(e,l);t&&i.push(t)}for(let n of t){let t=n.afterRegistration(e);t&&i.push(t)}return(0,r.mergeRegister)(...i)}buildCreateEditorArgs(){let e={},t=new Set,n=new Map,i=new Map,r={},l={},o=this.sortedExtensionReps();for(let s of o){let{extension:o}=s;if(void 0!==o.onError&&(e.onError=o.onError),void 0!==o.disableEvents&&(e.disableEvents=o.disableEvents),void 0!==o.parentEditor&&(e.parentEditor=o.parentEditor),void 0!==o.editable&&(e.editable=o.editable),void 0!==o.namespace&&(e.namespace=o.namespace),void 0!==o.$initialEditorState&&(e.$initialEditorState=o.$initialEditorState),o.nodes){for(let e of("function"==typeof o.nodes?o.nodes():o.nodes)||[]){if("function"!=typeof e){let t=n.get(e.replace);t&&M(302,o.name,e.replace.name,t.extension.name),n.set(e.replace,s)}t.add(e)}}if(o.html){if(o.html.export)for(let[e,t]of o.html.export.entries())i.set(e,t);o.html.import&&Object.assign(r,o.html.import)}o.theme&&function e(t,n){if(t&&n&&!Array.isArray(n)&&"object"==typeof t&&"object"==typeof n){for(let i in n)t[i]=e(t[i],n[i]);return t}return n}(l,o.theme)}Object.keys(l).length>0&&(e.theme=l),t.size&&(e.nodes=[...t]);let s=Object.keys(r).length>0,a=i.size>0;for(let t of((s||a)&&(e.html={},s&&(e.html.import=r),a&&(e.html.export=i)),o))t.init(e);return e.onError||(e.onError=L),e}}function B(e,t){let n=K.fromEditor(e).extensionNameMap.get(t);return n?n.getExtensionDependency():void 0}let z=new Set,W=(0,i.defineExtension)({build(e,t,n){let r=n.getDependency(O).output,l=g({watchedNodeKeys:new Map}),o=b(()=>{},()=>N(()=>{let e=o.peek(),{watchedNodeKeys:t}=l.value,n,s=!1;r.value.read(()=>{if((0,i.$getSelection)())for(let[r,l]of t.entries()){if(0===l.size){t.delete(r);continue}let o=(0,i.$getNodeByKey)(r),a=o&&o.isSelected()||!1;s=s||a!==(!!e&&e.has(r)),a&&(n=n||new Set).add(r)}}),!s&&n&&e&&n.size===e.size||(o.value=n)}));return{watchNodeKey:function(e){let t=new y(()=>(o.value||z).has(e),void 0),{watchedNodeKeys:n}=l.peek(),i=n.get(e),r=void 0!==i;return(i=i||new Set).add(t),r||(n.set(e,i),l.value={watchedNodeKeys:n}),t}}},dependencies:[O],name:"@lexical/extension/NodeSelection"});(0,i.createCommand)("INSERT_HORIZONTAL_RULE_COMMAND");class j extends i.DecoratorNode{static getType(){return"horizontalrule"}static clone(e){return new j(e.__key)}static importJSON(e){return U().updateFromJSON(e)}static importDOM(){return{hr:()=>({conversion:Y,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(e){let t=document.createElement("hr");return(0,r.addClassNamesToElement)(t,e.theme.hr),t}getTextContent(){return"\n"}isInline(){return!1}updateDOM(){return!1}}function Y(){return{node:U()}}function U(){return(0,i.$create)(j)}(0,i.defineExtension)({dependencies:[O,W],name:"@lexical/extension/HorizontalRule",nodes:[j],register(e,t,n){let{watchNodeKey:l}=n.getDependency(W).output,o=g({nodeSelections:new Map}),a=e._config.theme.hrSelected??"selected";return(0,r.mergeRegister)(e.registerCommand(i.CLICK_COMMAND,e=>{if((0,i.isDOMNode)(e.target)){let t=(0,i.$getNodeFromDOMNode)(e.target);if(t instanceof j)return function(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,i.$getSelection)(),l=e.isSelected(),o=e.getKey();n&&(0,i.$isNodeSelection)(r)?t=r:(t=(0,i.$createNodeSelection)(),(0,i.$setSelection)(t)),l?t.delete(o):t.add(o)}(t,e.shiftKey),!0}return!1},i.COMMAND_PRIORITY_LOW),e.registerMutationListener(j,(t,n)=>{s(()=>{let n=!1,{nodeSelections:i}=o.peek();for(let[r,o]of t.entries())if("destroyed"===o)i.delete(r),n=!0;else{let t=i.get(r),o=e.getElementByKey(r);t?t.domNode.value=o:(n=!0,i.set(r,{domNode:g(o),selectedSignal:l(r)}))}n&&(o.value={nodeSelections:i})})}),N(()=>{let e=[];for(let{domNode:t,selectedSignal:n}of o.value.nodeSelections.values())e.push(N(()=>{let e=t.value;e&&(n.value?(0,r.addClassNamesToElement)(e,a):(0,r.removeClassNamesFromElement)(e,a))}));return(0,r.mergeRegister)(...e)}))}}),(0,i.defineExtension)({build:(e,t,n)=>T(t),config:(0,i.safeCast)({disabled:!1,maxIndent:null}),name:"@lexical/extension/TabIndentation",register(e,t,n){let{disabled:l,maxIndent:o}=n.getOutput();return N(()=>{if(!l.value)return(0,r.mergeRegister)(e.registerCommand(i.KEY_TAB_COMMAND,t=>{let n=(0,i.$getSelection)();if(!(0,i.$isRangeSelection)(n))return!1;t.preventDefault();let l=!function(e){let t=e.getNodes();if((0,r.$filter)(t,e=>(0,i.$isBlockElementNode)(e)&&e.canIndent()?e:null).length>0)return!0;let n=e.anchor,l=e.focus,o=l.isBefore(n)?l:n,s=o.getNode(),a=(0,r.$getNearestBlockElementAncestorOrThrow)(s);if(a.canIndent()){let e=a.getKey(),t=(0,i.$createRangeSelection)();if(t.anchor.set(e,0,"element"),t.focus.set(e,0,"element"),(t=(0,i.$normalizeSelection__EXPERIMENTAL)(t)).anchor.is(o))return!0}return!1}(n)?i.INSERT_TAB_COMMAND:t.shiftKey?i.OUTDENT_CONTENT_COMMAND:i.INDENT_CONTENT_COMMAND;return e.dispatchCommand(l,void 0)},i.COMMAND_PRIORITY_EDITOR),e.registerCommand(i.INDENT_CONTENT_COMMAND,()=>{let e="number"==typeof o?o:o?o.peek():null;if(null==e)return!1;let t=(0,i.$getSelection)();return!!(0,i.$isRangeSelection)(t)&&Math.max(...t.getNodes().map(e=>(0,r.$getNearestBlockElementAncestorOrThrow)(e).getIndent()))+1>=e},i.COMMAND_PRIORITY_CRITICAL))})}}),e.s(["LexicalBuilder",()=>K,"batch",()=>s,"effect",()=>N,"getPeerDependencyFromEditor",()=>B,"namedSignals",()=>T])},474131,558544,991036,98098,85968,e=>{"use strict";var t=e.i(268255);let n=(0,t.createContext)(null);function i(e,t){let n=null;return null!=e&&(n=e[1]),{getTheme:function(){return null!=t?t:null!=n?n.getTheme():null}}}function r(){let e=(0,t.useContext)(n);return null==e&&function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let r=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;for(let t of(l.append("code",e),n))l.append("v",t);throw r.search=l.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),e}e.s(["LexicalComposerContext",()=>n,"createLexicalComposerContext",()=>i,"useLexicalComposerContext",()=>r],558544);var l=e.i(717522),o=e.i(563199);let s="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement,a=s?t.useLayoutEffect:t.useEffect,u={tag:l.HISTORY_MERGE_TAG};function d(e){let{initialConfig:r,children:d}=e,c=(0,t.useMemo)(()=>{let{theme:e,namespace:t,nodes:n,onError:o,editorState:a,html:d}=r,c=i(null,e),f=(0,l.createEditor)({editable:r.editable,html:d,namespace:t,nodes:n,onError:e=>o(e,f),theme:e});return function(e,t){if(null!==t){if(void 0===t)e.update(()=>{let t=(0,l.$getRoot)();if(t.isEmpty()){let n=(0,l.$createParagraphNode)();t.append(n);let i=s?document.activeElement:null;(null!==(0,l.$getSelection)()||null!==i&&i===e.getRootElement())&&n.select()}},u);else if(null!==t)switch(typeof t){case"string":{let n=e.parseEditorState(t);e.setEditorState(n,u);break}case"object":e.setEditorState(t,u);break;case"function":e.update(()=>{(0,l.$getRoot)().isEmpty()&&t(e)},u)}}}(f,a),[f,c]},[]);return a(()=>{let e=r.editable,[t]=c;t.setEditable(void 0===e||e)},[]),(0,o.jsx)(n.Provider,{value:c,children:d})}function c(e){return()=>(function(e){if(!function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(e)return!1;let n=(0,l.$getRoot)().getTextContent();return t&&(n=n.trim()),""===n}(e,!1))return!1;let t=(0,l.$getRoot)().getChildren(),n=t.length;if(n>1)return!1;for(let e=0;e<n;e++){let n=t[e];if((0,l.$isDecoratorNode)(n))return!1;if((0,l.$isElementNode)(n)){if(!(0,l.$isParagraphNode)(n)||0!==n.__indent)return!1;let t=n.getChildren(),i=t.length;for(let n=0;n<i;n++){let n=t[e];if(!(0,l.$isTextNode)(n))return!1}}}return!0})(e)}e.s(["LexicalComposer",()=>d],474131),e.s(["$canShowPlaceholderCurry",()=>c],991036);var f=e.i(634020);let h="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement?t.useLayoutEffect:t.useEffect,g=(0,t.forwardRef)(function(e,n){let{editor:i,ariaActiveDescendant:r,ariaAutoComplete:l,ariaControls:s,ariaDescribedBy:a,ariaErrorMessage:u,ariaExpanded:d,ariaInvalid:c,ariaLabel:f,ariaLabelledBy:g,ariaMultiline:_,ariaOwns:p,ariaRequired:m,autoCapitalize:y,className:x,id:C,role:S="textbox",spellCheck:v=!0,style:N,tabIndex:T,"data-testid":E,...b}=e,[O,M]=(0,t.useState)(i.isEditable()),k=(0,t.useCallback)(e=>{e&&e.ownerDocument&&e.ownerDocument.defaultView?i.setRootElement(e):i.setRootElement(null)},[i]),w=(0,t.useMemo)(()=>(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{for(let n of t)"function"==typeof n?n(e):null!=n&&(n.current=e)}})(n,k),[k,n]);return h(()=>(M(i.isEditable()),i.registerEditableListener(e=>{M(e)})),[i]),(0,o.jsx)("div",{"aria-activedescendant":O?r:void 0,"aria-autocomplete":O?l:"none","aria-controls":O?s:void 0,"aria-describedby":a,...null!=u?{"aria-errormessage":u}:{},"aria-expanded":O&&"combobox"===S?!!d:void 0,...null!=c?{"aria-invalid":c}:{},"aria-label":f,"aria-labelledby":g,"aria-multiline":_,"aria-owns":O?p:void 0,"aria-readonly":!O||void 0,"aria-required":m,autoCapitalize:y,className:x,contentEditable:O,"data-testid":E,id:C,ref:w,role:S,spellCheck:v,style:N,tabIndex:T,...b})});function _(e){return e.getEditorState().read(c(e.isComposing()))}let p=(0,t.forwardRef)(function(e,t){let{placeholder:n,...i}=e,[l]=r();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g,{editor:l,...i,ref:t}),null!=n&&(0,o.jsx)(m,{editor:l,content:n})]})});function m(e){let{content:n,editor:i}=e,r=function(e){let[n,i]=(0,t.useState)(()=>_(e));return h(()=>{function t(){i(_(e))}return t(),(0,f.mergeRegister)(e.registerUpdateListener(()=>{t()}),e.registerEditableListener(()=>{t()}))},[e]),n}(i),[l,s]=(0,t.useState)(i.isEditable());if((0,t.useLayoutEffect)(()=>(s(i.isEditable()),i.registerEditableListener(e=>{s(e)})),[i]),!r)return null;let a=null;return"function"==typeof n?a=n(l):null!==n&&(a=n),null===a?null:(0,o.jsx)("div",{"aria-hidden":!0,children:a})}e.s(["ContentEditable",()=>p],98098);var y=t;let x=(0,y.createContext)(null),C={didCatch:!1,error:null};class S extends y.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=C}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let{error:i}=this.state;null!==i&&(this.props.onReset?.({args:t,reason:"imperative-api"}),this.setState(C))}componentDidCatch(e,t){this.props.onError?.(e,t)}componentDidUpdate(e,t){let{didCatch:n}=this.state,{resetKeys:i}=this.props;n&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some((e,n)=>!Object.is(e,t[n]))}(e.resetKeys,i)&&(this.props.onReset?.({next:i,prev:e.resetKeys,reason:"keys"}),this.setState(C))}render(){let{children:e,fallbackRender:t,FallbackComponent:n,fallback:i}=this.props,{didCatch:r,error:l}=this.state,o=e;if(r){let e={error:l,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)o=t(e);else if(n)o=(0,y.createElement)(n,e);else if(void 0!==i)o=i;else throw l}return(0,y.createElement)(x.Provider,{value:{didCatch:r,error:l,resetErrorBoundary:this.resetErrorBoundary}},o)}}function v(e){let{children:t,onError:n}=e;return(0,o.jsx)(S,{fallback:(0,o.jsx)("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:n,children:t})}e.s(["LexicalErrorBoundary",()=>v],85968)},806328,290301,199494,e=>{"use strict";var t=e.i(558544),n=e.i(969013),i=e.i(634020),r=e.i(717522);function l(e){e.undoStack=[],e.redoStack=[],e.current=null}function o(e,t,n){let o,s,a=(o=Date.now(),s=0,(t,i,l,a,u,d)=>{let c=Date.now();if(d.has(r.HISTORIC_TAG))return s=0,o=c,2;let f=function(e,t,n,i,l){if(null===e||0===n.size&&0===i.size&&!l)return 0;let o=t._selection,s=e._selection;if(l)return 1;if(!((0,r.$isRangeSelection)(o)&&(0,r.$isRangeSelection)(s)&&s.isCollapsed()&&o.isCollapsed()))return 0;let a=function(e,t,n){let i=e._nodeMap,l=[];for(let e of t){let t=i.get(e);void 0!==t&&l.push(t)}for(let[e,t]of n){if(!t)continue;let n=i.get(e);void 0===n||(0,r.$isRootNode)(n)||l.push(n)}return l}(t,n,i);if(0===a.length)return 0;if(a.length>1){let n=t._nodeMap,i=n.get(o.anchor.key),l=n.get(s.anchor.key);return i&&l&&!e._nodeMap.has(i.__key)&&(0,r.$isTextNode)(i)&&1===i.__text.length&&1===o.anchor.offset?2:0}let u=a[0],d=e._nodeMap.get(u.__key);if(!(0,r.$isTextNode)(d)||!(0,r.$isTextNode)(u)||d.__mode!==u.__mode)return 0;let c=d.__text,f=u.__text;if(c===f)return 0;let h=o.anchor,g=s.anchor;if(h.key!==g.key||"text"!==h.type)return 0;let _=h.offset,p=g.offset,m=f.length-c.length;return 1===m&&p===_-1?2:-1===m&&p===_+1?3:4*(-1===m&&p===_)}(t,i,a,u,e.isComposing()),h=(()=>{var h;let g,_,p,m,y=null===l||l.editor===e,x=d.has(r.HISTORY_PUSH_TAG);if(!x&&y&&d.has(r.HISTORY_MERGE_TAG))return 0;if(null===t)return 1;let C=i._selection;if(!(a.size>0||u.size>0))return 2*(null===C);let S="number"==typeof n?n:n.peek();return!1===x&&0!==f&&f===s&&c<o+S&&y?0:1!==a.size||(h=Array.from(a)[0],g=t._nodeMap.get(h),_=i._nodeMap.get(h),p=t._selection,m=i._selection,(0,r.$isRangeSelection)(p)&&(0,r.$isRangeSelection)(m)&&"element"===p.anchor.type&&"element"===p.focus.type&&"text"===m.anchor.type&&"text"===m.focus.type||!(0,r.$isTextNode)(g)||!(0,r.$isTextNode)(_)||g.__parent!==_.__parent||JSON.stringify(t.read(()=>g.exportJSON()))!==JSON.stringify(i.read(()=>_.exportJSON())))?1:0})();return o=c,s=f,h});return(0,i.mergeRegister)(e.registerCommand(r.UNDO_COMMAND,()=>((function(e,t){let n=t.redoStack,i=t.undoStack;if(0!==i.length){let l=t.current,o=i.pop();null!==l&&(n.push(l),e.dispatchCommand(r.CAN_REDO_COMMAND,!0)),0===i.length&&e.dispatchCommand(r.CAN_UNDO_COMMAND,!1),t.current=o||null,o&&o.editor.setEditorState(o.editorState,{tag:r.HISTORIC_TAG})}})(e,t),!0),r.COMMAND_PRIORITY_EDITOR),e.registerCommand(r.REDO_COMMAND,()=>((function(e,t){let n=t.redoStack,i=t.undoStack;if(0!==n.length){let l=t.current;null!==l&&(i.push(l),e.dispatchCommand(r.CAN_UNDO_COMMAND,!0));let o=n.pop();0===n.length&&e.dispatchCommand(r.CAN_REDO_COMMAND,!1),t.current=o||null,o&&o.editor.setEditorState(o.editorState,{tag:r.HISTORIC_TAG})}})(e,t),!0),r.COMMAND_PRIORITY_EDITOR),e.registerCommand(r.CLEAR_EDITOR_COMMAND,()=>(l(t),!1),r.COMMAND_PRIORITY_EDITOR),e.registerCommand(r.CLEAR_HISTORY_COMMAND,()=>(l(t),e.dispatchCommand(r.CAN_REDO_COMMAND,!1),e.dispatchCommand(r.CAN_UNDO_COMMAND,!1),!0),r.COMMAND_PRIORITY_EDITOR),e.registerUpdateListener(n=>{let{editorState:i,prevEditorState:l,dirtyLeaves:o,dirtyElements:s,tags:u}=n,d=t.current,c=t.redoStack,f=t.undoStack,h=null===d?null:d.editorState;if(null!==d&&i===h)return;let g=a(l,i,d,o,s,u);if(1===g)0!==c.length&&(t.redoStack=[],e.dispatchCommand(r.CAN_REDO_COMMAND,!1)),null!==d&&(f.push({...d}),e.dispatchCommand(r.CAN_UNDO_COMMAND,!0));else if(2===g)return;t.current={editor:e,editorState:i}}))}function s(){return{current:null,redoStack:[],undoStack:[]}}let a=(0,r.defineExtension)({build:(e,t)=>{let{delay:i,createInitialHistoryState:r,disabled:l}=t;return(0,n.namedSignals)({delay:i,disabled:l,historyState:r(e)})},config:(0,r.safeCast)({createInitialHistoryState:s,delay:300,disabled:"u"<typeof window}),name:"@lexical/history/History",register:(e,t,i)=>{let r=i.getOutput();return(0,n.effect)(()=>r.disabled.value?void 0:o(e,r.historyState.value,r.delay))}});(0,r.defineExtension)({dependencies:[(0,r.configExtension)(a,{createInitialHistoryState:()=>{throw Error("SharedHistory did not inherit parent history")},disabled:!0})],name:"@lexical/history/SharedHistory",register(e,t,i){var r;let{output:l}=i.getDependency(a),o=(r=e._parentEditor)?(0,n.getPeerDependencyFromEditor)(r,a.name):null;if(!o)return()=>{};let s=o.output;return(0,n.effect)(()=>(0,n.batch)(()=>{l.delay.value=s.delay.value,l.historyState.value=s.historyState.value,l.disabled.value=s.disabled.value}))}});var u=e.i(268255);function d(e){let{delay:n,externalHistoryState:i}=e,[r]=(0,t.useLexicalComposerContext)();return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=(0,u.useMemo)(()=>t||s(),[t]);(0,u.useEffect)(()=>o(e,i,n),[n,e,i])}(r,i,n),null}e.s(["HistoryPlugin",()=>d],806328);let c="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement?u.useLayoutEffect:u.useEffect;function f(e){let{ignoreHistoryMergeTagChange:n=!0,ignoreSelectionChange:i=!1,onChange:l}=e,[o]=(0,t.useLexicalComposerContext)();return c(()=>{if(l)return o.registerUpdateListener(e=>{let{editorState:t,dirtyElements:s,dirtyLeaves:a,prevEditorState:u,tags:d}=e;i&&0===s.size&&0===a.size||n&&d.has(r.HISTORY_MERGE_TAG)||u.isEmpty()||l(t,o,d)})},[o,n,i,l]),null}e.s(["OnChangePlugin",()=>f],290301);let h="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement?u.useLayoutEffect:u.useEffect;function g(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}let _=(0,r.defineExtension)({name:"@lexical/react/ReactProvider"});var p=e.i(688393),m=e.i(563199),y=e.i(991036);function x(e){let t=window.location.origin,n=n=>{if(n.origin!==t)return;let i=e.getRootElement();if(document.activeElement!==i)return;let l=n.data;if("string"==typeof l){let t;try{t=JSON.parse(l)}catch(e){return}if(t&&"nuanria_messaging"===t.protocol&&"request"===t.type){let i=t.payload;if(i&&"makeChanges"===i.functionId){let t=i.args;if(t){let[i,l,o,s,a]=t;e.update(()=>{let e=(0,r.$getSelection)();if((0,r.$isRangeSelection)(e)){let t=e.anchor,u=t.getNode(),d=0,c=0;if((0,r.$isTextNode)(u)&&i>=0&&l>=0&&(d=i,c=i+l,e.setTextNodeRange(u,d,u,c)),d===c&&""===o||(e.insertRawText(o),u=t.getNode()),(0,r.$isTextNode)(u)){d=s,c=s+a;let t=u.getTextContentSize();d=d>t?t:d,c=c>t?t:c,e.setTextNodeRange(u,d,u,c)}n.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}}let C=(0,r.defineExtension)({build:(e,t,i)=>(0,n.namedSignals)(t),config:(0,r.safeCast)({disabled:"u"<typeof window}),name:"@lexical/dragon",register:(e,t,i)=>(0,n.effect)(()=>i.getOutput().disabled.value?void 0:x(e))});var S=e.i(824740);let v=new Set(["STYLE","SCRIPT"]);function N(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let r=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;for(let t of(l.append("code",e),n))l.append("v",t);throw r.search=l.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function T(e,t,n){let i=e.getData("application/x-lexical-editor");if(i)try{let e=JSON.parse(i);if(e.namespace===n._config.namespace&&Array.isArray(e.nodes))return E(n,function(e){let t=[];for(let n=0;n<e.length;n++){let i=e[n],l=(0,r.$parseSerializedNode)(i);(0,r.$isTextNode)(l)&&(0,S.$addNodeStyle)(l),t.push(l)}return t}(e.nodes),t)}catch(e){console.error(e)}let l=e.getData("text/html"),o=e.getData("text/plain");if(l&&o!==l)try{let e=(new DOMParser).parseFromString(window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:e=>e}).createHTML(l):l,"text/html");return E(n,function(e,t){let n=(0,r.isDOMDocumentNode)(t)?t.body.childNodes:t.childNodes,i=[],l=[];for(let t of n)if(!v.has(t.nodeName)){let n=function e(t,n,i,l){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Map,s=arguments.length>5?arguments[5]:void 0,a=[];if(v.has(t.nodeName))return a;let u=null,d=function(e,t){let{nodeName:n}=e,i=t._htmlConversions.get(n.toLowerCase()),r=null;if(void 0!==i)for(let t of i){let n=t(e);null!==n&&(null===r||(r.priority||0)<=(n.priority||0))&&(r=n)}return null!==r?r.conversion:null}(t,n),c=d?d(t):null,f=null;if(null!==c){f=c.after;let e=c.node;if(null!==(u=Array.isArray(e)?e[e.length-1]:e)){for(let[,e]of o)if(!(u=e(u,s)))break;u&&a.push(...Array.isArray(e)?e:[u])}null!=c.forChild&&o.set(t.nodeName,c.forChild)}let h=t.childNodes,g=[],_=(null==u||!(0,r.$isRootOrShadowRoot)(u))&&(null!=u&&(0,r.$isBlockElementNode)(u)||l);for(let t=0;t<h.length;t++)g.push(...e(h[t],n,i,_,new Map(o),u));return null!=f&&(g=f(g)),(0,r.isBlockDomNode)(t)&&(g=function(e,t,n){let i=e.style.textAlign,l=[],o=[];for(let e=0;e<t.length;e++){let s=t[e];if((0,r.$isBlockElementNode)(s))i&&!s.getFormat()&&s.setFormat(i),l.push(s);else if(o.push(s),e===t.length-1||e<t.length-1&&(0,r.$isBlockElementNode)(t[e+1])){let e=n();e.setFormat(i),e.append(...o),l.push(e),o=[]}}return l}(t,g,_?()=>{let e=new r.ArtificialNode__DO_NOT_USE;return i.push(e),e}:r.$createParagraphNode)),null==u?g.length>0?a=a.concat(g):(0,r.isBlockDomNode)(t)&&null!=t.nextSibling&&null!=t.previousSibling&&(0,r.isInlineDomNode)(t.nextSibling)&&(0,r.isInlineDomNode)(t.previousSibling)&&(a=a.concat((0,r.$createLineBreakNode)())):(0,r.$isElementNode)(u)&&u.append(...g),a}(t,e,l,!1);null!==n&&(i=i.concat(n))}return function(e){for(let t of e)t.getNextSibling()instanceof r.ArtificialNode__DO_NOT_USE&&t.insertAfter((0,r.$createLineBreakNode)());for(let t of e){for(let e of t.getChildren())t.insertBefore(e);t.remove()}}(l),i}(n,e),t)}catch(e){console.error(e)}let s=o||e.getData("text/uri-list");if(null!=s)if((0,r.$isRangeSelection)(t)){let e=s.split(/(\r?\n|\t)/);""===e[e.length-1]&&e.pop();for(let t=0;t<e.length;t++){let n=(0,r.$getSelection)();if((0,r.$isRangeSelection)(n)){let i=e[t];"\n"===i||"\r\n"===i?n.insertParagraph():"	"===i?n.insertNodes([(0,r.$createTabNode)()]):n.insertText(i)}}}else t.insertRawText(s)}function E(e,t,n){e.dispatchCommand(r.SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,{nodes:t,selection:n})||(n.insertNodes(t),function(e){if((0,r.$isRangeSelection)(e)&&e.isCollapsed()){let t=e.anchor,n=null,i=(0,r.$caretFromPoint)(t,"previous");if(i)if((0,r.$isTextPointCaret)(i))n=i.origin;else for(let e of(0,r.$getCaretRange)(i,(0,r.$getChildCaret)((0,r.$getRoot)(),"next").getFlipped())){if((0,r.$isTextNode)(e.origin)){n=e.origin;break}if((0,r.$isElementNode)(e.origin)&&!e.origin.isInline())break}if(n&&(0,r.$isTextNode)(n)){let t=n.getFormat(),i=n.getStyle();e.format===t&&e.style===i||(e.format=t,e.style=i,e.dirty=!0)}}}(n))}let b=null;async function O(e,t,n){if(null!==b)return!1;if(null!==t)return new Promise((i,r)=>{e.update(()=>{i(M(e,t,n))})});let l=e.getRootElement(),o=e._window||window,s=o.document,a=(0,r.getDOMSelection)(o);if(null===l||null===a)return!1;let u=s.createElement("span");u.style.cssText="position: fixed; top: -1000px;",u.append(s.createTextNode("#")),l.append(u);let d=new Range;return d.setStart(u,0),d.setEnd(u,1),a.removeAllRanges(),a.addRange(d),new Promise((t,l)=>{let a=e.registerCommand(r.COPY_COMMAND,r=>((0,i.objectKlassEquals)(r,ClipboardEvent)&&(a(),null!==b&&(o.clearTimeout(b),b=null),t(M(e,r,n))),!0),r.COMMAND_PRIORITY_CRITICAL);b=o.setTimeout(()=>{a(),b=null,t(!1)},50),s.execCommand("copy"),u.remove()})}function M(e,t,n){if(void 0===n){let t=(0,r.getDOMSelection)(e._window),i=(0,r.$getSelection)();if(!i||i.isCollapsed()||!t)return!1;let l=t.anchorNode,o=t.focusNode;if(null!==l&&null!==o&&!(0,r.isSelectionWithinEditor)(e,l,o))return!1;n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.$getSelection)(),t={"text/plain":e?e.getTextContent():""};if(e){let n=(0,r.$getEditor)();for(let[i,r]of k){let l=r(n,e);null!==l&&(t[i]=l)}}return t}(i)}t.preventDefault();let i=t.clipboardData;return null!==i&&(function(e,t){for(let[n]of k)void 0===t[n]&&e.setData(n,"");for(let n in t){let i=t[n];void 0!==i&&e.setData(n,i)}}(i,n),!0)}let k=[["text/html",function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,r.$getSelection)();return null==n&&N(166),(0,r.$isRangeSelection)(n)&&n.isCollapsed()||0===n.getNodes().length?"":function(t,n){if("u"<typeof document||"u"<typeof window&&void 0===e.g.window)throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let i=document.createElement("div"),l=(0,r.$getRoot)().getChildren();for(let e=0;e<l.length;e++)!function e(t,n,i){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=null===l||n.isSelected(l),s=(0,r.$isElementNode)(n)&&n.excludeFromCopy("html"),a=n;null!==l&&(0,r.$isTextNode)(n)&&(a=(0,S.$sliceSelectedTextNodeContent)(l,n,"clone"));let u=(0,r.$isElementNode)(a)?a.getChildren():[],d=(0,r.getRegisteredNode)(t,a.getType()),{element:c,after:f}=d&&void 0!==d.exportDOM?d.exportDOM(t,a):a.exportDOM(t);if(!c)return!1;let h=document.createDocumentFragment();for(let i=0;i<u.length;i++){let s=u[i],a=e(t,s,h,l);!o&&(0,r.$isElementNode)(n)&&a&&n.extractWithChild(s,l,"html")&&(o=!0)}if(o&&!s){if(((0,r.isHTMLElement)(c)||(0,r.isDocumentFragment)(c))&&c.append(h),i.append(c),f){let e=f.call(a,c);e&&((0,r.isDocumentFragment)(c)?c.replaceChildren(e):c.replaceWith(e))}}else i.append(h);return o}(t,l[e],i,n);return i.innerHTML}(t,n)}],["application/x-lexical-editor",function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,r.$getSelection)();return null==t&&N(166),(0,r.$isRangeSelection)(t)&&t.isCollapsed()||0===t.getNodes().length?null:JSON.stringify(function(e,t){let n=[],i=(0,r.$getRoot)().getChildren();for(let l=0;l<i.length;l++)!function e(t,n,i){var l;let o,s,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],u=null===n||i.isSelected(n),d=(0,r.$isElementNode)(i)&&i.excludeFromCopy("html"),c=i;null!==n&&(0,r.$isTextNode)(c)&&(c=(0,S.$sliceSelectedTextNodeContent)(n,c,"clone"));let f=(0,r.$isElementNode)(c)?c.getChildren():[],h=(o=(l=c).exportJSON(),s=l.constructor,o.type!==s.getType()&&N(58,s.name),(0,r.$isElementNode)(l)&&(Array.isArray(o.children)||N(59,s.name)),o);(0,r.$isTextNode)(c)&&0===c.getTextContentSize()&&(u=!1);for(let l=0;l<f.length;l++){let o=f[l],s=e(t,n,o,h.children);!u&&(0,r.$isElementNode)(i)&&s&&i.extractWithChild(o,n,"clone")&&(u=!0)}if(u&&!d)a.push(h);else if(Array.isArray(h.children))for(let e=0;e<h.children.length;e++){let t=h.children[e];a.push(t)}return u}(e,t,i[l],n);return{namespace:e._config.namespace,nodes:n}}(e,t))}]];var w=r;function A(e,t){if(void 0!==document.caretRangeFromPoint){let n=document.caretRangeFromPoint(e,t);return null===n?null:{node:n.startContainer,offset:n.startOffset}}if("undefined"!==document.caretPositionFromPoint){let n=document.caretPositionFromPoint(e,t);return null===n?null:{node:n.offsetNode,offset:n.offset}}return null}let D="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement,R=D&&"documentMode"in document?document.documentMode:null,P=D&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),I=!(!D||!("InputEvent"in window)||R)&&"getTargetRanges"in new window.InputEvent("input"),L=D&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),F=D&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,$=D&&/^(?=.*Chrome).*/i.test(navigator.userAgent),K=D&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&P&&!$,B=(0,w.createCommand)("DRAG_DROP_PASTE_FILE");class z extends w.ElementNode{static getType(){return"quote"}static clone(e){return new z(e.__key)}createDOM(e){let t=document.createElement("blockquote");return(0,i.addClassNamesToElement)(t,e.theme.quote),t}updateDOM(e,t){return!1}static importDOM(){return{blockquote:e=>({conversion:J,priority:0})}}exportDOM(e){let{element:t}=super.exportDOM(e);if((0,w.isHTMLElement)(t)){this.isEmpty()&&t.append(document.createElement("br"));let e=this.getFormatType();e&&(t.style.textAlign=e);let n=this.getDirection();n&&(t.dir=n)}return{element:t}}static importJSON(e){return W().updateFromJSON(e)}insertNewAfter(e,t){let n=(0,w.$createParagraphNode)(),i=this.getDirection();return n.setDirection(i),this.insertAfter(n,t),n}collapseAtStart(){let e=(0,w.$createParagraphNode)();return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}canMergeWhenEmpty(){return!0}}function W(){return(0,w.$applyNodeReplacement)(new z)}class j extends w.ElementNode{__tag;static getType(){return"heading"}static clone(e){return new j(e.__tag,e.__key)}constructor(e,t){super(t),this.__tag=e}getTag(){return this.__tag}setTag(e){let t=this.getWritable();return this.__tag=e,t}createDOM(e){let t=this.__tag,n=document.createElement(t),r=e.theme.heading;if(void 0!==r){let e=r[t];(0,i.addClassNamesToElement)(n,e)}return n}updateDOM(e,t,n){return e.__tag!==this.__tag}static importDOM(){return{h1:e=>({conversion:U,priority:0}),h2:e=>({conversion:U,priority:0}),h3:e=>({conversion:U,priority:0}),h4:e=>({conversion:U,priority:0}),h5:e=>({conversion:U,priority:0}),h6:e=>({conversion:U,priority:0}),p:e=>{let t=e.firstChild;return null!==t&&Y(t)?{conversion:()=>({node:null}),priority:3}:null},span:e=>Y(e)?{conversion:e=>({node:H("h1")}),priority:3}:null}}exportDOM(e){let{element:t}=super.exportDOM(e);if((0,w.isHTMLElement)(t)){this.isEmpty()&&t.append(document.createElement("br"));let e=this.getFormatType();e&&(t.style.textAlign=e);let n=this.getDirection();n&&(t.dir=n)}return{element:t}}static importJSON(e){return H(e.tag).updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTag(e.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=e?e.anchor.offset:0,i=this.getLastDescendant(),r=i&&(!e||e.anchor.key!==i.getKey()||n!==i.getTextContentSize())&&e?H(this.getTag()):(0,w.$createParagraphNode)(),l=this.getDirection();if(r.setDirection(l),this.insertAfter(r,t),0===n&&!this.isEmpty()&&e){let e=(0,w.$createParagraphNode)();e.select(),this.replace(e,!0)}return r}collapseAtStart(){let e=this.isEmpty()?(0,w.$createParagraphNode)():H(this.getTag());return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}extractWithChild(){return!0}}function Y(e){return"span"===e.nodeName.toLowerCase()&&"26pt"===e.style.fontSize}function U(e){let t=e.nodeName.toLowerCase(),n=null;return"h1"!==t&&"h2"!==t&&"h3"!==t&&"h4"!==t&&"h5"!==t&&"h6"!==t||(n=H(t),null!==e.style&&((0,w.setNodeIndentFromDOM)(e,n),n.setFormat(e.style.textAlign))),{node:n}}function J(e){let t=W();return null!==e.style&&(t.setFormat(e.style.textAlign),(0,w.setNodeIndentFromDOM)(e,t)),{node:t}}function H(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"h1";return(0,w.$applyNodeReplacement)(new j(e))}function V(e){let t=null;if((0,i.objectKlassEquals)(e,DragEvent)?t=e.dataTransfer:(0,i.objectKlassEquals)(e,ClipboardEvent)&&(t=e.clipboardData),null===t)return[!1,[],!1];let n=t.types,r=n.includes("Files"),l=n.includes("text/html")||n.includes("text/plain");return[r,Array.from(t.files),l]}function G(e){let t=(0,w.$getSelection)();if(!(0,w.$isRangeSelection)(t))return!1;let n=new Set,i=t.getNodes();for(let t=0;t<i.length;t++){let r=i[t],l=r.getKey();if(n.has(l))continue;let o=(0,w.$findMatchingParent)(r,e=>(0,w.$isElementNode)(e)&&!e.isInline());if(null===o)continue;let s=o.getKey();o.canIndent()&&!n.has(s)&&(n.add(s),e(o))}return n.size>0}function q(e){let t=(0,w.$getNearestNodeFromDOMNode)(e);return(0,w.$isDecoratorNode)(t)}function X(e){for(let t of["lowercase","uppercase","capitalize"])e.hasFormat(t)&&e.toggleFormat(t)}function Z(e){return(0,i.mergeRegister)(e.registerCommand(w.CLICK_COMMAND,e=>{let t=(0,w.$getSelection)();return!!(0,w.$isNodeSelection)(t)&&(t.clear(),!0)},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.DELETE_CHARACTER_COMMAND,e=>{let t=(0,w.$getSelection)();return(0,w.$isRangeSelection)(t)?(t.deleteCharacter(e),!0):!!(0,w.$isNodeSelection)(t)&&(t.deleteNodes(),!0)},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.DELETE_WORD_COMMAND,e=>{let t=(0,w.$getSelection)();return!!(0,w.$isRangeSelection)(t)&&(t.deleteWord(e),!0)},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.DELETE_LINE_COMMAND,e=>{let t=(0,w.$getSelection)();return!!(0,w.$isRangeSelection)(t)&&(t.deleteLine(e),!0)},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.CONTROLLED_TEXT_INSERTION_COMMAND,t=>{let n=(0,w.$getSelection)();if("string"==typeof t)null!==n&&n.insertText(t);else{if(null===n)return!1;let i=t.dataTransfer;if(null!=i)T(i,n,e);else if((0,w.$isRangeSelection)(n)){let e=t.data;return e&&n.insertText(e),!0}}return!0},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.REMOVE_TEXT_COMMAND,()=>{let e=(0,w.$getSelection)();return!!(0,w.$isRangeSelection)(e)&&(e.removeText(),!0)},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.FORMAT_TEXT_COMMAND,e=>{let t=(0,w.$getSelection)();return!!(0,w.$isRangeSelection)(t)&&(t.formatText(e),!0)},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.FORMAT_ELEMENT_COMMAND,e=>{let t=(0,w.$getSelection)();if(!(0,w.$isRangeSelection)(t)&&!(0,w.$isNodeSelection)(t))return!1;for(let n of t.getNodes()){let t=(0,w.$findMatchingParent)(n,e=>(0,w.$isElementNode)(e)&&!e.isInline());null!==t&&t.setFormat(e)}return!0},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.INSERT_LINE_BREAK_COMMAND,e=>{let t=(0,w.$getSelection)();return!!(0,w.$isRangeSelection)(t)&&(t.insertLineBreak(e),!0)},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.INSERT_PARAGRAPH_COMMAND,()=>{let e=(0,w.$getSelection)();return!!(0,w.$isRangeSelection)(e)&&(e.insertParagraph(),!0)},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.INSERT_TAB_COMMAND,()=>((0,w.$insertNodes)([(0,w.$createTabNode)()]),!0),w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.INDENT_CONTENT_COMMAND,()=>G(e=>{let t=e.getIndent();e.setIndent(t+1)}),w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.OUTDENT_CONTENT_COMMAND,()=>G(e=>{let t=e.getIndent();t>0&&e.setIndent(Math.max(0,t-1))}),w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.KEY_ARROW_UP_COMMAND,e=>{let t=(0,w.$getSelection)();if((0,w.$isNodeSelection)(t)){let n=t.getNodes();if(n.length>0)return e.preventDefault(),n[0].selectPrevious(),!0}else if((0,w.$isRangeSelection)(t)){let n=(0,w.$getAdjacentNode)(t.focus,!0);if(!e.shiftKey&&(0,w.$isDecoratorNode)(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),e.preventDefault(),!0}return!1},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.KEY_ARROW_DOWN_COMMAND,e=>{let t=(0,w.$getSelection)();if((0,w.$isNodeSelection)(t)){let n=t.getNodes();if(n.length>0)return e.preventDefault(),n[0].selectNext(0,0),!0}else if((0,w.$isRangeSelection)(t)){let n;if("root"===(n=t.focus).key&&n.offset===(0,w.$getRoot)().getChildrenSize())return e.preventDefault(),!0;let i=(0,w.$getAdjacentNode)(t.focus,!1);if(!e.shiftKey&&(0,w.$isDecoratorNode)(i)&&!i.isIsolated()&&!i.isInline())return i.selectNext(),e.preventDefault(),!0}return!1},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.KEY_ARROW_LEFT_COMMAND,e=>{let t=(0,w.$getSelection)();if((0,w.$isNodeSelection)(t)){let n=t.getNodes();if(n.length>0)return e.preventDefault(),(0,S.$isParentRTL)(n[0])?n[0].selectNext(0,0):n[0].selectPrevious(),!0}if(!(0,w.$isRangeSelection)(t))return!1;if((0,S.$shouldOverrideDefaultCharacterSelection)(t,!0)){let n=e.shiftKey;return e.preventDefault(),(0,S.$moveCharacter)(t,n,!0),!0}return!1},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.KEY_ARROW_RIGHT_COMMAND,e=>{let t=(0,w.$getSelection)();if((0,w.$isNodeSelection)(t)){let n=t.getNodes();if(n.length>0)return e.preventDefault(),(0,S.$isParentRTL)(n[0])?n[0].selectPrevious():n[0].selectNext(0,0),!0}if(!(0,w.$isRangeSelection)(t))return!1;let n=e.shiftKey;return!!(0,S.$shouldOverrideDefaultCharacterSelection)(t,!1)&&(e.preventDefault(),(0,S.$moveCharacter)(t,n,!1),!0)},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.KEY_BACKSPACE_COMMAND,t=>{if(q(t.target))return!1;let n=(0,w.$getSelection)();if((0,w.$isRangeSelection)(n)){if(function(e){if(!e.isCollapsed())return!1;let{anchor:t}=e;if(0!==t.offset)return!1;let n=t.getNode();if((0,w.$isRootNode)(n))return!1;let r=(0,i.$getNearestBlockElementAncestorOrThrow)(n);return r.getIndent()>0&&(r.is(n)||n.is(r.getFirstDescendant()))}(n))return t.preventDefault(),e.dispatchCommand(w.OUTDENT_CONTENT_COMMAND,void 0);if(F&&"ko-KR"===navigator.language)return!1}else if(!(0,w.$isNodeSelection)(n))return!1;return t.preventDefault(),e.dispatchCommand(w.DELETE_CHARACTER_COMMAND,!0)},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.KEY_DELETE_COMMAND,t=>{if(q(t.target))return!1;let n=(0,w.$getSelection)();return!(!(0,w.$isRangeSelection)(n)&&!(0,w.$isNodeSelection)(n))&&(t.preventDefault(),e.dispatchCommand(w.DELETE_CHARACTER_COMMAND,!1))},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.KEY_ENTER_COMMAND,t=>{let n=(0,w.$getSelection)();if(!(0,w.$isRangeSelection)(n))return!1;if(X(n),null!==t){if((F||L||K)&&I)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(w.INSERT_LINE_BREAK_COMMAND,!1)}return e.dispatchCommand(w.INSERT_PARAGRAPH_COMMAND,void 0)},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.KEY_ESCAPE_COMMAND,()=>{let t=(0,w.$getSelection)();return!!(0,w.$isRangeSelection)(t)&&(e.blur(),!0)},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.DROP_COMMAND,t=>{let[,n]=V(t);if(n.length>0){let i=A(t.clientX,t.clientY);if(null!==i){let{offset:t,node:r}=i,l=(0,w.$getNearestNodeFromDOMNode)(r);if(null!==l){let e=(0,w.$createRangeSelection)();if((0,w.$isTextNode)(l))e.anchor.set(l.getKey(),t,"text"),e.focus.set(l.getKey(),t,"text");else{let t=l.getParentOrThrow().getKey(),n=l.getIndexWithinParent()+1;e.anchor.set(t,n,"element"),e.focus.set(t,n,"element")}let n=(0,w.$normalizeSelection__EXPERIMENTAL)(e);(0,w.$setSelection)(n)}e.dispatchCommand(B,n)}return t.preventDefault(),!0}let i=(0,w.$getSelection)();return!!(0,w.$isRangeSelection)(i)},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.DRAGSTART_COMMAND,e=>{let[t]=V(e),n=(0,w.$getSelection)();return!(t&&!(0,w.$isRangeSelection)(n))},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.DRAGOVER_COMMAND,e=>{let[t]=V(e),n=(0,w.$getSelection)();if(t&&!(0,w.$isRangeSelection)(n))return!1;let i=A(e.clientX,e.clientY);if(null!==i){let t=(0,w.$getNearestNodeFromDOMNode)(i.node);(0,w.$isDecoratorNode)(t)&&e.preventDefault()}return!0},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.SELECT_ALL_COMMAND,()=>((0,w.$selectAll)(),!0),w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.COPY_COMMAND,t=>(O(e,(0,i.objectKlassEquals)(t,ClipboardEvent)?t:null),!0),w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.CUT_COMMAND,t=>((async function(e,t){await O(t,(0,i.objectKlassEquals)(e,ClipboardEvent)?e:null),t.update(()=>{let e=(0,w.$getSelection)();(0,w.$isRangeSelection)(e)?e.removeText():(0,w.$isNodeSelection)(e)&&e.getNodes().forEach(e=>e.remove())})})(t,e),!0),w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.PASTE_COMMAND,t=>{let[,n,r]=V(t);return n.length>0&&!r?(e.dispatchCommand(B,n),!0):!((0,w.isDOMNode)(t.target)&&(0,w.isSelectionCapturedInDecoratorInput)(t.target))&&null!==(0,w.$getSelection)()&&(t.preventDefault(),e.update(()=>{let n=(0,w.$getSelection)(),r=(0,i.objectKlassEquals)(t,InputEvent)||(0,i.objectKlassEquals)(t,KeyboardEvent)?null:t.clipboardData;null!=r&&null!==n&&T(r,n,e)},{tag:w.PASTE_TAG}),!0)},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.KEY_SPACE_COMMAND,e=>{let t=(0,w.$getSelection)();return(0,w.$isRangeSelection)(t)&&X(t),!1},w.COMMAND_PRIORITY_EDITOR),e.registerCommand(w.KEY_TAB_COMMAND,e=>{let t=(0,w.$getSelection)();return(0,w.$isRangeSelection)(t)&&X(t),!1},w.COMMAND_PRIORITY_EDITOR))}(0,w.defineExtension)({conflictsWith:["@lexical/plain-text"],dependencies:[C],name:"@lexical/rich-text",nodes:[j,z],register:Z});let Q="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement?u.useLayoutEffect:u.useEffect;function ee(e){let{editor:t,ErrorBoundary:n}=e;return function(e,t){let[n,i]=(0,u.useState)(()=>e.getDecorators());return Q(()=>e.registerDecoratorListener(e=>{(0,p.flushSync)(()=>{i(e)})}),[e]),(0,u.useEffect)(()=>{i(e.getDecorators())},[e]),(0,u.useMemo)(()=>{let i=[],r=Object.keys(n);for(let l=0;l<r.length;l++){let o=r[l],s=(0,m.jsx)(t,{onError:t=>e._onError(t),children:(0,m.jsx)(u.Suspense,{fallback:null,children:n[o]})}),a=e.getElementByKey(o);null!==a&&i.push((0,p.createPortal)(s,a,o))}return i},[t,n,e])}(t,n)}function et(e){let{editor:t,ErrorBoundary:i}=e;return!function(e){let t=n.LexicalBuilder.maybeFromEditor(e);if(t&&t.hasExtensionByName(_.name)){for(let e of["@lexical/plain-text","@lexical/rich-text"])t.hasExtensionByName(e)&&function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let r=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;for(let t of(l.append("code",e),n))l.append("v",t);throw r.search=l.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(320,e);return!0}return!1}(t)?(0,m.jsx)(ee,{editor:t,ErrorBoundary:i}):null}function en(e){return e.getEditorState().read((0,y.$canShowPlaceholderCurry)(e.isComposing()))}function ei(e){var n;let{contentEditable:r,placeholder:l=null,ErrorBoundary:o}=e,[s]=(0,t.useLexicalComposerContext)();return Q(()=>(0,i.mergeRegister)(Z(n),x(n)),[n=s]),(0,m.jsxs)(m.Fragment,{children:[r,(0,m.jsx)(er,{content:l}),(0,m.jsx)(et,{editor:s,ErrorBoundary:o})]})}function er(e){let{content:n}=e,[r]=(0,t.useLexicalComposerContext)(),l=function(e){let[t,n]=(0,u.useState)(()=>en(e));return Q(()=>{function t(){n(en(e))}return t(),(0,i.mergeRegister)(e.registerUpdateListener(()=>{t()}),e.registerEditableListener(()=>{t()}))},[e]),t}(r),o=function(e){let[n]=(0,t.useLexicalComposerContext)(),i=(0,u.useMemo)(()=>e(n),[n,e]),[r,l]=(0,u.useState)(()=>i.initialValueFn()),o=(0,u.useRef)(r);return h(()=>{let{initialValueFn:e,subscribe:t}=i,n=e();return o.current!==n&&(o.current=n,l(n)),t(e=>{o.current=e,l(e)})},[i,e]),r}(g);return l?"function"==typeof n?n(o):n:null}e.s(["RichTextPlugin",()=>ei],199494)},729009,e=>{"use strict";var t=e.i(563199),n=e.i(268255);e.i(152567);var i=e.i(408767),r=e.i(935139);let l=(0,n.memo)(e=>{let{compact:n,value:l,className:o}=e,{t:s}=(0,i.useTranslation)();return(0,t.jsx)("div",{className:(0,r.cn)("pointer-events-none absolute left-0 top-0 h-full w-full select-none text-sm text-components-input-text-placeholder",n?"text-[13px] leading-5":"text-sm leading-6",o),children:l||s("promptEditor.placeholder",{ns:"common"})})});e.s(["default",0,l])},238702,e=>{"use strict";function t(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let r=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;for(let t of(l.append("code",e),n))l.append("v",t);throw r.search=l.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function n(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let r=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;for(let t of(l.append("code",e),n))l.append("v",t);r.search=l.toString(),console.warn(`Minified Lexical warning #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let i="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement,r=i&&"documentMode"in document?document.documentMode:null,l=i&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),o=i&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),s=!(!i||!("InputEvent"in window)||r)&&"getTargetRanges"in new window.InputEvent("input"),a=i&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),u=i&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,d=(i&&/Android/.test(navigator.userAgent),i&&/^(?=.*Chrome).*/i.test(navigator.userAgent)),c=i&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&l&&!d;function f(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=[];for(let e of t)if(e&&"string"==typeof e)for(let[t]of e.matchAll(/\S+/g))i.push(t);return i}let h=a||u||c?" ":"​",g="֑-߿יִ-﷽ﹰ-ﻼ",_="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",p=(RegExp("^[^"+_+"]*["+g+"]"),RegExp("^[^"+g+"]*["+_+"]"),{bold:1,capitalize:1024,code:16,highlight:128,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512}),m={directionless:1,unmergeable:2},y={center:2,end:6,justify:4,left:1,right:3,start:5},x={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},C={normal:0,segmented:2,token:1},S={0:"normal",2:"segmented",1:"token"},v="$config",N=!1,T=0;function E(e){T=e.timeStamp}function b(e,t,n){let i="BR"===e.nodeName,r=t.__lexicalLineBreak;return r&&(e===r||i&&e.previousSibling===r)||i&&void 0!==nK(e,n)}function O(e,t,n){N=!0;let i=performance.now()-T>100;try{ne(e,()=>{let r=tI()||e.getEditorState().read(()=>{let e=tI();return null!==e?e.clone():null}),l=new Map,s=e.getRootElement(),d=e._editorState,f=e._blockCursorElement,g=!1,_="";for(let n=0;n<t.length;n++){let p=t[n],m=p.type,y=p.target,x=function(e,t,n,i){var r;for(let l=e;l&&(r=l,!0!==r.__lexicalUnmanaged);l=n1(l)){let e=nK(l,t);if(void 0!==e){let t=nF(e,n);if(t)return ns(t)||!ii(l)?void 0:[l,t]}else if(l===i)return[i,nY(n)]}}(y,e,d,s);if(!x)continue;let[C,S]=x;if("characterData"===m)i&&td(S)&&nw(y)&&function(e,t,n){if(tC(e)){let t=e.anchor.getNode();if(t.is(n)&&e.format!==t.getFormat())return!1}return nw(t)&&n.isAttached()}(r,y,S)&&function(e,t,n){let i=it(n4(n)),r=null,l=null;null!==i&&i.anchorNode===e&&(r=i.anchorOffset,l=i.focusOffset);let o=e.nodeValue;null!==o&&function(e,t,n,i,r){let l=e;if(l.isAttached()&&(r||!l.isDirty())){let o=l.isComposing(),s=t;(o||r)&&t[t.length-1]===h&&(s=t.slice(0,-1));let d=l.getTextContent();if(r||s!==d){if(""===s){if(nI(null),a||u||c)l.remove();else{let e=t0();setTimeout(()=>{e.update(()=>{l.isAttached()&&l.remove()})},20)}return}let t=l.getParent(),r=tL(),d=l.getTextContentSize(),f=nL(),h=l.getKey();if(l.isToken()||null!==f&&h===f&&!o||tC(r)&&(null!==t&&!t.canInsertTextBefore()&&0===r.anchor.offset||r.anchor.key===e.__key&&0===r.anchor.offset&&!l.canInsertTextBefore()&&!o||r.focus.key===e.__key&&r.focus.offset===d&&!l.canInsertTextAfter()&&!o))return l.markDirty();let g=tI();if(!tC(g)||null===n||null===i)return nV(l,s,g);if(g.setTextNodeRange(l,n,l,i),l.isSegmented()){let e=tu(l.getTextContent());l.replace(e),l=e}nV(l,s,g)}}}(t,o,r,l,!1)}(y,S,e);else if("childList"===m){g=!0;let t=p.addedNodes;for(let n=0;n<t.length;n++){let i=t[n],r=n$(i),l=i.parentNode;if(null!=l&&i!==f&&null===r&&!b(i,l,e)){if(o){let e=(ii(i)?i.innerText:null)||i.nodeValue;e&&(_+=e)}l.removeChild(i)}}let n=p.removedNodes,i=n.length;if(i>0){let t=0;for(let r=0;r<i;r++){let i=n[r];(b(i,y,e)||f===i)&&(y.appendChild(i),t++)}i!==t&&l.set(C,S)}}}if(l.size>0)for(let[t,n]of l)n.reconcileObservedMutation(t,e);let p=n.takeRecords();if(p.length>0){for(let t=0;t<p.length;t++){let n=p[t],i=n.addedNodes,r=n.target;for(let t=0;t<i.length;t++){let n=i[t],l=n.parentNode;null==l||"BR"!==n.nodeName||b(n,r,e)||l.removeChild(n)}}n.takeRecords()}null!==r&&(g&&nU(r),o&&nX(e)&&r.insertRawText(_))})}finally{N=!1}}function M(e){0===T&&n4(e).addEventListener("textInput",E,!0),e._observer=new MutationObserver((t,n)=>{O(e,t,n)})}class k{node;knownState;unknownState;sharedNodeState;size;constructor(e,t,n,i=new Map,r){this.node=e,this.sharedNodeState=t,this.unknownState=n,this.knownState=i;const{sharedConfigMap:l}=this.sharedNodeState,o=void 0!==r?r:function(e,t,n){let i=n.size;if(t)for(let r in t){let t=e.get(r);t&&n.has(t)||i++}return i}(l,n,i);this.size=o}getValue(e){let t=this.knownState.get(e);if(void 0!==t)return t;this.sharedNodeState.sharedConfigMap.set(e.key,e);let n=e.defaultValue;if(this.unknownState&&e.key in this.unknownState){let t=this.unknownState[e.key];void 0!==t&&(n=e.parse(t)),this.updateFromKnown(e,n)}return n}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){let e={...this.unknownState},t={};for(let[t,n]of this.knownState)t.isEqual(n,t.defaultValue)?delete e[t.key]:e[t.key]=t.unparse(n);for(let n of this.sharedNodeState.flatKeys)n in e&&(t[n]=e[n],delete e[n]);return A(e)&&(t.$=e),t}getWritable(e){if(this.node===e)return this;let{sharedNodeState:t,unknownState:n}=this,i=new Map(this.knownState);return new k(e,t,function(e,t,n){let i;if(n)for(let[r,l]of Object.entries(n)){let n=e.get(r);n?t.has(n)||t.set(n,n.parse(l)):(i=i||{})[r]=l}return i}(t.sharedConfigMap,i,n),i,this.size)}updateFromKnown(e,t){let n=e.key;this.sharedNodeState.sharedConfigMap.set(n,e);let{knownState:i,unknownState:r}=this;i.has(e)||r&&n in r||(r&&(delete r[n],this.unknownState=A(r)),this.size++),i.set(e,t)}updateFromUnknown(e,t){let n=this.sharedNodeState.sharedConfigMap.get(e);n?this.updateFromKnown(n,n.parse(t)):(this.unknownState=this.unknownState||{},e in this.unknownState||this.size++,this.unknownState[e]=t)}updateFromJSON(e){let{knownState:t}=this;for(let e of t.keys())t.set(e,e.defaultValue);if(this.size=t.size,this.unknownState=void 0,e)for(let[t,n]of Object.entries(e))this.updateFromUnknown(t,n)}}function w(e){return e.__state?e.__state.sharedNodeState:nC(t0(),e.getType()).sharedNodeState}function A(e){if(e)for(let t in e)return e}function D(e,t,n){for(let[i,r]of t.knownState){if(e.has(i.key))continue;e.add(i.key);let t=n?n.getValue(i):i.defaultValue;if(t!==r&&!i.isEqual(t,r))return!0}return!1}function R(e,t,n){let{unknownState:i}=t,r=n?n.unknownState:void 0;if(i){for(let[t,n]of Object.entries(i))if(!e.has(t)&&(e.add(t),n!==(r?r[t]:void 0)))return!0}return!1}function P(e,t){let n=e.__state;return n&&n.node===e?n.getWritable(t):n}function I(e,t){let n=e.__mode,i=e.__format,r=e.__style,l=t.__mode,o=t.__format,s=t.__style,a=e.__state,u=t.__state;return(null===n||n===l)&&(null===i||i===o)&&(null===r||r===s)&&(null===e.__state||a===u||function(e,t){if(e===t)return!0;if(e&&t&&e.size!==t.size)return!1;let n=new Set;return!(e&&D(n,e,t)||t&&D(n,t,e)||e&&R(n,e,t)||t&&R(n,t,e))}(a,u))}function L(e,t){let n=e.mergeWithSibling(t),i=t0()._normalizedNodes;return i.add(e.__key),i.add(t.__key),n}function F(e){let t,n,i=e;if(""!==i.__text||!i.isSimpleText()||i.isUnmergeable()){for(;null!==(t=i.getPreviousSibling())&&td(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(""!==t.__text){I(t,i)&&(i=L(t,i));break}t.remove()}for(;null!==(n=i.getNextSibling())&&td(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(""!==n.__text){I(i,n)&&(i=L(i,n));break}n.remove()}}else i.remove()}function $(e){for(;"element"===e.type;){let t,n,i=e.getNode(),r=e.offset;if(r===i.getChildrenSize()?(t=i.getChildAtIndex(r-1),n=!0):(t=i.getChildAtIndex(r),n=!1),td(t)){e.set(t.__key,n?t.getTextContentSize():0,"text",!0);break}if(!nr(t))break;e.set(t.__key,n?t.getChildrenSize():0,"element",!0)}}let K,B,z,W,j,Y,U,J,H,V,G="",q=null,X=null,Z="",Q=!1,ee=!1;function et(e,t){let n=U.get(e);if(null!==t){let n=eg(e);n.parentNode===t&&t.removeChild(n)}if(J.has(e)||B._keyToDOMMap.delete(e),nr(n)){let e=ec(n,U);en(e,0,e.length-1,null)}void 0!==n&&nq(V,z,W,n,"destroyed")}function en(e,t,n,i){let r=t;for(;r<=n;++r){let t=e[r];void 0!==t&&et(t,i)}}function ei(e,t){e.setProperty("text-align",t)}function er(e,t){let n=K.theme.indent;if("string"==typeof n){let i=e.classList.contains(n);t>0&&!i?e.classList.add(n):t<1&&i&&e.classList.remove(n)}let i=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||"40px";e.style.setProperty("padding-inline-start",0===t?"":`calc(${t} * ${i})`)}function el(e,t){let n=e.style;0===t?ei(n,""):1===t?ei(n,"left"):2===t?ei(n,"center"):3===t?ei(n,"right"):4===t?ei(n,"justify"):5===t?ei(n,"start"):6===t&&ei(n,"end")}function eo(e,t){let n=function(e){let t=e.__dir;if(null!==t)return t;if(nu(e))return null;let n=e.getParentOrThrow();return nu(n)&&null===n.__dir?"auto":null}(t);null!==n?e.dir=n:e.removeAttribute("dir")}function es(e,n){var i;let r,l=J.get(e);void 0===l&&t(60);let o=l.createDOM(K,B);if(r=(i=B)._keyToDOMMap,o[`__lexicalKey_${i._key}`]=e,r.set(e,o),td(l)?o.setAttribute("data-lexical-text","true"):ns(l)&&o.setAttribute("data-lexical-decorator","true"),nr(l)){let e=l.__indent,t=l.__size;eo(o,l),0!==e&&er(o,e),0!==t&&ea(ec(l,J),l,0,t-1,l.getDOMSlot(o));let n=l.__format;0!==n&&el(o,n),l.isInline()||ed(null,l,o),nQ(l)&&(G+="\n\n",Z+="\n\n")}else{let t=l.getTextContent();if(ns(l)){let t=l.decorate(B,K);null!==t&&ef(e,t),o.contentEditable="false"}G+=t,Z+=t}return null!==n&&n.insertChild(o),nq(V,z,W,l,"created"),o}function ea(e,t,n,i,r){let l=G;G="";let o=n;for(;o<=i;++o){es(e[o],r);let t=J.get(e[o]);null!==t&&td(t)&&null===q&&(q=t.getFormat(),X=t.getStyle())}nQ(t)&&(G+="\n\n"),r.element.__lexicalTextContent=G,G=l+G}function eu(e,t){if(e){let n=e.__last;if(n){let e=t.get(n);if(e)return e3(e)?"line-break":ns(e)&&e.isInline()?"decorator":null}return"empty"}return null}function ed(e,t,n){let i=eu(e,U),r=eu(t,J);i!==r&&t.getDOMSlot(n).setManagedLineBreak(r)}function ec(e,n){let i=[],r=e.__first;for(;null!==r;){let e=n.get(r);void 0===e&&t(101),i.push(r),r=e.__next}return i}function ef(e,t){let n=B._pendingDecorators,i=B._decorators;if(null===n){if(i[e]===t)return;n=nz(B)}n[e]=t}function eh(e){let t=e.nextSibling;return null!==t&&t===B._blockCursorElement&&(t=t.nextSibling),t}function eg(e){let n=H.get(e);return void 0===n&&t(75,e),n}function e_(e){return{type:e}}let ep=e_("SELECTION_CHANGE_COMMAND"),em=(e_("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),e_("CLICK_COMMAND")),ey=e_("BEFORE_INPUT_COMMAND"),ex=e_("INPUT_COMMAND"),eC=e_("COMPOSITION_START_COMMAND"),eS=e_("COMPOSITION_END_COMMAND"),ev=(e_("DELETE_CHARACTER_COMMAND"),e_("INSERT_LINE_BREAK_COMMAND"),e_("INSERT_PARAGRAPH_COMMAND"),e_("CONTROLLED_TEXT_INSERTION_COMMAND"),e_("PASTE_COMMAND")),eN=(e_("REMOVE_TEXT_COMMAND"),e_("DELETE_WORD_COMMAND"),e_("DELETE_LINE_COMMAND"),e_("FORMAT_TEXT_COMMAND"),e_("UNDO_COMMAND"),e_("REDO_COMMAND"),e_("KEYDOWN_COMMAND")),eT=(e_("KEY_ARROW_RIGHT_COMMAND"),e_("MOVE_TO_END"),e_("KEY_ARROW_LEFT_COMMAND"),e_("MOVE_TO_START"),e_("KEY_ARROW_UP_COMMAND"),e_("KEY_ARROW_DOWN_COMMAND"),e_("KEY_ENTER_COMMAND"),e_("KEY_SPACE_COMMAND"),e_("KEY_BACKSPACE_COMMAND"),e_("KEY_ESCAPE_COMMAND"),e_("KEY_DELETE_COMMAND"),e_("KEY_TAB_COMMAND"),e_("INSERT_TAB_COMMAND"),e_("INDENT_CONTENT_COMMAND"),e_("OUTDENT_CONTENT_COMMAND"),e_("DROP_COMMAND")),eE=(e_("FORMAT_ELEMENT_COMMAND"),e_("DRAGSTART_COMMAND")),eb=e_("DRAGOVER_COMMAND"),eO=e_("DRAGEND_COMMAND"),eM=e_("COPY_COMMAND"),ek=e_("CUT_COMMAND"),ew=(e_("SELECT_ALL_COMMAND"),e_("CLEAR_EDITOR_COMMAND"),e_("CLEAR_HISTORY_COMMAND"),e_("CAN_REDO_COMMAND"),e_("CAN_UNDO_COMMAND"),e_("FOCUS_COMMAND")),eA=e_("BLUR_COMMAND"),eD=(e_("KEY_MODIFIER_COMMAND"),Object.freeze({})),eR=[["keydown",function(e,t){e.timeStamp,e.key,t.isComposing()||nZ(t,eN,e)}],["pointerdown",function(e,t){let n=e.target,i=e.pointerType;ir(n)&&"touch"!==i&&"pen"!==i&&0===e.button&&ne(t,()=>{ns(nB(n))||(eF=!0)})}],["compositionstart",function(e,t){nZ(t,eC,e)}],["compositionend",function(e,t){o||(!u&&(a||c)?e.data:nZ(t,eS,e))}],["input",function(e,t){e.stopPropagation(),ne(t,()=>{t.dispatchCommand(ex,e)},{event:e})}],["click",function(e,t){ne(t,()=>{let n=tI(),i=it(n4(t)),r=tL();if(i){if(tC(n)){let t=n.anchor,l=t.getNode();if("element"===t.type&&0===t.offset&&n.isCollapsed()&&!nu(l)&&1===nj().getChildrenSize()&&l.getTopLevelElementOrThrow().isEmpty()&&null!==r&&n.is(r))i.removeAllRanges(),n.dirty=!0;else if(3===e.detail&&!n.isCollapsed()&&l!==n.focus.getNode()){let e=ic(l,e=>nr(e)&&!e.isInline());nr(e)&&e.select(0)}}else if("touch"===e.pointerType||"pen"===e.pointerType){let n=i.anchorNode;(ii(n)||nw(n))&&nU(tP(r,i,t,e))}}nZ(t,em,e)})}],["cut",eD],["copy",eD],["dragstart",eD],["dragover",eD],["dragend",eD],["paste",eD],["focus",eD],["blur",eD],["drop",eD]];s&&eR.push(["beforeinput",(e,t)=>{let n;"deleteCompositionText"===(n=e.inputType)||o&&nX(t)||"insertCompositionText"!==n&&nZ(t,ey,e)}]);let eP=new WeakMap,eI=new WeakMap,eL=!1,eF=!1,e$=null,eK=[0,"",0,"root",0];function eB(e,t){return nw(e)&&null!==e.nodeValue&&0!==t&&t!==e.nodeValue.length}function ez(e,n,i){let{anchorNode:r,anchorOffset:l,focusNode:o,focusOffset:s}=e;eL&&(eL=!1,eB(r,l)&&eB(o,s)&&!e$)||ne(n,()=>{if(!i)return void nU(null);if(!nT(n,r,o))return;let a=tI();if(e$&&tC(a)&&a.isCollapsed()){let e=a.anchor,t=e$.anchor;(e.key===t.key&&e.offset===t.offset+1||1===e.offset&&t.getNode().is(e.getNode().getPreviousSibling()))&&nU(a=e$.clone())}if(e$=null,tC(a)){let i=a.anchor,r=i.getNode();if(a.isCollapsed()){"Range"===e.type&&e.anchorNode===e.focusNode&&(a.dirty=!0);let l=n4(n).event,o=l?l.timeStamp:performance.now(),[s,d,c,f,h]=eK,g=nj(),_=!1===n.isComposing()&&""===g.getTextContent();if(o<h+200&&i.offset===c&&i.key===f)eW(a,s,d);else if("text"===i.type){var u;td(r)||t(141),eW(a,(u=r).getFormat(),u.getStyle())}else if("element"===i.type&&!_){nr(r)||t(259);let e=i.getNode();e.isEmpty()?eW(a,e.getTextFormat(),e.getTextStyle()):eW(a,0,"")}}else{let e=i.key,t=a.focus.key,n=a.getNodes(),r=n.length,o=a.isBackward(),u=o?s:l,d=o?l:s,c=o?t:e,f=o?e:t,h=2047,g=!1;for(let e=0;e<r;e++){let t=n[e],i=t.getTextContentSize();if(td(t)&&0!==i&&(0!==e||t.__key!==c||u!==i)&&(e!==r-1||t.__key!==f||0!==d)&&(g=!0,0==(h&=t.getFormat())))break}a.format=g?h:0}}nZ(n,ep,void 0)})}function eW(e,t,n){e.format===t&&e.style===n||(e.format=t,e.style=n,e.dirty=!0)}function ej(e){let t=e.__lexicalEventHandles;return void 0===t&&(e.__lexicalEventHandles=t=[]),t}let eY=new Map;function eU(e){let t,n=(t=n6(e.target))?t.getSelection():null;if(null===n)return;let i=nb(n.anchorNode);if(null===i)return;eF&&(eF=!1,ne(i,()=>{let t=tL(),r=n.anchorNode;(ii(r)||nw(r))&&nU(tP(t,n,i,e))}));let r=nH(i),l=r[r.length-1],o=l._key,s=eY.get(o),a=s||l;a!==i&&ez(n,a,!1),ez(n,i,!0),i!==l?eY.set(o,i):s&&eY.delete(o)}function eJ(e){e._lexicalHandled=!0}function eH(e){return!0===e._lexicalHandled}let eV=()=>{};function eG(e,t,n){tX();let i=e.__key,r=e.getParent();if(null===r)return;let l=function(e){let t=tI();if(!tC(t)||!nr(e))return t;let{anchor:n,focus:i}=t,r=n.getNode(),l=i.getNode();return n3(r,e)&&n.set(e.__key,0,"element"),n3(l,e)&&i.set(e.__key,0,"element"),t}(e),o=!1;if(tC(l)&&t){let t=l.anchor,n=l.focus;t.key===i&&(tK(t,e,r,e.getPreviousSibling(),e.getNextSibling()),o=!0),n.key===i&&(tK(n,e,r,e.getPreviousSibling(),e.getNextSibling()),o=!0)}else tv(l)&&t&&e.isSelected()&&e.selectPrevious();if(tC(l)&&t&&!o){let t=e.getIndexWithinParent();nR(e),tF(l,r,t,-1)}else nR(e);n||n5(r)||r.canBeEmpty()||!r.isEmpty()||eG(r,t),t&&l&&nu(r)&&r.isEmpty()&&r.selectEnd()}let eq=Symbol.for("ephemeral");function eX(e){return e[eq]||!1}class eZ{__type;__key;__parent;__prev;__next;__state;static getType(){let{ownNodeType:e}=function(e){let n=v in e.prototype?e.prototype[v]():void 0,i=function(e){if(!(e===eZ||e.prototype instanceof eZ)){let n="<unknown>",i="<unknown>";try{n=e.getType()}catch(e){}try{nm.version&&(i=JSON.parse(nm.version))}catch(e){}t(290,e.name,n,i)}return e===no||e===ni||e===eZ}(e),r=!i&&id(e,"getType")?e.getType():void 0,l,o=r;if(n)if(r)l=n[r];else for(let[e,t]of Object.entries(n))o=e,l=t;if(!i&&o&&(id(e,"getType")||(e.getType=()=>o),id(e,"clone")||(e.clone=t=>(ny=t,new e)),id(e,"importJSON")||(e.importJSON=l&&l.$importJSON||(t=>(new e).updateFromJSON(t))),!id(e,"importDOM")&&l)){let{importDOM:t}=l;t&&(e.importDOM=()=>t)}return{ownNodeConfig:l,ownNodeType:o}}(this);return void 0===e&&t(64,this.name),e}static clone(e){t(65,this.name)}$config(){return{}}config(e,t){let n=t.extends||Object.getPrototypeOf(this.constructor);return Object.assign(t,{extends:n,type:e}),{[e]:t}}afterCloneFrom(e){this.__key===e.__key?(this.__parent=e.__parent,this.__next=e.__next,this.__prev=e.__prev,this.__state=e.__state):e.__state&&(this.__state=e.__state.getWritable(this))}static importDOM;constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),function(e,t){let n,i=(n=ny,ny=null,n);if(null!=(t=t||i&&i.__key))return e.__key=t;tX(),tZ();let r=t0(),l=tQ(),o=""+nx++;l._nodeMap.set(o,e),nr(e)?r._dirtyElements.set(o,!0):r._dirtyLeaves.add(o),r._cloneNotNeeded.add(o),r._dirtyType=1,e.__key=o}(this,e)}getType(){return this.__type}isInline(){t(137,this.constructor.name)}isAttached(){let e=this.__key;for(;null!==e;){if("root"===e)return!0;let t=nF(e);if(null===t)break;e=t.__parent}return!1}isSelected(e){let t=e||tI();if(null==t)return!1;let n=t.getNodes().some(e=>e.__key===this.__key);if(td(this))return n;if(tC(t)&&"element"===t.anchor.type&&"element"===t.focus.type){if(t.isCollapsed())return!1;let e=this.getParent();if(ns(this)&&this.isInline()&&e){let n=t.isBackward()?t.focus:t.anchor;if(e.is(n.getNode())&&n.offset===e.getChildrenSize()&&this.is(e.getLastChild()))return!1}}return n}getKey(){return this.__key}getIndexWithinParent(){let e=this.getParent();if(null===e)return -1;let t=e.getFirstChild(),n=0;for(;null!==t;){if(this.is(t))return n;n++,t=t.getNextSibling()}return -1}getParent(){let e=this.getLatest().__parent;return null===e?null:nF(e)}getParentOrThrow(){let e=this.getParent();return null===e&&t(66,this.__key),e}getTopLevelElement(){let e=this;for(;null!==e;){let n=e.getParent();if(n5(n))return nr(e)||e===this&&ns(e)||t(194),e;e=n}return null}getTopLevelElementOrThrow(){let e=this.getTopLevelElement();return null===e&&t(67,this.__key),e}getParents(){let e=[],t=this.getParent();for(;null!==t;)e.push(t),t=t.getParent();return e}getParentKeys(){let e=[],t=this.getParent();for(;null!==t;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){let e=this.getLatest().__prev;return null===e?null:nF(e)}getPreviousSiblings(){let e=[],t=this.getParent();if(null===t)return e;let n=t.getFirstChild();for(;null!==n&&!n.is(this);)e.push(n),n=n.getNextSibling();return e}getNextSibling(){let e=this.getLatest().__next;return null===e?null:nF(e)}getNextSiblings(){let e=[],t=this.getNextSibling();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){let t=nr(this)?this:this.getParent(),n=nr(e)?e:e.getParent(),i=t&&n?iK(t,n):null;return i?i.commonAncestor:null}is(e){return null!=e&&this.__key===e.__key}isBefore(e){let n=iK(this,e);return null!==n&&("descendant"===n.type||("branch"===n.type?-1===iF(n):("same"!==n.type&&"ancestor"!==n.type&&t(279),!1)))}isParentOf(e){let t=iK(this,e);return null!==t&&"ancestor"===t.type}getNodesBetween(e){let n=this.isBefore(e),i=[],r=new Set,l=this;for(;null!==l;){let o=l.__key;if(r.has(o)||(r.add(o),i.push(l)),l===e)break;let s=nr(l)?n?l.getFirstChild():l.getLastChild():null;if(null!==s){l=s;continue}let a=n?l.getNextSibling():l.getPreviousSibling();if(null!==a){l=a;continue}let u=l.getParentOrThrow();if(r.has(u.__key)||i.push(u),u===e)break;let d=null,c=u;do{if(null===c&&t(68),d=n?c.getNextSibling():c.getPreviousSibling(),null===(c=c.getParent()))break;null!==d||r.has(c.__key)||i.push(c)}while(null===d)l=d}return n||i.reverse(),i}isDirty(){let e=t0()._dirtyLeaves;return null!==e&&e.has(this.__key)}getLatest(){if(eX(this))return this;let e=nF(this.__key);return null===e&&t(113),e}getWritable(){var e;let t;if(eX(this))return this;tX();let n=tQ(),i=t0(),r=n._nodeMap,l=this.__key,o=this.getLatest(),s=i._cloneNotNeeded,a=tI();if(null!==a&&a.setCachedNodes(null),s.has(l))return nP(o),o;let u=((t=(e=o).constructor.clone(e)).afterCloneFrom(e),t);return s.add(l),nP(u),r.set(l,u),u}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,n){t(70)}updateDOM(e,n,i){t(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){let e=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...e}}static importJSON(e){t(18,this.name)}updateFromJSON(e){return function(e,t){let n,i,r=e.getWritable(),l=t.$,o=l;for(let e of w(r).flatKeys)e in t&&(void 0!==o&&o!==l||(o={...l}),o[e]=t[e]);return(r.__state||o)&&(i=(n=e.getWritable()).__state?n.__state.getWritable(n):new k(n,w(n)),n.__state=i,i).updateFromJSON(o),r}(this,e)}static transform(){return null}remove(e){eG(this,!0,e)}replace(e,n){tX();let i=tI();null!==i&&(i=i.clone()),n8(this,e);let r=this.getLatest(),l=this.__key,o=e.__key,s=e.getWritable(),a=this.getParentOrThrow().getWritable(),u=a.__size;nR(s);let d=r.getPreviousSibling(),c=r.getNextSibling(),f=r.__prev,h=r.__next,g=r.__parent;if((eG(r,!1,!0),null===d)?a.__first=o:d.getWritable().__next=o,(s.__prev=f,null===c)?a.__last=o:c.getWritable().__prev=o,s.__next=h,s.__parent=g,a.__size=u,n&&(nr(this)&&nr(s)||t(139),this.getChildren().forEach(e=>{s.append(e)})),tC(i)){nU(i);let e=i.anchor,t=i.focus;e.key===l&&ty(e,s),t.key===l&&ty(t,s)}return nL()===l&&nI(o),s}insertAfter(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];tX(),n8(this,e);let n=this.getWritable(),i=e.getWritable(),r=i.getParent(),l=tI(),o=!1,s=!1;if(null!==r){let t=e.getIndexWithinParent();if(nR(i),tC(l)){let e=r.__key,n=l.anchor,i=l.focus;o="element"===n.type&&n.key===e&&n.offset===t+1,s="element"===i.type&&i.key===e&&i.offset===t+1}}let a=this.getNextSibling(),u=this.getParentOrThrow().getWritable(),d=i.__key,c=n.__next;if(null===a?u.__last=d:a.getWritable().__prev=d,u.__size++,n.__next=d,i.__next=c,i.__prev=n.__key,i.__parent=n.__parent,t&&tC(l)){let e=this.getIndexWithinParent();tF(l,u,e+1);let t=u.__key;o&&l.anchor.set(t,e+2,"element"),s&&l.focus.set(t,e+2,"element")}return e}insertBefore(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];tX(),n8(this,e);let n=this.getWritable(),i=e.getWritable(),r=i.__key;nR(i);let l=this.getPreviousSibling(),o=this.getParentOrThrow().getWritable(),s=n.__prev,a=this.getIndexWithinParent();null===l?o.__first=r:l.getWritable().__next=r,o.__size++,n.__prev=r,i.__prev=s,i.__next=n.__key,i.__parent=n.__parent;let u=tI();return t&&tC(u)&&tF(u,this.getParentOrThrow(),a),e}isParentRequired(){return!1}createParentElementNode(){return n_()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){tX();let n=this.getPreviousSibling(),i=this.getParentOrThrow();if(null===n)return i.select(0,0);if(nr(n))return n.select();if(!td(n)){let e=n.getIndexWithinParent()+1;return i.select(e,e)}return n.select(e,t)}selectNext(e,t){tX();let n=this.getNextSibling(),i=this.getParentOrThrow();if(null===n)return i.select();if(nr(n))return n.select(0,0);if(!td(n)){let e=n.getIndexWithinParent();return i.select(e,e)}return n.select(e,t)}markDirty(){this.getWritable()}reconcileObservedMutation(e,t){this.markDirty()}}let eQ="history-merge";class e0 extends eZ{static getType(){return"linebreak"}static clone(e){return new e0(e.__key)}constructor(e){super(e)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:e=>(function(e){let t=e.parentElement;if(null!==t&&il(t)){let n=t.firstChild;if(n===e||n.nextSibling===e&&e6(n)){let n=t.lastChild;if(n===e||n.previousSibling===e&&e6(n))return!0}}return!1})(e)||function(e){let t=e.parentElement;if(null!==t&&il(t)){let n=t.firstChild;if(n===e||n.nextSibling===e&&e6(n))return!1;let i=t.lastChild;if(i===e||i.previousSibling===e&&e6(i))return!0}return!1}(e)?null:{conversion:e1,priority:0}}}static importJSON(e){return e2().updateFromJSON(e)}}function e1(e){return{node:e2()}}function e2(){return n9(new e0)}function e3(e){return e instanceof e0}function e6(e){return nw(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function e4(e,t){return 16&t?"code":128&t?"mark":32&t?"sub":64&t?"sup":null}function e5(e,t){return 1&t?"strong":2&t?"em":"span"}function e9(e,t,n,i,r){let l=i.classList,o=nG(r,"base");void 0!==o&&l.add(...o);let s=!1,a=8&t&&4&t;for(let e in void 0!==(o=nG(r,"underlineStrikethrough"))&&(8&n&&4&n?(s=!0,a||l.add(...o)):a&&l.remove(...o)),p){let i=p[e];if(void 0!==(o=nG(r,e)))if(n&i){if(s&&("underline"===e||"strikethrough"===e)){t&i&&l.remove(...o);continue}(0==(t&i)||a&&"underline"===e||"strikethrough"===e)&&l.add(...o)}else t&i&&l.remove(...o)}}function e8(e,t,n){let i=t.firstChild,r=n.isComposing(),l=e+(r?h:"");if(null==i)t.textContent=l;else{let e=i.nodeValue;if(e!==l)if(r||o){let[t,n,r]=function(e,t){let n=e.length,i=t.length,r=0,l=0;for(;r<n&&r<i&&e[r]===t[r];)r++;for(;l+r<n&&l+r<i&&e[n-l-1]===t[i-l-1];)l++;return[r,n-r-l,t.slice(r,i-l)]}(e,l);0!==n&&i.deleteData(t,n),i.insertData(t,r)}else i.nodeValue=l}}function e7(e,t,n,i,r,l){e8(r,e,t);let o=l.theme.text;void 0!==o&&e9(0,0,i,e,o)}function te(e,t){let n=document.createElement(t);return n.appendChild(e),n}class tt extends eZ{__text;__format;__style;__mode;__detail;static getType(){return"text"}static clone(e){return new tt(e.__text,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__text=e.__text,this.__format=e.__format,this.__style=e.__style,this.__mode=e.__mode,this.__detail=e.__detail}constructor(e="",t){super(t),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){return S[this.getLatest().__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===nL()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){let t=p[e];return 0!=(this.getFormat()&t)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return nD(this.getLatest().__format,e,t)}canHaveFormat(){return!0}isInline(){return!0}createDOM(e,t){let n=this.__format,i=e4(0,n),r=e5(0,n),l=null===i?r:i,o=document.createElement(l),s=o;this.hasFormat("code")&&o.setAttribute("spellcheck","false"),null!==i&&(s=document.createElement(r),o.appendChild(s)),e7(s,this,0,n,this.__text,e);let a=this.__style;return""!==a&&(o.style.cssText=a),o}updateDOM(e,n,i){let r=this.__text,l=e.__format,o=this.__format,s=e4(0,l),a=e4(0,o),u=e5(0,l),d=e5(0,o);if((null===s?u:s)!==(null===a?d:a))return!0;if(s===a&&u!==d){let e=n.firstChild;null==e&&t(48);let l=document.createElement(d);return e7(l,this,0,o,r,i),n.replaceChild(l,e),!1}let c=n;null!==a&&null!==s&&null==(c=n.firstChild)&&t(49),e8(r,c,this);let f=i.theme.text;void 0!==f&&l!==o&&e9(0,l,o,c,f);let h=e.__style,g=this.__style;return h!==g&&(n.style.cssText=g),!1}static importDOM(){return{"#text":()=>({conversion:tl,priority:0}),b:()=>({conversion:ti,priority:0}),code:()=>({conversion:ta,priority:0}),em:()=>({conversion:ta,priority:0}),i:()=>({conversion:ta,priority:0}),mark:()=>({conversion:ta,priority:0}),s:()=>({conversion:ta,priority:0}),span:()=>({conversion:tn,priority:0}),strong:()=>({conversion:ta,priority:0}),sub:()=>({conversion:ta,priority:0}),sup:()=>({conversion:ta,priority:0}),u:()=>({conversion:ta,priority:0})}}static importJSON(e){return tu().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTextContent(e.text).setFormat(e.format).setDetail(e.detail).setMode(e.mode).setStyle(e.style)}exportDOM(e){let{element:n}=super.exportDOM(e);return ii(n)||t(132),n.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?n.style.textTransform="lowercase":this.hasFormat("uppercase")?n.style.textTransform="uppercase":this.hasFormat("capitalize")&&(n.style.textTransform="capitalize"),this.hasFormat("bold")&&(n=te(n,"b")),this.hasFormat("italic")&&(n=te(n,"i")),this.hasFormat("strikethrough")&&(n=te(n,"s")),this.hasFormat("underline")&&(n=te(n,"u")),{element:n}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(e,t){}setFormat(e){let t=this.getWritable();return t.__format="string"==typeof e?p[e]:e,t}setDetail(e){let t=this.getWritable();return t.__detail="string"==typeof e?m[e]:e,t}setStyle(e){let t=this.getWritable();return t.__style=e,t}toggleFormat(e){let t=nD(this.getFormat(),e,null);return this.setFormat(t)}toggleDirectionless(){let e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){let e=this.getWritable();return e.__detail^=2,e}setMode(e){let t=C[e];if(this.__mode===t)return this;let n=this.getWritable();return n.__mode=t,n}setTextContent(e){if(this.__text===e)return this;let t=this.getWritable();return t.__text=e,t}select(e,t){tX();let n=e,i=t,r=tI(),l=this.getTextContent(),o=this.__key;if("string"==typeof l){let e=l.length;void 0===n&&(n=e),void 0===i&&(i=e)}else n=0,i=0;if(!tC(r))return tD(o,n,o,i,"text","text");{let e=nL();e!==r.anchor.key&&e!==r.focus.key||nI(o),r.setTextNodeRange(this,n,this,i)}return r}selectStart(){return this.select(0,0)}selectEnd(){let e=this.getTextContentSize();return this.select(e,e)}spliceText(e,t,n,i){let r=this.getWritable(),l=r.__text,o=n.length,s=e;s<0&&(s=o+s)<0&&(s=0);let a=tI();if(i&&tC(a)){let t=e+o;a.setTextNodeRange(r,t,r,t)}return r.__text=l.slice(0,s)+n+l.slice(s+t),r}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(){let e;for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];tX();let r=this.getLatest(),l=r.getTextContent();if(""===l)return[];let o=r.__key,s=nL(),a=l.length;n.sort((e,t)=>e-t),n.push(a);let u=[],d=n.length;for(let e=0,t=0;e<a&&t<=d;t++){let i=n[t];i>e&&(u.push(l.slice(e,i)),e=i)}let c=u.length;if(1===c)return[r];let f=u[0],h=r.getParent(),g=r.getFormat(),_=r.getStyle(),p=r.__detail,m=!1,y=null,x=null,C=tI();if(tC(C)){let[e,t]=C.isBackward()?[C.focus,C.anchor]:[C.anchor,C.focus];"text"===e.type&&e.key===o&&(y=e),"text"===t.type&&t.key===o&&(x=t)}r.isSegmented()?((e=tu(f)).__format=g,e.__style=_,e.__detail=p,e.__state=P(r,e),m=!0):e=r.setTextContent(f);let S=[e];for(let e=1;e<c;e++){let t=tu(u[e]);t.__format=g,t.__style=_,t.__detail=p,t.__state=P(r,t);let n=t.__key;s===o&&nI(n),S.push(t)}let v=y?y.offset:null,N=x?x.offset:null,T=0;for(let e of S){if(!y&&!x)break;let t=T+e.getTextContentSize();if(null!==y&&null!==v&&v<=t&&v>=T&&(y.set(e.getKey(),v-T,"text"),v<t&&(y=null)),null!==x&&null!==N&&N<=t&&N>=T){x.set(e.getKey(),N-T,"text");break}T=t}if(null!==h){let e,t;e=this.getPreviousSibling(),t=this.getNextSibling(),null!==e&&nP(e),null!==t&&nP(t);let n=h.getWritable(),i=this.getIndexWithinParent();m?(n.splice(i,0,S),this.remove()):n.splice(i,1,S),tC(C)&&tF(C,h,i,c-1)}return S}mergeWithSibling(e){let n=e===this.getPreviousSibling();n||e===this.getNextSibling()||t(50);let i=this.__key,r=e.__key,l=this.__text,o=l.length;nL()===r&&nI(i);let s=tI();if(tC(s)){let t=s.anchor,l=s.focus;null!==t&&t.key===r&&tB(t,n,i,e,o),null!==l&&l.key===r&&tB(l,n,i,e,o)}let a=e.__text,u=n?a+l:l+a;this.setTextContent(u);let d=this.getWritable();return e.remove(),d}isTextEntity(){return!1}}function tn(e){return{forChild:tc(e.style),node:null}}function ti(e){let t="normal"===e.style.fontWeight;return{forChild:tc(e.style,t?void 0:"bold"),node:null}}let tr=new WeakMap;function tl(e){null===e.parentElement&&t(129);let n=e.textContent||"";if(null!==function(e){let t,n=e.parentNode,i=[e];for(;null!==n&&void 0===(t=tr.get(n))&&!function(e){if(!ii(e))return!1;if("PRE"===e.nodeName)return!0;let t=e.style.whiteSpace;return"string"==typeof t&&t.startsWith("pre")}(n);)i.push(n),n=n.parentNode;let r=void 0===t?n:t;for(let e=0;e<i.length;e++)tr.set(i[e],r);return r}(e)){let e=n.split(/(\r?\n|\t)/),t=[],i=e.length;for(let n=0;n<i;n++){let i=e[n];"\n"===i||"\r\n"===i?t.push(e2()):"	"===i?t.push(th()):""!==i&&t.push(tu(i))}return{node:t}}if(""===(n=n.replace(/\r/g,"").replace(/[ \t\n]+/g," ")))return{node:null};if(" "===n[0]){let t=e,i=!0;for(;null!==t&&null!==(t=to(t,!1));){let e=t.textContent||"";if(e.length>0){/[ \t\n]$/.test(e)&&(n=n.slice(1)),i=!1;break}}i&&(n=n.slice(1))}if(" "===n[n.length-1]){let t=e,i=!0;for(;null!==t&&null!==(t=to(t,!0));)if((t.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){i=!1;break}i&&(n=n.slice(0,n.length-1))}return""===n?{node:null}:{node:tu(n)}}function to(e,t){let n=e;for(;;){let e;for(;null===(e=t?n.nextSibling:n.previousSibling);){let e=n.parentElement;if(null===e)return null;n=e}if(ii(n=e)){let e=n.style.display;if(""===e&&!function(e){let t=RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==e.nodeName.match(t)}(n)||""!==e&&!e.startsWith("inline"))return null}let i=n;for(;null!==(i=t?n.firstChild:n.lastChild);)n=i;if(nw(n))return n;if("BR"===n.nodeName)return null}}let ts={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function ta(e){let t=ts[e.nodeName.toLowerCase()];return void 0===t?{node:null}:{forChild:tc(e.style,t),node:null}}function tu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n9(new tt(e))}function td(e){return e instanceof tt}function tc(e,t){let n=e.fontWeight,i=e.textDecoration.split(" "),r="700"===n||"bold"===n,l=i.includes("line-through"),o="italic"===e.fontStyle,s=i.includes("underline"),a=e.verticalAlign;return e=>(td(e)&&(r&&!e.hasFormat("bold")&&e.toggleFormat("bold"),l&&!e.hasFormat("strikethrough")&&e.toggleFormat("strikethrough"),o&&!e.hasFormat("italic")&&e.toggleFormat("italic"),s&&!e.hasFormat("underline")&&e.toggleFormat("underline"),"sub"!==a||e.hasFormat("subscript")||e.toggleFormat("subscript"),"super"!==a||e.hasFormat("superscript")||e.toggleFormat("superscript"),t&&!e.hasFormat(t)&&e.toggleFormat(t)),e)}class tf extends tt{static getType(){return"tab"}static clone(e){return new tf(e.__key)}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}createDOM(e){let t=super.createDOM(e),n=nG(e.theme,"tab");return void 0!==n&&t.classList.add(...n),t}static importJSON(e){return th().updateFromJSON(e)}setTextContent(e){return"	"!==e&&""!==e&&n(126),super.setTextContent("	")}spliceText(e,n,i,r){return""===i&&0===n||"	"===i&&1===n||t(286),this}setDetail(e){return 2!==e&&t(127),this}setMode(e){return"normal"!==e&&t(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function th(){return n9(new tf)}function tg(e){return e instanceof tf}class t_{key;offset;type;_selection;constructor(e,t,n){this._selection=null,this.key=e,this.offset=t,this.type=n}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){return this.key===e.key?this.offset<e.offset:0>iL(iH(iB(this,"next")),iH(iB(e,"next")))}getNode(){let e=nF(this.key);return null===e&&t(20),e}set(e,t,n,i){let r=this._selection,l=this.key;i&&this.key===e&&this.offset===t&&this.type===n||(this.key=e,this.offset=t,this.type=n,tq()||(nL()===l&&nI(e),null!==r&&(r.setCachedNodes(null),r.dirty=!0)))}}function tp(e,t,n){return new t_(e,t,n)}function tm(e,t){let n=t.__key,i=e.offset,r="element";if(td(t)){r="text";let e=t.getTextContentSize();i>e&&(i=e)}else if(!nr(t)){let e=t.getNextSibling();if(td(e))n=e.__key,i=0,r="text";else{let e=t.getParent();e&&(n=e.__key,i=t.getIndexWithinParent()+1)}}e.set(n,i,r)}function ty(e,t){if(nr(t)){let n=t.getLastDescendant();nr(n)||td(n)?tm(e,n):tm(e,t)}else tm(e,t)}class tx{_nodes;_cachedNodes;dirty;constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!tv(e))return!1;let t=this._nodes,n=e._nodes;return t.size===n.size&&Array.from(t).every(e=>n.has(e))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new tx(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){let t,n=this.getNodes(),i=n.length,r=n[i-1];if(td(r))t=r.select();else{let e=r.getIndexWithinParent()+1;t=r.getParentOrThrow().select(e,e)}t.insertNodes(e);for(let e=0;e<i;e++)n[e].remove()}getNodes(){let e=this._cachedNodes;if(null!==e)return e;let t=this._nodes,n=[];for(let e of t){let t=nF(e);null!==t&&n.push(t)}return tq()||(this._cachedNodes=n),n}getTextContent(){let e=this.getNodes(),t="";for(let n=0;n<e.length;n++)t+=e[n].getTextContent();return t}deleteNodes(){let e=this.getNodes();if((tI()||tL())===this&&e[0]){var t;let n,i,r=ib(e[0],"next");t=iP(r,r),iW(i=tC(n=tI())?n:new tS(tp("root",0,"element"),tp("root",0,"element"),0,""),t),nU(i)}for(let t of e)t.remove()}}function tC(e){return e instanceof tS}class tS{format;style;anchor;focus;_cachedNodes;dirty;constructor(e,t,n,i){this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.format=n,this.style=i,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!tC(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){let e=this._cachedNodes;if(null!==e)return e;let t=function(e){let t=[],[n,i]=e.getTextSlices();n&&t.push(n.caret.origin);let r=new Set,l=new Set;for(let n of e)if(iv(n)){let{origin:e}=n;0===t.length?r.add(e):(l.add(e),t.push(e))}else{let{origin:e}=n;nr(e)&&l.has(e)||t.push(e)}if(i&&t.push(i.caret.origin),iS(e.focus)&&nr(e.focus.origin)&&null===e.focus.getNodeAtCaret())for(let n=ik(e.focus.origin,"previous");iv(n)&&r.has(n.origin)&&!n.origin.isEmpty()&&n.origin.is(t[t.length-1]);n=iw(n))r.delete(n.origin),t.pop();for(;t.length>1;){let e=t[t.length-1];if(!nr(e)||l.has(e)||e.isEmpty()||r.has(e))break;t.pop()}if(0===t.length&&e.isCollapsed()){let n=iH(e.anchor),i=iH(e.anchor.getFlipped()),r=e=>iC(e)?e.origin:e.getNodeAtCaret(),l=r(n)||r(i)||(e.anchor.getNodeAtCaret()?n.origin:i.origin);t.push(l)}return t}(iG(ij(this),"next"));return tq()||(this._cachedNodes=t),t}setTextNodeRange(e,t,n,i){this.anchor.set(e.__key,t,"text"),this.focus.set(n.__key,i,"text")}getTextContent(){let e=this.getNodes();if(0===e.length)return"";let t=e[0],n=e[e.length-1],i=this.anchor,r=this.focus,l=i.isBefore(r),[o,s]=tT(this),a="",u=!0;for(let d=0;d<e.length;d++){let c=e[d];if(nr(c)&&!c.isInline())u||(a+="\n"),u=!c.isEmpty();else if(u=!1,td(c)){let e=c.getTextContent();c===t?c===n?"element"===i.type&&"element"===r.type&&r.offset!==i.offset||(e=o<s?e.slice(o,s):e.slice(s,o)):e=l?e.slice(o):e.slice(s):c===n&&(e=l?e.slice(0,s):e.slice(0,o)),a+=e}else!ns(c)&&!e3(c)||c===n&&this.isCollapsed()||(a+=c.getTextContent())}return a}applyDOMRange(e){let t=t0(),n=t.getEditorState()._selection,i=tA(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,n);if(null===i)return;let[r,l]=i;this.anchor.set(r.key,r.offset,r.type,!0),this.focus.set(l.key,l.offset,l.type,!0),$(this.anchor),$(this.focus)}clone(){let e=this.anchor,t=this.focus;return new tS(tp(e.key,e.offset,e.type),tp(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=nD(this.format,e,null),this.dirty=!0}setFormat(e){this.format=e,this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){let t=p[e];return 0!=(this.format&t)}insertRawText(e){let t=e.split(/(\r?\n|\t)/),n=[],i=t.length;for(let e=0;e<i;e++){let i=t[e];"\n"===i||"\r\n"===i?n.push(e2()):"	"===i?n.push(th()):n.push(tu(i))}this.insertNodes(n)}insertText(e){let n=this.anchor,i=this.focus,r=this.format,l=this.style,o=n,s=i;!this.isCollapsed()&&i.isBefore(n)&&(o=i,s=n),"element"===o.type&&function(e,t,n,i){let r=e.getNode(),l=r.getChildAtIndex(e.offset),o=tu();if(o.setFormat(n),o.setStyle(i),l instanceof nh)l.splice(0,0,[o]);else{let e=nu(r)?n_().append(o):o;null===l?r.append(e):l.insertBefore(e)}e.is(t)&&t.set(o.__key,0,"text"),e.set(o.__key,0,"text")}(o,s,r,l),"element"===s.type&&iz(s,iH(iB(s,"next")));let a=o.offset,u=s.offset,d=this.getNodes(),c=d.length,f=d[0];td(f)||t(26);let h=f.getTextContent().length,g=f.getParentOrThrow(),_=d[c-1];if(1===c&&"element"===s.type&&(u=h,s.set(o.key,u,"text")),this.isCollapsed()&&a===h&&(nk(f)||!f.canInsertTextAfter()||!g.canInsertTextAfter()&&null===f.getNextSibling())){let t=f.getNextSibling();if(td(t)&&t.canInsertTextBefore()&&!nk(t)||((t=tu()).setFormat(r),t.setStyle(l),g.canInsertTextAfter()?f.insertAfter(t):g.insertAfter(t)),t.select(0,0),f=t,""!==e)return void this.insertText(e)}else if(this.isCollapsed()&&0===a&&(nk(f)||!f.canInsertTextBefore()||!g.canInsertTextBefore()&&null===f.getPreviousSibling())){let t=f.getPreviousSibling();if(td(t)&&!nk(t)||((t=tu()).setFormat(r),g.canInsertTextBefore()?f.insertBefore(t):g.insertBefore(t)),t.select(),f=t,""!==e)return void this.insertText(e)}else if(f.isSegmented()&&a!==h){let e=tu(f.getTextContent());e.setFormat(r),f.replace(e),f=e}else if(!this.isCollapsed()&&""!==e){let t=_.getParent();if(!g.canInsertTextBefore()||!g.canInsertTextAfter()||nr(t)&&(!t.canInsertTextBefore()||!t.canInsertTextAfter()))return this.insertText(""),tw(this.anchor,this.focus,null),void this.insertText(e)}if(1===c){if(nM(f)){let t=tu(e);return t.select(),void f.replace(t)}let t=f.getFormat(),n=f.getStyle();if(a!==u||t===r&&n===l){if(tg(f)){let t=tu(e);return t.setFormat(r),t.setStyle(l),t.select(),void f.replace(t)}}else{if(""!==f.getTextContent()){let t=tu(e);if(t.setFormat(r),t.setStyle(l),t.select(),0===a)f.insertBefore(t,!1);else{let[e]=f.splitText(a);e.insertAfter(t,!1)}return void(t.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length))}f.setFormat(r),f.setStyle(l)}let i=u-a;""===(f=f.spliceText(a,i,e,!0)).getTextContent()?f.remove():"text"===this.anchor.type&&(f.isComposing()?this.anchor.offset-=e.length:(this.format=t,this.style=n))}else{let t=new Set([...f.getParentKeys(),..._.getParentKeys()]),n=nr(f)?f:f.getParentOrThrow(),i=nr(_)?_:_.getParentOrThrow(),r=_;if(!n.is(i)&&i.isInline())do r=i,i=i.getParentOrThrow();while(i.isInline())if("text"===s.type&&(0!==u||""===_.getTextContent())||"element"===s.type&&_.getIndexWithinParent()<u)if(td(_)&&!nM(_)&&u!==_.getTextContentSize()){if(_.isSegmented()){let e=tu(_.getTextContent());_.replace(e),_=e}nu(s.getNode())||"text"!==s.type||(_=_.spliceText(0,u,"")),t.add(_.__key)}else{let e=_.getParentOrThrow();e.canBeEmpty()||1!==e.getChildrenSize()?_.remove():e.remove()}else t.add(_.__key);let l=i.getChildren(),o=new Set(d),g=n.is(i),p=n.isInline()&&null===f.getNextSibling()?n:f;for(let e=l.length-1;e>=0;e--){let t=l[e];if(t.is(f)||nr(t)&&t.isParentOf(f))break;t.isAttached()&&(!o.has(t)||t.is(r)?g||p.insertAfter(t,!1):t.remove())}if(!g){let e=i,n=null;for(;null!==e;){let i=e.getChildren(),r=i.length;(0===r||i[r-1].is(n))&&(t.delete(e.__key),n=e),e=e.getParent()}}if(nM(f))if(a===h)f.select();else{let t=tu(e);t.select(),f.replace(t)}else""===(f=f.spliceText(a,h-a,e,!0)).getTextContent()?f.remove():f.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length);for(let e=1;e<c;e++){let n=d[e],i=n.__key;t.has(i)||n.remove()}}}removeText(){let e=tI()===this;iW(this,function(e){let n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"removeEmptySlices";if(e.isCollapsed())return e;let l="root",o="next",s=r,a=iG(e,o),u=iU(a.anchor,l),d=iU(a.focus.getFlipped(),l),c=new Set,f=[];for(let e of a.iterNodeCarets(l))if(iv(e))c.add(e.origin.getKey());else if(iS(e)){let{origin:t}=e;nr(t)&&!c.has(t.getKey())||f.push(t)}for(let e of f)e.remove();for(let e of a.getTextSlices()){if(!e)continue;let{origin:t}=e.caret,n=t.getTextContentSize(),i=iY(ib(t,o)),r=t.getMode();if(Math.abs(e.distance)===n&&"removeEmptySlices"===s||"token"===r&&0!==e.distance)i.remove();else if(0!==e.distance){s="removeEmptySlices";let t=e.removeTextSlice(),n=e.caret.origin;if("segmented"===r){let e=t.origin,n=tu(e.getTextContent()).setStyle(e.getStyle()).setFormat(e.getFormat());i.replaceOrInsert(n),t=iO(n,o,t.offset)}n.is(u[0].origin)&&(u[0]=t),n.is(d[0].origin)&&(d[0]=t.getFlipped())}}for(let e of u)if(iJ(e)){n=iH(e);break}for(let e of d)if(iJ(e)){i=iH(e);break}let h=function(e,t,n){let i;if(!e||!t)return null;let r=e.getParentAtCaret(),l=t.getParentAtCaret();if(!r||!l)return null;let o=r.getParents().reverse();o.push(r);let s=l.getParents().reverse();s.push(l);let a=Math.min(o.length,s.length);for(i=0;i<a&&o[i]===s[i];i++);let u=(e,t)=>{let n;for(let r=i;r<e.length;r++){let i=e[r];if(n5(i))return;!n&&t(i)&&(n=i)}return n},d=u(o,io),c=d&&u(s,e=>n.has(e.getKey())&&io(e));return d&&c?[d,c]:null}(n,i,c);if(h){let[e,t]=h;ik(e,"previous").splice(0,t.getChildren()),t.remove()}let g=[n,i,...u,...d].find(iJ);if(g){var _;return iP(_=iV(iH(g),e.direction),_)}t(269,JSON.stringify(u.map(e=>e.origin.__key)))}(ij(this))),e&&tI()!==this&&nU(this)}formatText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isCollapsed())return this.toggleFormat(e),void nI(null);let n=this.getNodes(),i=[];for(let e of n)td(e)&&i.push(e);let r=t=>{n.forEach(n=>{if(nr(n)){let i=n.getFormatFlags(e,t);n.setTextFormat(i)}})},l=i.length;if(0===l)return this.toggleFormat(e),nI(null),void r(t);let o=this.anchor,s=this.focus,a=this.isBackward(),u=a?s:o,d=a?o:s,c=0,f=i[0],h="element"===u.type?0:u.offset;if("text"===u.type&&h===f.getTextContentSize()&&(c=1,f=i[1],h=0),null==f)return;let g=f.getFormatFlags(e,t);r(g);let _=l-1,p=i[_],m="text"===d.type?d.offset:p.getTextContentSize();if(f.is(p)){if(h===m)return;if(nk(f)||0===h&&m===f.getTextContentSize())f.setFormat(g);else{let e=f.splitText(h,m),t=0===h?e[0]:e[1];t.setFormat(g),"text"===u.type&&u.set(t.__key,0,"text"),"text"===d.type&&d.set(t.__key,m-h,"text")}return void(this.format=g)}0===h||nk(f)||([,f]=f.splitText(h),h=0),f.setFormat(g);let y=p.getFormatFlags(e,g);m>0&&(m===p.getTextContentSize()||nk(p)||([p]=p.splitText(m)),p.setFormat(y));for(let t=c+1;t<_;t++){let n=i[t],r=n.getFormatFlags(e,y);n.setFormat(r)}"text"===u.type&&u.set(f.__key,h,"text"),"text"===d.type&&d.set(p.__key,m,"text"),this.format=g|y}insertNodes(e){var n;if(0===e.length)return;if(this.isCollapsed()||this.removeText(),"root"===this.anchor.key){this.insertParagraph();let n=tI();return tC(n)||t(134),n.insertNodes(e)}let i=(this.isBackward()?this.focus:this.anchor).getNode(),r=ic(i,io),l=e[e.length-1];if(nr(r)&&"__language"in r){if("__language"in e[0])this.insertText(e[0].getTextContent());else{let t=tW(this);r.splice(t,0,e),l.selectEnd()}return}if(!e.some(e=>(nr(e)||ns(e))&&!e.isInline())){nr(r)||t(211,i.constructor.name,i.getType());let n=tW(this);return r.splice(n,0,e),void l.selectEnd()}let o=function(e){let t=n_(),n=null;for(let i=0;i<e.length;i++){let r=e[i],l=e3(r);if(l||ns(r)&&r.isInline()||nr(r)&&r.isInline()||td(r)||r.isParentRequired()){if(null===n&&(n=r.createParentElementNode(),t.append(n),l))continue;null!==n&&n.append(r)}else t.append(r),n=null}return t}(e),s=o.getLastDescendant(),a=o.getChildren(),u=nr(r)&&r.isEmpty()?null:this.insertParagraph(),d=a[a.length-1],c=a[0];nr(n=c)&&io(n)&&!n.isEmpty()&&nr(r)&&(!r.isEmpty()||r.canMergeWhenEmpty())&&(nr(r)||t(211,i.constructor.name,i.getType()),r.append(...c.getChildren()),c=a[1]),c&&(null===r&&t(212,i.constructor.name,i.getType()),function(e,n){let i=n.getParentOrThrow().getLastChild(),r=n,l=[n];for(;r!==i;)r.getNextSibling()||t(140),l.push(r=r.getNextSibling());let o=e;for(let e of l)o=o.insertAfter(e)}(r,c));let f=ic(s,io);u&&nr(f)&&(u.canMergeWhenEmpty()||io(d))&&(f.append(...u.getChildren()),u.remove()),nr(r)&&r.isEmpty()&&r.remove(),s.selectEnd();let h=nr(r)?r.getLastChild():null;e3(h)&&f!==r&&h.remove()}insertParagraph(){if("root"===this.anchor.key){let e=n_();return nj().splice(this.anchor.offset,0,[e]),e.select(),e}let e=tW(this),n=ic(this.anchor.getNode(),io);nr(n)||t(213);let i=n.getChildAtIndex(e),r=i?[i,...i.getNextSiblings()]:[],l=n.insertNewAfter(this,!1);return l?(l.append(...r),l.selectStart(),l):null}insertLineBreak(e){let t=e2();if(this.insertNodes([t]),e){let e=t.getParentOrThrow(),n=t.getIndexWithinParent();e.select(n,n)}}extract(){let e=[...this.getNodes()],t=e.length,n=e[0],i=e[t-1],[r,l]=tT(this),o=this.isBackward(),[s,a]=o?[this.focus,this.anchor]:[this.anchor,this.focus],[u,d]=o?[l,r]:[r,l];if(0===t)return[];if(1===t){if(td(n)&&!this.isCollapsed()){let e=n.splitText(u,d),t=0===u?e[0]:e[1];return t?(s.set(t.getKey(),0,"text"),a.set(t.getKey(),t.getTextContentSize(),"text"),[t]):[]}return[n]}if(td(n)&&(u===n.getTextContentSize()?e.shift():0!==u&&([,n]=n.splitText(u),e[0]=n,s.set(n.getKey(),0,"text"))),td(i)){let t=i.getTextContent().length;0===d?e.pop():d!==t&&([i]=i.splitText(d),e[e.length-1]=i,a.set(i.getKey(),i.getTextContentSize(),"text"))}return e}modify(e,t,n){var i;if(tj(this,e,t,n))return;let r="move"===e,l=t0(),o=it(n4(l));if(!o)return;let s=l._blockCursorElement,a=l._rootElement,u=this.focus.getNode();if(null===a||null===s||!nr(u)||u.isInline()||u.canBeEmpty()||ie(s,l,a),this.dirty){let e=n0(l,this.anchor.key),t=n0(l,this.focus.key);"text"===this.anchor.type&&(e=nA(e)),"text"===this.focus.type&&(t=nA(t)),e&&t&&tz(o,e,this.anchor.offset,t,this.focus.offset)}if(i=t?"backward":"forward",o.modify(e,i,n),o.rangeCount>0){let e=o.getRangeAt(0),n=this.anchor.getNode(),i=nu(n)?n:function(e){let t=e.getParentOrThrow();for(;null!==t&&!n5(t);)t=t.getParentOrThrow();return t}(n);if(this.applyDOMRange(e),this.dirty=!0,!r){let n,r,l,s,a,u=this.getNodes(),d=[],c=!1;for(let e=0;e<u.length;e++){let t=u[e];n3(t,i)?d.push(t):c=!0}if(c&&d.length>0)if(t){let e=d[0];nr(e)?e.selectStart():e.getParentOrThrow().selectStart()}else{let e=d[d.length-1];nr(e)?e.selectEnd():e.getParentOrThrow().selectEnd()}o.anchorNode===e.startContainer&&o.anchorOffset===e.startOffset||(n=this.focus,l=(r=this.anchor).key,s=r.offset,a=r.type,r.set(n.key,n.offset,n.type,!0),n.set(l,s,a,!0))}}"lineboundary"===n&&tj(this,e,t,n,"decorators")}forwardDeletion(e,t,n){if(!n&&("element"===e.type&&nr(t)&&e.offset===t.getChildrenSize()||"text"===e.type&&e.offset===t.getTextContentSize())){let e=t.getParent(),n=t.getNextSibling()||(null===e?null:e.getNextSibling());if(nr(n)&&n.isShadowRoot())return!0}return!1}deleteCharacter(e){let t=this.isCollapsed();if(this.isCollapsed()){let t=this.anchor,n=t.getNode();if(this.forwardDeletion(t,n,e))return;let i=iR(iB(t,e?"previous":"next"));if(i.getTextSlices().every(e=>null===e||0===e.distance)){let e={type:"initial"};for(let t of i.iterNodeCarets("shadowRoot"))if(iv(t))if(t.origin.isInline());else{if(t.origin.isShadowRoot()){if("merge-block"===e.type)break;if(nr(i.anchor.origin)&&i.anchor.origin.isEmpty()){let e=iH(t);iW(this,iP(e,e)),i.anchor.origin.remove()}return}"merge-next-block"!==e.type&&"merge-block"!==e.type||(e={block:e.block,caret:t,type:"merge-block"})}else{if("merge-block"===e.type)break;if(iS(t)){if(nr(t.origin)){if(t.origin.isInline()){if(!t.origin.isParentOf(i.anchor.origin))break}else e={block:t.origin,type:"merge-next-block"};continue}if(ns(t.origin)){if(t.origin.isIsolated());else if("merge-next-block"===e.type&&(t.origin.isKeyboardSelectable()||!t.origin.isInline())&&nr(i.anchor.origin)&&i.anchor.origin.isEmpty()){i.anchor.origin.remove();let e=tR();e.add(t.origin.getKey()),nU(e)}else t.origin.remove();return}break}}if("merge-block"===e.type){let{caret:t,block:n}=e;return iW(this,iP(!t.origin.isEmpty()&&n.isEmpty()?iY(ib(n,t.direction)):i.anchor,t)),this.removeText()}}let r=this.focus;if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&0===t.offset&&tE(this,t.getNode()))return}else{let i="text"===r.type?r.getNode():null;if(n="text"===t.type?t.getNode():null,null!==i&&i.isSegmented()){let t=r.offset,l=i.getTextContentSize();if(i.is(n)||e&&t!==l||!e&&0!==t)return void tO(i,e,t)}else if(null!==n&&n.isSegmented()){let r=t.offset,l=n.getTextContentSize();if(n.is(i)||e&&0!==r||!e&&r!==l)return void tO(n,e,r)}!function(e,t){let n=e.anchor,i=e.focus,r=n.getNode();if(r===i.getNode()&&"text"===n.type&&"text"===i.type){var l,o;let e=n.offset,s=i.offset,a=e<s,u=a?e:s,d=a?s:e,c=d-1;u===c||(o=l=r.getTextContent().slice(u,d),/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(o))||tb(l)||(t?i.set(i.key,c,i.type):n.set(n.key,c,n.type))}}(this,e)}}if(this.removeText(),e&&!t&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){let e=this.anchor.getNode();e.isEmpty()&&nu(e.getParent())&&null===e.getPreviousSibling()&&tE(this,e)}}deleteLine(e){this.isCollapsed()&&this.modify("extend",e,"lineboundary"),this.isCollapsed()?this.deleteCharacter(e):this.removeText()}deleteWord(e){if(this.isCollapsed()){let t=this.anchor,n=t.getNode();if(this.forwardDeletion(t,n,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function tv(e){return e instanceof tx}function tN(e){let t=e.offset;if("text"===e.type)return t;let n=e.getNode();return t===n.getChildrenSize()?n.getTextContent().length:0}function tT(e){let t=e.getStartEndPoints();if(null===t)return[0,0];let[n,i]=t;return"element"===n.type&&"element"===i.type&&n.key===i.key&&n.offset===i.offset?[0,0]:[tN(n),tN(i)]}function tE(e,t){for(let n=t;n;n=n.getParent()){if(nr(n)){if(n.collapseAtStart(e))return!0;if(n5(n))break}if(n.getPreviousSibling())break}return!1}let tb=(()=>{try{let e=RegExp("\\p{Emoji}","u"),t=e.test.bind(e);if(t("❤️")&&t("#️⃣")&&t("👍"))return t}catch(e){}return()=>!1})();function tO(e,t,n){let i=e.getTextContent().split(/(?=\s)/g),r=i.length,l=0,o=0;for(let e=0;e<r;e++){let s=e===r-1;if(o=l,l+=i[e].length,t&&l===n||l>n||s){i.splice(e,1),s&&(o=void 0);break}}let s=i.join("").trim();""===s?e.remove():(e.setTextContent(s),e.select(o,o))}function tM(e,n,i,r){let l,o=n;if(ii(e)){let s=!1,a=e.childNodes,u=a.length,d=r._blockCursorElement;o===u&&(s=!0,o=u-1);let c=a[o],f=!1;if(c===d)c=a[o+1],f=!0;else if(null!==d){let t=d.parentNode;e===t&&n>Array.prototype.indexOf.call(t.children,d)&&o--}if(td(l=nJ(c)))o=iM(l,s?"next":"previous");else{let a=nJ(e);if(null===a)return null;if(nr(a)){let u,d=r.getElementByKey(a.getKey());null===d&&t(214);let c=a.getDOMSlot(d);[a,o]=c.resolveChildIndex(a,d,e,n),nr(a)||t(215),s&&o>=a.getChildrenSize()&&(o=Math.max(0,a.getChildrenSize()-1));let h=a.getChildAtIndex(o);if(nr(h)&&(u=h.getParent(),null===i||null===u||!u.canBeEmpty()||u!==i.getNode())){let e=s?h.getLastDescendant():h.getFirstDescendant();a=null===e||nr(h=e)?h:h.getParentOrThrow(),o=0}td(h)?(l=h,a=null,o=iM(h,s?"next":"previous")):h!==a&&s&&!f&&(nr(a)||t(216),o=Math.min(a.getChildrenSize(),o+1))}else{let t=a.getIndexWithinParent();o=0===n&&ns(a)&&nJ(e)===a?t:t+1,a=a.getParentOrThrow()}if(nr(a))return tp(a.__key,o,"element")}}else l=nJ(e);return td(l)?tp(l.__key,iM(l,o,"clamp"),"text"):null}function tk(e,t,n){let i=e.offset,r=e.getNode();if(0===i){let i=r.getPreviousSibling(),l=r.getParent();if(t){if((n||!t)&&null===i&&nr(l)&&l.isInline()){let t=l.getPreviousSibling();td(t)&&e.set(t.__key,t.getTextContent().length,"text")}}else nr(i)&&!n&&i.isInline()?e.set(i.__key,i.getChildrenSize(),"element"):td(i)&&e.set(i.__key,i.getTextContent().length,"text")}else if(i===r.getTextContent().length){let i=r.getNextSibling(),l=r.getParent();if(t&&nr(i)&&i.isInline())e.set(i.__key,0,"element");else if((n||t)&&null===i&&nr(l)&&l.isInline()&&!l.canInsertTextAfter()){let t=l.getNextSibling();td(t)&&e.set(t.__key,0,"text")}}}function tw(e,t,n){if("text"===e.type&&"text"===t.type){let i=e.isBefore(t),r=e.is(t);tk(e,i,r),tk(t,!i,r),r&&t.set(e.key,e.offset,e.type);let l=t0();if(l.isComposing()&&l._compositionKey!==e.key&&tC(n)){let i=n.anchor,r=n.focus;e.set(i.key,i.offset,i.type,!0),t.set(r.key,r.offset,r.type,!0)}}}function tA(e,t,n,i,r,l){if(null===e||null===n||!nT(r,e,n))return null;let o=tM(e,t,tC(l)?l.anchor:null,r);if(null===o)return null;let s=tM(n,i,tC(l)?l.focus:null,r);if(null===s)return null;if("element"===o.type&&"element"===s.type){let t=nJ(e),i=nJ(n);if(ns(t)&&ns(i))return null}return tw(o,s,l),[o,s]}function tD(e,t,n,i,r,l){let o=tQ(),s=new tS(tp(e,t,r),tp(n,i,l),0,"");return s.dirty=!0,o._selection=s,s}function tR(){return new tx(new Set)}function tP(e,t,n,i){let r,l,o,s,a=n._window;if(null===a)return null;let u=i||a.event,d=u?u.type:void 0,c="selectionchange"===d,f=!N&&(c||"beforeinput"===d||"compositionstart"===d||"compositionend"===d||"click"===d&&u&&3===u.detail||"drop"===d||void 0===d);if(tC(e)&&!f)return e.clone();if(null===t)return null;if(r=t.anchorNode,l=t.focusNode,o=t.anchorOffset,s=t.focusOffset,(c||void 0===d)&&tC(e)&&!nT(n,r,l))return e.clone();let h=tA(r,o,l,s,n,e);if(null===h)return null;let[g,_]=h;return new tS(g,_,tC(e)?e.format:0,tC(e)?e.style:"")}function tI(){return tQ()._selection}function tL(){return t0()._editorState._selection}function tF(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=e.anchor,l=e.focus,o=r.getNode(),s=l.getNode();if(!t.is(o)&&!t.is(s))return;let a=t.__key;if(e.isCollapsed()){let t=r.offset;if(n<=t&&i>0||n<t&&i<0){let n=Math.max(0,t+i);r.set(a,n,"element"),l.set(a,n,"element"),t$(e)}}else{let o=e.isBackward(),s=o?l:r,u=s.getNode(),d=o?r:l,c=d.getNode();if(t.is(u)){let e=s.offset;(n<=e&&i>0||n<e&&i<0)&&s.set(a,Math.max(0,e+i),"element")}if(t.is(c)){let e=d.offset;(n<=e&&i>0||n<e&&i<0)&&d.set(a,Math.max(0,e+i),"element")}}t$(e)}function t$(e){let t=e.anchor,n=t.offset,i=e.focus,r=i.offset,l=t.getNode(),o=i.getNode();if(e.isCollapsed()){if(!nr(l))return;let e=l.getChildrenSize(),r=n>=e,o=r?l.getChildAtIndex(e-1):l.getChildAtIndex(n);if(td(o)){let e=0;r&&(e=o.getTextContentSize()),t.set(o.__key,e,"text"),i.set(o.__key,e,"text")}return}if(nr(l)){let e=l.getChildrenSize(),i=n>=e,r=i?l.getChildAtIndex(e-1):l.getChildAtIndex(n);if(td(r)){let e=0;i&&(e=r.getTextContentSize()),t.set(r.__key,e,"text")}}if(nr(o)){let e=o.getChildrenSize(),t=r>=e,n=t?o.getChildAtIndex(e-1):o.getChildAtIndex(r);if(td(n)){let e=0;t&&(e=n.getTextContentSize()),i.set(n.__key,e,"text")}}}function tK(e,t,n,i,r){let l=null,o=0,s=null;null!==i?(l=i.__key,td(i)?(o=i.getTextContentSize(),s="text"):nr(i)&&(o=i.getChildrenSize(),s="element")):null!==r&&(l=r.__key,td(r)?s="text":nr(r)&&(s="element")),null!==l&&null!==s?e.set(l,o,s):(-1===(o=t.getIndexWithinParent())&&(o=n.getChildrenSize()),e.set(n.__key,o,"element"))}function tB(e,t,n,i,r){"text"===e.type?e.set(n,e.offset+(t?0:r),"text"):e.offset>i.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function tz(e,t,n,i,r){try{e.setBaseAndExtent(t,n,i,r)}catch(e){}}function tW(e){let n=e;e.isCollapsed()||n.removeText();let i=tI();tC(i)&&(n=i),tC(n)||t(161);let r=n.anchor,l=r.getNode(),o=r.offset;for(;!io(l);){let e=l;if([l,o]=function(e,t){let n=e.getParent();if(!n){let e=n_();return nj().append(e),e.select(),[nj(),0]}if(td(e)){let i=e.splitText(t);if(0===i.length)return[n,e.getIndexWithinParent()];let r=+(0!==t);return[n,i[0].getIndexWithinParent()+r]}if(!nr(e)||0===t)return[n,e.getIndexWithinParent()];let i=e.getChildAtIndex(t);if(i){let n=new tS(tp(e.__key,t,"element"),tp(e.__key,t,"element"),0,""),r=e.insertNewAfter(n);r&&r.append(i,...i.getNextSiblings())}return[n,e.getIndexWithinParent()+1]}(l,o),e.is(l))break}return o}function tj(e,t,n,i){var r;let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"decorators-and-blocks";if("move"===t&&"character"===i&&!e.isCollapsed()){let[t,i]=n===e.isBackward()?[e.focus,e.anchor]:[e.anchor,e.focus];return i.set(t.key,t.offset,t.type),!0}let o=iB(e.focus,n?"previous":"next"),s="lineboundary"===i,a="move"===t,u=o,d="decorators-and-blocks"===l;if(!(iC(r=u)&&r.offset!==iM(r.origin,r.direction))){for(let e of u){d=!1;let{origin:t}=e;if(!ns(t)||t.isIsolated()||(u=e,!s||!t.isInline()))break}if(d)for(let e of iR(o).iterNodeCarets("extend"===t?"shadowRoot":"root")){if(iv(e))e.origin.isInline()||(u=e);else{if(nr(e.origin))continue;ns(e.origin)&&!e.origin.isInline()&&(u=e)}break}}if(u===o)return!1;if(a&&!s&&ns(u.origin)&&u.origin.isKeyboardSelectable()){let e=tR();return e.add(u.origin.getKey()),nU(e),!0}return u=iH(u),a&&iz(e.anchor,u),iz(e.focus,u),d||!s}let tY=null,tU=null,tJ=!1,tH=!1,tV=0,tG={characterData:!0,childList:!0,subtree:!0};function tq(){return tJ||null!==tY&&tY._readOnly}function tX(){tJ&&t(13)}function tZ(){tV>99&&t(14)}function tQ(){return null===tY&&t(195,t1()),tY}function t0(){return null===tU&&t(196,t1()),tU}function t1(){let e=0,t=new Set,n=nm.version;if("u">typeof window)for(let i of document.querySelectorAll("[contenteditable]")){let r=nO(i);if(nE(r))e++;else if(r){let e=String(r.constructor.version||"<0.17.1");e===n&&(e+=" (separately built, likely a bundler configuration issue)"),t.add(e)}}let i=` Detected on the page: ${e} compatible editor(s) with version ${n}`;return t.size&&(i+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),i}function t2(e,t,n){let i=t.__type,r=nC(e,i),l=n.get(i);void 0===l&&(l=Array.from(r.transforms),n.set(i,l));let o=l.length;for(let e=0;e<o&&(l[e](t),t.isAttached());e++);}function t3(e,t){return void 0!==e&&e.__key!==t&&e.isAttached()}function t6(e,t){if(!t)return;let n=e._updateTags,i=t;for(let e of(Array.isArray(t)||(i=[t]),i))n.add(e)}function t4(e,t,n){let i=tY,r=tJ,l=tU;tY=t,tJ=!0,tU=e;try{return n()}finally{tY=i,tJ=r,tU=l}}function t5(e,n){let i,r,l=e._pendingEditorState,o=e._rootElement,s=e._headless||null===o;if(null===l)return;let a=e._editorState,u=a._selection,d=l._selection,c=0!==e._dirtyType,h=tY,g=tJ,_=tU,p=e._updating,m=e._observer,y=null;if(e._pendingEditorState=null,e._editorState=l,!s&&c&&null!==m){tU=e,tY=l,tJ=!1,e._updating=!0;try{let n,i=e._dirtyType,r=e._dirtyElements,o=e._dirtyLeaves;m.disconnect(),G="",Z="",Q=2===i,B=e,K=e._config,z=e._nodes,W=B._listeners.mutation,j=r,Y=o,U=a._nodeMap,J=l._nodeMap,ee=l._readOnly,H=new Map(e._keyToDOMMap),V=n=new Map,function e(n,i){let r=U.get(n),l=J.get(n);void 0!==r&&void 0!==l||t(61);let o=Q||Y.has(n)||j.has(n),s=n0(B,n);if(r===l&&!o){if(nr(r)){let e=s.__lexicalTextContent;void 0!==e&&(G+=e,Z+=e)}else{let e=r.getTextContent();Z+=e,G+=e}return s}if(r!==l&&o&&nq(V,z,W,l,"updated"),l.updateDOM(r,s,K)){let e=es(n,null);return null===i&&t(62),i.replaceChild(e,s),et(n,null),e}if(nr(r)&&nr(l)){let n=l.__indent;(Q||n!==r.__indent)&&er(s,n);let i=l.__format;if((Q||i!==r.__format)&&el(s,i),o&&(function(n,i,r){q=null,X=null,function(n,i,r){let l=G,o=n.__size,s=i.__size;G="";let a=r.element;if(1===o&&1===s){let t=n.__first,r=i.__first;if(t===r)e(t,a);else{let e=eg(t),n=es(r,null);try{a.replaceChild(n,e)}catch(i){if("object"==typeof i&&null!=i)throw Error(`${i.toString()} Parent: ${a.tagName}, new child: {tag: ${n.tagName} key: ${r}}, old child: {tag: ${e.tagName}, key: ${t}}.`);throw i}et(t,null)}let l=J.get(r);td(l)&&null===q&&(q=l.getFormat(),X=l.getStyle())}else{let l=ec(n,U),u=ec(i,J);if(l.length!==o&&t(227),u.length!==s&&t(228),0===o)0!==s&&ea(u,i,0,s-1,r);else if(0===s){if(0!==o){let e=null==r.after&&null==r.before&&null==r.element.__lexicalLineBreak;en(l,0,o-1,e?null:a),e&&(a.textContent="")}}else!function(t,n,i,r,l,o){let s=r-1,a=l-1,u,d,c=o.getFirstChild(),f=0,h=0;for(;f<=s&&h<=a;){let t=n[f],r=i[h];if(t===r)c=eh(e(r,o.element)),f++,h++;else{void 0===u&&(u=new Set(n)),void 0===d&&(d=new Set(i));let l=d.has(t),s=u.has(r);if(l)if(s){let t=n0(B,r);t===c?c=eh(e(r,o.element)):(o.withBefore(c).insertChild(t),e(r,o.element)),f++,h++}else es(r,o.withBefore(c)),h++;else c=eh(eg(t)),et(t,o.element),f++}let l=J.get(r);null!==l&&td(l)&&null===q&&(q=l.getFormat(),X=l.getStyle())}let g=f>s,_=h>a;if(g&&!_){let e=i[a+1],n=void 0===e?null:B.getElementByKey(e);ea(i,t,h,a,o.withBefore(n))}else _&&!g&&en(n,f,s,o.element)}(i,l,u,o,s,r)}nQ(i)&&(G+="\n\n"),a.__lexicalTextContent=G,G=l+G}(n,i,i.getDOMSlot(r)),null==q||q===i.__textFormat||ee||i.setTextFormat(q),null==X||X===i.__textStyle||ee||i.setTextStyle(X)}(r,l,s),nu(l)||l.isInline()||ed(r,l,s)),nQ(l)&&(G+="\n\n",Z+="\n\n"),(Q||l.__dir!==r.__dir)&&(eo(s,l),nu(l)&&!Q))for(let e of l.getChildren())nr(e)&&eo(n0(B,e.getKey()),e)}else{let e=l.getTextContent();if(ns(l)){let e=l.decorate(B,K);null!==e&&ef(n,e)}G+=e,Z+=e}if(!ee&&nu(l)&&l.__cachedText!==Z){let e=l.getWritable();e.__cachedText=Z,l=e}return s}("root",null),B=void 0,z=void 0,j=void 0,Y=void 0,U=void 0,J=void 0,K=void 0,H=void 0,V=void 0,y=n}catch(t){if(t instanceof Error&&e._onError(t),tH)throw t;return np(e,null,o,l),M(e),e._dirtyType=2,tH=!0,t5(e,a),void(tH=!1)}finally{m.observe(o,tG),e._updating=p,tY=h,tJ=g,tU=_}}l._readOnly||(l._readOnly=!0);let x=e._dirtyLeaves,C=e._dirtyElements,S=e._normalizedNodes,v=e._updateTags,N=e._deferred;c&&(e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),function(e,t){let n,i=e._decorators,r=e._pendingDecorators||i,l=t._nodeMap;for(n in r)l.has(n)||(r===i&&(r=nz(e)),delete r[n])}(e,l);let T=s?null:it(n4(e));if(e._editable&&null!==T&&(c||null===d||d.dirty||!d.is(u))&&null!==o&&!v.has("skip-dom-selection")){tU=e,tY=l;try{if(null!==m&&m.disconnect(),c||null===d||d.dirty){let t=e._blockCursorElement;null!==t&&ie(t,e,o),function(e,t,n,i,r,l,o){let s=i.anchorNode,a=i.focusNode,u=i.anchorOffset,d=i.focusOffset,c=document.activeElement;if(r.has("collaboration")&&c!==l||null!==c&&nN(c))return;if(!tC(t))return null!==e&&nT(n,s,a)&&i.removeAllRanges();let f=t.anchor,h=t.focus,g=f.key,_=h.key,p=n0(n,g),m=n0(n,_),y=f.offset,x=h.offset,C=t.format,S=t.style,v=t.isCollapsed(),N=p,T=m,E=!1;if("text"===f.type){N=nA(p);let e=f.getNode();E=e.getFormat()!==C||e.getStyle()!==S}else tC(e)&&"text"===e.anchor.type&&(E=!0);if("text"===h.type&&(T=nA(m)),null!==N&&null!==T&&(v&&(null===e||E||tC(e)&&(e.format!==C||e.style!==S))&&(eK=[C,S,y,g,performance.now()]),u!==y||d!==x||s!==N||a!==T||"Range"===i.type&&v||(null!==c&&l.contains(c)||r.has("skip-selection-focus")||l.focus({preventScroll:!0}),"element"===f.type))){if(tz(i,N,y,T,x),!r.has("skip-scroll-into-view")&&t.isCollapsed()&&null!==l&&l===document.activeElement){let e=tC(t)&&"element"===t.anchor.type?N.childNodes[y]||null:i.rangeCount>0?i.getRangeAt(0):null;if(null!==e){let t;if(e instanceof Text){let n=document.createRange();n.selectNode(e),t=n.getBoundingClientRect()}else t=e.getBoundingClientRect();!function(e,t,n){let i=n2(n),r=n6(i);if(null===i||null===r)return;let{top:l,bottom:o}=t,s=0,a=0,u=n;for(;null!==u;){let t=u===i.body;if(t)s=0,a=n4(e).innerHeight;else{let e=u.getBoundingClientRect();s=e.top,a=e.bottom}let n=0;if(l<s?n=-(s-l):o>a&&(n=o-a),0!==n)if(t)r.scrollBy(0,n);else{let e=u.scrollTop;u.scrollTop+=n;let t=u.scrollTop-e;l-=t,o-=t}if(t)break;u=n1(u)}}(n,t,l)}}eL=!0}}(u,d,e,T,v,o)}!function(e,t,n){let i=e._blockCursorElement;if(tC(n)&&n.isCollapsed()&&"element"===n.anchor.type&&t.contains(document.activeElement)){let r=n.anchor,l=r.getNode(),o=r.offset,s=!1,a=null;if(o===l.getChildrenSize())n7(l.getChildAtIndex(o-1))&&(s=!0);else{let t=l.getChildAtIndex(o);if(null!==t&&n7(t)){let n=t.getPreviousSibling();(null===n||n7(n))&&(s=!0,a=e.getElementByKey(t.__key))}}if(s){let n,r,o,s=e.getElementByKey(l.__key);return null===i&&(n=e._config.theme,(r=document.createElement("div")).contentEditable="false",r.setAttribute("data-lexical-cursor","true"),o=n.blockCursor,void 0!==o&&("string"==typeof o&&(o=n.blockCursor=f(o)),void 0!==o&&r.classList.add(...o)),e._blockCursorElement=i=r),t.style.caretColor="transparent",null===a?s.appendChild(i):s.insertBefore(i,a)}}null!==i&&ie(i,e,t)}(e,o,d)}finally{null!==m&&m.observe(o,tG),tU=_,tY=h}}null!==y&&function(e,t,n,i,r){let l=Array.from(e._listeners.mutation),o=l.length;for(let e=0;e<o;e++){let[o,s]=l[e];for(let e of s){let l=t.get(e);void 0!==l&&o(l,{dirtyLeaves:i,prevEditorState:r,updateTags:n})}}}(e,y,v,x,a),tC(d)||null===d||null!==u&&u.is(d)||e.dispatchCommand(ep,void 0);let E=e._pendingDecorators;null!==E&&(e._decorators=E,e._pendingDecorators=null,t9("decorator",e,!0,E)),i=nW(n||a),i!==(r=nW(l))&&t9("textcontent",e,!0,r),t9("update",e,!0,{dirtyElements:C,dirtyLeaves:x,editorState:l,mutatedNodes:y,normalizedNodes:S,prevEditorState:n||a,tags:v}),function(e,t){if(e._deferred=[],0!==t.length){let n=e._updating;e._updating=!0;try{for(let e=0;e<t.length;e++)t[e]()}finally{e._updating=n}}}(e,N),function(e){let t=e._updates;if(0!==t.length){let n=t.shift();if(n){let[t,i]=n;t7(e,t,i)}}}(e)}function t9(e,t,n){for(var i=arguments.length,r=Array(i>3?i-3:0),l=3;l<i;l++)r[l-3]=arguments[l];let o=t._updating;t._updating=n;try{let n=Array.from(t._listeners[e]);for(let e=0;e<n.length;e++)n[e].apply(null,r)}finally{t._updating=o}}function t8(e,n){let i=e._updates,r=n||!1;for(;0!==i.length;){let n=i.shift();if(n){let i,[l,o]=n,s=e._pendingEditorState;void 0!==o&&(i=o.onUpdate,o.skipTransforms&&(r=!0),o.discrete&&(null===s&&t(191),s._flushSync=!0),i&&e._deferred.push(i),t6(e,o.tag)),null==s?t7(e,l,o):l()}}return r}function t7(e,n,i){let r=e._updateTags,l,o=!1,s=!1;void 0!==i&&(l=i.onUpdate,t6(e,i.tag),o=i.skipTransforms||!1,s=i.discrete||!1),l&&e._deferred.push(l);let a=e._editorState,u=e._pendingEditorState,d=!1;(null===u||u._readOnly)&&(u=e._pendingEditorState=nd(u||a),d=!0),u._flushSync=s;let c=tY,f=tJ,h=tU,g=e._updating;tY=u,tJ=!1,e._updating=!0,tU=e;let _=e._headless||null===e.getRootElement();ny=null;try{var p;let r,l;d&&(_?null!==a._selection&&(u._selection=a._selection.clone()):u._selection=(p=i&&i.event||null,r=e.getEditorState()._selection,l=it(n4(e)),tC(r)||null==r?tP(r,l,e,p):r.clone()));let s=e._compositionKey;n(),o=t8(e,o),function(e,t){let n=t.getEditorState()._selection,i=e._selection;if(tC(i)){let e,t=i.anchor,r=i.focus;if("text"===t.type&&(e=t.getNode()).selectionTransform(n,i),"text"===r.type){let t=r.getNode();e!==t&&t.selectionTransform(n,i)}}}(u,e),0!==e._dirtyType&&(o?function(e,t){let n=t._dirtyLeaves,i=e._nodeMap;for(let e of n){let t=i.get(e);td(t)&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&F(t)}}(u,e):function(e,t){let n=t._dirtyLeaves,i=t._dirtyElements,r=e._nodeMap,l=nL(),o=new Map,s=n,a=s.size,u=i,d=u.size;for(;a>0||d>0;){if(a>0){for(let e of(t._dirtyLeaves=new Set,s)){let i=r.get(e);td(i)&&i.isAttached()&&i.isSimpleText()&&!i.isUnmergeable()&&F(i),void 0!==i&&t3(i,l)&&t2(t,i,o),n.add(e)}if((a=(s=t._dirtyLeaves).size)>0){tV++;continue}}for(let e of(t._dirtyLeaves=new Set,t._dirtyElements=new Map,u.delete("root")&&u.set("root",!0),u)){let n=e[0],s=e[1];if(i.set(n,s),!s)continue;let a=r.get(n);void 0!==a&&t3(a,l)&&t2(t,a,o)}a=(s=t._dirtyLeaves).size,d=(u=t._dirtyElements).size,tV++}t._dirtyLeaves=n,t._dirtyElements=i}(u,e),t8(e),function(e,t,n,i){let r=e._nodeMap,l=t._nodeMap,o=[];for(let[e]of i){let t=l.get(e);void 0!==t&&(t.isAttached()||(nr(t)&&function e(t,n,i,r,l,o){let s=t.getFirstChild();for(;null!==s;){let t=s.__key;s.__parent===n&&(nr(s)&&e(s,t,i,r,l,o),i.has(t)||o.delete(t),l.push(t)),s=s.getNextSibling()}}(t,e,r,l,o,i),r.has(e)||i.delete(e),o.push(e)))}for(let e of o)l.delete(e);for(let e of n){let t=l.get(e);void 0===t||t.isAttached()||(r.has(e)||n.delete(e),l.delete(e))}}(a,u,e._dirtyLeaves,e._dirtyElements)),s!==e._compositionKey&&(u._flushSync=!0);let c=u._selection;if(tC(c)){let e=u._nodeMap,n=c.anchor.key,i=c.focus.key;void 0!==e.get(n)&&void 0!==e.get(i)||t(19)}else tv(c)&&0===c._nodes.size&&(u._selection=null)}catch(t){return t instanceof Error&&e._onError(t),e._pendingEditorState=a,e._dirtyType=2,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void t5(e)}finally{tY=c,tJ=f,tU=h,e._updating=g,tV=0}0!==e._dirtyType||e._deferred.length>0||function(e,t){let n=t.getEditorState()._selection,i=e._selection;if(null!==i){if(i.dirty||!i.is(n))return!0}else if(null!==n)return!0;return!1}(u,e)?u._flushSync?(u._flushSync=!1,t5(e)):d&&nv(()=>{t5(e)}):(u._flushSync=!1,d&&(r.clear(),e._deferred=[],e._pendingEditorState=null))}function ne(e,t,n){tU===e&&void 0===n?t():t7(e,t,n)}class nt{element;before;after;constructor(e,t,n){this.element=e,this.before=t||null,this.after=n||null}withBefore(e){return new nt(this.element,e,this.after)}withAfter(e){return new nt(this.element,this.before,e)}withElement(e){return this.element===e?this:new nt(e,this.before,this.after)}insertChild(e){let n=this.before||this.getManagedLineBreak();return null!==n&&n.parentElement!==this.element&&t(222),this.element.insertBefore(e,n),this}removeChild(e){return e.parentElement!==this.element&&t(223),this.element.removeChild(e),this}replaceChild(e,n){return n.parentElement!==this.element&&t(224),this.element.replaceChild(e,n),this}getFirstChild(){let e=this.after?this.after.nextSibling:this.element.firstChild;return e===this.before||e===this.getManagedLineBreak()?null:e}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(e){null===e?this.removeManagedLineBreak():this.insertManagedLineBreak("decorator"===e&&(c||u||a))}removeManagedLineBreak(){let e=this.getManagedLineBreak();if(e){let t=this.element,n="IMG"===e.nodeName?e.nextSibling:null;n&&t.removeChild(n),t.removeChild(e),t.__lexicalLineBreak=void 0}}insertManagedLineBreak(e){let t=this.getManagedLineBreak();if(t){if(e===("IMG"===t.nodeName))return;this.removeManagedLineBreak()}let n=this.element,i=this.before,r=document.createElement("br");if(n.insertBefore(r,i),e){let e=document.createElement("img");e.setAttribute("data-lexical-linebreak","true"),e.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",e.alt="",n.insertBefore(e,r),n.__lexicalLineBreak=e}else n.__lexicalLineBreak=r}getFirstChildOffset(){let e=0;for(let t=this.after;null!==t;t=t.previousSibling)e++;return e}resolveChildIndex(e,t,n,i){if(n===this.element){let t=this.getFirstChildOffset();return[e,Math.min(t+e.getChildrenSize(),Math.max(t,i))]}let r=nn(t,n);r.push(i);let l=nn(t,this.element),o=e.getIndexWithinParent();for(let e=0;e<l.length;e++){let t=r[e],n=l[e];if(void 0===t||t<n)break;if(t>n){o+=1;break}}return[e.getParentOrThrow(),o]}}function nn(e,n){let i=[],r=n;for(;r!==e&&null!==r;r=r.parentNode){let e=0;for(let t=r.previousSibling;null!==t;t=t.previousSibling)e++;i.push(e)}return r!==e&&t(225),i.reverse()}class ni extends eZ{__first;__last;__size;__format;__style;__indent;__dir;__textFormat;__textStyle;constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(e){super.afterCloneFrom(e),this.__key===e.__key&&(this.__first=e.__first,this.__last=e.__last,this.__size=e.__size),this.__indent=e.__indent,this.__format=e.__format,this.__style=e.__style,this.__dir=e.__dir,this.__textFormat=e.__textFormat,this.__textStyle=e.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){return x[this.getFormat()]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){let e=t0()._dirtyElements;return null!==e&&e.has(this.__key)}isLastChild(){let e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return null!==t&&t.is(e)}getAllTextNodes(){let e=[],t=this.getFirstChild();for(;null!==t;){if(td(t)&&e.push(t),nr(t)){let n=t.getAllTextNodes();e.push(...n)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;nr(e);){let t=e.getFirstChild();if(null===t)break;e=t}return e}getLastDescendant(){let e=this.getLastChild();for(;nr(e);){let t=e.getLastChild();if(null===t)break;e=t}return e}getDescendantByIndex(e){let t=this.getChildren(),n=t.length;if(e>=n){let e=t[n-1];return nr(e)&&e.getLastDescendant()||e||null}let i=t[e];return nr(i)&&i.getFirstDescendant()||i||null}getFirstChild(){let e=this.getLatest().__first;return null===e?null:nF(e)}getFirstChildOrThrow(){let e=this.getFirstChild();return null===e&&t(45,this.__key),e}getLastChild(){let e=this.getLatest().__last;return null===e?null:nF(e)}getLastChildOrThrow(){let e=this.getLastChild();return null===e&&t(96,this.__key),e}getChildAtIndex(e){let t,n,i=this.getChildrenSize();if(e<i/2){for(t=this.getFirstChild(),n=0;null!==t&&n<=e;){if(n===e)return t;t=t.getNextSibling(),n++}return null}for(t=this.getLastChild(),n=i-1;null!==t&&n>=e;){if(n===e)return t;t=t.getPreviousSibling(),n--}return null}getTextContent(){let e="",t=this.getChildren(),n=t.length;for(let i=0;i<n;i++){let r=t[i];e+=r.getTextContent(),nr(r)&&i!==n-1&&!r.isInline()&&(e+="\n\n")}return e}getTextContentSize(){let e=0,t=this.getChildren(),n=t.length;for(let i=0;i<n;i++){let r=t[i];e+=r.getTextContentSize(),nr(r)&&i!==n-1&&!r.isInline()&&(e+=2)}return e}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(e){if(""!==e){let t=y[e];return 0!=(this.getFormat()&t)}return!1}hasTextFormat(e){let t=p[e];return 0!=(this.getTextFormat()&t)}getFormatFlags(e,t){return nD(this.getLatest().__textFormat,e,t)}getTextStyle(){return this.getLatest().__textStyle}select(e,t){tX();let n=tI(),i=e,r=t,l=this.getChildrenSize();if(!this.canBeEmpty()){if(0===e&&0===t){let e=this.getFirstChild();if(td(e)||nr(e))return e.select(0,0)}else if((void 0===e||e===l)&&(void 0===t||t===l)){let e=this.getLastChild();if(td(e)||nr(e))return e.select()}}void 0===i&&(i=l),void 0===r&&(r=l);let o=this.__key;return tC(n)?(n.anchor.set(o,i,"element"),n.focus.set(o,r,"element"),n.dirty=!0,n):tD(o,i,o,r,"element","element")}selectStart(){let e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){let e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){let e=this.getWritable();return this.getChildren().forEach(e=>e.remove()),e}append(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.splice(this.getChildrenSize(),0,t)}setDirection(e){let t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=""!==e?y[e]:0,this}setStyle(e){return this.getWritable().__style=e||"",this}setTextFormat(e){let t=this.getWritable();return t.__textFormat=e,t}setTextStyle(e){let t=this.getWritable();return t.__textStyle=e,t}setIndent(e){return this.getWritable().__indent=e,this}splice(e,n,i){eX(this)&&t(324,this.__key,this.__type);let r=this.getChildrenSize(),l=this.getWritable();e+n<=r||t(226,String(e),String(n),String(r));let o=l.__key,s=[],a=[],u=this.getChildAtIndex(e+n),d=null,c=r-n+i.length;if(0!==e)if(e===r)d=this.getLastChild();else{let t=this.getChildAtIndex(e);null!==t&&(d=t.getPreviousSibling())}if(n>0){let e=null===d?this.getFirstChild():d.getNextSibling();for(let i=0;i<n;i++){null===e&&t(100);let n=e.getNextSibling(),i=e.__key;nR(e.getWritable()),a.push(i),e=n}}let f=d;for(let e of i){null!==f&&e.is(f)&&(d=f=f.getPreviousSibling());let n=e.getWritable();n.__parent===o&&c--,nR(n);let i=e.__key;if(null===f)l.__first=i,n.__prev=null;else{let e=f.getWritable();e.__next=i,n.__prev=e.__key}e.__key===o&&t(76),n.__parent=o,s.push(i),f=e}if(e+n===r)null!==f&&(f.getWritable().__next=null,l.__last=f.__key);else if(null!==u){let e=u.getWritable();if(null!==f){let t=f.getWritable();e.__prev=f.__key,t.__next=u.__key}else e.__prev=null}if(l.__size=c,a.length){let e=tI();if(tC(e)){let t=new Set(a),n=new Set(s),{anchor:i,focus:r}=e;nl(i,t,n)&&tK(i,i.getNode(),this,d,u),nl(r,t,n)&&tK(r,r.getNode(),this,d,u),0!==c||this.canBeEmpty()||n5(this)||this.remove()}}return l}getDOMSlot(e){return new nt(e)}exportDOM(e){let{element:t}=super.exportDOM(e);if(ii(t)){let e=this.getIndent();e>0&&(t.style.paddingInlineStart=40*e+"px");let n=this.getDirection();n&&(t.dir=n)}return{element:t}}exportJSON(){let e={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},t=this.getTextFormat(),n=this.getTextStyle();return 0===t&&""===n||n5(this)||this.getChildren().some(td)||(0!==t&&(e.textFormat=t),""!==n&&(e.textStyle=n)),e}updateFromJSON(e){return super.updateFromJSON(e).setFormat(e.format).setIndent(e.indent).setDirection(e.direction).setTextFormat(e.textFormat||0).setTextStyle(e.textStyle||"")}insertNewAfter(e,t){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,t,n){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(e,t){let n=this.getDOMSlot(e),i=n.getFirstChild();for(let e=this.getFirstChild();e;e=e.getNextSibling()){let r=t.getElementByKey(e.getKey());null!==r&&(null==i?(n.insertChild(r),i=r):i!==r&&n.replaceChild(r,i),i=i.nextSibling)}}}function nr(e){return e instanceof ni}function nl(e,t,n){let i=e.getNode();for(;i;){let e=i.__key;if(t.has(e)&&!n.has(e))return!0;i=i.getParent()}return!1}class no extends eZ{decorate(e,t){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function ns(e){return e instanceof no}class na extends ni{__cachedText;static getType(){return"root"}static clone(){return new na}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){t(51)}getTextContent(){let e=this.__cachedText;return(tq()||0===t0()._dirtyType)&&null!==e?e:super.getTextContent()}remove(){t(52)}replace(e){t(53)}insertBefore(e){t(54)}insertAfter(e){t(55)}updateDOM(e,t){return!1}splice(e,n,i){for(let e of i)nr(e)||ns(e)||t(282);return super.splice(e,n,i)}static importJSON(e){return nj().updateFromJSON(e)}collapseAtStart(){return!0}}function nu(e){return e instanceof na}function nd(e){return new nf(new Map(e._nodeMap))}function nc(){return new nf(new Map([["root",new na]]))}class nf{_nodeMap;_selection;_flushSync;_readOnly;constructor(e,t){this._nodeMap=e,this._selection=t||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(e,t){return t4(t&&t.editor||null,this,e)}clone(e){let t=new nf(this._nodeMap,void 0===e?this._selection:e);return t._readOnly=!0,t}toJSON(){return t4(null,this,()=>({root:function e(n){let i=n.exportJSON(),r=n.constructor;if(i.type!==r.getType()&&t(130,r.name),nr(n)){let l=i.children;Array.isArray(l)||t(59,r.name);let o=n.getChildren();for(let t=0;t<o.length;t++){let n=e(o[t]);l.push(n)}}return i}(nj())}))}}class nh extends ni{static getType(){return"paragraph"}static clone(e){return new nh(e.__key)}createDOM(e){let t=document.createElement("p"),n=nG(e.theme,"paragraph");return void 0!==n&&t.classList.add(...n),t}updateDOM(e,t,n){return!1}static importDOM(){return{p:e=>({conversion:ng,priority:0})}}exportDOM(e){let{element:t}=super.exportDOM(e);if(ii(t)){this.isEmpty()&&t.append(document.createElement("br"));let e=this.getFormatType();e&&(t.style.textAlign=e)}return{element:t}}static importJSON(e){return n_().updateFromJSON(e)}exportJSON(){let e=super.exportJSON();if(void 0===e.textFormat||void 0===e.textStyle){let t=this.getChildren().find(td);t?(e.textFormat=t.getFormat(),e.textStyle=t.getStyle()):(e.textFormat=this.getTextFormat(),e.textStyle=this.getTextStyle())}return e}insertNewAfter(e,t){let n=n_();n.setTextFormat(e.format),n.setTextStyle(e.style);let i=this.getDirection();return n.setDirection(i),n.setFormat(this.getFormatType()),n.setStyle(this.getStyle()),this.insertAfter(n,t),n}collapseAtStart(){let e=this.getChildren();if(0===e.length||td(e[0])&&""===e[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function ng(e){var t,n;let i,r=n_();return e.style&&(r.setFormat(e.style.textAlign),t=e,n=r,i=Math.round((parseInt(t.style.paddingInlineStart,10)||0)/40),n.setIndent(i)),{node:r}}function n_(){return n9(new nh)}function np(e,t,n,i){let r=e._keyToDOMMap;r.clear(),e._editorState=nc(),e._pendingEditorState=i,e._compositionKey=null,e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;let l=e._observer;null!==l&&(l.disconnect(),e._observer=null),null!==t&&(t.textContent=""),null!==n&&(n.textContent="",r.set("root",n))}class nm{static version;_headless;_parentEditor;_rootElement;_editorState;_pendingEditorState;_compositionKey;_deferred;_keyToDOMMap;_updates;_updating;_listeners;_commands;_nodes;_decorators;_pendingDecorators;_config;_dirtyType;_cloneNotNeeded;_dirtyLeaves;_dirtyElements;_normalizedNodes;_updateTags;_observer;_key;_onError;_htmlConversions;_window;_editable;_blockCursorElement;_createEditorArgs;constructor(e,t,n,i,r,l,o,s){this._createEditorArgs=s,this._parentEditor=t,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=i,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5),this._onError=r,this._htmlConversions=l,this._editable=o,this._headless=null!==t&&t._headless,this._window=null,this._blockCursorElement=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(e){let t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){let t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){let t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){let t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){let t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,n,i){void 0===i&&t(35);let r=this._commands;r.has(e)||r.set(e,[new Set,new Set,new Set,new Set,new Set]);let l=r.get(e);void 0===l&&t(36,String(e));let o=l[i];return o.add(n),()=>{o.delete(n),l.every(e=>0===e.size)&&r.delete(e)}}registerMutationListener(e,t,n){let i=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(e)).klass,r=this._listeners.mutation,l=r.get(t);void 0===l&&(l=new Set,r.set(t,l)),l.add(i);let o=n&&n.skipInitialization;return void 0!==o&&o||this.initializeMutationListener(t,i),()=>{l.delete(i),0===l.size&&r.delete(t)}}getRegisteredNode(e){let n=this._nodes.get(e.getType());return void 0===n&&t(37,e.name),n}resolveRegisteredNodeAfterReplacements(e){for(;e.replaceWithKlass;)e=this.getRegisteredNode(e.replaceWithKlass);return e}initializeMutationListener(e,t){let n=this._editorState,i=iu(n).get(t.getType());if(!i)return;let r=new Map;for(let e of i.keys())r.set(e,"created");r.size>0&&e(r,{dirtyLeaves:new Set,prevEditorState:n,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(e,t){let n=this.getRegisteredNode(e);return n.transforms.add(t),n}registerNodeTransform(e,t){let n=this.registerNodeTransformToKlass(e,t),i=[n],r=n.replaceWithKlass;if(null!=r){let e=this.registerNodeTransformToKlass(r,t);i.push(e)}return function(e,t){let n=iu(e.getEditorState()),i=[];for(let e of t){let t=n.get(e);t&&i.push(t)}0!==i.length&&e.update(()=>{for(let e of i)for(let t of e.keys()){let e=nF(t);e&&e.markDirty()}},null===e._pendingEditorState?{tag:eQ}:void 0)}(this,i.map(e=>e.klass.getType())),()=>{i.forEach(e=>e.transforms.delete(t))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return nZ(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){let n=this._rootElement;if(e!==n){let i=nG(this._config.theme,"root"),r=this._pendingEditorState||this._editorState;if(this._rootElement=e,np(this,n,e,r),null!==n&&(this._config.disableEvents||function(e){let n=eP.get(e);if(void 0===n)return eV();let i=eI.get(n);if(void 0===i)return eV();let r=i-1;r>=0||t(164),eP.delete(e),eI.set(n,r),0===r&&n.removeEventListener("selectionchange",eU);let l=nO(e);nE(l)?(!function(e){if(null!==e._parentEditor){let t=nH(e),n=t[t.length-1]._key;eY.get(n)===e&&eY.delete(n)}else eY.delete(e._key)}(l),e.__lexicalEditor=null):l&&t(198);let o=ej(e);for(let e=0;e<o.length;e++)o[e]();e.__lexicalEventHandles=[]}(n),null!=i&&n.classList.remove(...i)),null!==e){let t=n6(e),n=e.style;n.userSelect="text",n.whiteSpace="pre-wrap",n.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=t,this._dirtyType=2,M(this),this._updateTags.add(eQ),t5(this),this._config.disableEvents||function(e,t){let n=e.ownerDocument;eP.set(e,n);let i=eI.get(n)??0;i<1&&n.addEventListener("selectionchange",eU),eI.set(n,i+1),e.__lexicalEditor=t;let r=ej(e);for(let n=0;n<eR.length;n++){let[i,l]=eR[n],o="function"==typeof l?e=>{eH(e)||(eJ(e),(t.isEditable()||"click"===i)&&l(e,t))}:e=>{if(eH(e))return;eJ(e);let n=t.isEditable();switch(i){case"cut":return n&&nZ(t,ek,e);case"copy":return nZ(t,eM,e);case"paste":return n&&nZ(t,ev,e);case"dragstart":return n&&nZ(t,eE,e);case"dragover":return n&&nZ(t,eb,e);case"dragend":return n&&nZ(t,eO,e);case"focus":return n&&nZ(t,ew,e);case"blur":return n&&nZ(t,eA,e);case"drop":return n&&nZ(t,eT,e)}};e.addEventListener(i,o),r.push(()=>{e.removeEventListener(i,o)})}}(e,this),null!=i&&e.classList.add(...i)}else this._window=null,this._updateTags.add(eQ),t5(this);t9("root",this,!1,e,n)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,n){let i;e.isEmpty()&&t(38);let r=e;r._readOnly&&((r=nd(e))._selection=e._selection?e._selection.clone():null),null!==(i=this._observer)&&O(this,i.takeRecords(),i);let l=this._pendingEditorState,o=this._updateTags,s=void 0!==n?n.tag:null;null===l||l.isEmpty()||(null!=s&&o.add(s),t5(this)),this._pendingEditorState=r,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=s&&o.add(s),this._updating||t5(this)}parseEditorState(e,n){return function(e,n,i){let r=nc(),l=tY,o=tJ,s=tU,a=n._dirtyElements,u=n._dirtyLeaves,d=n._cloneNotNeeded,c=n._dirtyType;n._dirtyElements=new Map,n._dirtyLeaves=new Set,n._cloneNotNeeded=new Set,n._dirtyType=0,tY=r,tJ=!1,tU=n,ny=null;try{let l=n._nodes;(function e(n,i){let r=n.type,l=i.get(r);void 0===l&&t(17,r);let o=l.klass;n.type!==o.getType()&&t(18,o.name);let s=o.importJSON(n),a=n.children;if(nr(s)&&Array.isArray(a))for(let t=0;t<a.length;t++){let n=e(a[t],i);s.append(n)}return s})(e.root,l),i&&i(),r._readOnly=!0}catch(e){e instanceof Error&&n._onError(e)}finally{n._dirtyElements=a,n._dirtyLeaves=u,n._cloneNotNeeded=d,n._dirtyType=c,tY=l,tJ=o,tU=s}return r}("string"==typeof e?JSON.parse(e):e,this,n)}read(e){return t5(this),this.getEditorState().read(e,{editor:this})}update(e,t){this._updating?this._updates.push([e,t]):t7(this,e,t)}focus(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._rootElement;null!==n&&(n.setAttribute("autocapitalize","off"),ne(this,()=>{var i,r;let l=tI(),o=nj();null!==l?l.dirty||nU(l.clone()):0!==o.getChildrenSize()&&("rootStart"===t.defaultSelection?o.selectStart():o.selectEnd()),i="focus",tX(),t0()._updateTags.add(i),r=()=>{n.removeAttribute("autocapitalize"),e&&e()},tX(),t0()._deferred.push(r)}),null===this._pendingEditorState&&n.removeAttribute("autocapitalize"))}blur(){let e=this._rootElement;null!==e&&e.blur();let t=it(this._window);null!==t&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,t9("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}nm.version="0.39.0+prod.esm";let ny=null,nx=1;function nC(e,n){let i=nS(e,n);return void 0===i&&t(30,n),i}function nS(e,t){return e._nodes.get(t)}let nv="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)};function nN(e){let t=document.activeElement;if(!ii(t))return!1;let n=t.nodeName;return ns(nB(e))&&("INPUT"===n||"TEXTAREA"===n||"true"===t.contentEditable&&null==nO(t))}function nT(e,t,n){let i=e.getRootElement();try{return null!==i&&i.contains(t)&&i.contains(n)&&null!==t&&!nN(t)&&nb(t)===e}catch(e){return!1}}function nE(e){return e instanceof nm}function nb(e){let t=e;for(;null!=t;){let e=nO(t);if(nE(e))return e;t=n1(t)}return null}function nO(e){return e?e.__lexicalEditor:null}function nM(e){return tg(e)||e.isToken()}function nk(e){return nM(e)||e.isSegmented()}function nw(e){return ir(e)&&3===e.nodeType}function nA(e){let t=e;for(;null!=t;){if(nw(t))return t;t=t.firstChild}return null}function nD(e,t,n){let i=p[t];if(null!==n&&(e&i)==(n&i))return e;let r=e^i;return"subscript"===t?r&=~p.superscript:"superscript"===t?r&=~p.subscript:"lowercase"===t?(r&=~p.uppercase,r&=~p.capitalize):"uppercase"===t?(r&=~p.lowercase,r&=~p.capitalize):"capitalize"===t&&(r&=~p.lowercase,r&=~p.uppercase),r}function nR(e){let t=e.getParent();if(null!==t){let n=e.getWritable(),i=t.getWritable(),r=e.getPreviousSibling(),l=e.getNextSibling(),o=null!==l?l.__key:null,s=null!==r?r.__key:null,a=null!==r?r.getWritable():null,u=null!==l?l.getWritable():null;null===r&&(i.__first=o),null===l&&(i.__last=s),null!==a&&(a.__next=o),null!==u&&(u.__prev=s),n.__prev=null,n.__next=null,n.__parent=null,i.__size--}}function nP(e){tZ(),eX(e)&&t(323,e.__key,e.__type);let n=e.getLatest(),i=n.__parent,r=tQ(),l=t0(),o=r._nodeMap,s=l._dirtyElements;null!==i&&function(e,t,n){let i=e;for(;null!==i;){if(n.has(i))return;let e=t.get(i);if(void 0===e)break;n.set(i,!1),i=e.__parent}}(i,o,s);let a=n.__key;l._dirtyType=1,nr(e)?s.set(a,!0):l._dirtyLeaves.add(a)}function nI(e){tX();let t=t0(),n=t._compositionKey;if(e!==n){if(t._compositionKey=e,null!==n){let e=nF(n);null!==e&&e.getWritable()}if(null!==e){let t=nF(e);null!==t&&t.getWritable()}}}function nL(){return tq()?null:t0()._compositionKey}function nF(e,t){let n=(t||tQ())._nodeMap.get(e);return void 0===n?null:n}function n$(e,t){let n=nK(e,t0());return void 0!==n?nF(n,t):null}function nK(e,t){return e[`__lexicalKey_${t._key}`]}function nB(e,t){let n=e;for(;null!=n;){let e=n$(n,t);if(null!==e)return e;n=n1(n)}return null}function nz(e){let t=Object.assign({},e._decorators);return e._pendingDecorators=t,t}function nW(e){return e.read(()=>nj().getTextContent())}function nj(){return nY(tQ())}function nY(e){return e._nodeMap.get("root")}function nU(e){tX();let t=tQ();null!==e&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function nJ(e){let t=t0(),n=function(e,t){let n=e;for(;null!=n;){let e=nK(n,t);if(void 0!==e)return e;n=n1(n)}return null}(e,t);return null===n?e===t.getRootElement()?nF("root"):null:nF(n)}function nH(e){let t=[],n=e;for(;null!==n;)t.push(n),n=n._parentEditor;return t}function nV(e,t,n){if(e.setTextContent(t),tC(n)){let t=e.getKey();for(let i of["anchor","focus"]){let r=n[i];"text"===r.type&&r.key===t&&(r.offset=iM(e,r.offset,"clamp"))}}}function nG(e,t){void 0===e.__lexicalClassNameCache&&(e.__lexicalClassNameCache={});let n=e.__lexicalClassNameCache,i=n[t];if(void 0!==i)return i;let r=e[t];if("string"==typeof r){let e=f(r);return n[t]=e,e}return r}function nq(e,n,i,r,l){if(0===i.size)return;let o=r.__type,s=r.__key,a=n.get(o);void 0===a&&t(33,o);let u=a.klass,d=e.get(u);void 0===d&&(d=new Map,e.set(u,d));let c=d.get(s),f="destroyed"===c&&"created"===l;(void 0===c||f)&&d.set(s,f?"updated":l)}function nX(e){let t=n4(e).event,n=t&&t.inputType;return"insertFromPaste"===n||"insertFromPasteAsQuotation"===n}function nZ(e,t,n){return function(e,t,n){let i=nH(e);for(let r=4;r>=0;r--)for(let l=0;l<i.length;l++){let o=i[l],s=o._commands.get(t);if(void 0!==s){let t=s[r];if(void 0!==t){let i=Array.from(t),r=i.length,l=!1;if(ne(o,()=>{for(let t=0;t<r;t++)if(i[t](n,e))return void(l=!0)}),l)return l}}}return!1}(e,t,n)}function nQ(e){return!nu(e)&&!e.isLastChild()&&!e.isInline()}function n0(e,n){let i=e._keyToDOMMap.get(n);return void 0===i&&t(75,n),i}function n1(e){var t;let n=e.assignedSlot||e.parentElement;return ir(t=n)&&11===t.nodeType?n.host:n}function n2(e){return ir(e)&&9===e.nodeType?e:ii(e)?e.ownerDocument:null}function n3(e,t){let n=e.getParent();for(;null!==n;){if(n.is(t))return!0;n=n.getParent()}return!1}function n6(e){let t=n2(e);return t?t.defaultView:null}function n4(e){let n=e._window;return null===n&&t(78),n}function n5(e){return nu(e)||nr(e)&&e.isShadowRoot()}function n9(e){let n=t0(),i=e.getType(),r=nS(n,i);void 0===r&&t(200,e.constructor.name,i);let{replace:l,replaceWithKlass:o}=r;if(null!==l){let n=l(e),r=n.constructor;return null!==o?n instanceof o||t(201,o.name,o.getType(),r.name,r.getType(),e.constructor.name,i):n instanceof e.constructor&&r!==e.constructor||t(202,r.name,r.getType(),e.constructor.name,i),n.__key===e.__key&&t(203,e.constructor.name,i,r.name,r.getType()),n}return e}function n8(e,n){!nu(e.getParent())||nr(n)||ns(n)||t(99)}function n7(e){return(ns(e)||nr(e)&&!e.canBeEmpty())&&!e.isInline()}function ie(e,t,n){n.style.removeProperty("caret-color"),t._blockCursorElement=null;let i=e.parentElement;null!==i&&i.removeChild(e)}function it(e){return i?(e||window).getSelection():null}function ii(e){return ir(e)&&1===e.nodeType}function ir(e){return"object"==typeof e&&null!==e&&"nodeType"in e&&"number"==typeof e.nodeType}function il(e){let t=RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==e.nodeName.match(t)}function io(e){if(ns(e)&&!e.isInline())return!0;if(!nr(e)||n5(e))return!1;let t=e.getFirstChild(),n=null===t||e3(t)||td(t)||t.isInline();return!e.isInline()&&!1!==e.canBeEmpty()&&n}let is=new WeakMap,ia=new Map;function iu(e){if(!e._readOnly&&e.isEmpty())return ia;e._readOnly||t(192);let n=is.get(e);return n||(n=function(e){let t=new Map;for(let[n,i]of e._nodeMap){let e=i.__type,r=t.get(e);r||(r=new Map,t.set(e,r)),r.set(n,i)}return t}(e),is.set(e,n)),n}function id(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==eZ[t]}let ic=(e,t)=>{let n=e;for(;null!=n&&!nu(n);){if(t(n))return n;n=n.getParent()}return null},ih={next:"previous",previous:"next"};class ig{origin;constructor(e){this.origin=e}[Symbol.iterator](){return iI({hasNext:iS,initial:this.getAdjacentCaret(),map:e=>e,step:e=>e.getAdjacentCaret()})}getAdjacentCaret(){return ib(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return ib(this.origin,this.direction)}remove(){let e=this.getNodeAtCaret();return e&&e.remove(),this}replaceOrInsert(e,t){let n=this.getNodeAtCaret();return e.is(this.origin)||e.is(n)||(null===n?this.insert(e):n.replace(e,t)),this}splice(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"next",r=i===this.direction?n:Array.from(n).reverse(),l=this,o=this.getParentAtCaret(),s=new Map;for(let t=l.getAdjacentCaret();null!==t&&s.size<e;t=t.getAdjacentCaret()){let e=t.origin.getWritable();s.set(e.getKey(),e)}for(let e of r){if(s.size>0){let n=l.getNodeAtCaret();if(n)if(s.delete(n.getKey()),s.delete(e.getKey()),n.is(e)||l.origin.is(e));else{let t=e.getParent();t&&t.is(o)&&e.remove(),n.replace(e)}else null===n&&t(263,Array.from(s).join(" "))}else l.insert(e);l=ib(e,this.direction)}for(let e of s.values())e.remove();return this}}class i_ extends ig{type="child";getLatest(){let e=this.origin.getLatest();return e===this.origin?this:ik(e,this.direction)}getParentCaret(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";return ib(im(this.getParentAtCaret(),e),this.direction)}getFlipped(){let e=ih[this.direction];return ib(this.getNodeAtCaret(),e)||ik(this.origin,e)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(e){return e instanceof i_&&this.direction===e.direction&&this.origin.is(e.origin)}isSamePointCaret(e){return this.isSameNodeCaret(e)}}let ip={root:nu,shadowRoot:n5};function im(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root";return ip[t](e)?null:e}class iy extends ig{type="sibling";getLatest(){let e=this.origin.getLatest();return e===this.origin?this:ib(e,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return nr(this.origin)?ik(this.origin,this.direction):null}getParentCaret(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";return ib(im(this.getParentAtCaret(),e),this.direction)}getFlipped(){let e=ih[this.direction];return ib(this.getNodeAtCaret(),e)||ik(this.origin.getParentOrThrow(),e)}isSamePointCaret(e){return e instanceof iy&&this.direction===e.direction&&this.origin.is(e.origin)}isSameNodeCaret(e){return(e instanceof iy||e instanceof ix)&&this.direction===e.direction&&this.origin.is(e.origin)}}class ix extends ig{type="text";offset;constructor(e,t){super(e),this.offset=t}getLatest(){let e=this.origin.getLatest();return e===this.origin?this:iO(e,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";return ib(im(this.getParentAtCaret(),e),this.direction)}getFlipped(){return iO(this.origin,ih[this.direction],this.offset)}isSamePointCaret(e){return e instanceof ix&&this.direction===e.direction&&this.origin.is(e.origin)&&this.offset===e.offset}isSameNodeCaret(e){return(e instanceof iy||e instanceof ix)&&this.direction===e.direction&&this.origin.is(e.origin)}getSiblingCaret(){return ib(this.origin,this.direction)}}function iC(e){return e instanceof ix}function iS(e){return e instanceof iy}function iv(e){return e instanceof i_}let iN={next:class extends ix{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends ix{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},iT={next:class extends iy{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends iy{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},iE={next:class extends i_{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends i_{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function ib(e,t){return e?new iT[t](e):null}function iO(e,t,n){return e?new iN[t](e,iM(e,n)):null}function iM(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error",r=e.getTextContentSize(),l="next"===t?r:"previous"===t?0:t;return(l<0||l>r)&&("clamp"!==i&&n(284,String(t),String(r),e.getKey()),l=l<0?0:r),l}function ik(e,t){return nr(e)?new iE[t](e):null}function iw(e){var t;return e&&((t=e.getAdjacentCaret())&&t.getChildCaret()||t)}class iA{type="node-caret-range";direction;anchor;focus;constructor(e,t,n){this.anchor=e,this.focus=t,this.direction=n}getLatest(){let e=this.anchor.getLatest(),t=this.focus.getLatest();return e===this.anchor&&t===this.focus?this:new iA(e,t,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){let e=e=>{let t=this[e].getLatest();return iC(t)?function(e,t){let{direction:n,origin:i}=e;return new iD(e,iM(i,"focus"===t?ih[n]:n)-e.offset)}(t,e):null},t=e("anchor"),n=e("focus");if(t&&n){let{caret:e}=t,{caret:i}=n;if(e.isSameNodeCaret(i))return[new iD(e,i.offset-e.offset),null]}return[t,n]}iterNodeCarets(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root",t=iC(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),n=this.focus.getLatest(),i=iC(n),r=t=>t.isSameNodeCaret(n)?null:iw(t)||t.getParentCaret(e);return iI({hasNext:e=>null!==e&&!(i&&n.isSameNodeCaret(e)),initial:t.isSameNodeCaret(n)?null:r(t),map:e=>e,step:r})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class iD{type="slice";caret;distance;constructor(e,t){this.caret=e,this.distance=t}getSliceIndices(){let{distance:e,caret:{offset:t}}=this,n=t+e;return n<t?[n,t]:[t,n]}getTextContent(){let[e,t]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(e,t)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){let{caret:{origin:e,direction:t}}=this,[n,i]=this.getSliceIndices(),r=e.getTextContent();return iO(e.setTextContent(r.slice(0,n)+r.slice(i)),t,n)}}function iR(e){return iP(e,ib(nj(),e.direction))}function iP(e,n){return e.direction!==n.direction&&t(265),new iA(e,n,e.direction)}function iI(e){let{initial:t,hasNext:n,step:i,map:r}=e,l=t;return{[Symbol.iterator](){return this},next(){if(!n(l))return{done:!0,value:void 0};let e={done:!1,value:r(l)};return l=i(l),e}}}function iL(e,n){let i=iK(e.origin,n.origin);switch(null===i&&t(275,e.origin.getKey(),n.origin.getKey()),i.type){case"same":{let t="text"===e.type,i="text"===n.type;return t&&i?Math.sign(e.offset-n.offset):e.type===n.type?0:t?-1:i?1:"child"===e.type?-1:1}case"ancestor":return"child"===e.type?-1:1;case"descendant":return"child"===n.type?1:-1;case"branch":return iF(i)}}function iF(e){let{a:t,b:n}=e,i=t.__key,r=n.__key,l=t,o=n;for(;l&&o;l=l.getNextSibling(),o=o.getNextSibling()){if(l.__key===r)return -1;if(o.__key===i)return 1}return null===l?1:-1}function i$(e){return nr(e)?[e.getLatest(),null]:[e.getParent(),e.getLatest()]}function iK(e,n){if(e.is(n))return{commonAncestor:e,type:"same"};let i=new Map;for(let[t,n]=i$(e);t;n=t,t=t.getParent())i.set(t,n);for(let[r,l]=i$(n);r;l=r,r=r.getParent()){let o=i.get(r);if(void 0!==o)return null===o?(r.is(e)||t(276),{commonAncestor:r,type:"ancestor"}):null===l?(r.is(n)||t(277),{commonAncestor:r,type:"descendant"}):((nr(o)||o.is(e))&&(nr(l)||l.is(n))&&r.is(o.getParent())&&r.is(l.getParent())||t(278),{a:o,b:l,commonAncestor:r,type:"branch"})}return null}function iB(e,n){var i;let r,{type:l,key:o,offset:s}=e,a=(null===(r=nF(i=e.key))&&t(63,i),r);return"text"===l?(td(a)||t(266,a.getType(),o),iO(a,n,s)):(nr(a)||t(267,a.getType(),o),function(e,t,n){let i=ik(e,"next");for(let e=0;e<t;e++){let e=i.getAdjacentCaret();if(null===e)break;i=e}return iV(i,n)}(a,e.offset,n))}function iz(e,n){let{origin:i,direction:r}=n,l="next"===r;iC(n)?e.set(i.getKey(),n.offset,"text"):iS(n)?td(i)?e.set(i.getKey(),iM(i,r),"text"):e.set(i.getParentOrThrow().getKey(),i.getIndexWithinParent()+ +!!l,"element"):(iv(n)&&nr(i)||t(268),e.set(i.getKey(),l?0:i.getChildrenSize(),"element"))}function iW(e,t){iz(e.anchor,t.anchor),iz(e.focus,t.focus)}function ij(e){let{anchor:t,focus:n}=e,i=iB(t,"next"),r=iB(n,"next"),l=0>=iL(i,r)?"next":"previous";return iP(iV(i,l),iV(r,l))}function iY(e){let{direction:t,origin:n}=e,i=ib(n,ih[t]).getNodeAtCaret();return i?ib(i,t):ik(n.getParentOrThrow(),t)}function iU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root",n=[e];for(let i=iv(e)?e.getParentCaret(t):e.getSiblingCaret();null!==i;i=i.getParentCaret(t))n.push(iY(i));return n}function iJ(e){return!!e&&e.origin.isAttached()}function iH(e){let t=function(e){let t=e;for(;iv(t);){let e=iw(t);if(!iv(e))break;t=e}return t}(e.getLatest()),{direction:n}=t;if(td(t.origin))return iC(t)?t:iO(t.origin,n,n);let i=t.getAdjacentCaret();return iS(i)&&td(i.origin)?iO(i.origin,n,ih[n]):t}function iV(e,t){return e.direction===t?e:e.getFlipped()}function iG(e,t){return e.direction===t?e:iP(iV(e.focus,t),iV(e.anchor,t))}let iq="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement,iX=iq&&"documentMode"in document?document.documentMode:null;function iZ(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return()=>{for(let e=t.length-1;e>=0;e--)t[e]();t.length=0}}iq&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),iq&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),iq&&"InputEvent"in window&&!iX&&new window.InputEvent("input"),iq&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),iq&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,iq&&/Android/.test(navigator.userAgent),iq&&/^(?=.*Chrome).*/i.test(navigator.userAgent),iq&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent),e.s(["mergeRegister",()=>iZ],238702)}]);