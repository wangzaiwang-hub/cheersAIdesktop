(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,171985,e=>{"use strict";var i=e.i(563199),t=e.i(837699),s=e.i(124836),a=e.i(326531),n=e.i(268255);e.i(152567);var l=e.i(408767),c=e.i(339548),p=e.i(189299),r=e.i(257899),o=e.i(151094),d=e.i(324935),m=e.i(547105);e.i(793622);var u=e.i(259509),x=e.i(291631),h=e.i(21151),g=e.i(137667),j=e.i(921568),y=e.i(925521),f=e.i(711536),b=e.i(56971),w=e.i(972282),C=e.i(648404),v=e.i(586871),N=e.i(935139),A=e.i(360972);e.s(["default",0,e=>{let{show:k,appDetail:S,inAppDetail:T=!1,onSuccess:_,onClose:E}=e,{push:I,replace:R}=(0,a.useRouter)(),{t:O}=(0,l.useTranslation)(),{notify:P}=(0,c.useContext)(g.ToastContext),D=(0,p.useStore)(e=>e.setAppDetail),{isCurrentWorkspaceEditor:L}=(0,f.useAppContext)(),{plan:F,enableBilling:K}=(0,b.useProviderContext)(),M=K&&F.usage.buildApps>=F.total.buildApps,[U,B]=(0,n.useState)(!1),[H,W]=(0,n.useState)("image"===S.icon_type?{type:"image",url:S.icon_url,fileId:S.icon}:{type:"emoji",icon:S.icon,background:S.icon_background}),[z,V]=(0,n.useState)(`${S.name}(copy)`),[Y,$]=(0,n.useState)(!1),[q,G]=(0,n.useState)(!1),J=async()=>{try{let{new_app_id:e}=await (0,w.switchApp)({appID:S.id,name:z,icon_type:H.type,icon:"emoji"===H.type?H.icon:H.fileId,icon_background:"emoji"===H.type?H.background:void 0});_&&_(),E&&E(),P({type:"success",message:O("newApp.appCreated",{ns:"app"})}),T&&D(),Y&&await (0,w.deleteApp)(S.id),localStorage.setItem(y.NEED_REFRESH_APP_LIST_KEY,"1"),(0,v.getRedirection)(L,{id:e,mode:S.mode===C.AppModeEnum.COMPLETION?C.AppModeEnum.WORKFLOW:C.AppModeEnum.ADVANCED_CHAT},Y?R:I)}catch{P({type:"error",message:O("newApp.appCreateFailed",{ns:"app"})})}};return(0,n.useEffect)(()=>{Y&&G(!0)},[Y]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(h.default,{className:(0,N.cn)("w-[600px] max-w-[600px] p-8"),isShow:k,onClose:s.noop,children:[(0,i.jsx)("div",{className:"absolute right-4 top-4 cursor-pointer p-2",onClick:E,children:(0,i.jsx)(t.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})}),(0,i.jsx)("div",{className:"h-12 w-12 rounded-xl border-[0.5px] border-divider-regular bg-background-default-burn p-3 shadow-xl",children:(0,i.jsx)(u.AlertTriangle,{className:"h-6 w-6 text-[rgb(247,144,9)]"})}),(0,i.jsx)("div",{className:"relative mt-3 text-xl font-semibold leading-[30px] text-text-primary",children:O("switch",{ns:"app"})}),(0,i.jsxs)("div",{className:"my-1 text-sm leading-5 text-text-tertiary",children:[(0,i.jsx)("span",{children:O("switchTipStart",{ns:"app"})}),(0,i.jsx)("span",{className:"font-medium text-text-secondary",children:O("switchTip",{ns:"app"})}),(0,i.jsx)("span",{children:O("switchTipEnd",{ns:"app"})})]}),(0,i.jsxs)("div",{className:"pb-4",children:[(0,i.jsx)("div",{className:"py-2 text-sm font-medium leading-[20px] text-text-primary",children:O("switchLabel",{ns:"app"})}),(0,i.jsxs)("div",{className:"flex items-center justify-between space-x-2",children:[(0,i.jsx)(r.default,{size:"large",onClick:()=>{B(!0)},className:"cursor-pointer",iconType:H.type,icon:"image"===H.type?H.fileId:H.icon,background:"image"===H.type?void 0:H.background,imageUrl:"image"===H.type?H.url:void 0}),(0,i.jsx)(x.default,{value:z,onChange:e=>V(e.target.value),placeholder:O("newApp.appNamePlaceholder",{ns:"app"})||"",className:"h-10 grow"})]}),U&&(0,i.jsx)(A.default,{onSelect:e=>{W(e),B(!1)},onClose:()=>{W("image"===S.icon_type?{type:"image",url:S.icon_url,fileId:S.icon}:{type:"emoji",icon:S.icon,background:S.icon_background}),B(!1)}})]}),M&&(0,i.jsx)(j.default,{loc:"app-switch"}),(0,i.jsxs)("div",{className:"flex items-center justify-between pt-6",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(d.default,{className:"shrink-0",checked:Y,onCheck:()=>$(!Y)}),(0,i.jsx)("div",{className:"ml-2 cursor-pointer text-sm leading-5 text-text-secondary",onClick:()=>$(!Y),children:O("removeOriginal",{ns:"app"})})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(o.default,{className:"mr-2",onClick:E,children:O("newApp.Cancel",{ns:"app"})}),(0,i.jsx)(o.default,{className:"border-red-700",disabled:M||!z,variant:"warning",onClick:J,children:O("switchStart",{ns:"app"})})]})]})]}),q&&(0,i.jsx)(m.default,{title:O("deleteAppConfirmTitle",{ns:"app"}),content:O("deleteAppConfirmContent",{ns:"app"}),isShow:q,onConfirm:()=>G(!1),onCancel:()=>{G(!1),$(!1)}})]})}])},339556,e=>{e.n(e.i(171985))}]);