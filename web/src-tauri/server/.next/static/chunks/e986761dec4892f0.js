(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,410893,e=>{"use strict";var t=e.i(797181);e.s(["ArrowUpRight",()=>t.default])},994047,e=>{"use strict";var t=e.i(268255);let a=t.forwardRef(function(e,a){let{title:s,titleId:r,...n}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},n),s?t.createElement("title",{id:r},s):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))});e.s(["ChevronDownIcon",0,a],994047)},199018,e=>{"use strict";var t=e.i(799527);async function a(e){return(await t.SearchIndex.search(e)||[]).map(e=>e.skins[0].native)}e.s(["searchEmoji",()=>a])},586482,e=>{"use strict";var t=e.i(563199),a=e.i(680697),s=e.i(994047),r=e.i(268255);let n=r.forwardRef(function(e,t){let{title:a,titleId:s,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}),i=r.forwardRef(function(e,t){let{title:a,titleId:s,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))});var l=e.i(799527),o=e.i(757198),c=e.i(291631),d=e.i(935139),m=e.i(199018);(0,l.init)({data:a.default});let p=["#FFEAD5","#E4FBCC","#D3F8DF","#E0F2FE","#E0EAFF","#EFF1F5","#FBE8FF","#FCE7F6","#FEF7C3","#E6F4D7","#D5F5F6","#D1E9FF","#D1E0FF","#D5D9EB","#ECE9FE","#FFE4E8"];e.s(["default",0,e=>{let{onSelect:l,className:x}=e,{categories:u}=a.default,[h,f]=(0,r.useState)(""),[v,g]=(0,r.useState)(p[0]),[b,j]=(0,r.useState)(!1),[y,N]=(0,r.useState)([]),[w,C]=(0,r.useState)(!1);return r.useEffect(()=>{h&&(j(!0),v&&l?.(h,v))},[l,h,v]),(0,t.jsxs)("div",{className:(0,d.cn)(x,"flex flex-col"),children:[(0,t.jsx)("div",{className:"flex w-full flex-col items-center px-3 pb-2",children:(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 z-10 flex items-center pl-3",children:(0,t.jsx)(i,{className:"h-5 w-5 text-text-quaternary","aria-hidden":"true"})}),(0,t.jsx)(c.default,{className:"pl-10",type:"search",id:"search",placeholder:"Search emojis...",onChange:async e=>{""===e.target.value?C(!1):(C(!0),N(await (0,m.searchEmoji)(e.target.value)))}})]})}),(0,t.jsx)(o.default,{className:"my-3"}),(0,t.jsxs)("div",{className:"max-h-[200px] w-full overflow-y-auto overflow-x-hidden px-3",children:[w&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("p",{className:"system-xs-medium-uppercase mb-1 text-text-primary",children:"Search"}),(0,t.jsx)("div",{className:"grid h-full w-full grid-cols-8 gap-1",children:y.map((e,a)=>(0,t.jsx)("div",{className:"inline-flex h-10 w-10 items-center justify-center rounded-lg",onClick:()=>{f(e)},children:(0,t.jsx)("div",{className:"flex h-8 w-8 cursor-pointer items-center justify-center rounded-lg p-1 ring-components-input-border-hover ring-offset-1 hover:ring-1",children:(0,t.jsx)("em-emoji",{id:e})})},`emoji-search-${a}`))})]},"category-search")}),u.map((e,a)=>(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("p",{className:"system-xs-medium-uppercase mb-1 text-text-primary",children:e.id}),(0,t.jsx)("div",{className:"grid h-full w-full grid-cols-8 gap-1",children:e.emojis.map((e,a)=>(0,t.jsx)("div",{className:"inline-flex h-10 w-10 items-center justify-center rounded-lg",onClick:()=>{f(e)},children:(0,t.jsx)("div",{className:"flex h-8 w-8 cursor-pointer items-center justify-center rounded-lg p-1 ring-components-input-border-hover ring-offset-1 hover:ring-1",children:(0,t.jsx)("em-emoji",{id:e})})},`emoji-${a}`))})]},`category-${a}`))]}),(0,t.jsxs)("div",{className:(0,d.cn)("flex items-center justify-between p-3 pb-0"),children:[(0,t.jsx)("p",{className:"system-xs-medium-uppercase mb-2 text-text-primary",children:"Choose Style"}),b?(0,t.jsx)(s.ChevronDownIcon,{className:"h-4 w-4 cursor-pointer text-text-quaternary",onClick:()=>j(!b)}):(0,t.jsx)(n,{className:"h-4 w-4 cursor-pointer text-text-quaternary",onClick:()=>j(!b)})]}),b&&(0,t.jsx)("div",{className:"grid w-full grid-cols-8 gap-1 px-3",children:p.map(e=>(0,t.jsx)("div",{className:(0,d.cn)("cursor-pointer","ring-offset-1 hover:ring-1","inline-flex h-10 w-10 items-center justify-center rounded-lg",e===v?"ring-1 ring-components-input-border-hover":""),onClick:()=>{g(e)},children:(0,t.jsx)("div",{className:(0,d.cn)("flex h-8 w-8 items-center justify-center rounded-lg p-1"),style:{background:e},children:""!==h&&(0,t.jsx)("em-emoji",{id:h})})},e))})]})}],586482)},561518,e=>{"use strict";var t=e.i(563199),a=e.i(124836),s=e.i(268255);e.i(152567);var r=e.i(408767),n=e.i(151094),i=e.i(757198),l=e.i(21151),o=e.i(935139),c=e.i(586482);e.s(["default",0,e=>{let{isModal:d=!0,onSelect:m,onClose:p,className:x}=e,{t:u}=(0,r.useTranslation)(),[h,f]=(0,s.useState)(""),[v,g]=(0,s.useState)(),b=(0,s.useCallback)((e,t)=>{f(e),g(t)},[f,g]);return d?(0,t.jsxs)(l.default,{onClose:a.noop,isShow:!0,closable:!1,wrapperClassName:x,className:(0,o.cn)("flex max-h-[552px] flex-col rounded-xl border-[0.5px] border-divider-subtle p-0 shadow-xl"),children:[(0,t.jsx)(c.default,{className:"pt-3",onSelect:b}),(0,t.jsx)(i.default,{className:"mb-0 mt-3"}),(0,t.jsxs)("div",{className:"flex w-full items-center justify-center gap-2 p-3",children:[(0,t.jsx)(n.default,{className:"w-full",onClick:()=>{p?.()},children:u("iconPicker.cancel",{ns:"app"})}),(0,t.jsx)(n.default,{disabled:""===h||!v,variant:"primary",className:"w-full",onClick:()=>{m?.(h,v)},children:u("iconPicker.ok",{ns:"app"})})]})]}):(0,t.jsx)(t.Fragment,{})}])},462505,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{id:"book-open-01"},children:[{type:"element",name:"path",attributes:{id:"Fill",opacity:"0.12",d:"M1 3.1C1 2.53995 1 2.25992 1.10899 2.04601C1.20487 1.85785 1.35785 1.70487 1.54601 1.60899C1.75992 1.5 2.03995 1.5 2.6 1.5H2.8C3.9201 1.5 4.48016 1.5 4.90798 1.71799C5.28431 1.90973 5.59027 2.21569 5.78201 2.59202C6 3.01984 6 3.5799 6 4.7V10.5L5.94997 10.425C5.60265 9.90398 5.42899 9.64349 5.19955 9.45491C4.99643 9.28796 4.76238 9.1627 4.5108 9.0863C4.22663 9 3.91355 9 3.28741 9H2.6C2.03995 9 1.75992 9 1.54601 8.89101C1.35785 8.79513 1.20487 8.64215 1.10899 8.45399C1 8.24008 1 7.96005 1 7.4V3.1Z",fill:"currentColor"},children:[]},{type:"element",name:"path",attributes:{id:"Icon",d:"M6 10.5L5.94997 10.425C5.60265 9.90398 5.42899 9.64349 5.19955 9.45491C4.99643 9.28796 4.76238 9.1627 4.5108 9.0863C4.22663 9 3.91355 9 3.28741 9H2.6C2.03995 9 1.75992 9 1.54601 8.89101C1.35785 8.79513 1.20487 8.64215 1.10899 8.45399C1 8.24008 1 7.96005 1 7.4V3.1C1 2.53995 1 2.25992 1.10899 2.04601C1.20487 1.85785 1.35785 1.70487 1.54601 1.60899C1.75992 1.5 2.03995 1.5 2.6 1.5H2.8C3.9201 1.5 4.48016 1.5 4.90798 1.71799C5.28431 1.90973 5.59027 2.21569 5.78201 2.59202C6 3.01984 6 3.5799 6 4.7M6 10.5V4.7M6 10.5L6.05003 10.425C6.39735 9.90398 6.57101 9.64349 6.80045 9.45491C7.00357 9.28796 7.23762 9.1627 7.4892 9.0863C7.77337 9 8.08645 9 8.71259 9H9.4C9.96005 9 10.2401 9 10.454 8.89101C10.6422 8.79513 10.7951 8.64215 10.891 8.45399C11 8.24008 11 7.96005 11 7.4V3.1C11 2.53995 11 2.25992 10.891 2.04601C10.7951 1.85785 10.6422 1.70487 10.454 1.60899C10.2401 1.5 9.96005 1.5 9.4 1.5H9.2C8.07989 1.5 7.51984 1.5 7.09202 1.71799C6.71569 1.90973 6.40973 2.21569 6.21799 2.59202C6 3.01984 6 3.5799 6 4.7",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},children:[]}]}]},name:"BookOpen01"})},50874,258703,e=>{"use strict";var t=e.i(563199),a=e.i(807324),s=e.i(462505);let r=e=>{let{ref:r,...n}=e;return(0,t.jsx)(a.default,{...n,ref:r,data:s.default})};r.displayName="BookOpen01",e.s([],50874),e.s(["BookOpen01",0,r],258703)},740083,e=>{"use strict";var t=e.i(563199),a=e.i(299951),s=e.i(873517),r=e.i(683257);e.s(["default",0,e=>{let{forms:n,value:i,onChange:l}=e,o=(0,r.useLocale)(),c=(e,t)=>{l({...i,[e]:t})};return(0,t.jsx)(t.Fragment,{children:n.map((e,r)=>(0,t.jsxs)("div",{className:"py-2",children:[(0,t.jsx)("div",{className:"flex h-9 items-center text-sm font-medium text-text-primary",children:"zh-Hans"===o?e.label["zh-Hans"]:e.label["en-US"]}),"text-input"===e.type&&(0,t.jsx)("input",{value:i?.[e.variable]||"",className:"block h-9 w-full appearance-none rounded-lg bg-components-input-bg-normal px-3 text-sm text-text-primary outline-none",placeholder:e.placeholder,onChange:t=>c(e.variable,t.target.value)}),"paragraph"===e.type&&(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)(s.default,{className:"resize-none",value:i?.[e.variable]||"",placeholder:e.placeholder,onChange:t=>c(e.variable,t.target.value)})}),"select"===e.type&&(0,t.jsx)(a.PortalSelect,{value:i?.[e.variable],items:e.options.map(e=>({name:e.label["zh-Hans"===o?"zh-Hans":"en-US"],value:e.value})),onSelect:t=>c(e.variable,t.value),popupClassName:"w-[576px] !z-[102]"})]},r))})}])},963636,e=>{"use strict";var t=e.i(563199),a=e.i(837699),s=e.i(268255);e.i(152567);var r=e.i(408767);e.i(668763);var n=e.i(410893),i=e.i(391185),l=e.i(59375),o=e.i(296124),c=e.i(652669);e.s(["default",0,e=>{let{value:d,onChange:m}=e,{t:p}=(0,r.useTranslation)(),[x,u]=(0,s.useState)(!1),{setShowAccountSettingModal:h,setShowApiBasedExtensionModal:f}=(0,o.useModalContext)(),{data:v,refetch:g}=(0,c.useApiBasedExtensions)(),b=v?.find(e=>e.id===d);return(0,t.jsxs)(i.PortalToFollowElem,{open:x,onOpenChange:u,placement:"bottom-start",offset:4,children:[(0,t.jsx)(i.PortalToFollowElemTrigger,{onClick:()=>u(e=>!e),className:"w-full",children:b?(0,t.jsxs)("div",{className:"flex h-9 cursor-pointer items-center justify-between rounded-lg bg-components-input-bg-normal pl-3 pr-2.5",children:[(0,t.jsx)("div",{className:"text-sm text-text-primary",children:b.name}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"mr-1.5 w-[270px] truncate text-right text-xs text-text-quaternary",children:b.api_endpoint}),(0,t.jsx)(a.RiArrowDownSLine,{className:`h-4 w-4 text-text-secondary ${!x&&"opacity-60"}`})]})]}):(0,t.jsxs)("div",{className:"flex h-9 cursor-pointer items-center justify-between rounded-lg bg-components-input-bg-normal pl-3 pr-2.5 text-sm text-text-quaternary",children:[p("apiBasedExtension.selector.placeholder",{ns:"common"}),(0,t.jsx)(a.RiArrowDownSLine,{className:`h-4 w-4 text-text-secondary ${!x&&"opacity-60"}`})]})}),(0,t.jsx)(i.PortalToFollowElemContent,{className:"z-[102] w-[calc(100%-32px)] max-w-[576px]",children:(0,t.jsxs)("div",{className:"z-10 w-full rounded-lg border-[0.5px] border-components-panel-border bg-components-panel-bg shadow-lg",children:[(0,t.jsxs)("div",{className:"p-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-3 pb-1 pt-2",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-text-tertiary",children:p("apiBasedExtension.selector.title",{ns:"common"})}),(0,t.jsxs)("div",{className:"flex cursor-pointer items-center text-xs text-text-accent",onClick:()=>{u(!1),h({payload:l.ACCOUNT_SETTING_TAB.API_BASED_EXTENSION})},children:[p("apiBasedExtension.selector.manage",{ns:"common"}),(0,t.jsx)(n.ArrowUpRight,{className:"ml-0.5 h-3 w-3"})]})]}),(0,t.jsx)("div",{className:"max-h-[250px] overflow-y-auto",children:v?.map(e=>(0,t.jsxs)("div",{className:"w-full cursor-pointer rounded-md px-3 py-1.5 text-left hover:stroke-state-base-hover",onClick:()=>{m(e.id),u(!1)},children:[(0,t.jsx)("div",{className:"text-sm text-text-primary",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-text-tertiary",children:e.api_endpoint})]},e.id))})]}),(0,t.jsx)("div",{className:"h-px bg-divider-regular"}),(0,t.jsx)("div",{className:"p-1",children:(0,t.jsxs)("div",{className:"flex h-8 cursor-pointer items-center px-3 text-sm text-text-accent",onClick:()=>{u(!1),f({payload:{},onSaveCallback:()=>g()})},children:[(0,t.jsx)(a.RiAddLine,{className:"mr-2 h-4 w-4"}),p("operation.add",{ns:"common"})]})})]})})]})}])},93928,e=>{"use strict";var t=e.i(563199),a=e.i(124836),s=e.i(268255);e.i(152567);var r=e.i(408767),n=e.i(257899),i=e.i(151094),l=e.i(561518),o=e.i(740083);e.i(50874);var c=e.i(258703),d=e.i(21151),m=e.i(299951),p=e.i(137667),x=e.i(963636),u=e.i(683257),h=e.i(491234),f=e.i(652669);let v=["api"];e.s(["default",0,e=>{let{data:g,onCancel:b,onSave:j,onValidateBeforeSave:y}=e,{t:N}=(0,r.useTranslation)(),w=(0,u.useDocLink)(),{notify:C}=(0,p.useToastContext)(),k=(0,u.useLocale)(),[E,_]=(0,s.useState)(g.type?g:{...g,type:"api"}),[F,S]=(0,s.useState)(!1),{data:D}=(0,f.useCodeBasedExtensions)("external_data_tool"),B=[{key:"api",name:N("apiBasedExtension.selector.title",{ns:"common"})},...D?D.data.map(e=>({key:e.name,name:"zh-Hans"===k?e.label["zh-Hans"]:e.label["en-US"],form_schema:e.form_schema})):[]],T=B.find(e=>e.key===E.type),A=e=>{_({...E,...e})},L=e=>{let{type:t,config:a}=e,s={};return"api"===t&&(s.api_based_extension_id=a?.api_based_extension_id),0>v.findIndex(e=>e===t)&&T?.form_schema&&T.form_schema.forEach(e=>{s[e.variable]=a?.[e.variable]}),{...e,type:t,enabled:!g.type||g.enabled,config:{...s}}},O=g.type?N("operation.edit",{ns:"common"}):N("operation.add",{ns:"common"});return(0,t.jsxs)(d.default,{isShow:!0,onClose:a.noop,className:"!w-[640px] !max-w-none !p-8 !pb-6",children:[(0,t.jsx)("div",{className:"mb-2 text-xl font-semibold text-text-primary",children:`${O} ${N("variableConfig.apiBasedVar",{ns:"appDebug"})}`}),(0,t.jsxs)("div",{className:"py-2",children:[(0,t.jsx)("div",{className:"text-sm font-medium leading-9 text-text-primary",children:N("apiBasedExtension.type",{ns:"common"})}),(0,t.jsx)(m.SimpleSelect,{defaultValue:E.type,items:B.map(e=>({value:e.key,name:e.name})),onSelect:e=>{var t;let a,s;return t=e.value,s=B.find(e=>e.key===t),void(0>v.findIndex(e=>e===t)&&s?.form_schema&&(a=s?.form_schema.reduce((e,t)=>(e[t.variable]=t.default,e),{})),_({...E,type:t,config:a}))}})]}),(0,t.jsxs)("div",{className:"py-2",children:[(0,t.jsx)("div",{className:"text-sm font-medium leading-9 text-text-primary",children:N("feature.tools.modal.name.title",{ns:"appDebug"})}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{value:E.label||"",onChange:e=>A({label:e.target.value}),className:"mr-2 block h-9 grow appearance-none rounded-lg bg-components-input-bg-normal px-3 text-sm text-components-input-text-filled outline-none",placeholder:N("feature.tools.modal.name.placeholder",{ns:"appDebug"})||""}),(0,t.jsx)(n.default,{size:"large",onClick:()=>{S(!0)},className:"!h-9 !w-9 cursor-pointer rounded-lg border-[0.5px] border-components-panel-border ",icon:E.icon,background:E.icon_background})]})]}),(0,t.jsxs)("div",{className:"py-2",children:[(0,t.jsx)("div",{className:"text-sm font-medium leading-9 text-text-primary",children:N("feature.tools.modal.variableName.title",{ns:"appDebug"})}),(0,t.jsx)("input",{value:E.variable||"",onChange:e=>A({variable:e.target.value}),className:"block h-9 w-full appearance-none rounded-lg bg-components-input-bg-normal px-3 text-sm text-components-input-text-filled outline-none",placeholder:N("feature.tools.modal.variableName.placeholder",{ns:"appDebug"})||""})]}),"api"===E.type&&(0,t.jsxs)("div",{className:"py-2",children:[(0,t.jsxs)("div",{className:"flex h-9 items-center justify-between text-sm font-medium text-text-primary",children:[N("apiBasedExtension.selector.title",{ns:"common"}),(0,t.jsxs)("a",{href:w("/use-dify/workspace/api-extension/api-extension"),target:"_blank",rel:"noopener noreferrer",className:"group flex items-center text-xs font-normal text-text-tertiary hover:text-text-accent",children:[(0,t.jsx)(c.BookOpen01,{className:"mr-1 h-3 w-3 text-text-tertiary group-hover:text-text-accent"}),N("apiBasedExtension.link",{ns:"common"})]})]}),(0,t.jsx)(x.default,{value:E.config?.api_based_extension_id||"",onChange:e=>{_({...E,config:{...E.config,api_based_extension_id:e}})}})]}),0>v.findIndex(e=>e===E.type)&&T?.form_schema&&(0,t.jsx)(o.default,{forms:T?.form_schema,value:E.config,onChange:e=>{_({...E,config:{...E.config,...e}})}}),(0,t.jsxs)("div",{className:"mt-6 flex items-center justify-end",children:[(0,t.jsx)(i.default,{onClick:b,className:"mr-2",children:N("operation.cancel",{ns:"common"})}),(0,t.jsx)(i.default,{variant:"primary",onClick:()=>{if(!E.type)return void C({type:"error",message:N("errorMessage.valueOfVarRequired",{ns:"appDebug",key:N("feature.tools.modal.toolType.title",{ns:"appDebug"})})});if(!E.label)return void C({type:"error",message:N("errorMessage.valueOfVarRequired",{ns:"appDebug",key:N("feature.tools.modal.name.title",{ns:"appDebug"})})});if(!E.variable)return void C({type:"error",message:N("errorMessage.valueOfVarRequired",{ns:"appDebug",key:N("feature.tools.modal.variableName.title",{ns:"appDebug"})})});if(E.variable&&!/^[a-z_]\w{0,29}$/i.test(E.variable))return void C({type:"error",message:N("varKeyError.notValid",{ns:"appDebug",key:N("feature.tools.modal.variableName.title",{ns:"appDebug"})})});if("api"===E.type&&!E.config?.api_based_extension_id)return void C({type:"error",message:N("errorMessage.valueOfVarRequired",{ns:"appDebug",key:k!==h.LanguagesSupported[1]?"API Extension":"API 扩展"})});if(0>v.findIndex(e=>e===E.type)&&T?.form_schema){for(let e=0;e<T.form_schema.length;e++)if(!E.config?.[T.form_schema[e].variable]&&T.form_schema[e].required)return void C({type:"error",message:N("errorMessage.valueOfVarRequired",{ns:"appDebug",key:k!==h.LanguagesSupported[1]?T.form_schema[e].label["en-US"]:T.form_schema[e].label["zh-Hans"]})})}let e=L(E);(!y||y(e))&&j(L(e))},children:N("operation.save",{ns:"common"})})]}),F&&(0,t.jsx)(l.default,{onSelect:(e,t)=>{A({icon:e,icon_background:t}),S(!1)},onClose:()=>{A({icon:"",icon_background:""}),S(!1)}})]})}])},668887,e=>{e.n(e.i(93928))}]);