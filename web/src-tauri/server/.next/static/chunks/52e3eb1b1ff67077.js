(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,612437,(e,t,r)=>{e.e,t.exports=function(e,t,r){e=e||{};var a=t.prototype,n={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function s(e,t,r,n){return a.fromToBase(e,t,r,n)}r.en.relativeTime=n,a.fromToBase=function(t,a,s,i,l){for(var o,c,u,d=s.$locale().relativeTime||n,m=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],p=m.length,f=0;f<p;f+=1){var h=m[f];h.d&&(o=i?r(t).diff(s,h.d,!0):s.diff(t,h.d,!0));var x=(e.rounding||Math.round)(Math.abs(o));if(u=o>0,x<=h.r||!h.r){x<=1&&f>0&&(h=m[f-1]);var v=d[h.l];l&&(x=l(""+x)),c="string"==typeof v?v.replace("%d",x):v(x,a,h.l,u);break}}if(a)return c;var g=u?d.future:d.past;return"function"==typeof g?g(c):g.replace("%s",c)},a.to=function(e,t){return s(e,t,this,!0)},a.from=function(e,t){return s(e,t,this)};var i=function(e){return e.$u?r.utc():r()};a.toNow=function(e){return this.to(i(this),e)},a.fromNow=function(e){return this.from(i(this),e)}}},363372,e=>{"use strict";var t=e.i(585458),r=e.i(612437),a=e.i(268255),n=e.i(683257),s=e.i(491234);e.i(341888),e.i(194663),e.i(726767),e.i(171457),e.i(271967),e.i(429863),e.i(659291),e.i(690397),e.i(732213),e.i(388201),e.i(855379),e.i(992481),e.i(722553),e.i(525435),e.i(932957),e.i(354438),e.i(433104),e.i(516248),e.i(931171),e.i(248238),t.default.extend(r.default),e.s(["useFormatTimeFromNow",0,()=>{let e=(0,n.useLocale)();return{formatTimeFromNow:(0,a.useCallback)(r=>{let a=s.localeMap[e]??"en";return(0,t.default)(r).locale(a).fromNow()},[e])}}])},739780,e=>{"use strict";var t=e.i(563199);e.i(152567);var r=e.i(408767),a=e.i(481162),n=e.i(216669),s=e.i(955371);e.i(493599);var i=e.i(252386);e.i(213284);var l=e.i(891670);e.i(17744);var o=e.i(737222);e.i(610580);var c=e.i(384761),u=e.i(390622);e.i(905691);var d=e.i(52592),m=e.i(70380),p=e.i(157884);let f=e=>{let{status:a,executor:n,startTime:s,time:i,tokens:l,steps:o=1,showSteps:c=!0}=e,{t:u}=(0,r.useTranslation)(),{formatTime:d}=(0,p.default)();return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"system-xs-medium-uppercase h-6 py-1 text-text-tertiary",children:u("meta.title",{ns:"runLog"})}),(0,t.jsxs)("div",{className:"py-1",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"system-xs-regular w-[104px] shrink-0 truncate px-2 py-1.5 text-text-tertiary",children:u("meta.status",{ns:"runLog"})}),(0,t.jsxs)("div",{className:"system-xs-regular grow px-2 py-1.5 text-text-secondary",children:["running"===a&&(0,t.jsx)("div",{className:"my-1 h-2 w-16 rounded-sm bg-text-quaternary"}),"succeeded"===a&&(0,t.jsx)("span",{children:"SUCCESS"}),"partial-succeeded"===a&&(0,t.jsx)("span",{children:"PARTIAL SUCCESS"}),"exception"===a&&(0,t.jsx)("span",{children:"EXCEPTION"}),"failed"===a&&(0,t.jsx)("span",{children:"FAIL"}),"stopped"===a&&(0,t.jsx)("span",{children:"STOP"})]})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"system-xs-regular w-[104px] shrink-0 truncate px-2 py-1.5 text-text-tertiary",children:u("meta.executor",{ns:"runLog"})}),(0,t.jsxs)("div",{className:"system-xs-regular grow px-2 py-1.5 text-text-secondary",children:["running"===a&&(0,t.jsx)("div",{className:"my-1 h-2 w-[88px] rounded-sm bg-text-quaternary"}),"running"!==a&&(0,t.jsx)("span",{children:n||"N/A"})]})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"system-xs-regular w-[104px] shrink-0 truncate px-2 py-1.5 text-text-tertiary",children:u("meta.startTime",{ns:"runLog"})}),(0,t.jsxs)("div",{className:"system-xs-regular grow px-2 py-1.5 text-text-secondary",children:["running"===a&&(0,t.jsx)("div",{className:"my-1 h-2 w-[72px] rounded-sm bg-text-quaternary"}),"running"!==a&&(0,t.jsx)("span",{children:s?d(s,u("dateTimeFormat",{ns:"appLog"})):"-"})]})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"system-xs-regular w-[104px] shrink-0 truncate px-2 py-1.5 text-text-tertiary",children:u("meta.time",{ns:"runLog"})}),(0,t.jsxs)("div",{className:"system-xs-regular grow px-2 py-1.5 text-text-secondary",children:["running"===a&&(0,t.jsx)("div",{className:"my-1 h-2 w-[72px] rounded-sm bg-text-quaternary"}),"running"!==a&&(0,t.jsx)("span",{children:i?`${i.toFixed(3)}s`:"-"})]})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"system-xs-regular w-[104px] shrink-0 truncate px-2 py-1.5 text-text-tertiary",children:u("meta.tokens",{ns:"runLog"})}),(0,t.jsxs)("div",{className:"system-xs-regular grow px-2 py-1.5 text-text-secondary",children:["running"===a&&(0,t.jsx)("div",{className:"my-1 h-2 w-[48px] rounded-sm bg-text-quaternary"}),"running"!==a&&(0,t.jsx)("span",{children:`${l||0} Tokens`})]})]}),c&&(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"system-xs-regular w-[104px] shrink-0 truncate px-2 py-1.5 text-text-tertiary",children:u("meta.steps",{ns:"runLog"})}),(0,t.jsxs)("div",{className:"system-xs-regular grow px-2 py-1.5 text-text-secondary",children:["running"===a&&(0,t.jsx)("div",{className:"my-1 h-2 w-[24px] rounded-sm bg-text-quaternary"}),"running"!==a&&(0,t.jsx)("span",{children:o})]})]})]})]})};var h=e.i(40720);e.s(["default",0,e=>{let{nodeInfo:p,inputs:x,inputs_truncated:v,process_data:g,process_data_truncated:y,outputs:b,outputs_truncated:j,outputs_full_content:_,status:w,error:N,elapsed_time:k,total_tokens:C,created_at:S,created_by:T,steps:P,showSteps:D,exceptionCounts:A,execution_metadata:M,isListening:E=!1,handleShowIterationResultList:L,handleShowLoopResultList:R,onShowRetryDetail:O,handleShowAgentOrToolLog:I}=e,{t:F}=(0,r.useTranslation)(),B=p?.node_type===u.BlockEnum.Iteration&&!!p?.details?.length,H=p?.node_type===u.BlockEnum.Loop&&!!p?.details?.length,$=(0,d.hasRetryNode)(p?.node_type)&&!!p?.retryDetail?.length,q=p?.node_type===u.BlockEnum.Agent&&!!p?.agentLog?.length,z=p?.node_type===u.BlockEnum.Tool&&!!p?.agentLog?.length;return(0,t.jsxs)("div",{className:"bg-components-panel-bg py-2",children:[(0,t.jsx)("div",{className:"px-4 py-2",children:(0,t.jsx)(h.default,{status:w,time:k,tokens:C,error:N,exceptionCounts:A,isListening:E})}),(0,t.jsxs)("div",{className:"px-4",children:[B&&L&&(0,t.jsx)(l.IterationLogTrigger,{nodeInfo:p,onShowIterationResultList:L}),H&&R&&(0,t.jsx)(o.LoopLogTrigger,{nodeInfo:p,onShowLoopResultList:R}),$&&O&&(0,t.jsx)(c.RetryLogTrigger,{nodeInfo:p,onShowRetryResultList:O}),(q||z)&&I&&(0,t.jsx)(i.AgentLogTrigger,{nodeInfo:p,onShowAgentOrToolLog:I})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 px-4 py-2",children:[(0,t.jsx)(a.default,{readOnly:!0,title:(0,t.jsx)("div",{children:F("common.input",{ns:"workflow"}).toLocaleUpperCase()}),language:s.CodeLanguage.json,value:x,isJSONStringifyBeauty:!0,footer:v&&(0,t.jsx)(m.default,{textHasNoExport:!0,className:"mx-1 mb-1 mt-2 h-7"})}),g&&(0,t.jsx)(a.default,{readOnly:!0,title:(0,t.jsx)("div",{children:F("common.processData",{ns:"workflow"}).toLocaleUpperCase()}),language:s.CodeLanguage.json,value:g,isJSONStringifyBeauty:!0,footer:y&&(0,t.jsx)(m.default,{textHasNoExport:!0,className:"mx-1 mb-1 mt-2 h-7"})}),(b||"running"===w)&&(0,t.jsx)(a.default,{readOnly:!0,title:(0,t.jsx)("div",{children:F("common.output",{ns:"workflow"}).toLocaleUpperCase()}),language:s.CodeLanguage.json,value:b,isJSONStringifyBeauty:!0,tip:(0,t.jsx)(n.default,{type:M?.error_strategy}),footer:j&&(0,t.jsx)(m.default,{textHasNoExport:!0,downloadUrl:_?.download_url,className:"mx-1 mb-1 mt-2 h-7"})})]}),(0,t.jsx)("div",{className:"px-4 py-2",children:(0,t.jsx)("div",{className:"divider-subtle h-[0.5px]"})}),(0,t.jsx)("div",{className:"px-4 py-2",children:(0,t.jsx)(f,{status:w,executor:T,startTime:S,time:k,tokens:C,steps:P,showSteps:D})})]})}],739780)},366892,e=>{"use strict";var t=e.i(563199),r=e.i(268255),a=e.i(935139);let n=r.memo(e=>{let{items:r,value:n,itemClassName:s,itemWrapClassName:i,activeItemClassName:l,onChange:o}=e,c=e=>{let{id:r,name:c,icon:u,extra:d,disabled:m}=e;return(0,t.jsxs)("div",{className:(0,a.cn)("system-md-semibold relative flex cursor-pointer items-center border-b-2 border-transparent pb-2 pt-2.5",r===n?(0,a.cn)("border-components-tab-active text-text-primary",l):"text-text-tertiary",m&&"cursor-not-allowed opacity-30",i),onClick:()=>!m&&o(r),children:[u||"",(0,t.jsx)("div",{className:(0,a.cn)("ml-2",s),children:c}),d||""]},r)};return(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("div",{className:"flex space-x-4",children:r.filter(e=>!e.isRight).map(c)}),(0,t.jsx)("div",{className:"flex space-x-4",children:r.filter(e=>e.isRight).map(c)})]})});e.s(["default",0,n])},464747,e=>{"use strict";e.s(["transformDataSourceToTool",0,e=>({id:e.plugin_id,provider:e.provider,name:e.provider,author:e.declaration.identity.author,description:e.declaration.identity.description,icon:e.declaration.identity.icon,label:e.declaration.identity.label,type:e.declaration.provider_type,team_credentials:{},allow_delete:!0,is_team_authorization:e.is_authorized,is_authorized:e.is_authorized,labels:e.declaration.identity.tags||[],plugin_id:e.plugin_id,plugin_unique_identifier:e.plugin_unique_identifier,tools:e.declaration.datasources.map(e=>({name:e.identity.name,author:e.identity.author,label:e.identity.label,description:e.description,parameters:e.parameters,labels:[],output_schema:e.output_schema})),credentialsSchema:e.declaration.credentials_schema||[],meta:{version:""}})])},519089,e=>{"use strict";var t=e.i(563199),r=e.i(837699),a=e.i(268255);e.i(152567);var n=e.i(408767),s=e.i(391185),i=e.i(7266),l=e.i(935139);let o=a.memo(e=>{let{timezone:r,className:n,inline:s=!1}=e,o=(0,a.useMemo)(()=>(0,i.convertTimezoneToOffsetStr)(r),[r]);return(0,t.jsx)("span",{className:(0,l.cn)("system-sm-regular text-text-tertiary",s&&"text-text-quaternary",n),title:`Timezone: ${r} (${o})`,children:o})});var c=e.i(488409),u=e.i(151094);let d=a.memo(e=>{let{handleSelectCurrentTime:r,handleConfirm:a}=e,{t:s}=(0,n.useTranslation)();return(0,t.jsxs)("div",{className:"flex items-center justify-between border-t-[0.5px] border-divider-regular p-2",children:[(0,t.jsx)(u.default,{variant:"secondary-accent",size:"small",className:"mr-1 flex-1",onClick:r,children:s("operation.now",{ns:"time"})}),(0,t.jsx)(u.default,{variant:"primary",size:"small",className:"ml-1 flex-1",onClick:a.bind(null),children:s("operation.ok",{ns:"time"})})]})});var m=e.i(487224),p=e.i(915735);e.s(["default",0,e=>{let{value:u,timezone:f,placeholder:h,onChange:x,onClear:v,renderTrigger:g,title:y,minuteFilter:b,popupClassName:j,notClearable:_=!1,triggerFullWidth:w=!1,showTimezone:N=!1,placement:k="bottom-start"}=e,{t:C}=(0,n.useTranslation)(),[S,T]=(0,a.useState)(!1),P=(0,a.useRef)(null),D=(0,a.useRef)(!0),[A,M]=(0,a.useState)(()=>(0,i.toDayjs)(u,{timezone:f}));(0,a.useEffect)(()=>{let e=e=>{P.current&&!P.current.contains(e.target)&&T(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let E=(0,a.useRef)(u),L=(0,a.useRef)(f);(0,a.useEffect)(()=>{if(D.current){D.current=!1,E.current=u,L.current=f;return}let e=E.current!==u,t=L.current!==f;if(E.current=u,L.current=f,t||e){if(null!=u){let r=(0,i.toDayjs)(u,{timezone:f});if(!r)return;M(r),t&&!e&&x(r);return}M(e=>{if((0,i.isDayjsObject)(e))return f?(0,i.getDateWithTimezone)({date:e,timezone:f}):e})}},[f,u,x]);let R=e=>{if(e.stopPropagation(),S)return void T(!1);if(T(!0),u){let e=(0,i.toDayjs)(u,{timezone:f});!e||A&&(0,i.isDayjsObject)(A)&&e.isSame(A,"minute")||M(e)}},O=(e,t,r)=>{let a,n=(a=Number.parseInt(e,10)%12,r===c.Period.PM?a+12:a),s=Number.parseInt(t,10);M(e=>((0,i.isDayjsObject)(e)?e:(f?(0,i.getDateWithTimezone)({timezone:f}):(0,i.default)()).startOf("minute")).set("hour",n).set("minute",s).set("second",0).set("millisecond",0))},I=(0,a.useCallback)(()=>(0,i.isDayjsObject)(A)?A:(f?(0,i.getDateWithTimezone)({timezone:f}):(0,i.default)()).startOf("day"),[A,f]),F=(0,a.useCallback)(e=>{let t=I();O(e,t.minute().toString().padStart(2,"0"),t.format("A"))},[I]),B=(0,a.useCallback)(e=>{let t=I();O((0,i.getHourIn12Hour)(t).toString().padStart(2,"0"),e,t.format("A"))},[I]),H=(0,a.useCallback)(e=>{let t=I();O((0,i.getHourIn12Hour)(t).toString().padStart(2,"0"),t.minute().toString().padStart(2,"0"),e)},[I]),$=(0,a.useCallback)(()=>{let e=(0,i.getDateWithTimezone)({timezone:f});M(e),x(e),T(!1)},[f,x]),q=(0,a.useCallback)(()=>{x((0,i.isDayjsObject)(A)?A:void 0),T(!1)},[A,x]),z="hh:mm A",W=(0,a.useCallback)(e=>{if(!e)return"";let t=(0,i.toDayjs)(e,{timezone:f});return t?.format(z)||""},[f])(u),U=S&&(0,i.isDayjsObject)(A)?A.format(z):h||C("defaultPlaceholder",{ns:"time"}),K=(0,t.jsx)("input",{className:"system-xs-regular flex-1 cursor-pointer select-none appearance-none truncate bg-transparent p-1 text-components-input-text-filled outline-none placeholder:text-components-input-text-placeholder",readOnly:!0,value:S?"":W,placeholder:U});return(0,t.jsxs)(s.PortalToFollowElem,{open:S,onOpenChange:T,placement:k,children:[(0,t.jsx)(s.PortalToFollowElemTrigger,{className:w?"!block w-full":void 0,children:g?g({inputElem:K,onClick:R,isOpen:S}):(0,t.jsxs)("div",{className:(0,l.cn)("group flex cursor-pointer items-center gap-x-0.5 rounded-lg bg-components-input-bg-normal px-2 py-1 hover:bg-state-base-hover-alt",w?"w-full min-w-0":"w-[252px]"),onClick:R,children:[K,N&&f&&(0,t.jsx)(o,{timezone:f,inline:!0,className:"shrink-0 select-none text-xs"}),(0,t.jsx)(r.RiTimeLine,{className:(0,l.cn)("h-4 w-4 shrink-0 text-text-quaternary",S?"text-text-secondary":"group-hover:text-text-secondary",(W||S&&A)&&!_&&"group-hover:hidden")}),(0,t.jsx)(r.RiCloseCircleFill,{className:(0,l.cn)("hidden h-4 w-4 shrink-0 text-text-quaternary",(W||S&&A)&&!_&&"hover:text-text-secondary group-hover:inline-block"),role:"button","aria-label":C("operation.clear",{ns:"common"}),onClick:e=>{e.stopPropagation(),M(void 0),S||v()}})]})}),(0,t.jsx)(s.PortalToFollowElemContent,{className:(0,l.cn)("z-50",j),children:(0,t.jsxs)("div",{className:"mt-1 w-[252px] rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg shadow-lg shadow-shadow-shadow-5",children:[(0,t.jsx)(m.default,{title:y}),(0,t.jsx)(p.default,{selectedTime:A,minuteFilter:b,handleSelectHour:F,handleSelectMinute:B,handleSelectPeriod:H}),(0,t.jsx)(d,{handleSelectCurrentTime:$,handleConfirm:q})]})})]})}],519089)},483561,e=>{"use strict";var t=e.i(259217);e.s(["Settings01",()=>t.default])},310828,418017,e=>{"use strict";var t=e.i(417944),r=e.i(105845),a=e.i(268255);e.i(152567);var n=e.i(408767),s=e.i(137667);e.i(845780);var i=e.i(720315),l=e.i(554499);let o=(e,t)=>{let{handleNodeDataUpdateWithSyncDraft:r}=(0,l.useNodeDataUpdate)();return{inputs:t,setInputs:t=>{r({id:e,data:t})}}};e.s(["default",0,o],418017);var c=e.i(390622),u=e.i(168014),d=e.i(959095);e.s(["default",0,(e,l)=>{let{t:m}=(0,n.useTranslation)(),{nodesReadOnly:p}=(0,i.useNodesReadOnly)(),{handleOutVarRenameChange:f,isVarUsedInNodes:h,removeUsedVarInNodes:x}=(0,i.useWorkflow)(),v=(0,i.useIsChatMode)(),{inputs:g,setInputs:y}=o(e,l),{deleteNodeInspectorVars:b,renameInspectVarName:j,nodesWithInspectVars:_,deleteInspectVar:w}=(0,d.default)(),[N,{setTrue:k,setFalse:C}]=(0,t.useBoolean)(!1),[S,{setTrue:T,setFalse:P}]=(0,t.useBoolean)(!1),[D,A]=(0,a.useState)([]),[M,E]=(0,a.useState)(0),L=(0,a.useCallback)((t,a)=>{if(a?.payload?.type===c.ChangeType.remove){let t=_.find(t=>t.nodeId===e)?.vars.find(e=>e.name===a?.payload?.payload?.beforeKey)?.id;if(t&&w(e,t),h([e,a?.payload?.payload?.beforeKey||""])){T(),A([e,a?.payload?.payload?.beforeKey||""]),E(a?.index);return}}if(y((0,r.produce)(g,e=>{e.variables=t})),a?.payload?.type===c.ChangeType.changeVarName){let r=t[a.index];f(e,[e,g.variables[a.index].variable],[e,r.variable]),j(e,g.variables[a.index].variable,r.variable)}else a?.payload?.type!==c.ChangeType.remove&&b(e)},[w,b,f,e,g,h,_,j,y,T]),R=(0,a.useCallback)(()=>{y((0,r.produce)(g,e=>{e.variables.splice(M,1)})),x(D),P()},[P,g,x,M,D,y]),O=(0,a.useCallback)(e=>{let t=(0,r.produce)(g,t=>{t.variables.push(e)}),a=t.variables,n="",i="";return((0,u.hasDuplicateStr)(a.map(e=>e.variable))?(n="varKeyError.keyAlreadyExists",i="variableConfig.varName"):(0,u.hasDuplicateStr)(a.map(e=>e.label))&&(n="varKeyError.keyAlreadyExists",i="variableConfig.labelName"),n&&i)?(s.default.notify({type:"error",message:m(n,{ns:"appDebug",key:m(i,{ns:"appDebug"})})}),!1):(y(t),!0)},[g,y]);return{readOnly:p,isChatMode:v,inputs:g,isShowAddVarModal:N,showAddVarModal:k,hideAddVarModal:C,handleVarListChange:L,handleAddVariable:O,isShowRemoveVarConfirm:S,hideRemoveVarConfirm:P,onRemoveVarConfirm:R}}],310828)},370869,e=>{"use strict";var t=e.i(563199),r=e.i(268255);e.i(152567);var a=e.i(408767),n=e.i(547105);let s="common.effectVarConfirm",i=r.memo(e=>{let{isShow:r,onConfirm:i,onCancel:l}=e,{t:o}=(0,a.useTranslation)();return(0,t.jsx)(n.default,{isShow:r,title:o(`${s}.title`,{ns:"workflow"}),content:o(`${s}.content`,{ns:"workflow"}),onConfirm:i,onCancel:l})});e.s(["default",0,i])},992046,220017,e=>{"use strict";var t=e.i(563199),r=e.i(837699),a=e.i(105845),n=e.i(268255);e.i(152567);var s=e.i(408767),i=e.i(151094),l=e.i(249385),o=e.i(935139),c=e.i(597280);let u=n.memo(e=>{let{value:r,onChange:a}=e,s=(0,n.useCallback)(e=>()=>{a(e)},[a]);return(0,t.jsxs)("div",{className:"flex w-full space-x-1",children:[(0,t.jsx)(c.default,{className:"grow",selected:r,title:"True",onSelect:s(!0)}),(0,t.jsx)(c.default,{className:"grow",selected:!r,title:"False",onSelect:s(!1)})]})});e.s(["default",0,u],220017);let d=n.memo(e=>{let{className:c,list:d,onChange:m}=e,{t:p}=(0,s.useTranslation)(),f=(0,n.useCallback)(e=>t=>{m((0,a.produce)(d,r=>{r[e]=t}))},[d,m]),h=(0,n.useCallback)(e=>()=>{m((0,a.produce)(d,t=>{t.splice(e,1)}))},[d,m]),x=(0,n.useCallback)(()=>{m((0,a.produce)(d,e=>{e.push(!1)}))},[d,m]);return(0,t.jsxs)("div",{className:(0,o.cn)("w-full space-y-2",c),children:[d.map((e,r)=>(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(u,{value:e,onChange:f(r)}),(0,t.jsx)(l.default,{className:"!bg-gray-100 !p-2 hover:!bg-gray-200",onClick:h(r)})]},r)),(0,t.jsxs)(i.default,{variant:"tertiary",className:"w-full",onClick:x,children:[(0,t.jsx)(r.RiAddLine,{className:"mr-1 h-4 w-4"}),(0,t.jsx)("span",{children:p("chatVariable.modal.addArrayValue",{ns:"workflow"})})]})]})});e.s(["default",0,d],992046)},269345,e=>{"use strict";let t=`#  example
#  {
#     "name": "ray",
#     "age": 20
#  }`,r=`#  example
#  [
#     "value1",
#     "value2"
#  ]`,a=`#  example
#  [
#     100,
#     200
#  ]`,n=`#  example
#  [
#     {
#       "name": "ray",
#       "age": 20
#     },
#     {
#       "name": "lily",
#       "age": 18
#     }
#  ]`,s=`#  example
#  [
#     "True",
#     "False"
#  ]`;e.s(["arrayBoolPlaceholder",0,s,"arrayNumberPlaceholder",0,a,"arrayObjectPlaceholder",0,n,"arrayStringPlaceholder",0,r,"objectPlaceholder",0,t])},402885,415671,e=>{"use strict";var t=e.i(563199),r=e.i(268255);let a=()=>(0,t.jsx)("div",{className:"system-xs-medium text-text-quaternary",children:"Â·"});a.displayName="Dot";let n=r.memo(a);e.s(["default",0,n],402885),e.i(9633);var s=e.i(462007),s=s,i=e.i(935139);let l=e=>{let{positionId:a,label:n,className:l,labelPrefix:o="Chunk",iconClassName:c,labelClassName:u}=e,d=(0,r.useMemo)(()=>{let e=String(a);return e.length>=2?`${o}-${a}`:`${o}-${e.padStart(2,"0")}`},[a,o]);return(0,t.jsxs)("div",{className:(0,i.cn)("flex items-center",l),children:[(0,t.jsx)(s.default,{className:(0,i.cn)("mr-0.5 h-3 w-3 p-[1px] text-text-tertiary",c)}),(0,t.jsx)("div",{className:(0,i.cn)("system-xs-medium text-text-tertiary",u),children:n||d})]})};l.displayName="SegmentIndexTag";let o=r.memo(l);e.s(["SegmentIndexTag",0,l,"default",0,o],415671)},18800,e=>{"use strict";var t,r=e.i(268255);e.i(152567);var a=e.i(408767),n=e.i(192447),s=e.i(443014),i=e.i(390622),l=e.i(621379),o=((t={}).dataSource="dataSource",t.documentProcessing="documentProcessing",t);e.s(["useDatasourceOptions",0,()=>{let e=(0,n.useNodes)().filter(e=>e.data.type===i.BlockEnum.DataSource);return(0,r.useMemo)(()=>{let t=[];return e.forEach(e=>{let r=e.data.title;t.push({label:r,value:e.id,data:e.data})}),t},[e])},"useOnlineDocument",0,()=>{let e=(0,s.useDataSourceStore)();return{clearOnlineDocumentData:(0,r.useCallback)(()=>{let{setDocumentsData:t,setSearchValue:r,setSelectedPagesId:a,setOnlineDocuments:n,setCurrentDocument:s}=e.getState();t([]),r(""),a(new Set),n([]),s(void 0)},[e])}},"useOnlineDrive",0,()=>{let e=(0,s.useDataSourceStore)();return{clearOnlineDriveData:(0,r.useCallback)(()=>{let{setOnlineDriveFileList:t,setBucket:r,setPrefix:a,setKeywords:n,setSelectedFileIds:s}=e.getState();t([]),r(""),a([]),n(""),s([])},[e])}},"useTestRunSteps",0,()=>{let{t:e}=(0,a.useTranslation)(),[t,n]=(0,r.useState)(1),s=(0,r.useCallback)(()=>{n(e=>e+1)},[]),i=(0,r.useCallback)(()=>{n(e=>e-1)},[]);return{steps:[{label:e("testRun.steps.dataSource",{ns:"datasetPipeline"}),value:o.dataSource},{label:e("testRun.steps.documentProcessing",{ns:"datasetPipeline"}),value:o.documentProcessing}],currentStep:t,handleNextStep:s,handleBackStep:i}},"useWebsiteCrawl",0,()=>{let e=(0,s.useDataSourceStore)();return{clearWebsiteCrawlData:(0,r.useCallback)(()=>{let{setStep:t,setCrawlResult:r,setWebsitePages:a,setPreviewIndex:n,setCurrentWebsite:s}=e.getState();t(l.CrawlStep.init),r(void 0),s(void 0),a([]),n(-1)},[e])}}],18800)},74548,e=>{"use strict";var t,r=e.i(563199),a=e.i(268255),n=e.i(621379),s=e.i(935139);e.i(152567);var i=e.i(408767),l=e.i(402885),o=e.i(415671),c=e.i(19348),u=e.i(341797),d=e.i(128984),m=((t={}).Question="question",t.Answer="answer",t);let p=a.memo(e=>{let{type:t,text:a}=e;return(0,r.jsxs)("div",{className:"inline-flex items-start justify-start gap-1 self-stretch",children:[(0,r.jsx)("div",{className:"w-4 text-[13px] font-medium leading-5 text-text-tertiary",children:t===m.Question?"Q":"A"}),(0,r.jsx)("div",{className:"body-md-regular flex-1 text-text-secondary",children:a})]})}),f=a.memo(e=>{let{chunkType:t,parentMode:s,content:f,positionId:h,wordCount:x}=e,{t:v}=(0,i.useTranslation)(),g=(0,a.useMemo)(()=>t===n.ChunkingMode.parentChild&&"full-doc"===s,[t,s]),y=(0,a.useMemo)(()=>t===n.ChunkingMode.parentChild&&"paragraph"===s,[t,s]),b=(0,a.useMemo)(()=>t===n.ChunkingMode.parentChild?f.child_contents.map((e,t)=>{let a=t+1;return(0,r.jsx)(u.PreviewSlice,{label:`C-${a}`,text:e,tooltip:`Child-chunk-${a} \xb7 ${e.length} Characters`,labelInnerClassName:"text-[10px] font-semibold align-bottom leading-7",dividerClassName:"leading-7"},e)}):t===n.ChunkingMode.qa?(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(p,{type:m.Question,text:f.question}),(0,r.jsx)(p,{type:m.Answer,text:f.answer})]}):f.content,[f,t]),j=(0,a.useMemo)(()=>t===n.ChunkingMode.parentChild?f.parent_summary:t===n.ChunkingMode.text?f.summary:null,[f,t]);return(0,r.jsxs)("div",{className:"flex flex-col gap-1 rounded-lg bg-components-panel-bg px-3 py-2.5",children:[!g&&(0,r.jsxs)("div",{className:"inline-flex items-center justify-start gap-2",children:[(0,r.jsx)(o.default,{positionId:h,labelPrefix:y?"Parent-Chunk":"Chunk"}),(0,r.jsx)(l.default,{}),(0,r.jsx)("div",{className:"system-xs-medium text-text-tertiary",children:`${(0,d.formatNumber)(x)} ${v("segment.characters",{ns:"datasetDocuments",count:x})}`})]}),(0,r.jsx)("div",{className:"body-md-regular text-text-secondary",children:b}),j&&(0,r.jsx)(c.default,{summary:j})]})});e.s(["ChunkCardList",0,e=>{let{chunkType:t,parentMode:i,chunkInfo:l,className:o}=e,c=(0,a.useMemo)(()=>t===n.ChunkingMode.text?l:t===n.ChunkingMode.parentChild?l.parent_child_chunks:l.qa_chunks,[l,t]);return(0,r.jsx)("div",{className:(0,s.cn)("flex w-full flex-col gap-y-1",o),children:c.map((e,a)=>{let s=t===n.ChunkingMode.parentChild?e.parent_content?.length:t===n.ChunkingMode.text?e.content.length:e.question.length+e.answer.length;return(0,r.jsx)(f,{chunkType:t,parentMode:i,content:e,wordCount:s,positionId:a+1},`${t}-${a}`)})})}],74548)},766293,337132,e=>{"use strict";var t,r=e.i(563199),a=e.i(824627),n=e.i(268255),s=e.i(295978),i=e.i(289751),l=e.i(219830),o=function(e,t){var r=t.manual,s=t.ready,i=void 0===s||s,o=t.defaultParams,c=void 0===o?[]:o,u=t.refreshDeps,d=t.refreshDepsAction,m=(0,n.useRef)(!1);return m.current=!1,(0,l.default)(function(){!r&&i&&(m.current=!0,e.run.apply(e,(0,a.__spreadArray)([],(0,a.__read)(c),!1)))},[i]),(0,l.default)(function(){!m.current&&(r||(m.current=!0,d?d():e.refresh()))},(0,a.__spreadArray)([],(0,a.__read)(void 0===u?[]:u),!1)),{onBefore:function(){if(!i)return{stopNow:!0}}}};o.onInit=function(e){var t=e.ready;return{loading:!e.manual&&(void 0===t||t)}};var c=e.i(104411);let u=function(e,t){var r=(0,n.useRef)({deps:t,obj:void 0,initialized:!1}).current;return!1!==r.initialized&&(0,c.default)(r.deps,t)||(r.deps=t,r.obj=e(),r.initialized=!0),r.obj};var d=e.i(685888),m=new Map,p=function(e,t,r){var n=m.get(e);(null==n?void 0:n.timer)&&clearTimeout(n.timer);var s=void 0;t>-1&&(s=setTimeout(function(){m.delete(e)},t)),m.set(e,(0,a.__assign)((0,a.__assign)({},r),{timer:s}))},f=new Map,h=function(e,t){f.set(e,t),t.then(function(t){return f.delete(e),t}).catch(function(){f.delete(e)})},x={},v=function(e,t){x[e]&&x[e].forEach(function(e){return e(t)})},g=function(e,t){return x[e]||(x[e]=[]),x[e].push(t),function(){var r=x[e].indexOf(t);x[e].splice(r,1)}};let y=function(e,t){var r=t.cacheKey,s=t.cacheTime,i=void 0===s?3e5:s,l=t.staleTime,o=void 0===l?0:l,c=t.setCache,x=t.getCache,y=(0,n.useRef)(void 0),b=(0,n.useRef)(void 0),j=function(e,t){c?c(t):p(e,i,t),v(e,t.data)},_=function(e,t){return(void 0===t&&(t=[]),x)?x(t):m.get(e)};return(u(function(){if(r){var t=_(r);t&&Object.hasOwnProperty.call(t,"data")&&(e.state.data=t.data,e.state.params=t.params,(-1===o||Date.now()-t.time<=o)&&(e.state.loading=!1)),y.current=g(r,function(t){e.setState({data:t})})}},[]),(0,d.default)(function(){var e;null==(e=y.current)||e.call(y)}),r)?{onBefore:function(e){var t=_(r,e);return t&&Object.hasOwnProperty.call(t,"data")?-1===o||Date.now()-t.time<=o?{loading:!1,data:null==t?void 0:t.data,error:void 0,returnNow:!0}:{data:null==t?void 0:t.data,error:void 0}:{}},onRequest:function(e,t){var n=f.get(r);return n&&n!==b.current||(b.current=n=e.apply(void 0,(0,a.__spreadArray)([],(0,a.__read)(t),!1)),h(r,n)),{servicePromise:n}},onSuccess:function(t,a){var n;r&&(null==(n=y.current)||n.call(y),j(r,{data:t,params:a,time:Date.now()}),y.current=g(r,function(t){e.setState({data:t})}))},onMutate:function(t){var a;r&&(null==(a=y.current)||a.call(y),j(r,{data:t,params:e.state.params,time:Date.now()}),y.current=g(r,function(t){e.setState({data:t})}))}}:{}};var b=e.i(476293);let j=function(e,t){var r=t.debounceWait,s=t.debounceLeading,i=t.debounceTrailing,l=t.debounceMaxWait,o=(0,n.useRef)(void 0),c=(0,n.useMemo)(function(){var e={};return void 0!==s&&(e.leading=s),void 0!==i&&(e.trailing=i),void 0!==l&&(e.maxWait=l),e},[s,i,l]);return((0,n.useEffect)(function(){if(r){var t=e.runAsync.bind(e);return o.current=(0,b.default)(function(e){e()},r,c),e.runAsync=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new Promise(function(r,n){var s;null==(s=o.current)||s.call(o,function(){t.apply(void 0,(0,a.__spreadArray)([],(0,a.__read)(e),!1)).then(r).catch(n)})})},function(){var r;null==(r=o.current)||r.cancel(),e.runAsync=t}}},[r,c]),r)?{onCancel:function(){var e;null==(e=o.current)||e.cancel()}}:{}},_=function(e,t){var r=t.loadingDelay,a=t.ready,s=(0,n.useRef)(void 0);if(!r)return{};var i=function(){s.current&&clearTimeout(s.current)};return{onBefore:function(){return i(),!1!==a&&(s.current=setTimeout(function(){e.setState({loading:!0})},r)),{loading:!1}},onFinally:function(){i()},onCancel:function(){i()}}};var w=e.i(354440);function N(){return!w.default||"hidden"!==document.visibilityState}var k=new Set;w.default&&window.addEventListener("visibilitychange",function(){N()&&k.forEach(function(e){return e()})},!1);let C=function(e,t){var r=t.pollingInterval,a=t.pollingWhenHidden,s=void 0===a||a,i=t.pollingErrorRetryCount,o=void 0===i?-1:i,c=(0,n.useRef)(void 0),u=(0,n.useRef)(void 0),d=(0,n.useRef)(0),m=function(){var e;c.current&&clearTimeout(c.current),null==(e=u.current)||e.call(u)};return((0,l.default)(function(){r||m()},[r]),r)?{onBefore:function(){m()},onError:function(){d.current+=1},onSuccess:function(){d.current=0},onFinally:function(){-1===o||-1!==o&&d.current<=o?c.current=setTimeout(function(){if(s||N())e.refresh();else{var t;t=function(){e.refresh()},k.add(t),u.current=function(){k.has(t)&&k.delete(t)}}},r):d.current=0},onCancel:function(){m()}}:{}};var S=new Set;if(w.default){var T=function(){N()&&(!w.default||void 0===navigator.onLine||navigator.onLine)&&S.forEach(function(e){return e()})};window.addEventListener("visibilitychange",T,!1),window.addEventListener("focus",T,!1)}let P=function(e,t){var r=t.refreshOnWindowFocus,s=t.focusTimespan,i=void 0===s?5e3:s,l=(0,n.useRef)(void 0),o=function(){var e;null==(e=l.current)||e.call(l)};return(0,n.useEffect)(function(){if(r){var t,n,s,c=(t=e.refresh.bind(e),n=!1,function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];n||(n=!0,t.apply(void 0,(0,a.__spreadArray)([],(0,a.__read)(e),!1)),setTimeout(function(){n=!1},i))});s=function(){c()},S.add(s),l.current=function(){S.has(s)&&S.delete(s)}}return function(){o()}},[r,i]),(0,d.default)(function(){o()}),{}},D=function(e,t){var r=t.retryInterval,a=t.retryCount,s=(0,n.useRef)(void 0),i=(0,n.useRef)(0),l=(0,n.useRef)(!1);return a?{onBefore:function(){l.current||(i.current=0),l.current=!1,s.current&&clearTimeout(s.current)},onSuccess:function(){i.current=0},onError:function(){i.current+=1,-1===a||i.current<=a?s.current=setTimeout(function(){l.current=!0,e.refresh()},null!=r?r:Math.min(1e3*Math.pow(2,i.current),3e4)):i.current=0},onCancel:function(){i.current=0,s.current&&clearTimeout(s.current)}}:{}};var A=e.i(668707);let M=function(e,t){var r=t.throttleWait,s=t.throttleLeading,i=t.throttleTrailing,l=(0,n.useRef)(void 0),o={};return(void 0!==s&&(o.leading=s),void 0!==i&&(o.trailing=i),(0,n.useEffect)(function(){if(r){var t=e.runAsync.bind(e);return l.current=(0,A.default)(function(e){e()},r,o),e.runAsync=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new Promise(function(r,n){var s;null==(s=l.current)||s.call(l,function(){t.apply(void 0,(0,a.__spreadArray)([],(0,a.__read)(e),!1)).then(r).catch(n)})})},function(){var r;e.runAsync=t,null==(r=l.current)||r.cancel()}}},[r,s,i]),r)?{onCancel:function(){var e;null==(e=l.current)||e.cancel()}}:{}};var E=e.i(393689),L=e.i(841054);let R=function(){var e=(0,a.__read)((0,n.useState)({}),2)[1];return(0,n.useCallback)(function(){return e({})},[])};var O=e.i(703440),I=e.i(773923),F=function(){function e(e,t,r,n){void 0===n&&(n={}),this.serviceRef=e,this.options=t,this.subscribe=r,this.initState=n,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=(0,a.__assign)((0,a.__assign)((0,a.__assign)({},this.state),{loading:!t.manual}),n)}return e.prototype.setState=function(e){void 0===e&&(e={}),this.state=(0,a.__assign)((0,a.__assign)({},this.state),e),this.subscribe()},e.prototype.runPluginHandler=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=this.pluginImpls.map(function(r){var n;return null==(n=r[e])?void 0:n.call.apply(n,(0,a.__spreadArray)([r],(0,a.__read)(t),!1))}).filter(Boolean);return Object.assign.apply(Object,(0,a.__spreadArray)([{}],(0,a.__read)(n),!1))},e.prototype.runAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,a.__awaiter)(this,void 0,void 0,function(){var t,r,n,s,i,l,o,c,u,d,m,p,f,h,x,v,g,y,b,j,_;return(0,a.__generator)(this,function(w){switch(w.label){case 0:if(this.count+=1,t=this.count,s=void 0!==(n=(r=this.runPluginHandler("onBefore",e)).stopNow)&&n,l=void 0!==(i=r.returnNow)&&i,o=(0,a.__rest)(r,["stopNow","returnNow"]),s)return[2,new Promise(function(){})];if(this.setState((0,a.__assign)({loading:!0,params:e},o)),l)return[2,Promise.resolve(o.data)];null==(f=(p=this.options).onBefore)||f.call(p,e),w.label=1;case 1:return w.trys.push([1,3,,4]),(c=this.runPluginHandler("onRequest",this.serviceRef.current,e).servicePromise)||(c=(m=this.serviceRef).current.apply(m,(0,a.__spreadArray)([],(0,a.__read)(e),!1))),[4,c];case 2:if(u=w.sent(),t!==this.count)return[2,new Promise(function(){})];return this.setState({data:u,error:void 0,loading:!1}),null==(x=(h=this.options).onSuccess)||x.call(h,u,e),this.runPluginHandler("onSuccess",u,e),null==(g=(v=this.options).onFinally)||g.call(v,e,u,void 0),t===this.count&&this.runPluginHandler("onFinally",e,u,void 0),[2,u];case 3:if(d=w.sent(),t!==this.count)return[2,new Promise(function(){})];throw this.setState({error:d,loading:!1}),null==(b=(y=this.options).onError)||b.call(y,d,e),this.runPluginHandler("onError",d,e),null==(_=(j=this.options).onFinally)||_.call(j,e,void 0,d),t===this.count&&this.runPluginHandler("onFinally",e,void 0,d),d;case 4:return[2]}})})},e.prototype.run=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.runAsync.apply(this,(0,a.__spreadArray)([],(0,a.__read)(t),!1)).catch(function(t){e.options.onError||console.error(t)})},e.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},e.prototype.refresh=function(){this.run.apply(this,(0,a.__spreadArray)([],(0,a.__read)(this.state.params||[]),!1))},e.prototype.refreshAsync=function(){return this.runAsync.apply(this,(0,a.__spreadArray)([],(0,a.__read)(this.state.params||[]),!1))},e.prototype.mutate=function(e){var t=(0,I.isFunction)(e)?e(this.state.data):e;this.runPluginHandler("onMutate",t),this.setState({data:t})},e}();let B=function(e,t,r){void 0===t&&(t={}),void 0===r&&(r=[]);var n=t.manual,s=void 0!==n&&n,l=t.ready,o=void 0===l||l,c=(0,a.__rest)(t,["manual","ready"]);O.default&&t.defaultParams&&!Array.isArray(t.defaultParams)&&console.warn("expected defaultParams is array, got ".concat(typeof t.defaultParams));var m=(0,a.__assign)({manual:s,ready:o},c),p=(0,E.default)(e),f=R(),h=u(function(){var e=r.map(function(e){var t;return null==(t=null==e?void 0:e.onInit)?void 0:t.call(e,m)}).filter(Boolean);return new F(p,m,f,Object.assign.apply(Object,(0,a.__spreadArray)([{}],(0,a.__read)(e),!1)))},[]);return h.options=m,h.pluginImpls=r.map(function(e){return e(h,m)}),(0,L.default)(function(){if(!s&&o){var e=h.state.params||t.defaultParams||[];h.run.apply(h,(0,a.__spreadArray)([],(0,a.__read)(e),!1))}}),(0,d.default)(function(){h.cancel()}),{loading:h.state.loading,data:h.state.data,error:h.state.error,params:h.state.params||[],cancel:(0,i.default)(h.cancel.bind(h)),refresh:(0,i.default)(h.refresh.bind(h)),refreshAsync:(0,i.default)(h.refreshAsync.bind(h)),run:(0,i.default)(h.run.bind(h)),runAsync:(0,i.default)(h.runAsync.bind(h)),mutate:(0,i.default)(h.mutate.bind(h))}};var H=e.i(220431),$=function(e){return e.scrollHeight||Math.max(document.documentElement.scrollHeight,document.body.scrollHeight)};let q=function(e,t){void 0===t&&(t={});var r=t.target,c=t.isNoMore,u=t.threshold,d=void 0===u?100:u,m=t.direction,p=t.reloadDeps,f=t.manual,h=t.onBefore,x=t.onSuccess,v=t.onError,g=t.onFinally,b=(0,a.__read)((0,n.useState)(),2),w=b[0],N=b[1],k=(0,a.__read)((0,n.useState)(!1),2),S=k[0],T=k[1],A="top"===(void 0===m?"bottom":m),E=(0,n.useRef)(void 0),L=(0,n.useRef)(0),R=(0,n.useMemo)(function(){return!!c&&c(w)},[w]),O=B(function(t){return(0,a.__awaiter)(void 0,void 0,void 0,function(){return(0,a.__generator)(this,function(r){switch(r.label){case 0:return[4,e(t)];case 1:return[2,{currentData:r.sent(),lastData:t}]}})})},{manual:f,onFinally:function(e,t,r){T(!1),null==g||g(null==t?void 0:t.currentData,r)},onBefore:function(){return null==h?void 0:h()},onSuccess:function(e){var t,n,s;e.lastData?N((0,a.__assign)((0,a.__assign)({},e.currentData),{list:A?(0,a.__spreadArray)((0,a.__spreadArray)([],(0,a.__read)(e.currentData.list),!1),(0,a.__read)(null!=(n=e.lastData.list)?n:[]),!1):(0,a.__spreadArray)((0,a.__spreadArray)([],(0,a.__read)(null!=(s=e.lastData.list)?s:[]),!1),(0,a.__read)(e.currentData.list),!1)})):N((0,a.__assign)((0,a.__assign)({},e.currentData),{list:(0,a.__spreadArray)([],(0,a.__read)(null!=(t=e.currentData.list)?t:[]),!1)})),setTimeout(function(){if(A){var e=(0,H.getTargetElement)(r);if(e=e===document?document.documentElement:e){var t=$(e);e.scrollTo(0,t-L.current)}}else Q()}),null==x||x(e.currentData)},onError:function(e){return null==v?void 0:v(e)}},(0,a.__spreadArray)((0,a.__spreadArray)([],(0,a.__read)([]),!1),[j,_,C,P,M,o,y,D],!1)),I=O.loading,F=O.error,q=O.run,z=O.runAsync,W=O.cancel,U=(0,i.default)(function(){R||(T(!0),q(w))}),K=function(e){return(0,a.__awaiter)(void 0,void 0,void 0,function(){return(0,a.__generator)(this,function(t){switch(t.label){case 0:return[4,z(e)];case 1:return[2,t.sent().currentData]}})})},V=(0,i.default)(function(){return R?Promise.reject():(T(!0),K(w))}),Q=function(){var e=(0,H.getTargetElement)(r);if(e){var t=e===document?document.documentElement:e,a=t===document||t===document.documentElement||t===document.body?Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop):t.scrollTop,n=$(t),s=t.clientHeight||Math.max(document.documentElement.clientHeight,document.body.clientHeight);A?(void 0!==E.current&&E.current>a&&a<=d&&U(),E.current=a,L.current=n-a):n-a<=s+d&&U()}};return(0,s.default)("scroll",function(){I||S||Q()},{target:r}),(0,l.default)(function(){q()},(0,a.__spreadArray)([],(0,a.__read)(void 0===p?[]:p),!1)),{data:w,loading:!S&&I,error:F,loadingMore:S,noMore:R,loadMore:U,loadMoreAsync:V,reload:(0,i.default)(function(){return T(!1),q()}),reloadAsync:(0,i.default)(function(){return T(!1),K()}),mutate:N,cancel:W}};var z=e.i(554327);e.i(152567);var W=e.i(408767),U=e.i(257899),K=e.i(83278),V=e.i(151094),Q=e.i(449980),J=e.i(21151),X=e.i(739255),Y=e.i(500841),G=e.i(216425),Z=e.i(225244),ee=e.i(935139);let et=n.memo(e=>{let{isShow:t,onClose:a,selectedIds:s,onSelect:i}=e,{t:l}=(0,W.useTranslation)(),[o,c]=(0,n.useState)([]),{formatIndexingTechniqueAndMethod:u}=(0,G.useKnowledge)(),{data:d,isLoading:m,isFetchingNextPage:p,fetchNextPage:f,hasNextPage:h}=(0,Z.useInfiniteDatasets)({page:1},{enabled:t,staleTime:0,refetchOnMount:"always"}),x=d?.pages||[],v=(0,n.useMemo)(()=>x.flatMap(e=>e.data.filter(e=>e.indexing_technique||"external"===e.provider)),[x]),g=!m&&0===v.length,y=(0,n.useRef)(null),b=!1===h;q(async()=>(!h||p||await f(),{list:[]}),{target:y,isNoMore:()=>b,reloadDeps:[b,p]});let j=(0,n.useRef)([]),_=(0,n.useRef)(!1);return(0,n.useEffect)(()=>{t&&(_.current=!1)},[t]),(0,n.useEffect)(()=>{let e=j.current,t=s.length!==e.length||s.some((t,r)=>t!==e[r]);if(!s.length&&(!_.current||t)){c([]),j.current=s,_.current=!1;return}(t||!_.current)&&(c(e=>{let t=new Map(e.map(e=>[e.id,e]));return s.map(e=>v.find(t=>t.id===e)||t.get(e)).filter(Boolean)}),j.current=s,_.current=!1)},[v,s]),(0,r.jsxs)(J.default,{isShow:t,onClose:a,className:"w-[400px]",title:l("feature.dataSet.selectTitle",{ns:"appDebug"}),children:[m&&0===v.length&&(0,r.jsx)("div",{className:"flex h-[200px]",children:(0,r.jsx)(Q.default,{type:"area"})}),g&&(0,r.jsxs)("div",{className:"mt-6 flex h-[128px] items-center justify-center space-x-1  rounded-lg border text-[13px]",style:{background:"rgba(0, 0, 0, 0.02)",borderColor:"rgba(0, 0, 0, 0.02"},children:[(0,r.jsx)("span",{className:"text-text-tertiary",children:l("feature.dataSet.noDataSet",{ns:"appDebug"})}),(0,r.jsx)(z.default,{href:"/datasets/create",className:"font-normal text-text-accent",children:l("feature.dataSet.toCreate",{ns:"appDebug"})})]}),v.length>0&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{ref:y,className:"mt-7 max-h-[286px] space-y-1 overflow-y-auto",children:[v.map(e=>(0,r.jsxs)("div",{className:(0,ee.cn)("flex h-10 cursor-pointer items-center rounded-lg border-[0.5px] border-components-panel-border-subtle bg-components-panel-on-panel-item-bg px-2 shadow-xs hover:border-components-panel-border hover:bg-components-panel-on-panel-item-bg-hover hover:shadow-sm",o.some(t=>t.id===e.id)&&"border-[1.5px] border-components-option-card-option-selected-border bg-state-accent-hover shadow-xs hover:border-components-option-card-option-selected-border hover:bg-state-accent-hover hover:shadow-xs",!e.embedding_available&&"hover:border-components-panel-border-subtle hover:bg-components-panel-on-panel-item-bg hover:shadow-xs"),onClick:()=>{e.embedding_available&&(_.current=!0,o.some(t=>t.id===e.id)?c(o.filter(t=>t.id!==e.id)):c([...o,e]))},children:[(0,r.jsxs)("div",{className:"mr-1 flex grow items-center overflow-hidden",children:[(0,r.jsx)("div",{className:(0,ee.cn)("mr-2",!e.embedding_available&&"opacity-30"),children:(0,r.jsx)(U.default,{size:"tiny",iconType:e.icon_info.icon_type,icon:e.icon_info.icon,background:"image"===e.icon_info.icon_type?void 0:e.icon_info.icon_background,imageUrl:"image"===e.icon_info.icon_type?e.icon_info.icon_url:void 0})}),(0,r.jsx)("div",{className:(0,ee.cn)("max-w-[200px] truncate text-[13px] font-medium text-text-secondary",!e.embedding_available&&"!max-w-[120px] opacity-30"),children:e.name}),!e.embedding_available&&(0,r.jsx)("span",{className:"ml-1 shrink-0 rounded-md border border-divider-deep px-1 text-xs font-normal leading-[18px] text-text-tertiary",children:l("unavailable",{ns:"dataset"})})]}),e.is_multimodal&&(0,r.jsx)("div",{className:"mr-1 shrink-0",children:(0,r.jsx)(Y.default,{feature:X.ModelFeatureEnum.vision})}),!!e.indexing_technique&&(0,r.jsx)(K.default,{className:"shrink-0",text:u(e.indexing_technique,e.retrieval_model_dict?.search_method)}),"external"===e.provider&&(0,r.jsx)(K.default,{className:"shrink-0",text:l("externalTag",{ns:"dataset"})})]},e.id)),p&&(0,r.jsx)(Q.default,{})]})}),!m&&(0,r.jsxs)("div",{className:"mt-8 flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-sm  font-medium text-text-secondary",children:o.length>0&&`${o.length} ${l("feature.dataSet.selected",{ns:"appDebug"})}`}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(V.default,{onClick:a,children:l("operation.cancel",{ns:"common"})}),(0,r.jsx)(V.default,{variant:"primary",onClick:()=>{i(o)},disabled:g,children:l("operation.add",{ns:"common"})})]})]})]})});e.s(["default",0,et],766293);var er=e.i(944911),ea=e.i(664826),en=e.i(70486);let es="installModal";(t={}).fromLocal="fromLocal",t.fromMarketplace="fromMarketplace",t.fromDSL="fromDSL";let ei=n.memo(e=>{let{installType:t="fromMarketplace",fromDSLPayload:a,onClose:s}=e,{t:i}=(0,W.useTranslation)(),[l,o]=(0,n.useState)("fromMarketplace"===t?er.InstallStep.readyToInstall:er.InstallStep.uploading),{modalClassName:c,foldAnimInto:u,setIsInstalling:d,handleStartToInstall:m}=(0,ea.default)(s),p=(0,n.useCallback)(()=>l===er.InstallStep.uploadFailed?i(`${es}.uploadFailed`,{ns:"plugin"}):l===er.InstallStep.installed?i(`${es}.installComplete`,{ns:"plugin"}):i(`${es}.installPlugin`,{ns:"plugin"}),[l,i]);return(0,r.jsxs)(J.default,{isShow:!0,onClose:u,className:(0,ee.cn)(c,"shadows-shadow-xl flex min-w-[560px] flex-col items-start rounded-2xl border-[0.5px] border-components-panel-border bg-components-panel-bg p-0"),closable:!0,children:[(0,r.jsx)("div",{className:"flex items-start gap-2 self-stretch pb-3 pl-6 pr-14 pt-6",children:(0,r.jsx)("div",{className:"title-2xl-semi-bold self-stretch text-text-primary",children:p()})}),(0,r.jsx)(en.default,{step:l,onStepChange:o,onStartToInstall:m,setIsInstalling:d,allPlugins:a,onClose:s})]})});var el=e.i(239427);e.s(["default",0,()=>{let e=(0,el.useStore)(e=>e.dependencies),t=(0,n.useCallback)(()=>{let{setDependencies:e}=el.useStore.getState();e([])},[]);return e.length?(0,r.jsx)(ei,{fromDSLPayload:e,onClose:t}):null}],337132)},16060,e=>{"use strict";var t=e.i(563199),r=e.i(837699),a=e.i(124836),n=e.i(268255);e.i(152567);var s=e.i(408767),i=e.i(151094),l=e.i(324935);e.i(42241);var o=e.i(825220),c=e.i(21151),u=e.i(935139);e.s(["default",0,e=>{let{envList:d=[],onConfirm:m,onClose:p}=e,{t:f}=(0,s.useTranslation)(),[h,x]=(0,n.useState)(!1);return(0,t.jsxs)(c.default,{isShow:!0,onClose:a.noop,className:(0,u.cn)("w-[480px] max-w-[480px]"),children:[(0,t.jsx)("div",{className:"title-2xl-semi-bold relative pb-6 text-text-primary",children:f("env.export.title",{ns:"workflow"})}),(0,t.jsx)("div",{className:"absolute right-4 top-4 cursor-pointer p-2",onClick:p,children:(0,t.jsx)(r.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)("table",{className:"radius-md w-full border-separate border-spacing-0 border border-divider-regular shadow-xs",children:[(0,t.jsx)("thead",{className:"system-xs-medium-uppercase text-text-tertiary",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{width:220,className:"h-7 border-b border-r border-divider-regular pl-3",children:"NAME"}),(0,t.jsx)("td",{className:"h-7 border-b border-divider-regular pl-3",children:"VALUE"})]})}),(0,t.jsx)("tbody",{children:d.map((e,a)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:(0,u.cn)("system-xs-medium h-7 border-r pl-3",a+1!==d.length&&"border-b"),children:(0,t.jsxs)("div",{className:"flex w-[200px] items-center gap-1",children:[(0,t.jsx)(o.Env,{className:"h-4 w-4 shrink-0 text-util-colors-violet-violet-600"}),(0,t.jsx)("div",{className:"truncate text-text-primary",children:e.name}),(0,t.jsx)("div",{className:"shrink-0 text-text-tertiary",children:"Secret"}),(0,t.jsx)(r.RiLock2Line,{className:"h-3 w-3 shrink-0 text-text-tertiary"})]})}),(0,t.jsx)("td",{className:(0,u.cn)("h-7 pl-3",a+1!==d.length&&"border-b"),children:(0,t.jsx)("div",{className:"system-xs-regular truncate text-text-secondary",children:e.value})})]},e.name))})]})}),(0,t.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,t.jsx)(l.default,{className:"shrink-0",checked:h,onCheck:()=>x(!h)}),(0,t.jsx)("div",{className:"system-sm-medium cursor-pointer text-text-primary",onClick:()=>x(!h),children:f("env.export.checkbox",{ns:"workflow"})})]}),(0,t.jsxs)("div",{className:"flex flex-row-reverse pt-6",children:[(0,t.jsx)(i.default,{className:"ml-2",variant:"primary",onClick:()=>{m(h),p()},children:f(h?"env.export.export":"env.export.ignore",{ns:"workflow"})}),(0,t.jsx)(i.default,{onClick:p,children:f("operation.cancel",{ns:"common"})})]})]})}])},439387,e=>{e.v(t=>Promise.all(["static/chunks/a5cb0b72d39b9b44.js","static/chunks/13d885d133d95b7f.js","static/chunks/71abe0078e8cf32b.css"].map(t=>e.l(t))).then(()=>t(3871)))},201201,e=>{e.v(t=>Promise.all(["static/chunks/33d89f7067007c66.js","static/chunks/c798d4f27fd7256a.js","static/chunks/093735e21ea40753.css"].map(t=>e.l(t))).then(()=>t(661305)))},170830,e=>{e.v(e=>Promise.resolve().then(()=>e(81828)))},253777,e=>{e.v(t=>Promise.all(["static/chunks/a1f63fafd37e1177.js"].map(t=>e.l(t))).then(()=>t(580158)))},622938,e=>{e.v(t=>Promise.all(["static/chunks/6885e8082ebc0a75.js","static/chunks/71abe0078e8cf32b.css"].map(t=>e.l(t))).then(()=>t(689516)))},577475,e=>{e.v(t=>Promise.all(["static/chunks/dc7d54280627bc12.js"].map(t=>e.l(t))).then(()=>t(663443)))},672112,e=>{e.v(t=>Promise.all(["static/chunks/3cb1c662af9b0d89.js"].map(t=>e.l(t))).then(()=>t(283916)))},640692,e=>{e.v(t=>Promise.all(["static/chunks/5aaf849c539cb992.js"].map(t=>e.l(t))).then(()=>t(883816)))},289356,e=>{e.v(t=>Promise.all(["static/chunks/d3769681ea0c306b.js"].map(t=>e.l(t))).then(()=>t(645423)))},665761,e=>{e.v(t=>Promise.all(["static/chunks/c3ae752c3fe56061.js"].map(t=>e.l(t))).then(()=>t(932933)))},888741,e=>{e.v(t=>Promise.all(["static/chunks/1da3cd1ec450b28f.js"].map(t=>e.l(t))).then(()=>t(173827)))},507500,e=>{e.v(t=>Promise.all(["static/chunks/3cb1da0c47cfbb2c.js"].map(t=>e.l(t))).then(()=>t(963740)))}]);