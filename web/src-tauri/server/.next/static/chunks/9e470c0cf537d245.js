(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,261484,e=>{"use strict";var s=e.i(268255),t={SVG:"image/svg+xml",ICO:"image/x-icon",GIF:"image/gif",PNG:"image/png"};let a=function(e){(0,s.useEffect)(function(){if(e){var s=e.split("."),a=s[s.length-1].toLocaleUpperCase(),i=document.querySelector("link[rel*='icon']")||document.createElement("link");i.type=t[a],i.href=e,i.rel="shortcut icon",document.getElementsByTagName("head")[0].appendChild(i)}},[e])};var i=e.i(685888),l=e.i(354440),r={restoreOnUnmount:!1};let n=function(e,t){void 0===t&&(t=r);var a=(0,s.useRef)(l.default?document.title:"");(0,s.useEffect)(function(){document.title=e},[e]),(0,i.default)(function(){t.restoreOnUnmount&&(document.title=a.current)})};var c=e.i(494268),o=e.i(168014);function d(e){let t=(0,c.useIsSystemFeaturesPending)(),i=(0,c.useGlobalPublicStore)(e=>e.systemFeatures),l=e?`${e} - `:"",r="",d="";!1===t&&(i.branding.enabled?(r=`${l}${i.branding.application_title}`,d=i.branding.favicon):(r=`${l}Dify`,d=`${o.basePath}/favicon.ico`)),n(r),(0,s.useEffect)(()=>{let e=null;return i.branding.favicon&&(document.querySelectorAll("link[rel='icon'], link[rel='shortcut icon'], link[rel='apple-touch-icon'], link[rel='mask-icon']").forEach(e=>e.parentNode?.removeChild(e)),(e=document.createElement("link")).rel="apple-touch-icon",e.href=i.branding.favicon,document.head.appendChild(e)),()=>{e?.remove()}},[i.branding.favicon]),a(d)}e.s(["default",()=>d],261484)},141696,e=>{"use strict";var s=e.i(367916),t=e.i(935914);e.i(105845);var a=e.i(390622);let i=async(e,a,i)=>(0,s.get)(`${(0,t.getFlowPrefix)(e)}/${a}/workflows/draft/variables`,{params:{page:i,limit:100}}),l=async(e,s)=>{let{items:t,total:a}=await i(e,s,1);if(a<=100)return t;let l=Math.ceil(a/100),r=[];for(let t=2;t<=l;t++)r.push(i(e,s,t));return(await Promise.all(r)).forEach(e=>{let{items:s}=e;t.push(...s)}),t},r=async(e,a,i)=>{let{items:l}=await (0,s.get)(`${(0,t.getFlowPrefix)(e)}/${a}/workflows/draft/nodes/${i}/variables`);return l};e.s(["fetchAllInspectVars",0,l,"fetchCurrentValueOfConversationVariable",0,e=>{let{url:t,params:a}=e;return(0,s.get)(t,{params:a})},"fetchNodeDefault",0,function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,s.get)(`apps/${e}/workflows/default-workflow-block-configs/${t}`,{params:{q:JSON.stringify(a)}})},"fetchNodeInspectVars",0,r,"fetchNodesDefaultConfigs",0,e=>(0,s.get)(e),"fetchPipelineNodeDefault",0,function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,s.get)(`rag/pipelines/${e}/workflows/default-workflow-block-configs/${t}`,{params:{q:JSON.stringify(a)}})},"fetchPublishedWorkflow",0,e=>(0,s.get)(e),"fetchWorkflowDraft",0,e=>(0,s.get)(e,{},{silent:!0}),"getIterationSingleNodeRunUrl",0,(e,s,a,i)=>`${(0,t.getFlowPrefix)(e)}/${a}/${s?"advanced-chat/":""}workflows/draft/iteration/nodes/${i}/run`,"getLoopSingleNodeRunUrl",0,(e,s,a,i)=>`${(0,t.getFlowPrefix)(e)}/${a}/${s?"advanced-chat/":""}workflows/draft/loop/nodes/${i}/run`,"singleNodeRun",0,(e,a,i,l)=>(0,s.post)(`${(0,t.getFlowPrefix)(e)}/${a}/workflows/draft/nodes/${i}/run`,{body:l}),"stopWorkflowRun",0,e=>(0,s.post)(e),"syncWorkflowDraft",0,e=>{let{url:t,params:i}=e,l=(e=>{let{graph:s}=e;if(!s?.nodes?.length)return e;let t=s.nodes.map(e=>{let s=(e=>{let s=e.data;if(!s||s.type!==a.BlockEnum.TriggerPlugin)return e;let t={type:a.BlockEnum.TriggerPlugin,title:s.title??"",desc:s.desc??"",plugin_id:s.plugin_id??"",provider_id:s.provider_id??"",event_name:s.event_name??"",subscription_id:s.subscription_id??"",plugin_unique_identifier:s.plugin_unique_identifier??"",event_parameters:"object"==typeof s.event_parameters&&null!==s.event_parameters?s.event_parameters:{}};return{...e,data:t}})(e);if(s.data?.type===a.BlockEnum.Start&&Array.isArray(s.data.variables)){let e={...s,data:{...s.data}};return e.data.variables=s.data.variables.map(e=>{if(e&&"json_object"===e.type&&"string"==typeof e.json_schema)try{let s=JSON.parse(e.json_schema);return{...e,json_schema:s}}catch{}return e}),e}return s});return{...e,graph:{...s,nodes:t}}})(i);return(0,s.post)(t,{body:l},{silent:!0})}],141696)},584458,e=>{"use strict";var s=e.i(300322);e.s(["TriggerAll",()=>s.default])},606466,e=>{"use strict";var s=e.i(683257);e.s(["useDatasetApiAccessUrl",0,()=>(0,s.useDocLink)()("/api-reference/datasets/get-knowledge-base-list")])},227579,e=>{"use strict";var s=e.i(563199),t=e.i(268255),a=e.i(935139);let i=t.memo(e=>{let{className:t}=e;return(0,s.jsx)("div",{className:(0,a.cn)("absolute size-[112px] rounded-full bg-util-colors-blue-brand-blue-brand-500 blur-[80px]",t)})});e.s(["default",0,i])},203742,e=>{"use strict";var s=e.i(563199),t=e.i(869873),a=e.i(551193),i=e.i(837699),l=e.i(268255);e.i(152567);var r=e.i(408767),n=e.i(494268),c=e.i(752901),o=e.i(927897);let d=(0,e.i(639751).create)(e=>({appId:"",setAppId:s=>e({appId:s}),specificGroups:[],setSpecificGroups:s=>e({specificGroups:s}),specificMembers:[],setSpecificMembers:s=>e({specificMembers:s}),currentMenu:c.AccessMode.SPECIFIC_GROUPS_MEMBERS,setCurrentMenu:s=>e({currentMenu:s}),selectedGroupsForBreadcrumb:[],setSelectedGroupsForBreadcrumb:s=>e({selectedGroupsForBreadcrumb:s})}));var p=e.i(151094),m=e.i(137667),u=e.i(157169),x=e.i(935139);let h=e=>{let{className:t,children:r,show:n,onClose:c}=e,o=(0,l.useCallback)(()=>{c?.()},[c]);return(0,s.jsx)(u.Transition,{appear:!0,show:n,as:l.Fragment,children:(0,s.jsxs)(a.Dialog,{as:"div",open:!0,className:"relative z-[99]",onClose:()=>null,children:[(0,s.jsx)(u.Transition.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)("div",{className:"fixed inset-0 bg-background-overlay"})}),(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center",children:(0,s.jsx)(u.Transition.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,s.jsxs)(a.Dialog.Panel,{className:(0,x.cn)("relative h-auto min-h-[323px] w-[600px] overflow-y-auto rounded-2xl bg-components-panel-bg p-0 shadow-xl transition-all",t),children:[(0,s.jsx)("div",{onClick:()=>o(),className:"absolute right-5 top-5 z-10 flex h-8 w-8 cursor-pointer items-center justify-center",children:(0,s.jsx)(i.RiCloseLine,{className:"h-5 w-5 text-text-tertiary"})}),r]})})})]})})},f=e=>{let{type:t,children:a}=e,i=d(e=>e.currentMenu),l=d(e=>e.setCurrentMenu);return i!==t?(0,s.jsx)("div",{className:"cursor-pointer rounded-[10px] border-[1px] border-components-option-card-option-border bg-components-option-card-option-bg hover:border-components-option-card-option-border-hover hover:bg-components-option-card-option-bg-hover",onClick:()=>l(t),children:a}):(0,s.jsx)("div",{className:"rounded-[10px] border-[1.5px] border-components-option-card-option-selected-border bg-components-option-card-option-selected-bg shadow-sm",children:a})};f.displayName="AccessControlItem";var g=e.i(241661),j=e.i(449980),v=e.i(421001),b=e.i(715898),y=e.i(966428),N=e.i(711536),w=e.i(324935),C=e.i(291631),_=e.i(391185);function k(){var e;let{t}=(0,r.useTranslation)(),[a,n]=(0,l.useState)(!1),[m,u]=(0,l.useState)(""),x=d(e=>e.selectedGroupsForBreadcrumb),h=(0,y.useDebounce)(m,{wait:500}),f=x[x.length-1],{isLoading:g,isFetchingNextPage:v,fetchNextPage:N,data:w}=(0,o.useSearchForWhiteListCandidates)({keyword:h,groupId:f?.id,resultsPerPage:10},a),k=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e,s=w?.pages?.[0]?.hasMore??!1;return k.current&&(e=new IntersectionObserver(e=>{e[0].isIntersecting&&!g&&s&&N()},{rootMargin:"20px"})).observe(k.current),()=>e?.disconnect()},[g,N,k,w]),(0,s.jsxs)(_.PortalToFollowElem,{open:a,onOpenChange:n,offset:{crossAxis:300},placement:"bottom-end",children:[(0,s.jsx)(_.PortalToFollowElemTrigger,{asChild:!0,children:(0,s.jsxs)(p.default,{variant:"ghost-accent",size:"small",className:"flex shrink-0 items-center gap-x-0.5",onClick:()=>n(!a),children:[(0,s.jsx)(i.RiAddCircleFill,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:t("operation.add",{ns:"common"})})]})}),a&&(0,s.jsx)(b.FloatingOverlay,{}),(0,s.jsx)(_.PortalToFollowElemContent,{className:"z-[100]",children:(0,s.jsxs)("div",{className:"relative flex max-h-[400px] w-[400px] flex-col overflow-y-auto rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg-blur shadow-lg backdrop-blur-[5px]",children:[(0,s.jsx)("div",{className:"sticky top-0 z-10 bg-components-panel-bg-blur p-2 pb-0.5 backdrop-blur-[5px]",children:(0,s.jsx)(C.default,{value:m,onChange:e=>{u(e.target.value)},showLeftIcon:!0,placeholder:t("accessControlDialog.operateGroupAndMember.searchPlaceholder",{ns:"app"})})}),g?(0,s.jsx)("div",{className:"p-1",children:(0,s.jsx)(j.default,{})}):(w?.pages?.length??0)>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex h-7 items-center px-2 py-0.5",children:(0,s.jsx)(S,{})}),(0,s.jsxs)("div",{className:"p-1",children:[(e=w?.pages??[],e?.map(e=>(0,s.jsx)("div",{children:e.subjects?.map((e,t)=>e.subjectType===c.SubjectType.GROUP?(0,s.jsx)(I,{group:e.groupData},t):(0,s.jsx)(A,{member:e.accountData},t))},`search_group_member_page_${e.currPage}`))??null),v&&(0,s.jsx)(j.default,{})]}),(0,s.jsx)("div",{ref:k,className:"h-0",children:" "})]}):(0,s.jsx)("div",{className:"flex h-7 items-center justify-center px-2 py-0.5",children:(0,s.jsx)("span",{className:"system-xs-regular text-text-tertiary",children:t("accessControlDialog.operateGroupAndMember.noResult",{ns:"app"})})})]})})]})}function S(){let e=d(e=>e.selectedGroupsForBreadcrumb),t=d(e=>e.setSelectedGroupsForBreadcrumb),{t:a}=(0,r.useTranslation)(),i=(0,l.useCallback)(s=>{t(e.slice(0,s+1))},[t,e]),n=(0,l.useCallback)(()=>{t([])},[t]);return(0,s.jsxs)("div",{className:"flex h-7 items-center gap-x-0.5 px-2 py-0.5",children:[(0,s.jsx)("span",{className:(0,x.cn)("system-xs-regular text-text-tertiary",e.length>0&&"cursor-pointer text-text-accent"),onClick:n,children:a("accessControlDialog.operateGroupAndMember.allMembers",{ns:"app"})}),e.map((t,a)=>(0,s.jsxs)("div",{className:"system-xs-regular flex items-center gap-x-0.5 text-text-tertiary",children:[(0,s.jsx)("span",{children:"/"}),(0,s.jsx)("span",{className:a===e.length-1?"":"cursor-pointer text-text-accent",onClick:()=>i(a),children:t.name})]},a))]})}function I(e){let{group:t}=e,{t:a}=(0,r.useTranslation)(),n=d(e=>e.specificGroups),c=d(e=>e.setSpecificGroups),o=d(e=>e.selectedGroupsForBreadcrumb),m=d(e=>e.setSelectedGroupsForBreadcrumb),u=n.some(e=>e.id===t.id),x=(0,l.useCallback)(()=>{u?c(n.filter(e=>e.id!==t.id)):c([...n,t])},[n,c,t,u]),h=(0,l.useCallback)(()=>{m([...o,t])},[o,m,t]);return(0,s.jsxs)(M,{children:[(0,s.jsx)(w.default,{checked:u,className:"h-4 w-4 shrink-0",onCheck:x}),(0,s.jsxs)("div",{className:"item-center flex grow",children:[(0,s.jsx)("div",{className:"mr-2 h-5 w-5 overflow-hidden rounded-full bg-components-icon-bg-blue-solid",children:(0,s.jsx)("div",{className:"bg-access-app-icon-mask-bg flex h-full w-full items-center justify-center",children:(0,s.jsx)(i.RiOrganizationChart,{className:"h-[14px] w-[14px] text-components-avatar-shape-fill-stop-0"})})}),(0,s.jsx)("p",{className:"system-sm-medium mr-1 text-text-secondary",children:t.name}),(0,s.jsx)("p",{className:"system-xs-regular text-text-tertiary",children:t.groupSize})]}),(0,s.jsxs)(p.default,{size:"small",disabled:u,variant:"ghost-accent",className:"flex shrink-0 items-center justify-between px-1.5 py-1",onClick:h,children:[(0,s.jsx)("span",{className:"px-[3px]",children:a("accessControlDialog.operateGroupAndMember.expand",{ns:"app"})}),(0,s.jsx)(i.RiArrowRightSLine,{className:"h-4 w-4"})]})]})}function A(e){let{member:t}=e,a=(0,N.useSelector)(e=>e.userProfile),{t:i}=(0,r.useTranslation)(),n=d(e=>e.specificMembers),c=d(e=>e.setSpecificMembers),o=n.some(e=>e.id===t.id),p=(0,l.useCallback)(()=>{o?c(n.filter(e=>e.id!==t.id)):c([...n,t])},[n,c,t,o]);return(0,s.jsxs)(M,{className:"pr-3",children:[(0,s.jsx)(w.default,{checked:o,className:"h-4 w-4 shrink-0",onCheck:p}),(0,s.jsxs)("div",{className:"flex grow items-center",children:[(0,s.jsx)("div",{className:"mr-2 h-5 w-5 overflow-hidden rounded-full bg-components-icon-bg-blue-solid",children:(0,s.jsx)("div",{className:"bg-access-app-icon-mask-bg flex h-full w-full items-center justify-center",children:(0,s.jsx)(g.default,{className:"h-[14px] w-[14px]",textClassName:"text-[12px]",avatar:null,name:t.name})})}),(0,s.jsx)("p",{className:"system-sm-medium mr-1 text-text-secondary",children:t.name}),a.email===t.email&&(0,s.jsxs)("p",{className:"system-xs-regular text-text-tertiary",children:["(",i("you",{ns:"common"}),")"]})]}),(0,s.jsx)("p",{className:"system-xs-regular text-text-quaternary",children:t.email})]})}function M(e){let{children:t,className:a}=e;return(0,s.jsx)("div",{className:(0,x.cn)("flex cursor-pointer items-center space-x-2 p-1 pl-2 hover:rounded-lg hover:bg-state-base-hover",a),children:t})}function E(){let e=d(e=>e.currentMenu),t=d(e=>e.appId),a=d(e=>e.setSpecificGroups),n=d(e=>e.setSpecificMembers),{t:p}=(0,r.useTranslation)(),{isPending:m,data:u}=(0,o.useAppWhiteListSubjects)(t,!!t&&e===c.AccessMode.SPECIFIC_GROUPS_MEMBERS);return((0,l.useEffect)(()=>{a(u?.groups??[]),n(u?.members??[])},[u,a,n]),e!==c.AccessMode.SPECIFIC_GROUPS_MEMBERS)?(0,s.jsx)("div",{className:"flex items-center p-3",children:(0,s.jsxs)("div",{className:"flex grow items-center gap-x-2",children:[(0,s.jsx)(i.RiLockLine,{className:"h-4 w-4 text-text-primary"}),(0,s.jsx)("p",{className:"system-sm-medium text-text-primary",children:p("accessControlDialog.accessItems.specific",{ns:"app"})})]})}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-1 p-3",children:[(0,s.jsxs)("div",{className:"flex grow items-center gap-x-1",children:[(0,s.jsx)(i.RiLockLine,{className:"h-4 w-4 text-text-primary"}),(0,s.jsx)("p",{className:"system-sm-medium text-text-primary",children:p("accessControlDialog.accessItems.specific",{ns:"app"})})]}),(0,s.jsx)("div",{className:"flex items-center gap-x-1",children:(0,s.jsx)(k,{})})]}),(0,s.jsx)("div",{className:"px-1 pb-1",children:(0,s.jsx)("div",{className:"flex max-h-[400px] flex-col gap-y-2 overflow-y-auto rounded-lg bg-background-section p-2",children:m?(0,s.jsx)(j.default,{}):(0,s.jsx)($,{})})})]})}function $(){let{t:e}=(0,r.useTranslation)(),t=d(e=>e.specificGroups),a=d(e=>e.specificMembers);return t.length<=0&&a.length<=0?(0,s.jsx)("div",{className:"px-2 pb-1.5 pt-5",children:(0,s.jsx)("p",{className:"system-xs-regular text-center text-text-tertiary",children:e("accessControlDialog.noGroupsOrMembers",{ns:"app"})})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"system-2xs-medium-uppercase sticky top-0 text-text-tertiary",children:e("accessControlDialog.groups",{ns:"app",count:t.length??0})}),(0,s.jsx)("div",{className:"flex flex-row flex-wrap gap-1",children:t.map((e,t)=>(0,s.jsx)(T,{group:e},t))}),(0,s.jsx)("p",{className:"system-2xs-medium-uppercase sticky top-0 text-text-tertiary",children:e("accessControlDialog.members",{ns:"app",count:a.length??0})}),(0,s.jsx)("div",{className:"flex flex-row flex-wrap gap-1",children:a.map((e,t)=>(0,s.jsx)(R,{member:e},t))})]})}function T(e){let{group:t}=e,a=d(e=>e.specificGroups),r=d(e=>e.setSpecificGroups),n=(0,l.useCallback)(()=>{r(a.filter(e=>e.id!==t.id))},[t,r,a]);return(0,s.jsxs)(P,{icon:(0,s.jsx)(i.RiOrganizationChart,{className:"h-[14px] w-[14px] text-components-avatar-shape-fill-stop-0"}),onRemove:n,children:[(0,s.jsx)("p",{className:"system-xs-regular text-text-primary",children:t.name}),(0,s.jsx)("p",{className:"system-xs-regular text-text-tertiary",children:t.groupSize})]})}function R(e){let{member:t}=e,a=d(e=>e.specificMembers),i=d(e=>e.setSpecificMembers),r=(0,l.useCallback)(()=>{i(a.filter(e=>e.id!==t.id))},[t,i,a]);return(0,s.jsx)(P,{icon:(0,s.jsx)(g.default,{className:"h-[14px] w-[14px]",textClassName:"text-[12px]",avatar:null,name:t.name}),onRemove:r,children:(0,s.jsx)("p",{className:"system-xs-regular text-text-primary",children:t.name})})}function P(e){let{icon:t,onRemove:a,children:l}=e;return(0,s.jsxs)("div",{className:"group flex flex-row items-center gap-x-1 rounded-full border-[0.5px] bg-components-badge-white-to-dark p-1 pr-1.5 shadow-xs",children:[(0,s.jsx)("div",{className:"h-5 w-5 overflow-hidden rounded-full bg-components-icon-bg-blue-solid",children:(0,s.jsx)("div",{className:"bg-access-app-icon-mask-bg flex h-full w-full items-center justify-center",children:t})}),l,(0,s.jsx)("div",{className:"flex h-4 w-4 cursor-pointer items-center justify-center",onClick:a,children:(0,s.jsx)(i.RiCloseCircleFill,{className:"h-[14px] w-[14px] text-text-quaternary"})})]})}function L(){let{t:e}=(0,r.useTranslation)();return(0,s.jsx)(v.default,{asChild:!1,popupContent:e("accessControlDialog.webAppSSONotEnabledTip",{ns:"app"}),children:(0,s.jsx)(i.RiAlertFill,{className:"h-4 w-4 shrink-0 text-text-warning-secondary"})})}function D(e){let{app:u,onClose:x,onConfirm:g}=e,{t:j}=(0,r.useTranslation)(),v=(0,n.useGlobalPublicStore)(e=>e.systemFeatures),b=d(e=>e.setAppId),y=d(e=>e.specificGroups),N=d(e=>e.specificMembers),w=d(e=>e.currentMenu),C=d(e=>e.setCurrentMenu),_=v.webapp_auth.enabled&&(v.webapp_auth.allow_sso||v.webapp_auth.allow_email_password_login||v.webapp_auth.allow_email_code_login);(0,l.useEffect)(()=>{b(u.id),C(u.access_mode??c.AccessMode.SPECIFIC_GROUPS_MEMBERS)},[u,b,C]);let{isPending:k,mutateAsync:S}=(0,o.useUpdateAccessMode)(),I=(0,l.useCallback)(async()=>{let e={appId:u.id,accessMode:w};if(w===c.AccessMode.SPECIFIC_GROUPS_MEMBERS){let s=[];y.forEach(e=>{s.push({subjectId:e.id,subjectType:c.SubjectType.GROUP})}),N.forEach(e=>{s.push({subjectId:e.id,subjectType:c.SubjectType.ACCOUNT})}),e.subjects=s}await S(e),m.default.notify({type:"success",message:j("accessControlDialog.updateSuccess",{ns:"app"})}),g?.()},[S,u,y,N,j,g,w]);return(0,s.jsx)(h,{show:!0,onClose:x,children:(0,s.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,s.jsxs)("div",{className:"pb-3 pl-6 pr-14 pt-6",children:[(0,s.jsx)(a.DialogTitle,{className:"title-2xl-semi-bold text-text-primary",children:j("accessControlDialog.title",{ns:"app"})}),(0,s.jsx)(t.Description,{className:"system-xs-regular mt-1 text-text-tertiary",children:j("accessControlDialog.description",{ns:"app"})})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-1 px-6 pb-3",children:[(0,s.jsx)("div",{className:"leading-6",children:(0,s.jsx)("p",{className:"system-sm-medium text-text-tertiary",children:j("accessControlDialog.accessLabel",{ns:"app"})})}),(0,s.jsx)(f,{type:c.AccessMode.ORGANIZATION,children:(0,s.jsx)("div",{className:"flex items-center p-3",children:(0,s.jsxs)("div",{className:"flex grow items-center gap-x-2",children:[(0,s.jsx)(i.RiBuildingLine,{className:"h-4 w-4 text-text-primary"}),(0,s.jsx)("p",{className:"system-sm-medium text-text-primary",children:j("accessControlDialog.accessItems.organization",{ns:"app"})})]})})}),(0,s.jsx)(f,{type:c.AccessMode.SPECIFIC_GROUPS_MEMBERS,children:(0,s.jsx)(E,{})}),(0,s.jsx)(f,{type:c.AccessMode.EXTERNAL_MEMBERS,children:(0,s.jsxs)("div",{className:"flex items-center p-3",children:[(0,s.jsxs)("div",{className:"flex grow items-center gap-x-2",children:[(0,s.jsx)(i.RiVerifiedBadgeLine,{className:"h-4 w-4 text-text-primary"}),(0,s.jsx)("p",{className:"system-sm-medium text-text-primary",children:j("accessControlDialog.accessItems.external",{ns:"app"})})]}),!_&&(0,s.jsx)(L,{})]})}),(0,s.jsx)(f,{type:c.AccessMode.PUBLIC,children:(0,s.jsxs)("div",{className:"flex items-center gap-x-2 p-3",children:[(0,s.jsx)(i.RiGlobalLine,{className:"h-4 w-4 text-text-primary"}),(0,s.jsx)("p",{className:"system-sm-medium text-text-primary",children:j("accessControlDialog.accessItems.anyone",{ns:"app"})})]})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-x-2 p-6 pt-5",children:[(0,s.jsx)(p.default,{onClick:x,children:j("operation.cancel",{ns:"common"})}),(0,s.jsx)(p.default,{disabled:k,loading:k,variant:"primary",onClick:I,children:j("operation.confirm",{ns:"common"})})]})]})})}e.s(["default",()=>D],203742)},38185,e=>{e.v({active:"style-module__IDOhWG__active",chromePluginIcon:"style-module__IDOhWG__chromePluginIcon",iframeIcon:"style-module__IDOhWG__iframeIcon",option:"style-module__IDOhWG__option",pluginInstallIcon:"style-module__IDOhWG__pluginInstallIcon",scriptsIcon:"style-module__IDOhWG__scriptsIcon"})},434571,e=>{"use strict";var s=e.i(563199),t=e.i(837699),a=e.i(26012),i=e.i(268255);e.i(152567);var l=e.i(408767),r=e.i(654313),n=e.i(199947),c=e.i(21151),o=e.i(421001),d=e.i(925521),p=e.i(711536),m=e.i(935139),u=e.i(168014),x=e.i(38185);let h={iframe:{getContent:(e,s)=>`<iframe
 src="${e}${u.basePath}/chatbot/${s}"
 style="width: 100%; height: 100%; min-height: 700px"
 frameborder="0"
 allow="microphone">
</iframe>`},scripts:{getContent:(e,s,t,a)=>`<script>
 window.difyChatbotConfig = {
  token: '${s}'${a?`,
  isDev: true`:""}${d.IS_CE_EDITION?`,
  baseUrl: '${e}${u.basePath}'`:""},
  inputs: {
    // You can define the inputs from the Start node here
    // key is the variable name
    // e.g.
    // name: "NAME"
  },
  systemVariables: {
    // user_id: 'YOU CAN DEFINE USER ID HERE',
    // conversation_id: 'YOU CAN DEFINE CONVERSATION ID HERE, IT MUST BE A VALID UUID',
  },
  userVariables: {
    // avatar_url: 'YOU CAN DEFINE USER AVATAR URL HERE',
    // name: 'YOU CAN DEFINE USER NAME HERE',
  },
 }
</script>
<script
 src="${e}${u.basePath}/embed.min.js"
 id="${s}"
 defer>
</script>
<style>
  #dify-chatbot-bubble-button {
    background-color: ${t} !important;
  }
  #dify-chatbot-bubble-window {
    width: 24rem !important;
    height: 40rem !important;
  }
</style>`},chromePlugin:{getContent:(e,s)=>`ChatBot URL: ${e}${u.basePath}/chatbot/${s}`}},f="overview.appInfo.embedded";e.s(["default",0,e=>{let{siteInfo:d,isShow:u,onClose:g,appBaseUrl:j,accessToken:v,className:b}=e,{t:y}=(0,l.useTranslation)(),[N,w]=(0,i.useState)("iframe"),[C,_]=(0,i.useState)({iframe:!1,scripts:!1,chromePlugin:!1}),{langGeniusVersionInfo:k}=(0,p.useAppContext)(),S=(0,n.useThemeContext)();S.buildTheme(d?.chat_color_theme??null,d?.chat_color_theme_inverted??!1);let I="TESTING"===k.current_env||"DEVELOPMENT"===k.current_env,A=()=>{let e={...C};Object.keys(e).forEach(s=>{e[s]=!1}),_(e)};return(0,i.useEffect)(()=>{A()},[u]),(0,s.jsxs)(c.default,{title:y(`${f}.title`,{ns:"appOverview"}),isShow:u,onClose:g,className:"w-[640px] !max-w-2xl",wrapperClassName:b,closable:!0,children:[(0,s.jsx)("div",{className:"system-sm-medium mb-4 mt-8 text-text-primary",children:y(`${f}.explanation`,{ns:"appOverview"})}),(0,s.jsx)("div",{className:"flex flex-wrap items-center justify-between gap-y-2",children:Object.keys(h).map((e,t)=>(0,s.jsx)("div",{className:(0,m.cn)(x.default.option,x.default[`${e}Icon`],N===e&&x.default.active),onClick:()=>{w(e),A()}},t))}),"chromePlugin"===N&&(0,s.jsx)("div",{className:"mt-6 w-full",children:(0,s.jsxs)("div",{className:(0,m.cn)("inline-flex w-full items-center justify-center gap-2 rounded-lg py-3","shrink-0 cursor-pointer bg-primary-600 text-white hover:bg-primary-600/75 hover:shadow-sm"),children:[(0,s.jsx)("div",{className:`relative h-4 w-4 ${x.default.pluginInstallIcon}`}),(0,s.jsx)("div",{className:"font-['Inter'] text-sm font-medium leading-tight text-white",onClick:()=>{window.open("https://chrome.google.com/webstore/detail/dify-chatbot/ceehdapohffmjmkdcifjofadiaoeggaf","_blank","noopener,noreferrer")},children:y(`${f}.chromePlugin`,{ns:"appOverview"})})]})}),(0,s.jsxs)("div",{className:(0,m.cn)("inline-flex w-full flex-col items-start justify-start rounded-lg border-[0.5px] border-components-panel-border bg-background-section","mt-6"),children:[(0,s.jsxs)("div",{className:"inline-flex items-center justify-start gap-2 self-stretch rounded-t-lg bg-background-section-burn py-1  pl-3 pr-1",children:[(0,s.jsx)("div",{className:"system-sm-medium shrink-0 grow text-text-secondary",children:y(`${f}.${N}`,{ns:"appOverview"})}),(0,s.jsx)(o.default,{popupContent:y(C[N]?`${f}.copied`:`${f}.copy`,{ns:"appOverview"})||"",children:(0,s.jsx)(r.default,{children:(0,s.jsxs)("div",{onClick:()=>{if("chromePlugin"===N){let e=h[N].getContent(j,v).split(": ");e.length>1&&(0,a.default)(e[1])}else(0,a.default)(h[N].getContent(j,v,S.theme?.primaryColor??"#1C64F2",I));_({...C,[N]:!0})},children:[C[N]&&(0,s.jsx)(t.RiClipboardFill,{className:"h-4 w-4"}),!C[N]&&(0,s.jsx)(t.RiClipboardLine,{className:"h-4 w-4"})]})})})]}),(0,s.jsx)("div",{className:"flex w-full items-start justify-start gap-2 overflow-x-auto p-3",children:(0,s.jsx)("div",{className:"shrink grow basis-0 font-mono text-[13px] leading-tight text-text-secondary",children:(0,s.jsx)("pre",{className:"select-text",children:h[N].getContent(j,v,S.theme?.primaryColor??"#1C64F2",I)})})})]})]})}])},176891,e=>{"use strict";var s=e.i(563199),t=e.i(837699),a=e.i(124836),i=e.i(268255);e.i(152567);var l=e.i(408767),r=e.i(151094),n=e.i(291631),c=e.i(21151),o=e.i(873517),d=e.i(211857),p=e.i(935139),m=e.i(257899),u=e.i(360972),x=e.i(137667);e.s(["default",0,e=>{let{show:h,dataset:f,onSuccess:g,onClose:j}=e,{t:v}=(0,l.useTranslation)(),[b,y]=(0,i.useState)(!1),[N,w]=(0,i.useState)(f.name),[C,_]=(0,i.useState)(f.description),k=f.external_knowledge_info.external_knowledge_id,S=f.external_knowledge_info.external_knowledge_api_id,[I,A]=(0,i.useState)(f.icon_info?.icon_type==="image"?{type:"image",url:f.icon_info?.icon_url||"",fileId:f.icon_info?.icon||""}:{type:"emoji",icon:f.icon_info?.icon||"",background:f.icon_info?.icon_background||""}),[M,E]=(0,i.useState)(!1),$=(0,i.useRef)(f.icon_info?.icon_type==="image"?{type:"image",url:f.icon_info?.icon_url||"",fileId:f.icon_info?.icon||""}:{type:"emoji",icon:f.icon_info?.icon||"",background:f.icon_info?.icon_background||""}),T=(0,i.useCallback)(()=>{E(!0),$.current=I},[I]),R=(0,i.useCallback)(e=>{A(e),E(!1)},[]),P=(0,i.useCallback)(()=>{A($.current),E(!1)},[]),L=(0,i.useCallback)(async()=>{if(!N.trim())return void x.default.notify({type:"error",message:v("form.nameError",{ns:"datasetSettings"})});try{y(!0);let e={name:N,description:C,icon_info:{icon:"image"===I.type?I.fileId:I.icon,icon_type:I.type,icon_background:"image"===I.type?void 0:I.background,icon_url:"image"===I.type?I.url:void 0}};k&&S&&(e.external_knowledge_id=k,e.external_knowledge_api_id=S),await (0,d.updateDatasetSetting)({datasetId:f.id,body:e}),x.default.notify({type:"success",message:v("actionMsg.modifiedSuccessfully",{ns:"common"})}),g&&g(),j()}catch{x.default.notify({type:"error",message:v("actionMsg.modifiedUnsuccessfully",{ns:"common"})})}finally{y(!1)}},[I,C,f.id,S,k,N,j,g,v]);return(0,s.jsxs)(c.default,{className:"w-[520px] max-w-[520px] rounded-xl px-8 py-6",isShow:h,onClose:a.noop,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between pb-2",children:[(0,s.jsx)("div",{className:"text-xl font-medium leading-[30px] text-text-primary",children:v("title",{ns:"datasetSettings"})}),(0,s.jsx)("div",{className:"cursor-pointer p-2",onClick:j,children:(0,s.jsx)(t.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:(0,p.cn)("flex flex-col py-4"),children:[(0,s.jsx)("div",{className:"shrink-0 py-2 text-sm font-medium leading-[20px] text-text-primary",children:v("form.name",{ns:"datasetSettings"})}),(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,s.jsx)(m.default,{size:"medium",onClick:T,className:"cursor-pointer",iconType:I.type,icon:"image"===I.type?I.fileId:I.icon,background:"image"===I.type?void 0:I.background,imageUrl:"image"===I.type?I.url:void 0,showEditIcon:!0}),(0,s.jsx)(n.default,{value:N,onChange:e=>w(e.target.value),className:"h-9 grow",placeholder:v("form.namePlaceholder",{ns:"datasetSettings"})||""})]})]}),(0,s.jsxs)("div",{className:(0,p.cn)("flex flex-col py-4"),children:[(0,s.jsx)("div",{className:"shrink-0 py-2 text-sm font-medium leading-[20px] text-text-primary",children:v("form.desc",{ns:"datasetSettings"})}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(o.default,{value:C,onChange:e=>_(e.target.value),className:"resize-none",placeholder:v("form.descPlaceholder",{ns:"datasetSettings"})||""})})]})]}),(0,s.jsxs)("div",{className:"flex justify-end pt-6",children:[(0,s.jsx)(r.default,{className:"mr-2",onClick:j,children:v("operation.cancel",{ns:"common"})}),(0,s.jsx)(r.default,{disabled:b,variant:"primary",onClick:L,children:v("operation.save",{ns:"common"})})]}),M&&(0,s.jsx)(u.default,{onSelect:R,onClose:P})]})}])},189445,e=>{"use strict";var s=e.i(204667);e.s(["ApiAggregate",()=>s.default])},462057,e=>{"use strict";var s=e.i(372013);e.s(["WindowCursor",()=>s.default])},355204,e=>{"use strict";var s=e.i(172995);e.s(["ApiAggregate",()=>s.default])},159639,e=>{"use strict";var s=e.i(563199);e.i(152567);var t=e.i(408767);e.i(916131);var a=e.i(355204),i=e.i(462057),l=e.i(421001),r=e.i(257899);let n=(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.833497 5.13481C0.833483 4.69553 0.83347 4.31654 0.858973 4.0044C0.88589 3.67495 0.94532 3.34727 1.10598 3.03195C1.34567 2.56155 1.72812 2.17909 2.19852 1.93941C2.51384 1.77875 2.84152 1.71932 3.17097 1.6924C3.48312 1.6669 3.86209 1.66691 4.30137 1.66693L7.62238 1.66684C8.11701 1.66618 8.55199 1.66561 8.95195 1.80356C9.30227 1.92439 9.62134 2.12159 9.88607 2.38088C10.1883 2.67692 10.3823 3.06624 10.603 3.50894L11.3484 5.00008H14.3679C15.0387 5.00007 15.5924 5.00006 16.0434 5.03691C16.5118 5.07518 16.9424 5.15732 17.3468 5.36339C17.974 5.68297 18.4839 6.19291 18.8035 6.82011C19.0096 7.22456 19.0917 7.65515 19.13 8.12356C19.1668 8.57455 19.1668 9.12818 19.1668 9.79898V13.5345C19.1668 14.2053 19.1668 14.7589 19.13 15.2099C19.0917 15.6784 19.0096 16.1089 18.8035 16.5134C18.4839 17.1406 17.974 17.6505 17.3468 17.9701C16.9424 18.1762 16.5118 18.2583 16.0434 18.2966C15.5924 18.3334 15.0387 18.3334 14.3679 18.3334H5.63243C4.96163 18.3334 4.40797 18.3334 3.95698 18.2966C3.48856 18.2583 3.05798 18.1762 2.65353 17.9701C2.02632 17.6505 1.51639 17.1406 1.19681 16.5134C0.990734 16.1089 0.908597 15.6784 0.870326 15.2099C0.833478 14.7589 0.833487 14.2053 0.833497 13.5345V5.13481ZM7.51874 3.33359C8.17742 3.33359 8.30798 3.34447 8.4085 3.37914C8.52527 3.41942 8.63163 3.48515 8.71987 3.57158C8.79584 3.64598 8.86396 3.7579 9.15852 4.34704L9.48505 5.00008L2.50023 5.00008C2.50059 4.61259 2.50314 4.34771 2.5201 4.14012C2.5386 3.91374 2.57 3.82981 2.59099 3.7886C2.67089 3.6318 2.79837 3.50432 2.95517 3.42442C2.99638 3.40343 3.08031 3.37203 3.30669 3.35353C3.54281 3.33424 3.85304 3.33359 4.3335 3.33359H7.51874Z",fill:"#444CE7"})}),c=(0,s.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsxs)("g",{clipPath:"url(#clip0_6294_13848)",children:[(0,s.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.287 21.9133L1.70748 18.6999C1.08685 17.9267 0.75 16.976 0.75 15.9974V4.36124C0.75 2.89548 1.92269 1.67923 3.43553 1.57594L15.3991 0.759137C16.2682 0.699797 17.1321 0.930818 17.8461 1.41353L22.0494 4.25543C22.8018 4.76414 23.25 5.59574 23.25 6.48319V19.7124C23.25 21.1468 22.0969 22.3345 20.6157 22.4256L7.3375 23.243C6.1555 23.3158 5.01299 22.8178 4.287 21.9133Z",fill:"white"}),(0,s.jsx)("path",{d:"M8.43607 10.1842V10.0318C8.43607 9.64564 8.74535 9.32537 9.14397 9.29876L12.0475 9.10491L16.0628 15.0178V9.82823L15.0293 9.69046V9.6181C15.0293 9.22739 15.3456 8.90501 15.7493 8.88433L18.3912 8.74899V9.12918C18.3912 9.30765 18.2585 9.46031 18.0766 9.49108L17.4408 9.59861V18.0029L16.6429 18.2773C15.9764 18.5065 15.2343 18.2611 14.8527 17.6853L10.9545 11.803V17.4173L12.1544 17.647L12.1377 17.7583C12.0853 18.1069 11.7843 18.3705 11.4202 18.3867L8.43607 18.5195C8.39662 18.1447 8.67758 17.8093 9.06518 17.7686L9.45771 17.7273V10.2416L8.43607 10.1842Z",fill:"black"}),(0,s.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.5062 2.22521L3.5426 3.04201C2.82599 3.09094 2.27051 3.66706 2.27051 4.36136V15.9975C2.27051 16.6499 2.49507 17.2837 2.90883 17.7992L5.48835 21.0126C5.90541 21.5322 6.56174 21.8183 7.24076 21.7765L20.519 20.9591C21.1995 20.9172 21.7293 20.3716 21.7293 19.7125V6.48332C21.7293 6.07557 21.5234 5.69348 21.1777 5.45975L16.9743 2.61784C16.546 2.32822 16.0277 2.1896 15.5062 2.22521ZM4.13585 4.54287C3.96946 4.41968 4.04865 4.16303 4.25768 4.14804L15.5866 3.33545C15.9476 3.30956 16.3063 3.40896 16.5982 3.61578L18.8713 5.22622C18.9576 5.28736 18.9171 5.41935 18.8102 5.42516L6.8129 6.07764C6.44983 6.09739 6.09144 5.99073 5.80276 5.77699L4.13585 4.54287ZM6.25018 8.12315C6.25018 7.7334 6.56506 7.41145 6.9677 7.38952L19.6523 6.69871C20.0447 6.67734 20.375 6.97912 20.375 7.35898V18.8141C20.375 19.2031 20.0613 19.5247 19.6594 19.5476L7.05516 20.2648C6.61845 20.2896 6.25018 19.954 6.25018 19.5312V8.12315Z",fill:"black"})]}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"clip0_6294_13848",children:(0,s.jsx)("rect",{width:"24",height:"24",fill:"white"})})})]}),o={app:(0,s.jsx)(r.default,{className:"border !border-[rgba(0,0,0,0.05)]"}),api:(0,s.jsx)("div",{className:"rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-blue-brand-blue-brand-500 p-1 shadow-md",children:(0,s.jsx)(a.ApiAggregate,{className:"h-4 w-4 text-text-primary-on-surface"})}),dataset:(0,s.jsx)(r.default,{innerIcon:n,className:"!border-[0.5px] !border-indigo-100 !bg-indigo-25"}),webapp:(0,s.jsx)("div",{className:"rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-blue-brand-blue-brand-500 p-1 shadow-md",children:(0,s.jsx)(i.WindowCursor,{className:"h-4 w-4 text-text-primary-on-surface"})}),notion:(0,s.jsx)(r.default,{innerIcon:c,className:"!border-[0.5px] !border-indigo-100 !bg-white"})};function d(e){let{icon:a,icon_background:i,name:n,isExternal:c,type:d,hoverTip:p,textStyle:m,isExtraInLine:u,mode:x="expand",iconType:h="app",hideType:f}=e,{t:g}=(0,t.useTranslation)();return(0,s.jsxs)("div",{className:"flex grow items-center",children:[a&&i&&"app"===h&&(0,s.jsx)("div",{className:"mr-2 shrink-0",children:(0,s.jsx)(r.default,{icon:a,background:i})}),"app"!==h&&(0,s.jsx)("div",{className:"mr-2 shrink-0",children:o[h]}),"expand"===x&&(0,s.jsxs)("div",{className:"group w-full",children:[(0,s.jsxs)("div",{className:`system-md-semibold flex flex-row items-center text-text-secondary group-hover:text-text-primary ${m?.main??""}`,children:[(0,s.jsx)("div",{className:"min-w-0 overflow-hidden text-ellipsis break-normal",children:n}),p&&(0,s.jsx)(l.default,{popupContent:(0,s.jsx)("div",{className:"w-[240px]",children:p}),popupClassName:"ml-1",triggerClassName:"w-4 h-4 ml-1",position:"top"})]}),!f&&u&&(0,s.jsx)("div",{className:"system-2xs-medium-uppercase flex text-text-tertiary",children:d}),!f&&!u&&(0,s.jsx)("div",{className:"system-2xs-medium-uppercase text-text-tertiary",children:c?g("externalTag",{ns:"dataset"}):d})]})]})}e.s(["default",()=>d])},735304,e=>{e.v({autoWidth:"style-module__Qu6CpW__autoWidth",close:"style-module__Qu6CpW__close",copied:"style-module__Qu6CpW__copied",copyIcon:"style-module__Qu6CpW__copyIcon",customApi:"style-module__Qu6CpW__customApi",customModal:"style-module__Qu6CpW__customModal",trash:"style-module__Qu6CpW__trash",trashIcon:"style-module__Qu6CpW__trashIcon",w64:"style-module__Qu6CpW__w64"})},890578,e=>{"use strict";var s=e.i(563199),t=e.i(742791),a=e.i(653356),i=e.i(837699),l=e.i(268255);e.i(152567);var r=e.i(408767),n=e.i(654313),c=e.i(151094),o=e.i(547105),d=e.i(772499),p=e.i(449980),m=e.i(21151),u=e.i(711536),x=e.i(157884),h=e.i(972282),f=e.i(211857),g=e.i(225244),j=e.i(632815),v=e.i(26012),b=e.i(915389),y=e.i(421001);let N=e=>{let{value:t="",className:a,children:i}=e,[r,n]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{if(r){let e=setTimeout(()=>{n(!1)},1e3);return()=>{clearTimeout(e)}}},[r]),(0,s.jsx)("div",{className:`flex items-center rounded-lg bg-components-input-bg-normal py-2 hover:bg-state-base-hover ${a}`,children:(0,s.jsxs)("div",{className:"flex h-5 grow items-center",children:[i,(0,s.jsx)("div",{className:"relative h-full grow text-[13px]",children:(0,s.jsx)("div",{className:"r-0 absolute left-0 top-0 w-full cursor-pointer truncate pl-2 pr-2",onClick:()=>{(0,v.default)(t),n(!0)},children:(0,s.jsx)(y.default,{popupContent:r?`${(0,b.t)("copied",{ns:"appApi"})}`:`${(0,b.t)("copy",{ns:"appApi"})}`,position:"bottom",children:(0,s.jsx)("span",{className:"text-text-secondary",children:t})})})}),(0,s.jsx)("div",{className:"h-4 w-px shrink-0 bg-divider-regular"}),(0,s.jsx)("div",{className:"mx-1",children:(0,s.jsx)(d.default,{content:t})})]})})};var w=e.i(735304);let C=e=>{let{isShow:t=!1,onClose:i,newKey:l,className:n}=e,{t:o}=(0,r.useTranslation)();return(0,s.jsxs)(m.default,{isShow:t,onClose:i,title:`${o("apiKeyModal.apiSecretKey",{ns:"appApi"})}`,className:`px-8 ${n}`,children:[(0,s.jsx)("div",{className:"-mr-2 -mt-6 mb-4 flex justify-end",children:(0,s.jsx)(a.XMarkIcon,{className:"h-6 w-6 cursor-pointer text-text-tertiary",onClick:i})}),(0,s.jsx)("p",{className:"mt-1 text-[13px] font-normal leading-5 text-text-tertiary",children:o("apiKeyModal.generateTips",{ns:"appApi"})}),(0,s.jsx)("div",{className:"my-4",children:(0,s.jsx)(N,{className:"w-full",value:l?.token})}),(0,s.jsx)("div",{className:"my-4 flex justify-end",children:(0,s.jsx)(c.default,{className:`shrink-0 ${w.default.w64}`,onClick:i,children:(0,s.jsx)("span",{className:"text-xs font-medium text-text-secondary",children:o("actionMsg.ok",{ns:"appApi"})})})})]})};e.s(["default",0,e=>{let{isShow:v=!1,appId:b,onClose:y}=e,{t:N}=(0,r.useTranslation)(),{formatTime:_}=(0,x.default)(),{currentWorkspace:k,isCurrentWorkspaceManager:S,isCurrentWorkspaceEditor:I}=(0,u.useAppContext)(),[A,M]=(0,l.useState)(!1),[E,$]=(0,l.useState)(!1),[T,R]=(0,l.useState)(void 0),P=(0,j.useInvalidateAppApiKeys)(),L=(0,g.useInvalidateDatasetApiKeys)(),{data:D,isLoading:F}=(0,j.useAppApiKeys)(b,{enabled:!!b&&v}),{data:O,isLoading:G}=(0,g.useDatasetApiKeys)({enabled:!b&&v}),U=b?D:O,W=b?F:G,[B,V]=(0,l.useState)(""),K=async()=>{if(M(!1),!B)return;let e=b?h.delApikey:f.delApikey,s=b?{url:`/apps/${b}/api-keys/${B}`,params:{}}:{url:`/datasets/api-keys/${B}`,params:{}};await e(s),b?P(b):L()},z=async()=>{let e=b?{url:`/apps/${b}/api-keys`,body:{}}:{url:"/datasets/api-keys",body:{}},s=b?h.createApikey:f.createApikey,t=await s(e);$(!0),R(t),b?P(b):L()};return(0,s.jsxs)(m.default,{isShow:v,onClose:y,title:`${N("apiKeyModal.apiSecretKey",{ns:"appApi"})}`,className:`${w.default.customModal} flex flex-col px-8`,children:[(0,s.jsx)("div",{className:"-mr-2 -mt-6 mb-4 flex justify-end",children:(0,s.jsx)(a.XMarkIcon,{className:"h-6 w-6 cursor-pointer text-text-tertiary",onClick:y})}),(0,s.jsx)("p",{className:"mt-1 shrink-0 text-[13px] font-normal leading-5 text-text-tertiary",children:N("apiKeyModal.apiSecretKeyTips",{ns:"appApi"})}),W&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(p.default,{})}),!!U?.data?.length&&(0,s.jsxs)("div",{className:"mt-4 flex grow flex-col overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex h-9 shrink-0 items-center border-b border-divider-regular text-xs font-semibold text-text-tertiary",children:[(0,s.jsx)("div",{className:"w-64 shrink-0 px-3",children:N("apiKeyModal.secretKey",{ns:"appApi"})}),(0,s.jsx)("div",{className:"w-[200px] shrink-0 px-3",children:N("apiKeyModal.created",{ns:"appApi"})}),(0,s.jsx)("div",{className:"w-[200px] shrink-0 px-3",children:N("apiKeyModal.lastUsed",{ns:"appApi"})}),(0,s.jsx)("div",{className:"grow px-3"})]}),(0,s.jsx)("div",{className:"grow overflow-auto",children:U.data.map(e=>{let t;return(0,s.jsxs)("div",{className:"flex h-9 items-center border-b border-divider-regular text-sm font-normal text-text-secondary",children:[(0,s.jsx)("div",{className:"w-64 shrink-0 truncate px-3 font-mono",children:(t=e.token,`${t.slice(0,3)}...${t.slice(-20)}`)}),(0,s.jsx)("div",{className:"w-[200px] shrink-0 truncate px-3",children:_(Number(e.created_at),N("dateTimeFormat",{ns:"appLog"}))}),(0,s.jsx)("div",{className:"w-[200px] shrink-0 truncate px-3",children:e.last_used_at?_(Number(e.last_used_at),N("dateTimeFormat",{ns:"appLog"})):N("never",{ns:"appApi"})}),(0,s.jsxs)("div",{className:"flex grow space-x-2 px-3",children:[(0,s.jsx)(d.default,{content:e.token}),S&&(0,s.jsx)(n.default,{onClick:()=>{V(e.id),M(!0)},children:(0,s.jsx)(i.RiDeleteBinLine,{className:"h-4 w-4"})})]})]},e.id)})})]}),(0,s.jsx)("div",{className:"flex",children:(0,s.jsxs)(c.default,{className:`mt-4 flex shrink-0 ${w.default.autoWidth}`,onClick:z,disabled:!k||!I,children:[(0,s.jsx)(t.PlusIcon,{className:"mr-1 flex h-4 w-4 shrink-0"}),(0,s.jsx)("div",{className:"text-xs font-medium text-text-secondary",children:N("apiKeyModal.createNewSecretKey",{ns:"appApi"})})]})}),(0,s.jsx)(C,{className:"shrink-0",isShow:E,onClose:()=>$(!1),newKey:T}),A&&(0,s.jsx)(o.default,{title:`${N("actionMsg.deleteConfirmTitle",{ns:"appApi"})}`,content:`${N("actionMsg.deleteConfirmTips",{ns:"appApi"})}`,isShow:A,onConfirm:K,onCancel:()=>{V(""),M(!1)}})]})}],890578)},648883,e=>{"use strict";var s=e.i(563199),t=e.i(837699),a=e.i(268255);e.i(152567);var i=e.i(408767),l=e.i(151094),r=e.i(890578);e.s(["default",0,e=>{let{className:n,appId:c,textCls:o}=e,[d,p]=(0,a.useState)(!1),{t:m}=(0,i.useTranslation)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.default,{className:`px-3 ${n}`,onClick:()=>p(!0),size:"small",variant:"ghost",children:[(0,s.jsx)("div",{className:"flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(t.RiKey2Line,{className:"h-3.5 w-3.5 text-text-tertiary"})}),(0,s.jsx)("div",{className:`system-xs-medium px-[3px] text-text-tertiary ${o}`,children:m("apiKey",{ns:"appApi"})})]}),(0,s.jsx)(r.default,{isShow:d,onClose:()=>p(!1),appId:c})]})}])},822726,e=>{"use strict";var s=e.i(563199),t=e.i(837699),a=e.i(326531),i=e.i(268255);e.i(152567);var l=e.i(408767),r=e.i(476054),n=e.i(189299);e.i(661734);var c=e.i(951875),c=c,o=e.i(189497),o=o,d=e.i(449980),p=e.i(303084),m=e.i(711536),u=e.i(413159),x=e.i(249420),h=e.i(271743),f=e.i(261484),g=e.i(225244),j=e.i(935139);let v=i.memo(e=>{let{children:v,params:{datasetId:b}}=e,{t:y}=(0,l.useTranslation)(),N=(0,a.usePathname)(),w=N.endsWith("documents/create")||N.endsWith("documents/create-from-pipeline"),C=N.endsWith("/pipeline"),_="true"===localStorage.getItem("workflow-canvas-maximize"),[k,S]=(0,i.useState)(_),{eventEmitter:I}=(0,x.useEventEmitterContextContext)();I?.useSubscription(e=>{e?.type==="workflow-canvas-maximize"&&S(e.payload)});let{isCurrentWorkspaceDatasetOperator:A}=(0,m.useAppContext)(),M=(0,h.default)()===h.MediaType.mobile,{data:E,error:$,refetch:T}=(0,g.useDatasetDetail)(b),{data:R}=(0,g.useDatasetRelatedApps)(b),P=(0,i.useMemo)(()=>!E||"external"!==E.provider&&"general"!==E.runtime_mode&&!E.is_published,[E]),L=(0,i.useMemo)(()=>{let e=[{name:y("datasetMenus.hitTesting",{ns:"common"}),href:`/datasets/${b}/hitTesting`,icon:t.RiFocus2Line,selectedIcon:t.RiFocus2Fill,disabled:P},{name:y("datasetMenus.settings",{ns:"common"}),href:`/datasets/${b}/settings`,icon:t.RiEqualizer2Line,selectedIcon:t.RiEqualizer2Fill,disabled:!1}];return E?.provider!=="external"&&(e.unshift({name:y("datasetMenus.pipeline",{ns:"common"}),href:`/datasets/${b}/pipeline`,icon:o.default,selectedIcon:c.default,disabled:!1}),e.unshift({name:y("datasetMenus.documents",{ns:"common"}),href:`/datasets/${b}/documents`,icon:t.RiFileTextLine,selectedIcon:t.RiFileTextFill,disabled:P})),e},[y,b,P,E?.provider]);(0,f.default)(E?.name||y("menus.datasets",{ns:"common"}));let D=(0,n.useStore)(e=>e.setAppSidebarExpand);return((0,i.useEffect)(()=>{let e=localStorage.getItem("app-detail-collapse-or-expand")||"expand";D(M?M?"collapse":"expand":e)},[M,D]),E||$)?(0,s.jsx)("div",{className:(0,j.cn)("flex grow overflow-hidden",k&&C?"":"rounded-t-2xl"),children:(0,s.jsxs)(u.default.Provider,{value:{indexingTechnique:E?.indexing_technique,dataset:E,mutateDatasetRes:T},children:[!w&&(0,s.jsx)(r.default,{navigation:L,extraInfo:A?void 0:e=>(0,s.jsx)(p.default,{relatedApps:R,expand:"expand"===e,documentCount:E?.document_count}),iconType:"dataset"}),(0,s.jsx)("div",{className:"grow overflow-hidden bg-background-default-subtle",children:v})]})}):(0,s.jsx)(d.default,{type:"app"})});e.s(["default",0,v],822726)},778712,e=>{e.v(s=>Promise.all(["static/chunks/21b16785b4308806.js"].map(s=>e.l(s))).then(()=>s(339556)))},977869,e=>{e.v(s=>Promise.all(["static/chunks/dc0aa229d9b1b1f5.js"].map(s=>e.l(s))).then(()=>s(23120)))},274156,e=>{e.v(s=>Promise.all(["static/chunks/2bb789852e45ac8e.js"].map(s=>e.l(s))).then(()=>s(823278)))},623391,e=>{e.v(s=>Promise.all(["static/chunks/25607ad0918230f9.js"].map(s=>e.l(s))).then(()=>s(920226)))},8429,e=>{e.v(s=>Promise.all(["static/chunks/9a0d63cfe0578a74.js"].map(s=>e.l(s))).then(()=>s(868879)))},606117,e=>{e.v(s=>Promise.all(["static/chunks/e2d269b38ee8f64f.js"].map(s=>e.l(s))).then(()=>s(356881)))}]);