(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,849124,e=>{"use strict";var l=e.i(434012);e.s(["LinkExternal02",()=>l.default])},285209,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{id:"lock-01"},children:[{type:"element",name:"path",attributes:{id:"Solid","fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 4C3 2.34315 4.34315 1 6 1C7.65685 1 9 2.34315 9 4V4.57516C9.1413 4.60613 9.27693 4.65121 9.40798 4.71799C9.78431 4.90973 10.0903 5.2157 10.282 5.59202C10.4057 5.83469 10.4549 6.09304 10.4779 6.37409C10.5 6.64468 10.5 6.97686 10.5 7.37934V8.12066C10.5 8.52314 10.5 8.85532 10.4779 9.12591C10.4549 9.40696 10.4057 9.66531 10.282 9.90798C10.0903 10.2843 9.78431 10.5903 9.40798 10.782C9.16531 10.9057 8.90696 10.9549 8.62591 10.9779C8.35531 11 8.02313 11 7.62064 11H4.37936C3.97687 11 3.64469 11 3.37409 10.9779C3.09304 10.9549 2.83469 10.9057 2.59202 10.782C2.2157 10.5903 1.90973 10.2843 1.71799 9.90798C1.59434 9.66531 1.54506 9.40696 1.5221 9.12591C1.49999 8.85532 1.49999 8.52314 1.5 8.12066V7.37934C1.49999 6.97687 1.49999 6.64468 1.5221 6.37409C1.54506 6.09304 1.59434 5.83469 1.71799 5.59202C1.90973 5.2157 2.2157 4.90973 2.59202 4.71799C2.72307 4.65121 2.8587 4.60613 3 4.57516V4ZM8 4V4.50081H4V4C4 2.89543 4.89543 2 6 2C7.10457 2 8 2.89543 8 4ZM6.5 7.25C6.5 6.97386 6.27614 6.75 6 6.75C5.72386 6.75 5.5 6.97386 5.5 7.25V8.25C5.5 8.52614 5.72386 8.75 6 8.75C6.27614 8.75 6.5 8.52614 6.5 8.25V7.25Z",fill:"currentColor"},children:[]}]}]},name:"Lock01"})},744106,41556,e=>{"use strict";var l=e.i(563199),d=e.i(807324),t=e.i(285209);let o=e=>{let{ref:o,...a}=e;return(0,l.jsx)(d.default,{...a,ref:o,data:t.default})};o.displayName="Lock01",e.s([],744106),e.s(["Lock01",0,o],41556)},620177,e=>{"use strict";var l=e.i(563199),d=e.i(837699),t=e.i(268255);e.i(152567);var o=e.i(408767),a=e.i(83278),i=e.i(151094),s=e.i(547105),n=e.i(588226);e.i(47690);var r=e.i(849124);e.i(744106);var m=e.i(41556),c=e.i(449980),u=e.i(391185);e.i(966240);var M=e.i(215128),x=e.i(265824),h=e.i(722591),C=e.i(711536),p=e.i(566210),f=e.i(739255),v=e.i(225162);e.i(466836);var y=e.i(844586),y=y,j=e.i(651482);let g=(0,t.memo)(e=>{let{provider:g,configurateMethod:b,currentCustomConfigurationModelFixedFields:k,onCancel:N,onSave:_,model:w,credential:E,isModelCredential:V,mode:P=f.ModelModalModeEnum.configProviderCredential}=e,L=(0,p.useRenderI18nObject)(),T=b===f.ConfigurationMethodEnum.predefinedModel,{isLoading:S,credentialData:F}=(0,x.useCredentialData)(g,T,V,E,w),{handleSaveCredential:R,handleConfirmDelete:A,deleteCredentialId:U,closeConfirmDelete:K,openConfirmDelete:O,doingAction:D,handleActiveCredential:B}=(0,M.useAuth)(g,b,k,{isModelCredential:V,mode:P}),{credentials:I,available_credentials:Z}=F,{isCurrentWorkspaceManager:H}=(0,C.useAppContext)(),{t:z}=(0,o.useTranslation)(),W=(0,v.useLanguage)(),{formSchemas:q,formValues:G,modelNameAndTypeFormSchemas:J,modelNameAndTypeFormValues:Q}=(0,j.useModelFormSchemas)(g,T,I,E,w),X=(0,t.useRef)(null),[Y,$]=(0,t.useState)(),ee=(0,t.useRef)(null),el=!!E&&!!Object.keys(I||{}).filter(e=>"__model_name"!==e&&"__model_type"!==e&&!!G[e]).length&&H,ed=(0,t.useCallback)(async()=>{if(P===f.ModelModalModeEnum.addCustomModelToModelList&&Y&&!Y?.addNewCredential){B(Y,w),N();return}let e=!0,l={};if(P===f.ModelModalModeEnum.configCustomModel){let d=X.current?.getFormValues({needCheckValidatedValues:!0})||{isCheckValidated:!1,values:{}};e=d.isCheckValidated,l=d.values}P===f.ModelModalModeEnum.configModelCredential&&w&&(l={__model_name:w.model,__model_type:w.model_type}),P===f.ModelModalModeEnum.addCustomModelToModelList&&Y?.addNewCredential&&w&&(l={__model_name:w.model,__model_type:w.model_type});let{isCheckValidated:d,values:t}=ee.current?.getFormValues({needCheckValidatedValues:!0,needTransformWhenSecretFieldIsPristine:!0})||{isCheckValidated:!1,values:{}};if(!d||!e)return;let{__model_name:o,__model_type:a}=l,{__authorization_name__:i,...s}=t;o&&a?await R({credential_id:E?.credential_id,credentials:s,name:i,model:o,model_type:a}):await R({credential_id:E?.credential_id,credentials:s,name:i}),_(t)},[R,E?.credential_id,w,_,P,Y,B]),et=(0,t.useMemo)(()=>{let e=z("modelProvider.auth.apiKeyModal.title",{ns:"common"});return(P===f.ModelModalModeEnum.configCustomModel||P===f.ModelModalModeEnum.addCustomModelToModelList)&&(e=z("modelProvider.auth.addModel",{ns:"common"})),P===f.ModelModalModeEnum.configModelCredential&&(e=E?z("modelProvider.auth.editModelCredential",{ns:"common"}):z("modelProvider.auth.addModelCredential",{ns:"common"})),(0,l.jsx)("div",{className:"title-2xl-semi-bold text-text-primary",children:e})},[z,P,E]),eo=(0,t.useMemo)(()=>T?(0,l.jsx)("div",{className:"system-xs-regular mt-1 text-text-tertiary",children:z("modelProvider.auth.apiKeyModal.desc",{ns:"common"})}):null,[T,z]),ea=(0,t.useMemo)(()=>P===f.ModelModalModeEnum.configCustomModel?(0,l.jsxs)("div",{className:"mt-2 flex items-center",children:[(0,l.jsx)(h.default,{className:"mr-2 h-4 w-4 shrink-0",provider:g}),(0,l.jsx)("div",{className:"system-md-regular mr-1 text-text-secondary",children:L(g.label)})]}):w&&(P===f.ModelModalModeEnum.configModelCredential||P===f.ModelModalModeEnum.addCustomModelToModelList)?(0,l.jsxs)("div",{className:"mt-2 flex items-center",children:[(0,l.jsx)(h.default,{className:"mr-2 h-4 w-4 shrink-0",provider:g,modelName:w.model}),(0,l.jsx)("div",{className:"system-md-regular mr-1 text-text-secondary",children:w.model}),(0,l.jsx)(a.default,{children:w.model_type})]}):null,[w,g,P,L]),ei=(0,t.useMemo)(()=>P===f.ModelModalModeEnum.configCustomModel||(P===f.ModelModalModeEnum.addCustomModelToModelList?Y?.addNewCredential:void 0),[P,Y]),es=(0,t.useMemo)(()=>P!==f.ModelModalModeEnum.addCustomModelToModelList||Y?.addNewCredential,[P,Y]),en=(0,t.useMemo)(()=>P===f.ModelModalModeEnum.addCustomModelToModelList||P===f.ModelModalModeEnum.configCustomModel?z("operation.add",{ns:"common"}):z("operation.save",{ns:"common"}),[P,z]),er=(0,t.useCallback)(()=>{A(),N()},[A]),em=(0,t.useCallback)((e,l)=>{let{getForm:d}=ee.current||{};d()&&d()?.setFieldValue(e,l)},[]),ec=!1===g.allow_custom_token;return(0,t.useEffect)(()=>{let e=e=>{"Escape"===e.key&&(e.stopPropagation(),N())};return document.addEventListener("keydown",e,!0),()=>{document.removeEventListener("keydown",e,!0)}},[N]),(0,l.jsx)(u.PortalToFollowElem,{open:!0,children:(0,l.jsx)(u.PortalToFollowElemContent,{className:"z-[60] h-full w-full",children:(0,l.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/[.25]",children:[(0,l.jsxs)("div",{className:"relative w-[640px] rounded-2xl bg-components-panel-bg shadow-xl",children:[(0,l.jsx)("div",{className:"absolute right-5 top-5 flex h-8 w-8 cursor-pointer items-center justify-center",onClick:N,children:(0,l.jsx)(d.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})}),(0,l.jsxs)("div",{className:"p-6 pb-3",children:[et,eo,ea]}),(0,l.jsxs)("div",{className:"max-h-[calc(100vh-320px)] overflow-y-auto px-6 py-3",children:[P===f.ModelModalModeEnum.configCustomModel&&(0,l.jsx)(n.default,{formSchemas:J.map(e=>({...e,name:e.variable})),defaultValues:Q,inputClassName:"justify-start",ref:X,onChange:em}),P===f.ModelModalModeEnum.addCustomModelToModelList&&(0,l.jsx)(y.default,{credentials:Z||[],onSelect:$,selectedCredential:Y,disabled:S,notAllowAddNewCredential:ec}),ei&&(0,l.jsxs)("div",{className:"system-xs-medium-uppercase mb-3 mt-6 flex items-center text-text-tertiary",children:[z("modelProvider.auth.modelCredential",{ns:"common"}),(0,l.jsx)("div",{className:"ml-2 h-px grow bg-gradient-to-r from-divider-regular to-background-gradient-mask-transparent"})]}),S&&(0,l.jsx)("div",{className:"mt-3 flex items-center justify-center",children:(0,l.jsx)(c.default,{})}),!S&&es&&(0,l.jsx)(n.default,{formSchemas:q.map(e=>({...e,name:e.variable,showRadioUI:e.type===f.FormTypeEnum.radio})),defaultValues:G,inputClassName:"justify-start",ref:ee})]}),(0,l.jsxs)("div",{className:"flex justify-between p-6 pt-5",children:[g.help&&(g.help.title||g.help.url)?(0,l.jsxs)("a",{href:g.help?.url[W]||g.help?.url.en_US,target:"_blank",rel:"noopener noreferrer",className:"system-xs-regular mt-2 inline-block  align-middle text-text-accent",onClick:e=>!g.help.url&&e.preventDefault(),children:[g.help.title?.[W]||g.help.url[W]||g.help.title?.en_US||g.help.url.en_US,(0,l.jsx)(r.LinkExternal02,{className:"ml-1 mt-[-2px] inline-block h-3 w-3"})]}):(0,l.jsx)("div",{}),(0,l.jsxs)("div",{className:"ml-2 flex items-center justify-end space-x-2",children:[el&&(0,l.jsx)(i.default,{variant:"warning",onClick:()=>O(E,w),children:z("operation.remove",{ns:"common"})}),(0,l.jsx)(i.default,{onClick:N,children:z("operation.cancel",{ns:"common"})}),(0,l.jsx)(i.default,{variant:"primary",onClick:ed,disabled:S||D,children:en})]})]}),(P===f.ModelModalModeEnum.configCustomModel||P===f.ModelModalModeEnum.configProviderCredential)&&(0,l.jsx)("div",{className:"border-t-[0.5px] border-t-divider-regular",children:(0,l.jsxs)("div",{className:"flex items-center justify-center rounded-b-2xl bg-background-section-burn py-3 text-xs text-text-tertiary",children:[(0,l.jsx)(m.Lock01,{className:"mr-1 h-3 w-3 text-text-tertiary"}),z("modelProvider.encrypted.front",{ns:"common"}),(0,l.jsx)("a",{className:"mx-1 text-text-accent",target:"_blank",rel:"noopener noreferrer",href:"https://pycryptodome.readthedocs.io/en/latest/src/cipher/oaep.html",children:"PKCS1_OAEP"}),z("modelProvider.encrypted.back",{ns:"common"})]})})]}),U&&(0,l.jsx)(s.default,{isShow:!0,title:z("modelProvider.confirmDelete",{ns:"common"}),isDisabled:D,onCancel:K,onConfirm:er})]})})})});e.s(["default",0,g],620177)},359540,e=>{e.n(e.i(620177))}]);