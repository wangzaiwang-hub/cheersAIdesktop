(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,994047,e=>{"use strict";var t=e.i(268255);let o=t.forwardRef(function(e,o){let{title:r,titleId:n,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":n},i),r?t.createElement("title",{id:n},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))});e.s(["ChevronDownIcon",0,o],994047)},141951,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{id:"image-plus"},children:[{type:"element",name:"path",attributes:{id:"Icon",d:"M8.33333 2.00016H5.2C4.0799 2.00016 3.51984 2.00016 3.09202 2.21815C2.71569 2.4099 2.40973 2.71586 2.21799 3.09218C2 3.52001 2 4.08006 2 5.20016V10.8002C2 11.9203 2 12.4803 2.21799 12.9081C2.40973 13.2845 2.71569 13.5904 3.09202 13.7822C3.51984 14.0002 4.07989 14.0002 5.2 14.0002H11.3333C11.9533 14.0002 12.2633 14.0002 12.5176 13.932C13.2078 13.7471 13.7469 13.208 13.9319 12.5178C14 12.2635 14 11.9535 14 11.3335M12.6667 5.3335V1.3335M10.6667 3.3335H14.6667M7 5.66683C7 6.40321 6.40305 7.00016 5.66667 7.00016C4.93029 7.00016 4.33333 6.40321 4.33333 5.66683C4.33333 4.93045 4.93029 4.3335 5.66667 4.3335C6.40305 4.3335 7 4.93045 7 5.66683ZM9.99336 7.94559L4.3541 13.0722C4.03691 13.3605 3.87831 13.5047 3.86429 13.6296C3.85213 13.7379 3.89364 13.8453 3.97546 13.9172C4.06985 14.0002 4.28419 14.0002 4.71286 14.0002H10.9707C11.9301 14.0002 12.4098 14.0002 12.7866 13.839C13.2596 13.6366 13.6365 13.2598 13.8388 12.7868C14 12.41 14 11.9303 14 10.9708C14 10.648 14 10.4866 13.9647 10.3363C13.9204 10.1474 13.8353 9.9704 13.7155 9.81776C13.6202 9.6963 13.4941 9.59546 13.242 9.3938L11.3772 7.90194C11.1249 7.7001 10.9988 7.59919 10.8599 7.56357C10.7374 7.53218 10.6086 7.53624 10.4884 7.57529C10.352 7.61959 10.2324 7.72826 9.99336 7.94559Z",stroke:"currentColor","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},children:[]}]}]},name:"ImagePlus"})},613667,e=>{"use strict";var t=e.i(367916);e.s(["getImageUploadErrorMessage",0,(e,t,o)=>{let r=e?.response?.code;return"forbidden"===r?e?.response?.message:"file_extension_blocked"===r?o("fileUploader.fileExtensionBlocked",{ns:"common"}):t},"imageUpload",0,(e,o,r)=>{let{file:n,onProgressCallback:i,onSuccessCallback:a,onErrorCallback:s}=e,c=new FormData;c.append("file",n),(0,t.upload)({xhr:new XMLHttpRequest,data:c,onprogress:e=>{e.lengthComputable&&i(Math.floor(e.loaded/e.total*100))}},o,r).then(e=>{a(e)}).catch(e=>{s(e)})}])},644896,541983,e=>{"use strict";var t=e.i(563199),o=e.i(807324),r=e.i(141951);let n=e=>{let{ref:n,...i}=e;return(0,t.jsx)(o.default,{...i,ref:n,data:r.default})};n.displayName="ImagePlus",e.s([],644896),e.s(["ImagePlus",0,n],541983)},330276,e=>{"use strict";var t=e.i(326531),o=e.i(268255);e.i(152567);var r=e.i(408767),n=e.i(137667),i=e.i(648404),a=e.i(613667);e.s(["useImageFiles",0,()=>{let e=(0,t.useParams)(),{t:i}=(0,r.useTranslation)(),{notify:s}=(0,n.useToastContext)(),[c,p]=(0,o.useState)([]),h=(0,o.useRef)([]);return{files:(0,o.useMemo)(()=>c.filter(e=>!e.deleted),[c]),onUpload:e=>{let t=h.current,o=t.findIndex(t=>t._id===e._id);if(o>-1){let r=t[o],n=[...t.slice(0,o),{...r,...e},...t.slice(o+1)];p(n),h.current=n}else{let o=[...t,e];p(o),h.current=o}},onRemove:e=>{let t=h.current,o=t.findIndex(t=>t._id===e);if(o>-1){let e=t[o],r=[...t.slice(0,o),{...e,deleted:!0},...t.slice(o+1)];p(r),h.current=r}},onImageLinkLoadError:e=>{let t=h.current,o=t.findIndex(t=>t._id===e);if(o>-1){let e=t[o],r=[...t.slice(0,o),{...e,progress:-1},...t.slice(o+1)];h.current=r,p(r)}},onImageLinkLoadSuccess:e=>{let t=h.current,o=t.findIndex(t=>t._id===e);if(o>-1){let e=t[o],r=[...t.slice(0,o),{...e,progress:100},...t.slice(o+1)];h.current=r,p(r)}},onReUpload:t=>{let o=h.current,r=o.findIndex(e=>e._id===t);if(r>-1){let t=o[r];(0,a.imageUpload)({file:t.file,onProgressCallback:e=>{let n=[...o.slice(0,r),{...t,progress:e},...o.slice(r+1)];h.current=n,p(n)},onSuccessCallback:e=>{let n=[...o.slice(0,r),{...t,fileId:e.id,progress:100},...o.slice(r+1)];h.current=n,p(n)},onErrorCallback:e=>{s({type:"error",message:(0,a.getImageUploadErrorMessage)(e,i("imageUploader.uploadFromComputerUploadError",{ns:"common"}),i)});let n=[...o.slice(0,r),{...t,progress:-1},...o.slice(r+1)];h.current=n,p(n)}},!!e.token)}},onClear:()=>{p([]),h.current=[]}}},"useLocalFileUploader",0,e=>{let{limit:s,disabled:c=!1,onUpload:p}=e,{notify:h}=(0,n.useToastContext)(),l=(0,t.useParams)(),{t:u}=(0,r.useTranslation)(),d=(0,o.useCallback)(e=>{if(c||!i.ALLOW_FILE_EXTENSIONS.includes(e.type.split("/")[1]))return;if(s&&e.size>1024*s*1024)return void h({type:"error",message:u("imageUploader.uploadFromComputerLimit",{ns:"common",size:s})});let t=new FileReader;t.addEventListener("load",()=>{let o={type:i.TransferMethod.local_file,_id:`${Date.now()}`,fileId:"",file:e,url:t.result,base64Url:t.result,progress:0};p(o),(0,a.imageUpload)({file:o.file,onProgressCallback:e=>{p({...o,progress:e})},onSuccessCallback:e=>{p({...o,fileId:e.id,progress:100})},onErrorCallback:e=>{h({type:"error",message:(0,a.getImageUploadErrorMessage)(e,u("imageUploader.uploadFromComputerUploadError",{ns:"common"}),u)}),p({...o,progress:-1})}},!!l.token)},!1),t.addEventListener("error",()=>{h({type:"error",message:u("imageUploader.uploadFromComputerReadError",{ns:"common"})})},!1),t.readAsDataURL(e)},[c,s,h,u,p,l.token]);return{disabled:c,handleLocalFileUpload:d}}])},462095,(e,t,o)=>{var r,n,i,a,s,c,p,h,l,u,d,m,g,f,v,w=!1;function C(){if(!w){w=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),o=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(m=/\b(iPhone|iP[ao]d)/.exec(e),g=/\b(iP[ao]d)/.exec(e),u=/Android/i.exec(e),f=/FBAN\/\w+;/i.exec(e),v=/Mobile/i.exec(e),d=!!/Win64/.exec(e),t){(r=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN)&&document&&document.documentMode&&(r=document.documentMode);var C=/(?:Trident\/(\d+.\d+))/.exec(e);c=C?parseFloat(C[1])+4:r,n=t[2]?parseFloat(t[2]):NaN,i=t[3]?parseFloat(t[3]):NaN,s=(a=t[4]?parseFloat(t[4]):NaN)&&(t=/(?:Chrome\/(\d+\.\d+))/.exec(e))&&t[1]?parseFloat(t[1]):NaN}else r=n=i=s=a=NaN;if(o){if(o[1]){var S=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);p=!S||parseFloat(S[1].replace("_","."))}else p=!1;h=!!o[2],l=!!o[3]}else p=h=l=!1}}var S={ie:function(){return C()||r},ieCompatibilityMode:function(){return C()||c>r},ie64:function(){return S.ie()&&d},firefox:function(){return C()||n},opera:function(){return C()||i},webkit:function(){return C()||a},safari:function(){return S.webkit()},chrome:function(){return C()||s},windows:function(){return C()||h},osx:function(){return C()||p},linux:function(){return C()||l},iphone:function(){return C()||m},mobile:function(){return C()||m||g||u||v},nativeApp:function(){return C()||f},android:function(){return C()||u},ipad:function(){return C()||g}};t.exports=S},159400,(e,t,o)=>{"use strict";var r=!!("u">typeof window&&window.document&&window.document.createElement);t.exports={canUseDOM:r,canUseWorkers:"u">typeof Worker,canUseEventListeners:r&&!!(window.addEventListener||window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r}},828851,(e,t,o)=>{"use strict";var r,n=e.r(159400);n.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),t.exports=function(e,t){if(!n.canUseDOM||t&&!("addEventListener"in document))return!1;var o="on"+e,i=o in document;if(!i){var a=document.createElement("div");a.setAttribute(o,"return;"),i="function"==typeof a[o]}return!i&&r&&"wheel"===e&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}},826452,(e,t,o)=>{"use strict";var r=e.r(462095),n=e.r(828851);function i(e){var t=0,o=0,r=0,n=0;return"detail"in e&&(o=e.detail),"wheelDelta"in e&&(o=-e.wheelDelta/120),"wheelDeltaY"in e&&(o=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=o,o=0),r=10*t,n=10*o,"deltaY"in e&&(n=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||n)&&e.deltaMode&&(1==e.deltaMode?(r*=40,n*=40):(r*=800,n*=800)),r&&!t&&(t=r<1?-1:1),n&&!o&&(o=n<1?-1:1),{spinX:t,spinY:o,pixelX:r,pixelY:n}}i.getEventType=function(){return r.firefox()?"DOMMouseScroll":n("wheel")?"wheel":"mousewheel"},t.exports=i},147864,(e,t,o)=>{t.exports=e.r(826452)},958898,118042,e=>{"use strict";var t=e.i(563199),o=e.i(268255),r=e.i(824627),n=e.i(147864);function i(e,t,o,r,n){void 0===n&&(n=0);var i=u(t.width,t.height,n),s=i.width,c=i.height;return{x:a(e.x,s,o.width,r),y:a(e.y,c,o.height,r)}}function a(e,t,o,r){var n=t*r/2-o/2;return d(e,-n,n)}function s(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function c(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function p(e,t){return Math.min(e,Math.max(0,t))}function h(e,t){return t}function l(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function u(e,t,o){var r=o*Math.PI/180;return{width:Math.abs(Math.cos(r)*e)+Math.abs(Math.sin(r)*t),height:Math.abs(Math.sin(r)*e)+Math.abs(Math.cos(r)*t)}}function d(e,t,o){return Math.min(Math.max(e,t),o)}function m(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(e){return"string"==typeof e&&!!(e.length>0)}).join(" ").trim()}var g=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.cropperRef=o.createRef(),a.imageRef=o.createRef(),a.videoRef=o.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc="u">typeof document?document:null,a.currentWindow="u">typeof window?window:null,a.resizeObserver=null,a.previousCropSize=null,a.isInitialized=!1,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if(void 0!==window.ResizeObserver&&a.containerRef){var e=!0;a.resizeObserver=new window.ResizeObserver(function(t){if(e){e=!1;return}a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(e){return e.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturechange",a.onGestureChange),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var e=a.computeSizes();e&&(a.previousCropSize=e,a.emitCropData(),a.setInitialCrop(e),a.isInitialized=!0),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(e){if(a.props.initialCroppedAreaPercentages){var t,o,r,n,i,s,c,p=(t=a.props.initialCroppedAreaPercentages,o=a.mediaSize,r=a.props.rotation,n=a.props.minZoom,i=a.props.maxZoom,s=u(o.width,o.height,r),{crop:{x:(c=d(e.width/s.width*(100/t.width),n,i))*s.width/2-e.width/2-s.width*c*(t.x/100),y:c*s.height/2-e.height/2-s.height*c*(t.y/100)},zoom:c}),h=p.crop,l=p.zoom;a.props.onCropChange(h),a.props.onZoomChange&&a.props.onZoomChange(l)}else if(a.props.initialCroppedAreaPixels){var m,g,f,v,w,C,S,y,x,b=(m=a.props.initialCroppedAreaPixels,g=a.mediaSize,f=a.props.rotation,v=a.props.minZoom,w=a.props.maxZoom,void 0===f&&(f=0),C=u(g.naturalWidth,g.naturalHeight,f),y=d((S=g.width>g.height?g.width/g.naturalWidth:g.height/g.naturalHeight,e.height>e.width?e.height/(m.height*S):e.width/(m.width*S)),v,w),x=e.height>e.width?e.height/m.height:e.width/m.width,{crop:{x:((C.width-m.width)/2-m.x)*x,y:((C.height-m.height)/2-m.y)*x},zoom:y}),h=b.crop,l=b.zoom;a.props.onCropChange(h),a.props.onZoomChange&&a.props.onZoomChange(l)}},a.computeSizes=function(){var e,t,o,n,i,s,c=a.imageRef.current||a.videoRef.current;if(c&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var p,h,l,d,m,g,f,v,w,C,S,y=a.containerRect.width/a.containerRect.height,x=(null==(e=a.imageRef.current)?void 0:e.naturalWidth)||(null==(t=a.videoRef.current)?void 0:t.videoWidth)||0,b=(null==(o=a.imageRef.current)?void 0:o.naturalHeight)||(null==(n=a.videoRef.current)?void 0:n.videoHeight)||0,R=c.offsetWidth<x||c.offsetHeight<b,z=x/b,D=void 0;if(R)switch(a.state.mediaObjectFit){default:case"contain":D=y>z?{width:a.containerRect.height*z,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/z};break;case"horizontal-cover":D={width:a.containerRect.width,height:a.containerRect.width/z};break;case"vertical-cover":D={width:a.containerRect.height*z,height:a.containerRect.height}}else D={width:c.offsetWidth,height:c.offsetHeight};a.mediaSize=(0,r.__assign)((0,r.__assign)({},D),{naturalWidth:x,naturalHeight:b}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var E=a.props.cropSize?a.props.cropSize:(p=a.mediaSize.width,h=a.mediaSize.height,l=a.containerRect.width,d=a.containerRect.height,m=a.props.aspect,void 0===(g=a.props.rotation)&&(g=0),v=(f=u(p,h,g)).width,w=f.height,(C=Math.min(v,l))>(S=Math.min(w,d))*m?{width:S*m,height:S}:{width:C,height:C/m});return((null==(i=a.state.cropSize)?void 0:i.height)!==E.height||(null==(s=a.state.cropSize)?void 0:s.width)!==E.width)&&a.props.onCropSizeChange&&a.props.onCropSizeChange(E),a.setState({cropSize:E},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(E),E}},a.saveContainerPosition=function(){if(a.containerRef){var e=a.containerRef.getBoundingClientRect();a.containerPosition={x:e.left,y:e.top}}},a.onMouseDown=function(e){a.currentDoc&&(e.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(t.getMousePoint(e)))},a.onMouseMove=function(e){return a.onDrag(t.getMousePoint(e))},a.onScroll=function(e){a.currentDoc&&(e.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(e){!a.currentDoc||(a.isTouching=!0,(!a.props.onTouchRequest||a.props.onTouchRequest(e))&&(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),2===e.touches.length?a.onPinchStart(e):1===e.touches.length&&a.onDragStart(t.getTouchPoint(e.touches[0]))))},a.onTouchMove=function(e){e.preventDefault(),2===e.touches.length?a.onPinchMove(e):1===e.touches.length&&a.onDrag(t.getTouchPoint(e.touches[0]))},a.onGestureStart=function(e){a.currentDoc&&(e.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureChange),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureChange=function(e){if(e.preventDefault(),!a.isTouching){var o=t.getMousePoint(e),r=a.gestureZoomStart-1+e.scale;if(a.setNewZoom(r,o,{shouldUpdatePosition:!0}),a.props.onRotationChange){var n=a.gestureRotationStart+e.rotation;a.props.onRotationChange(n)}}},a.onGestureEnd=function(e){a.cleanEvents()},a.onDragStart=function(e){var t,o;a.dragStartPosition={x:e.x,y:e.y},a.dragStartCrop=(0,r.__assign)({},a.props.crop),null==(o=(t=a.props).onInteractionStart)||o.call(t)},a.onDrag=function(e){var t=e.x,o=e.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&void 0!==t&&void 0!==o){var e=t-a.dragStartPosition.x,r=o-a.dragStartPosition.y,n={x:a.dragStartCrop.x+e,y:a.dragStartCrop.y+r},s=a.props.restrictPosition?i(n,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):n;a.props.onCropChange(s)}}))},a.onDragStopped=function(){var e,t;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),null==(t=(e=a.props).onInteractionEnd)||t.call(e)},a.onWheel=function(e){if(a.currentWindow&&(!a.props.onWheelRequest||a.props.onWheelRequest(e))){e.preventDefault();var o=t.getMousePoint(e),r=(0,n.default)(e).pixelY,i=a.props.zoom-r*a.props.zoomSpeed/200;a.setNewZoom(i,o,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var e,t;return null==(t=(e=a.props).onInteractionStart)?void 0:t.call(e)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var e,t;return null==(t=(e=a.props).onInteractionEnd)?void 0:t.call(e)})},250)}},a.getPointOnContainer=function(e,t){var o=e.x,r=e.y;if(!a.containerRect)throw Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(o-t.x),y:a.containerRect.height/2-(r-t.y)}},a.getPointOnMedia=function(e){var t=e.x,o=e.y,r=a.props,n=r.crop,i=r.zoom;return{x:(t+n.x)/i,y:(o+n.y)/i}},a.setNewZoom=function(e,t,o){var r=(void 0===o?{}:o).shouldUpdatePosition;if(a.state.cropSize&&a.props.onZoomChange){var n=d(e,a.props.minZoom,a.props.maxZoom);if(void 0===r||r){var s=a.getPointOnContainer(t,a.containerPosition),c=a.getPointOnMedia(s),p={x:c.x*n-s.x,y:c.y*n-s.y},h=a.props.restrictPosition?i(p,a.mediaSize,a.state.cropSize,n,a.props.rotation):p;a.props.onCropChange(h)}a.props.onZoomChange(n)}},a.getCropData=function(){var e,t,o,n,s,c,l,d,m,g,f,v,w,C,S;return a.state.cropSize?(e=a.props.restrictPosition?i(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop,t=a.mediaSize,o=a.state.cropSize,n=a.getAspect(),s=a.props.zoom,c=a.props.rotation,l=a.props.restrictPosition,void 0===c&&(c=0),void 0===l&&(l=!0),d=l?p:h,m=u(t.width,t.height,c),g=u(t.naturalWidth,t.naturalHeight,c),f={x:d(100,((m.width-o.width/s)/2-e.x/s)/m.width*100),y:d(100,((m.height-o.height/s)/2-e.y/s)/m.height*100),width:d(100,o.width/m.width*100/s),height:d(100,o.height/m.height*100/s)},v=Math.round(d(g.width,f.width*g.width/100)),w=Math.round(d(g.height,f.height*g.height/100)),C=g.width>=g.height*n?{width:Math.round(w*n),height:w}:{width:v,height:Math.round(v/n)},S=(0,r.__assign)((0,r.__assign)({},C),{x:Math.round(d(g.width-C.width,f.x*g.width/100)),y:Math.round(d(g.height-C.height,f.y*g.height/100))}),{croppedAreaPercentages:f,croppedAreaPixels:S}):null},a.emitCropData=function(){var e=a.getCropData();if(e){var t=e.croppedAreaPercentages,o=e.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(t,o),a.props.onCropAreaChange&&a.props.onCropAreaChange(t,o)}},a.emitCropAreaChange=function(){var e=a.getCropData();if(e){var t=e.croppedAreaPercentages,o=e.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(t,o)}},a.recomputeCropPosition=function(){if(a.state.cropSize){var e=a.props.crop;if(a.isInitialized&&a.previousCropSize&&(Math.abs(a.previousCropSize.width-a.state.cropSize.width)>1e-6||Math.abs(a.previousCropSize.height-a.state.cropSize.height)>1e-6)){var t=a.state.cropSize.width/a.previousCropSize.width,o=a.state.cropSize.height/a.previousCropSize.height;e={x:a.props.crop.x*t,y:a.props.crop.y*o}}var r=a.props.restrictPosition?i(e,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):e;a.previousCropSize=a.state.cropSize,a.props.onCropChange(r),a.emitCropData()}},a.onKeyDown=function(e){var t,o,n=a.props,s=n.crop,c=n.onCropChange,p=n.keyboardStep,h=n.zoom,l=n.rotation,u=p;if(a.state.cropSize){e.shiftKey&&(u*=.2);var d=(0,r.__assign)({},s);switch(e.key){case"ArrowUp":d.y-=u,e.preventDefault();break;case"ArrowDown":d.y+=u,e.preventDefault();break;case"ArrowLeft":d.x-=u,e.preventDefault();break;case"ArrowRight":d.x+=u,e.preventDefault();break;default:return}a.props.restrictPosition&&(d=i(d,a.mediaSize,a.state.cropSize,h,l)),e.repeat||null==(o=(t=a.props).onInteractionStart)||o.call(t),c(d)}},a.onKeyUp=function(e){var t,o;switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":e.preventDefault();break;default:return}a.emitCropData(),null==(o=(t=a.props).onInteractionEnd)||o.call(t)},a}return(0,r.__extends)(t,e),t.prototype.componentDidMount=function(){this.currentDoc&&this.currentWindow&&(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),void 0===window.ResizeObserver&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=".reactEasyCrop_Container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  user-select: none;\n  touch-action: none;\n  cursor: move;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.reactEasyCrop_Image,\n.reactEasyCrop_Video {\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\n}\n\n.reactEasyCrop_Contain {\n  max-width: 100%;\n  max-height: 100%;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.reactEasyCrop_Cover_Horizontal {\n  width: 100%;\n  height: auto;\n}\n.reactEasyCrop_Cover_Vertical {\n  width: auto;\n  height: 100%;\n}\n\n.reactEasyCrop_CropArea {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  box-sizing: border-box;\n  box-shadow: 0 0 0 9999em;\n  color: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n}\n\n.reactEasyCrop_CropAreaRound {\n  border-radius: 50%;\n}\n\n.reactEasyCrop_CropAreaGrid::before {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 33.33%;\n  right: 33.33%;\n  border-top: 0;\n  border-bottom: 0;\n}\n\n.reactEasyCrop_CropAreaGrid::after {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 33.33%;\n  bottom: 33.33%;\n  left: 0;\n  right: 0;\n  border-left: 0;\n  border-right: 0;\n}\n",this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},t.prototype.componentWillUnmount=function(){var e,t;this.currentDoc&&this.currentWindow&&(void 0===window.ResizeObserver&&this.currentWindow.removeEventListener("resize",this.computeSizes),null==(e=this.resizeObserver)||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&(null==(t=this.styleRef.parentNode)||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},t.prototype.componentDidUpdate=function(e){e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect||e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():(null==(t=e.cropSize)?void 0:t.height)!==(null==(o=this.props.cropSize)?void 0:o.height)||(null==(r=e.cropSize)?void 0:r.width)!==(null==(n=this.props.cropSize)?void 0:n.width)?this.computeSizes():((null==(i=e.crop)?void 0:i.x)!==(null==(a=this.props.crop)?void 0:a.x)||(null==(s=e.crop)?void 0:s.y)!==(null==(c=this.props.crop)?void 0:c.y))&&this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&(null==(p=this.videoRef.current)||p.load());var t,o,r,n,i,a,s,c,p,h=this.getObjectFit();h!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:h},this.computeSizes)},t.prototype.getAspect=function(){var e=this.props,t=e.cropSize,o=e.aspect;return t?t.width/t.height:o},t.prototype.getObjectFit=function(){var e,t,o,r;if("cover"===this.props.objectFit){if((this.imageRef.current||this.videoRef.current)&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var n=this.containerRect.width/this.containerRect.height;return((null==(e=this.imageRef.current)?void 0:e.naturalWidth)||(null==(t=this.videoRef.current)?void 0:t.videoWidth)||0)/((null==(o=this.imageRef.current)?void 0:o.naturalHeight)||(null==(r=this.videoRef.current)?void 0:r.videoHeight)||0)<n?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},t.prototype.onPinchStart=function(e){var o=t.getTouchPoint(e.touches[0]),r=t.getTouchPoint(e.touches[1]);this.lastPinchDistance=s(o,r),this.lastPinchRotation=c(o,r),this.onDragStart(l(o,r))},t.prototype.onPinchMove=function(e){var o=this;if(this.currentDoc&&this.currentWindow){var r=t.getTouchPoint(e.touches[0]),n=t.getTouchPoint(e.touches[1]),i=l(r,n);this.onDrag(i),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var e=s(r,n),t=o.props.zoom*(e/o.lastPinchDistance);o.setNewZoom(t,i,{shouldUpdatePosition:!1}),o.lastPinchDistance=e;var a=c(r,n),p=o.props.rotation+(a-o.lastPinchRotation);o.props.onRotationChange&&o.props.onRotationChange(p),o.lastPinchRotation=a})}},t.prototype.render=function(){var e,t=this,n=this.props,i=n.image,a=n.video,s=n.mediaProps,c=n.cropperProps,p=n.transform,h=n.crop,l=h.x,u=h.y,d=n.rotation,g=n.zoom,f=n.cropShape,v=n.showGrid,w=n.roundCropAreaPixels,C=n.style,S=C.containerStyle,y=C.cropAreaStyle,x=C.mediaStyle,b=n.classes,R=b.containerClassName,z=b.cropAreaClassName,D=b.mediaClassName,E=null!=(e=this.state.mediaObjectFit)?e:this.getObjectFit();return o.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(e){return t.containerRef=e},"data-testid":"container",style:S,className:m("reactEasyCrop_Container",R)},i?o.createElement("img",(0,r.__assign)({alt:"",className:m("reactEasyCrop_Image","contain"===E&&"reactEasyCrop_Contain","horizontal-cover"===E&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===E&&"reactEasyCrop_Cover_Vertical",D)},s,{src:i,ref:this.imageRef,style:(0,r.__assign)((0,r.__assign)({},x),{transform:p||"translate(".concat(l,"px, ").concat(u,"px) rotate(").concat(d,"deg) scale(").concat(g,")")}),onLoad:this.onMediaLoad})):a&&o.createElement("video",(0,r.__assign)({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:m("reactEasyCrop_Video","contain"===E&&"reactEasyCrop_Contain","horizontal-cover"===E&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===E&&"reactEasyCrop_Cover_Vertical",D)},s,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:(0,r.__assign)((0,r.__assign)({},x),{transform:p||"translate(".concat(l,"px, ").concat(u,"px) rotate(").concat(d,"deg) scale(").concat(g,")")}),controls:!1}),(Array.isArray(a)?a:[{src:a}]).map(function(e){return o.createElement("source",(0,r.__assign)({key:e.src},e))})),this.state.cropSize&&o.createElement("div",(0,r.__assign)({ref:this.cropperRef,style:(0,r.__assign)((0,r.__assign)({},y),{width:w?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:w?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:m("reactEasyCrop_CropArea","round"===f&&"reactEasyCrop_CropAreaRound",v&&"reactEasyCrop_CropAreaGrid",z)},c)))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:3,minZoom:1,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:1},t.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t}(o.Component);e.i(152567);var f=e.i(408767),v=e.i(648404),w=e.i(935139);e.i(644896);var C=e.i(541983);function S(e){return e*Math.PI/180}async function y(e,t,o){var r,n;let i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{horizontal:!1,vertical:!1},c=await new Promise((t,o)=>{let r=new Image;r.addEventListener("load",()=>t(r)),r.addEventListener("error",e=>o(e)),r.setAttribute("crossOrigin","anonymous"),r.src=e}),p=document.createElement("canvas"),h=p.getContext("2d"),l=function(e){switch(e.split(".").pop()?.toLowerCase()){case"png":return"image/png";case"jpg":case"jpeg":default:return"image/jpeg";case"gif":return"image/gif";case"webp":return"image/webp"}}(o);if(!h)throw Error("Could not create a canvas context");let u=S(a),{width:d,height:m}=(r=c.width,n=c.height,{width:Math.abs(Math.cos(i=S(a))*r)+Math.abs(Math.sin(i)*n),height:Math.abs(Math.sin(i)*r)+Math.abs(Math.cos(i)*n)});p.width=d,p.height=m,h.translate(d/2,m/2),h.rotate(u),h.scale(s.horizontal?-1:1,s.vertical?-1:1),h.translate(-c.width/2,-c.height/2),h.drawImage(c,0,0);let g=document.createElement("canvas"),f=g.getContext("2d");if(!f)throw Error("Could not create a canvas context");return g.width=t.width,g.height=t.height,f.drawImage(p,t.x,t.y,t.width,t.height,0,0,t.width,t.height),new Promise((e,t)=>{g.toBlob(o=>{o?e(o):t(Error("Could not create a blob"))},l)})}function x(e){return new Promise((t,o)=>{let r=new FileReader;r.onload=function(o){var r;let n=new Uint8Array(o.target?.result);e.name.toLowerCase().endsWith(".gif")?t(!0):82===(r=n)[0]&&73===r[1]&&70===r[2]&&70===r[3]&&87===r[8]&&69===r[9]&&66===r[10]&&80===r[11]?t(function(e){for(let t=12;t<e.length-4;t++)if(65===e[t]&&78===e[t+1]&&73===e[t+2]&&77===e[t+3])return!0;return!1}(n)):t(!1)},r.onerror=function(e){o(e)},r.readAsArrayBuffer(e)})}e.s(["checkIsAnimatedImage",()=>x,"default",()=>y],118042),e.s(["default",0,e=>{let{className:r,cropShape:n,onImageInput:i}=e,{t:a}=(0,f.useTranslation)(),[s,c]=(0,o.useState)(),[p,h]=(0,o.useState)(!1);(0,o.useEffect)(()=>()=>{s&&URL.revokeObjectURL(s.url)},[s]);let[l,u]=(0,o.useState)({x:0,y:0}),[d,m]=(0,o.useState)(1),S=async(e,t)=>{s&&i?.(!0,s.url,t,s.file.name)},{isDragActive:y,handleDragEnter:b,handleDragOver:R,handleDragLeave:z,handleDrop:D}=(e=>{let[t,r]=(0,o.useState)(!1),n=(0,o.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),r(!0)},[]),i=(0,o.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]);return{handleDragEnter:n,handleDragOver:i,handleDragLeave:(0,o.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),r(!1)},[]),handleDrop:(0,o.useCallback)(t=>{t.preventDefault(),t.stopPropagation(),r(!1);let o=t.dataTransfer.files[0];o&&e(o)},[e]),isDragActive:t}})(e=>c({file:e,url:URL.createObjectURL(e)})),E=(0,o.createRef)();return(0,t.jsx)("div",{className:(0,w.cn)(r,"w-full px-3 py-1.5"),children:(0,t.jsx)("div",{className:(0,w.cn)(y&&"border-primary-600","relative flex aspect-square flex-col items-center justify-center rounded-lg border-[1.5px] border-dashed text-gray-500"),onDragEnter:b,onDragOver:R,onDragLeave:z,onDrop:D,children:s?p?(0,t.jsx)("img",{src:s?.url,alt:""}):(0,t.jsx)(g,{image:s?.url,crop:l,zoom:d,aspect:1,cropShape:n,onCropChange:u,onCropComplete:S,onZoomChange:m}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.ImagePlus,{className:"pointer-events-none mb-3 h-[30px] w-[30px]"}),(0,t.jsxs)("div",{className:"mb-[2px] text-sm font-medium",children:[(0,t.jsxs)("span",{className:"pointer-events-none",children:[a("imageInput.dropImageHere",{ns:"common"}),"Â "]}),(0,t.jsx)("button",{type:"button",className:"text-components-button-primary-bg",onClick:()=>E.current?.click(),children:a("imageInput.browse",{ns:"common"})}),(0,t.jsx)("input",{ref:E,type:"file",className:"hidden",onClick:e=>e.target.value="",accept:v.ALLOW_FILE_EXTENSIONS.map(e=>`.${e}`).join(","),onChange:e=>{let t=e.target.files?.[0];t&&(c({file:t,url:URL.createObjectURL(t)}),x(t).then(e=>{h(!!e),e&&i?.(!1,t)}))}})]}),(0,t.jsx)("div",{className:"pointer-events-none",children:a("imageInput.supportedFormats",{ns:"common"})})]})})})}],958898)}]);