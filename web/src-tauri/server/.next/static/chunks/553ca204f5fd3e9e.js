(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,410893,e=>{"use strict";var t=e.i(797181);e.s(["ArrowUpRight",()=>t.default])},16453,e=>{e.v({item:"style-module__2BvUtq__item"})},823660,781276,e=>{"use strict";var t=e.i(563199),s=e.i(268255);e.i(152567);var a=e.i(408767),n=e.i(151094),r=e.i(16453);let i=s.memo(e=>{let{name:s,className:a=""}=e;return(0,t.jsxs)("div",{className:`${r.default.item} ${a} mb-2 inline-flex h-5 items-center justify-center rounded-md px-1 text-xs font-medium text-primary-600`,children:[(0,t.jsx)("span",{className:"opacity-60",children:"{{"}),(0,t.jsx)("span",{children:s}),(0,t.jsx)("span",{className:"opacity-60",children:"}}"})]},s)});e.s(["default",0,i],781276);let l=(0,t.jsxs)("svg",{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M13.8683 0.704745C13.7051 0.374685 13.3053 0.239393 12.9752 0.402563C12.6452 0.565732 12.5099 0.965573 12.673 1.29563C13.5221 3.01316 13.9999 4.94957 13.9999 7.00019C13.9999 9.05081 13.5221 10.9872 12.673 12.7047C12.5099 13.0348 12.6452 13.4346 12.9752 13.5978C13.3053 13.761 13.7051 13.6257 13.8683 13.2956C14.8063 11.3983 15.3333 9.26009 15.3333 7.00019C15.3333 4.74029 14.8063 2.60209 13.8683 0.704745Z",fill:"#FD853A"}),(0,t.jsx)("path",{d:"M3.32687 1.29563C3.49004 0.965573 3.35475 0.565732 3.02469 0.402563C2.69463 0.239393 2.29479 0.374685 2.13162 0.704745C1.19364 2.60209 0.666626 4.74029 0.666626 7.00019C0.666626 9.26009 1.19364 11.3983 2.13162 13.2956C2.29479 13.6257 2.69463 13.761 3.02469 13.5978C3.35475 13.4346 3.49004 13.0348 3.32687 12.7047C2.47779 10.9872 1.99996 9.05081 1.99996 7.00019C1.99996 4.94957 2.47779 3.01316 3.32687 1.29563Z",fill:"#FD853A"}),(0,t.jsx)("path",{d:"M9.33238 4.8413C9.74208 4.36081 10.3411 4.08337 10.9726 4.08337H11.0324C11.4006 4.08337 11.6991 4.38185 11.6991 4.75004C11.6991 5.11823 11.4006 5.41671 11.0324 5.41671H10.9726C10.7329 5.41671 10.5042 5.52196 10.347 5.7064L8.78693 7.536L9.28085 9.27382C9.29145 9.31112 9.32388 9.33337 9.35696 9.33337H10.2864C10.6545 9.33337 10.953 9.63185 10.953 10C10.953 10.3682 10.6545 10.6667 10.2864 10.6667H9.35696C8.72382 10.6667 8.17074 10.245 7.99832 9.63834L7.74732 8.75524L6.76373 9.90878C6.35403 10.3893 5.75501 10.6667 5.1235 10.6667H5.06372C4.69553 10.6667 4.39705 10.3682 4.39705 10C4.39705 9.63185 4.69553 9.33337 5.06372 9.33337H5.1235C5.3632 9.33337 5.59189 9.22812 5.74915 9.04368L7.30926 7.21399L6.81536 5.47626C6.80476 5.43897 6.77233 5.41671 6.73925 5.41671H5.80986C5.44167 5.41671 5.14319 5.11823 5.14319 4.75004C5.14319 4.38185 5.44167 4.08337 5.80986 4.08337H6.73925C7.37239 4.08337 7.92547 4.50508 8.0979 5.11174L8.34887 5.99475L9.33238 4.8413Z",fill:"#FD853A"})]}),o=s.memo(e=>{let{varNameArr:r,onConfirm:o,onCancel:c}=e,{t:d}=(0,a.useTranslation)(),p=(0,s.useRef)(null);return(0,t.jsx)("div",{className:"absolute inset-0  flex items-center justify-center rounded-xl",style:{backgroundColor:"rgba(35, 56, 118, 0.2)"},children:(0,t.jsxs)("div",{ref:p,className:"w-[420px] rounded-xl bg-components-panel-bg p-6",style:{boxShadow:"0px 12px 16px -4px rgba(16, 24, 40, 0.08), 0px 4px 6px -2px rgba(16, 24, 40, 0.03)"},children:[(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl border border-components-card-border bg-components-card-bg-alt shadow-lg",children:l}),(0,t.jsxs)("div",{className:"grow-1",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-text-primary",children:d("autoAddVar",{ns:"appDebug"})}),(0,t.jsx)("div",{className:"mt-[15px] flex max-h-[66px] flex-wrap space-x-1 overflow-y-auto px-1",children:r.map(e=>(0,t.jsx)(i,{name:e},e))})]})]}),(0,t.jsxs)("div",{className:"mt-7 flex justify-end space-x-2",children:[(0,t.jsx)(n.default,{onClick:c,children:d("operation.cancel",{ns:"common"})}),(0,t.jsx)(n.default,{variant:"primary",onClick:o,children:d("operation.add",{ns:"common"})})]})]})})});e.s(["default",0,o],823660)},297090,e=>{"use strict";var t=e.i(563199),s=e.i(837699),a=e.i(417944),n=e.i(124836),r=e.i(105845),i=e.i(268255);e.i(152567);var l=e.i(408767),o=e.i(858871),c=e.i(823660),d=e.i(935139),p=e.i(168014);e.i(781276),e.i(137667);let m=/\{\{([^}]+)\}\}/g;var u=e.i(151094),x=e.i(757198),h=e.i(21151),g=e.i(758911);e.s(["default",0,e=>{let{data:b,onSave:v,onCancel:f,promptVariables:j=[],workflowVariables:C=[],onAutoAddPromptVariable:y}=e,{t:N}=(0,l.useTranslation)(),[w,k]=(0,i.useState)(b?.opening_statement||"");(0,i.useEffect)(()=>{k(b.opening_statement||"")},[b.opening_statement]);let[L,S]=(0,i.useState)(b.suggested_questions||[]),[D,{setTrue:A,setFalse:R}]=(0,a.useBoolean)(!1),[_,H]=(0,i.useState)([]),B=(0,i.useMemo)(()=>!w.trim(),[w]),T=(0,i.useCallback)(e=>{if(!B){if(!e){var t;let e,s,a,n=(t=w,e=t.match(m)?.map(e=>e.replace("{{","").replace("}}",""))||[],s={},a=[],e.forEach(e=>{s[e]||(s[e]=!0,a.push(e))}),a)?.filter(e=>{let{isValid:t}=(0,p.checkKeys)([e],!0);return t}),r=j.map(e=>e.key),i=C.map(e=>e.variable),l=[];if(0===r.length&&0===C.length?n.length>0&&(l=n):l=C.length>0?n.filter(e=>!i.includes(e)):n.filter(e=>!r.includes(e)),l.length>0){H(l),A();return}}v((0,r.produce)(b,e=>{e&&(e.opening_statement=w,e.suggested_questions=L)}))}},[b,v,j,C,A,L,w,B]),M=(0,i.useCallback)(()=>{R(),T(!0)},[T,R]),F=(0,i.useCallback)(()=>{y?.(_.map(e=>(0,p.getNewVar)(e,"string"))),R(),T(!0)},[T,R,_,y]),[q,O]=(0,i.useState)(null),[U,E]=(0,i.useState)(null);return(0,t.jsxs)(h.default,{isShow:!0,onClose:n.noop,className:"!mt-14 !w-[640px] !max-w-none !bg-components-panel-bg-blur !p-6",children:[(0,t.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,t.jsx)("div",{className:"title-2xl-semi-bold text-text-primary",children:N("feature.conversationOpener.title",{ns:"appDebug"})}),(0,t.jsx)("div",{className:"cursor-pointer p-1",onClick:f,children:(0,t.jsx)(s.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})})]}),(0,t.jsxs)("div",{className:"mb-8 flex gap-2",children:[(0,t.jsx)("div",{className:"mt-1.5 h-8 w-8 shrink-0 rounded-lg border-components-panel-border bg-util-colors-orange-dark-orange-dark-500 p-1.5",children:(0,t.jsx)(s.RiAsterisk,{className:"h-5 w-5 text-text-primary-on-surface"})}),(0,t.jsxs)("div",{className:"grow rounded-2xl border-t border-divider-subtle bg-chat-bubble-bg p-3 shadow-xs",children:[(0,t.jsx)(g.default,{value:w,onChange:k,placeholder:N("openingStatement.placeholder",{ns:"appDebug"}),variableBlock:{show:!0,variables:[...j.map(e=>({name:e.name||e.key,value:e.key})),...C.map(e=>({name:e.variable,value:e.variable}))]}}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center py-2",children:[(0,t.jsxs)("div",{className:"flex shrink-0 space-x-0.5 text-xs font-medium leading-[18px] text-text-tertiary",children:[(0,t.jsx)("div",{className:"uppercase",children:N("openingStatement.openingQuestion",{ns:"appDebug"})}),(0,t.jsx)("div",{children:"Â·"}),(0,t.jsxs)("div",{children:[L.length,"/",10]})]}),(0,t.jsx)(x.default,{bgStyle:"gradient",className:"ml-3 h-px w-0 grow"})]}),(0,t.jsx)(o.ReactSortable,{className:"space-y-1",list:L.map((e,t)=>({id:t,name:e})),setList:e=>S(e.map(e=>e.name)),handle:".handle",ghostClass:"opacity-50",animation:150,children:L.map((e,a)=>(0,t.jsxs)("div",{className:(0,d.cn)("group relative flex items-center rounded-lg border border-components-panel-border-subtle bg-components-panel-on-panel-item-bg pl-2.5 hover:bg-components-panel-on-panel-item-bg-hover",q===a&&"border-components-input-border-active bg-components-input-bg-active hover:border-components-input-border-active hover:bg-components-input-bg-active",U===a&&"border-components-input-border-destructive bg-state-destructive-hover hover:border-components-input-border-destructive hover:bg-state-destructive-hover"),children:[(0,t.jsx)(s.RiDraggable,{className:"handle h-4 w-4 cursor-grab text-text-quaternary"}),(0,t.jsx)("input",{type:"input",value:e||"",placeholder:N("openingStatement.openingQuestionPlaceholder",{ns:"appDebug"}),onChange:e=>{let t=e.target.value;S(L.map((e,s)=>a===s?t:e))},className:"h-9 w-full grow cursor-pointer overflow-x-auto rounded-lg border-0 bg-transparent pl-1.5 pr-8 text-sm leading-9 text-text-secondary focus:outline-none",onFocus:()=>O(a),onBlur:()=>O(null)}),(0,t.jsx)("div",{className:"absolute right-1.5 top-1/2 block translate-y-[-50%] cursor-pointer rounded-md p-1 text-text-tertiary hover:bg-state-destructive-hover hover:text-text-destructive",onClick:()=>{S(L.filter((e,t)=>a!==t))},onMouseEnter:()=>E(a),onMouseLeave:()=>E(null),children:(0,t.jsx)(s.RiDeleteBinLine,{className:"h-3.5 w-3.5"})})]},a))}),L.length<10&&(0,t.jsxs)("div",{onClick:()=>{S([...L,""])},className:"mt-1 flex h-9 cursor-pointer items-center gap-2 rounded-lg bg-components-button-tertiary-bg px-3  text-components-button-tertiary-text hover:bg-components-button-tertiary-bg-hover",children:[(0,t.jsx)(s.RiAddLine,{className:"h-4 w-4"}),(0,t.jsx)("div",{className:"system-sm-medium text-[13px]",children:N("variableConfig.addOption",{ns:"appDebug"})})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end",children:[(0,t.jsx)(u.default,{onClick:f,className:"mr-2",children:N("operation.cancel",{ns:"common"})}),(0,t.jsx)(u.default,{variant:"primary",onClick:()=>T(),disabled:B,children:N("operation.save",{ns:"common"})})]}),D&&(0,t.jsx)(c.default,{varNameArr:_,onConfirm:F,onCancel:M,onHide:R})]})}],297090)},553791,e=>{e.n(e.i(297090))}]);