(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,597280,e=>{"use strict";var t=e.i(563199),r=e.i(294237),n=e.i(268255),s=e.i(421001),a=e.i(935139);let i=(0,r.cva)([],{variants:{align:{left:"justify-start",center:"justify-center",right:"justify-end"}},defaultVariants:{align:"center"}}),l=n.memo(e=>{let{className:r,title:l,onSelect:o,selected:u,disabled:c,align:p="center",tooltip:d}=e,g=(0,n.useCallback)(()=>{u||c||o()},[o,u,c]);return(0,t.jsxs)("div",{className:(0,a.cn)("system-sm-regular flex h-8 cursor-default items-center rounded-md border border-components-option-card-option-border bg-components-option-card-option-bg px-2 text-text-secondary",!u&&!c&&"cursor-pointer hover:border-components-option-card-option-border-hover hover:bg-components-option-card-option-bg-hover hover:shadow-xs",u&&"system-sm-medium border-[1.5px] border-components-option-card-option-selected-border bg-components-option-card-option-selected-bg shadow-xs",c&&"text-text-disabled",i({align:p}),r),onClick:g,children:[(0,t.jsx)("span",{children:l}),d&&(0,t.jsx)(s.default,{popupContent:(0,t.jsx)("div",{className:"w-[240px]",children:d})})]})});e.s(["default",0,l])},249385,e=>{"use strict";var t=e.i(563199),r=e.i(837699),n=e.i(268255),s=e.i(654313);let a=n.memo(e=>{let{onClick:n}=e;return(0,t.jsx)(s.default,{size:"l",className:"group shrink-0 hover:!bg-state-destructive-hover",onClick:n,children:(0,t.jsx)(r.RiDeleteBinLine,{className:"h-4 w-4 text-text-tertiary group-hover:text-text-destructive"})})});e.s(["default",0,a])},324935,e=>{"use strict";var t=e.i(563199),r=e.i(837699),n=e.i(935139);let s=()=>(0,t.jsx)("div",{"data-testid":"indeterminate-icon",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,t.jsx)("path",{d:"M2.5 6H9.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})});e.s(["default",0,e=>{let{id:a,checked:i,onCheck:l,className:o,disabled:u,indeterminate:c}=e,p=i||c?"bg-components-checkbox-bg text-components-checkbox-icon hover:bg-components-checkbox-bg-hover":"border border-components-checkbox-border bg-components-checkbox-bg-unchecked hover:bg-components-checkbox-bg-unchecked-hover hover:border-components-checkbox-border-hover",d=i||c?"cursor-not-allowed bg-components-checkbox-bg-disabled-checked text-components-checkbox-icon-disabled hover:bg-components-checkbox-bg-disabled-checked":"cursor-not-allowed border-components-checkbox-border-disabled bg-components-checkbox-bg-disabled hover:border-components-checkbox-border-disabled hover:bg-components-checkbox-bg-disabled";return(0,t.jsxs)("div",{id:a,className:(0,n.cn)("flex h-4 w-4 shrink-0 cursor-pointer items-center justify-center rounded-[4px] shadow-xs shadow-shadow-shadow-3",p,u&&d,o),onClick:e=>{u||l?.(e)},"data-testid":`checkbox-${a}`,children:[!i&&c&&(0,t.jsx)(s,{}),i&&(0,t.jsx)(r.RiCheckLine,{className:"h-3 w-3","data-testid":`check-icon-${a}`})]})}],324935)},618403,e=>{"use strict";let t=e=>{let{url:t,fileName:r,rel:n,target:s}=e;if(!t)return;let a=document.createElement("a");a.href=t,r&&(a.download=r),n&&(a.rel=n),s&&(a.target=s),a.style.display="none",document.body.appendChild(a),a.click(),a.remove()};e.s(["downloadBlob",0,e=>{let{data:r,fileName:n}=e,s=window.URL.createObjectURL(r);t({url:s,fileName:n,rel:"noopener noreferrer"}),window.URL.revokeObjectURL(s)},"downloadUrl",0,e=>{let{url:r,fileName:n,rel:s="noopener noreferrer",target:a}=e;t({url:r,fileName:n,rel:s,target:a})}])},65932,(e,t,r)=>{"use strict";t.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(s=n;0!=s--;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(a=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(s=n;0!=s--;)if(!Object.prototype.hasOwnProperty.call(r,a[s]))return!1;for(s=n;0!=s--;){var n,s,a,i=a[s];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r}},972282,e=>{"use strict";var t=e.i(367916);let r=async e=>{let{url:r,id:n}=e;return(0,t.get)(`${r}/${n}`)};e.s(["addTracingConfig",0,e=>{let{appId:r,body:n}=e;return(0,t.post)(`/apps/${r}/trace-config`,{body:n})},"copyApp",0,e=>{let{appID:r,name:n,icon_type:s,icon:a,icon_background:i,mode:l,description:o}=e;return(0,t.post)(`apps/${r}/copy`,{body:{name:n,icon_type:s,icon:a,icon_background:i,mode:l,description:o}})},"createApikey",0,e=>{let{url:r,body:n}=e;return(0,t.post)(r,n)},"createApp",0,e=>{let{name:r,icon_type:n,icon:s,icon_background:a,mode:i,description:l,config:o}=e;return(0,t.post)("apps",{body:{name:r,icon_type:n,icon:s,icon_background:a,mode:i,description:l,model_config:o}})},"delApikey",0,e=>{let{url:r,params:n}=e;return(0,t.del)(r,n)},"deleteApp",0,e=>(0,t.del)(`apps/${e}`),"exportAppConfig",0,e=>{let{appID:r,include:n=!1,workflowID:s}=e,a=new URLSearchParams({include_secret:n.toString()});return s&&a.append("workflow_id",s),(0,t.get)(`apps/${r}/export?${a.toString()}`)},"fetchAppDetail",0,e=>{let{url:r,id:n}=e;return(0,t.get)(`${r}/${n}`)},"fetchAppDetailDirect",0,r,"fetchAppList",0,e=>{let{url:r,params:n}=e;return(0,t.get)(r,{params:n})},"fetchTracingConfig",0,e=>{let{appId:r,provider:n}=e;return(0,t.get)(`/apps/${r}/trace-config`,{params:{tracing_provider:n}})},"fetchTracingStatus",0,e=>{let{appId:r}=e;return(0,t.get)(`/apps/${r}/trace`)},"fetchWebhookUrl",0,e=>{let{appId:r,nodeId:n}=e;return(0,t.get)(`apps/${r}/workflows/triggers/webhook`,{params:{node_id:n}},{silent:!0})},"importDSL",0,e=>{let{mode:r,yaml_content:n,yaml_url:s,app_id:a,name:i,description:l,icon_type:o,icon:u,icon_background:c}=e;return(0,t.post)("apps/imports",{body:{mode:r,yaml_content:n,yaml_url:s,app_id:a,name:i,description:l,icon:u,icon_type:o,icon_background:c}})},"importDSLConfirm",0,e=>{let{import_id:r}=e;return(0,t.post)(`apps/imports/${r}/confirm`,{body:{}})},"removeTracingConfig",0,e=>{let{appId:r,provider:n}=e;return(0,t.del)(`/apps/${r}/trace-config?tracing_provider=${n}`)},"switchApp",0,e=>{let{appID:r,name:n,icon_type:s,icon:a,icon_background:i}=e;return(0,t.post)(`apps/${r}/convert-to-workflow`,{body:{name:n,icon_type:s,icon:a,icon_background:i}})},"updateAppInfo",0,e=>{let{appID:r,name:n,icon_type:s,icon:a,icon_background:i,description:l,use_icon_as_answer_icon:o,max_active_requests:u}=e;return(0,t.put)(`apps/${r}`,{body:{name:n,icon_type:s,icon:a,icon_background:i,description:l,use_icon_as_answer_icon:o,max_active_requests:u}})},"updateAppModelConfig",0,e=>{let{url:r,body:n}=e;return(0,t.post)(r,{body:n})},"updateAppSiteAccessToken",0,e=>{let{url:r}=e;return(0,t.post)(r)},"updateAppSiteConfig",0,e=>{let{url:r,body:n}=e;return(0,t.post)(r,{body:n})},"updateAppSiteStatus",0,e=>{let{url:r,body:n}=e;return(0,t.post)(r,{body:n})},"updateTracingConfig",0,e=>{let{appId:r,body:n}=e;return(0,t.patch)(`/apps/${r}/trace-config`,{body:n})},"updateTracingStatus",0,e=>{let{appId:r,body:n}=e;return(0,t.post)(`/apps/${r}/trace`,{body:n})}])},189299,e=>{"use strict";let t=(0,e.i(639751).create)(e=>({appDetail:void 0,setAppDetail:t=>e(()=>({appDetail:t})),appSidebarExpand:"",setAppSidebarExpand:t=>e(()=>({appSidebarExpand:t})),currentLogItem:void 0,currentLogModalActiveTab:"DETAIL",setCurrentLogItem:t=>e(()=>({currentLogItem:t})),setCurrentLogModalActiveTab:t=>e(()=>({currentLogModalActiveTab:t})),showPromptLogModal:!1,setShowPromptLogModal:t=>e(()=>({showPromptLogModal:t})),showAgentLogModal:!1,setShowAgentLogModal:t=>e(()=>({showAgentLogModal:t})),showMessageLogModal:!1,setShowMessageLogModal:t=>e(()=>t?{showMessageLogModal:t}:{showMessageLogModal:t,currentLogModalActiveTab:"DETAIL"}),showAppConfigureFeaturesModal:!1,setShowAppConfigureFeaturesModal:t=>e(()=>({showAppConfigureFeaturesModal:t}))}));e.s(["useStore",0,t])},935914,480600,e=>{"use strict";var t,r=((t={}).appFlow="appFlow",t.ragPipeline="ragPipeline",t);e.s(["FlowType",()=>r],480600);let n={[r.appFlow]:"apps",[r.ragPipeline]:"rag/pipelines"};e.s(["getFlowPrefix",0,e=>n[e]||n[r.appFlow]],935914)},845296,e=>{"use strict";let t,r=(0,e.i(639751).create)()((t=(e,t)=>({triggerStatuses:{},setTriggerStatus:(t,r)=>{e(e=>({triggerStatuses:{...e.triggerStatuses,[t]:r}}))},setTriggerStatuses:t=>{e({triggerStatuses:t})},getTriggerStatus:e=>t().triggerStatuses[e]||"disabled",clearTriggerStatuses:()=>{e({triggerStatuses:{}})}}),(e,r,n)=>{let s=n.subscribe;return n.subscribe=(e,t,r)=>{let a=e;if(t){let s=(null==r?void 0:r.equalityFn)||Object.is,i=e(n.getState());a=r=>{let n=e(r);if(!s(i,n)){let e=i;t(i=n,e)}},(null==r?void 0:r.fireImmediately)&&t(i,i)}return s(a)},t(e,r,n)}));e.s(["useTriggerStatusStore",0,r],845296)},387852,e=>{"use strict";var t=e.i(236063),r=e.i(875037),n=e.i(562572),s=e.i(214309),a=e.i(367916),i=e.i(722384),l=e.i(935914);let o="workflow",u=[o,"versionHistory"],c=[o,"last-run"];e.s(["useAppWorkflow",0,e=>(0,n.useQuery)({enabled:!!e,queryKey:[o,"publish",e],queryFn:()=>(0,a.get)(`/apps/${e}/workflows/publish`)}),"useConversationVarValues",0,(e,t)=>(0,n.useQuery)({enabled:!!t,queryKey:[o,e,"conversation var values",t],queryFn:async()=>{let{items:r}=await (0,a.get)(`${(0,l.getFlowPrefix)(e)}/${t}/workflows/draft/conversation-variables`);return r}}),"useDeleteAllInspectorVars",0,(e,t)=>(0,r.useMutation)({mutationKey:[o,e,"delete all inspector vars",t],mutationFn:async()=>(0,a.del)(`${(0,l.getFlowPrefix)(e)}/${t}/workflows/draft/variables`)}),"useDeleteInspectVar",0,(e,t)=>(0,r.useMutation)({mutationKey:[o,e,"delete inspector var",t],mutationFn:async r=>(0,a.del)(`${(0,l.getFlowPrefix)(e)}/${t}/workflows/draft/variables/${r}`)}),"useDeleteNodeInspectorVars",0,(e,t)=>(0,r.useMutation)({mutationKey:[o,e,"delete node inspector vars",t],mutationFn:async r=>(0,a.del)(`${(0,l.getFlowPrefix)(e)}/${t}/workflows/draft/nodes/${r}/variables`)}),"useDeleteWorkflow",0,()=>(0,r.useMutation)({mutationKey:[o,"delete"],mutationFn:e=>(0,a.del)(e)}),"useEditInspectorVar",0,(e,t)=>(0,r.useMutation)({mutationKey:[o,e,"edit inspector var",t],mutationFn:async r=>{let{varId:n,...s}=r;return(0,a.patch)(`${(0,l.getFlowPrefix)(e)}/${t}/workflows/draft/variables/${n}`,{body:s})}}),"useInvalidAllLastRun",0,(e,t)=>(0,i.useInvalid)([...c,e,t]),"useInvalidLastRun",0,(e,t,r)=>(0,i.useInvalid)([...c,e,t,r]),"useInvalidateAppWorkflow",0,()=>{let e=(0,s.useQueryClient)();return t=>{e.invalidateQueries({queryKey:[o,"publish",t]})}},"useInvalidateConversationVarValues",0,(e,t)=>(0,i.useInvalid)([o,e,"conversation var values",t]),"useInvalidateSysVarValues",0,(e,t)=>(0,i.useInvalid)([o,e,"sys var values",t]),"useLastRun",0,(e,t,r,s)=>(0,n.useQuery)({enabled:s,queryKey:[...c,e,t,r],queryFn:async()=>(0,a.get)(`${(0,l.getFlowPrefix)(e)}/${t}/workflows/draft/nodes/${r}/last-run`,{},{silent:!0}),retry:0}),"usePublishWorkflow",0,()=>(0,r.useMutation)({mutationKey:[o,"publish"],mutationFn:e=>(0,a.post)(e.url,{body:{marked_name:e.title,marked_comment:e.releaseNotes}})}),"useResetConversationVar",0,(e,t)=>(0,r.useMutation)({mutationKey:[o,e,"reset conversation var",t],mutationFn:async r=>(0,a.put)(`${(0,l.getFlowPrefix)(e)}/${t}/workflows/draft/variables/${r}/reset`)}),"useResetToLastRunValue",0,(e,t)=>(0,r.useMutation)({mutationKey:[o,e,"reset to last run value",t],mutationFn:async r=>(0,a.put)(`${(0,l.getFlowPrefix)(e)}/${t}/workflows/draft/variables/${r}/reset`)}),"useResetWorkflowVersionHistory",0,()=>(0,i.useReset)([...u]),"useSysVarValues",0,(e,t)=>(0,n.useQuery)({enabled:!!t,queryKey:[o,e,"sys var values",t],queryFn:async()=>{let{items:r}=await (0,a.get)(`${(0,l.getFlowPrefix)(e)}/${t}/workflows/draft/system-variables`);return r}}),"useUpdateWorkflow",0,()=>(0,r.useMutation)({mutationKey:[o,"update"],mutationFn:e=>(0,a.patch)(e.url,{body:{marked_name:e.title,marked_comment:e.releaseNotes}})}),"useWorkflowConfig",0,(e,t)=>(0,n.useQuery)({enabled:!!e,queryKey:[o,"config",e],staleTime:0,queryFn:async()=>{let r=await (0,a.get)(e);return t(r),r}}),"useWorkflowRunHistory",0,function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return(0,n.useQuery)({queryKey:[o,"runHistory",e],queryFn:()=>(0,a.get)(e),enabled:!!e&&t})},"useWorkflowVersionHistory",0,e=>{let{url:r,initialPage:n,limit:s,userId:i,namedOnly:l}=e;return(0,t.useInfiniteQuery)({enabled:!!r,queryKey:[...u,r,n,s,i,l],queryFn:e=>{let{pageParam:t=1}=e;return(0,a.get)(r,{params:{page:t,limit:s,user_id:i||"",named_only:!!l}})},getNextPageParam:e=>e.has_more?e.page+1:null,initialPageParam:n})}])},813672,e=>{"use strict";function t(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"!=typeof n&&(n={});let{leading:s=!1,trailing:a=!0,maxWait:i}=n,l=[,,];s&&(l[0]="leading"),a&&(l[1]="trailing");let o=null,u=function(e,t){let r,{signal:n,edges:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=null,i=null!=s&&s.includes("leading"),l=null==s||s.includes("trailing"),o=()=>{null!==a&&(e.apply(r,a),r=void 0,a=null)},u=null,c=()=>{null!=u&&clearTimeout(u),u=setTimeout(()=>{u=null,l&&o(),p()},t)},p=()=>{null!==u&&(clearTimeout(u),u=null),r=void 0,a=null},d=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];if(n?.aborted)return;r=this,a=t;let l=null==u;c(),i&&l&&o()};return d.schedule=c,d.cancel=p,d.flush=()=>{o()},n?.addEventListener("abort",p,{once:!0}),d}(function(){for(var r=arguments.length,n=Array(r),s=0;s<r;s++)n[s]=arguments[s];t=e.apply(this,n),o=null},r,{edges:l}),c=function(){for(var r=arguments.length,n=Array(r),s=0;s<r;s++)n[s]=arguments[s];return null!=i&&(null===o&&(o=Date.now()),Date.now()-o>=i)?(t=e.apply(this,n),o=Date.now(),u.cancel(),u.schedule(),t):(u.apply(this,n),t)};return c.cancel=u.cancel,c.flush=()=>(u.flush(),t),c}e.s(["debounce",()=>t],813672)},571566,289931,e=>{"use strict";var t=e.i(563199),r=e.i(837699);e.i(152567);var n=e.i(858765),s=e.i(959752);let a=new Map,i=e=>{a.delete(e)},l=async(e,t)=>{let r=a.get(e);r&&await r(t)},o=e=>{Object.entries(e).forEach(e=>{let[t,r]=e;a.set(t,r)})},u=e=>{e.forEach(i)};e.s(["executeCommand",0,l,"registerCommands",0,o,"unregisterCommands",0,u],289931);let c="zen-toggle-maximize",p=()=>{window.dispatchEvent(new CustomEvent(c))};e.s(["ZEN_TOGGLE_EVENT",0,c,"zenCommand",0,{name:"zen",description:"Toggle canvas focus mode",mode:"direct",isAvailable:()=>(0,s.isInWorkflowPage)(),execute:p,async search(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",a=(0,n.getI18n)();return[{id:"zen",title:a.t("gotoAnything.actions.zenTitle",{ns:"app",lng:s})||"Zen Mode",description:a.t("gotoAnything.actions.zenDesc",{ns:"app",lng:s})||"Toggle canvas focus mode",type:"command",icon:(0,t.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded-md border-[0.5px] border-divider-regular bg-components-panel-bg",children:(0,t.jsx)(r.RiFullscreenLine,{className:"h-4 w-4 text-text-tertiary"})}),data:{command:"workflow.zen",args:{}}}]},register(e){o({"workflow.zen":async()=>p()})},unregister(){u(["workflow.zen"])}}],571566)},87403,e=>{"use strict";let t={key:"@node",shortcut:"@node",title:"Search Workflow Nodes",description:"Find and jump to nodes in the current workflow by name or type",searchFn:void 0,search:async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";arguments.length>2&&arguments[2];try{if(t.searchFn)return t.searchFn(r);return[]}catch(e){return console.warn("Workflow nodes search failed:",e),[]}}};e.s(["workflowNodesAction",0,t])},997908,e=>{"use strict";function t(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new CustomEvent("workflow:select-node",{detail:{nodeId:e,focus:t}});document.dispatchEvent(r)}function r(e){let t=new CustomEvent("workflow:scroll-to-node",{detail:{nodeId:e}});document.dispatchEvent(t)}function n(e){let t=t=>{let{nodeId:n,focus:s}=t.detail;n&&(e(n),s&&setTimeout(()=>{r(n)},100))};return document.addEventListener("workflow:select-node",t),()=>{document.removeEventListener("workflow:select-node",t)}}function s(e,t){let r=r=>{let{nodeId:n}=r.detail;if(n){let r=e.find(e=>e.id===n);if(r){let e={x:r.position.x,y:r.position.y},n=e.x+.25*window.innerWidth,s=e.y+.25*window.innerHeight;t.setCenter(n,s,{zoom:1,duration:800})}}};return document.addEventListener("workflow:scroll-to-node",r),()=>{document.removeEventListener("workflow:scroll-to-node",r)}}e.s(["scrollToWorkflowNode",()=>r,"selectWorkflowNode",()=>t,"setupNodeSelectionListener",()=>n,"setupScrollToNodeListener",()=>s])},619507,299075,e=>{"use strict";e.i(845780);var t=e.i(720315),r=e.i(949250);e.i(275225);var n=e.i(705405),s=e.i(390622),a=e.i(654537);let i=e=>({[a.PipelineInputVarType.number]:s.VarType.number,[a.PipelineInputVarType.singleFile]:s.VarType.file,[a.PipelineInputVarType.multiFiles]:s.VarType.arrayFile,[a.PipelineInputVarType.checkbox]:s.VarType.boolean})[e]||s.VarType.string;var l=e.i(192447);let o=e=>{let{getNodes:t}=(0,l.useStoreApi)().getState(),r=t(),n=r.find(t=>t.id===e),s=!!n?.data.isInIteration,a=!!n?.data.isInLoop,i=n?.parentId;return{node:n,isInIteration:s,isInLoop:a,parentNode:r.find(e=>e.id===i)}};e.s(["default",0,o],299075),e.s(["default",0,function(e){let{onlyLeafNodeVar:a,filterVar:l,hideEnv:u,hideChatVar:c,passedInAvailableNodes:p}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{onlyLeafNodeVar:!1,filterVar:()=>!0},{getTreeLeafNodes:d,getNodeById:g,getBeforeNodesInSameBranchIncludeParent:m}=(0,t.useWorkflow)(),{getNodeAvailableVars:y}=(0,r.useWorkflowVariables)(),f=(0,t.useIsChatMode)(),h=p||(a?d(e):m(e)),{parentNode:v}=o(e),b=g(e),x=(0,n.useStore)(e=>e.ragPipelineVariables),w=b?.data?.type===s.BlockEnum.DataSource,k=[];if(w){let t=x?.filter(t=>t.belong_to_node_id===e),r=t?.filter(t=>l({variable:t.variable,type:i(t.type),nodeId:e,isRagVariable:!0},["rag",e,t.variable]));r?.length&&k.push({nodeId:e,title:b.data?.title,vars:r.map(t=>({variable:`rag.${e}.${t.variable}`,type:i(t.type),description:t.label,isRagVariable:!0}))})}return{availableVars:[...y({parentNode:v,beforeNodes:h,isChatMode:f,filterVar:l,hideEnv:u,hideChatVar:c}),...k],availableNodes:h,availableNodesWithParent:[...h,...w?[b]:[]]}}],619507)},892081,e=>{"use strict";var t=e.i(393689),r=e.i(220431);let n=function(e){if(!e||!document.getRootNode)return document;var t,n=Array.isArray(e)?e:[e];return n.every(function(e){var t=(0,r.getTargetElement)(e);return!!t&&t.getRootNode()instanceof ShadowRoot})?(t=(0,r.getTargetElement)(n[0]))?t.getRootNode():document:document};var s=e.i(99878);function a(e,a,i){void 0===i&&(i="click");var l=(0,t.default)(e);(0,s.default)(function(){var e=function(e){(Array.isArray(a)?a:[a]).some(function(t){var n=(0,r.getTargetElement)(t);return!n||n.contains(e.target)})||l.current(e)},t=n(a),s=Array.isArray(i)?i:[i];return s.forEach(function(r){return t.addEventListener(r,e)}),function(){s.forEach(function(r){return t.removeEventListener(r,e)})}},Array.isArray(i)?i:[i],a)}e.s(["useClickAway",()=>a],892081)},112757,e=>{"use strict";var t=e.i(707844);e.s(["Line3",()=>t.default])},475390,e=>{"use strict";var t=e.i(875037),r=e.i(562572);e.i(214309);var n=e.i(654537),s=e.i(367916),a=e.i(722384);let i="pipeline",l=[i,"template-list"],o=[i,"published-pipeline"];e.s(["publishedPipelineInfoQueryKeyPrefix",0,o,"useCheckPipelineDependencies",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[i,"check-dependencies"],mutationFn:e=>(0,s.get)(`/rag/pipelines/imports/${e}/check-dependencies`),...e})},"useConvertDatasetToPipeline",0,()=>(0,t.useMutation)({mutationKey:[i,"convert-dataset-to-pipeline"],mutationFn:e=>(0,s.post)(`/rag/pipelines/transform/datasets/${e}`)}),"useDataSourceList",0,(e,t)=>(0,r.useQuery)({enabled:e,queryKey:[i,"datasource"],staleTime:0,queryFn:async()=>{let e=await (0,s.get)("/rag/pipelines/datasource-plugins");return t?.(e),e},retry:!1}),"useDatasourceSingleRun",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[i,"datasource-node-single-run"],mutationFn:e=>{let{pipeline_id:t,...r}=e;return(0,s.post)(`/rag/pipelines/${t}/workflows/draft/datasource/variables-inspect`,{body:r})},...e})},"useDeleteTemplate",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[i,"template-delete"],mutationFn:e=>(0,s.del)(`/rag/pipeline/customized/templates/${e}`),...e})},"useDraftPipelinePreProcessingParams",0,function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{pipeline_id:n,node_id:a}=e;return(0,r.useQuery)({queryKey:[i,"draft-pipeline-pre-processing-params",n,a],queryFn:()=>(0,s.get)(`/rag/pipelines/${n}/workflows/draft/pre-processing/parameters`,{params:{node_id:a}}),staleTime:0,enabled:t})},"useDraftPipelineProcessingParams",0,function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{pipeline_id:n,node_id:a}=e;return(0,r.useQuery)({queryKey:[i,"draft-pipeline-processing-params",n,a],queryFn:()=>(0,s.get)(`/rag/pipelines/${n}/workflows/draft/processing/parameters`,{params:{node_id:a}}),staleTime:0,enabled:t})},"useExportPipelineDSL",0,()=>(0,t.useMutation)({mutationKey:[i,"export-pipeline-dsl"],mutationFn:e=>{let{pipelineId:t,include:r=!1}=e;return(0,s.get)(`/rag/pipelines/${t}/exports?include_secret=${r}`)}}),"useExportTemplateDSL",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[i,"template-dsl-export"],mutationFn:e=>(0,s.post)(`/rag/pipeline/customized/templates/${e}`),...e})},"useImportPipelineDSL",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[i,"dsl-import"],mutationFn:e=>(0,s.post)("/rag/pipelines/imports",{body:e}),...e})},"useImportPipelineDSLConfirm",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[i,"dsl-import-confirm"],mutationFn:e=>(0,s.post)(`/rag/pipelines/imports/${e}/confirm`),...e})},"useInvalidCustomizedTemplateList",0,()=>(0,a.useInvalid)([...l,"customized"]),"useInvalidDataSourceList",0,()=>(0,a.useInvalid)([i,"datasource"]),"usePipelineExecutionLog",0,e=>{let{dataset_id:t,document_id:n}=e;return(0,r.useQuery)({queryKey:[i,"pipeline-execution-log",t,n],queryFn:()=>(0,s.get)(`/datasets/${t}/documents/${n}/pipeline-execution-log`),staleTime:0})},"usePipelineTemplateById",0,(e,t)=>{let{template_id:n,type:a}=e;return(0,r.useQuery)({queryKey:[i,"template",a,n],queryFn:()=>(0,s.get)(`/rag/pipeline/templates/${n}`,{params:{type:a}}),enabled:t,staleTime:0})},"usePipelineTemplateList",0,function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return(0,r.useQuery)({queryKey:[...l,e],queryFn:()=>(0,s.get)("/rag/pipeline/templates",{params:e}),enabled:t})},"usePreviewOnlineDocument",0,()=>(0,t.useMutation)({mutationKey:[i,"preview-online-document"],mutationFn:e=>{let{pipelineId:t,datasourceNodeId:r,workspaceID:a,pageID:i,pageType:l,credentialId:o}=e;return(0,s.post)(`/rag/pipelines/${t}/workflows/published/datasource/nodes/${r}/preview`,{body:{datasource_type:n.DatasourceType.onlineDocument,credential_id:o,inputs:{workspace_id:a,page_id:i,type:l}}})}}),"usePublishAsCustomizedPipeline",0,()=>(0,t.useMutation)({mutationKey:[i,"publish-as-customized-pipeline"],mutationFn:e=>{let{pipelineId:t,name:r,icon_info:n,description:a}=e;return(0,s.post)(`/rag/pipelines/${t}/customized/publish`,{body:{name:r,icon_info:n,description:a}})}}),"usePublishedPipelineInfo",0,e=>(0,r.useQuery)({queryKey:[...o,e],queryFn:()=>(0,s.get)(`/rag/pipelines/${e}/workflows/publish`),enabled:!!e}),"usePublishedPipelinePreProcessingParams",0,function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{pipeline_id:n,node_id:a}=e;return(0,r.useQuery)({queryKey:[i,"published-pipeline-pre-processing-params",n,a],queryFn:()=>(0,s.get)(`/rag/pipelines/${n}/workflows/published/pre-processing/parameters`,{params:{node_id:a}}),staleTime:0,enabled:t})},"usePublishedPipelineProcessingParams",0,e=>{let{pipeline_id:t,node_id:n}=e;return(0,r.useQuery)({queryKey:[i,"published-pipeline-processing-params",t,n],queryFn:()=>(0,s.get)(`/rag/pipelines/${t}/workflows/published/processing/parameters`,{params:{node_id:n}}),staleTime:0})},"useRunPublishedPipeline",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[i,"run-published-pipeline"],mutationFn:e=>{let{pipeline_id:t,is_preview:r,...n}=e;return(0,s.post)(`/rag/pipelines/${t}/workflows/published/run`,{body:{...n,is_preview:r,response_mode:"blocking"}})},...e})},"useUpdateTemplateInfo",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.useMutation)({mutationKey:[i,"template-update"],mutationFn:e=>{let{template_id:t,...r}=e;return(0,s.patch)(`/rag/pipeline/customized/templates/${t}`,{body:r})},...e})}])},255202,e=>{"use strict";var t=e.i(875037),r=e.i(562572),n=e.i(367916),s=e.i(722384);let a="data-source-auth";e.s(["useGetDataSourceAuth",0,e=>{let{pluginId:t,provider:s}=e;return(0,r.useQuery)({queryKey:[a,"specific-data-source",t,s],queryFn:()=>(0,n.get)(`/auth/plugin/datasource/${t}/${s}`),retry:0})},"useGetDataSourceListAuth",0,()=>(0,r.useQuery)({queryKey:[a,"list"],queryFn:()=>(0,n.get)("/auth/plugin/datasource/list"),retry:0}),"useGetDataSourceOAuthUrl",0,e=>(0,t.useMutation)({mutationKey:[a,"oauth-url",e],mutationFn:t=>(0,n.get)(`/oauth/plugin/${e}/datasource/get-authorization-url?credential_id=${t}`)}),"useGetDefaultDataSourceListAuth",0,()=>(0,r.useQuery)({queryKey:[a,"default-list"],queryFn:()=>(0,n.get)("/auth/plugin/datasource/default-list"),retry:0}),"useInvalidDataSourceAuth",0,e=>{let{pluginId:t,provider:r}=e;return(0,s.useInvalid)([a,"specific-data-source",t,r])},"useInvalidDataSourceListAuth",0,()=>(0,s.useInvalid)([a,"list"]),"useInvalidDefaultDataSourceListAuth",0,()=>(0,s.useInvalid)([a,"default-list"])])},632717,e=>{"use strict";e.s(["default",()=>p]);var t=e.i(739255),r=e.i(225162),n=e.i(56971),s=e.i(255202),a=e.i(475390),i=e.i(157644),l=e.i(243922),o=e.i(154033),u=e.i(819114),c=e.i(944911);let p=()=>{let e=(0,i.useInvalidateInstalledPluginList)(),{mutate:p}=(0,r.useModelList)(t.ModelTypeEnum.textGeneration),{mutate:d}=(0,r.useModelList)(t.ModelTypeEnum.textEmbedding),{mutate:g}=(0,r.useModelList)(t.ModelTypeEnum.rerank),{refreshModelProviders:m}=(0,n.useProviderContext)(),y=(0,o.useInvalidateAllToolProviders)(),f=(0,o.useInvalidateAllBuiltInTools)(),h=(0,a.useInvalidDataSourceList)(),v=(0,s.useInvalidDataSourceListAuth)(),b=(0,l.useInvalidateStrategyProviders)(),x=(0,u.useInvalidateAllTriggerPlugins)(),w=(0,o.useInvalidateRAGRecommendedPlugins)();return{refreshPluginList:(t,r)=>{e(),(t&&c.PluginCategoryEnum.tool.includes(t.category)||r)&&(y(),f(),w("tool")),(t&&c.PluginCategoryEnum.trigger.includes(t.category)||r)&&x(),(t&&c.PluginCategoryEnum.datasource.includes(t.category)||r)&&(h(),v()),(t&&c.PluginCategoryEnum.model.includes(t.category)||r)&&(m(),p(),d(),g()),(t&&c.PluginCategoryEnum.agent.includes(t.category)||r)&&b()}}}},95085,e=>{"use strict";e.s(["default",()=>p,"useCanInstallPluginFromMarketplace",()=>c]);var t=e.i(268255);e.i(152567);var r=e.i(408767),n=e.i(711536),s=e.i(494268),a=e.i(157644),i=e.i(137667),l=e.i(944911);let o=(e,t)=>!!e&&e!==l.PermissionType.noOne&&(e===l.PermissionType.everyone||t),u=()=>{let{t:e}=(0,r.useTranslation)(),{isCurrentWorkspaceManager:t,isCurrentWorkspaceOwner:s}=(0,n.useAppContext)(),{data:l}=(0,a.useReferenceSettings)(),{permission:u}=l||{},c=(0,a.useInvalidateReferenceSettings)(),{mutate:p,isPending:d}=(0,a.useMutationReferenceSettings)({onSuccess:()=>{c(),i.default.notify({type:"success",message:e("api.actionSuccess",{ns:"common"})})}}),g=t||s;return{referenceSetting:l,setReferenceSettings:p,canManagement:o(u?.install_permission,g),canDebugger:o(u?.debug_permission,g),canSetPermissions:g,isUpdatePending:d}},c=()=>{let{enable_marketplace:e}=(0,s.useGlobalPublicStore)(e=>e.systemFeatures),{canManagement:r}=u();return{canInstallPluginFromMarketplace:(0,t.useMemo)(()=>e&&r,[e,r])}},p=u},887460,e=>{"use strict";var t=e.i(367916);let r=async(e,r)=>{let n=new FormData;return n.append(r?"bundle":"pkg",e),(0,t.upload)({xhr:new XMLHttpRequest,data:n},!1,`/workspaces/current/plugin/upload/${r?"bundle":"pkg"}`)},n=async e=>(0,t.post)("/workspaces/current/plugin/upgrade/marketplace",{body:e}),s=async(e,r,n,s,a)=>(0,t.post)("/workspaces/current/plugin/upgrade/github",{body:{repo:e,version:r,package:n,original_plugin_unique_identifier:s,new_plugin_unique_identifier:a}}),a=async(e,r,n)=>(0,t.post)("/workspaces/current/plugin/upload/github",{body:{repo:e,version:r,package:n}}),i=async e=>(0,t.getMarketplace)(`/plugins/identifier?unique_identifier=${e}`),l=async e=>{let{org:r,name:n,version:s}=e;return(0,t.getMarketplace)(`/bundles/${r}/${n}/${s}`)},o=async e=>{let{org:r,name:n}=e;return(0,t.getMarketplace)(`/plugins/${r}/${n}`)},u=async e=>(0,t.get)(`/workspaces/current/plugin/tasks/${e}`),c=async e=>(0,t.post)("/workspaces/current/plugin/uninstall",{body:{plugin_installation_id:e}});e.s(["checkTaskStatus",0,u,"fetchBundleInfoFromMarketPlace",0,l,"fetchManifestFromMarketPlace",0,i,"fetchPluginInfoFromMarketPlace",0,o,"uninstallPlugin",0,c,"updateFromGitHub",0,s,"updateFromMarketPlace",0,n,"uploadFile",0,r,"uploadGitHub",0,a])},157644,e=>{"use strict";e.s(["useCheckInstalled",()=>h,"useDebugKey",()=>C,"useDownloadPlugin",()=>W,"useFeaturedToolsRecommendations",()=>x,"useFeaturedTriggersRecommendations",()=>w,"useFetchDynamicOptions",()=>H,"useFetchPluginsInMarketPlaceByIds",()=>K,"useFetchPluginsInMarketPlaceByInfo",()=>R,"useInstallOrUpdate",()=>N,"useInstallPackageFromGitHub",()=>_,"useInstallPackageFromLocal",()=>M,"useInstallPackageFromMarketPlace",()=>I,"useInstalledLatestVersion",()=>F,"useInstalledPluginList",()=>k,"useInvalidateInstalledPluginList",()=>P,"useInvalidateReferenceSettings",()=>A,"useModelInList",()=>B,"useMutationCheckDependencies",()=>U,"useMutationClearTaskPlugin",()=>O,"useMutationReferenceSettings",()=>V,"usePluginDeclarationFromMarketPlace",()=>S,"usePluginInfo",()=>G,"usePluginManifestInfo",()=>z,"usePluginReadme",()=>Z,"usePluginReadmeAsset",()=>X,"usePluginTaskList",()=>Q,"useReferenceSettings",()=>L,"useRemoveAutoUpgrade",()=>E,"useUpdatePackageFromMarketPlace",()=>j,"useUploadGitHub",()=>q,"useVersionListOfPlugin",()=>T]);var t=e.i(236063),r=e.i(875037),n=e.i(562572),s=e.i(214309),a=e.i(361126),i=e.i(268255),l=e.i(632717),o=e.i(108185),u=e.i(95085),c=e.i(944911),p=e.i(81828),d=e.i(887460),g=e.i(367916),m=e.i(154033);let y="plugins",f=[y,"installedPluginList"],h=e=>{let{pluginIds:t,enabled:r}=e;return(0,n.useQuery)({queryKey:[y,"checkInstalled",t],queryFn:()=>(0,g.post)("/workspaces/current/plugin/list/installations/ids",{body:{plugin_ids:t}}),enabled:r,staleTime:0})},v=[y,"recommendedMarketplacePlugins"],b=function(){let{collection:e="__recommended-plugins-tools",enabled:t=!0,limit:r=15}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.useQuery)({queryKey:[...v,e,r],queryFn:async()=>(await (0,g.postMarketplace)(`/collections/${e}/plugins`,{body:{limit:r}})).data.plugins.map(e=>(0,o.getFormattedPlugin)(e)),enabled:t,staleTime:6e4})},x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,{data:r=[],isLoading:n}=b({collection:"__recommended-plugins-tools",enabled:e,limit:t});return{plugins:r,isLoading:n}},w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,{data:r=[],isLoading:n}=b({collection:"__recommended-plugins-triggers",enabled:e,limit:t});return{plugins:r,isLoading:n}},k=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=async e=>{let{pageParam:t=1}=e;return await (0,g.get)(`/workspaces/current/plugin/list?page=${t}&page_size=${r}`)},{data:s,error:a,fetchNextPage:i,hasNextPage:l,isFetchingNextPage:o,isLoading:u,isSuccess:c}=(0,t.useInfiniteQuery)({enabled:!e,queryKey:f,queryFn:n,getNextPageParam:(e,t)=>{let n=e.total,s=t.length;if(!(s*r>=n))return s+1},initialPageParam:1}),p=s?.pages.flatMap(e=>e.plugins)??[],d=s?.pages[0].total??0;return{data:e?void 0:{plugins:p,total:d},isLastPage:!l,loadNextPage:()=>{i()},isLoading:u,isFetching:o,error:a,isSuccess:c}},F=e=>(0,n.useQuery)({queryKey:[y,"installedLatestVersion",e],queryFn:()=>(0,g.post)("/workspaces/current/plugin/list/latest-versions",{body:{plugin_ids:e}}),enabled:!!e.length,initialData:e.length?void 0:{versions:{}}}),P=()=>{let e=(0,s.useQueryClient)(),t=(0,m.useInvalidateAllBuiltInTools)();return()=>{e.invalidateQueries({queryKey:f}),t()}},I=e=>(0,r.useMutation)({...e,mutationFn:e=>(0,g.post)("/workspaces/current/plugin/install/marketplace",{body:{plugin_unique_identifiers:[e]}})}),j=e=>(0,r.useMutation)({...e,mutationFn:e=>(0,g.post)("/workspaces/current/plugin/upgrade/marketplace",{body:e})}),S=e=>(0,n.useQuery)({queryKey:[y,"pluginDeclaration",e],queryFn:()=>(0,g.get)("/workspaces/current/plugin/marketplace/pkg",{params:{plugin_unique_identifier:e}}),enabled:!!e}),T=e=>(0,n.useQuery)({enabled:!!e,queryKey:[y,"versions",e],queryFn:()=>(0,g.getMarketplace)(`/plugins/${e}/versions`,{params:{page:1,page_size:100}})}),M=()=>(0,r.useMutation)({mutationFn:e=>(0,g.post)("/workspaces/current/plugin/install/pkg",{body:{plugin_unique_identifiers:[e]}})}),_=()=>(0,r.useMutation)({mutationFn:e=>{let{repoUrl:t,selectedVersion:r,selectedPackage:n,uniqueIdentifier:s}=e;return(0,g.post)("/workspaces/current/plugin/install/github",{body:{repo:t,version:r,package:n,plugin_unique_identifier:s}})}}),q=e=>(0,n.useQuery)({queryKey:[y,"uploadGitHub",e],queryFn:()=>(0,g.post)("/workspaces/current/plugin/upload/github",{body:e}),retry:0}),N=e=>{let{onSuccess:t}=e,{mutateAsync:n}=j();return(0,r.useMutation)({mutationFn:e=>{let{payload:t,plugin:r,installedInfo:s}=e;return Promise.all(t.map(async(e,t)=>{try{let a=s[`${r[t]?.org||r[t]?.author}/${r[t]?.name}`],i=!!a,l="",o="",u=!1;if("github"===e.type){if(!(l=e.value.github_plugin_unique_identifier)){let{unique_identifier:t}=await (0,g.post)("/workspaces/current/plugin/upload/github",{body:{repo:e.value.repo,version:e.value.release||e.value.version,package:e.value.packages||e.value.package}});if((l=e.value.github_plugin_unique_identifier||t)===a?.uniqueIdentifier)return{status:c.TaskStatus.success,taskId:"",uniqueIdentifier:""}}if(!i){let{task_id:t,all_installed:r}=await (0,g.post)("/workspaces/current/plugin/install/github",{body:{repo:e.value.repo,version:e.value.release||e.value.version,package:e.value.packages||e.value.package,plugin_unique_identifier:l}});o=t,u=r}}if("marketplace"===e.type){if((l=e.value.marketplace_plugin_unique_identifier||r[t]?.plugin_id)===a?.uniqueIdentifier)return{status:c.TaskStatus.success,taskId:"",uniqueIdentifier:""};if(!i){let{task_id:e,all_installed:t}=await (0,g.post)("/workspaces/current/plugin/install/marketplace",{body:{plugin_unique_identifiers:[l]}});o=e,u=t}}if("package"===e.type){if((l=e.value.unique_identifier)===a?.uniqueIdentifier)return{status:c.TaskStatus.success,taskId:"",uniqueIdentifier:""};if(!i){let{task_id:e,all_installed:t}=await (0,g.post)("/workspaces/current/plugin/install/pkg",{body:{plugin_unique_identifiers:[l]}});o=e,u=t}}if(i)if("package"===e.type){await (0,d.uninstallPlugin)(a.installedId);let{task_id:e,all_installed:t}=await (0,g.post)("/workspaces/current/plugin/install/pkg",{body:{plugin_unique_identifiers:[l]}});o=e,u=t}else{let{task_id:e,all_installed:t}=await n({original_plugin_unique_identifier:a?.uniqueIdentifier,new_plugin_unique_identifier:l});o=e,u=t}if(u)return{status:c.TaskStatus.success,taskId:"",uniqueIdentifier:""};return{status:c.TaskStatus.running,taskId:o,uniqueIdentifier:l}}catch(e){return Promise.resolve({status:c.TaskStatus.failed,taskId:"",uniqueIdentifier:""})}}))},onSuccess:t})},C=()=>(0,n.useQuery)({queryKey:[y,"debugKey"],queryFn:()=>(0,g.get)("/workspaces/current/plugin/debugging-key")}),$=[y,"referenceSettings"],L=()=>(0,n.useQuery)({queryKey:$,queryFn:()=>(0,g.get)("/workspaces/current/plugin/preferences/fetch")}),A=()=>{let e=(0,s.useQueryClient)();return()=>{e.invalidateQueries({queryKey:$})}},V=e=>{let{onSuccess:t}=e;return(0,r.useMutation)({mutationFn:e=>(0,g.post)("/workspaces/current/plugin/preferences/change",{body:e}),onSuccess:t})},E=()=>(0,r.useMutation)({mutationFn:e=>(0,g.post)("/workspaces/current/plugin/preferences/autoupgrade/exclude",{body:e})}),K=(e,t)=>(0,n.useQuery)({...t,queryKey:[y,"fetchPluginsInMarketPlaceByIds",e],queryFn:()=>(0,g.postMarketplace)("/plugins/identifier/batch",{body:{unique_identifiers:e}}),enabled:e?.filter(e=>!!e).length>0,retry:0}),R=e=>(0,n.useQuery)({queryKey:[y,"fetchPluginsInMarketPlaceByInfo",e],queryFn:()=>(0,g.postMarketplace)("/plugins/versions/batch",{body:{plugin_tuples:e.map(e=>({org:e.organization,name:e.plugin,version:e.version}))}}),enabled:e?.filter(e=>!!e).length>0,retry:0}),D=[y,"pluginTaskList"],Q=e=>{let[t,r]=(0,i.useState)(!1),{canManagement:s}=(0,u.default)(),{refreshPluginList:o}=(0,l.default)(),{data:p,isFetched:d,isRefetching:m,refetch:y,...f}=(0,n.useQuery)({enabled:s,queryKey:D,queryFn:()=>(0,g.get)("/workspaces/current/plugin/tasks?page=1&page_size=100"),refetchInterval:e=>{let t=e.state.data;return!t?.tasks.every(e=>e.status===c.TaskStatus.success||e.status===c.TaskStatus.failed)&&5e3}});(0,i.useEffect)(()=>{if(!t||m)return;let r=(0,a.cloneDeep)(p),n=r?.tasks.every(e=>e.status===c.TaskStatus.success||e.status===c.TaskStatus.failed),s=r?.tasks.every(e=>e.status===c.TaskStatus.failed);n&&r?.tasks.length&&!s&&o(e?{category:e}:void 0,!e)},[m]),(0,i.useEffect)(()=>{r(!0)},[]);let h=(0,i.useCallback)(()=>{y()},[y]);return{data:p,pluginTasks:p?.tasks||[],isFetched:d,handleRefetch:h,...f}},O=()=>(0,r.useMutation)({mutationFn:e=>{let{taskId:t,pluginId:r}=e,n=encodeURIComponent(r);return(0,g.post)(`/workspaces/current/plugin/tasks/${t}/delete/${n}`)}}),z=e=>(0,n.useQuery)({enabled:!!e,queryKey:[[y,"manifest",e]],queryFn:()=>(0,g.getMarketplace)(`/plugins/${e}`),retry:0}),W=(e,t)=>(0,n.useQuery)({queryKey:[y,"downloadPlugin",e],queryFn:()=>(0,g.getMarketplace)(`/plugins/${e.organization}/${e.pluginName}/${e.version}/download`),enabled:t,retry:0}),U=()=>(0,r.useMutation)({mutationFn:e=>(0,g.get)(`/apps/imports/${e}/check-dependencies`)}),B=(e,t)=>{let r=e?.provider;return(0,n.useQuery)({queryKey:["modelInList",r,t],queryFn:async()=>{if(!t||!r)return!1;try{let e=await (0,p.fetchModelProviderModelList)(`/workspaces/current/model-providers/${r}/models`);return!!t&&!!e.data.find(e=>e.model===t)}catch{return!1}},enabled:!!t&&!!r})},G=e=>(0,n.useQuery)({queryKey:["pluginInfo",e],queryFn:async()=>{if(!e)return null;let t=e.split("/"),r=t[0],n=t[1];try{let e=await (0,d.fetchPluginInfoFromMarketPlace)({org:r,name:n});return e.data.plugin.category===c.PluginCategoryEnum.model?e.data.plugin:null}catch{return null}},enabled:!!e}),H=(e,t,n,s,a,i)=>(0,r.useMutation)({mutationFn:()=>(0,g.get)("/workspaces/current/plugin/parameters/dynamic-options",{params:{plugin_id:e,provider:t,action:n,parameter:s,provider_type:a,...i}})}),Z=e=>{let{plugin_unique_identifier:t,language:r}=e;return(0,n.useQuery)({queryKey:["pluginReadme",t,r],queryFn:()=>(0,g.get)("/workspaces/current/plugin/readme",{params:{plugin_unique_identifier:t,language:r}},{silent:!0}),enabled:!!t,retry:0})},X=e=>{let{file_name:t,plugin_unique_identifier:r}=e,s=t?.replace(/(^\.\/_assets\/|^_assets\/)/,"");return(0,n.useQuery)({queryKey:["pluginReadmeAsset",r,s],queryFn:()=>(0,g.get)("/workspaces/current/plugin/asset",{params:{plugin_unique_identifier:r,file_name:s}},{silent:!0}),enabled:!!r&&!!t&&/(^\.\/_assets|^_assets)/.test(t)})}},766036,e=>{"use strict";var t=e.i(563199),r=e.i(837699),n=e.i(268255),s=e.i(935139);let a=n.memo(e=>{let{className:n,onClick:a}=e;return(0,t.jsx)("div",{className:(0,s.cn)(n,"cursor-pointer select-none rounded-md p-1 hover:bg-state-base-hover"),onClick:a,children:(0,t.jsx)(r.RiAddLine,{className:"h-4 w-4 text-text-tertiary"})})});e.s(["default",0,a])},359173,e=>{"use strict";var t=e.i(321124);e.s(["ChevronSelectorVertical",()=>t.default])},22461,116546,64997,e=>{"use strict";var t=e.i(563199),r=e.i(837699),n=e.i(124836),s=e.i(105845),a=e.i(268255);e.i(152567);var i=e.i(408767),l=e.i(192447),o=e.i(83278),u=e.i(766036);e.i(432024);var c=e.i(112757);e.i(39598);var p=e.i(678383),d=e.i(391185),g=e.i(421001),m=e.i(739255),y=e.i(120219),f=e.i(959752);e.i(845780);var h=e.i(720315),v=e.i(949250),b=e.i(417944),x=e.i(892081);e.i(668763);var w=e.i(359173);e.i(47690);var k=e.i(490774),F=e.i(935139);let P=a.memo(e=>{let{className:r,trigger:n,DropDownIcon:s=w.ChevronSelectorVertical,noLeft:i,options:l,allOptions:o,value:u,placeholder:c="",onChange:p,uppercase:d,triggerClassName:g,popupClassName:m,itemClassName:y,readonly:f,showChecked:h}=e,v=""===u||null==u,P=o?o.find(e=>e.value===u):l.find(e=>e.value===u),[I,{setFalse:j,toggle:S}]=(0,b.useBoolean)(!1),T=a.useRef(null);return(0,x.useClickAway)(()=>{j()},T),(0,t.jsxs)("div",{className:(0,F.cn)(!n&&!i&&"left-[-8px]","relative select-none",r),ref:T,children:[n?(0,t.jsx)("div",{onClick:S,className:(0,F.cn)(!f&&"cursor-pointer"),children:n}):(0,t.jsxs)("div",{onClick:S,className:(0,F.cn)(I&&"bg-state-base-hover","flex h-5 cursor-pointer items-center rounded-md pl-1 pr-0.5 text-xs font-semibold text-text-secondary hover:bg-state-base-hover"),children:[(0,t.jsx)("div",{className:(0,F.cn)("text-sm font-semibold",d&&"uppercase",v&&"text-text-tertiary",g),children:v?c:P?.label}),!f&&(0,t.jsx)(s,{className:"h-3 w-3 "})]}),I&&!f&&(0,t.jsx)("div",{className:(0,F.cn)("absolute top-[24px] z-10 w-[120px]  select-none rounded-lg border border-components-panel-border bg-components-panel-bg p-1 shadow-lg",m),children:l.map(e=>(0,t.jsxs)("div",{onClick:()=>{j(),p(e.value)},className:(0,F.cn)(y,d&&"uppercase","flex h-[30px] min-w-[44px] cursor-pointer items-center justify-between rounded-lg px-3 text-[13px] font-medium text-text-secondary hover:bg-state-base-hover"),children:[(0,t.jsx)("div",{children:e.label}),h&&e.value===u&&(0,t.jsx)(k.Check,{className:"h-4 w-4 text-text-primary"})]},e.value))})]})});e.s(["default",0,P],116546),e.i(603198);var I=e.i(697743);e.i(187243);var j=e.i(989425),S=e.i(390622);e.i(905691);var T=e.i(48498),M=e.i(157644),_=e.i(619507),q=e.i(249385),N=e.i(299951),C=e.i(225162);let $={},L=a.memo(e=>{let{schema:r=$,readonly:n,value:s,onChange:i,onOpenChange:l,isLoading:o}=e,u=(0,C.useLanguage)(),c=r.placeholder,p=(0,a.useCallback)(e=>{i(""===e.target.value?"":Number.parseFloat(e.target.value),j.VarType.constant)},[i]),d=(0,a.useCallback)(e=>{i(e=null===e?"":e,j.VarType.constant)},[i]);return(0,t.jsxs)(t.Fragment,{children:[(r.type===m.FormTypeEnum.select||r.type===m.FormTypeEnum.dynamicSelect)&&(0,t.jsx)(N.SimpleSelect,{wrapperClassName:"w-full !h-8",className:"flex items-center",disabled:n,defaultValue:s,items:r.options.map(e=>({value:e.value,name:e.label[u]||e.label.en_US})),onSelect:e=>d(e.value),placeholder:c?.[u]||c?.en_US,onOpenChange:l,isLoading:o}),r.type===m.FormTypeEnum.textNumber&&(0,t.jsx)("input",{type:"number",className:"h-8 w-full overflow-hidden rounded-lg bg-workflow-block-parma-bg p-2 text-[13px] font-normal leading-8 text-text-secondary placeholder:text-gray-400 focus:outline-none",value:s,onChange:p,readOnly:n,placeholder:c?.[u]||c?.en_US,min:r.min,max:r.max})]})});var A=e.i(963855),V=e.i(625285);let E=e=>{let{className:r}=e;return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"240",height:"2",viewBox:"0 0 240 2",fill:"none",className:r,children:[(0,t.jsx)("path",{d:"M0 1H240",stroke:"url(#paint0_linear_8619_59125)"}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"paint0_linear_8619_59125",x1:"240",y1:"9.99584",x2:"3.95539e-05",y2:"9.88094",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopColor:"white",stopOpacity:"0.01"}),(0,t.jsx)("stop",{offset:"0.9031",stopColor:"#101828",stopOpacity:"0.04"}),(0,t.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0.01"})]})})]})},K=e=>{let{className:r}=e;return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2",height:"132",viewBox:"0 0 2 132",fill:"none",className:r,children:[(0,t.jsx)("path",{d:"M1 0L1 132",stroke:"url(#paint0_linear_8619_59128)"}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"paint0_linear_8619_59128",x1:"-7.99584",y1:"132",x2:"-7.96108",y2:"6.4974e-07",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopColor:"white",stopOpacity:"0.01"}),(0,t.jsx)("stop",{offset:"0.877606",stopColor:"#101828",stopOpacity:"0.04"}),(0,t.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0.01"})]})})]})},R=e=>{let{title:r,description:n,icon:s}=e;return(0,t.jsxs)("div",{className:"flex w-[320px] flex-col items-start gap-2 rounded-[10px] bg-workflow-process-bg p-4",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 items-center justify-center gap-2 rounded-[10px]",children:(0,t.jsxs)("div",{className:"relative flex grow items-center justify-center gap-2 self-stretch rounded-[10px] border-[0.5px] border-components-card-border bg-components-card-bg p-1 shadow-lg",children:[s||(0,t.jsx)(p.Variable02,{className:"h-5 w-5 shrink-0 text-text-accent"}),(0,t.jsx)(K,{className:"absolute -right-[1px] top-1/2 -translate-y-1/4"}),(0,t.jsx)(K,{className:"absolute -left-[1px] top-1/2 -translate-y-1/4"}),(0,t.jsx)(E,{className:"absolute left-3/4 top-0 -translate-x-1/4 -translate-y-1/2"}),(0,t.jsx)(E,{className:"absolute left-3/4 top-full -translate-x-1/4 -translate-y-1/2"})]})}),(0,t.jsxs)("div",{className:"flex flex-col items-start gap-1 self-stretch",children:[(0,t.jsx)("div",{className:"system-sm-medium text-text-secondary",children:r}),n]})]})};e.s(["default",0,R],64997),e.i(275225);var D=e.i(705405),Q=e.i(139269);let O=a.memo(e=>{let{vars:r,popupFor:n,onChange:s,itemWidth:l,isSupportFileVar:o=!0,zIndex:u,preferSchemaType:c}=e,{t:p}=(0,i.useTranslation)(),d=(0,D.useStore)(e=>e.pipelineId),g=(0,a.useMemo)(()=>!!d,[d]),m=(0,D.useStore)(e=>e.setShowInputFieldPanel);return(0,t.jsx)("div",{className:"space-y-1 rounded-lg border border-components-panel-border bg-components-panel-bg p-1 shadow-lg",style:{width:l||228},children:(!r||0===r.length)&&n?"toAssigned"===n?(0,t.jsx)(R,{title:p("variableReference.noAvailableVars",{ns:"workflow"})||"",description:(0,t.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:p("variableReference.noVarsForOperation",{ns:"workflow"})})}):(0,t.jsx)(R,{title:p("variableReference.noAssignedVars",{ns:"workflow"})||"",description:(0,t.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:p("variableReference.assignedVarsDescription",{ns:"workflow"})})}):(0,t.jsx)(Q.default,{searchBoxClassName:"mt-1",vars:r,onChange:s,itemWidth:l,isSupportFileVar:o,zIndex:u,showManageInputField:g,onManageInputField:()=>m?.(!0),preferSchemaType:c})})}),z=[],W=a.memo(e=>{let b,x,{nodeId:w,readonly:k,className:N,isShowNodeName:C=!0,value:$=z,onOpen:E=n.noop,onChange:K,isSupportConstantValue:R,defaultVarKindType:D=j.VarType.constant,onlyLeafNodeVar:Q,filterVar:W=()=>!0,isFilterFileVar:U,availableNodes:B,availableVars:G,isAddBtnTrigger:H,schema:Z,valueTypePlaceHolder:X,isInTable:J,onRemove:Y,typePlaceHolder:ee,isSupportFileVar:et=!0,placeholder:er,minWidth:en,popupFor:es,zIndex:ea,currentTool:ei,currentProvider:el,preferSchemaType:eo}=e,{t:eu}=(0,i.useTranslation)(),ec=(0,l.useStoreApi)(),ep=(0,l.useNodes)(),ed=(0,h.useIsChatMode)(),{getCurrentVariableType:eg}=(0,v.useWorkflowVariables)(),{availableVars:em,availableNodesWithParent:ey}=(0,_.default)(w,{onlyLeafNodeVar:Q,passedInAvailableNodes:B,filterVar:W}),ef=(0,l.useReactFlow)(),eh=ey.find(e=>e.data.type===S.BlockEnum.Start),ev=ep.find(e=>e.id===w),eb=!!ev?.data?.isInIteration,ex=eb?ep.find(e=>e.id===ev?.parentId):null,ew=!!ev?.data?.isInLoop,ek=ew?ep.find(e=>e.id===ev?.parentId):null,eF=(0,a.useRef)(null),[eP,eI]=(0,a.useState)(227);(0,a.useEffect)(()=>{eF.current&&eI(eF.current.clientWidth)},[eF.current]);let[ej,eS]=(0,a.useState)(D),eT=R&&ej===j.VarType.constant,eM=(0,a.useMemo)(()=>{let e=G||em;return U?(0,A.removeFileVars)(e):e},[G,em,U]),[e_,eq]=(0,a.useState)(!1);(0,a.useEffect)(()=>{E()},[e_]);let eN=!eT&&$.length>0,eC=(0,a.useMemo)(()=>!!eb&&!!($[0]===ev?.parentId&&["item","index"].includes($[1])),[eb,$,ev]),e$=(0,a.useMemo)(()=>!!ew&&!!($[0]===ev?.parentId&&["item","index"].includes($[1])),[ew,$,ev]),eL=eN?$[0]:"",eA=(0,a.useMemo)(()=>{if(!eN||eT)return null;if(eC)return ex?.data;if(e$)return ek?.data;if((0,A.isSystemVar)($))return eh?.data;let e=(0,A.getNodeInfoById)(ey,eL)?.data;if(e)return{...e,id:eL}},[$,eN,eT,eC,ex,ey,eL,eh,e$,ek]),eV=$.length>2&&!(0,A.isRagVariableVar)($),eE=(0,a.useMemo)(()=>{if(!eN)return"";let e=f.VAR_SHOW_NAME_MAP[$.join(".")];if(e)return e;let t=(0,A.isSystemVar)($),r=Array.isArray($)?$[$.length-1]:"";return`${t?"sys.":""}${r}`},[eN,$]),eK=[{label:"Variable",value:j.VarType.variable},{label:"Constant",value:j.VarType.constant}],eR=(0,a.useCallback)(e=>{eS(e),e===j.VarType.constant?K("",e):K([],e)},[K]),eD=(0,a.useRef)(null),[eQ,eO]=(0,a.useState)(!1),[ez,eW]=(0,a.useState)(0);(0,a.useEffect)(()=>{ez&&eD.current&&(eD.current.focus(),eO(!0))},[ez]);let eU=(0,a.useCallback)((e,t)=>{K((0,s.produce)(e,e=>{e[1]&&e[1].startsWith("sys.")&&(e.shift(),e[0].split(".").forEach((t,r)=>{e[r]=t}))}),ej,t),eq(!1)},[K,ej]),eB=(0,a.useCallback)(()=>{ej===j.VarType.constant?K("",ej):K([],ej)},[K,ej]),eG=(0,a.useCallback)(e=>{let t=ey.findIndex(t=>t.id===e),r=ey[t],{clientWidth:n,clientHeight:s}=document.getElementById("workflow-container"),{setViewport:a}=ef,{transform:i}=ec.getState(),l=i[2],o=r.position;a({x:(n-400-r.width*l)/2-o.x*l,y:(s-r.height*l)/2-o.y*l,zoom:i[2]})},[ey,ef,ec]),eH=eg({parentNode:eb?ex:ek,valueSelector:$,availableNodes:ey,isChatMode:ed,isConstant:!!eT,preferSchemaType:eo}),{isEnv:eZ,isChatVar:eX,isGlobal:eJ,isRagVar:eY,isValidVar:e0,isException:e1}=(0,a.useMemo)(()=>{let e=(0,A.isENV)($),t=(0,A.isConversationVar)($),r=(0,A.isGlobalVar)($),n=(0,A.isRagVariableVar)($),s=!!eA||e||t||r||n;return{isEnv:e,isChatVar:t,isGlobal:r,isRagVar:n,isValidVar:s,isException:(0,T.isExceptionVariable)(eE,eA?.type)}},[$,eA,eE]),e2=eP-56,[e5,e9,e3]=(b=((eA?.title||"")+(eE||"")+(eH||"")).length,x=15+Math.floor((eA?.title?.length||0)/b*e2),[x,-15+Math.floor((eE?.length||0)/b*e2),Math.floor((eH?.length||0)/b*e2)]),e4=R?"div":d.PortalToFollowElemTrigger,e6=R?d.PortalToFollowElemTrigger:"div",e7=(0,a.useMemo)(()=>e0&&eV?(0,t.jsx)(V.default,{nodeName:eA?.title,path:$.slice(1),varType:(0,A.varTypeToStructType)(eH),nodeType:eA?.type}):!e0&&eN?eu("errorMsg.invalidVariable",{ns:"workflow"}):null,[e0,eV,eN,eu,eA?.title,eA?.type,$,eH]),[e8,te]=(0,a.useState)(null),[tt,tr]=(0,a.useState)(!1),{mutateAsync:tn}=(0,M.useFetchDynamicOptions)(el?.plugin_id||"",el?.name||"",ei?.name||"",Z?.variable||"","tool"),ts=async()=>{if(Z?.type===m.FormTypeEnum.dynamicSelect&&ei&&el){tr(!0);try{let e=await tn();te(e?.options||[])}finally{tr(!1)}}};(0,a.useEffect)(()=>{ts()},[ei,el,Z]);let ta=(0,a.useMemo)(()=>{if(Z?.type!==m.FormTypeEnum.dynamicSelect)return Z;if(e8)return{...Z,options:e8};if(tt&&$&&"string"==typeof $){let e=[{value:$,label:{en_US:$,zh_Hans:$},show_on:[]}];return{...Z,options:e}}return{...Z,options:[]}},[Z,e8,tt,$]),ti=(0,a.useMemo)(()=>eZ?"environment":eX?"conversation":eJ?"global":e$?"loop":eY?"rag":"system",[eZ,eX,eJ,e$,eY]);return(0,t.jsx)("div",{className:(0,F.cn)(N,!k&&"cursor-pointer"),children:(0,t.jsxs)(d.PortalToFollowElem,{open:e_,onOpenChange:eq,placement:H?"bottom-end":"bottom-start",children:[(0,t.jsx)(e4,{onClick:()=>{k||(eT?eW(Date.now()):eq(!e_))},className:"group/picker-trigger-wrap relative !flex",children:(0,t.jsxs)(t.Fragment,{children:[H?(0,t.jsx)("div",{children:(0,t.jsx)(u.default,{onClick:n.noop})}):(0,t.jsxs)("div",{ref:R?null:eF,className:(0,F.cn)(e_||eQ?"border-gray-300":"border-gray-100","group/wrap relative flex h-8 w-full items-center",!R&&"rounded-lg bg-components-input-bg-normal p-1",J&&"border-none bg-transparent",k&&"bg-components-input-bg-disabled"),children:[R?(0,t.jsx)("div",{onClick:e=>{e.stopPropagation(),eq(!1),eW(Date.now())},className:"mr-1 flex h-full items-center space-x-1",children:(0,t.jsx)(P,{noLeft:!0,trigger:(0,t.jsxs)("div",{className:"radius-md flex h-8 items-center bg-components-input-bg-normal px-2",children:[(0,t.jsx)("div",{className:"system-sm-regular mr-1 text-components-input-text-filled",children:eK.find(e=>e.value===ej)?.label}),(0,t.jsx)(r.RiArrowDownSLine,{className:"h-4 w-4 text-text-quaternary"})]}),popupClassName:"top-8",readonly:k,value:ej,options:eK,onChange:eR,showChecked:!0})}):!eN&&(0,t.jsx)("div",{className:"ml-1.5 mr-1",children:(0,t.jsx)(p.Variable02,{className:`h-4 w-4 ${k?"text-components-input-text-disabled":"text-components-input-text-placeholder"}`})}),eT?(0,t.jsx)(L,{value:$,onChange:K,schema:ta,readonly:k,isLoading:tt}):(0,t.jsx)(e6,{onClick:()=>{k||(eT?eW(Date.now()):eq(!e_))},className:"h-full grow",children:(0,t.jsx)("div",{ref:R?eF:null,className:(0,F.cn)("h-full",R&&"flex items-center rounded-lg bg-components-panel-bg py-1 pl-1"),children:(0,t.jsx)(g.default,{noDecoration:eV,popupContent:e7,children:(0,t.jsx)("div",{className:(0,F.cn)("h-full items-center rounded-[5px] px-1.5",eN?"inline-flex bg-components-badge-white-to-dark":"flex"),children:eN?(0,t.jsxs)(t.Fragment,{children:[C&&!eZ&&!eX&&!eJ&&!eY&&(0,t.jsxs)("div",{className:"flex items-center",onClick:e=>{(e.metaKey||e.ctrlKey)&&(e.stopPropagation(),eG(eA?.id))},children:[(0,t.jsx)("div",{className:"h-3 px-[1px]",children:eA?.type&&(0,t.jsx)(y.VarBlockIcon,{className:"!text-text-primary",type:eA.type})}),(0,t.jsx)("div",{className:"mx-0.5 truncate text-xs font-medium text-text-secondary",title:eA?.title,style:{maxWidth:e5},children:eA?.title}),(0,t.jsx)(c.Line3,{className:"mr-0.5"})]}),eV&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(r.RiMoreLine,{className:"h-3 w-3 text-text-secondary"}),(0,t.jsx)(c.Line3,{className:"mr-0.5 text-divider-deep"})]}),(0,t.jsxs)("div",{className:"flex items-center text-text-accent",children:[tt&&(0,t.jsx)(r.RiLoader4Line,{className:"h-3.5 w-3.5 animate-spin text-text-secondary"}),(0,t.jsx)(I.VariableIconWithColor,{variables:$,variableCategory:ti,isExceptionVariable:e1}),(0,t.jsx)("div",{className:(0,F.cn)("ml-0.5 truncate text-xs font-medium",eZ&&"!text-text-secondary",eX&&"text-util-colors-teal-teal-700",e1&&"text-text-warning",eJ&&"text-util-colors-orange-orange-600"),title:eE,style:{maxWidth:e9},children:eE})]}),(0,t.jsx)("div",{className:"system-xs-regular ml-0.5 truncate text-center capitalize text-text-tertiary",title:eH,style:{maxWidth:e3},children:eH}),!e0&&(0,t.jsx)(r.RiErrorWarningFill,{className:"ml-0.5 h-3 w-3 text-text-destructive"})]}):(0,t.jsx)("div",{className:`overflow-hidden ${k?"text-components-input-text-disabled":"text-components-input-text-placeholder"} system-sm-regular text-ellipsis`,children:tt?(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(r.RiLoader4Line,{className:"mr-1 h-3.5 w-3.5 animate-spin text-text-secondary"}),(0,t.jsx)("span",{children:er??eu("common.setVarValuePlaceholder",{ns:"workflow"})})]}):er??eu("common.setVarValuePlaceholder",{ns:"workflow"})})})})})}),eN&&!k&&!J&&(0,t.jsx)("div",{className:"group invisible absolute right-1 top-[50%] h-5 translate-y-[-50%] cursor-pointer rounded-md p-1 hover:bg-state-base-hover group-hover/wrap:visible",onClick:eB,children:(0,t.jsx)(r.RiCloseLine,{className:"h-3.5 w-3.5 text-text-tertiary group-hover:text-text-secondary"})}),!eN&&X&&(0,t.jsx)(o.default,{className:" absolute right-1 top-[50%] translate-y-[-50%] capitalize",text:X,uppercase:!1})]}),!k&&J&&(0,t.jsx)(q.default,{className:"absolute right-1 top-0.5 hidden group-hover/picker-trigger-wrap:block",onClick:()=>Y?.()}),!eN&&ee&&(0,t.jsx)(o.default,{className:"absolute right-2 top-1.5",text:ee,uppercase:!1})]})}),(0,t.jsx)(d.PortalToFollowElemContent,{style:{zIndex:ea||100},className:"mt-1",children:!eT&&(0,t.jsx)(O,{vars:eM,popupFor:es,onChange:eU,itemWidth:H?260:en||eP,isSupportFileVar:et,zIndex:ea,preferSchemaType:eo})})]})})});e.s(["default",0,W],22461)}]);