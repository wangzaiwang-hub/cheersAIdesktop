(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,389358,876057,e=>{"use strict";var t,r,n=e.i(192447);e.s(["default",()=>n.ReactFlow],389358);var i=e.i(268255),l=e.i(796007),s=e.i(845316);function o(e){let{color:t,dimensions:r,lineWidth:n}=e;return i.default.createElement("path",{stroke:t,strokeWidth:n,d:`M${r[0]/2} 0 V${r[1]} M0 ${r[1]/2} H${r[0]}`})}function a(e){let{color:t,radius:r}=e;return i.default.createElement("circle",{cx:r,cy:r,r:r,fill:t})}(t=r||(r={})).Lines="lines",t.Dots="dots",t.Cross="cross";let d={[r.Dots]:"#91919a",[r.Lines]:"#eee",[r.Cross]:"#e2e2e2"},c={[r.Dots]:1,[r.Lines]:1,[r.Cross]:6},u=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function g(e){let{id:t,variant:g=r.Dots,gap:h=20,size:m,lineWidth:f=1,offset:p=2,color:x,style:_,className:v}=e,N=(0,i.useRef)(null),{transform:y,patternId:C}=(0,n.useStore)(u,s.shallow),b=x||d[g],k=m||c[g],T=g===r.Dots,S=g===r.Cross,E=Array.isArray(h)?h:[h,h],w=[E[0]*y[2]||1,E[1]*y[2]||1],O=k*y[2],L=S?[O,O]:w,M=T?[O/p,O/p]:[L[0]/p,L[1]/p];return i.default.createElement("svg",{className:(0,l.default)(["react-flow__background",v]),style:{..._,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:N,"data-testid":"rf__background"},i.default.createElement("pattern",{id:C+t,x:y[0]%w[0],y:y[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`},T?i.default.createElement(a,{color:b,radius:O/p}):i.default.createElement(o,{dimensions:L,color:b,lineWidth:f})),i.default.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${C+t})`}))}g.displayName="Background";var h=(0,i.memo)(g);e.s(["Background",()=>h],876057)},617178,e=>{"use strict";var t=e.i(563199);let r=e.i(268255).memo(e=>{let{title:r,content:n}=e;return(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex flex-col gap-y-0.5 rounded-md bg-workflow-block-parma-bg px-[5px] py-[3px]",children:[(0,t.jsx)("div",{className:"system-2xs-semibold-uppercase uppercase text-text-secondary",children:r}),(0,t.jsx)("div",{className:"system-xs-regular break-words text-text-tertiary",children:n})]})})});e.s(["default",0,r])},543421,e=>{"use strict";var t=e.i(95240);e.s(["VariableLabelInText",()=>t.default])},555503,758905,e=>{"use strict";var t=e.i(563199),r=e.i(268255);e.i(152567);var n=e.i(408767),i=e.i(963855);e.i(603198);var l=e.i(645960);e.s(["VariableLabelInNode",()=>l.default],758905);var l=l,s=e.i(245695),o=e.i(670082),a=e.i(146106);let d=(0,r.memo)(e=>{let{condition:d}=e,{t:c}=(0,n.useTranslation)(),{variable_selector:u,comparison_operator:g,sub_variable_condition:h}=d,m=(0,a.isComparisonOperatorNeedTranslate)(g)?c(`nodes.ifElse.comparisonOperator.${g}`,{ns:"workflow"}):g,f=(0,r.useCallback)(e=>(0,a.comparisonOperatorNotRequireValue)(e.comparison_operator)?"":e.value.replace(/\{\{#([^#]*)#\}\}/g,(e,t)=>{let r=t.split(".");return(0,i.isSystemVar)(r)?`{{${t}}}`:`{{${r.slice(1).join(".")}}}`}),[]),p=(0,r.useCallback)(e=>e.comparison_operator===o.ComparisonOperator.in||e.comparison_operator===o.ComparisonOperator.notIn,[]),x=(0,r.useCallback)(e=>{if(e.comparison_operator===o.ComparisonOperator.in||e.comparison_operator===o.ComparisonOperator.notIn){let t=[...s.FILE_TYPE_OPTIONS,...s.TRANSFER_METHOD].filter(t=>t.value===(Array.isArray(e.value)?e.value[0]:e.value))[0];return t?c(`nodes.ifElse.optionName.${t.i18nKey}`,{ns:"workflow"}).replace(/\{\{#([^#]*)#\}\}/g,(e,t)=>{let r=t.split(".");return(0,i.isSystemVar)(r)?`{{${t}}}`:`{{${r.slice(1).join(".")}}}`}):""}return""},[c]);return(0,t.jsxs)("div",{className:"rounded-md bg-workflow-block-parma-bg",children:[(0,t.jsxs)("div",{className:"flex h-6 items-center px-1 ",children:[(0,t.jsx)(l.default,{className:"w-0 grow",variables:u,notShowFullPath:!0}),(0,t.jsx)("div",{className:"mx-1 shrink-0 text-xs font-medium text-text-primary",title:m,children:m})]}),(0,t.jsx)("div",{className:"ml-[10px] border-l border-divider-regular pl-[10px]",children:h?.conditions.map((e,r)=>{let n=e.comparison_operator,i=n&&(0,a.isComparisonOperatorNeedTranslate)(n)?c(`nodes.ifElse.comparisonOperator.${n}`,{ns:"workflow"}):n;return(0,t.jsxs)("div",{className:"relative flex h-6 items-center space-x-1",children:[(0,t.jsx)("div",{className:"system-xs-medium text-text-accent",children:e.key}),(0,t.jsx)("div",{className:"system-xs-medium text-text-primary",children:i}),e.comparison_operator&&!(0,a.isEmptyRelatedOperator)(e.comparison_operator)&&(0,t.jsx)("div",{className:"system-xs-regular text-text-secondary",children:p(e)?x(e):f(e)}),r!==h.conditions.length-1&&(0,t.jsx)("div",{className:"absolute bottom-[-10px] right-1 z-10 text-[10px] font-medium uppercase leading-4 text-text-accent",children:c(`nodes.ifElse.${h.logical_operator}`,{ns:"workflow"})})]},e.id)})})]})});e.s(["default",0,d],555503)},166211,e=>{"use strict";var t=e.i(563199),r=e.i(268255);e.i(152567);var n=e.i(408767),i=e.i(192447),l=e.i(963855);e.i(603198);var s=e.i(543421);e.i(905691);var o=e.i(48498),a=e.i(245695),d=e.i(670082),c=e.i(146106);let u=(0,r.memo)(e=>{let{variableSelector:u,labelName:g,operator:h,value:m}=e,{t:f}=(0,n.useTranslation)(),p=(0,i.useNodes)(),x=g||((0,l.isSystemVar)(u)?u.slice(0).join("."):u.slice(1).join(".")),_=(0,c.isComparisonOperatorNeedTranslate)(h)?f(`nodes.ifElse.comparisonOperator.${h}`,{ns:"workflow"}):h,v=(0,c.comparisonOperatorNotRequireValue)(h),N=p.find(e=>e.id===u[0]),y=(0,o.isExceptionVariable)(x,N?.data.type),C=(0,r.useMemo)(()=>v?"":Array.isArray(m)?m[0]:!0===m||!1===m?m?"True":"False":m.replace(/\{\{#([^#]*)#\}\}/g,(e,t)=>{let r=t.split(".");return(0,l.isSystemVar)(r)?`{{${t}}}`:`{{${r.slice(1).join(".")}}}`}),[v,m]),b=h===d.ComparisonOperator.in||h===d.ComparisonOperator.notIn,k=(0,r.useMemo)(()=>{if(b){let e=[...a.FILE_TYPE_OPTIONS,...a.TRANSFER_METHOD].filter(e=>e.value===(Array.isArray(m)?m[0]:m))[0];return e?f(`nodes.ifElse.optionName.${e.i18nKey}`,{ns:"workflow"}).replace(/\{\{#([^#]*)#\}\}/g,(e,t)=>{let r=t.split(".");return(0,l.isSystemVar)(r)?`{{${t}}}`:`{{${r.slice(1).join(".")}}}`}):""}return""},[b,f,m]);return(0,t.jsxs)("div",{className:"flex h-6 items-center rounded-md bg-workflow-block-parma-bg px-1",children:[(0,t.jsx)(s.VariableLabelInText,{className:"w-0 grow",variables:u,nodeTitle:N?.data.title,nodeType:N?.data.type,isExceptionVariable:y,notShowFullPath:!0}),(0,t.jsx)("div",{className:"mx-1 shrink-0 text-xs font-medium text-text-primary",title:_,children:_}),!v&&(0,t.jsx)("div",{className:"shrink-[3] truncate text-xs text-text-secondary",title:C,children:b?k:C})]})});e.s(["default",0,u])},444462,378675,805429,212838,e=>{"use strict";e.s(["NoteEditorContextProvider",()=>eb,"default",()=>ek],378675);var t=e.i(563199),r=e.i(634020),n=e.i(717522),i=e.i(969013);let l=new Set(["http:","https:","mailto:","sms:","tel:"]);class s extends n.ElementNode{__url;__target;__rel;__title;static getType(){return"link"}static clone(e){return new s(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}constructor(e="",t={},r){super(r);const{target:n=null,rel:i=null,title:l=null}=t;this.__url=e,this.__target=n,this.__rel=i,this.__title=l}createDOM(e){let t=document.createElement("a");return this.updateLinkDOM(null,t,e),(0,r.addClassNamesToElement)(t,e.theme.link),t}updateLinkDOM(e,t,r){if((0,n.isHTMLAnchorElement)(t))for(let r of(e&&e.__url===this.__url||(t.href=this.sanitizeUrl(this.__url)),["target","rel","title"])){let n=`__${r}`,i=this[n];e&&e[n]===i||(i?t[r]=i:t.removeAttribute(r))}}updateDOM(e,t,r){return this.updateLinkDOM(e,t,r),!1}static importDOM(){return{a:e=>({conversion:o,priority:1})}}static importJSON(e){return a().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setURL(e.url).setRel(e.rel||null).setTarget(e.target||null).setTitle(e.title||null)}sanitizeUrl(e){e=x(e);try{let t=new URL(x(e));if(!l.has(t.protocol))return"about:blank"}catch(e){}return e}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(e){let t=this.getWritable();return t.__url=e,t}getTarget(){return this.getLatest().__target}setTarget(e){let t=this.getWritable();return t.__target=e,t}getRel(){return this.getLatest().__rel}setRel(e){let t=this.getWritable();return t.__rel=e,t}getTitle(){return this.getLatest().__title}setTitle(e){let t=this.getWritable();return t.__title=e,t}insertNewAfter(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=a(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(r,t),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t,r){if(!(0,n.$isRangeSelection)(t))return!1;let i=t.anchor.getNode(),l=t.focus.getNode();return this.isParentOf(i)&&this.isParentOf(l)&&t.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function o(e){let t=null;if((0,n.isHTMLAnchorElement)(e)){let r=e.textContent;(null!==r&&""!==r||e.children.length>0)&&(t=a(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return(0,n.$applyNodeReplacement)(new s(e,t))}function d(e){return e instanceof s}class c extends s{__isUnlinked;constructor(e="",t={},r){super(e,t,r),this.__isUnlinked=void 0!==t.isUnlinked&&null!==t.isUnlinked&&t.isUnlinked}static getType(){return"autolink"}static clone(e){return new c(e.__url,{isUnlinked:e.__isUnlinked,rel:e.__rel,target:e.__target,title:e.__title},e.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(e){let t=this.getWritable();return t.__isUnlinked=e,t}createDOM(e){return this.__isUnlinked?document.createElement("span"):super.createDOM(e)}updateDOM(e,t,r){return super.updateDOM(e,t,r)||e.__isUnlinked!==this.__isUnlinked}static importJSON(e){return u().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setIsUnlinked(e.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=this.getParentOrThrow().insertNewAfter(e,t);if((0,n.$isElementNode)(r)){let e=u(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return r.append(e),e}return null}}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return(0,n.$applyNodeReplacement)(new c(e,t))}function g(e){return e instanceof c}let h=(0,n.createCommand)("TOGGLE_LINK_COMMAND");function m(e,t){if("element"===e.type){let r=e.getNode();return(0,n.$isElementNode)(r)||function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;for(let t of(l.append("code",e),r))l.append("v",t);throw i.search=l.toString(),Error(`Minified Lexical error #${e}; visit ${i.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(252),r.getChildren()[e.offset+t]||null}return null}function f(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&"object"==typeof e){let{url:n,...i}=e;t=n,r={...i,...r}}else t=e;let{target:i,title:l}=r,s=void 0===r.rel?"noreferrer":r.rel,o=(0,n.$getSelection)();if(null===o||!(0,n.$isRangeSelection)(o)&&!(0,n.$isNodeSelection)(o))return;if((0,n.$isNodeSelection)(o)){let e=o.getNodes();if(0===e.length)return;return void e.forEach(e=>{if(null===t){let t=(0,n.$findMatchingParent)(e,e=>!g(e)&&d(e));t&&(t.insertBefore(e),0===t.getChildren().length&&t.remove())}else{let r=(0,n.$findMatchingParent)(e,e=>!g(e)&&d(e));if(r)r.setURL(t),void 0!==i&&r.setTarget(i),void 0!==s&&r.setRel(s);else{let r=a(t,{rel:s,target:i});e.insertBefore(r),r.append(e)}}})}let c=o.extract();if(null===t){let e=new Set;return void c.forEach(t=>{let r=t.getParent();if(d(r)&&!g(r)){let t=r.getKey();if(e.has(t))return;!function(e,t){let r=new Set(t.filter(t=>e.isParentOf(t)).map(e=>e.getKey())),n=e.getChildren(),i=n.filter(e=>r.has(e.getKey()));if(i.length===n.length)return n.forEach(t=>e.insertBefore(t)),e.remove();let l=n.findIndex(e=>r.has(e.getKey())),s=n.findLastIndex(e=>r.has(e.getKey())),o=s===n.length-1;if(0===l)i.forEach(t=>e.insertBefore(t));else if(o)for(let t=i.length-1;t>=0;t--)e.insertAfter(i[t]);else{for(let t=i.length-1;t>=0;t--)e.insertAfter(i[t]);let t=n.slice(s+1);if(t.length>0){let r=a(e.getURL(),{rel:e.getRel(),target:e.getTarget(),title:e.getTitle()});i[i.length-1].insertAfter(r),t.forEach(e=>r.append(e))}}}(r,c),e.add(t)}})}let u=new Set,h=e=>{u.has(e.getKey())||(u.add(e.getKey()),e.setURL(t),void 0!==i&&e.setTarget(i),void 0!==s&&e.setRel(s),void 0!==l&&e.setTitle(l))};if(1===c.length){let e=c[0],t=(0,n.$findMatchingParent)(e,d);if(null!==t)return h(t)}!function(e){let t=(0,n.$getSelection)();if(!(0,n.$isRangeSelection)(t))return e();let r=(0,n.$normalizeSelection__EXPERIMENTAL)(t),i=r.isBackward(),l=m(r.anchor,i?-1:0),s=m(r.focus,i?0:-1);if(e(),l||s){let e=(0,n.$getSelection)();if((0,n.$isRangeSelection)(e)){let t=e.clone();if(l){let e=l.getParent();e&&t.anchor.set(e.getKey(),l.getIndexWithinParent()+ +!!i,"element")}if(s){let e=s.getParent();e&&t.focus.set(e.getKey(),s.getIndexWithinParent()+ +!i,"element")}(0,n.$setSelection)((0,n.$normalizeSelection__EXPERIMENTAL)(t))}}}(()=>{let e=null;for(let r of c){if(!r.isAttached())continue;let o=(0,n.$findMatchingParent)(r,d);if(o){h(o);continue}if((0,n.$isElementNode)(r)){if(!r.isInline())continue;if(d(r)){if(!(g(r)||null!==e&&e.getParentOrThrow().isParentOf(r))){h(r),e=r;continue}for(let e of r.getChildren())r.insertBefore(e);r.remove();continue}}let c=r.getPreviousSibling();d(c)&&c.is(e)?c.append(r):(e=a(t,{rel:s,target:i,title:l}),r.insertAfter(e),e.append(r))}})}let p=/^\+?[0-9\s()-]{5,}$/;function x(e){return e.match(/^[a-z][a-z0-9+.-]*:/i)||e.match(/^[/#.]/)?e:e.includes("@")?`mailto:${e}`:p.test(e)?`tel:${e}`:`https://${e}`}function _(e,t){return(0,r.mergeRegister)((0,i.effect)(()=>e.registerCommand(h,e=>{let r=t.validateUrl.peek(),n=t.attributes.peek();if(null===e)return f(null),!0;if("string"==typeof e)return!(void 0!==r&&!r(e))&&(f(e,n),!0);{let{url:t,target:r,rel:i,title:l}=e;return f(t,{...n,rel:i,target:r,title:l}),!0}},n.COMMAND_PRIORITY_LOW)),(0,i.effect)(()=>{let i=t.validateUrl.value;if(!i)return;let l=t.attributes.value;return e.registerCommand(n.PASTE_COMMAND,t=>{let s=(0,n.$getSelection)();if(!(0,n.$isRangeSelection)(s)||s.isCollapsed()||!(0,r.objectKlassEquals)(t,ClipboardEvent)||null===t.clipboardData)return!1;let o=t.clipboardData.getData("text");return!!i(o)&&!s.getNodes().some(e=>(0,n.$isElementNode)(e))&&(e.dispatchCommand(h,{...l,url:o}),t.preventDefault(),!0)},n.COMMAND_PRIORITY_LOW)}))}let v=(0,n.defineExtension)({build:(e,t,r)=>(0,i.namedSignals)(t),config:{attributes:void 0,validateUrl:void 0},mergeConfig(e,t){let r=(0,n.shallowMergeConfig)(e,t);return e.attributes&&(r.attributes=(0,n.shallowMergeConfig)(e.attributes,r.attributes)),r},name:"@lexical/link/Link",nodes:[s],register:(e,t,r)=>_(e,r.getOutput())});function N(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r=>{let i=r.target;if(!(0,n.isDOMNode)(i))return;let l=(0,n.getNearestEditorFromDOMNode)(i);if(null===l)return;let s=null,o=null;if(l.update(()=>{let e=(0,n.$getNearestNodeFromDOMNode)(i);if(null!==e){let r=(0,n.$findMatchingParent)(e,n.$isElementNode);if(!t.disabled.peek())if(d(r))s=r.sanitizeUrl(r.getURL()),o=r.getTarget();else{let e=function(e,t){let r=e;for(;null!=r;){if(t(r))return r;r=r.parentNode}return null}(i,n.isHTMLAnchorElement);null!==e&&(s=e.href,o=e.target)}}}),null===s||""===s)return;let a=e.getEditorState().read(n.$getSelection);if((0,n.$isRangeSelection)(a)&&!a.isCollapsed())return void r.preventDefault();let c="auxclick"===r.type&&1===r.button;window.open(s,t.newTab.peek()||c||r.metaKey||r.ctrlKey||"_blank"===o?"_blank":"_self"),r.preventDefault()},l=e=>{1===e.button&&i(e)};return e.registerRootListener((e,t)=>{null!==t&&(t.removeEventListener("click",i),t.removeEventListener("mouseup",l)),null!==e&&(e.addEventListener("click",i,r),e.addEventListener("mouseup",l,r))})}function y(e,t){for(let r=0;r<t.length;r++){let n=t[r](e);if(n)return n}return null}(0,n.defineExtension)({build:(e,t,r)=>(0,i.namedSignals)(t),config:(0,n.safeCast)({disabled:!1,newTab:!1}),dependencies:[v],name:"@lexical/link/ClickableLink",register:(e,t,r)=>N(e,r.getOutput())});let C=/[.,;\s]/;function b(e){return C.test(e)}function k(e){return b(e[e.length-1])}function T(e){let t=e.getPreviousSibling();return(0,n.$isElementNode)(t)&&(t=t.getLastDescendant()),null===t||(0,n.$isLineBreakNode)(t)||(0,n.$isTextNode)(t)&&k(t.getTextContent())}function S(e){let t=e.getNextSibling();return(0,n.$isElementNode)(t)&&(t=t.getFirstDescendant()),null===t||(0,n.$isLineBreakNode)(t)||(0,n.$isTextNode)(t)&&b(t.getTextContent()[0])}function E(e,t,r){let i=e.getChildren(),l=i.length;for(let t=0;t<l;t++){let l=i[t];if(!(0,n.$isTextNode)(l)||!l.isSimpleText())return w(e),void r(null,e.getURL())}let s=e.getTextContent(),o=y(s,t);if(null===o||o.text!==s||!T(e)||!S(e))return w(e),void r(null,e.getURL());let a=e.getURL();if(a!==o.url&&(e.setURL(o.url),r(o.url,a)),o.attributes){let t=e.getRel();t!==o.attributes.rel&&(e.setRel(o.attributes.rel||null),r(o.attributes.rel||null,t));let n=e.getTarget();n!==o.attributes.target&&(e.setTarget(o.attributes.target||null),r(o.attributes.target||null,n))}}function w(e){let t=e.getChildren();for(let r=t.length-1;r>=0;r--)e.insertAfter(t[r]);return e.remove(),t.map(e=>e.getLatest())}let O={changeHandlers:[],matchers:[]};(0,n.defineExtension)({config:O,dependencies:[v],mergeConfig(e,t){let r=(0,n.shallowMergeConfig)(e,t);for(let n of["matchers","changeHandlers"]){let i=t[n];Array.isArray(i)&&(r[n]=[...e[n],...i])}return r},name:"@lexical/link/AutoLink",register:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,{matchers:i,changeHandlers:l}=t,s=(e,t)=>{for(let r of l)r(e,t)};return(0,r.mergeRegister)(e.registerNodeTransform(n.TextNode,e=>{let t=e.getParentOrThrow(),r=e.getPreviousSibling();if(g(t)&&!t.getIsUnlinked())E(t,i,s);else if(!d(t)){var l,o,a;let t,d,c;e.isSimpleText()&&(b(e.getTextContent()[0])||!g(r))&&function(e,t,r){let i=[...e],l=i.map(e=>e.getTextContent()).join(""),s,o=l,a=0;for(;(s=y(o,t))&&null!==s;){var d,c,g;let e=s.index,t=e+s.length;if(d=a+e,c=a+t,g=i,(d>0?b(l[d-1]):T(g[0]))&&(c<l.length?b(l[c]):S(g[g.length-1]))){let[l,,o,d]=function(e,t,r){let n=[],i=[],l=[],s=0,o=0,a=[...e];for(;a.length>0;){let e=a[0],d=e.getTextContent().length,c=o;o+d<=t?(n.push(e),s+=d):c>=r?l.push(e):i.push(e),o+=d,a.shift()}return[s,n,i,l]}(i,a+e,a+t),c=function(e,t,r,i){let l=u(i.url,i.attributes);if(1===e.length){let s,o=e[0];0===t?[s,o]=o.splitText(r):[,s,o]=o.splitText(t,r);let a=(0,n.$createTextNode)(i.text);return a.setFormat(s.getFormat()),a.setDetail(s.getDetail()),a.setStyle(s.getStyle()),l.append(a),s.replace(l),o}if(e.length>1){let i,s=e[0],o,a=s.getTextContent().length;0===t?o=s:[,o]=s.splitText(t);let d=[];for(let t=1;t<e.length;t++){let n=e[t],l=n.getTextContent().length,s=a;if(s<r)if(a+l<=r)d.push(n);else{let[e,t]=n.splitText(r-s);d.push(e),i=t}a+=l}let c=(0,n.$getSelection)(),u=c?c.getNodes().find(n.$isTextNode):void 0,g=(0,n.$createTextNode)(o.getTextContent());return g.setFormat(o.getFormat()),g.setDetail(o.getDetail()),g.setStyle(o.getStyle()),l.append(g,...d),u&&u===o&&((0,n.$isRangeSelection)(c)?g.select(c.anchor.offset,c.focus.offset):(0,n.$isNodeSelection)(c)&&g.select(0,g.getTextContent().length)),o.replace(l),i}}(o,a+e-l,a+t-l,s);i=c?[c,...d]:d,r(s.url,null),a=0}else a+=t;o=o.substring(t)}}(function(e){let t=[e],r=e.getNextSibling();for(;null!==r&&(0,n.$isTextNode)(r)&&r.isSimpleText()&&(t.push(r),!/[\s]/.test(r.getTextContent()));)r=r.getNextSibling();return t}(e),i,s);l=e,o=i,a=s,t=l.getPreviousSibling(),d=l.getNextSibling(),c=l.getTextContent(),!g(t)||t.getIsUnlinked()||b(c[0])&&!(t.isEmailURI()?/^\.[a-zA-Z]{2,}/.test(c):/^\.[a-zA-Z0-9]{1,}/.test(c))||(t.append(l),E(t,o,a),a(null,t.getURL())),!g(d)||d.getIsUnlinked()||k(c)||(w(d),E(d,o,a),a(null,d.getURL()))}}),e.registerCommand(h,e=>{let t=(0,n.$getSelection)();return null===e&&!!(0,n.$isRangeSelection)(t)&&(t.extract().forEach(e=>{let t=e.getParent();g(t)&&(t.setIsUnlinked(!t.getIsUnlinked()),t.markDirty())}),!1)},n.COMMAND_PRIORITY_LOW))}});var L=n,M=e.i(824740);function R(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;for(let t of(l.append("code",e),r))l.append("v",t);throw i.search=l.toString(),Error(`Minified Lexical error #${e}; visit ${i.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function P(e){let t=1,r=e.getParent();for(;null!=r;){if(V(r)){let e=r.getParent();if(et(e)){t++,r=e.getParent();continue}R(40)}break}return t}function $(e){let t=e.getParent();et(t)||R(40);let r=t;for(;null!==r;)et(r=r.getParent())&&(t=r);return t}function A(e){return V(e)&&et(e.getFirstChild())}function j(e){return J().append(e)}function I(e,t){return V(e)&&(0===t.length||1===t.length&&e.is(t[0])&&0===e.getChildrenSize())}function F(e){let t=(0,L.$getSelection)();if(null!==t){let r=t.getNodes();if((0,L.$isRangeSelection)(t)){let n=t.getStartEndPoints();null===n&&R(143);let[i]=n,l=i.getNode(),s=l.getParent();if((0,L.$isRootOrShadowRoot)(l)){let e=l.getFirstChild();if(e)r=e.selectStart().getNodes();else{let e=(0,L.$createParagraphNode)();l.append(e),r=e.select().getNodes()}}else if(I(l,r)){let t=ee(e);if((0,L.$isRootOrShadowRoot)(s)){l.replace(t);let e=J();(0,L.$isElementNode)(l)&&(e.setFormat(l.getFormatType()),e.setIndent(l.getIndent())),t.append(e)}else if(V(l)){let e=l.getParentOrThrow();D(t,e.getChildren()),e.replace(t)}return}}let n=new Set;for(let t=0;t<r.length;t++){let i=r[t];if((0,L.$isElementNode)(i)&&i.isEmpty()&&!V(i)&&!n.has(i.getKey())){U(i,e);continue}let l=(0,L.$isLeafNode)(i)?i.getParent():V(i)&&i.isEmpty()?i:null;for(;null!=l;){let t=l.getKey();if(et(l)){if(!n.has(t)){let r=ee(e);D(r,l.getChildren()),l.replace(r),n.add(t)}break}{let r=l.getParent();if((0,L.$isRootOrShadowRoot)(r)&&!n.has(t)){n.add(t),U(l,e);break}l=r}}}}}function D(e,t){e.splice(e.getChildrenSize(),0,t)}function U(e,t){let r;if(et(e))return e;let n=e.getPreviousSibling(),i=e.getNextSibling(),l=J();if(D(l,e.getChildren()),et(n)&&t===n.getListType())n.append(l),et(i)&&t===i.getListType()&&(D(n,i.getChildren()),i.remove()),r=n;else if(et(i)&&t===i.getListType())i.getFirstChildOrThrow().insertBefore(l),r=i;else{let n=ee(t);n.append(l),e.replace(n),r=n}return l.setFormat(e.getFormatType()),l.setIndent(e.getIndent()),e.remove(),r}function W(e,t){let r=e.getLastChild(),n=t.getFirstChild();r&&n&&A(r)&&A(n)&&(W(r.getFirstChild(),n.getFirstChild()),n.remove());let i=t.getChildren();i.length>0&&e.append(...i),t.remove()}function B(e){let t="check"!==e.getListType(),r=e.getStart();for(let n of e.getChildren())V(n)&&(n.getValue()!==r&&n.setValue(r),t&&null!=n.getLatest().__checked&&n.setChecked(void 0),et(n.getFirstChild())||r++)}function K(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[];for(let e of t)if(e&&"string"==typeof e)for(let[t]of e.matchAll(/\S+/g))n.push(t);return n}class z extends L.ElementNode{__value;__checked;$config(){return this.config("listitem",{$transform:e=>{if(null==e.__checked)return;let t=e.getParent();et(t)&&"check"!==t.getListType()&&null!=e.getChecked()&&e.setChecked(void 0)},extends:L.ElementNode,importDOM:(0,L.buildImportMap)({li:()=>({conversion:H,priority:0})})})}constructor(e=1,t,r){super(r),this.__value=void 0===e?1:e,this.__checked=t}afterCloneFrom(e){super.afterCloneFrom(e),this.__value=e.__value,this.__checked=e.__checked}createDOM(e){let t=document.createElement("li");return this.updateListItemDOM(null,t,e),t}updateListItemDOM(e,t,n){let i;!et(i=this.getParent())||"check"!==i.getListType()||et(this.getFirstChild())?(t.removeAttribute("role"),t.removeAttribute("tabIndex"),t.removeAttribute("aria-checked")):(t.setAttribute("role","checkbox"),t.setAttribute("tabIndex","-1"),e&&this.__checked===e.__checked||t.setAttribute("aria-checked",this.getChecked()?"true":"false")),t.value=this.__value,function(e,t,n){let i,l=[],s=[],o=t.list,a=o?o.listitem:void 0;if(o&&o.nested&&(i=o.nested.listitem),void 0!==a&&l.push(...K(a)),o){let e=n.getParent(),t=et(e)&&"check"===e.getListType(),r=n.getChecked();t&&!r||s.push(o.listitemUnchecked),t&&r||s.push(o.listitemChecked),t&&l.push(r?o.listitemChecked:o.listitemUnchecked)}if(void 0!==i){let e=K(i);n.getChildren().some(e=>et(e))?l.push(...e):s.push(...e)}s.length>0&&(0,r.removeClassNamesFromElement)(e,...s),l.length>0&&(0,r.addClassNamesToElement)(e,...l)}(t,n.theme,this);let l=e?e.__style:"",s=this.__style;l!==s&&(""===s?t.removeAttribute("style"):t.style.cssText=s),function(e,t,r){let n=(0,M.getStyleObjectFromCSS)(t.__textStyle);for(let t in n)e.style.setProperty(`--listitem-marker-${t}`,n[t]);if(r)for(let t in(0,M.getStyleObjectFromCSS)(r.__textStyle))t in n||e.style.removeProperty(`--listitem-marker-${t}`)}(t,this,e)}updateDOM(e,t,r){return this.updateListItemDOM(e,t,r),!1}updateFromJSON(e){return super.updateFromJSON(e).setValue(e.value).setChecked(e.checked)}exportDOM(e){let t=this.createDOM(e._config),r=this.getFormatType();r&&(t.style.textAlign=r);let n=this.getDirection();return n&&(t.dir=n),{element:t}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(let e=0;e<t.length;e++){let r=t[e];if((0,L.$isElementNode)(r)&&this.canMergeWith(r)){let e=r.getChildren();this.append(...e),r.remove()}else super.append(r)}return this}replace(e,t){if(V(e))return super.replace(e);this.setIndent(0);let r=this.getParentOrThrow();if(!et(r))return e;if(r.__first===this.getKey())r.insertBefore(e);else if(r.__last===this.getKey())r.insertAfter(e);else{let t=ee(r.getListType()),n=this.getNextSibling();for(;n;){let e=n;n=n.getNextSibling(),t.append(e)}r.insertAfter(e),e.insertAfter(t)}return t&&((0,L.$isElementNode)(e)||R(139),this.getChildren().forEach(t=>{e.append(t)})),this.remove(),0===r.getChildrenSize()&&r.remove(),e}insertAfter(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=this.getParentOrThrow();if(et(r)||R(39),V(e))return super.insertAfter(e,t);let n=this.getNextSiblings();if(r.insertAfter(e,t),0!==n.length){let i=ee(r.getListType());n.forEach(e=>i.append(e)),e.insertAfter(i,t)}return e}remove(e){let t=this.getPreviousSibling(),r=this.getNextSibling();super.remove(e),t&&r&&A(t)&&A(r)&&(W(t.getFirstChild(),r.getFirstChild()),r.remove())}insertNewAfter(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=J().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(r,t),r}collapseAtStart(e){let t=(0,L.$createParagraphNode)();this.getChildren().forEach(e=>t.append(e));let r=this.getParentOrThrow(),n=r.getParentOrThrow(),i=V(n);if(1===r.getChildrenSize())if(i)r.remove(),n.select();else{r.insertBefore(t),r.remove();let n=e.anchor,i=e.focus,l=t.getKey();"element"===n.type&&n.getNode().is(this)&&n.set(l,n.offset,"element"),"element"===i.type&&i.getNode().is(this)&&i.set(l,i.offset,"element")}else r.insertBefore(t),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(e){let t=this.getWritable();return t.__value=e,t}getChecked(){let e,t=this.getLatest(),r=this.getParent();return et(r)&&(e=r.getListType()),"check"===e?!!t.__checked:void 0}setChecked(e){let t=this.getWritable();return t.__checked=e,t}toggleChecked(){let e=this.getWritable();return e.setChecked(!e.__checked)}getIndent(){let e=this.getParent();if(null===e||!this.isAttached())return this.getLatest().__indent;let t=e.getParentOrThrow(),r=0;for(;V(t);)t=t.getParentOrThrow().getParentOrThrow(),r++;return r}setIndent(e){"number"!=typeof e&&R(117),(e=Math.floor(e))>=0||R(199);let t=this.getIndent();for(;t!==e;)t<e?(function(e){let t=new Set;if(A(e)||t.has(e.getKey()))return;let r=e.getParent(),n=e.getNextSibling(),i=e.getPreviousSibling();if(A(n)&&A(i)){let r=i.getFirstChild();if(et(r)){r.append(e);let i=n.getFirstChild();et(i)&&(D(r,i.getChildren()),n.remove(),t.add(n.getKey()))}}else if(A(n)){let t=n.getFirstChild();if(et(t)){let r=t.getFirstChild();null!==r&&r.insertBefore(e)}}else if(A(i)){let t=i.getFirstChild();et(t)&&t.append(e)}else if(et(r)){let t=J().setTextFormat(e.getTextFormat()).setTextStyle(e.getTextStyle()),l=ee(r.getListType()).setTextFormat(r.getTextFormat()).setTextStyle(r.getTextStyle());t.append(l),l.append(e),i?i.insertAfter(t):n?n.insertBefore(t):r.append(t)}}(this),t++):(function(e){if(A(e))return;let t=e.getParent(),r=t?t.getParent():void 0;if(et(r?r.getParent():void 0)&&V(r)&&et(t)){let n=t?t.getFirstChild():void 0,i=t?t.getLastChild():void 0;if(e.is(n))r.insertBefore(e),t.isEmpty()&&r.remove();else if(e.is(i))r.insertAfter(e),t.isEmpty()&&r.remove();else{let n=t.getListType(),i=J(),l=ee(n);i.append(l),e.getPreviousSiblings().forEach(e=>l.append(e));let s=J(),o=ee(n);s.append(o),D(o,e.getNextSiblings()),r.insertBefore(i),r.insertAfter(s),r.replace(e)}}}(this),t--);return this}canInsertAfter(e){return V(e)}canReplaceWith(e){return V(e)}canMergeWith(e){return V(e)||(0,L.$isParagraphNode)(e)}extractWithChild(e,t){if(!(0,L.$isRangeSelection)(t))return!1;let r=t.anchor.getNode(),n=t.focus.getNode();return this.isParentOf(r)&&this.isParentOf(n)&&this.getTextContent().length===t.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return ee("bullet")}canMergeWhenEmpty(){return!0}}function H(e){if(e.classList.contains("task-list-item")){for(let t of e.children)if("INPUT"===t.tagName)return Y(t)}if(e.classList.contains("joplin-checkbox")){for(let t of e.children)if(t.classList.contains("checkbox-wrapper")&&t.children.length>0&&"INPUT"===t.children[0].tagName)return Y(t.children[0])}let t=e.getAttribute("aria-checked");return{node:J("true"===t||"false"!==t&&void 0)}}function Y(e){return"checkbox"!==e.getAttribute("type")?{node:null}:{node:J(e.hasAttribute("checked"))}}function J(e){return(0,L.$applyNodeReplacement)(new z(void 0,e))}function V(e){return e instanceof z}class X extends L.ElementNode{__tag;__start;__listType;$config(){return this.config("list",{$transform:e=>{let t;et(t=e.getNextSibling())&&e.getListType()===t.getListType()&&W(e,t),B(e)},extends:L.ElementNode,importDOM:(0,L.buildImportMap)({ol:()=>({conversion:q,priority:0}),ul:()=>({conversion:q,priority:0})})})}constructor(e="number",t=1,r){super(r);const n=Q[e]||e;this.__listType=n,this.__tag="number"===n?"ol":"ul",this.__start=t}afterCloneFrom(e){super.afterCloneFrom(e),this.__listType=e.__listType,this.__tag=e.__tag,this.__start=e.__start}getTag(){return this.getLatest().__tag}setListType(e){let t=this.getWritable();return t.__listType=e,t.__tag="number"===e?"ol":"ul",t}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(e){let t=this.getWritable();return t.__start=e,t}createDOM(e,t){let r=this.__tag,n=document.createElement(r);return 1!==this.__start&&n.setAttribute("start",String(this.__start)),n.__lexicalListType=this.__listType,Z(n,e.theme,this),n}updateDOM(e,t,r){return e.__tag!==this.__tag||e.__listType!==this.__listType||(Z(t,r.theme,this),!1)}updateFromJSON(e){return super.updateFromJSON(e).setListType(e.listType).setStart(e.start)}exportDOM(e){let t=this.createDOM(e._config,e);return(0,L.isHTMLElement)(t)&&(1!==this.__start&&t.setAttribute("start",String(this.__start)),"check"===this.__listType&&t.setAttribute("__lexicalListType","check")),{element:t}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(e,t,r){let n=r;for(let e=0;e<r.length;e++){let t=r[e];V(t)||(n===r&&(n=[...r]),n[e]=J().append(!(0,L.$isElementNode)(t)||et(t)||t.isInline()?t:(0,L.$createTextNode)(t.getTextContent())))}return super.splice(e,t,n)}extractWithChild(e){return V(e)}}function Z(e,t,n){let i=[],l=[],s=t.list;if(void 0!==s){let e,t=s[`${n.__tag}Depth`]||[],r=P(n)-1,o=r%t.length,a=t[o],d=s[n.__tag],c=s.nested,u=s.checklist;if(void 0!==c&&c.list&&(e=c.list),void 0!==d&&i.push(d),void 0!==u&&"check"===n.__listType&&i.push(u),void 0!==a){i.push(...K(a));for(let e=0;e<t.length;e++)e!==o&&l.push(n.__tag+e)}if(void 0!==e){let t=K(e);r>1?i.push(...t):l.push(...t)}}l.length>0&&(0,r.removeClassNamesFromElement)(e,...l),i.length>0&&(0,r.addClassNamesToElement)(e,...i)}function G(e){let t=[];for(let r=0;r<e.length;r++){let n=e[r];if(V(n)){t.push(n);let e=n.getChildren();e.length>1&&e.forEach(e=>{et(e)&&t.push(j(e))})}else t.push(j(n))}return t}function q(e){let t=e.nodeName.toLowerCase(),r=null;return"ol"===t?r=ee("number",e.start):"ul"===t&&(r=!function(e){if("check"===e.getAttribute("__lexicallisttype")||e.classList.contains("contains-task-list")||"1"===e.getAttribute("data-is-checklist"))return!0;for(let t of e.childNodes)if((0,L.isHTMLElement)(t)&&t.hasAttribute("aria-checked"))return!0;return!1}(e)?ee("bullet"):ee("check")),{after:G,node:r}}let Q={ol:"number",ul:"bullet"};function ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"number",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,L.$applyNodeReplacement)(new X(e,t))}function et(e){return e instanceof X}let er=(0,L.createCommand)("INSERT_CHECK_LIST_COMMAND");function en(e,t){let n=e.target;if(!(0,L.isHTMLElement)(n))return;let i=n.firstChild;if((0,L.isHTMLElement)(i)&&("UL"===i.tagName||"OL"===i.tagName))return;let l=n.parentNode;if(!l||"check"!==l.__lexicalListType)return;let s=n.getBoundingClientRect(),o=(0,r.calculateZoomLevel)(n),a=e.clientX/o,d=parseFloat((window.getComputedStyle?window.getComputedStyle(n,"::before"):{width:"0px"}).width),c=32*("touch"===e.pointerType);("rtl"===n.dir?a<s.right+c&&a>s.right-d-c:a>s.left-c&&a<s.left+d+c)&&t()}function ei(e){en(e,()=>{if((0,L.isHTMLElement)(e.target)){let t=e.target,r=(0,L.getNearestEditorFromDOMNode)(t);null!=r&&r.isEditable()&&r.update(()=>{let e=(0,L.$getNearestNodeFromDOMNode)(t);V(e)&&(t.focus(),e.toggleChecked())})}})}function el(e){en(e,()=>{e.preventDefault()})}function es(){let e=document.activeElement;return(0,L.isHTMLElement)(e)&&"LI"===e.tagName&&null!=e.parentNode&&"check"===e.parentNode.__lexicalListType?e:null}function eo(e,t,r){let n=es();return null!=n&&t.update(()=>{let i=(0,L.$getNearestNodeFromDOMNode)(n);if(!V(i))return;let l=function(e,t){let r=t?e.getPreviousSibling():e.getNextSibling(),n=e;for(;null==r&&V(n);)null!=(n=n.getParentOrThrow().getParent())&&(r=t?n.getPreviousSibling():n.getNextSibling());for(;V(r);){let e=t?r.getLastChild():r.getFirstChild();if(!et(e))return r;r=t?e.getLastChild():e.getFirstChild()}return null}(i,r);if(null!=l){l.selectStart();let r=t.getElementByKey(l.__key);null!=r&&(e.preventDefault(),setTimeout(()=>{r.focus()},0))}}),!1}let ea=(0,L.createCommand)("UPDATE_LIST_START_COMMAND"),ed=(0,L.createCommand)("INSERT_UNORDERED_LIST_COMMAND"),ec=(0,L.createCommand)("INSERT_ORDERED_LIST_COMMAND"),eu=(0,L.createCommand)("REMOVE_LIST_COMMAND");function eg(e){return(0,r.mergeRegister)(e.registerCommand(ec,()=>(F("number"),!0),L.COMMAND_PRIORITY_LOW),e.registerCommand(ea,e=>{let{listNodeKey:t,newStart:r}=e,n=(0,L.$getNodeByKey)(t);return!!et(n)&&("number"===n.getListType()&&(n.setStart(r),B(n)),!0)},L.COMMAND_PRIORITY_LOW),e.registerCommand(ed,()=>(F("bullet"),!0),L.COMMAND_PRIORITY_LOW),e.registerCommand(eu,()=>((function(){let e=(0,L.$getSelection)();if((0,L.$isRangeSelection)(e)){let t=new Set,n=e.getNodes(),i=e.anchor.getNode();if(I(i,n))t.add($(i));else for(let e=0;e<n.length;e++){let i=n[e];if((0,L.$isLeafNode)(i)){let e=(0,r.$getNearestNodeOfType)(i,z);null!=e&&t.add($(e))}}for(let r of t){let t=r;for(let n of function e(t){let r=[],n=t.getChildren().filter(V);for(let t=0;t<n.length;t++){let i=n[t],l=i.getFirstChild();et(l)?r=r.concat(e(l)):r.push(i)}return r}(r)){let r=(0,L.$createParagraphNode)().setTextStyle(e.style).setTextFormat(e.format);D(r,n.getChildren()),t.insertAfter(r),t=r,n.__key===e.anchor.key&&(0,L.$setPointFromCaret)(e.anchor,(0,L.$normalizeCaret)((0,L.$getChildCaret)(r,"next"))),n.__key===e.focus.key&&(0,L.$setPointFromCaret)(e.focus,(0,L.$normalizeCaret)((0,L.$getChildCaret)(r,"next"))),n.remove()}r.remove()}}})(),!0),L.COMMAND_PRIORITY_LOW),e.registerCommand(L.INSERT_PARAGRAPH_COMMAND,()=>(function(){let e,t=(0,L.$getSelection)();if(!(0,L.$isRangeSelection)(t)||!t.isCollapsed())return!1;let r=t.anchor.getNode();if(!V(r)||0!==r.getChildrenSize())return!1;let n=$(r),i=r.getParent();et(i)||R(40);let l=i.getParent();if((0,L.$isRootOrShadowRoot)(l))e=(0,L.$createParagraphNode)(),n.insertAfter(e);else{if(!V(l))return!1;e=J(),l.insertAfter(e)}e.setTextStyle(t.style).setTextFormat(t.format).select();let s=r.getNextSiblings();if(s.length>0){let t=ee(i.getListType());if(V(e)){let r=J();r.append(t),e.insertAfter(r)}else e.insertAfter(t);t.append(...s)}return function(e){let t=e;for(;null==t.getNextSibling()&&null==t.getPreviousSibling();){let e=t.getParent();if(null==e||!V(e)&&!et(e))break;t=e}t.remove()}(r),!0})(),L.COMMAND_PRIORITY_LOW),e.registerNodeTransform(z,e=>{let t=e.getFirstChild();if(t){if((0,L.$isTextNode)(t)){let r=t.getStyle(),n=t.getFormat();e.getTextStyle()!==r&&e.setTextStyle(r),e.getTextFormat()!==n&&e.setTextFormat(n)}}else{let t=(0,L.$getSelection)();(0,L.$isRangeSelection)(t)&&(t.style!==e.getTextStyle()||t.format!==e.getTextFormat())&&t.isCollapsed()&&e.is(t.anchor.getNode())&&e.setTextStyle(t.style).setTextFormat(t.format)}}),e.registerNodeTransform(L.TextNode,e=>{let t=e.getParent();if(V(t)&&e.is(t.getFirstChild())){let r=e.getStyle(),n=e.getFormat();r===t.getTextStyle()&&n===t.getTextFormat()||t.setTextStyle(r).setTextFormat(n)}}))}function eh(e){let t=e=>{let t=e.getParent();if(et(e.getFirstChild())||!et(t))return;let r=(0,L.$findMatchingParent)(e,e=>V(e)&&et(e.getParent())&&V(e.getPreviousSibling()));if(null===r&&e.getIndent()>0)e.setIndent(0);else if(V(r)){let n=r.getPreviousSibling();if(V(n)){let r=(function(e){let t=e,r=t.getFirstChild();for(;et(r);){let e=r.getLastChild();if(!V(e))break;r=(t=e).getFirstChild()}return t})(n).getParent();if(et(r)){let n=P(r);n+1<P(t)&&e.setIndent(n)}}}};return e.registerNodeTransform(X,e=>{let r=[e];for(;r.length>0;){let e=r.shift();if(et(e)){for(let n of e.getChildren())if(V(n)){t(n);let e=n.getFirstChild();et(e)&&r.push(e)}}}})}let em=(0,L.defineExtension)({build:(e,t,r)=>(0,i.namedSignals)(t),config:(0,L.safeCast)({hasStrictIndent:!1}),name:"@lexical/list/List",nodes:[X,z],register(e,t,n){let l=n.getOutput();return(0,r.mergeRegister)(eg(e),(0,i.effect)(()=>l.hasStrictIndent.value?eh(e):void 0))}});(0,L.defineExtension)({dependencies:[em],name:"@lexical/list/CheckList",register:function(e){return(0,r.mergeRegister)(e.registerCommand(er,()=>(F("check"),!0),L.COMMAND_PRIORITY_LOW),e.registerCommand(L.KEY_ARROW_DOWN_COMMAND,t=>eo(t,e,!1),L.COMMAND_PRIORITY_LOW),e.registerCommand(L.KEY_ARROW_UP_COMMAND,t=>eo(t,e,!0),L.COMMAND_PRIORITY_LOW),e.registerCommand(L.KEY_ESCAPE_COMMAND,()=>{if(null!=es()){let t=e.getRootElement();return null!=t&&t.focus(),!0}return!1},L.COMMAND_PRIORITY_LOW),e.registerCommand(L.KEY_SPACE_COMMAND,t=>{let r=es();return!(null==r||!e.isEditable())&&(e.update(()=>{let e=(0,L.$getNearestNodeFromDOMNode)(r);V(e)&&(t.preventDefault(),e.toggleChecked())}),!0)},L.COMMAND_PRIORITY_LOW),e.registerCommand(L.KEY_ARROW_LEFT_COMMAND,t=>e.getEditorState().read(()=>{let r=(0,L.$getSelection)();if((0,L.$isRangeSelection)(r)&&r.isCollapsed()){let{anchor:n}=r,i="element"===n.type;if(i||0===n.offset){let r=n.getNode(),l=(0,L.$findMatchingParent)(r,e=>(0,L.$isElementNode)(e)&&!e.isInline());if(V(l)){let n=l.getParent();if(et(n)&&"check"===n.getListType()&&(i||l.getFirstDescendant()===r)){let r=e.getElementByKey(l.__key);if(null!=r&&document.activeElement!==r)return r.focus(),t.preventDefault(),!0}}}}return!1}),L.COMMAND_PRIORITY_LOW),e.registerRootListener((e,t)=>{null!==e&&(e.addEventListener("click",ei),e.addEventListener("pointerdown",el)),null!==t&&(t.removeEventListener("click",ei),t.removeEventListener("pointerdown",el))}))}});var ef=e.i(474131),ep=e.i(268255),ex=e.i(639751),e_=e.i(763989);function ev(e){let t=(0,ep.useContext)(ek);if(!t)throw Error("Missing NoteEditorContext.Provider in the tree");return(0,ex.useStore)(t,e)}let eN=()=>(0,ep.useContext)(ek),ey={paragraph:"note-editor-theme_paragraph",list:{ul:"note-editor-theme_list-ul",listitem:"note-editor-theme_list-li"},link:"note-editor-theme_link",text:{italic:"note-editor-theme_text-italic",strikethrough:"note-editor-theme_text-strikethrough"}},eC=(0,ep.createContext)(null),eb=(0,ep.memo)(e=>{let{value:r,children:n,editable:i=!0}=e,l=(0,ep.useRef)(void 0);l.current||(l.current=(0,e_.createStore)(e=>({linkAnchorElement:null,setLinkAnchorElement:t=>{t?setTimeout(()=>{let t=window.getSelection();if(t?.focusNode){let r=t.focusNode.parentElement;e(()=>({linkAnchorElement:r}))}}):e(()=>({linkAnchorElement:null}))},linkOperatorShow:!1,setLinkOperatorShow:t=>e(()=>({linkOperatorShow:t})),selectedIsBold:!1,setSelectedIsBold:t=>e(()=>({selectedIsBold:t})),selectedIsItalic:!1,setSelectedIsItalic:t=>e(()=>({selectedIsItalic:t})),selectedIsStrikeThrough:!1,setSelectedIsStrikeThrough:t=>e(()=>({selectedIsStrikeThrough:t})),selectedLinkUrl:"",setSelectedLinkUrl:t=>e(()=>({selectedLinkUrl:t})),selectedIsLink:!1,setSelectedIsLink:t=>e(()=>({selectedIsLink:t})),selectedIsBullet:!1,setSelectedIsBullet:t=>e(()=>({selectedIsBullet:t}))})));let o=null;try{o=JSON.parse(r)}catch{}let a={namespace:"note-editor",nodes:[s,X,z],editorState:o?.root.children.length?JSON.stringify(o):null,onError:e=>{throw e},theme:ey,editable:i};return(0,t.jsx)(eC.Provider,{value:l.current,children:(0,t.jsx)(ef.LexicalComposer,{initialConfig:{...a},children:n})})});eb.displayName="NoteEditorContextProvider";let ek=eC;var eT=e.i(558544);function eS(e){let{newTab:t=!0,disabled:r=!1}=e,[n]=(0,eT.useLexicalComposerContext)();return(0,ep.useEffect)(()=>N(n,(0,i.namedSignals)({disabled:r,newTab:t})),[n,t,r]),null}var eE=e.i(98098),ew=e.i(85968),eO=e.i(806328);function eL(e){let{validateUrl:t,attributes:r}=e,[n]=(0,eT.useLexicalComposerContext)();return(0,ep.useEffect)(()=>{if(!n.hasNodes([s]))throw Error("LinkPlugin: LinkNode not registered on editor")}),(0,ep.useEffect)(()=>_(n,(0,i.namedSignals)({attributes:r,validateUrl:t})),[n,t,r]),null}function eM(e){let{hasStrictIndent:t=!1}=e,[r]=(0,eT.useLexicalComposerContext)();return(0,ep.useEffect)(()=>{if(!r.hasNodes([X,z]))throw Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")},[r]),(0,ep.useEffect)(()=>{if(t)return eh(r)},[r,t]),(0,ep.useEffect)(()=>eg(r),[r]),null}var eR=e.i(290301),eP=e.i(199494),e$=e.i(729009),eA=e.i(238702);function ej(e){let t=e.anchor,r=e.focus,n=e.anchor.getNode(),i=e.focus.getNode();return n===i?n:e.isBackward()?(0,M.$isAtNodeEnd)(r)?n:i:(0,M.$isAtNodeEnd)(t)?n:i}let eI=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%/.\w-]*)?\??[-+=&;%@.\w]*#?\w*)?)/,eF=()=>((()=>{let[e]=(0,eT.useLexicalComposerContext)(),t=eN(),r=(0,ep.useCallback)(()=>{e.getEditorState().read(()=>{if(e.isComposing())return;let r=(0,n.$getSelection)();if((0,n.$isRangeSelection)(r)){let e=ej(r),{setSelectedIsBold:n,setSelectedIsItalic:i,setSelectedIsStrikeThrough:l,setSelectedLinkUrl:s,setSelectedIsLink:o,setSelectedIsBullet:a}=t.getState();n(r.hasFormat("bold")),i(r.hasFormat("italic")),l(r.hasFormat("strikethrough"));let c=e.getParent();d(c)||d(e)?(s((d(c)?c:e).getURL()),o(!0)):(s(""),o(!1)),a(!!(V(c)||V(e)))}})},[e,t]);return(0,ep.useEffect)(()=>(document.addEventListener("selectionchange",r),()=>{document.removeEventListener("selectionchange",r)}),[r]),(0,ep.useEffect)(()=>(0,eA.mergeRegister)(e.registerUpdateListener(()=>{r()})),[e,r])})(),null);var eD=e.i(161577),eU=e.i(715898),eW=e.i(837699),eB=e.i(892081),eK=e.i(879445);e.i(152567);var ez=e.i(408767),eH=e.i(151094),eY=e.i(935139),eJ=e.i(137667);let eV=(0,ep.memo)(e=>{let{containerElement:r}=e,{t:n}=(0,ez.useTranslation)(),{handleSaveLink:i,handleUnlink:l}=(()=>{let{t:e}=(0,ez.useTranslation)(),[t]=(0,eT.useLexicalComposerContext)(),r=eN(),{notify:n}=(0,eJ.useToastContext)();return{handleSaveLink:(0,ep.useCallback)(i=>{if(i&&!eI.test(i))return void n({type:"error",message:e("nodes.note.editor.invalidUrl",{ns:"workflow"})});t.dispatchCommand(h,(0,eK.escape)(i));let{setLinkAnchorElement:l}=r.getState();l()},[t,r,n,e]),handleUnlink:(0,ep.useCallback)(()=>{t.dispatchCommand(h,null);let{setLinkAnchorElement:e}=r.getState();e()},[t,r])}})(),s=ev(e=>e.selectedLinkUrl),o=ev(e=>e.linkAnchorElement),a=ev(e=>e.linkOperatorShow),d=ev(e=>e.setLinkAnchorElement),c=ev(e=>e.setLinkOperatorShow),[u,g]=(0,ep.useState)(s),{refs:m,floatingStyles:f,elements:p}=(0,eU.useFloating)({placement:"top",middleware:[(0,eD.offset)(4),(0,eD.shift)(),(0,eD.flip)()]});return(0,eB.useClickAway)(()=>{d()},o),(0,ep.useEffect)(()=>{g(s)},[s]),(0,ep.useEffect)(()=>{o&&m.setReference(o)},[o,m]),(0,t.jsx)(t.Fragment,{children:p.reference&&(0,t.jsx)(eU.FloatingPortal,{root:r,children:(0,t.jsxs)("div",{className:(0,eY.cn)("nodrag nopan z-10 inline-flex w-max items-center rounded-md border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg",!a&&"p-1 shadow-md",a&&"system-xs-medium p-0.5 text-text-tertiary shadow-sm"),style:f,ref:m.setFloating,children:[!a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{className:"mr-0.5 h-6 w-[196px] appearance-none rounded-sm bg-transparent p-1 text-[13px] text-components-input-text-filled outline-none",value:u,onChange:e=>g(e.target.value),placeholder:n("nodes.note.editor.enterUrl",{ns:"workflow"})||"",autoFocus:!0}),(0,t.jsx)(eH.default,{variant:"primary",size:"small",disabled:!u,onClick:()=>i(u),children:n("operation.ok",{ns:"common"})})]}),a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("a",{className:"flex h-6 items-center rounded-md px-2 hover:bg-state-base-hover",href:(0,eK.escape)(u),target:"_blank",rel:"noreferrer",children:[(0,t.jsx)(eW.RiExternalLinkLine,{className:"mr-1 h-3 w-3"}),(0,t.jsx)("div",{className:"mr-1",children:n("nodes.note.editor.openLink",{ns:"workflow"})}),(0,t.jsx)("div",{title:(0,eK.escape)(u),className:"max-w-[140px] truncate text-text-accent",children:(0,eK.escape)(u)})]}),(0,t.jsx)("div",{className:"mx-1 h-3.5 w-[1px] bg-divider-regular"}),(0,t.jsxs)("div",{className:"mr-0.5 flex h-6 cursor-pointer items-center rounded-md px-2 hover:bg-state-base-hover",onClick:e=>{e.stopPropagation(),c(!1)},children:[(0,t.jsx)(eW.RiEditLine,{className:"mr-1 h-3 w-3"}),n("operation.edit",{ns:"common"})]}),(0,t.jsxs)("div",{className:"flex h-6 cursor-pointer items-center rounded-md px-2 hover:bg-state-base-hover",onClick:l,children:[(0,t.jsx)(eW.RiLinkUnlinkM,{className:"mr-1 h-3 w-3"}),n("nodes.note.editor.unlink",{ns:"workflow"})]})]})]})})})}),eX=(0,ep.memo)(e=>{let{containerElement:r}=e;return((()=>{let[e]=(0,eT.useLexicalComposerContext)(),t=eN();(0,ep.useEffect)(()=>(0,eA.mergeRegister)(e.registerUpdateListener(()=>{setTimeout(()=>{let{selectedLinkUrl:e,selectedIsLink:r,setLinkAnchorElement:n,setLinkOperatorShow:i}=t.getState();r?(n(!0),i(!!e)):(n(),i(!1))})}),e.registerCommand(n.CLICK_COMMAND,e=>(setTimeout(()=>{let{selectedLinkUrl:r,selectedIsLink:n,setLinkAnchorElement:i,setLinkOperatorShow:l}=t.getState();if(n){if((e.metaKey||e.ctrlKey)&&r)return window.open(r,"_blank"),!0;i(!0),l(!!r)}else i(),l(!1)}),!1),n.COMMAND_PRIORITY_LOW)),[e,t])})(),ev(e=>e.linkAnchorElement))?(0,t.jsx)(eV,{containerElement:r}):null}),eZ=(0,ep.memo)(e=>{let{placeholder:r="write you note...",onChange:n,containerElement:i,setShortcutsEnabled:l}=e,s=(0,ep.useCallback)(e=>{n?.(e)},[n]);return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(eP.RichTextPlugin,{contentEditable:(0,t.jsx)("div",{children:(0,t.jsx)(eE.ContentEditable,{onFocus:()=>l?.(!1),onBlur:()=>l?.(!0),spellCheck:!1,className:"h-full w-full text-text-secondary caret-primary-600 outline-none"})}),placeholder:(0,t.jsx)(e$.default,{value:r,compact:!0}),ErrorBoundary:ew.LexicalErrorBoundary}),(0,t.jsx)(eS,{disabled:!0}),(0,t.jsx)(eL,{}),(0,t.jsx)(eM,{}),(0,t.jsx)(eX,{containerElement:i}),(0,t.jsx)(eF,{}),(0,t.jsx)(eO.HistoryPlugin,{}),(0,t.jsx)(eR.OnChangePlugin,{onChange:s})]})});var eG=e.i(391185),eq=e.i(534042),eQ=e.i(141167);let e0=[{key:eQ.NoteTheme.blue,inner:eq.THEME_MAP[eQ.NoteTheme.blue].title,outer:eq.THEME_MAP[eQ.NoteTheme.blue].outer},{key:eQ.NoteTheme.cyan,inner:eq.THEME_MAP[eQ.NoteTheme.cyan].title,outer:eq.THEME_MAP[eQ.NoteTheme.cyan].outer},{key:eQ.NoteTheme.green,inner:eq.THEME_MAP[eQ.NoteTheme.green].title,outer:eq.THEME_MAP[eQ.NoteTheme.green].outer},{key:eQ.NoteTheme.yellow,inner:eq.THEME_MAP[eQ.NoteTheme.yellow].title,outer:eq.THEME_MAP[eQ.NoteTheme.yellow].outer},{key:eQ.NoteTheme.pink,inner:eq.THEME_MAP[eQ.NoteTheme.pink].title,outer:eq.THEME_MAP[eQ.NoteTheme.pink].outer},{key:eQ.NoteTheme.violet,inner:eq.THEME_MAP[eQ.NoteTheme.violet].title,outer:eq.THEME_MAP[eQ.NoteTheme.violet].outer}],e1=(0,ep.memo)(e=>{let{theme:r,onThemeChange:n}=e,[i,l]=(0,ep.useState)(!1);return(0,t.jsxs)(eG.PortalToFollowElem,{open:i,onOpenChange:l,placement:"top",offset:4,children:[(0,t.jsx)(eG.PortalToFollowElemTrigger,{onClick:()=>l(!i),children:(0,t.jsx)("div",{className:(0,eY.cn)("flex h-8 w-8 cursor-pointer items-center justify-center rounded-md hover:bg-black/5",i&&"bg-black/5"),children:(0,t.jsx)("div",{className:(0,eY.cn)("h-4 w-4 rounded-full border border-black/5",eq.THEME_MAP[r].title)})})}),(0,t.jsx)(eG.PortalToFollowElemContent,{children:(0,t.jsx)("div",{className:"grid grid-cols-3 grid-rows-2 gap-0.5 rounded-lg border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg p-0.5 shadow-lg",children:e0.map(e=>(0,t.jsxs)("div",{className:"group relative flex h-8 w-8 cursor-pointer items-center justify-center rounded-md",onClick:t=>{t.stopPropagation(),n(e.key),l(!1)},children:[(0,t.jsx)("div",{className:(0,eY.cn)("absolute left-1/2 top-1/2 hidden h-5 w-5 -translate-x-1/2 -translate-y-1/2 rounded-full border-[1.5px] group-hover:block",e.outer)}),(0,t.jsx)("div",{className:(0,eY.cn)("absolute left-1/2 top-1/2 h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full border border-black/5",e.inner)})]},e.key))})})]})});var e2=e.i(421001);let e5=(0,ep.memo)(e=>{let{type:r}=e,{t:i}=(0,ez.useTranslation)(),l=ev(e=>e.selectedIsBold),s=ev(e=>e.selectedIsItalic),o=ev(e=>e.selectedIsStrikeThrough),a=ev(e=>e.selectedIsLink),c=ev(e=>e.selectedIsBullet),{handleCommand:u}=(()=>{let[e]=(0,eT.useLexicalComposerContext)(),t=eN();return{handleCommand:(0,ep.useCallback)(r=>{if("bold"===r&&e.dispatchCommand(n.FORMAT_TEXT_COMMAND,"bold"),"italic"===r&&e.dispatchCommand(n.FORMAT_TEXT_COMMAND,"italic"),"strikethrough"===r&&e.dispatchCommand(n.FORMAT_TEXT_COMMAND,"strikethrough"),"link"===r&&e.update(()=>{let r=(0,n.$getSelection)();if((0,n.$isRangeSelection)(r)){let n=ej(r),i=n.getParent(),{setLinkAnchorElement:l}=t.getState();d(i)||d(n)?(e.dispatchCommand(h,null),l()):(e.dispatchCommand(h,""),l(!0))}}),"bullet"===r){let{selectedIsBullet:r}=t.getState();r?e.update(()=>{let e=(0,n.$getSelection)();(0,n.$isRangeSelection)(e)&&(0,M.$setBlocksType)(e,()=>(0,n.$createParagraphNode)())}):e.dispatchCommand(ed,void 0)}},[e,t])}})(),g=(0,ep.useMemo)(()=>{switch(r){case"bold":return(0,t.jsx)(eW.RiBold,{className:(0,eY.cn)("h-4 w-4",l&&"text-primary-600")});case"italic":return(0,t.jsx)(eW.RiItalic,{className:(0,eY.cn)("h-4 w-4",s&&"text-primary-600")});case"strikethrough":return(0,t.jsx)(eW.RiStrikethrough,{className:(0,eY.cn)("h-4 w-4",o&&"text-primary-600")});case"link":return(0,t.jsx)(eW.RiLink,{className:(0,eY.cn)("h-4 w-4",a&&"text-primary-600")});case"bullet":return(0,t.jsx)(eW.RiListUnordered,{className:(0,eY.cn)("h-4 w-4",c&&"text-primary-600")})}},[r,l,s,o,a,c]),m=(0,ep.useMemo)(()=>{switch(r){case"bold":return i("nodes.note.editor.bold",{ns:"workflow"});case"italic":return i("nodes.note.editor.italic",{ns:"workflow"});case"strikethrough":return i("nodes.note.editor.strikethrough",{ns:"workflow"});case"link":return i("nodes.note.editor.link",{ns:"workflow"});case"bullet":return i("nodes.note.editor.bulletList",{ns:"workflow"})}},[r,i]);return(0,t.jsx)(e2.default,{popupContent:m,children:(0,t.jsx)("div",{className:(0,eY.cn)("flex h-8 w-8 cursor-pointer items-center justify-center rounded-md text-text-tertiary hover:bg-state-accent-active hover:text-text-accent","bold"===r&&l&&"bg-state-accent-active","italic"===r&&s&&"bg-state-accent-active","strikethrough"===r&&o&&"bg-state-accent-active","link"===r&&a&&"bg-state-accent-active","bullet"===r&&c&&"bg-state-accent-active"),onClick:()=>u(r),children:g})})}),e4=()=>(0,t.jsx)("div",{className:"mx-1 h-3.5 w-[1px] bg-divider-regular"});e.i(47690);var e9=e.i(490774);let e6=(0,ep.memo)(()=>{let{t:e}=(0,ez.useTranslation)(),r=[{key:"12px",value:e("nodes.note.editor.small",{ns:"workflow"})},{key:"14px",value:e("nodes.note.editor.medium",{ns:"workflow"})},{key:"16px",value:e("nodes.note.editor.large",{ns:"workflow"})}],{fontSizeSelectorShow:i,handleOpenFontSizeSelector:l,fontSize:s,handleFontSize:o}=(()=>{let[e]=(0,eT.useLexicalComposerContext)(),[t,r]=(0,ep.useState)("12px"),[i,l]=(0,ep.useState)(!1),s=(0,ep.useCallback)(t=>{e.update(()=>{let e=(0,n.$getSelection)();(0,n.$isRangeSelection)(e)&&(0,M.$patchStyleText)(e,{"font-size":t})})},[e]),o=(0,ep.useCallback)(t=>{t&&e.update(()=>{let e=(0,n.$getSelection)();(0,n.$isRangeSelection)(e)&&(0,n.$setSelection)(e.clone())}),l(t)},[e]);return(0,ep.useEffect)(()=>(0,eA.mergeRegister)(e.registerUpdateListener(()=>{e.getEditorState().read(()=>{let e=(0,n.$getSelection)();(0,n.$isRangeSelection)(e)&&r((0,M.$getSelectionStyleValueForProperty)(e,"font-size","12px"))})}),e.registerCommand(n.SELECTION_CHANGE_COMMAND,()=>{let e=(0,n.$getSelection)();return(0,n.$isRangeSelection)(e)&&r((0,M.$getSelectionStyleValueForProperty)(e,"font-size","12px")),!1},n.COMMAND_PRIORITY_CRITICAL)),[e]),{fontSize:t,handleFontSize:s,fontSizeSelectorShow:i,handleOpenFontSizeSelector:o}})();return(0,t.jsxs)(eG.PortalToFollowElem,{open:i,onOpenChange:l,placement:"bottom-start",offset:2,children:[(0,t.jsx)(eG.PortalToFollowElemTrigger,{onClick:()=>l(!i),children:(0,t.jsxs)("div",{className:(0,eY.cn)("flex h-8 cursor-pointer items-center rounded-md pl-2 pr-1.5 text-[13px] font-medium text-text-tertiary hover:bg-state-base-hover hover:text-text-secondary",i&&"bg-state-base-hover text-text-secondary"),children:[(0,t.jsx)(eW.RiFontSize,{className:"mr-1 h-4 w-4"}),r.find(e=>e.key===s)?.value||e("nodes.note.editor.small",{ns:"workflow"})]})}),(0,t.jsx)(eG.PortalToFollowElemContent,{children:(0,t.jsx)("div",{className:"w-[120px] rounded-md border-[0.5px] border-components-panel-border bg-components-panel-bg-blur p-1 text-text-secondary shadow-xl",children:r.map(e=>(0,t.jsxs)("div",{className:"flex h-8 cursor-pointer items-center justify-between rounded-md pl-3 pr-2 hover:bg-state-base-hover",onClick:t=>{t.stopPropagation(),o(e.key),l(!1)},children:[(0,t.jsx)("div",{style:{fontSize:e.key},children:e.value}),s===e.key&&(0,t.jsx)(e9.Check,{className:"h-4 w-4 text-text-accent"})]},e.key))})})]})});var e8=e.i(260484),e3=e.i(194902);let e7=(0,ep.memo)(e=>{let{onCopy:r,onDelete:n,onDuplicate:i,showAuthor:l,onShowAuthorChange:s}=e,{t:o}=(0,ez.useTranslation)(),[a,d]=(0,ep.useState)(!1);return(0,t.jsxs)(eG.PortalToFollowElem,{open:a,onOpenChange:d,placement:"bottom-end",offset:4,children:[(0,t.jsx)(eG.PortalToFollowElemTrigger,{onClick:()=>d(!a),children:(0,t.jsx)("div",{className:(0,eY.cn)("flex h-8 w-8 cursor-pointer items-center justify-center rounded-lg text-text-tertiary hover:bg-state-base-hover hover:text-text-secondary",a&&"bg-state-base-hover text-text-secondary"),children:(0,t.jsx)(eW.RiMoreFill,{className:"h-4 w-4"})})}),(0,t.jsx)(eG.PortalToFollowElemContent,{children:(0,t.jsxs)("div",{className:"min-w-[192px] rounded-md border-[0.5px] border-components-panel-border bg-components-panel-bg-blur shadow-xl",children:[(0,t.jsxs)("div",{className:"p-1",children:[(0,t.jsxs)("div",{className:"flex h-8 cursor-pointer items-center justify-between rounded-md px-3 text-sm text-text-secondary hover:bg-state-base-hover",onClick:()=>{r(),d(!1)},children:[o("common.copy",{ns:"workflow"}),(0,t.jsx)(e3.default,{keys:["ctrl","c"]})]}),(0,t.jsxs)("div",{className:"flex h-8 cursor-pointer items-center justify-between rounded-md px-3 text-sm text-text-secondary hover:bg-state-base-hover",onClick:()=>{i(),d(!1)},children:[o("common.duplicate",{ns:"workflow"}),(0,t.jsx)(e3.default,{keys:["ctrl","d"]})]})]}),(0,t.jsx)("div",{className:"h-px bg-divider-subtle"}),(0,t.jsx)("div",{className:"p-1",children:(0,t.jsxs)("div",{className:"flex h-8 cursor-pointer items-center justify-between rounded-md px-3 text-sm text-text-secondary hover:bg-state-base-hover",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{children:o("nodes.note.editor.showAuthor",{ns:"workflow"})}),(0,t.jsx)(e8.default,{size:"l",defaultValue:l,onChange:s})]})}),(0,t.jsx)("div",{className:"h-px bg-divider-subtle"}),(0,t.jsx)("div",{className:"p-1",children:(0,t.jsxs)("div",{className:"flex h-8 cursor-pointer items-center justify-between rounded-md px-3 text-sm text-text-secondary hover:bg-state-destructive-hover hover:text-text-destructive",onClick:()=>{n(),d(!1)},children:[o("operation.delete",{ns:"common"}),(0,t.jsx)(e3.default,{keys:["del"]})]})})]})})]})}),te=(0,ep.memo)(e=>{let{theme:r,onThemeChange:n,onCopy:i,onDuplicate:l,onDelete:s,showAuthor:o,onShowAuthorChange:a}=e;return(0,t.jsxs)("div",{className:"inline-flex items-center rounded-lg border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg p-0.5 shadow-sm",children:[(0,t.jsx)(e1,{theme:r,onThemeChange:n}),(0,t.jsx)(e4,{}),(0,t.jsx)(e6,{}),(0,t.jsx)(e4,{}),(0,t.jsxs)("div",{className:"flex items-center space-x-0.5",children:[(0,t.jsx)(e5,{type:"bold"}),(0,t.jsx)(e5,{type:"italic"}),(0,t.jsx)(e5,{type:"strikethrough"}),(0,t.jsx)(e5,{type:"link"}),(0,t.jsx)(e5,{type:"bullet"})]}),(0,t.jsx)(e4,{}),(0,t.jsx)(e7,{onCopy:i,onDuplicate:l,onDelete:s,showAuthor:o,onShowAuthorChange:a})]})});e.s(["default",0,te],805429),e.s([],444462),e.s(["NoteEditor",0,eZ],212838)},490525,174383,e=>{"use strict";var t=e.i(563199),r=e.i(268255),n=e.i(192447);let i=(0,r.memo)(e=>{let{fromX:r,fromY:i,toX:l,toY:s}=e,[o]=(0,n.getBezierPath)({sourceX:r,sourceY:i,sourcePosition:n.Position.Right,targetX:l,targetY:s,targetPosition:n.Position.Left,curvature:.16});return(0,t.jsxs)("g",{children:[(0,t.jsx)("path",{fill:"none",stroke:"#D0D5DD",strokeWidth:2,d:o}),(0,t.jsx)("rect",{x:l,y:s-4,width:2,height:8,fill:"#2970FF"})]})});e.s(["default",0,i],490525),e.s(["default",0,e=>{let{id:r,startColor:n,stopColor:i,position:l}=e,{x1:s,x2:o,y1:a,y2:d}=l;return(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:r,gradientUnits:"userSpaceOnUse",x1:s,y1:a,x2:o,y2:d,children:[(0,t.jsx)("stop",{offset:"0%",style:{stopColor:n,stopOpacity:1}}),(0,t.jsx)("stop",{offset:"100%",style:{stopColor:i,stopOpacity:1}})]})})}],174383)},234766,e=>{"use strict";var t=e.i(268255),r=e.i(796007),n=e.i(845316);e.i(250149);var i=e.i(402481),l=e.i(158687),s=e.i(692423),o=e.i(954542),a=e.i(192447);let d=e=>{let{id:n,x:i,y:l,width:s,height:o,style:a,color:d,strokeColor:c,strokeWidth:u,className:g,borderRadius:h,shapeRendering:m,onClick:f,selected:p}=e,{background:x,backgroundColor:_}=a||{};return t.default.createElement("rect",{className:(0,r.default)(["react-flow__minimap-node",{selected:p},g]),x:i,y:l,rx:h,ry:h,width:s,height:o,fill:d||x||_,stroke:c,strokeWidth:u,shapeRendering:m,onClick:f?e=>f(e,n):void 0})};d.displayName="MiniMapNode";var c=(0,t.memo)(d);let u=e=>e.nodeOrigin,g=e=>e.getNodes().filter(e=>!e.hidden&&e.width&&e.height),h=e=>e instanceof Function?e:()=>e;var m=(0,t.memo)(function(e){let{nodeStrokeColor:r="transparent",nodeColor:i="#e2e2e2",nodeClassName:l="",nodeBorderRadius:s=5,nodeStrokeWidth:o=2,nodeComponent:d=c,onClick:m}=e,f=(0,a.useStore)(g,n.shallow),p=(0,a.useStore)(u),x=h(i),_=h(r),v=h(l),N="u"<typeof window||window.chrome?"crispEdges":"geometricPrecision";return t.default.createElement(t.default.Fragment,null,f.map(e=>{let{x:r,y:n}=(0,a.getNodePositionWithOrigin)(e,p).positionAbsolute;return t.default.createElement(d,{key:e.id,x:r,y:n,width:e.width,height:e.height,style:e.style,selected:e.selected,className:v(e),color:x(e),borderRadius:s,strokeColor:_(e),strokeWidth:o,shapeRendering:N,onClick:m,id:e.id})}))});let f=e=>{let t=e.getNodes(),r={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:r,boundingRect:t.length>0?(0,a.getBoundsOfRects)((0,a.getNodesBounds)(t,e.nodeOrigin),r):r,rfId:e.rfId}};function p(e){let{style:d,className:c,nodeStrokeColor:u="transparent",nodeColor:g="#e2e2e2",nodeClassName:h="",nodeBorderRadius:p=5,nodeStrokeWidth:x=2,nodeComponent:_,maskColor:v="rgb(240, 240, 240, 0.6)",maskStrokeColor:N="none",maskStrokeWidth:y=1,position:C="bottom-right",onClick:b,onNodeClick:k,pannable:T=!1,zoomable:S=!1,ariaLabel:E="React Flow mini map",inversePan:w=!1,zoomStep:O=10,offsetScale:L=5}=e,M=(0,a.useStoreApi)(),R=(0,t.useRef)(null),{boundingRect:P,viewBB:$,rfId:A}=(0,a.useStore)(f,n.shallow),j=d?.width??200,I=d?.height??150,F=Math.max(P.width/j,P.height/I),D=F*j,U=F*I,W=L*F,B=P.x-(D-P.width)/2-W,K=P.y-(U-P.height)/2-W,z=D+2*W,H=U+2*W,Y=`react-flow__minimap-desc-${A}`,J=(0,t.useRef)(0);J.current=F,(0,t.useEffect)(()=>{if(R.current){let e=(0,s.select)(R.current),t=(0,i.zoom)().on("zoom",T?e=>{let{transform:t,d3Selection:r,d3Zoom:n,translateExtent:i,width:s,height:o}=M.getState();if("mousemove"!==e.sourceEvent.type||!r||!n)return;let a=J.current*Math.max(1,t[2])*(w?-1:1),d={x:t[0]-e.sourceEvent.movementX*a,y:t[1]-e.sourceEvent.movementY*a},c=l.zoomIdentity.translate(d.x,d.y).scale(t[2]),u=n.constrain()(c,[[0,0],[s,o]],i);n.transform(r,u)}:null).on("zoom.wheel",S?e=>{let{transform:t,d3Selection:r,d3Zoom:n}=M.getState();if("wheel"!==e.sourceEvent.type||!r||!n)return;let i=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*O,l=t[2]*Math.pow(2,i);n.scaleTo(r,l)}:null);return e.call(t),()=>{e.on("zoom",null)}}},[T,S,w,O]);let V=b?e=>{let t=(0,o.pointer)(e);b(e,{x:t[0],y:t[1]})}:void 0,X=k?(e,t)=>{k(e,M.getState().nodeInternals.get(t))}:void 0;return t.default.createElement(a.Panel,{position:C,style:d,className:(0,r.default)(["react-flow__minimap",c]),"data-testid":"rf__minimap"},t.default.createElement("svg",{width:j,height:I,viewBox:`${B} ${K} ${z} ${H}`,role:"img","aria-labelledby":Y,ref:R,onClick:V},E&&t.default.createElement("title",{id:Y},E),t.default.createElement(m,{onClick:X,nodeColor:g,nodeStrokeColor:u,nodeBorderRadius:p,nodeClassName:h,nodeStrokeWidth:x,nodeComponent:_}),t.default.createElement("path",{className:"react-flow__minimap-mask",d:`M${B-W},${K-W}h${z+2*W}v${H+2*W}h${-z-2*W}z
        M${$.x},${$.y}h${$.width}v${$.height}h${-$.width}z`,fill:v,fillRule:"evenodd",stroke:N,strokeWidth:y,pointerEvents:"none"})))}p.displayName="MiniMap";var x=(0,t.memo)(p);e.s(["MiniMap",()=>x])},175179,e=>{"use strict";var t=e.i(563199),r=e.i(268255),n=e.i(421001),i=e.i(194902);let l=(0,r.memo)(e=>{let{title:r,children:l,shortcuts:s}=e;return(0,t.jsx)(n.default,{needsDelay:!1,offset:4,popupClassName:"p-0 bg-transparent",popupContent:(0,t.jsxs)("div",{className:"flex items-center gap-1 rounded-lg border-[0.5px] border-components-panel-border bg-components-tooltip-bg p-1.5 shadow-lg backdrop-blur-[5px]",children:[(0,t.jsx)("span",{className:"system-xs-medium text-text-secondary",children:r}),s&&(0,t.jsx)(i.default,{keys:s})]}),children:l})});e.s(["default",0,l])}]);