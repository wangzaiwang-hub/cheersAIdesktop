(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,130822,e=>{"use strict";var t=e.i(223314),s=e.i(390622);let a=e=>({type:e.type,transfer_method:e.transfer_method,url:e.remote_url,upload_file_id:e.related_id});e.s(["getProcessedInputs",0,(e,r)=>{let n={...e};return r.forEach(r=>{let i=e[r.variable];if(r.type===s.InputVarType.checkbox){n[r.variable]=!!i;return}if(null!=i){if(r.type===s.InputVarType.singleFile)"transfer_method"in i?n[r.variable]=a(i):n[r.variable]=(0,t.getProcessedFiles)([i])[0];else if(r.type===s.InputVarType.multiFiles)"transfer_method"in i[0]?n[r.variable]=i.map(a):n[r.variable]=(0,t.getProcessedFiles)(i);else if(r.type===s.InputVarType.jsonObject)try{let e="string"==typeof i?JSON.parse(i):i;e&&"object"==typeof e&&!Array.isArray(e)?n[r.variable]=e:n[r.variable]=i}catch{n[r.variable]=i}}}),n},"processOpeningStatement",0,(e,t,s)=>e?e.replace(/\{\{([^}]+)\}\}/g,(e,a)=>{let r=t[a];if(r)return r;let n=s.find(e=>e.variable===a);return n?`{{${n.label}}}`:e}):e])},922944,e=>{"use strict";var t=e.i(841054);e.s(["useMount",()=>t.default])},267001,e=>{"use strict";var t,s=((t={}).Number="number",t.String="string",t.Boolean="boolean",t.Object="object",t.ArrayString="array[string]",t.ArrayNumber="array[number]",t.ArrayBoolean="array[boolean]",t.ArrayObject="array[object]",t);e.s(["ChatVarType",()=>s])},491016,e=>{"use strict";var t=e.i(563199),s=e.i(837699),a=e.i(813672),r=e.i(124836),n=e.i(268255);e.i(152567);var i=e.i(408767),l=e.i(192447),o=e.i(654313);e.i(668763);var d=e.i(538883),u=e.i(421001),c=e.i(586136),p=e.i(213889);e.i(275225);var g=e.i(705405),m=e.i(935139);e.i(845780);var h=e.i(856105),f=e.i(194095),x=e.i(390622),b=e.i(189299),w=e.i(34510),v=e.i(53349),_=e.i(987878),y=e.i(443523),j=e.i(249420),N=e.i(459760),k=e.i(922944),S=e.i(26012),I=e.i(403861);e.i(21511);var C=e.i(389600),P=e.i(751489);e.i(42241);var F=e.i(226577),R=e.i(21151),T=e.i(481162),A=e.i(955371),E=e.i(267001),M=e.i(157884),O=e.i(141696);let W=e=>{let{conversationID:a,onHide:l}=e,{t:o}=(0,i.useTranslation)(),{formatTime:d}=(0,M.default)(),u=(0,g.useStore)(e=>e.conversationVariables),c=(0,g.useStore)(e=>e.appId),[p,h]=n.useState(u[0]),[f,x]=n.useState({}),[b,w]=n.useState({}),v=(0,n.useCallback)(async()=>{if(a&&u.length>0){let e=await (0,O.fetchCurrentValueOfConversationVariable)({url:`/apps/${c}/conversation-variables`,params:{conversation_id:a}});e.data.length>0&&(x(e.data.reduce((e,t)=>(e[t.id]=t.value,e),{})),w(e.data.reduce((e,t)=>(e[t.id]=t.updated_at,e),{})))}},[c,a,u.length]),[_,y]=n.useState(!1),j=(0,n.useCallback)(()=>{(0,S.default)(p.value),y(!0),setTimeout(()=>{y(!1)},2e3)},[p.value]);return(0,k.useMount)(()=>{v()}),(0,t.jsxs)(R.default,{isShow:!0,onClose:r.noop,className:(0,m.cn)("h-[640px] w-[920px] max-w-[920px] p-0"),children:[(0,t.jsx)("div",{className:"absolute right-4 top-4 cursor-pointer p-2",onClick:l,children:(0,t.jsx)(s.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})}),(0,t.jsxs)("div",{className:"flex h-full w-full",children:[(0,t.jsxs)("div",{className:"flex h-full w-[224px] shrink-0 flex-col border-r border-divider-burn bg-background-sidenav-bg",children:[(0,t.jsx)("div",{className:"system-xl-semibold shrink-0 pb-3 pl-5 pr-4 pt-5 text-text-primary",children:o("chatVariable.panelTitle",{ns:"workflow"})}),(0,t.jsx)("div",{className:"grow overflow-y-auto px-3 py-2",children:u.map(e=>(0,t.jsxs)("div",{className:(0,m.cn)("radius-md group mb-0.5 flex cursor-pointer items-center p-2 hover:bg-state-base-hover",p.id===e.id&&"bg-state-base-hover"),onClick:()=>h(e),children:[(0,t.jsx)(F.BubbleX,{className:(0,m.cn)("mr-1 h-4 w-4 shrink-0 text-text-tertiary group-hover:text-util-colors-teal-teal-700",p.id===e.id&&"text-util-colors-teal-teal-700")}),(0,t.jsx)("div",{title:e.name,className:(0,m.cn)("system-sm-medium truncate text-text-tertiary group-hover:text-util-colors-teal-teal-700",p.id===e.id&&"text-util-colors-teal-teal-700"),children:e.name})]},e.id))})]}),(0,t.jsxs)("div",{className:"flex h-full w-0 grow flex-col bg-components-panel-bg",children:[(0,t.jsx)("div",{className:"shrink-0 p-4 pb-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-1 py-1",children:[(0,t.jsx)("div",{className:"system-xl-semibold text-text-primary",children:p.name}),(0,t.jsx)("div",{className:"system-xs-medium text-text-tertiary",children:(0,I.capitalize)(p.value_type)})]})}),(0,t.jsxs)("div",{className:"flex h-0 grow flex-col p-4 pt-2",children:[(0,t.jsxs)("div",{className:"mb-2 flex shrink-0 items-center gap-2",children:[(0,t.jsx)("div",{className:"system-xs-medium-uppercase shrink-0 text-text-tertiary",children:o("chatVariable.storedContent",{ns:"workflow"}).toLocaleUpperCase()}),(0,t.jsx)("div",{className:"h-px grow",style:{background:"linear-gradient(to right, rgba(16, 24, 40, 0.08) 0%, rgba(255, 255, 255) 100%)"}}),!!b[p.id]&&(0,t.jsxs)("div",{className:"system-xs-regular shrink-0 text-text-tertiary",children:[o("chatVariable.updatedAt",{ns:"workflow"}),d(b[p.id],o("dateTimeFormat",{ns:"appLog"}))]})]}),(0,t.jsxs)("div",{className:"grow overflow-y-auto",children:[p.value_type!==E.ChatVarType.Number&&p.value_type!==E.ChatVarType.String&&(0,t.jsxs)("div",{className:"flex h-full flex-col rounded-lg bg-components-input-bg-normal px-2 pb-2",children:[(0,t.jsxs)("div",{className:"flex h-7 shrink-0 items-center justify-between pl-3 pr-2 pt-1",children:[(0,t.jsx)("div",{className:"system-xs-semibold text-text-secondary",children:"JSON"}),(0,t.jsx)("div",{className:"flex items-center p-1",children:_?(0,t.jsx)(P.CopyCheck,{className:"h-4 w-4 text-text-tertiary"}):(0,t.jsx)(C.Copy,{className:"h-4 w-4 cursor-pointer text-text-tertiary",onClick:j})})]}),(0,t.jsx)("div",{className:"grow pl-4",children:(0,t.jsx)(T.default,{readOnly:!0,noWrapper:!0,isExpand:!0,language:A.CodeLanguage.json,value:f[p.id]||"",isJSONStringifyBeauty:!0})})]}),(p.value_type===E.ChatVarType.Number||p.value_type===E.ChatVarType.String)&&(0,t.jsx)("div",{className:"system-md-regular h-full overflow-y-auto overflow-x-hidden rounded-lg bg-components-input-bg-normal px-4 py-3 text-components-input-text-filled",children:f[p.id]||""})]})]})]})]})]})};e.i(977512);var L=e.i(73399),L=L;let V=()=>{let{t:e}=(0,i.useTranslation)();return(0,t.jsxs)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:[(0,t.jsx)("div",{className:"mb-2 flex justify-center",children:(0,t.jsx)(L.default,{className:"h-12 w-12 text-gray-300"})}),(0,t.jsx)("div",{className:"w-[256px] text-center text-[13px] text-gray-400",children:e("common.previewPlaceholder",{ns:"workflow"})})]})};var q=e.i(276925),B=e.i(105845),D=e.i(130822),z=e.i(223314),U=e.i(137667),$=e.i(387852),H=e.i(648404),Q=e.i(959752),J=e.i(872135),K=e.i(556354);e.i(491401);var G=e.i(585736),X=e.i(285923);let Y=(0,n.memo)(()=>{let e=(0,g.useWorkflowStore)(),s=(0,g.useStore)(e=>e.inputs),a=(0,g.useStore)(e=>e.showDebugAndPreviewPanel),r=(0,l.useNodes)().find(e=>e.data.type===x.BlockEnum.Start),n=r?.data.variables||[],i=a?n:n.filter(e=>!0!==e.hide);return i.length?(0,t.jsx)("div",{className:(0,m.cn)("relative z-[1] rounded-xl border-[0.5px] border-components-panel-border-subtle bg-components-panel-on-panel-item-bg shadow-xs"),children:(0,t.jsx)("div",{className:"px-4 pb-4 pt-3",children:i.map((a,r)=>(0,t.jsx)("div",{className:"mb-4 last-of-type:mb-0",children:(0,t.jsx)(X.default,{autoFocus:0===r,payload:a,value:s[a.variable],onChange:t=>((t,s)=>{let{inputs:a,setInputs:r}=e.getState();r({...a,[t]:s})})(a.variable,t)})},a.variable))})}):null}),Z=e=>{let{ref:s,showConversationVariableModal:a,onConversationModalHide:r,showInputsFieldsPanel:o,onHide:d}=e,u=(0,l.useNodes)().find(e=>e.data.type===x.BlockEnum.Start),c=u?.data.variables,p=(0,b.useStore)(e=>e.appDetail),m=(0,g.useWorkflowStore)(),h=(0,g.useStore)(e=>e.inputs),f=(0,g.useStore)(e=>e.setInputs),k=(0,n.useMemo)(()=>{let e={};return c&&c.forEach(t=>{t.default&&(e[t.variable]=t.default)}),e},[c]),S=(0,_.useFeatures)(e=>e.features),I=(0,n.useMemo)(()=>({opening_statement:S.opening?.enabled&&S.opening?.opening_statement||"",suggested_questions:S.opening?.enabled&&S.opening?.suggested_questions||[],suggested_questions_after_answer:S.suggested,text_to_speech:S.text2speech,speech_to_text:S.speech2text,retriever_resource:S.citation,sensitive_word_avoidance:S.moderation,file_upload:S.file}),[S.opening,S.suggested,S.text2speech,S.speech2text,S.citation,S.moderation,S.file]),C=(0,g.useStore)(e=>e.setShowFeaturesPanel),{conversationId:P,chatList:F,handleStop:R,isResponding:T,suggestedQuestions:A,handleSend:E,handleRestart:M,setTargetMessageId:O}=((e,t,s,a)=>{let{t:r}=(0,i.useTranslation)(),{notify:l}=(0,U.useToastContext)(),{handleRun:o}=(0,K.useWorkflowRun)(),d=(0,n.useRef)(!1),u=(0,g.useWorkflowStore)(),c=(0,n.useRef)(""),p=(0,n.useRef)(""),[m,h]=(0,n.useState)(!1),f=(0,n.useRef)(!1),b=(0,G.useHooksStore)(e=>e.configsMap),w=(0,$.useInvalidAllLastRun)(b?.flowType,b?.flowId),{fetchInspectVars:_}=(0,J.useSetWorkflowVarsWithValue)(),[y,j]=(0,n.useState)([]),N=(0,n.useRef)(null),{setIterTimes:k,setLoopTimes:S}=u.getState(),I=(0,n.useCallback)(e=>{h(e),f.current=e},[]),[C,P]=(0,n.useState)(s||[]),F=(0,n.useRef)(C),[R,T]=(0,n.useState)(),A=(0,n.useMemo)(()=>(0,v.getThreadMessages)(C,R),[C,R]),E=(0,n.useCallback)(e=>(0,D.processOpeningStatement)(e,t?.inputs||{},t?.inputsForm||[]),[t?.inputs,t?.inputsForm]),M=(0,n.useMemo)(()=>{let t=[...A];if(e?.opening_statement){let s=A.findIndex(e=>e.isOpeningStatement);s>-1?t[s]={...t[s],content:E(e.opening_statement),suggestedQuestions:e.suggested_questions?.map(e=>E(e))}:t.unshift({id:`${Date.now()}`,content:E(e.opening_statement),isAnswer:!0,isOpeningStatement:!0,suggestedQuestions:e.suggested_questions?.map(e=>E(e))})}return t},[A,e?.opening_statement,E,e?.suggested_questions]);(0,n.useEffect)(()=>((0,B.setAutoFreeze)(!1),()=>{(0,B.setAutoFreeze)(!0)}),[]);let O=(0,n.useCallback)((e,t)=>(0,B.produce)(F.current,s=>{let a=[...s];for(;a.length>0;){let s=a.shift();if(s.id===e){t(s);break}s.children&&a.push(...s.children)}}),[]),W=(0,n.useCallback)(()=>{d.current=!0,I(!1),a&&p.current&&a(p.current),k(Q.DEFAULT_ITER_TIMES),S(Q.DEFAULT_LOOP_TIMES),N.current&&N.current.abort()},[I,k,S,a]),L=(0,n.useCallback)(()=>{c.current="",p.current="",W(),k(Q.DEFAULT_ITER_TIMES),S(Q.DEFAULT_LOOP_TIMES),P([]),j([])},[W,k,S]),V=(0,n.useCallback)(e=>{let t,{parentId:s,responseItem:a,placeholderQuestionId:r,questionItem:n}=e,i={...n,children:[{...a,children:[]}]};P(t=s||C.some(e=>[r,n.id].includes(e.id))?O(s,e=>{let t=e.children.findIndex(e=>[r,n.id].includes(e.id));-1===t?e.children.push(i):e.children[t]=i}):(0,B.produce)(C,e=>{e.push(i)})),F.current=t},[C,O]),X=(0,n.useCallback)((s,a)=>{let{onGetSuggestedQuestions:n}=a;if(f.current)return l({type:"info",message:r("errorMessage.waitForResponse",{ns:"appDebug"})}),!1;let i=A.find(e=>e.id===s.parent_message_id),u=`question-${Date.now()}`,g={id:u,content:s.query,isAnswer:!1,message_files:s.files,parentMessageId:s.parent_message_id},m=`answer-placeholder-${Date.now()}`,h={id:m,content:"",isAnswer:!0,parentMessageId:g.id,siblingIndex:i?.children?.length??C.length};T(i?.id),V({parentId:s.parent_message_id,responseItem:h,placeholderQuestionId:u,questionItem:g});let b={id:m,content:"",agent_thoughts:[],message_files:[],isAnswer:!0,parentMessageId:g.id,siblingIndex:i?.children?.length??C.length};I(!0);let{files:v,inputs:y,...k}=s,S={files:(0,z.getProcessedFiles)(v||[]),inputs:(0,D.getProcessedInputs)(y||{},t?.inputsForm||[]),...k};S?.files?.length&&(S.files=S.files.map(e=>e.transfer_method===H.TransferMethod.local_file?{...e,url:""}:e));let P=!1;o(S,{onData:(e,t,a)=>{let{conversationId:r,messageId:n,taskId:i}=a;b.content=b.content+e,n&&!P&&(g.id=`question-${n}`,b.id=n,b.parentMessageId=g.id,P=!0),t&&r&&(c.current=r),p.current=i,n&&(b.id=n),V({placeholderQuestionId:u,questionItem:g,responseItem:b,parentId:s.parent_message_id})},async onCompleted(t,a){if(I(!1),_({}),w(),t){a&&(b.content=a,b.isError=!0,V({placeholderQuestionId:u,questionItem:g,responseItem:b,parentId:s.parent_message_id}));return}if(e?.suggested_questions_after_answer?.enabled&&!d.current&&n)try{let{data:e}=await n(b.id,e=>N.current=e);j(e)}catch(e){j([])}},onMessageEnd:e=>{b.citation=e.metadata?.retriever_resources||[];let t=(0,z.getProcessedFilesFromResponse)(e.files||[]);b.allFiles=(0,q.uniqBy)([...b.allFiles||[],...t||[]],"id"),V({placeholderQuestionId:u,questionItem:g,responseItem:b,parentId:s.parent_message_id})},onMessageReplace:e=>{b.content=e.answer},onError(){I(!1)},onWorkflowStarted:e=>{let{workflow_run_id:t,task_id:a}=e;p.current=a,b.workflow_run_id=t,b.workflowProcess={status:x.WorkflowRunningStatus.Running,tracing:[]},V({placeholderQuestionId:u,questionItem:g,responseItem:b,parentId:s.parent_message_id})},onWorkflowFinished:e=>{let{data:t}=e;b.workflowProcess.status=t.status,V({placeholderQuestionId:u,questionItem:g,responseItem:b,parentId:s.parent_message_id})},onIterationStart:e=>{let{data:t}=e;b.workflowProcess.tracing.push({...t,status:x.NodeRunningStatus.Running}),V({placeholderQuestionId:u,questionItem:g,responseItem:b,parentId:s.parent_message_id})},onIterationFinish:e=>{let{data:t}=e,a=b.workflowProcess.tracing.findIndex(e=>e.id===t.id);a>-1&&(b.workflowProcess.tracing[a]={...b.workflowProcess.tracing[a],...t},V({placeholderQuestionId:u,questionItem:g,responseItem:b,parentId:s.parent_message_id}))},onLoopStart:e=>{let{data:t}=e;b.workflowProcess.tracing.push({...t,status:x.NodeRunningStatus.Running}),V({placeholderQuestionId:u,questionItem:g,responseItem:b,parentId:s.parent_message_id})},onLoopFinish:e=>{let{data:t}=e,a=b.workflowProcess.tracing.findIndex(e=>e.id===t.id);a>-1&&(b.workflowProcess.tracing[a]={...b.workflowProcess.tracing[a],...t},V({placeholderQuestionId:u,questionItem:g,responseItem:b,parentId:s.parent_message_id}))},onNodeStarted:e=>{let{data:t}=e;b.workflowProcess.tracing.push({...t,status:x.NodeRunningStatus.Running}),V({placeholderQuestionId:u,questionItem:g,responseItem:b,parentId:s.parent_message_id})},onNodeRetry:e=>{let{data:t}=e;b.workflowProcess.tracing.push(t),V({placeholderQuestionId:u,questionItem:g,responseItem:b,parentId:s.parent_message_id})},onNodeFinished:e=>{let{data:t}=e,a=b.workflowProcess.tracing.findIndex(e=>e.id===t.id);a>-1&&(b.workflowProcess.tracing[a]={...b.workflowProcess.tracing[a],...t},V({placeholderQuestionId:u,questionItem:g,responseItem:b,parentId:s.parent_message_id}))},onAgentLog:e=>{let{data:t}=e,a=b.workflowProcess.tracing.findIndex(e=>e.node_id===t.node_id);if(a>-1){let e=b.workflowProcess.tracing[a];if(e.execution_metadata)if(e.execution_metadata.agent_log){let s=e.execution_metadata.agent_log.findIndex(e=>e.message_id===t.message_id);s>-1?e.execution_metadata.agent_log[s]={...e.execution_metadata.agent_log[s],...t}:e.execution_metadata.agent_log.push(t)}else e.execution_metadata.agent_log=[t];else e.execution_metadata={agent_log:[t]};b.workflowProcess.tracing[a]={...e},V({placeholderQuestionId:u,questionItem:g,responseItem:b,parentId:s.parent_message_id})}}})},[A,C.length,V,I,t?.inputsForm,o,l,r,e?.suggested_questions_after_answer?.enabled,_,w]);return{conversationId:c.current,chatList:M,setTargetMessageId:T,handleSend:X,handleStop:W,handleRestart:L,isResponding:m,suggestedQuestions:y}})(I,{inputs:h,inputsForm:c||[]},[],e=>(0,N.stopChatMessageResponding)(p.id,e)),L=(0,n.useCallback)(()=>{M(),f(k)},[M,f,k]),X=(0,n.useCallback)(function(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;E({query:e,files:t,inputs:m.getState().inputs,conversation_id:P,parent_message_id:(s?a?.id:(0,v.getLastAnswer)(F)?.id)||void 0},{onGetSuggestedQuestions:(e,t)=>(0,N.fetchSuggestedQuestions)(p.id,e,t)})},[E,m,P,F,p]),Z=(0,n.useCallback)((e,t)=>{let s=t?e:F.find(t=>t.id===e.parentMessageId),a=F.find(e=>e.id===s.parentMessageId);X(t?t.message:s.content,t?t.files:s.message_files,!0,(0,v.isValidGeneratedAnswer)(a)?a:null)},[F,X]),{eventEmitter:ee}=(0,j.useEventEmitterContextContext)();return ee?.useSubscription(e=>{e.type===y.EVENT_WORKFLOW_STOP&&R()}),(0,n.useImperativeHandle)(s,()=>({handleRestart:L}),[L]),(0,n.useEffect)(()=>{Object.keys(k).length>0&&f({...k,...h})},[k]),(0,n.useEffect)(()=>{T&&d()},[T,d]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.default,{config:{...I,supportCitationHitInfo:!0},chatList:F,isResponding:T,chatContainerClassName:"px-3",chatContainerInnerClassName:"pt-6 w-full max-w-full mx-auto",chatFooterClassName:"px-4 rounded-bl-2xl",chatFooterInnerClassName:"pb-0",showFileUpload:!0,showFeatureBar:!0,onFeatureBarClick:C,onSend:X,inputs:h,inputsForm:c||[],onRegenerate:Z,onStopResponding:R,chatNode:(0,t.jsxs)(t.Fragment,{children:[o&&(0,t.jsx)(Y,{}),!F.length&&(0,t.jsx)(V,{})]}),noSpacing:!0,suggestedQuestions:A,showPromptLog:!0,chatAnswerContainerInner:"!pr-2",switchSibling:O}),a&&(0,t.jsx)(W,{conversationID:P,onHide:r})]})};Z.displayName="ChatWrapper";let ee=(0,n.memo)(Z),et=(0,n.memo)(()=>{let{t:e}=(0,i.useTranslation)(),b=(0,n.useRef)({handleRestart:r.noop}),{handleCancelDebugAndPreviewPanel:w}=(0,h.useWorkflowInteractions)(),{handleNodeCancelRunningStatus:v}=(0,p.useNodesInteractionsWithoutSync)(),{handleEdgeCancelRunningStatus:_}=(0,c.useEdgesInteractionsWithoutSync)(),[y,j]=(0,n.useState)(!0),N=(0,l.useNodes)(),k=N.find(e=>e.data.selected),S=N.find(e=>e.data.type===x.BlockEnum.Start),I=S?.data.variables||[],[C,P]=(0,n.useState)(!1),F=(0,g.useStore)(e=>e.workflowCanvasWidth),R=(0,g.useStore)(e=>e.nodePanelWidth),T=(0,g.useStore)(e=>e.previewPanelWidth),A=(0,g.useStore)(e=>e.setPreviewPanelWidth),E=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";"user"===t&&localStorage.setItem("debug-and-preview-panel-width",`${e}`),A(e)},[A]),M=(0,n.useMemo)(()=>F?k?F-400-400:F-400:720,[F,k,R]),{triggerRef:O,containerRef:W}=(0,f.useResizePanel)({direction:"horizontal",triggerDirection:"left",minWidth:400,maxWidth:M,onResize:(0,a.debounce)(e=>{E(e,"user")})});return(0,t.jsxs)("div",{className:"relative h-full",children:[(0,t.jsx)("div",{ref:O,className:"absolute -left-1 top-0 flex h-full w-1 cursor-col-resize resize-x items-center justify-center",children:(0,t.jsx)("div",{className:"h-10 w-0.5 rounded-sm bg-state-base-handle hover:h-full hover:bg-state-accent-solid active:h-full active:bg-state-accent-solid"})}),(0,t.jsxs)("div",{ref:W,className:(0,m.cn)("relative flex h-full flex-col rounded-l-2xl border border-r-0 border-components-panel-border bg-chatbot-bg shadow-xl"),style:{width:`${T}px`},children:[(0,t.jsxs)("div",{className:"system-xl-semibold flex shrink-0 items-center justify-between px-4 pb-2 pt-3 text-text-primary",children:[(0,t.jsx)("div",{className:"h-8",children:e("common.debugAndPreview",{ns:"workflow"}).toLocaleUpperCase()}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(u.default,{popupContent:e("operation.refresh",{ns:"common"}),children:(0,t.jsx)(o.default,{onClick:()=>void(v(),_(),b.current.handleRestart()),children:(0,t.jsx)(d.RefreshCcw01,{className:"h-4 w-4"})})}),I.length>0&&(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u.default,{popupContent:e("panel.userInputField",{ns:"workflow"}),children:(0,t.jsx)(o.default,{state:y?o.ActionButtonState.Active:void 0,onClick:()=>j(!y),children:(0,t.jsx)(s.RiEqualizer2Line,{className:"h-4 w-4"})})}),y&&(0,t.jsx)("div",{className:"absolute bottom-[-17px] right-[5px] z-10 h-3 w-3 rotate-45 border-l-[0.5px] border-t-[0.5px] border-components-panel-border-subtle bg-components-panel-on-panel-item-bg"})]}),(0,t.jsx)("div",{className:"mx-3 h-3.5 w-[1px] bg-divider-regular"}),(0,t.jsx)("div",{className:"flex h-6 w-6 cursor-pointer items-center justify-center",onClick:w,children:(0,t.jsx)(s.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})})]})]}),(0,t.jsx)("div",{className:"grow overflow-y-auto rounded-b-2xl",children:(0,t.jsx)(ee,{ref:b,showConversationVariableModal:C,onConversationModalHide:()=>P(!1),showInputsFieldsPanel:y,onHide:()=>j(!1)})})]})]})});e.s(["default",0,et],491016)},172774,e=>{e.n(e.i(491016))}]);