(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,549289,e=>{"use strict";var s=e.i(625743);e.s(["ApiConnectionMod",()=>s.default])},777582,e=>{"use strict";var s=e.i(563199);e.i(152567);var t=e.i(408767),a=e.i(363282),i=e.i(402588),l=e.i(935139);e.s(["default",0,e=>{let{topK:n,scoreThreshold:r,scoreThresholdEnabled:o,onChange:d,isInHitTesting:c=!1,isInRetrievalSetting:m=!1}=e,{t:x}=(0,t.useTranslation)();return(0,s.jsxs)("div",{className:(0,l.cn)("flex flex-col gap-2 self-stretch",m&&"w-full max-w-[480px]"),children:[!c&&!m&&(0,s.jsx)("div",{className:"flex h-7 flex-col gap-2 self-stretch pt-1",children:(0,s.jsx)("label",{className:"system-sm-semibold text-text-secondary",children:x("retrievalSettings",{ns:"dataset"})})}),(0,s.jsxs)("div",{className:(0,l.cn)("flex gap-4 self-stretch",{"flex-col":c,"flex-row":m,"flex-col sm:flex-row":!c&&!m}),children:[(0,s.jsx)("div",{className:"flex grow flex-col gap-1",children:(0,s.jsx)(i.default,{className:"grow",value:n,onChange:(e,s)=>d({top_k:s}),enable:!0})}),(0,s.jsx)("div",{className:"flex grow flex-col gap-1",children:(0,s.jsx)(a.default,{className:"grow",value:r,onChange:(e,s)=>d({score_threshold:s}),enable:o,hasSwitch:!0,onSwitchChange:(e,s)=>{d({score_threshold_enabled:s})}})})]})]})}])},860507,459946,229897,584344,e=>{"use strict";var s=e.i(563199),t=e.i(726371),a=e.i(268255);e.i(152567);var i=e.i(408767);e.i(9633);var l=e.i(215859);e.s(["Economic",()=>l.default],459946);var l=l,n=e.i(304769);e.s(["HighQuality",()=>n.default],229897);var n=n,r=e.i(391185),o=e.i(935139);e.i(698628);var d=e.i(127210),c=e.i(619306),m=e.i(447265),x=e.i(837699),u=e.i(802859),h=e.i(170866),g=e.i(421001);let p=a.memo(e=>{let{keywordNumber:t,onKeywordNumberChange:l}=e,{t:n}=(0,i.useTranslation)(),r=(0,a.useCallback)(e=>{e&&l(e)},[l]);return(0,s.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,s.jsxs)("div",{className:"flex grow items-center gap-x-0.5",children:[(0,s.jsx)("div",{className:"system-xs-medium truncate text-text-secondary",children:n("form.numberOfKeywords",{ns:"datasetSettings"})}),(0,s.jsx)(g.default,{popupContent:"number of keywords",children:(0,s.jsx)(x.RiQuestionLine,{className:"h-3.5 w-3.5 text-text-quaternary"})})]}),(0,s.jsx)(h.default,{className:"mr-3 w-[206px] shrink-0",value:t,max:50,onChange:l}),(0,s.jsx)(u.InputNumber,{wrapperClassName:"shrink-0 w-12",type:"number",value:t,onChange:r})]})});e.s(["default",0,e=>{let{value:x,onChange:u,disabled:h,currentValue:g,keywordNumber:f,onKeywordNumberChange:v}=e,{t:j}=(0,i.useTranslation)(),b=(0,a.useRef)(null),y=(0,t.useHover)(b),N=g===d.IndexingType.QUALIFIED;return(0,s.jsxs)("div",{className:(0,o.cn)("flex flex-col gap-y-2"),children:[(0,s.jsx)(m.default,{id:d.IndexingType.QUALIFIED,isActive:x===d.IndexingType.QUALIFIED,onClick:u,icon:(0,s.jsx)(n.default,{className:"size-[18px]"}),iconActiveColor:"text-util-colors-orange-orange-500",title:j("stepTwo.qualified",{ns:"datasetCreation"}),description:j("form.indexMethodHighQualityTip",{ns:"datasetSettings"}),disabled:h,isRecommended:!0,effectColor:c.EffectColor.orange,showEffectColor:!0,className:"gap-x-2"}),(0,s.jsxs)(r.PortalToFollowElem,{open:y,offset:4,placement:"right",children:[(0,s.jsx)(r.PortalToFollowElemTrigger,{children:(0,s.jsx)(m.default,{ref:b,id:d.IndexingType.ECONOMICAL,isActive:x===d.IndexingType.ECONOMICAL,onClick:u,icon:(0,s.jsx)(l.default,{className:"size-[18px]"}),iconActiveColor:"text-util-colors-indigo-indigo-600",title:j("form.indexMethodEconomy",{ns:"datasetSettings"}),description:j("form.indexMethodEconomyTip",{ns:"datasetSettings",count:f}),disabled:h||N,effectColor:c.EffectColor.indigo,showEffectColor:!0,showChildren:!0,className:"gap-x-2",children:(0,s.jsx)(p,{keywordNumber:f,onKeywordNumberChange:v})})}),(0,s.jsx)(r.PortalToFollowElemContent,{style:{zIndex:60},children:(0,s.jsx)("div",{className:"rounded-lg border-components-panel-border bg-components-tooltip-bg p-3 text-xs font-medium text-text-secondary shadow-lg",children:j("form.indexMethodChangeToEconomyDisabledTip",{ns:"datasetSettings"})})})]})]})}],860507);var f=e.i(38532),v=e.i(241661),j=e.i(291631),b=e.i(711536),y=e.i(621379);let N=a.memo(e=>{let{leftIcon:t,name:a,email:l,isSelected:n,isMe:r=!1,onClick:d}=e,{t:c}=(0,i.useTranslation)();return(0,s.jsxs)("div",{className:"flex cursor-pointer items-center gap-2 rounded-lg py-1 pl-2 pr-[10px] hover:bg-state-base-hover",onClick:d,children:[t,(0,s.jsxs)("div",{className:"grow",children:[(0,s.jsxs)("div",{className:"system-sm-medium truncate text-text-secondary",children:[a,r&&(0,s.jsx)("span",{className:"system-xs-regular text-text-tertiary",children:c("form.me",{ns:"datasetSettings"})})]}),(0,s.jsx)("div",{className:"system-xs-regular truncate text-text-tertiary",children:l})]}),n&&(0,s.jsx)(x.RiCheckLine,{className:(0,o.cn)("size-4 shrink-0 text-text-accent",r&&"opacity-30")})]})}),_=a.memo(e=>{let{leftIcon:t,text:a,onClick:i,isSelected:l}=e;return(0,s.jsxs)("div",{className:"flex cursor-pointer items-center gap-x-1 rounded-lg px-2 py-1 hover:bg-state-base-hover",onClick:i,children:[t,(0,s.jsx)("div",{className:"system-md-regular grow px-1 text-text-secondary",children:a}),l&&(0,s.jsx)(x.RiCheckLine,{className:"size-4 text-text-accent"})]})});e.s(["default",0,e=>{let{disabled:t,permission:l,value:n,memberList:d,onChange:c,onMemberSelect:m}=e,{t:u}=(0,i.useTranslation)(),h=(0,b.useSelector)(e=>e.userProfile),[g,p]=(0,a.useState)(!1),[w,k]=(0,a.useState)(""),[C,S]=(0,a.useState)(""),{run:M}=(0,f.useDebounceFn)(()=>{S(w)},{wait:500}),T=e=>{k(e),M()},I=(0,a.useCallback)(e=>{n.includes(e.id)?m(n.filter(s=>s!==e.id)):m([...n,e.id])},[n,m]),E=(0,a.useMemo)(()=>[h,...d.filter(e=>e.id!==h.id).filter(e=>n.includes(e.id))],[h,n,d]),z=(0,a.useMemo)(()=>h.name.includes(C)||h.email.includes(C),[C,h]),A=(0,a.useMemo)(()=>d.filter(e=>(e.name.includes(C)||e.email.includes(C))&&e.id!==h.id&&["owner","admin","editor","dataset_operator"].includes(e.role)),[d,C,h]),D=(0,a.useCallback)(()=>{c(y.DatasetPermission.onlyMe),p(!1)},[c]),F=(0,a.useCallback)(()=>{c(y.DatasetPermission.allTeamMembers),p(!1)},[c]),L=(0,a.useCallback)(()=>{c(y.DatasetPermission.partialMembers),m([h.id])},[c,m,h]),P=l===y.DatasetPermission.onlyMe,R=l===y.DatasetPermission.allTeamMembers,O=l===y.DatasetPermission.partialMembers,Q=E.map(e=>e.name).join(", ");return(0,s.jsx)(r.PortalToFollowElem,{open:g,onOpenChange:p,placement:"bottom-start",offset:4,children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(r.PortalToFollowElemTrigger,{onClick:()=>!t&&p(e=>!e),className:"block",children:(0,s.jsxs)("div",{className:(0,o.cn)("flex cursor-pointer items-center gap-x-0.5 rounded-lg bg-components-input-bg-normal px-2 py-1 hover:bg-state-base-hover-alt",g&&"bg-state-base-hover-alt",t&&"!cursor-not-allowed !bg-components-input-bg-disabled hover:!bg-components-input-bg-disabled"),children:[P&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex size-6 shrink-0 items-center justify-center",children:(0,s.jsx)(v.default,{avatar:h.avatar_url,name:h.name,size:20})}),(0,s.jsx)("div",{className:"system-sm-regular grow p-1 text-components-input-text-filled",children:u("form.permissionsOnlyMe",{ns:"datasetSettings"})})]}),R&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex size-6 shrink-0 items-center justify-center",children:(0,s.jsx)(x.RiGroup2Line,{className:"size-4 text-text-secondary"})}),(0,s.jsx)("div",{className:"system-sm-regular grow p-1 text-components-input-text-filled",children:u("form.permissionsAllMember",{ns:"datasetSettings"})})]}),O&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"relative flex size-6 shrink-0 items-center justify-center",children:[1===E.length&&(0,s.jsx)(v.default,{avatar:E[0].avatar_url,name:E[0].name,size:20}),E.length>=2&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.default,{avatar:E[0].avatar_url,name:E[0].name,className:"absolute left-0 top-0 z-0",size:16}),(0,s.jsx)(v.default,{avatar:E[1].avatar_url,name:E[1].name,className:"absolute bottom-0 right-0 z-10",size:16})]})]}),(0,s.jsx)("div",{title:Q,className:"system-sm-regular grow truncate p-1 text-components-input-text-filled",children:Q})]}),(0,s.jsx)(x.RiArrowDownSLine,{className:(0,o.cn)("h-4 w-4 shrink-0 text-text-quaternary group-hover:text-text-secondary",g&&"text-text-secondary",t&&"!text-components-input-text-placeholder")})]})}),(0,s.jsx)(r.PortalToFollowElemContent,{className:"z-[1002]",children:(0,s.jsxs)("div",{className:"relative w-[480px] rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg-blur shadow-lg shadow-shadow-shadow-5",children:[(0,s.jsxs)("div",{className:"p-1",children:[(0,s.jsx)(_,{leftIcon:(0,s.jsx)(v.default,{avatar:h.avatar_url,name:h.name,className:"shrink-0",size:24}),text:u("form.permissionsOnlyMe",{ns:"datasetSettings"}),onClick:D,isSelected:P}),(0,s.jsx)(_,{leftIcon:(0,s.jsx)("div",{className:"flex size-6 shrink-0 items-center justify-center",children:(0,s.jsx)(x.RiGroup2Line,{className:"size-4 text-text-secondary"})}),text:u("form.permissionsAllMember",{ns:"datasetSettings"}),onClick:F,isSelected:R}),(0,s.jsx)(_,{leftIcon:(0,s.jsx)("div",{className:"flex size-6 shrink-0 items-center justify-center",children:(0,s.jsx)(x.RiLock2Line,{className:"size-4 text-text-secondary"})}),text:u("form.permissionsInvitedMembers",{ns:"datasetSettings"}),onClick:L,isSelected:O})]}),O&&(0,s.jsxs)("div",{className:"max-h-[360px] overflow-y-auto border-t-[1px] border-divider-regular pb-1 pl-1 pr-1",children:[(0,s.jsx)("div",{className:"sticky left-0 top-0 z-10 bg-components-panel-on-panel-item-bg p-2 pb-1",children:(0,s.jsx)(j.default,{showLeftIcon:!0,showClearIcon:!0,value:w,onChange:e=>T(e.target.value),onClear:()=>T("")})}),(0,s.jsxs)("div",{className:"flex flex-col p-1",children:[z&&(0,s.jsx)(N,{leftIcon:(0,s.jsx)(v.default,{avatar:h.avatar_url,name:h.name,className:"shrink-0",size:24}),name:h.name,email:h.email,isSelected:!0,isMe:!0}),A.map(e=>(0,s.jsx)(N,{leftIcon:(0,s.jsx)(v.default,{avatar:e.avatar_url,name:e.name,className:"shrink-0",size:24}),name:e.name,email:e.email,isSelected:n.includes(e.id),onClick:I.bind(null,e)})),!z&&0===A.length&&(0,s.jsx)("div",{className:"system-xs-regular flex items-center justify-center whitespace-pre-wrap px-1 py-6 text-center text-text-tertiary",children:u("form.onSearchResults",{ns:"datasetSettings"})})]})]})]})})]})})}],584344)},180413,e=>{"use strict";var s=e.i(563199),t=e.i(837699),a=e.i(268255);e.i(152567);var i=e.i(408767),l=e.i(257899),n=e.i(360972),r=e.i(151094),o=e.i(757198);e.i(39598);var d=e.i(549289),c=e.i(291631),m=e.i(873517),x=e.i(137667),u=e.i(130990),h=e.i(194655),g=e.i(404853),p=e.i(739255),f=e.i(225162),v=e.i(117960),j=e.i(711536),b=e.i(413159),y=e.i(683257),N=e.i(621379),_=e.i(211857),w=e.i(225244),k=e.i(652669);e.i(698628);var C=e.i(127210),S=e.i(777582),M=e.i(447265);e.i(9633);var T=e.i(334163),I=e.i(684040),E=e.i(92234),z=e.i(619306);let A=a.memo(e=>{let{chunkStructure:t}=e,{options:a}=(()=>{let{t:e}=(0,i.useTranslation)();return{options:[{id:N.ChunkingMode.text,icon:(0,s.jsx)(T.GeneralChunk,{className:"size-[18px]"}),iconActiveColor:"text-util-colors-indigo-indigo-600",title:"General",description:e("stepTwo.generalTip",{ns:"datasetCreation"}),effectColor:z.EffectColor.indigo,showEffectColor:!0},{id:N.ChunkingMode.parentChild,icon:(0,s.jsx)(I.ParentChildChunk,{className:"size-[18px]"}),iconActiveColor:"text-util-colors-blue-light-blue-light-500",title:"Parent-Child",description:e("stepTwo.parentChildTip",{ns:"datasetCreation"}),effectColor:z.EffectColor.blueLight,showEffectColor:!0},{id:N.ChunkingMode.qa,icon:(0,s.jsx)(E.QuestionAndAnswer,{className:"size-[18px]"}),title:"Q&A",description:e("stepTwo.qaTip",{ns:"datasetCreation"})}]}})();return(0,s.jsx)("div",{className:"flex flex-col gap-y-1",children:a.map(e=>(0,s.jsx)(M.default,{id:e.id,icon:e.icon,iconActiveColor:e.iconActiveColor,title:e.title,description:e.description,isActive:t===e.id,effectColor:e.effectColor,showEffectColor:!0,className:"gap-x-1.5 p-3 pr-4",disabled:!0},e.id))})});var D=e.i(860507),F=e.i(584344),L=e.i(890644),P=e.i(616629);let R="flex gap-x-1",O="flex items-center shrink-0 w-[180px] h-7 pt-1",Q={icon_type:"emoji",icon:"ðŸ“™",icon_background:"#FFF4ED",icon_url:""};e.s(["default",0,()=>{let{t:e}=(0,i.useTranslation)(),M=(0,y.useDocLink)(),T=(0,j.useSelector)(e=>e.isCurrentWorkspaceDatasetOperator),I=(0,b.useDatasetDetailContextWithSelector)(e=>e.dataset),E=(0,b.useDatasetDetailContextWithSelector)(e=>e.mutateDatasetRes),[z,q]=(0,a.useState)(!1),[U,K]=(0,a.useState)(I?.name??""),[G,H]=(0,a.useState)(I?.icon_info||Q),[W,B]=(0,a.useState)(!1),[V,J]=(0,a.useState)(I?.description??""),[X,Y]=(0,a.useState)(I?.permission),[Z,$]=(0,a.useState)(I?.external_retrieval_model.top_k??2),[ee,es]=(0,a.useState)(I?.external_retrieval_model.score_threshold??.5),[et,ea]=(0,a.useState)(I?.external_retrieval_model.score_threshold_enabled??!1),[ei,el]=(0,a.useState)(I?.partial_member_list||[]),[en,er]=(0,a.useState)([]),[eo,ed]=(0,a.useState)(I?.indexing_technique),[ec,em]=(0,a.useState)(I?.keyword_number??10),[ex,eu]=(0,a.useState)(I?.retrieval_model_dict),[eh,eg]=(0,a.useState)(I?.embedding_model?{provider:I.embedding_model_provider,model:I.embedding_model}:{provider:"",model:""}),[ep,ef]=(0,a.useState)(I?.summary_index_setting),ev=(0,a.useCallback)(e=>{ef(s=>({...s,...e}))},[]),{data:ej}=(0,f.useModelList)(p.ModelTypeEnum.rerank),{data:eb}=(0,f.useModelList)(p.ModelTypeEnum.textEmbedding),{data:ey}=(0,k.useMembers)(),eN=(0,a.useRef)(Q),e_=(0,a.useCallback)(()=>{B(!0),eN.current=G},[G]),ew=(0,a.useCallback)(e=>{H({icon_type:e.type,icon:"emoji"===e.type?e.icon:e.fileId,icon_background:"emoji"===e.type?e.background:void 0,icon_url:"emoji"===e.type?void 0:e.url}),B(!1)},[]),ek=(0,a.useCallback)(()=>{H(eN.current),B(!1)},[]),eC=(0,a.useCallback)(e=>{void 0!==e.top_k&&$(e.top_k),void 0!==e.score_threshold&&es(e.score_threshold),void 0!==e.score_threshold_enabled&&ea(e.score_threshold_enabled)},[]);(0,a.useEffect)(()=>{ey?.accounts?er(ey.accounts):er([])},[ey]);let eS=(0,w.useInvalidDatasetList)(),eM=async()=>{if(!z){if(!U?.trim())return void x.default.notify({type:"error",message:e("form.nameError",{ns:"datasetSettings"})});if(!(0,u.isReRankModelSelected)({rerankModelList:ej,retrievalConfig:ex,indexMethod:eo}))return void x.default.notify({type:"error",message:e("datasetConfig.rerankModelRequired",{ns:"appDebug"})});ex.weights&&(ex.weights.vector_setting.embedding_provider_name=eh.provider||"",ex.weights.vector_setting.embedding_model_name=eh.model||"");try{q(!0);let s={datasetId:I.id,body:{name:U,icon_info:G,doc_form:I?.doc_form,description:V,permission:X,indexing_technique:eo,retrieval_model:{...ex,score_threshold:ex.score_threshold_enabled?ex.score_threshold:0},embedding_model:eh.model,embedding_model_provider:eh.provider,..."external"===I.provider&&{external_knowledge_id:I.external_knowledge_info.external_knowledge_id,external_knowledge_api_id:I.external_knowledge_info.external_knowledge_api_id,external_retrieval_model:{top_k:Z,score_threshold:ee,score_threshold_enabled:et}},keyword_number:ec,summary_index_setting:ep}};X===N.DatasetPermission.partialMembers&&(s.body.partial_member_list=ei.map(e=>({user_id:e,role:en.find(s=>s.id===e)?.role}))),await (0,_.updateDatasetSetting)(s),x.default.notify({type:"success",message:e("actionMsg.modifiedSuccessfully",{ns:"common"})}),E&&(await E(),eS())}catch{x.default.notify({type:"error",message:e("actionMsg.modifiedUnsuccessfully",{ns:"common"})})}finally{q(!1)}}},eT=I&&I.doc_form!==N.ChunkingMode.parentChild&&I.indexing_technique&&eo,eI=(0,a.useMemo)(()=>(0,P.checkShowMultiModalTip)({embeddingModel:eh,rerankingEnable:ex.reranking_enable,rerankModel:{rerankingProviderName:ex.reranking_model.reranking_provider_name,rerankingModelName:ex.reranking_model.reranking_model_name},indexMethod:eo,embeddingModelList:eb,rerankModelList:ej}),[eh,ej,ex.reranking_enable,ex.reranking_model,eb,eo]);return(0,s.jsxs)("div",{className:"flex w-full flex-col gap-y-4 px-20 py-8 sm:w-[960px]",children:[(0,s.jsxs)("div",{className:R,children:[(0,s.jsx)("div",{className:O,children:(0,s.jsx)("div",{className:"system-sm-semibold text-text-secondary",children:e("form.nameAndIcon",{ns:"datasetSettings"})})}),(0,s.jsxs)("div",{className:"flex grow items-center gap-x-2",children:[(0,s.jsx)(l.default,{size:"small",onClick:e_,className:"cursor-pointer",iconType:G.icon_type,icon:G.icon,background:G.icon_background,imageUrl:G.icon_url,showEditIcon:!0}),(0,s.jsx)(c.default,{disabled:!I?.embedding_available,value:U,onChange:e=>K(e.target.value)})]})]}),(0,s.jsxs)("div",{className:R,children:[(0,s.jsx)("div",{className:O,children:(0,s.jsx)("div",{className:"system-sm-semibold text-text-secondary",children:e("form.desc",{ns:"datasetSettings"})})}),(0,s.jsx)("div",{className:"grow",children:(0,s.jsx)(m.default,{disabled:!I?.embedding_available,className:"resize-none",placeholder:e("form.descPlaceholder",{ns:"datasetSettings"})||"",value:V,onChange:e=>J(e.target.value)})})]}),(0,s.jsxs)("div",{className:R,children:[(0,s.jsx)("div",{className:O,children:(0,s.jsx)("div",{className:"system-sm-semibold text-text-secondary",children:e("form.permissions",{ns:"datasetSettings"})})}),(0,s.jsx)("div",{className:"grow",children:(0,s.jsx)(F.default,{disabled:!I?.embedding_available||T,permission:X,value:ei,onChange:e=>Y(e),onMemberSelect:el,memberList:en})})]}),!!I?.doc_form&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.default,{type:"horizontal",className:"my-1 h-px bg-divider-subtle"}),(0,s.jsxs)("div",{className:R,children:[(0,s.jsxs)("div",{className:"flex w-[180px] shrink-0 flex-col",children:[(0,s.jsx)("div",{className:"system-sm-semibold flex h-8 items-center text-text-secondary",children:e("form.chunkStructure.title",{ns:"datasetSettings"})}),(0,s.jsxs)("div",{className:"body-xs-regular text-text-tertiary",children:[(0,s.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:M("/use-dify/knowledge/create-knowledge/chunking-and-cleaning-text"),className:"text-text-accent",children:e("form.chunkStructure.learnMore",{ns:"datasetSettings"})}),e("form.chunkStructure.description",{ns:"datasetSettings"})]})]}),(0,s.jsx)("div",{className:"grow",children:(0,s.jsx)(A,{chunkStructure:I?.doc_form})})]})]}),!!(eT||"high_quality"===eo)&&(0,s.jsx)(o.default,{type:"horizontal",className:"my-1 h-px bg-divider-subtle"}),!!eT&&(0,s.jsxs)("div",{className:R,children:[(0,s.jsx)("div",{className:O,children:(0,s.jsx)("div",{className:"system-sm-semibold text-text-secondary",children:e("form.indexMethod",{ns:"datasetSettings"})})}),(0,s.jsxs)("div",{className:"grow",children:[(0,s.jsx)(D.default,{value:eo,disabled:!I?.embedding_available,onChange:e=>ed(e),currentValue:I.indexing_technique,keywordNumber:ec,onKeywordNumberChange:em}),I.indexing_technique===C.IndexingType.ECONOMICAL&&eo===C.IndexingType.QUALIFIED&&(0,s.jsxs)("div",{className:"relative mt-2 flex h-10 items-center gap-x-0.5 overflow-hidden rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg-blur px-2 shadow-xs shadow-shadow-shadow-3",children:[(0,s.jsx)("div",{className:"absolute left-0 top-0 flex h-full w-full items-center bg-toast-warning-bg opacity-40"}),(0,s.jsx)("div",{className:"p-1",children:(0,s.jsx)(t.RiAlertFill,{className:"size-4 text-text-warning-secondary"})}),(0,s.jsx)("span",{className:"system-xs-medium text-text-primary",children:e("form.upgradeHighQualityTip",{ns:"datasetSettings"})})]})]})]}),eo===C.IndexingType.QUALIFIED&&(0,s.jsxs)("div",{className:R,children:[(0,s.jsx)("div",{className:O,children:(0,s.jsx)("div",{className:"system-sm-semibold text-text-secondary",children:e("form.embeddingModel",{ns:"datasetSettings"})})}),(0,s.jsx)("div",{className:"grow",children:(0,s.jsx)(v.default,{defaultModel:eh,modelList:eb,onSelect:eg})})]}),eo===C.IndexingType.QUALIFIED&&[N.ChunkingMode.text,N.ChunkingMode.parentChild].includes(I?.doc_form)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.default,{type:"horizontal",className:"my-1 h-px bg-divider-subtle"}),(0,s.jsx)(L.default,{entry:"dataset-settings",summaryIndexSetting:ep,onSummaryIndexSettingChange:ev})]}),I?.provider==="external"?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.default,{type:"horizontal",className:"my-1 h-px bg-divider-subtle"}),(0,s.jsxs)("div",{className:R,children:[(0,s.jsx)("div",{className:O,children:(0,s.jsx)("div",{className:"system-sm-semibold text-text-secondary",children:e("form.retrievalSetting.title",{ns:"datasetSettings"})})}),(0,s.jsx)(S.default,{topK:Z,scoreThreshold:ee,scoreThresholdEnabled:et,onChange:eC,isInRetrievalSetting:!0})]}),(0,s.jsx)(o.default,{type:"horizontal",className:"my-1 h-px bg-divider-subtle"}),(0,s.jsxs)("div",{className:R,children:[(0,s.jsx)("div",{className:O,children:(0,s.jsx)("div",{className:"system-sm-semibold text-text-secondary",children:e("form.externalKnowledgeAPI",{ns:"datasetSettings"})})}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("div",{className:"flex h-full items-center gap-1 rounded-lg bg-components-input-bg-normal px-3 py-2",children:[(0,s.jsx)(d.ApiConnectionMod,{className:"h-4 w-4 text-text-secondary"}),(0,s.jsx)("div",{className:"system-sm-medium overflow-hidden text-ellipsis text-text-secondary",children:I?.external_knowledge_info.external_knowledge_api_name}),(0,s.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:"Â·"}),(0,s.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:I?.external_knowledge_info.external_knowledge_api_endpoint})]})})]}),(0,s.jsxs)("div",{className:R,children:[(0,s.jsx)("div",{className:O,children:(0,s.jsx)("div",{className:"system-sm-semibold text-text-secondary",children:e("form.externalKnowledgeID",{ns:"datasetSettings"})})}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("div",{className:"flex h-full items-center gap-1 rounded-lg bg-components-input-bg-normal px-3 py-2",children:(0,s.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:I?.external_knowledge_info.external_knowledge_id})})})]})]}):eo?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.default,{type:"horizontal",className:"my-1 h-px bg-divider-subtle"}),(0,s.jsxs)("div",{className:R,children:[(0,s.jsx)("div",{className:O,children:(0,s.jsxs)("div",{className:"flex w-[180px] shrink-0 flex-col",children:[(0,s.jsx)("div",{className:"system-sm-semibold flex h-7 items-center pt-1 text-text-secondary",children:e("form.retrievalSetting.title",{ns:"datasetSettings"})}),(0,s.jsxs)("div",{className:"body-xs-regular text-text-tertiary",children:[(0,s.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:M("/use-dify/knowledge/create-knowledge/setting-indexing-methods"),className:"text-text-accent",children:e("form.retrievalSetting.learnMore",{ns:"datasetSettings"})}),e("form.retrievalSetting.description",{ns:"datasetSettings"})]})]})}),(0,s.jsx)("div",{className:"grow",children:eo===C.IndexingType.QUALIFIED?(0,s.jsx)(g.default,{value:ex,onChange:eu,showMultiModalTip:eI}):(0,s.jsx)(h.default,{value:ex,onChange:eu})})]})]}):null,(0,s.jsx)(o.default,{type:"horizontal",className:"my-1 h-px bg-divider-subtle"}),(0,s.jsxs)("div",{className:R,children:[(0,s.jsx)("div",{className:O}),(0,s.jsx)("div",{className:"grow",children:(0,s.jsx)(r.default,{className:"min-w-24",variant:"primary",loading:z,disabled:z,onClick:eM,children:e("form.save",{ns:"datasetSettings"})})})]}),W&&(0,s.jsx)(n.default,{onSelect:ew,onClose:ek})]})}],180413)}]);