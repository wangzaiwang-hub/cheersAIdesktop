(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,661509,e=>{"use strict";var t=e.i(563199),o=e.i(837699),s=e.i(268255);e.i(152567);var r=e.i(408767),l=e.i(654313),a=e.i(151094),n=e.i(521632),i=e.i(449980),d=e.i(988720),c=e.i(633957),m=e.i(580932),u=e.i(519436),x=e.i(312343);e.i(302047);var h=e.i(674245),p=e.i(325011),g=e.i(665127),f=e.i(946700),b=e.i(885327),y=e.i(683257),w=e.i(491234),v=e.i(344600),j=e.i(935139);let C=s.memo(e=>{let C,{showBackButton:k=!1,collection:N,isBuiltIn:T=!0,isModel:E=!0,toolName:I,setting:B={},readonly:S,onHide:_,onSave:z,credentialId:O,onAuthorizationItemClick:L}=e,R=(0,y.useLocale)(),F=(0,w.getLanguage)(R),{t:P}=(0,r.useTranslation)(),H=N.tools,M=H?.length>0,[A,D]=(0,s.useState)(!M),[$,U]=(0,s.useState)(M?H:[]),V=$.find(e=>e.name===I),G=V?(0,b.toolParametersToFormSchemas)(V.parameters):[],Z=G.filter(e=>"llm"===e.form),q=G.filter(e=>"llm"!==e.form),K=q.length>0,[W,X]=(0,s.useState)(B),[Q,J]=(0,s.useState)("info"),Y="info"===Q;(0,s.useEffect)(()=>{N&&!M&&(async()=>{D(!0);try{let e=await new Promise(e=>{!async function(){E?e(await (0,v.fetchModelToolList)(N.name)):T?e(await (0,v.fetchBuiltInToolList)(N.name)):N.type===f.CollectionType.workflow?e(await (0,v.fetchWorkflowToolList)(N.id)):e(await (0,v.fetchCustomToolList)(N.name))}()});U(e)}catch{}D(!1)})()},[N?.name,N?.id,N?.type]),(0,s.useEffect)(()=>{J(!S&&K?"setting":"info")},[K]);let ee=(C=!0,q.forEach(e=>{e.required&&!W[e.name]&&(C=!1)}),C),et=(0,t.jsx)("div",{className:"",children:Z.length>0&&(0,t.jsx)("div",{className:"space-y-1 py-2",children:Z.map((e,o)=>{var s;return(0,t.jsxs)("div",{className:"py-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"code-sm-semibold text-text-secondary",children:e.label[F]}),(0,t.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:"number-input"===(s=e.type)?P("setBuiltInTools.number",{ns:"tools"}):"text-input"===s?P("setBuiltInTools.string",{ns:"tools"}):"checkbox"===s?"boolean":"file"===s?P("setBuiltInTools.file",{ns:"tools"}):s}),e.required&&(0,t.jsx)("div",{className:"system-xs-medium text-text-warning-secondary",children:P("setBuiltInTools.required",{ns:"tools"})})]}),e.human_description&&(0,t.jsx)("div",{className:"system-xs-regular mt-0.5 text-text-tertiary",children:e.human_description?.[F]})]},o)})})}),eo=(0,t.jsx)(c.default,{value:W,onChange:X,formSchemas:q,isEditMode:!1,showOnVariableMap:{},validating:!1,readonly:S});return(0,t.jsx)(n.default,{isOpen:!0,clickOutsideNotOpen:!1,onClose:_,footer:null,mask:!1,positionCenter:!1,panelClassName:(0,j.cn)("mb-2 mr-2 mt-[64px] !w-[420px] !max-w-[420px] justify-start rounded-2xl border-[0.5px] border-components-panel-border !bg-components-panel-bg !p-0 shadow-xl"),children:(0,t.jsxs)(t.Fragment,{children:[A&&(0,t.jsx)(i.default,{type:"app"}),!A&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"relative border-b border-divider-subtle p-4 pb-3",children:[(0,t.jsx)("div",{className:"absolute right-3 top-3",children:(0,t.jsx)(l.default,{onClick:_,children:(0,t.jsx)(o.RiCloseLine,{className:"h-4 w-4"})})}),k&&(0,t.jsxs)("div",{className:"system-xs-semibold-uppercase mb-2 flex cursor-pointer items-center gap-1 text-text-accent-secondary",onClick:_,children:[(0,t.jsx)(o.RiArrowLeftLine,{className:"h-4 w-4"}),P("detailPanel.operation.back",{ns:"plugin"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(m.default,{size:"tiny",className:"h-6 w-6",src:N.icon}),(0,t.jsx)(x.default,{packageNameClassName:"w-auto",orgName:N.author,packageName:N.name.split("/").pop()||""})]}),(0,t.jsx)("div",{className:"system-md-semibold mt-1 text-text-primary",children:V?.label[F]}),!!V?.description[F]&&(0,t.jsx)(u.default,{className:"mb-2 mt-3 h-auto",text:V.description[F],descriptionLineRows:2}),N.allow_delete&&N.type===f.CollectionType.builtIn&&(0,t.jsx)(p.PluginAuthInAgent,{pluginPayload:{provider:N.name,category:h.AuthCategory.tool,providerType:N.type,detail:N},credentialId:O,onAuthorizationItemClick:L})]}),(0,t.jsx)("div",{className:"h-full",children:(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[K&&!S?(0,t.jsx)(d.default,{className:"mt-1 shrink-0 px-4",itemClassName:"py-3",noBorderBottom:!0,value:Q,onChange:e=>{J(e)},options:[{value:"info",text:P("setBuiltInTools.parameters",{ns:"tools"})},{value:"setting",text:P("setBuiltInTools.setting",{ns:"tools"})}]}):(0,t.jsx)("div",{className:"system-sm-semibold-uppercase p-4 pb-1 text-text-primary",children:P("setBuiltInTools.parameters",{ns:"tools"})}),(0,t.jsxs)("div",{className:"h-0 grow overflow-y-auto px-4",children:[Y?et:eo,!S&&!Y&&(0,t.jsxs)("div",{className:"flex shrink-0 justify-end space-x-2 rounded-b-[10px] bg-components-panel-bg py-2",children:[(0,t.jsx)(a.default,{className:"flex h-8 items-center !px-3 !text-[13px] font-medium ",onClick:_,children:P("operation.cancel",{ns:"common"})}),(0,t.jsx)(a.default,{className:"flex h-8 items-center !px-3 !text-[13px] font-medium",variant:"primary",disabled:!ee,onClick:()=>z?.(W),children:P("operation.save",{ns:"common"})})]})]}),(0,t.jsx)(g.ReadmeEntrance,{pluginDetail:N,className:"mt-auto"})]})})]})]})})});e.s(["default",0,C])},216425,e=>{"use strict";var t=e.i(268255);e.i(152567);var o=e.i(408767);e.s(["useKnowledge",0,()=>{let{t:e}=(0,o.useTranslation)(),s=(0,t.useCallback)(t=>e(`indexingTechnique.${t}`,{ns:"dataset"}),[e]),r=(0,t.useCallback)((t,o)=>o?e("indexingMethod.invertedIndex",{ns:"dataset"}):e(`indexingMethod.${t}`,{ns:"dataset"}),[e]),l=(0,t.useCallback)((e,t)=>{let o=s(e);return t&&(o+=` \xb7 ${r(t,"economy"===e)}`),o},[s,r]);return{formatIndexingTechnique:s,formatIndexingMethod:r,formatIndexingTechniqueAndMethod:l}}])},199947,e=>{"use strict";var t=e.i(339548),o=e.i(167362);class s{chatColorTheme;chatColorThemeInverted;primaryColor="#1C64F2";backgroundHeaderColorStyle="backgroundImage: linear-gradient(to right, #2563eb, #0ea5e9)";headerBorderBottomStyle="";colorFontOnHeaderStyle="color: white";colorPathOnHeader="text-text-primary-on-surface";backgroundButtonDefaultColorStyle="backgroundColor: #1C64F2";roundedBackgroundColorStyle="backgroundColor: rgb(245 248 255)";chatBubbleColorStyle="";constructor(e=null,t=!1){this.chatColorTheme=e,this.chatColorThemeInverted=t,this.configCustomColor(),this.configInvertedColor()}configCustomColor(){null!==this.chatColorTheme&&""!==this.chatColorTheme&&(this.primaryColor=this.chatColorTheme??"#1C64F2",this.backgroundHeaderColorStyle=`backgroundColor: ${this.primaryColor}`,this.backgroundButtonDefaultColorStyle=`backgroundColor: ${this.primaryColor}; color: ${this.colorFontOnHeaderStyle};`,this.roundedBackgroundColorStyle=`backgroundColor: ${(0,o.hexToRGBA)(this.primaryColor,.05)}`,this.chatBubbleColorStyle=`backgroundColor: ${(0,o.hexToRGBA)(this.primaryColor,.15)}`)}configInvertedColor(){this.chatColorThemeInverted&&(this.backgroundHeaderColorStyle="backgroundColor: #ffffff",this.colorFontOnHeaderStyle=`color: ${this.primaryColor}`,this.headerBorderBottomStyle="borderBottom: 1px solid #ccc",this.colorPathOnHeader=this.primaryColor)}}let r=(0,t.createContext)(new class{_theme;buildChecker=!1;get theme(){return void 0===this._theme&&(this._theme=new s),this._theme}buildTheme(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.buildChecker?(this.theme?.chatColorTheme!==e||this.theme?.chatColorThemeInverted!==t)&&(this._theme=new s(e,t),this.buildChecker=!0):(this._theme=new s(e,t),this.buildChecker=!0)}});e.s(["useThemeContext",0,()=>(0,t.useContext)(r)])},458266,e=>{"use strict";e.i(733437),e.s([])},16453,e=>{e.v({item:"style-module__2BvUtq__item"})},823660,781276,e=>{"use strict";var t=e.i(563199),o=e.i(268255);e.i(152567);var s=e.i(408767),r=e.i(151094),l=e.i(16453);let a=o.memo(e=>{let{name:o,className:s=""}=e;return(0,t.jsxs)("div",{className:`${l.default.item} ${s} mb-2 inline-flex h-5 items-center justify-center rounded-md px-1 text-xs font-medium text-primary-600`,children:[(0,t.jsx)("span",{className:"opacity-60",children:"{{"}),(0,t.jsx)("span",{children:o}),(0,t.jsx)("span",{className:"opacity-60",children:"}}"})]},o)});e.s(["default",0,a],781276);let n=(0,t.jsxs)("svg",{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M13.8683 0.704745C13.7051 0.374685 13.3053 0.239393 12.9752 0.402563C12.6452 0.565732 12.5099 0.965573 12.673 1.29563C13.5221 3.01316 13.9999 4.94957 13.9999 7.00019C13.9999 9.05081 13.5221 10.9872 12.673 12.7047C12.5099 13.0348 12.6452 13.4346 12.9752 13.5978C13.3053 13.761 13.7051 13.6257 13.8683 13.2956C14.8063 11.3983 15.3333 9.26009 15.3333 7.00019C15.3333 4.74029 14.8063 2.60209 13.8683 0.704745Z",fill:"#FD853A"}),(0,t.jsx)("path",{d:"M3.32687 1.29563C3.49004 0.965573 3.35475 0.565732 3.02469 0.402563C2.69463 0.239393 2.29479 0.374685 2.13162 0.704745C1.19364 2.60209 0.666626 4.74029 0.666626 7.00019C0.666626 9.26009 1.19364 11.3983 2.13162 13.2956C2.29479 13.6257 2.69463 13.761 3.02469 13.5978C3.35475 13.4346 3.49004 13.0348 3.32687 12.7047C2.47779 10.9872 1.99996 9.05081 1.99996 7.00019C1.99996 4.94957 2.47779 3.01316 3.32687 1.29563Z",fill:"#FD853A"}),(0,t.jsx)("path",{d:"M9.33238 4.8413C9.74208 4.36081 10.3411 4.08337 10.9726 4.08337H11.0324C11.4006 4.08337 11.6991 4.38185 11.6991 4.75004C11.6991 5.11823 11.4006 5.41671 11.0324 5.41671H10.9726C10.7329 5.41671 10.5042 5.52196 10.347 5.7064L8.78693 7.536L9.28085 9.27382C9.29145 9.31112 9.32388 9.33337 9.35696 9.33337H10.2864C10.6545 9.33337 10.953 9.63185 10.953 10C10.953 10.3682 10.6545 10.6667 10.2864 10.6667H9.35696C8.72382 10.6667 8.17074 10.245 7.99832 9.63834L7.74732 8.75524L6.76373 9.90878C6.35403 10.3893 5.75501 10.6667 5.1235 10.6667H5.06372C4.69553 10.6667 4.39705 10.3682 4.39705 10C4.39705 9.63185 4.69553 9.33337 5.06372 9.33337H5.1235C5.3632 9.33337 5.59189 9.22812 5.74915 9.04368L7.30926 7.21399L6.81536 5.47626C6.80476 5.43897 6.77233 5.41671 6.73925 5.41671H5.80986C5.44167 5.41671 5.14319 5.11823 5.14319 4.75004C5.14319 4.38185 5.44167 4.08337 5.80986 4.08337H6.73925C7.37239 4.08337 7.92547 4.50508 8.0979 5.11174L8.34887 5.99475L9.33238 4.8413Z",fill:"#FD853A"})]}),i=o.memo(e=>{let{varNameArr:l,onConfirm:i,onCancel:d}=e,{t:c}=(0,s.useTranslation)(),m=(0,o.useRef)(null);return(0,t.jsx)("div",{className:"absolute inset-0  flex items-center justify-center rounded-xl",style:{backgroundColor:"rgba(35, 56, 118, 0.2)"},children:(0,t.jsxs)("div",{ref:m,className:"w-[420px] rounded-xl bg-components-panel-bg p-6",style:{boxShadow:"0px 12px 16px -4px rgba(16, 24, 40, 0.08), 0px 4px 6px -2px rgba(16, 24, 40, 0.03)"},children:[(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl border border-components-card-border bg-components-card-bg-alt shadow-lg",children:n}),(0,t.jsxs)("div",{className:"grow-1",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-text-primary",children:c("autoAddVar",{ns:"appDebug"})}),(0,t.jsx)("div",{className:"mt-[15px] flex max-h-[66px] flex-wrap space-x-1 overflow-y-auto px-1",children:l.map(e=>(0,t.jsx)(a,{name:e},e))})]})]}),(0,t.jsxs)("div",{className:"mt-7 flex justify-end space-x-2",children:[(0,t.jsx)(r.default,{onClick:d,children:c("operation.cancel",{ns:"common"})}),(0,t.jsx)(r.default,{variant:"primary",onClick:i,children:c("operation.add",{ns:"common"})})]})]})})});e.s(["default",0,i],823660)},445924,e=>{"use strict";var t,o=e.i(563199),s=e.i(268255),r=e.i(389358),l=e.i(192447),a=e.i(876057),n=e.i(234766),i=e.i(959752),d=e.i(490525),c=e.i(786191),m=e.i(4520),u=e.i(534042),x=e.i(794611),h=e.i(322034),p=e.i(935139),g=e.i(174383),f=e.i(381086),b=e.i(390622);e.i(905691);var y=e.i(735900);let w=(0,s.memo)(e=>{let{id:t,data:r,sourceHandleId:a,sourceX:n,sourceY:i,targetX:d,targetY:c,selected:m}=e,[u]=(0,l.getBezierPath)({sourceX:n-8,sourceY:i,sourcePosition:l.Position.Right,targetX:d+8,targetY:c,targetPosition:l.Position.Left,curvature:.16}),{_sourceRunningStatus:x,_targetRunningStatus:h}=r,p=(0,s.useMemo)(()=>{if((x===b.NodeRunningStatus.Succeeded||x===b.NodeRunningStatus.Failed||x===b.NodeRunningStatus.Exception)&&(h===b.NodeRunningStatus.Succeeded||h===b.NodeRunningStatus.Failed||h===b.NodeRunningStatus.Exception||h===b.NodeRunningStatus.Running))return t},[x,h,t]),w=(0,s.useMemo)(()=>m?(0,y.getEdgeColor)(b.NodeRunningStatus.Running):p?`url(#${p})`:r?._connectedNodeIsHovering?(0,y.getEdgeColor)(b.NodeRunningStatus.Running,a===f.ErrorHandleTypeEnum.failBranch):(0,y.getEdgeColor)(),[r._connectedNodeIsHovering,p,m,a]);return(0,o.jsxs)(o.Fragment,{children:[p&&(0,o.jsx)(g.default,{id:p,startColor:(0,y.getEdgeColor)(x),stopColor:(0,y.getEdgeColor)(h),position:{x1:n,y1:i,x2:d,y2:c}}),(0,o.jsx)(l.BaseEdge,{id:t,path:u,style:{stroke:w,strokeWidth:2,opacity:r._waitingRun?.7:1}})]})});e.i(152567);var v=e.i(408767),j=e.i(421001),C=e.i(120219),k=e.i(911684);let N=(0,s.memo)(e=>{let{data:t,handleId:s,handleClassName:r}=e,a=t._connectedTargetHandleIds?.includes(s);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(l.Handle,{id:s,type:"target",position:l.Position.Left,className:(0,p.cn)("z-[1] !h-4 !w-4 !rounded-none !border-none !bg-transparent !outline-none","after:absolute after:left-1.5 after:top-1 after:h-2 after:w-0.5 after:bg-workflow-link-line-handle","transition-all hover:scale-125",!a&&"after:opacity-0",(t.type===b.BlockEnum.Start||t.type===b.BlockEnum.TriggerWebhook||t.type===b.BlockEnum.TriggerSchedule||t.type===b.BlockEnum.TriggerPlugin)&&"opacity-0",r)})})});N.displayName="NodeTargetHandle";let T=(0,s.memo)(e=>{let{data:t,handleId:s,handleClassName:r}=e,a=t._connectedSourceHandleIds?.includes(s);return(0,o.jsx)(l.Handle,{id:s,type:"source",position:l.Position.Right,className:(0,p.cn)("group/handle z-[1] !h-4 !w-4 !rounded-none !border-none !bg-transparent !outline-none","after:absolute after:right-1.5 after:top-1 after:h-2 after:w-0.5 after:bg-workflow-link-line-handle","transition-all hover:scale-125",!a&&"after:opacity-0",r)})});T.displayName="NodeSourceHandle";let E=e=>{let{id:t,data:r}=e,{t:a}=(0,v.useTranslation)(),{error_strategy:n}=r,i=(0,l.useUpdateNodeInternals)();return((0,s.useEffect)(()=>{n===f.ErrorHandleTypeEnum.failBranch&&i(t)},[n,t,i]),n)?(0,o.jsx)("div",{className:"relative px-3 pb-2 pt-1",children:(0,o.jsxs)("div",{className:(0,p.cn)("relative flex h-6 items-center justify-between rounded-md bg-workflow-block-parma-bg px-[5px]",r._runningStatus===b.NodeRunningStatus.Exception&&"border-[0.5px] border-components-badge-status-light-warning-halo bg-state-warning-hover"),children:[(0,o.jsx)("div",{className:"system-xs-medium-uppercase text-text-tertiary",children:a("common.onFailure",{ns:"workflow"})}),(0,o.jsxs)("div",{className:(0,p.cn)("system-xs-medium text-text-secondary",r._runningStatus===b.NodeRunningStatus.Exception&&"text-text-warning"),children:[n===f.ErrorHandleTypeEnum.defaultValue&&a("nodes.common.errorHandle.defaultValue.output",{ns:"workflow"}),n===f.ErrorHandleTypeEnum.failBranch&&a("nodes.common.errorHandle.failBranch.title",{ns:"workflow"})]}),n===f.ErrorHandleTypeEnum.failBranch&&(0,o.jsx)(T,{id:t,data:r,handleId:f.ErrorHandleTypeEnum.failBranch,handleClassName:"!top-1/2 !-right-[21px] !-translate-y-1/2 after:!bg-workflow-link-line-failure-button-bg"})]})}):null},I=(0,s.memo)(e=>{let{id:t,data:r,children:l}=e,{t:a}=(0,v.useTranslation)();return(0,o.jsx)("div",{className:(0,p.cn)("flex rounded-2xl border-[2px] border-transparent"),style:{width:r.type===b.BlockEnum.Iteration||r.type===b.BlockEnum.Loop?r.width:"auto",height:r.type===b.BlockEnum.Iteration||r.type===b.BlockEnum.Loop?r.height:"auto"},children:(0,o.jsxs)("div",{className:(0,p.cn)("group relative pb-1 shadow-xs","rounded-[15px] border border-transparent","bg-workflow-block-bg hover:shadow-lg"),style:{width:r.type===b.BlockEnum.Iteration||r.type===b.BlockEnum.Loop?r.width:"240px",height:r.type===b.BlockEnum.Iteration||r.type===b.BlockEnum.Loop?r.height:"auto"},children:[(0,o.jsxs)("div",{className:(0,p.cn)("flex items-center rounded-t-2xl px-3 pb-2 pt-3"),children:[(0,o.jsx)(N,{id:t,data:r,handleClassName:"!top-4 !-left-[9px] !translate-y-0",handleId:"target"}),r.type!==b.BlockEnum.IfElse&&r.type!==b.BlockEnum.QuestionClassifier&&(0,o.jsx)(T,{id:t,data:r,handleClassName:"!top-4 !-right-[9px] !translate-y-0",handleId:"source"}),(0,o.jsx)(C.default,{className:"mr-2 shrink-0",type:r.type,size:"md"}),(0,o.jsxs)("div",{title:r.title,className:"system-sm-semibold-uppercase mr-1 flex grow items-center truncate text-text-primary",children:[(0,o.jsx)("div",{children:r.title}),r.type===b.BlockEnum.Iteration&&r.is_parallel&&(0,o.jsx)(j.default,{popupContent:(0,o.jsxs)("div",{className:"w-[180px]",children:[(0,o.jsx)("div",{className:"font-extrabold",children:a("nodes.iteration.parallelModeEnableTitle",{ns:"workflow"})}),a("nodes.iteration.parallelModeEnableDesc",{ns:"workflow"})]}),children:(0,o.jsx)("div",{className:"system-2xs-medium-uppercase ml-1 flex items-center justify-center rounded-[5px] border-[1px] border-text-warning px-[5px] py-[3px] text-text-warning ",children:a("nodes.iteration.parallelModeUpper",{ns:"workflow"})})})]})]}),r.type!==b.BlockEnum.Iteration&&r.type!==b.BlockEnum.Loop&&l&&(0,s.cloneElement)(l,{id:t,data:r}),(r.type===b.BlockEnum.Iteration||r.type===b.BlockEnum.Loop)&&l&&(0,o.jsx)("div",{className:"h-[calc(100%-42px)] w-full grow pb-1 pl-1 pr-1",children:(0,s.cloneElement)(l,{id:t,data:r})}),(0,k.hasErrorHandleNode)(r.type)&&(0,o.jsx)(E,{id:t,data:r}),r.desc&&r.type!==b.BlockEnum.Iteration&&r.type!==b.BlockEnum.Loop&&(0,o.jsx)("div",{className:"system-xs-regular whitespace-pre-line break-words px-3 pb-2 pt-1 text-text-tertiary",children:r.desc})]})})});var B=e.i(555503),S=e.i(166211),_=e.i(146106);let z="nodes.ifElse",O=s.memo(e=>{let{data:t}=e,{t:r}=(0,v.useTranslation)(),{cases:l}=t,a=l.length,n=(0,s.useCallback)(e=>!!e.variable_selector&&0!==e.variable_selector.length&&(e.sub_variable_condition?e.sub_variable_condition.conditions.every(e=>!!e.comparison_operator&&(!!(0,_.isEmptyRelatedOperator)(e.comparison_operator)||!!e.value)):!!(0,_.isEmptyRelatedOperator)(e.comparison_operator)||!!e.value),[]),i=(0,o.jsx)("div",{className:"flex h-6 items-center space-x-1 rounded-md bg-workflow-block-parma-bg px-1 text-xs font-normal text-text-secondary",children:r(`${z}.conditionNotSetup`,{ns:"workflow"})});return(0,o.jsxs)("div",{className:"px-3",children:[l.map((t,s)=>(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"relative flex h-6 items-center px-1",children:[(0,o.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,o.jsx)("div",{className:"text-[10px] font-semibold text-text-tertiary",children:a>1&&`CASE ${s+1}`}),(0,o.jsx)("div",{className:"text-[12px] font-semibold text-text-secondary",children:0===s?"IF":"ELIF"})]}),(0,o.jsx)(T,{...e,handleId:t.case_id,handleClassName:"!top-1/2 !-right-[21px] !-translate-y-1/2"})]}),(0,o.jsx)("div",{className:"space-y-0.5",children:t.conditions.map((e,s)=>(0,o.jsxs)("div",{className:"relative",children:[n(e)?!(0,_.isEmptyRelatedOperator)(e.comparison_operator)&&e.sub_variable_condition?(0,o.jsx)(B.default,{condition:e}):(0,o.jsx)(S.default,{variableSelector:e.variable_selector,operator:e.comparison_operator,value:e.value}):i,s!==t.conditions.length-1&&(0,o.jsx)("div",{className:"absolute bottom-[-10px] right-1 z-10 text-[10px] font-medium uppercase leading-4 text-text-accent",children:r(`${z}.${t.logical_operator}`,{ns:"workflow"})})]},e.id))})]},t.case_id)),(0,o.jsxs)("div",{className:"relative flex h-6 items-center px-1",children:[(0,o.jsx)("div",{className:"w-full text-right text-xs font-semibold text-text-secondary",children:"ELSE"}),(0,o.jsx)(T,{...e,handleId:"false",handleClassName:"!top-1/2 !-right-[21px] !-translate-y-1/2"})]})]})}),L=(0,s.memo)(e=>{let{id:t}=e,{zoom:s}=(0,l.useViewport)();return(0,o.jsx)("div",{className:(0,p.cn)("relative h-full min-h-[90px] w-full min-w-[240px] rounded-2xl bg-workflow-canvas-workflow-bg"),children:(0,o.jsx)(a.Background,{id:`iteration-background-${t}`,className:"!z-0 rounded-2xl",gap:[14/s,14/s],size:2/s,color:"var(--color-workflow-canvas-workflow-dot-color)"})})});var R=e.i(105845);let F=(0,s.memo)(e=>{let t,{id:r,data:n}=e,{zoom:d}=(0,l.useViewport)(),c=(0,l.useNodesInitialized)(),{handleNodeLoopRerender:m}=(t=(0,l.useStoreApi)(),{handleNodeLoopRerender:(0,s.useCallback)(e=>{let o,s,{getNodes:r,setNodes:l}=t.getState(),a=r(),n=a.find(t=>t.id===e);a.filter(t=>t.parentId===e).forEach(e=>{o?e.position.x+e.width>o.position.x+o.width&&(o=e):o=e,s?e.position.y+e.height>s.position.y+s.height&&(s=e):s=e});let d=o&&n.width<o.position.x+o.width,c=s&&n.height<s.position.y+s.height;(d||c)&&l((0,R.produce)(a,t=>{t.forEach(t=>{t.id===e&&(d&&(t.data.width=o.position.x+o.width+i.LOOP_PADDING.right,t.width=o.position.x+o.width+i.LOOP_PADDING.right),c&&(t.data.height=s.position.y+s.height+i.LOOP_PADDING.bottom,t.height=s.position.y+s.height+i.LOOP_PADDING.bottom))})}))},[t])});return(0,s.useEffect)(()=>{c&&m(r)},[c,r,m]),(0,o.jsx)("div",{className:(0,p.cn)("relative h-full min-h-[90px] w-full min-w-[240px] rounded-2xl bg-workflow-canvas-workflow-bg"),children:(0,o.jsx)(a.Background,{id:`loop-background-${r}`,className:"!z-0 rounded-2xl",gap:[14/d,14/d],size:2/d,color:"var(--color-workflow-canvas-workflow-dot-color)"})})});var P=e.i(617178);let H=s.memo(e=>{let{t}=(0,v.useTranslation)(),{data:s}=e,r=s.classes;return(0,o.jsx)("div",{className:"mb-1 px-3 py-1",children:!!r.length&&(0,o.jsx)("div",{className:"mt-2 space-y-0.5",children:r.map((s,r)=>(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(P.default,{title:`${t("nodes.questionClassifiers.class",{ns:"workflow"})} ${r+1}`,content:""}),(0,o.jsx)(T,{...e,handleId:s.id,handleClassName:"!top-1/2 !-translate-y-1/2 !-right-[21px]"})]},r))})})}),M={[b.BlockEnum.QuestionClassifier]:H,[b.BlockEnum.IfElse]:O,[b.BlockEnum.Iteration]:L,[b.BlockEnum.Loop]:F},A=e=>{let t=M[e.data.type];return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(I,{...e,children:t&&(0,o.jsx)(t,{})})})};var D=e.i(837699);let $=(0,s.memo)(e=>{let{id:t,data:s}=e,{t:r}=(0,v.useTranslation)();return(0,o.jsxs)("div",{className:"nodrag group mt-1 flex h-11 w-11 items-center justify-center rounded-2xl border border-workflow-block-border bg-workflow-block-bg shadow-xs",children:[(0,o.jsx)(j.default,{popupContent:r("blocks.iteration-start",{ns:"workflow"}),asChild:!1,children:(0,o.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border-[0.5px] border-components-panel-border-subtle bg-util-colors-blue-brand-blue-brand-500",children:(0,o.jsx)(D.RiHome5Fill,{className:"h-3 w-3 text-text-primary-on-surface"})})}),(0,o.jsx)(T,{id:t,data:s,handleClassName:"!top-1/2 !-right-[9px] !-translate-y-1/2",handleId:"source"})]})}),U=(0,s.memo)(e=>{let{id:t,data:s}=e,{t:r}=(0,v.useTranslation)();return(0,o.jsxs)("div",{className:"nodrag group mt-1 flex h-11 w-11 items-center justify-center rounded-2xl border border-workflow-block-border bg-workflow-block-bg",children:[(0,o.jsx)(j.default,{popupContent:r("blocks.loop-start",{ns:"workflow"}),asChild:!1,children:(0,o.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border-[0.5px] border-components-panel-border-subtle bg-util-colors-blue-brand-blue-brand-500",children:(0,o.jsx)(D.RiHome5Fill,{className:"h-3 w-3 text-text-primary-on-surface"})})}),(0,o.jsx)(T,{id:t,data:s,handleClassName:"!top-1/2 !-right-[9px] !-translate-y-1/2",handleId:"source"})]})});e.i(444462);var V=e.i(212838),G=e.i(378675);let Z=(0,s.memo)(e=>{let{data:t}=e,{t:r}=(0,v.useTranslation)(),l=(0,s.useRef)(null),a=t.theme;return(0,o.jsx)("div",{className:(0,p.cn)("relative flex flex-col rounded-md border shadow-xs hover:shadow-md",u.THEME_MAP[a].bg,t.selected?u.THEME_MAP[a].border:"border-black/5"),style:{width:t.width,height:t.height},ref:l,children:(0,o.jsx)(G.NoteEditorContextProvider,{value:t.text,editable:!1,children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:(0,p.cn)("h-2 shrink-0 rounded-t-md opacity-50",u.THEME_MAP[a].title)}),(0,o.jsx)("div",{className:"grow overflow-y-auto px-3 py-2.5",children:(0,o.jsx)("div",{className:(0,p.cn)(t.selected&&"nodrag nopan nowheel cursor-text"),children:(0,o.jsx)(V.NoteEditor,{containerElement:l.current,placeholder:r("nodes.note.editor.placeholder",{ns:"workflow"})||""})})}),t.showAuthor&&(0,o.jsx)("div",{className:"p-3 pt-0 text-xs text-text-tertiary",children:t.author})]})})})});var q=e.i(757198),K=e.i(391185),W=e.i(175179),X=e.i(194902),Q=((t=Q||{}).zoomIn="zoomIn",t.zoomOut="zoomOut",t.zoomToFit="zoomToFit",t.zoomTo25="zoomTo25",t.zoomTo50="zoomTo50",t.zoomTo75="zoomTo75",t.zoomTo100="zoomTo100",t.zoomTo200="zoomTo200",t);let J=(0,s.memo)(()=>{let{t:e}=(0,v.useTranslation)(),{zoomIn:t,zoomOut:r,zoomTo:a,fitView:n}=(0,l.useReactFlow)(),{zoom:i}=(0,l.useViewport)(),[d,c]=(0,s.useState)(!1),m=[[{key:"zoomTo200",text:"200%"},{key:"zoomTo100",text:"100%"},{key:"zoomTo75",text:"75%"},{key:"zoomTo50",text:"50%"},{key:"zoomTo25",text:"25%"}],[{key:"zoomToFit",text:e("operator.zoomToFit",{ns:"workflow"})}]],u=(0,s.useCallback)(()=>{c(e=>!e)},[]);return(0,o.jsxs)(K.PortalToFollowElem,{placement:"top-start",open:d,onOpenChange:c,offset:{mainAxis:4,crossAxis:-2},children:[(0,o.jsx)(K.PortalToFollowElemTrigger,{asChild:!0,children:(0,o.jsx)("div",{className:(0,p.cn)("h-9 cursor-pointer rounded-lg border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg","p-0.5 text-[13px] shadow-lg backdrop-blur-[5px]","hover:bg-state-base-hover"),children:(0,o.jsxs)("div",{className:(0,p.cn)("flex h-8 w-[98px] items-center justify-between rounded-lg"),children:[(0,o.jsx)(W.default,{title:e("operator.zoomOut",{ns:"workflow"}),shortcuts:["ctrl","-"],children:(0,o.jsx)("div",{className:`flex h-8 w-8 items-center justify-center rounded-lg ${i<=.25?"cursor-not-allowed":"cursor-pointer hover:bg-black/5"}`,onClick:e=>{i<=.25||(e.stopPropagation(),r())},children:(0,o.jsx)(D.RiZoomOutLine,{className:"h-4 w-4 text-text-tertiary hover:text-text-secondary"})})}),(0,o.jsxs)("div",{onClick:u,className:(0,p.cn)("system-sm-medium w-[34px] text-text-tertiary hover:text-text-secondary"),children:[Number.parseFloat(`${100*i}`).toFixed(0),"%"]}),(0,o.jsx)(W.default,{title:e("operator.zoomIn",{ns:"workflow"}),shortcuts:["ctrl","+"],children:(0,o.jsx)("div",{className:`flex h-8 w-8 items-center justify-center rounded-lg ${i>=2?"cursor-not-allowed":"cursor-pointer hover:bg-black/5"}`,onClick:e=>{i>=2||(e.stopPropagation(),t())},children:(0,o.jsx)(D.RiZoomInLine,{className:"h-4 w-4 text-text-tertiary hover:text-text-secondary"})})})]})})}),(0,o.jsx)(K.PortalToFollowElemContent,{className:"z-10",children:(0,o.jsx)("div",{className:"w-[145px] rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg-blur shadow-lg backdrop-blur-[5px]",children:m.map((e,t)=>(0,o.jsxs)(s.Fragment,{children:[0!==t&&(0,o.jsx)(q.default,{className:"m-0"}),(0,o.jsx)("div",{className:"p-1",children:e.map(e=>(0,o.jsxs)("div",{className:"system-md-regular flex h-8 cursor-pointer items-center justify-between space-x-1 rounded-lg py-1.5 pl-3 pr-2 text-text-secondary hover:bg-state-base-hover",onClick:()=>{var t;"zoomToFit"===(t=e.key)&&n(),"zoomTo25"===t&&a(.25),"zoomTo50"===t&&a(.5),"zoomTo75"===t&&a(.75),"zoomTo100"===t&&a(1),"zoomTo200"===t&&a(2)},children:[(0,o.jsx)("span",{children:e.text}),(0,o.jsxs)("div",{className:"flex items-center space-x-0.5",children:["zoomToFit"===e.key&&(0,o.jsx)(X.default,{keys:["ctrl","1"]}),"zoomTo50"===e.key&&(0,o.jsx)(X.default,{keys:["shift","5"]}),"zoomTo100"===e.key&&(0,o.jsx)(X.default,{keys:["shift","1"]})]})]},e.key))})]},t))})})]})}),Y={[i.CUSTOM_NODE]:A,[u.CUSTOM_NOTE_NODE]:Z,[x.CUSTOM_SIMPLE_NODE]:A,[c.CUSTOM_ITERATION_START_NODE]:$,[m.CUSTOM_LOOP_START_NODE]:U},ee={[i.CUSTOM_EDGE]:w},et=e=>{let{nodes:t,edges:c,viewport:m,className:u,miniMapToRight:x}=e,[g,f]=(0,s.useState)(()=>(0,h.initialNodes)(t,c)),[b,y]=(0,s.useState)(()=>(0,h.initialEdges)(c,t)),w=(0,s.useCallback)(e=>f(t=>(0,l.applyNodeChanges)(e,t)),[]),v=(0,s.useCallback)(e=>y(t=>(0,l.applyEdgeChanges)(e,t)),[]);return(0,o.jsxs)("div",{id:"workflow-container",className:(0,p.cn)("relative h-full w-full",u),children:[(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.MiniMap,{pannable:!0,zoomable:!0,style:{width:102,height:72},maskColor:"var(--color-workflow-minimap-bg)",className:(0,p.cn)("!absolute !bottom-14 z-[9] !m-0 !h-[72px] !w-[102px] !rounded-lg !border-[0.5px] !border-divider-subtle !bg-background-default-subtle !shadow-md !shadow-shadow-shadow-5",x?"!right-4":"!left-4")}),(0,o.jsx)("div",{className:"absolute bottom-4 left-4 z-[9] mt-1 flex items-center gap-2",children:(0,o.jsx)(J,{})})]}),(0,o.jsx)(r.default,{nodeTypes:Y,edgeTypes:ee,nodes:g,onNodesChange:w,edges:b,onEdgesChange:v,connectionLineComponent:d.default,connectionLineContainerStyle:{zIndex:i.ITERATION_CHILDREN_Z_INDEX},defaultViewport:m,multiSelectionKeyCode:null,deleteKeyCode:null,nodesDraggable:!0,nodesConnectable:!1,nodesFocusable:!1,edgesFocusable:!1,panOnScroll:!1,selectionKeyCode:null,selectionMode:l.SelectionMode.Partial,minZoom:.25,children:(0,o.jsx)(a.Background,{gap:[14,14],size:2,className:"bg-workflow-canvas-workflow-bg",color:"var(--color-workflow-canvas-workflow-dot-color)"})})]})};e.s(["default",0,e=>(0,o.jsx)(l.ReactFlowProvider,{children:(0,o.jsx)(et,{...e})})],445924)},201201,e=>{e.v(t=>Promise.all(["static/chunks/33d89f7067007c66.js","static/chunks/c798d4f27fd7256a.js","static/chunks/093735e21ea40753.css"].map(t=>e.l(t))).then(()=>t(661305)))},170830,e=>{e.v(e=>Promise.resolve().then(()=>e(81828)))}]);