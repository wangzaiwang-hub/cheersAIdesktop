(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,115131,e=>{"use strict";var t=e.i(563199),s=e.i(268255),n=e.i(500536),i=e.i(157644),a=e.i(935139);e.s(["default",0,e=>{let{className:l,itemClassName:r,value:o,onChange:d,options:c}=e,[m,p]=(0,s.useState)(()=>c.findIndex(e=>e.value===o)),[u,x]=(0,s.useState)({}),{data:h}=(0,i.useInstalledPluginList)(),g=e=>{let t=document.getElementById(`tab-${e}`);if(t){let{offsetLeft:e,offsetWidth:s}=t;x({transform:`translateX(${e}px)`,width:`${s}px`})}};return(0,s.useEffect)(()=>{let e=c.findIndex(e=>e.value===o);p(e),g(e)},[o,c,h?.total]),(0,t.jsxs)("div",{className:(0,a.cn)(l,"relative inline-flex items-center justify-center rounded-[10px] bg-components-segmented-control-bg-normal p-0.5"),children:[(0,t.jsx)("div",{className:"shadows-shadow-xs absolute bottom-0.5 left-0 right-0 top-0.5 rounded-[10px] bg-components-panel-bg transition-transform duration-300 ease-in-out",style:u}),c.map((e,s)=>(0,t.jsxs)("div",{id:`tab-${s}`,className:(0,a.cn)("relative z-10 flex cursor-pointer items-center justify-center gap-1 rounded-[10px] px-2.5 py-1.5 transition-colors duration-300 ease-in-out","system-md-semibold",s===m?"text-text-primary":"text-text-tertiary","function"==typeof r?r(s===m):r),onClick:()=>{s!==m&&(d(e.value),g(s))},children:[e.text,"plugins"===e.value&&(h?.total??0)>0&&(0,t.jsx)(n.default,{size:"s",uppercase:!0,state:n.BadgeState.Default,children:h?.total})]},e.value))]})}])},828410,53498,e=>{"use strict";var t=e.i(563199),s=e.i(268255),n=e.i(521632),i=e.i(944911),a=e.i(935139),l=e.i(665127);e.i(152567);var r=e.i(408767),o=e.i(661509),d=e.i(683257),c=e.i(491234);let m=e=>{let{disabled:n,collection:i,tool:l,isBuiltIn:r,isModel:m}=e,p=(0,d.useLocale)(),u=(0,c.getLanguage)(p),[x,h]=(0,s.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:(0,a.cn)("bg-components-panel-item-bg cursor-pointer rounded-xl border-[0.5px] border-components-panel-border-subtle px-4 py-3 shadow-xs hover:bg-components-panel-on-panel-item-bg-hover",n&&"!cursor-not-allowed opacity-50"),onClick:()=>!n&&h(!0),children:[(0,t.jsx)("div",{className:"system-md-semibold pb-0.5 text-text-secondary",children:l.label[u]}),(0,t.jsx)("div",{className:"system-xs-regular line-clamp-2 text-text-tertiary",title:l.description[u],children:l.description[u]})]}),x&&(0,t.jsx)(o.default,{showBackButton:!0,collection:i,toolName:l.name,readonly:!0,onHide:()=>{h(!1)},isBuiltIn:r,isModel:m})]})};e.s(["default",0,m],53498);var p=e.i(154033);let u=e=>{let{detail:n}=e,{t:i}=(0,r.useTranslation)(),a=n.declaration?.tool?.identity,l=a?`${n.plugin_id}/${a.name}`:"",{data:o=[]}=(0,p.useAllToolProviders)(),d=(0,s.useMemo)(()=>o.find(e=>e.name===l),[o,l]),{data:c}=(0,p.useBuiltinTools)(l);return l&&c&&d?(0,t.jsxs)("div",{className:"px-4 pb-4 pt-2",children:[(0,t.jsx)("div",{className:"mb-1 py-1",children:(0,t.jsx)("div",{className:"system-sm-semibold-uppercase mb-1 flex h-6 items-center justify-between text-text-secondary",children:i("detailPanel.actionNum",{ns:"plugin",num:c.length,action:c.length>1?"actions":"action"})})}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:c.map(e=>(0,t.jsx)(m,{disabled:!1,collection:d,tool:e,isBuiltIn:!0,isModel:!1},`${n.plugin_id}${e.name}`))})]}):null};var x=e.i(566210),h=e.i(837699),g=e.i(654313),y=e.i(757198),f=e.i(580932),b=e.i(519436),j=e.i(925521);let v=e=>{let{provider:i,detail:l,onHide:o}=e,d=(0,x.useRenderI18nObject)(),{t:c}=(0,r.useTranslation)(),m=(0,s.useMemo)(()=>{let e=[];return l.output_schema&&l.output_schema.properties?(Object.keys(l.output_schema.properties).forEach(t=>{let s=l.output_schema.properties[t];e.push({name:t,type:"array"===s.type?`Array[${s.items?.type?s.items.type.slice(0,1).toLocaleUpperCase()+s.items.type.slice(1):"Unknown"}]`:`${s.type?s.type.slice(0,1).toLocaleUpperCase()+s.type.slice(1):"Unknown"}`,description:s.description})}),e):[]},[l.output_schema]);return(0,t.jsx)(n.default,{isOpen:!0,clickOutsideNotOpen:!1,onClose:o,footer:null,mask:!1,positionCenter:!1,panelClassName:(0,a.cn)("mb-2 mr-2 mt-[64px] !w-[420px] !max-w-[420px] justify-start rounded-2xl border-[0.5px] border-components-panel-border !bg-components-panel-bg !p-0 shadow-xl"),children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"relative border-b border-divider-subtle p-4 pb-3",children:[(0,t.jsx)("div",{className:"absolute right-3 top-3",children:(0,t.jsx)(g.default,{onClick:o,children:(0,t.jsx)(h.RiCloseLine,{className:"h-4 w-4"})})}),(0,t.jsxs)("div",{className:"system-xs-semibold-uppercase mb-2 flex cursor-pointer items-center gap-1 text-text-accent-secondary",onClick:o,children:[(0,t.jsx)(h.RiArrowLeftLine,{className:"h-4 w-4"}),"BACK"]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(f.default,{size:"tiny",className:"h-6 w-6",src:`${j.API_PREFIX}/workspaces/current/plugin/icon?tenant_id=${i.tenant_id}&filename=${i.icon}`}),(0,t.jsx)("div",{className:"",children:d(i.label)})]}),(0,t.jsx)("div",{className:"system-md-semibold mt-1 text-text-primary",children:d(l.identity.label)}),(0,t.jsx)(b.default,{className:"mt-3",text:d(l.description),descriptionLineRows:2})]}),(0,t.jsx)("div",{className:"h-full",children:(0,t.jsxs)("div",{className:"flex h-full flex-col overflow-y-auto",children:[(0,t.jsx)("div",{className:"system-sm-semibold-uppercase p-4 pb-1 text-text-primary",children:c("setBuiltInTools.parameters",{ns:"tools"})}),(0,t.jsx)("div",{className:"px-4",children:l.parameters.length>0&&(0,t.jsx)("div",{className:"space-y-1 py-2",children:l.parameters.map((e,s)=>{var n;return(0,t.jsxs)("div",{className:"py-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"code-sm-semibold text-text-secondary",children:d(e.label)}),(0,t.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:"number-input"===(n=e.type)?c("setBuiltInTools.number",{ns:"tools"}):"text-input"===n?c("setBuiltInTools.string",{ns:"tools"}):"checkbox"===n?"boolean":"file"===n?c("setBuiltInTools.file",{ns:"tools"}):"array[tools]"===n?"multiple-tool-select":n}),e.required&&(0,t.jsx)("div",{className:"system-xs-medium text-text-warning-secondary",children:c("setBuiltInTools.required",{ns:"tools"})})]}),e.human_description&&(0,t.jsx)("div",{className:"system-xs-regular mt-0.5 text-text-tertiary",children:d(e.human_description)})]},s)})})}),l.output_schema&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"px-4",children:(0,t.jsx)(y.default,{className:"!mt-2"})}),(0,t.jsx)("div",{className:"system-sm-semibold-uppercase p-4 pb-1 text-text-primary",children:"OUTPUT"}),m.length>0&&(0,t.jsx)("div",{className:"space-y-1 px-4 py-2",children:m.map((e,s)=>(0,t.jsxs)("div",{className:"py-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"code-sm-semibold text-text-secondary",children:e.name}),(0,t.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:e.type})]}),e.description&&(0,t.jsx)("div",{className:"system-xs-regular mt-0.5 text-text-tertiary",children:e.description})]},s))})]})]})})]})})},N=e=>{let{provider:n,detail:i}=e,l=(0,x.useRenderI18nObject)(),[r,o]=(0,s.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:(0,a.cn)("bg-components-panel-item-bg mb-2 cursor-pointer rounded-xl border-[0.5px] border-components-panel-border-subtle px-4 py-3 shadow-xs hover:bg-components-panel-on-panel-item-bg-hover"),onClick:()=>o(!0),children:[(0,t.jsx)("div",{className:"system-md-semibold pb-0.5 text-text-secondary",children:l(i.identity.label)}),(0,t.jsx)("div",{className:"system-xs-regular line-clamp-2 text-text-tertiary",title:l(i.description),children:l(i.description)})]}),r&&(0,t.jsx)(v,{provider:n,detail:i,onHide:()=>o(!1)})]})};var w=e.i(243922);let C=e=>{let{detail:n}=e,{t:i}=(0,r.useTranslation)(),a=n.declaration.agent_strategy.identity,l=`${n.plugin_id}/${a.name}`,{data:o}=(0,w.useStrategyProviderDetail)(l),d=(0,s.useMemo)(()=>({...o?.declaration.identity,tenant_id:n.tenant_id}),[n.tenant_id,o?.declaration.identity]),c=(0,s.useMemo)(()=>o?o.declaration.strategies:[],[o]);return o?(0,t.jsxs)("div",{className:"px-4 pb-4 pt-2",children:[(0,t.jsx)("div",{className:"mb-1 py-1",children:(0,t.jsx)("div",{className:"system-sm-semibold-uppercase mb-1 flex h-6 items-center justify-between text-text-secondary",children:i("detailPanel.strategyNum",{ns:"plugin",num:c.length,strategy:c.length>1?"strategies":"strategy"})})}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:c.map(e=>(0,t.jsx)(N,{provider:d,detail:e},`${e.identity.provider}${e.identity.name}`))})]}):null};var _=e.i(464747),k=e.i(475390);let T=e=>{let{detail:n}=e,{t:i}=(0,r.useTranslation)(),{data:a}=(0,k.useDataSourceList)(!0),l=(0,s.useMemo)(()=>{let e=a?.find(e=>e.plugin_id===n.plugin_id);if(e)return(0,_.transformDataSourceToTool)(e)},[n.plugin_id,a]),o=[];return o&&l?(0,t.jsx)("div",{className:"px-4 pb-4 pt-2",children:(0,t.jsx)("div",{className:"mb-1 py-1",children:(0,t.jsx)("div",{className:"system-sm-semibold-uppercase mb-1 flex h-6 items-center justify-between text-text-secondary",children:i("detailPanel.actionNum",{ns:"plugin",num:o.length,action:o.length>1?"actions":"action"})})})}):null};var S=e.i(392898),P=e.i(417944),$=e.i(137667),L=e.i(421001),M=e.i(885327),I=e.i(875037),B=e.i(562572),R=e.i(214309),O=e.i(367916);let F="endpoints";var E=e.i(26012),q=e.i(547105);e.i(21511);var D=e.i(751489),U=e.i(260484),A=e.i(836340),K=e.i(151094),z=e.i(633957);let H=s.memo(e=>{let{formSchemas:i,defaultValues:o={},onCancel:d,onSaved:c,pluginDetail:m}=e,p=(0,x.useRenderI18nObject)(),{t:u}=(0,r.useTranslation)(),y=Object.keys(o).length>0?o:(e=>{let t={};for(let s of e)void 0!==s.default&&(t[s.name]=s.default);return t})(i),[f,b]=s.useState(y);return(0,t.jsx)(n.default,{isOpen:!0,clickOutsideNotOpen:!1,onClose:d,footer:null,mask:!0,positionCenter:!1,panelClassName:(0,a.cn)("mb-2 mr-2 mt-[64px] !w-[420px] !max-w-[420px] justify-start rounded-2xl border-[0.5px] border-components-panel-border !bg-components-panel-bg !p-0 shadow-xl"),children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"p-4 pb-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"system-xl-semibold text-text-primary",children:u("detailPanel.endpointModalTitle",{ns:"plugin"})}),(0,t.jsx)(g.default,{onClick:d,children:(0,t.jsx)(h.RiCloseLine,{className:"h-4 w-4"})})]}),(0,t.jsx)("div",{className:"system-xs-regular mt-0.5 text-text-tertiary",children:u("detailPanel.endpointModalDesc",{ns:"plugin"})}),(0,t.jsx)(l.ReadmeEntrance,{pluginDetail:m,className:"px-0 pt-3"})]}),(0,t.jsxs)("div",{className:"grow overflow-y-auto",children:[(0,t.jsx)("div",{className:"px-4 py-2",children:(0,t.jsx)(z.default,{value:f,onChange:e=>{b(e)},formSchemas:i,isEditMode:!0,showOnVariableMap:{},validating:!1,inputClassName:"bg-components-input-bg-normal hover:bg-components-input-bg-hover",fieldMoreInfo:e=>e.url?(0,t.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"body-xs-regular inline-flex items-center text-text-accent-secondary",children:[u("howToGet",{ns:"tools"}),(0,t.jsx)(h.RiArrowRightUpLine,{className:"ml-1 h-3 w-3"})]}):null})}),(0,t.jsx)("div",{className:(0,a.cn)("flex justify-end p-4 pt-0"),children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(K.default,{onClick:d,children:u("operation.cancel",{ns:"common"})}),(0,t.jsx)(K.default,{variant:"primary",onClick:()=>{for(let e of i)if(e.required&&!f[e.name])return void $.default.notify({type:"error",message:u("errorMsg.fieldRequired",{ns:"common",field:"string"==typeof e.label?e.label:p(e.label)})});let e={...f};i.forEach(t=>{if("boolean"===t.type&&void 0!==e[t.name]){let s=e[t.name];"string"==typeof s?e[t.name]="true"===s||"1"===s||"True"===s:"number"==typeof s?e[t.name]=1===s:"boolean"==typeof s&&(e[t.name]=s)}}),c(e)},children:u("operation.save",{ns:"common"})})]})})]})]})})}),V={type:e.i(739255).FormTypeEnum.textInput,name:"name",label:{en_US:"Endpoint Name",zh_Hans:"端点名称",ja_JP:"エンドポイント名",pt_BR:"Nome do ponto final"},placeholder:{en_US:"Endpoint Name",zh_Hans:"端点名称",ja_JP:"エンドポイント名",pt_BR:"Nome do ponto final"},required:!0,default:"",help:null},Q=e=>{let{pluginDetail:n,data:i,handleChange:a}=e,{t:l}=(0,r.useTranslation)(),[o,d]=(0,s.useState)(i.enabled),c=i.id,[m,{setTrue:p,setFalse:u}]=(0,P.useBoolean)(!1),{mutate:x}=(e=>{let{onSuccess:t,onError:s}=e;return(0,I.useMutation)({mutationKey:[F,"enable"],mutationFn:e=>(0,O.post)("/workspaces/current/endpoints/enable",{body:{endpoint_id:e}}),onSuccess:t,onError:s})})({onSuccess:async()=>{await a()},onError:()=>{$.default.notify({type:"error",message:l("actionMsg.modifiedUnsuccessfully",{ns:"common"})}),d(!1)}}),{mutate:y}=(e=>{let{onSuccess:t,onError:s}=e;return(0,I.useMutation)({mutationKey:[F,"disable"],mutationFn:e=>(0,O.post)("/workspaces/current/endpoints/disable",{body:{endpoint_id:e}}),onSuccess:t,onError:s})})({onSuccess:async()=>{await a(),u()},onError:()=>{$.default.notify({type:"error",message:l("actionMsg.modifiedUnsuccessfully",{ns:"common"})}),d(!1)}}),[f,{setTrue:b,setFalse:j}]=(0,P.useBoolean)(!1),{mutate:v}=(e=>{let{onSuccess:t,onError:s}=e;return(0,I.useMutation)({mutationKey:[F,"delete"],mutationFn:e=>(0,O.post)("/workspaces/current/endpoints/delete",{body:{endpoint_id:e}}),onSuccess:t,onError:s})})({onSuccess:async()=>{await a(),j()},onError:()=>{$.default.notify({type:"error",message:l("actionMsg.modifiedUnsuccessfully",{ns:"common"})})}}),[N,{setTrue:w,setFalse:C}]=(0,P.useBoolean)(!1),_=(0,s.useMemo)(()=>(0,M.toolCredentialToFormSchemas)([V,...i.declaration.settings]),[i.declaration.settings]),k=(0,s.useMemo)(()=>{let e={name:i.name,...i.settings};return(0,M.addDefaultValue)(e,_)},[i.name,i.settings,_]),{mutate:T}=(e=>{let{onSuccess:t,onError:s}=e;return(0,I.useMutation)({mutationKey:[F,"update"],mutationFn:e=>{let{endpointID:t,state:s}=e,n=s.name;return delete s.name,(0,O.post)("/workspaces/current/endpoints/update",{body:{endpoint_id:t,settings:s,name:n}})},onSuccess:t,onError:s})})({onSuccess:async()=>{await a(),C()},onError:()=>{$.default.notify({type:"error",message:l("actionMsg.modifiedUnsuccessfully",{ns:"common"})})}}),[S,B]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(S){let e=setTimeout(()=>{B(!1)},2e3);return()=>{clearTimeout(e)}}},[S]);let R=S?D.CopyCheck:h.RiClipboardLine;return(0,t.jsxs)("div",{className:"rounded-xl bg-background-section-burn p-0.5",children:[(0,t.jsxs)("div",{className:"group rounded-[10px] border-[0.5px] border-components-panel-border bg-components-panel-on-panel-item-bg p-2.5 pl-3",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("div",{className:"system-md-semibold mb-1 flex h-6 grow items-center gap-1 text-text-secondary",children:[(0,t.jsx)(h.RiLoginCircleLine,{className:"h-4 w-4"}),(0,t.jsx)("div",{children:i.name})]}),(0,t.jsxs)("div",{className:"hidden items-center group-hover:flex",children:[(0,t.jsx)(g.default,{onClick:w,children:(0,t.jsx)(h.RiEditLine,{className:"h-4 w-4"})}),(0,t.jsx)(g.default,{onClick:b,className:"text-text-tertiary hover:bg-state-destructive-hover hover:text-text-destructive",children:(0,t.jsx)(h.RiDeleteBinLine,{className:"h-4 w-4"})})]})]}),i.declaration.endpoints.filter(e=>!e.hidden).map((e,s)=>(0,t.jsxs)("div",{className:"flex h-6 items-center",children:[(0,t.jsx)("div",{className:"system-xs-regular w-12 shrink-0 text-text-tertiary",children:e.method}),(0,t.jsxs)("div",{className:"group/item system-xs-regular flex grow items-center truncate text-text-secondary",children:[(0,t.jsx)("div",{title:`${i.url}${e.path}`,className:"truncate",children:`${i.url}${e.path}`}),(0,t.jsx)(L.default,{popupContent:l(`operation.${S?"copied":"copy"}`,{ns:"common"}),position:"top",children:(0,t.jsx)(g.default,{className:"ml-2 hidden shrink-0 group-hover/item:flex",onClick:()=>{var t;return t=`${i.url}${e.path}`,void((0,E.default)(t),B(!0))},children:(0,t.jsx)(R,{className:"h-3.5 w-3.5 text-text-tertiary"})})})]})]},s))]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 pl-3",children:[o&&(0,t.jsxs)("div",{className:"system-xs-semibold-uppercase flex items-center gap-1 text-util-colors-green-green-600",children:[(0,t.jsx)(A.default,{color:"green"}),l("detailPanel.serviceOk",{ns:"plugin"})]}),!o&&(0,t.jsxs)("div",{className:"system-xs-semibold-uppercase flex items-center gap-1 text-text-tertiary",children:[(0,t.jsx)(A.default,{color:"gray"}),l("detailPanel.disabled",{ns:"plugin"})]}),(0,t.jsx)(U.default,{className:"ml-3",defaultValue:o,onChange:e=>{e?(d(!0),x(c)):(d(!1),p())},size:"sm"})]}),m&&(0,t.jsx)(q.default,{isShow:!0,title:l("detailPanel.endpointDisableTip",{ns:"plugin"}),content:(0,t.jsx)("div",{children:l("detailPanel.endpointDisableContent",{ns:"plugin",name:i.name})}),onCancel:()=>{u(),d(!0)},onConfirm:()=>y(c)}),f&&(0,t.jsx)(q.default,{isShow:!0,title:l("detailPanel.endpointDeleteTip",{ns:"plugin"}),content:(0,t.jsx)("div",{children:l("detailPanel.endpointDeleteContent",{ns:"plugin",name:i.name})}),onCancel:j,onConfirm:()=>v(c)}),N&&(0,t.jsx)(H,{formSchemas:_,defaultValues:k,onCancel:C,onSaved:e=>T({endpointID:c,state:e}),pluginDetail:n})]})},J=e=>{let n,i,{detail:l}=e,{t:o}=(0,r.useTranslation)(),c=(0,d.useDocLink)(),m=l.plugin_unique_identifier,p=l.declaration.endpoint,u=l.declaration.tool,{data:x}=(n=l.plugin_id,(0,B.useQuery)({queryKey:[F,"list",n],queryFn:()=>(0,O.get)("/workspaces/current/endpoints/list/plugin",{params:{plugin_id:n,page:1,page_size:100}})})),y=(i=(0,R.useQueryClient)(),e=>{i.invalidateQueries({queryKey:[F,"list",e]})}),[f,{setTrue:b,setFalse:j}]=(0,P.useBoolean)(!1),v=(0,s.useMemo)(()=>(0,M.toolCredentialToFormSchemas)([V,...p.settings]),[p.settings]),{mutate:N}=(e=>{let{onSuccess:t,onError:s}=e;return(0,I.useMutation)({mutationKey:[F,"create"],mutationFn:e=>{let{pluginUniqueID:t,state:s}=e,n=s.name;return delete s.name,(0,O.post)("/workspaces/current/endpoints/create",{body:{plugin_unique_identifier:t,settings:s,name:n}})},onSuccess:t,onError:s})})({onSuccess:async()=>{await y(l.plugin_id),j()},onError:()=>{$.default.notify({type:"error",message:o("actionMsg.modifiedUnsuccessfully",{ns:"common"})})}});return x?(0,t.jsxs)("div",{className:(0,a.cn)("border-divider-subtle px-4 py-2",u&&"border-t"),children:[(0,t.jsxs)("div",{className:"system-sm-semibold-uppercase mb-1 flex h-6 items-center justify-between text-text-secondary",children:[(0,t.jsxs)("div",{className:"flex items-center gap-0.5",children:[o("detailPanel.endpoints",{ns:"plugin"}),(0,t.jsx)(L.default,{position:"right",popupClassName:"w-[240px] p-4 rounded-xl bg-components-panel-bg-blur border-[0.5px] border-components-panel-border",popupContent:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg border-[0.5px] border-components-panel-border-subtle bg-background-default-subtle",children:(0,t.jsx)(h.RiApps2AddLine,{className:"h-4 w-4 text-text-tertiary"})}),(0,t.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:o("detailPanel.endpointsTip",{ns:"plugin"})}),(0,t.jsx)("a",{href:c("/develop-plugin/getting-started/getting-started-dify-plugin"),target:"_blank",rel:"noopener noreferrer",children:(0,t.jsxs)("div",{className:"system-xs-regular inline-flex cursor-pointer items-center gap-1 text-text-accent",children:[(0,t.jsx)(h.RiBookOpenLine,{className:"h-3 w-3"}),o("detailPanel.endpointsDocLink",{ns:"plugin"})]})})]})})]}),(0,t.jsx)(g.default,{onClick:b,children:(0,t.jsx)(h.RiAddLine,{className:"h-4 w-4"})})]}),0===x.endpoints.length&&(0,t.jsx)("div",{className:"system-xs-regular mb-1 flex justify-center rounded-[10px] bg-background-section p-3 text-text-tertiary",children:o("detailPanel.endpointsEmpty",{ns:"plugin"})}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:x.endpoints.map((e,s)=>(0,t.jsx)(Q,{data:e,handleChange:()=>y(l.plugin_id),pluginDetail:l},s))}),f&&(0,t.jsx)(H,{formSchemas:v,onCancel:j,onSaved:e=>N({pluginUniqueID:m,state:e}),pluginDetail:l})]}):null};var X=e.i(722591),G=e.i(540284),W=e.i(683503);let Y=e=>{let{detail:s}=e,{t:n}=(0,r.useTranslation)(),{data:i}=(0,W.useModelProviderModelList)(`${s.plugin_id}/${s.declaration.model.provider}`);return i?(0,t.jsxs)("div",{className:"px-4 py-2",children:[(0,t.jsx)("div",{className:"system-sm-semibold-uppercase mb-1 flex h-6 items-center text-text-secondary",children:n("detailPanel.modelNum",{ns:"plugin",num:i.data.length})}),(0,t.jsx)("div",{className:"flex flex-col",children:i.data.map(e=>(0,t.jsxs)("div",{className:"flex h-6 items-center py-1",children:[(0,t.jsx)(X.default,{className:"mr-2 shrink-0",provider:e.provider,modelName:e.model}),(0,t.jsx)(G.default,{className:"system-md-regular grow text-text-secondary",modelItem:e,showModelType:!0,showMode:!0,showContextSize:!0})]},e.model))})]}):null};var Z=e.i(981086),ee=e.i(867856),et=e.i(225162),es=e.i(819114),en=e.i(312343),ei=e.i(224651);let ea=e=>{let t={type:Array.isArray(e.type)?e.type[0]:e.type||"string"};return e.description&&(t.description=e.description),e.properties&&(t.properties=Object.entries(e.properties).reduce((e,t)=>{let[s,n]=t;return{...e,[s]:ea(n)}},{})),e.required&&(t.required=e.required),e.items&&(t.items=ea(e.items)),e.enum&&(t.enum=e.enum),t},el=e=>{let{eventInfo:s,providerInfo:i,onClose:l}=e,o=(0,et.useLanguage)(),{t:d}=(0,r.useTranslation)(),c=(0,M.triggerEventParametersToFormSchemas)(s.parameters),m=s.output_schema?.properties?Object.entries(s.output_schema.properties).map(e=>{let[t,n]=e;return{name:t,field:ea(n),required:s.output_schema.required?.includes(t)||!1}}):[];return(0,t.jsxs)(n.default,{isOpen:!0,clickOutsideNotOpen:!1,onClose:l,footer:null,mask:!1,positionCenter:!1,panelClassName:(0,a.cn)("mb-2 mr-2 mt-[64px] !w-[420px] !max-w-[420px] justify-start rounded-2xl border-[0.5px] border-components-panel-border !bg-components-panel-bg !p-0 shadow-xl"),children:[(0,t.jsxs)("div",{className:"relative border-b border-divider-subtle p-4 pb-3",children:[(0,t.jsx)("div",{className:"absolute right-3 top-3",children:(0,t.jsx)(g.default,{onClick:l,children:(0,t.jsx)(h.RiCloseLine,{className:"h-4 w-4"})})}),(0,t.jsxs)("div",{className:"system-xs-semibold-uppercase mb-2 flex cursor-pointer items-center gap-1 text-text-accent-secondary",onClick:l,children:[(0,t.jsx)(h.RiArrowLeftLine,{className:"h-4 w-4"}),d("detailPanel.operation.back",{ns:"plugin"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(f.default,{size:"tiny",className:"h-6 w-6",src:i.icon}),(0,t.jsx)(en.default,{packageNameClassName:"w-auto",orgName:i.author,packageName:i.name.split("/").pop()||""})]}),(0,t.jsx)("div",{className:"system-md-semibold mt-1 text-text-primary",children:s?.identity?.label[o]}),(0,t.jsx)(b.default,{className:"mb-2 mt-3 h-auto",text:s.description[o],descriptionLineRows:2})]}),(0,t.jsxs)("div",{className:"flex h-full flex-col gap-2 overflow-y-auto px-4 pb-2 pt-4",children:[(0,t.jsx)("div",{className:"system-sm-semibold-uppercase text-text-secondary",children:d("setBuiltInTools.parameters",{ns:"tools"})}),c.length>0?c.map((e,s)=>{var n;return(0,t.jsxs)("div",{className:"py-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"code-sm-semibold text-text-secondary",children:e.label[o]}),(0,t.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:(n=e.type,"number-input"===n?d("setBuiltInTools.number",{ns:"tools"}):"text-input"===n?d("setBuiltInTools.string",{ns:"tools"}):"checkbox"===n?"boolean":"file"===n?d("setBuiltInTools.file",{ns:"tools"}):n)}),e.required&&(0,t.jsx)("div",{className:"system-xs-medium text-text-warning-secondary",children:d("setBuiltInTools.required",{ns:"tools"})})]}),e.description&&(0,t.jsx)("div",{className:"system-xs-regular mt-0.5 text-text-tertiary",children:e.description?.[o]})]},s)}):(0,t.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:d("events.item.noParameters",{ns:"pluginTrigger"})}),(0,t.jsx)(y.default,{className:"mb-2 mt-1 h-px"}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"system-sm-semibold-uppercase text-text-secondary",children:d("events.output",{ns:"pluginTrigger"})}),(0,t.jsx)("div",{className:"relative left-[-7px]",children:m.map(e=>(0,t.jsx)(ei.default,{name:e.name,payload:e.field,required:e.required,rootClassName:"code-sm-semibold text-text-secondary"},e.name))})]})]})]})},er=e=>{let{eventInfo:n,providerInfo:i}=e,{identity:l,description:r}=n,o=(0,et.useLanguage)(),[d,c]=(0,s.useState)(!1),m=l.label?.[o]??l.label?.en_US??"",p=r?.[o]??r?.en_US??"";return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:(0,a.cn)("bg-components-panel-item-bg cursor-pointer rounded-xl border-[0.5px] border-components-panel-border-subtle px-4 py-3 shadow-xs hover:bg-components-panel-on-panel-item-bg-hover"),onClick:()=>c(!0),children:[(0,t.jsx)("div",{className:"system-md-semibold pb-0.5 text-text-secondary",children:m}),(0,t.jsx)("div",{className:"system-xs-regular line-clamp-2 text-text-tertiary",title:p,children:p})]}),d&&(0,t.jsx)(el,{eventInfo:n,providerInfo:i,onClose:()=>c(!1)})]})},eo=()=>{let{t:e}=(0,r.useTranslation)(),s=(0,Z.usePluginStore)(e=>e.detail),{data:n}=(0,es.useTriggerProviderInfo)(s?.provider||""),i=n?.events||[];return n&&i.length?(0,t.jsxs)("div",{className:"px-4 pb-4 pt-2",children:[(0,t.jsx)("div",{className:"mb-1 py-1",children:(0,t.jsx)("div",{className:"system-sm-semibold-uppercase mb-1 flex h-6 items-center justify-between text-text-secondary",children:e("events.actionNum",{ns:"pluginTrigger",num:i.length,event:e(`events.${i.length>1?"events":"event"}`,{ns:"pluginTrigger"})})})}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:i.map(e=>(0,t.jsx)(er,{eventInfo:e,providerInfo:n},`${s?.plugin_id}${e.identity?.name||""}`))})]}):null};e.s(["default",0,e=>{let{detail:r,onUpdate:o,onHide:d}=e,c=(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&d(),o()},[d,o]),{setDetail:m}=(0,Z.usePluginStore)();return((0,s.useEffect)(()=>{m(r?{plugin_id:r.plugin_id,provider:`${r.plugin_id}/${r.declaration.name}`,plugin_unique_identifier:r.plugin_unique_identifier||"",declaration:r.declaration,name:r.name,id:r.id}:void 0)},[r,m]),r)?(0,t.jsx)(n.default,{isOpen:!!r,clickOutsideNotOpen:!1,onClose:d,footer:null,mask:!1,positionCenter:!1,panelClassName:(0,a.cn)("mb-2 mr-2 mt-[64px] !w-[420px] !max-w-[420px] justify-start rounded-2xl border-[0.5px] border-components-panel-border !bg-components-panel-bg !p-0 shadow-xl"),children:r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.default,{detail:r,onUpdate:c,onHide:d}),(0,t.jsx)("div",{className:"grow overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex min-h-full flex-col",children:[(0,t.jsxs)("div",{className:"flex-1",children:[r.declaration.category===i.PluginCategoryEnum.trigger&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.SubscriptionList,{pluginDetail:r}),(0,t.jsx)(eo,{})]}),!!r.declaration.tool&&(0,t.jsx)(u,{detail:r}),!!r.declaration.agent_strategy&&(0,t.jsx)(C,{detail:r}),!!r.declaration.endpoint&&(0,t.jsx)(J,{detail:r}),!!r.declaration.model&&(0,t.jsx)(Y,{detail:r}),!!r.declaration.datasource&&(0,t.jsx)(T,{detail:r})]}),(0,t.jsx)(l.ReadmeEntrance,{pluginDetail:r,className:"mt-auto"})]})})]})}):null}],828410)}]);