(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,612437,(e,s,t)=>{e.e,s.exports=function(e,s,t){e=e||{};var i=s.prototype,a={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function l(e,s,t,a){return i.fromToBase(e,s,t,a)}t.en.relativeTime=a,i.fromToBase=function(s,i,l,r,n){for(var o,d,c,m=l.$locale().relativeTime||a,u=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],p=u.length,x=0;x<p;x+=1){var h=u[x];h.d&&(o=r?t(s).diff(l,h.d,!0):l.diff(s,h.d,!0));var f=(e.rounding||Math.round)(Math.abs(o));if(c=o>0,f<=h.r||!h.r){f<=1&&x>0&&(h=u[x-1]);var v=m[h.l];n&&(f=n(""+f)),d="string"==typeof v?v.replace("%d",f):v(f,i,h.l,c);break}}if(i)return d;var j=c?m.future:m.past;return"function"==typeof j?j(d):j.replace("%s",d)},i.to=function(e,s){return l(e,s,this,!0)},i.from=function(e,s){return l(e,s,this)};var r=function(e){return e.$u?t.utc():t()};i.toNow=function(e){return this.to(r(this),e)},i.fromNow=function(e){return this.from(r(this),e)}}},363372,e=>{"use strict";var s=e.i(585458),t=e.i(612437),i=e.i(268255),a=e.i(683257),l=e.i(491234);e.i(341888),e.i(194663),e.i(726767),e.i(171457),e.i(271967),e.i(429863),e.i(659291),e.i(690397),e.i(732213),e.i(388201),e.i(855379),e.i(992481),e.i(722553),e.i(525435),e.i(932957),e.i(354438),e.i(433104),e.i(516248),e.i(931171),e.i(248238),s.default.extend(t.default),e.s(["useFormatTimeFromNow",0,()=>{let e=(0,a.useLocale)();return{formatTimeFromNow:(0,i.useCallback)(t=>{let i=l.localeMap[e]??"en";return(0,s.default)(t).locale(i).fromNow()},[e])}}])},142410,e=>{"use strict";var s=e.i(268255);e.s(["useAsyncWindowOpen",0,()=>(0,s.useCallback)(async(e,s)=>{let{immediateUrl:t,target:i="_blank",features:a,onError:l}=s??{},r=a?`${a},noopener,noreferrer`:"noopener,noreferrer";if(t){let e=window.open(t,i,r);if(!e)return void l?.(Error("Failed to open new window"));try{e.opener=null}catch{}return}let n=window.open("about:blank",i,a);if(!n)return void l?.(Error("Failed to open new window"));try{n.opener=null}catch{}try{let s=await e();if(s){n.location.href=s;return}n.close(),l?.(Error("No url resolved for new window"))}catch(e){n.close(),l?.(e instanceof Error?e:Error(String(e)))}},[])])},969789,e=>{"use strict";var s=e.i(563199),t=e.i(268255);e.i(152567);var i=e.i(408767),a=e.i(325222),l=e.i(935139),r=e.i(21151),n=e.i(84366),o=e.i(942064),d=e.i(800727);let c=t.memo(e=>{let{show:t,onHide:c}=e,{t:m}=(0,i.useTranslation)();return(0,s.jsx)(r.default,{isShow:t,onClose:c,closable:!0,className:"!p-0",children:(0,s.jsx)(a.default,{wrapperClassName:"rounded-lg",canvasClassName:"rounded-lg",gradientClassName:"rounded-lg",children:(0,s.jsxs)("div",{className:"mt-6 flex cursor-pointer flex-col rounded-lg border-2 border-solid border-transparent px-7 py-6 shadow-md transition-all duration-200 ease-in-out",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:(0,l.cn)(o.default.textGradient,"text-[18px] font-semibold leading-[27px]"),children:[(0,s.jsx)("div",{children:m("annotatedResponse.fullTipLine1",{ns:"billing"})}),(0,s.jsx)("div",{children:m("annotatedResponse.fullTipLine2",{ns:"billing"})})]})}),(0,s.jsx)(d.default,{className:"mt-4"}),(0,s.jsx)("div",{className:"mt-7 flex justify-end",children:(0,s.jsx)(n.default,{loc:"annotation-create"})})]})})})});e.s(["default",0,c])},621087,e=>{e.v({disabled:"style-module__Qhtp0a__disabled",slider:"style-module__Qhtp0a__slider","slider-thumb":"style-module__Qhtp0a__slider-thumb","slider-track":"style-module__Qhtp0a__slider-track","slider-track-1":"style-module__Qhtp0a__slider-track-1"})},491939,718574,e=>{"use strict";var s,t,i=e.i(563199),a=e.i(268255);e.i(152567);var l=e.i(408767),r=e.i(151094),n=e.i(21151),o=e.i(137667),d=e.i(739255),c=e.i(225162),m=e.i(117960),u=e.i(925521),p=e.i(421001);let x=e=>{let{title:s,tooltip:t,children:a}=e;return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"mb-1 flex items-center space-x-1",children:[(0,i.jsx)("div",{className:"system-sm-semibold py-1 text-text-secondary",children:s}),(0,i.jsx)(p.default,{popupContent:(0,i.jsx)("div",{className:"system-sm-regular max-w-[200px] text-text-secondary",children:t})})]}),(0,i.jsx)("div",{children:a})]})};var h=e.i(539522),f=e.i(935139),v=e.i(621087);let j=e=>{let{className:s,max:t,min:a,step:l,value:r,disabled:n,onChange:o}=e;return(0,i.jsx)(h.default,{disabled:n,value:isNaN(r)?0:r,min:a||0,max:t||100,step:l||1,className:(0,f.cn)(s,v.default.slider),thumbClassName:(0,f.cn)(v.default["slider-thumb"],"top-[-7px] h-[18px] w-2 cursor-pointer rounded-[36px] border !border-black/8 bg-white shadow-md"),trackClassName:v.default["slider-track"],onChange:o,renderThumb:(e,s)=>(0,i.jsx)("div",{...e,children:(0,i.jsx)("div",{className:"relative h-full w-full",children:(0,i.jsx)("div",{className:"system-sm-semibold absolute left-[50%] top-[-16px] translate-x-[-50%] text-text-primary",children:(s.valueNow/100).toFixed(2)})})})})},b=a.memo(e=>{let{className:s,value:t,onChange:a}=e,{t:r}=(0,l.useTranslation)();return(0,i.jsxs)("div",{className:s,children:[(0,i.jsx)("div",{className:"mt-[14px] h-px",children:(0,i.jsx)(j,{max:100,min:80,step:1,value:t,onChange:a})}),(0,i.jsxs)("div",{className:"system-xs-semibold-uppercase mt-[10px] flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex space-x-1 text-util-colors-cyan-cyan-500",children:[(0,i.jsx)("div",{children:"0.8"}),(0,i.jsx)("div",{children:"·"}),(0,i.jsx)("div",{children:r("feature.annotation.scoreThreshold.easyMatch",{ns:"appDebug"})})]}),(0,i.jsxs)("div",{className:"flex space-x-1 text-util-colors-blue-blue-500",children:[(0,i.jsx)("div",{children:"1.0"}),(0,i.jsx)("div",{children:"·"}),(0,i.jsx)("div",{children:r("feature.annotation.scoreThreshold.accurateMatch",{ns:"appDebug"})})]})]})]})}),y=a.memo(e=>{let{isShow:s,onHide:t,onSave:p,isInit:h,annotationConfig:f}=e,{t:v}=(0,l.useTranslation)(),{modelList:j,defaultModel:y,currentModel:g}=(0,c.useModelListAndDefaultModelAndCurrentProviderAndModel)(d.ModelTypeEnum.textEmbedding),[N,w]=(0,a.useState)(f),[C,_]=(0,a.useState)(!1),[T,k]=(0,a.useState)(f.embedding_model?{providerName:f.embedding_model.embedding_provider_name,modelName:f.embedding_model.embedding_model_name}:y?{providerName:y.provider.provider,modelName:y.model}:void 0),M=()=>{C||t()},L=async()=>{T&&T.modelName&&(T.modelName!==y?.model||g)?(_(!0),await p({embedding_provider_name:T.providerName,embedding_model_name:T.modelName},N.score_threshold),_(!1)):o.default.notify({message:v("modelProvider.embeddingModel.required",{ns:"common"}),type:"error"})};return(0,i.jsxs)(n.default,{isShow:s,onClose:M,className:"!mt-14 !w-[640px] !max-w-none !p-6",children:[(0,i.jsx)("div",{className:"title-2xl-semi-bold mb-2 text-text-primary",children:v(`initSetup.${h?"title":"configTitle"}`,{ns:"appAnnotation"})}),(0,i.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,i.jsx)(x,{title:v("feature.annotation.scoreThreshold.title",{ns:"appDebug"}),tooltip:v("feature.annotation.scoreThreshold.description",{ns:"appDebug"}),children:(0,i.jsx)(b,{className:"mt-1",value:100*(N.score_threshold||u.ANNOTATION_DEFAULT.score_threshold),onChange:e=>{w({...N,score_threshold:e/100})}})}),(0,i.jsx)(x,{title:v("modelProvider.embeddingModel.key",{ns:"common"}),tooltip:v("embeddingModelSwitchTip",{ns:"appAnnotation"}),children:(0,i.jsx)("div",{className:"pt-1",children:(0,i.jsx)(m.default,{defaultModel:T&&{provider:T.providerName,model:T.modelName},modelList:j,onSelect:e=>{k({providerName:e.provider,modelName:e.model})}})})})]}),(0,i.jsxs)("div",{className:"mt-6 flex justify-end gap-2",children:[(0,i.jsx)(r.default,{onClick:M,children:v("operation.cancel",{ns:"common"})}),(0,i.jsxs)(r.default,{variant:"primary",onClick:L,loading:C,children:[(0,i.jsx)("div",{}),(0,i.jsx)("div",{children:v(`initSetup.${h?"confirmBtn":"configConfirmBtn"}`,{ns:"appAnnotation"})})]})]})]})});e.s(["default",0,y],491939);var g=((s={}).enable="enable",s.disable="disable",s),N=((t={}).waiting="waiting",t.processing="processing",t.completed="completed",t);e.s(["AnnotationEnableStatus",()=>g,"JobStatus",()=>N],718574)},661509,e=>{"use strict";var s=e.i(563199),t=e.i(837699),i=e.i(268255);e.i(152567);var a=e.i(408767),l=e.i(654313),r=e.i(151094),n=e.i(521632),o=e.i(449980),d=e.i(988720),c=e.i(633957),m=e.i(580932),u=e.i(519436),p=e.i(312343);e.i(302047);var x=e.i(674245),h=e.i(325011),f=e.i(665127),v=e.i(946700),j=e.i(885327),b=e.i(683257),y=e.i(491234),g=e.i(344600),N=e.i(935139);let w=i.memo(e=>{let w,{showBackButton:C=!1,collection:_,isBuiltIn:T=!0,isModel:k=!0,toolName:M,setting:L={},readonly:A,onHide:S,onSave:B,credentialId:E,onAuthorizationItemClick:F}=e,I=(0,b.useLocale)(),P=(0,y.getLanguage)(I),{t:D}=(0,a.useTranslation)(),H=_.tools,O=H?.length>0,[R,$]=(0,i.useState)(!O),[q,Q]=(0,i.useState)(O?H:[]),U=q.find(e=>e.name===M),Z=U?(0,j.toolParametersToFormSchemas)(U.parameters):[],z=Z.filter(e=>"llm"===e.form),K=Z.filter(e=>"llm"!==e.form),V=K.length>0,[W,G]=(0,i.useState)(L),[J,X]=(0,i.useState)("info"),Y="info"===J;(0,i.useEffect)(()=>{_&&!O&&(async()=>{$(!0);try{let e=await new Promise(e=>{!async function(){k?e(await (0,g.fetchModelToolList)(_.name)):T?e(await (0,g.fetchBuiltInToolList)(_.name)):_.type===v.CollectionType.workflow?e(await (0,g.fetchWorkflowToolList)(_.id)):e(await (0,g.fetchCustomToolList)(_.name))}()});Q(e)}catch{}$(!1)})()},[_?.name,_?.id,_?.type]),(0,i.useEffect)(()=>{X(!A&&V?"setting":"info")},[V]);let ee=(w=!0,K.forEach(e=>{e.required&&!W[e.name]&&(w=!1)}),w),es=(0,s.jsx)("div",{className:"",children:z.length>0&&(0,s.jsx)("div",{className:"space-y-1 py-2",children:z.map((e,t)=>{var i;return(0,s.jsxs)("div",{className:"py-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"code-sm-semibold text-text-secondary",children:e.label[P]}),(0,s.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:"number-input"===(i=e.type)?D("setBuiltInTools.number",{ns:"tools"}):"text-input"===i?D("setBuiltInTools.string",{ns:"tools"}):"checkbox"===i?"boolean":"file"===i?D("setBuiltInTools.file",{ns:"tools"}):i}),e.required&&(0,s.jsx)("div",{className:"system-xs-medium text-text-warning-secondary",children:D("setBuiltInTools.required",{ns:"tools"})})]}),e.human_description&&(0,s.jsx)("div",{className:"system-xs-regular mt-0.5 text-text-tertiary",children:e.human_description?.[P]})]},t)})})}),et=(0,s.jsx)(c.default,{value:W,onChange:G,formSchemas:K,isEditMode:!1,showOnVariableMap:{},validating:!1,readonly:A});return(0,s.jsx)(n.default,{isOpen:!0,clickOutsideNotOpen:!1,onClose:S,footer:null,mask:!1,positionCenter:!1,panelClassName:(0,N.cn)("mb-2 mr-2 mt-[64px] !w-[420px] !max-w-[420px] justify-start rounded-2xl border-[0.5px] border-components-panel-border !bg-components-panel-bg !p-0 shadow-xl"),children:(0,s.jsxs)(s.Fragment,{children:[R&&(0,s.jsx)(o.default,{type:"app"}),!R&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"relative border-b border-divider-subtle p-4 pb-3",children:[(0,s.jsx)("div",{className:"absolute right-3 top-3",children:(0,s.jsx)(l.default,{onClick:S,children:(0,s.jsx)(t.RiCloseLine,{className:"h-4 w-4"})})}),C&&(0,s.jsxs)("div",{className:"system-xs-semibold-uppercase mb-2 flex cursor-pointer items-center gap-1 text-text-accent-secondary",onClick:S,children:[(0,s.jsx)(t.RiArrowLeftLine,{className:"h-4 w-4"}),D("detailPanel.operation.back",{ns:"plugin"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(m.default,{size:"tiny",className:"h-6 w-6",src:_.icon}),(0,s.jsx)(p.default,{packageNameClassName:"w-auto",orgName:_.author,packageName:_.name.split("/").pop()||""})]}),(0,s.jsx)("div",{className:"system-md-semibold mt-1 text-text-primary",children:U?.label[P]}),!!U?.description[P]&&(0,s.jsx)(u.default,{className:"mb-2 mt-3 h-auto",text:U.description[P],descriptionLineRows:2}),_.allow_delete&&_.type===v.CollectionType.builtIn&&(0,s.jsx)(h.PluginAuthInAgent,{pluginPayload:{provider:_.name,category:x.AuthCategory.tool,providerType:_.type,detail:_},credentialId:E,onAuthorizationItemClick:F})]}),(0,s.jsx)("div",{className:"h-full",children:(0,s.jsxs)("div",{className:"flex h-full flex-col",children:[V&&!A?(0,s.jsx)(d.default,{className:"mt-1 shrink-0 px-4",itemClassName:"py-3",noBorderBottom:!0,value:J,onChange:e=>{X(e)},options:[{value:"info",text:D("setBuiltInTools.parameters",{ns:"tools"})},{value:"setting",text:D("setBuiltInTools.setting",{ns:"tools"})}]}):(0,s.jsx)("div",{className:"system-sm-semibold-uppercase p-4 pb-1 text-text-primary",children:D("setBuiltInTools.parameters",{ns:"tools"})}),(0,s.jsxs)("div",{className:"h-0 grow overflow-y-auto px-4",children:[Y?es:et,!A&&!Y&&(0,s.jsxs)("div",{className:"flex shrink-0 justify-end space-x-2 rounded-b-[10px] bg-components-panel-bg py-2",children:[(0,s.jsx)(r.default,{className:"flex h-8 items-center !px-3 !text-[13px] font-medium ",onClick:S,children:D("operation.cancel",{ns:"common"})}),(0,s.jsx)(r.default,{className:"flex h-8 items-center !px-3 !text-[13px] font-medium",variant:"primary",disabled:!ee,onClick:()=>B?.(W),children:D("operation.save",{ns:"common"})})]})]}),(0,s.jsx)(f.ReadmeEntrance,{pluginDetail:_,className:"mt-auto"})]})})]})]})})});e.s(["default",0,w])},458266,e=>{"use strict";e.i(733437),e.s([])},16453,e=>{e.v({item:"style-module__2BvUtq__item"})},823660,781276,e=>{"use strict";var s=e.i(563199),t=e.i(268255);e.i(152567);var i=e.i(408767),a=e.i(151094),l=e.i(16453);let r=t.memo(e=>{let{name:t,className:i=""}=e;return(0,s.jsxs)("div",{className:`${l.default.item} ${i} mb-2 inline-flex h-5 items-center justify-center rounded-md px-1 text-xs font-medium text-primary-600`,children:[(0,s.jsx)("span",{className:"opacity-60",children:"{{"}),(0,s.jsx)("span",{children:t}),(0,s.jsx)("span",{className:"opacity-60",children:"}}"})]},t)});e.s(["default",0,r],781276);let n=(0,s.jsxs)("svg",{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M13.8683 0.704745C13.7051 0.374685 13.3053 0.239393 12.9752 0.402563C12.6452 0.565732 12.5099 0.965573 12.673 1.29563C13.5221 3.01316 13.9999 4.94957 13.9999 7.00019C13.9999 9.05081 13.5221 10.9872 12.673 12.7047C12.5099 13.0348 12.6452 13.4346 12.9752 13.5978C13.3053 13.761 13.7051 13.6257 13.8683 13.2956C14.8063 11.3983 15.3333 9.26009 15.3333 7.00019C15.3333 4.74029 14.8063 2.60209 13.8683 0.704745Z",fill:"#FD853A"}),(0,s.jsx)("path",{d:"M3.32687 1.29563C3.49004 0.965573 3.35475 0.565732 3.02469 0.402563C2.69463 0.239393 2.29479 0.374685 2.13162 0.704745C1.19364 2.60209 0.666626 4.74029 0.666626 7.00019C0.666626 9.26009 1.19364 11.3983 2.13162 13.2956C2.29479 13.6257 2.69463 13.761 3.02469 13.5978C3.35475 13.4346 3.49004 13.0348 3.32687 12.7047C2.47779 10.9872 1.99996 9.05081 1.99996 7.00019C1.99996 4.94957 2.47779 3.01316 3.32687 1.29563Z",fill:"#FD853A"}),(0,s.jsx)("path",{d:"M9.33238 4.8413C9.74208 4.36081 10.3411 4.08337 10.9726 4.08337H11.0324C11.4006 4.08337 11.6991 4.38185 11.6991 4.75004C11.6991 5.11823 11.4006 5.41671 11.0324 5.41671H10.9726C10.7329 5.41671 10.5042 5.52196 10.347 5.7064L8.78693 7.536L9.28085 9.27382C9.29145 9.31112 9.32388 9.33337 9.35696 9.33337H10.2864C10.6545 9.33337 10.953 9.63185 10.953 10C10.953 10.3682 10.6545 10.6667 10.2864 10.6667H9.35696C8.72382 10.6667 8.17074 10.245 7.99832 9.63834L7.74732 8.75524L6.76373 9.90878C6.35403 10.3893 5.75501 10.6667 5.1235 10.6667H5.06372C4.69553 10.6667 4.39705 10.3682 4.39705 10C4.39705 9.63185 4.69553 9.33337 5.06372 9.33337H5.1235C5.3632 9.33337 5.59189 9.22812 5.74915 9.04368L7.30926 7.21399L6.81536 5.47626C6.80476 5.43897 6.77233 5.41671 6.73925 5.41671H5.80986C5.44167 5.41671 5.14319 5.11823 5.14319 4.75004C5.14319 4.38185 5.44167 4.08337 5.80986 4.08337H6.73925C7.37239 4.08337 7.92547 4.50508 8.0979 5.11174L8.34887 5.99475L9.33238 4.8413Z",fill:"#FD853A"})]}),o=t.memo(e=>{let{varNameArr:l,onConfirm:o,onCancel:d}=e,{t:c}=(0,i.useTranslation)(),m=(0,t.useRef)(null);return(0,s.jsx)("div",{className:"absolute inset-0  flex items-center justify-center rounded-xl",style:{backgroundColor:"rgba(35, 56, 118, 0.2)"},children:(0,s.jsxs)("div",{ref:m,className:"w-[420px] rounded-xl bg-components-panel-bg p-6",style:{boxShadow:"0px 12px 16px -4px rgba(16, 24, 40, 0.08), 0px 4px 6px -2px rgba(16, 24, 40, 0.03)"},children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl border border-components-card-border bg-components-card-bg-alt shadow-lg",children:n}),(0,s.jsxs)("div",{className:"grow-1",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-text-primary",children:c("autoAddVar",{ns:"appDebug"})}),(0,s.jsx)("div",{className:"mt-[15px] flex max-h-[66px] flex-wrap space-x-1 overflow-y-auto px-1",children:l.map(e=>(0,s.jsx)(r,{name:e},e))})]})]}),(0,s.jsxs)("div",{className:"mt-7 flex justify-end space-x-2",children:[(0,s.jsx)(a.default,{onClick:d,children:c("operation.cancel",{ns:"common"})}),(0,s.jsx)(a.default,{variant:"primary",onClick:o,children:c("operation.add",{ns:"common"})})]})]})})});e.s(["default",0,o],823660)},201201,e=>{e.v(s=>Promise.all(["static/chunks/33d89f7067007c66.js","static/chunks/c798d4f27fd7256a.js","static/chunks/093735e21ea40753.css"].map(s=>e.l(s))).then(()=>s(661305)))},170830,e=>{e.v(e=>Promise.resolve().then(()=>e(81828)))}]);