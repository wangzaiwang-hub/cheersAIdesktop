(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,182915,e=>{"use strict";var t=e.i(925521);e.s(["setZendeskConversationFields",0,(e,a)=>{!t.IS_CE_EDITION&&window.zE&&window.zE("messenger:set","conversationFields",e,a)},"toggleZendeskWindow",0,e=>{!t.IS_CE_EDITION&&window.zE&&window.zE("messenger",e?"open":"close")}])},84314,e=>{"use strict";var t=e.i(773961);e.s(["X",()=>t.default])},236063,e=>{"use strict";var t=e.i(13028),a=e.i(142669),r=class extends t.QueryObserver{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:(0,a.infiniteQueryBehavior)()})}getOptimisticResult(e){return e.behavior=(0,a.infiniteQueryBehavior)(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){let{state:r}=e,l=super.createResult(e,t),{isFetching:n,isRefetching:s,isError:o,isRefetchError:i}=l,d=r.fetchMeta?.fetchMore?.direction,u=o&&"forward"===d,c=n&&"forward"===d,m=o&&"backward"===d,p=n&&"backward"===d;return{...l,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,a.hasNextPage)(t,r.data),hasPreviousPage:(0,a.hasPreviousPage)(t,r.data),isFetchNextPageError:u,isFetchingNextPage:c,isFetchPreviousPageError:m,isFetchingPreviousPage:p,isRefetchError:i&&!u&&!m,isRefetching:s&&!c&&!p}}},l=e.i(640239);function n(e,t){return(0,l.useBaseQuery)(e,r,t)}e.s(["useInfiniteQuery",()=>n],236063)},616301,944911,e=>{"use strict";var t,a,r,l,n,s,o,i=((t={}).tool="tool",t.model="model",t.extension="extension",t.agent="agent-strategy",t.datasource="datasource",t.trigger="trigger",t),d=((a={}).marketplace="marketplace",a.github="github",a.local="package",a.debugging="remote",a),u=((r={}).OAUTH="OAUTH",r.APIKEY="APIKEY",r.MANUAL="MANUAL",r),c=((l={}).everyone="everyone",l.admin="admins",l.noOne="noone",l),m=((n={}).setUrl="url",n.selectPackage="selecting",n.readyToInstall="readyToInstall",n.uploadFailed="uploadFailed",n.installed="installed",n.installFailed="failed",n),p=((s={}).uploading="uploading",s.uploadFailed="uploadFailed",s.readyToInstall="readyToInstall",s.installing="installing",s.installed="installed",s.installFailed="failed",s),g=((o={}).running="running",o.success="success",o.failed="failed",o);e.s(["InstallStep",()=>p,"InstallStepFromGitHub",()=>m,"PermissionType",()=>c,"PluginCategoryEnum",()=>i,"PluginSource",()=>d,"SupportedCreationMethods",()=>u,"TaskStatus",()=>g],944911);let f={all:"all",model:i.model,tool:i.tool,agent:i.agent,extension:i.extension,datasource:i.datasource,trigger:i.trigger,bundle:"bundle"},v=new Set([f.all,f.tool]);e.s(["DEFAULT_SORT",0,{sortBy:"install_count",sortOrder:"DESC"},"PLUGIN_CATEGORY_WITH_COLLECTIONS",0,v,"PLUGIN_TYPE_SEARCH_MAP",0,f,"SCROLL_BOTTOM_THRESHOLD",0,100],616301)},351797,108185,e=>{"use strict";var t=e.i(236063),a=e.i(562572),r=e.i(214309),l=e.i(38532),n=e.i(268255),s=e.i(367916),o=e.i(616301),i=e.i(944911),d=e.i(925521),u=e.i(10190),c=e.i(168014);let m=e=>"bundle"===e.type?`${d.MARKETPLACE_API_PREFIX}/bundles/${e.org}/${e.name}/icon`:`${d.MARKETPLACE_API_PREFIX}/plugins/${e.org}/${e.name}/icon`,p=e=>"bundle"===e.type?{...e,icon:m(e),brief:e.description,label:e.labels}:{...e,icon:m(e)},g=async(e,t,a)=>{let r=[];try{let l=await u.marketplaceClient.collectionPlugins({params:{collectionId:e},body:t},{signal:a?.signal});r=(l.data?.plugins||[]).map(e=>p(e))}catch(e){r=[]}return r},f=async(e,t)=>{let a=[],r={};try{let l=await u.marketplaceClient.collections({query:{...e,page:1,page_size:100}},{signal:t?.signal});a=l.data?.collections||[],await Promise.all(a.map(async a=>{let l=await g(a.name,e,t);r[a.name]=l}))}catch(e){a=[],r={}}return{marketplaceCollections:a,marketplaceCollectionPluginsMap:r}},v=async(e,t,a)=>{if(!e)return{plugins:[],total:0,page:1,page_size:40};let{query:r,sort_by:l,sort_order:n,category:s,tags:o,type:i,page_size:d=40}=e;try{let e=await u.marketplaceClient.searchAdvanced({params:{kind:"bundle"===i?"bundles":"plugins"},body:{page:t,page_size:d,query:r,sort_by:l,sort_order:n,category:"all"!==s?s:"",tags:o}},{signal:a});return{plugins:(e.data.bundles||e.data.plugins||[]).map(e=>p(e)),total:e.data.total,page:t,page_size:d}}catch{return{plugins:[],total:0,page:t,page_size:d}}},h=e=>[i.PluginCategoryEnum.tool,i.PluginCategoryEnum.agent,i.PluginCategoryEnum.model,i.PluginCategoryEnum.datasource,i.PluginCategoryEnum.trigger].includes(e)?`category=${e}`:e===i.PluginCategoryEnum.extension?"category=endpoint":"bundle"===e?"type=bundle":"",b=e=>{if(e!==o.PLUGIN_TYPE_SEARCH_MAP.all)return e===o.PLUGIN_TYPE_SEARCH_MAP.bundle?"bundle":"plugin"};function x(e){return e===o.PLUGIN_TYPE_SEARCH_MAP.all?{}:{category:e,condition:h(e),type:b(e)}}e.s(["getCollectionsParams",()=>x,"getFormattedPlugin",0,p,"getMarketplaceCollectionsAndPlugins",0,f,"getMarketplaceListCondition",0,h,"getMarketplaceListFilterType",0,b,"getMarketplacePlugins",0,v,"getMarketplacePluginsByCollectionId",0,g,"getPluginDetailLinkInMarketplace",0,e=>"bundle"===e.type?`/bundles/${e.org}/${e.name}`:`/plugins/${e.org}/${e.name}`,"getPluginIconInMarketplace",0,m,"getPluginLinkInMarketplace",0,(e,t)=>"bundle"===e.type?(0,c.getMarketplaceUrl)(`/bundles/${e.org}/${e.name}`,t):(0,c.getMarketplaceUrl)(`/plugins/${e.org}/${e.name}`,t)],108185),e.s(["useMarketplaceCollectionsAndPlugins",0,()=>{let[e,t]=(0,n.useState)(),[r,l]=(0,n.useState)(),[s,o]=(0,n.useState)(),{data:i,isFetching:d,isSuccess:u,isPending:c}=(0,a.useQuery)({queryKey:["marketplaceCollectionsAndPlugins",e],queryFn:t=>{let{signal:a}=t;return f(e,{signal:a})},enabled:void 0!==e,staleTime:3e5,gcTime:6e5,retry:!1}),m=(0,n.useCallback)(e=>{t(e?{...e}:{})},[]),p=!!e&&(d||c);return{marketplaceCollections:r??i?.marketplaceCollections,setMarketplaceCollections:l,marketplaceCollectionPluginsMap:s??i?.marketplaceCollectionPluginsMap,setMarketplaceCollectionPluginsMap:o,queryMarketplaceCollectionsAndPlugins:m,isLoading:p,isSuccess:u}},"useMarketplaceContainerScroll",0,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"marketplace-container",a=(0,n.useCallback)(t=>{let{scrollTop:a,scrollHeight:r,clientHeight:l}=t.target;a+l>=r-o.SCROLL_BOTTOM_THRESHOLD&&a>0&&e()},[e]);(0,n.useEffect)(()=>{let e=document.getElementById(t);return e&&e.addEventListener("scroll",a),()=>{e&&e.removeEventListener("scroll",a)}},[a])},"useMarketplacePlugins",0,()=>{let e=(0,r.useQueryClient)(),[a,o]=(0,n.useState)(),i=(0,n.useCallback)(e=>{let t=e.page_size||40;return{...e,page_size:t}},[]),d=(0,t.useInfiniteQuery)({queryKey:["marketplacePlugins",a],queryFn:async e=>{let{pageParam:t=1,signal:r}=e;if(!a)return{plugins:[],total:0,page:1,page_size:40};let{query:l,sort_by:n,sort_order:o,category:d,tags:u,exclude:c,type:m,page_size:g}=i(a),f="bundle"===m?"bundles":"plugins";try{let e=await (0,s.postMarketplace)(`/${f}/search/advanced`,{body:{page:t,page_size:g,query:l,sort_by:n,sort_order:o,category:"all"!==d?d:"",tags:u,exclude:c,type:m},signal:r});return{plugins:(e.data.bundles||e.data.plugins||[]).map(e=>p(e)),total:e.data.total,page:t,page_size:g}}catch{return{plugins:[],total:0,page:t,page_size:g}}},getNextPageParam:e=>{let t=e.page+1;return e.page*e.page_size<(e.total||0)?t:void 0},initialPageParam:1,enabled:!!a,staleTime:3e5,gcTime:6e5,retry:!1}),u=(0,n.useCallback)(()=>{o(void 0),e.removeQueries({queryKey:["marketplacePlugins"]})},[e]),c=(0,n.useCallback)(e=>{o(i(e))},[i]),{run:m,cancel:g}=(0,l.useDebounceFn)(e=>{c(e)},{wait:500}),f=!!a,v=void 0!==d.data,h=f&&v?d.data.pages.flatMap(e=>e.plugins):void 0;return{plugins:h,total:f&&v?d.data.pages?.[0]?.total:void 0,resetPlugins:u,queryPlugins:c,queryPluginsWithDebounced:m,cancelQueryPluginsWithDebounced:g,isLoading:f&&(d.isPending||d.isFetching&&!d.data),isFetchingNextPage:d.isFetchingNextPage,hasNextPage:d.hasNextPage,fetchNextPage:d.fetchNextPage,page:d.data?.pages?.length||(d.isPending&&f?1:0)}},"useMarketplacePluginsByCollectionId",0,(e,t)=>{let{data:r,isFetching:l,isSuccess:n,isPending:s}=(0,a.useQuery)({queryKey:["marketplaceCollectionPlugins",e,t],queryFn:a=>{let{signal:r}=a;return e?g(e,t,{signal:r}):Promise.resolve([])},enabled:!!e,staleTime:3e5,gcTime:6e5,retry:!1});return{plugins:r||[],isLoading:!!e&&(l||s),isSuccess:n}}],351797)},59375,e=>{"use strict";let t={PROVIDER:"provider",MEMBERS:"members",BILLING:"billing",DATA_SOURCE:"data-source",API_BASED_EXTENSION:"api-based-extension",CUSTOM:"custom",LANGUAGE:"language"},a=t.MEMBERS;e.s(["ACCOUNT_SETTING_MODAL_ACTION",0,"showSettings","ACCOUNT_SETTING_TAB",0,t,"DEFAULT_ACCOUNT_SETTING_TAB",0,a,"isValidAccountSettingTab",0,e=>!!e&&Object.values(t).includes(e)])},948124,e=>{"use strict";e.s(["EDUCATION_RE_VERIFY_ACTION",0,"educationReVerify","EDUCATION_VERIFYING_LOCALSTORAGE_ITEM",0,"educationVerifying","EDUCATION_VERIFY_URL_SEARCHPARAMS_ACTION",0,"getEducationVerify"])},342687,e=>{"use strict";var t,a,r,l,n=((t={}).sandbox="sandbox",t.professional="professional",t.team="team",t.enterprise="enterprise",t),s=((a={}).standard="standard",a.priority="priority",a.topPriority="top-priority",a),o=((r={}).community="community",r.premium="premium",r.enterprise="enterprise",r),i=((l={}).standard="standard",l.priority="priority",l.topPriority="top-priority",l);e.s(["DocumentProcessingPriority",()=>i,"Plan",()=>n,"Priority",()=>s,"SelfHostedPlan",()=>o])},56971,623244,891299,250732,218631,e=>{"use strict";var t=e.i(563199),a=e.i(214309),r=e.i(585458),l=e.i(124836),n=e.i(268255);e.i(152567);var s=e.i(408767),o=e.i(339548),i=e.i(137667),d=e.i(182915),u=e.i(342687);let c="OpenAI/Anthropic/Llama2/Azure OpenAI/Hugging Face/Replicate",m={sandbox:{level:1,price:0,modelProviders:c,teamWorkspace:1,teamMembers:1,buildApps:5,documents:50,vectorSpace:"50MB",documentsUploadQuota:0,documentsRequestQuota:10,apiRateLimit:5e3,documentProcessingPriority:u.Priority.standard,messageRequest:200,triggerEvents:3e3,annotatedResponse:10,logHistory:30},professional:{level:2,price:59,modelProviders:c,teamWorkspace:1,teamMembers:3,buildApps:50,documents:500,vectorSpace:"5GB",documentsUploadQuota:0,documentsRequestQuota:100,apiRateLimit:-1,documentProcessingPriority:u.Priority.priority,messageRequest:5e3,triggerEvents:2e4,annotatedResponse:2e3,logHistory:-1},team:{level:3,price:159,modelProviders:c,teamWorkspace:1,teamMembers:50,buildApps:200,documents:1e3,vectorSpace:"20GB",documentsUploadQuota:0,documentsRequestQuota:1e3,apiRateLimit:-1,documentProcessingPriority:u.Priority.topPriority,messageRequest:1e4,triggerEvents:-1,annotatedResponse:5e3,logHistory:-1}},p={type:u.Plan.sandbox,usage:{documents:50,vectorSpace:1,buildApps:1,teamMembers:1,annotatedResponse:1,documentsUploadQuota:0,apiRateLimit:0,triggerEvents:0},total:{documents:50,vectorSpace:10,buildApps:10,teamMembers:1,annotatedResponse:10,documentsUploadQuota:0,apiRateLimit:m.sandbox.apiRateLimit,triggerEvents:m.sandbox.triggerEvents},reset:{apiRateLimit:null,triggerEvents:null}};e.s(["ALL_PLANS",0,m,"NUM_INFINITE",0,-1,"contactSalesUrl",0,"https://vikgc6bnu1s.typeform.com/dify-business","defaultPlan",0,p,"getStartedWithCommunityUrl",0,"https://github.com/langgenius/dify","getWithPremiumUrl",0,"https://aws.amazon.com/marketplace/pp/prodview-t22mebxzwjhu6"],623244);let g=e=>0===e?-1:e,f=e=>{let t=e.billing.subscription.plan,a=m[t],l=(e,t)=>{var a;return 0===(a=e??t??0)||-1===a?-1:a},n=e=>e?.usage??0,s=e=>{if(!e)return null;let t=(e=>{if("number"!=typeof e||e<=0)return null;if(e>=1e12)return(0,r.default)(e);if(e>=1e9)return(0,r.default)(1e3*e);let t=e.toString();if(8===t.length){let e=t.slice(0,4),a=t.slice(4,6),l=t.slice(6,8),n=(0,r.default)(`${e}-${a}-${l}`);return n.isValid()?n:null}return null})(e.reset_date);if(!t)return null;let a=t.startOf("day").diff((0,r.default)().startOf("day"),"day");return Number.isNaN(a)||a<0?null:a};return{type:t,usage:{vectorSpace:e.vector_space.size,buildApps:e.apps?.size||0,teamMembers:e.members.size,annotatedResponse:e.annotation_quota_limit.size,documentsUploadQuota:e.documents_upload_quota.size,apiRateLimit:n(e.api_rate_limit),triggerEvents:n(e.trigger_event)},total:{vectorSpace:g(e.vector_space.limit),buildApps:g(e.apps?.limit)||0,teamMembers:g(e.members.limit),annotatedResponse:g(e.annotation_quota_limit.limit),documentsUploadQuota:g(e.documents_upload_quota.limit),apiRateLimit:l(e.api_rate_limit?.limit,a?.apiRateLimit??-1),triggerEvents:l(e.trigger_event?.limit,a?.triggerEvents)},reset:{apiRateLimit:s(e.api_rate_limit),triggerEvents:s(e.trigger_event)}}};e.s(["getPlanVectorSpaceLimitMB",0,e=>{let t=m[e];if(!t)return 0;let a=t.vectorSpace.match(/^(\d+)(MB|GB)$/i);if(!a)return 0;let r=Number.parseInt(a[1],10);return"GB"===a[2].toUpperCase()?1024*r:r},"parseCurrentPlan",0,f],891299);var v=e.i(739255),h=e.i(925521),b=e.i(367916);let x=()=>(0,b.get)("/features");e.s(["fetchCurrentPlanInfo",0,x,"fetchSubscriptionUrls",0,(e,t)=>(0,b.get)(`/billing/subscription?plan=${e}&interval=${t}`)],250732);var y=e.i(652669),_=e.i(875037),C=e.i(562572),E=e.i(722384);let S="education",M=e=>(0,C.useQuery)({enabled:!e,queryKey:[S,"education-status"],queryFn:()=>(0,b.get)("/account/education"),retry:!1,staleTime:0});e.s(["useEducationAdd",0,e=>{let{onSuccess:t}=e;return(0,_.useMutation)({mutationKey:[S,"education-add"],mutationFn:e=>(0,b.post)("/account/education",{body:e}),onSuccess:t})},"useEducationAutocomplete",0,()=>(0,_.useMutation)({mutationFn:e=>{let{keywords:t="",page:a=0,limit:r=40}=e;return(0,b.get)(`/account/education/autocomplete?keywords=${t}&page=${a}&limit=${r}`)}}),"useEducationStatus",0,M,"useEducationVerify",0,()=>(0,_.useMutation)({mutationKey:[S,"education-verify"],mutationFn:()=>(0,b.get)("/account/education/verify",{},{silent:!0})}),"useInvalidateEducationStatus",0,()=>(0,E.useInvalid)([S,"education-status"])],218631);let P={modelProviders:[],refreshModelProviders:l.noop,textGenerationModelList:[],supportRetrievalMethods:[],isAPIKeySet:!0,plan:p,isFetchedPlan:!1,enableBilling:!1,onPlanInfoChanged:l.noop,enableReplaceWebAppLogo:!1,modelLoadBalancingEnabled:!1,datasetOperatorEnabled:!1,enableEducationPlan:!1,isEducationWorkspace:!1,isEducationAccount:!1,allowRefreshEducationVerify:!1,educationAccountExpireAt:null,isLoadingEducationAccountInfo:!1,isFetchingEducationAccountInfo:!1,webappCopyrightEnabled:!1,licenseLimit:{workspace_members:{size:0,limit:0}},refreshLicenseLimit:l.noop,isAllowTransferWorkspace:!1,isAllowPublishAsCustomKnowledgePipelineTemplate:!1},w=(0,o.createContext)(P);e.s(["ProviderContextProvider",0,e=>{let{children:l}=e,o=(0,a.useQueryClient)(),{data:u}=(0,y.useModelProviders)(),{data:c}=(0,y.useModelListByType)(v.ModelTypeEnum.textGeneration),{data:m}=(0,y.useSupportRetrievalMethods)(),[g,b]=(0,n.useState)(p),[_,C]=(0,n.useState)(!1),[E,S]=(0,n.useState)(!0),[P,N]=(0,n.useState)(!1),[k,j]=(0,n.useState)(!1),[I,T]=(0,n.useState)(!1),[A,F]=(0,n.useState)(!1),[O,R]=(0,n.useState)({workspace_members:{size:0,limit:0}}),[D,L]=(0,n.useState)(!1),[U,B]=(0,n.useState)(!1),{data:z,isLoading:$,isFetching:G,isFetchedAfterMount:q}=M(!D),[K,V]=(0,n.useState)(!1),[Q,H]=(0,n.useState)(!1),W=async()=>{try{let e=await x();if(!e)return void console.error("Failed to fetch plan info: data is undefined");S(e.billing?.enabled??!1),L(e.education?.enabled??!1),B(e.education?.activated??!1),N(e.can_replace_logo??!1),e.billing?.enabled&&(b(f(e)),C(!0)),e.model_load_balancing_enabled&&j(!0),e.dataset_operator_enabled&&T(!0),e.webapp_copyright_enabled&&F(!0),e.workspace_members&&R({workspace_members:e.workspace_members}),e.is_allow_transfer_workspace&&V(e.is_allow_transfer_workspace),e.knowledge_pipeline?.publish_enabled&&H(e.knowledge_pipeline?.publish_enabled)}catch(e){console.error("Failed to fetch plan info:",e),S(!1),L(!1),B(!1),N(!1)}};(0,n.useEffect)(()=>{W()},[]),(0,n.useEffect)(()=>{h.ZENDESK_FIELD_IDS.PLAN&&g.type&&(0,d.setZendeskConversationFields)([{id:h.ZENDESK_FIELD_IDS.PLAN,value:`${g.type}-plan`}])},[g.type]);let{t:Y}=(0,s.useTranslation)();return(0,n.useEffect)(()=>{if("true"!==localStorage.getItem("anthropic_quota_notice")&&!(0,r.default)().isAfter((0,r.default)("2025-03-17"))&&u?.data&&u.data.length>0){let e=u.data.find(e=>"anthropic"===e.provider);if(e&&e.system_configuration.current_quota_type===v.CurrentSystemQuotaTypeEnum.trial){let t=e.system_configuration.quota_configurations.find(t=>t.quota_type===e.system_configuration.current_quota_type);t&&t.is_valid&&t.quota_used<t.quota_limit&&i.default.notify({type:"info",message:Y("provider.anthropicHosted.trialQuotaTip",{ns:"common"}),duration:6e4,onClose:()=>{localStorage.setItem("anthropic_quota_notice","true")}})}}},[u,Y]),(0,t.jsx)(w.Provider,{value:{modelProviders:u?.data||[],refreshModelProviders:()=>{o.invalidateQueries({queryKey:["common","model-providers"]})},textGenerationModelList:c?.data||[],isAPIKeySet:!!c?.data?.some(e=>e.status===v.ModelStatusEnum.active),supportRetrievalMethods:m?.retrieval_method||[],plan:g,isFetchedPlan:_,enableBilling:E,onPlanInfoChanged:W,enableReplaceWebAppLogo:P,modelLoadBalancingEnabled:k,datasetOperatorEnabled:I,enableEducationPlan:D,isEducationWorkspace:U,isEducationAccount:!!q&&(z?.is_student??!1),allowRefreshEducationVerify:!!q&&(z?.allow_refresh??!1),educationAccountExpireAt:q?z?.expire_at??null:null,isLoadingEducationAccountInfo:$,isFetchingEducationAccountInfo:G,webappCopyrightEnabled:A,licenseLimit:O,refreshLicenseLimit:W,isAllowTransferWorkspace:K,isAllowPublishAsCustomKnowledgePipelineTemplate:Q},children:l})},"baseProviderContextValue",0,P,"default",0,w,"useProviderContext",0,()=>(0,o.useContext)(w),"useProviderContextSelector",0,e=>(0,o.useContextSelector)(w,e)],56971)},45284,e=>{"use strict";var t=e.i(48322),a=e.i(786092),r=e.i(268255);function l(e,t,r){try{return e(t)}catch(e){return(0,a.l)("[nuqs] Error while parsing value `%s`: %O"+(r?" (for key `%s`)":""),t,e,r),null}}function n(e){function t(t){if(void 0===t)return null;let a="";if(Array.isArray(t)){if(void 0===t[0])return null;a=t[0]}return"string"==typeof t&&(a=t),l(e.parse,a)}return{type:"single",eq:(e,t)=>e===t,...e,parseServerSide:t,withDefault(e){return{...this,defaultValue:e,parseServerSide:a=>t(a)??e}},withOptions(e){return{...this,...e}}}}let s=n({parse:e=>e,serialize:String});n({parse:e=>{let t=parseInt(e);return t==t?t:null},serialize:e=>""+Math.round(e)}),n({parse:e=>{let t=parseInt(e);return t==t?t-1:null},serialize:e=>""+Math.round(e+1)}),n({parse:e=>{let t=parseInt(e,16);return t==t?t:null},serialize:e=>{let t=Math.round(e).toString(16);return(1&t.length?"0":"")+t}}),n({parse:e=>{let t=parseFloat(e);return t==t?t:null},serialize:String});let o=n({parse:e=>"true"===e.toLowerCase(),serialize:String});function i(e,t){return e.valueOf()===t.valueOf()}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",a=e.eq??((e,t)=>e===t),r=encodeURIComponent(t);return n({parse:a=>""===a?[]:a.split(t).map((a,n)=>l(e.parse,a.replaceAll(r,t),`[${n}]`)).filter(e=>null!=e),serialize:a=>a.map(a=>(e.serialize?e.serialize(a):String(a)).replaceAll(t,r)).join(t),eq:(e,t)=>e===t||e.length===t.length&&e.every((e,r)=>a(e,t[r]))})}n({parse:e=>{let t=parseInt(e);return t==t?new Date(t):null},serialize:e=>""+e.valueOf(),eq:i}),n({parse:e=>{let t=new Date(e);return t.valueOf()==t.valueOf()?t:null},serialize:e=>e.toISOString(),eq:i}),n({parse:e=>{let t=new Date(e.slice(0,10));return t.valueOf()==t.valueOf()?t:null},serialize:e=>e.toISOString().slice(0,10),eq:i});let u=(0,t.r)(),c={};function m(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,r.useId)(),s=(0,a.i)(),o=(0,a.a)(),{history:i="replace",scroll:d=s?.scroll??!1,shallow:m=s?.shallow??!0,throttleMs:f=t.s.timeMs,limitUrlUpdates:v=s?.limitUrlUpdates,clearOnDefault:h=s?.clearOnDefault??!0,startTransition:b,urlKeys:x=c}=l,y=Object.keys(e).join(","),_=(0,r.useMemo)(()=>Object.fromEntries(Object.keys(e).map(e=>[e,x[e]??e])),[y,JSON.stringify(x)]),C=(0,a.r)(Object.values(_)),E=C.searchParams,S=(0,r.useRef)({}),M=(0,r.useMemo)(()=>Object.fromEntries(Object.keys(e).map(t=>[t,e[t].defaultValue??null])),[Object.values(e).map(e=>{let{defaultValue:t}=e;return t}).join(",")]),P=t.t.useQueuedQueries(Object.values(_)),[w,N]=(0,r.useState)(()=>p(e,x,E??new URLSearchParams,P).state),k=(0,r.useRef)(w);if((0,a.c)("[nuq+ %s `%s`] render - state: %O, iSP: %s",n,y,w,E),Object.keys(S.current).join("&")!==Object.values(_).join("&")){let{state:t,hasChanged:r}=p(e,x,E,P,S.current,k.current);r&&((0,a.c)("[nuq+ %s `%s`] State changed: %O",n,y,{state:t,initialSearchParams:E,queuedQueries:P,queryRef:S.current,stateRef:k.current}),k.current=t,N(t)),S.current=Object.fromEntries(Object.entries(_).map(t=>{let[a,r]=t;return[r,e[a]?.type==="multi"?E?.getAll(r):E?.get(r)??null]}))}(0,r.useEffect)(()=>{let{state:t,hasChanged:r}=p(e,x,E,P,S.current,k.current);r&&((0,a.c)("[nuq+ %s `%s`] State changed: %O",n,y,{state:t,initialSearchParams:E,queuedQueries:P,queryRef:S.current,stateRef:k.current}),k.current=t,N(t))},[Object.values(_).map(e=>`${e}=${E?.getAll(e)}`).join("&"),JSON.stringify(P)]),(0,r.useEffect)(()=>{let t=Object.keys(e).reduce((t,r)=>(t[r]=t=>{let{state:l,query:s}=t;N(t=>{let{defaultValue:o}=e[r],i=_[r],d=l??o??null;return Object.is(t[r]??o??null,d)?((0,a.c)("[nuq+ %s `%s`] Cross-hook key sync %s: %O (default: %O). no change, skipping, resolved: %O",n,y,i,l,o,k.current),t):(k.current={...k.current,[r]:d},S.current[i]=s,(0,a.c)("[nuq+ %s `%s`] Cross-hook key sync %s: %O (default: %O). updateInternalState, resolved: %O",n,y,i,l,o,k.current),k.current)})},t),{});for(let r of Object.keys(e)){let e=_[r];(0,a.c)("[nuq+ %s `%s`] Subscribing to sync for `%s`",n,e,y),u.on(e,t[r])}return()=>{for(let r of Object.keys(e)){let e=_[r];(0,a.c)("[nuq+ %s `%s`] Unsubscribing to sync for `%s`",n,e,y),u.off(e,t[r])}}},[y,_]);let j=(0,r.useCallback)(function(r){let l,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=Object.fromEntries(Object.keys(e).map(e=>[e,null])),p="function"==typeof r?r(g(k.current,M))??c:r??c;(0,a.c)("[nuq+ %s `%s`] setState: %O",n,y,p);let x=0,E=!1,S=[];for(let[r,n]of Object.entries(p)){let c=e[r],p=_[r];if(!c||void 0===n)continue;(s.clearOnDefault??c.clearOnDefault??h)&&null!==n&&void 0!==c.defaultValue&&(c.eq??((e,t)=>e===t))(n,c.defaultValue)&&(n=null);let g=null===n?null:(c.serialize??String)(n);u.emit(p,{state:n,query:g});let y={key:p,query:g,options:{history:s.history??c.history??i,shallow:s.shallow??c.shallow??m,scroll:s.scroll??c.scroll??d,startTransition:s.startTransition??c.startTransition??b}};if(s?.limitUrlUpdates?.method==="debounce"||v?.method==="debounce"||c.limitUrlUpdates?.method==="debounce"){!0===y.options.shallow&&console.warn((0,a.s)(422));let e=s?.limitUrlUpdates?.timeMs??v?.timeMs??c.limitUrlUpdates?.timeMs??t.s.timeMs,r=t.t.push(y,e,C,o);x<e&&(l=r,x=e)}else{let e=s?.limitUrlUpdates?.timeMs??c?.limitUrlUpdates?.timeMs??v?.timeMs??s.throttleMs??c.throttleMs??f;S.push(t.t.abort(p)),t.n.push(y,e),E=!0}}let P=S.reduce((e,t)=>t(e),E?t.n.flush(C,o):t.n.getPendingPromise(C));return l??P},[y,i,m,d,f,v?.method,v?.timeMs,b,_,C.updateUrl,C.getSearchParamsSnapshot,C.rateLimitFactor,o,M]);return[(0,r.useMemo)(()=>g(w,M),[w,M]),j]}function p(e,a,r,n,s,o){let i=!1,d=Object.entries(e).reduce((e,d)=>{var u;let[c,m]=d,p=a?.[c]??c,g=n[p],f="multi"===m.type?[]:null,v=void 0===g?("multi"===m.type?r?.getAll(p):r?.get(p))??f:g;return s&&o&&((u=s[p]??f)===v||null!==u&&null!==v&&"string"!=typeof u&&"string"!=typeof v&&u.length===v.length&&u.every((e,t)=>e===v[t]))?e[c]=o[c]??null:(i=!0,e[c]=((0,t.i)(v)?null:l(m.parse,v,p))??null,s&&(s[p]=v)),e},{});if(!i){let t=Object.keys(e),a=Object.keys(o??{});i=t.length!==a.length||t.some(e=>!a.includes(e))}return{state:d,hasChanged:i}}function g(e,t){return Object.fromEntries(Object.keys(e).map(a=>[a,e[a]??t[a]??null]))}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{parse:a,type:l,serialize:n,eq:s,defaultValue:o,...i}=t,[{[e]:d},u]=m({[e]:{parse:a??(e=>e),type:l,serialize:n,eq:s,defaultValue:o}},i);return[d,(0,r.useCallback)(function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u(a=>({[e]:"function"==typeof t?t(a[e]):t}),a)},[e,u])]}e.s(["createParser",()=>n,"parseAsArrayOf",()=>d,"parseAsBoolean",()=>o,"parseAsString",()=>s,"useQueryState",()=>f,"useQueryStates",()=>m],45284)},296124,549213,e=>{"use strict";e.s(["ModalContextProvider",()=>U,"default",()=>B,"useModalContext",()=>D,"useModalContextSelector",()=>L],296124);var t=e.i(563199),a=e.i(124836),r=e.i(233697),l=e.i(268255),n=e.i(339548),s=e.i(59375),o=e.i(948124),i=e.i(711536),d=e.i(56971),u=e.i(45284),c=e.i(772870);let m="open",p=(0,u.createParser)({parse:e=>e===m||null,serialize:e=>e?m:""}).withDefault(!1).withOptions({history:"push"});function g(){return(0,u.useQueryState)("pricing",p)}function f(){let[e,t]=(0,u.useQueryStates)({action:u.parseAsString,tab:u.parseAsString},{history:"replace"}),a=(0,l.useCallback)(a=>{if(!a)return void t({action:null,tab:null},{history:"replace"});let r=e.action!==s.ACCOUNT_SETTING_MODAL_ACTION;t({action:s.ACCOUNT_SETTING_MODAL_ACTION,tab:a.payload},{history:r?"push":"replace"})},[e.action,t]),r=e.action===s.ACCOUNT_SETTING_MODAL_ACTION,n=r?e.tab:null;return[{isOpen:r,payload:n},a]}let v=(0,u.createParser)({parse:e=>{try{let t=JSON.parse(e);if(Array.isArray(t)){let e=t[0];return"string"==typeof e?e:null}return e}catch{return e}},serialize:e=>JSON.stringify([e])}),h=(0,u.createParser)({parse:e=>{try{let t=JSON.parse(e);if(t&&"string"==typeof t.org&&"string"==typeof t.name&&"string"==typeof t.version)return{org:t.org,name:t.name,version:t.version}}catch{}return null},serialize:e=>JSON.stringify(e)});function b(){return(0,u.useQueryStates)({packageId:v,bundleInfo:h},{urlKeys:{packageId:"package-ids",bundleInfo:"bundle-info"}})}e.s(["useAccountSettingModal",()=>f,"usePluginInstallation",()=>b,"usePricingModal",()=>g],549213);var x=e.i(585458),y=e.i(623244),_=e.i(342687),C=e.i(925521);let E=(0,r.default)(()=>e.A(731569),{loadableGenerated:{modules:[924697]},ssr:!1}),S=(0,r.default)(()=>e.A(165508),{loadableGenerated:{modules:[117658]},ssr:!1}),M=(0,r.default)(()=>e.A(533206),{loadableGenerated:{modules:[157154]},ssr:!1}),P=(0,r.default)(()=>e.A(419015),{loadableGenerated:{modules:[668887]},ssr:!1}),w=(0,r.default)(()=>e.A(139499),{loadableGenerated:{modules:[812340]},ssr:!1}),N=(0,r.default)(()=>e.A(384251),{loadableGenerated:{modules:[535952]},ssr:!1}),k=(0,r.default)(()=>e.A(271777),{loadableGenerated:{modules:[359540]},ssr:!1}),j=(0,r.default)(()=>e.A(295276),{loadableGenerated:{modules:[955852]},ssr:!1}),I=(0,r.default)(()=>e.A(347789),{loadableGenerated:{modules:[100550]},ssr:!1}),T=(0,r.default)(()=>e.A(710986),{loadableGenerated:{modules:[553791]},ssr:!1}),A=(0,r.default)(()=>e.A(511009),{loadableGenerated:{modules:[43994]},ssr:!1}),F=(0,r.default)(()=>e.A(110135),{loadableGenerated:{modules:[834473]},ssr:!1}),O=(0,r.default)(()=>e.A(69654),{loadableGenerated:{modules:[672545]},ssr:!1}),R=(0,n.createContext)({setShowAccountSettingModal:a.noop,setShowApiBasedExtensionModal:a.noop,setShowModerationSettingModal:a.noop,setShowExternalDataToolModal:a.noop,setShowPricingModal:a.noop,setShowAnnotationFullModal:a.noop,setShowModelModal:a.noop,setShowExternalKnowledgeAPIModal:a.noop,setShowModelLoadBalancingModal:a.noop,setShowOpeningModal:a.noop,setShowUpdatePluginModal:a.noop,setShowEducationExpireNoticeModal:a.noop,setShowTriggerEventsLimitModal:a.noop}),D=()=>(0,n.useContext)(R),L=e=>(0,n.useContextSelector)(R,e),U=e=>{let{children:a}=e,[r,n]=g(),[u,m]=f(),p=(0,l.useRef)(null),v=u.isOpen?(0,s.isValidAccountSettingTab)(u.payload)?u.payload:s.DEFAULT_ACCOUNT_SETTING_TAB:null,[h,b]=(0,l.useState)(null),[D,L]=(0,l.useState)(null),[U,B]=(0,l.useState)(null),[z,$]=(0,l.useState)(null),[G,q]=(0,l.useState)(null),[K,V]=(0,l.useState)(null),[Q,H]=(0,l.useState)(null),[W,Y]=(0,l.useState)(null),[Z,X]=(0,l.useState)(null),{currentWorkspace:J}=(0,i.useAppContext)(),[ee,et]=(0,l.useState)(!1),ea=(0,l.useCallback)(e=>{m({payload:e})},[m]),er=(0,l.useCallback)(e=>{let t=v?{payload:v,...p.current??{}}:null,a="function"==typeof e?e(t):e;if(!a){p.current=null,m(null);return}let{payload:r,...l}=a;p.current=l,m({payload:r})},[v,m]);(0,l.useEffect)(()=>{u.isOpen||(p.current=null)},[u.isOpen]);let{plan:el,isFetchedPlan:en}=(0,d.useProviderContext)(),{showTriggerEventsLimitModal:es,setShowTriggerEventsLimitModal:eo,persistTriggerEventsLimitModalDismiss:ei}=(e=>{let{plan:t,isFetchedPlan:a,currentWorkspaceId:r}=e,[n,s]=(0,l.useState)(null),o=(0,l.useRef)({});(0,l.useEffect)(()=>{if(!C.IS_CLOUD_EDITION||c.isServer||!r)return;if(!a)return void s(null);let{type:e,usage:l,total:i,reset:d}=t,u=i.triggerEvents===y.NUM_INFINITE,m=i.triggerEvents>0&&l.triggerEvents>=i.triggerEvents;if(e===_.Plan.team||u||!m){n&&s(null);return}let p=e===_.Plan.professional&&i.triggerEvents!==y.NUM_INFINITE?d.triggerEvents??void 0:void 0,g="number"==typeof d.triggerEvents?(0,x.default)().startOf("day").add(d.triggerEvents,"day").format("YYYY-MM-DD"):e===_.Plan.sandbox?(0,x.default)().endOf("month").format("YYYY-MM-DD"):"none",f=`trigger-events-limit-dismissed-${r}-${e}-${i.triggerEvents}-${g}`;if(o.current[f])return;let v=!0,h=!1;try{"1"===localStorage.getItem(f)&&(h=!0)}catch{v=!1}h||n?.payload.storageKey!==f&&s({payload:{usage:l.triggerEvents,total:i.triggerEvents,resetInDays:p,storageKey:f,persistDismiss:v}})},[t,a,n,r]);let i=(0,l.useCallback)(()=>{let e=n?.payload.storageKey;if(e){if(n?.payload.persistDismiss)try{localStorage.setItem(e,"1");return}catch{}o.current[e]=!0}},[n]);return{showTriggerEventsLimitModal:n,setShowTriggerEventsLimitModal:s,persistTriggerEventsLimitModalDismiss:i}})({plan:el,isFetchedPlan:en,currentWorkspaceId:J?.id}),ed=(0,l.useCallback)(()=>{$(null),z?.onCancelCallback&&z.onCancelCallback()},[z]),eu=(0,l.useCallback)(e=>{z?.onSaveCallback&&z.onSaveCallback(z.payload,e),$(null)},[z]),ec=(0,l.useCallback)(e=>{z?.onRemoveCallback&&z.onRemoveCallback(z.payload,e),$(null)},[z]),em=(0,l.useCallback)(()=>{q(null),G?.onCancelCallback&&G.onCancelCallback()},[G]),ep=(0,l.useCallback)(async e=>{G?.onSaveCallback&&G.onSaveCallback(e),q(null)},[G]),eg=(0,l.useCallback)(async e=>{G?.onEditCallback&&G.onEditCallback(e),q(null)},[G]),ef=(0,l.useCallback)(()=>{H(null),Q?.onCancelCallback&&Q.onCancelCallback()},[Q]),ev=(0,l.useCallback)(()=>{n(!0)},[n]),eh=(0,l.useCallback)(()=>{n(!1)},[n]);return(0,t.jsx)(R.Provider,{value:{setShowAccountSettingModal:er,setShowApiBasedExtensionModal:b,setShowModerationSettingModal:L,setShowExternalDataToolModal:B,setShowPricingModal:ev,setShowAnnotationFullModal:()=>et(!0),setShowModelModal:$,setShowExternalKnowledgeAPIModal:q,setShowModelLoadBalancingModal:V,setShowOpeningModal:H,setShowUpdatePluginModal:Y,setShowEducationExpireNoticeModal:X,setShowTriggerEventsLimitModal:eo},children:(0,t.jsxs)(t.Fragment,{children:[a,v&&(0,t.jsx)(E,{activeTab:v,onCancel:()=>{"yes"===localStorage.getItem(o.EDUCATION_VERIFYING_LOCALSTORAGE_ITEM)&&localStorage.removeItem(o.EDUCATION_VERIFYING_LOCALSTORAGE_ITEM),p.current?.onCancelCallback?.(),p.current=null,m(null)},onTabChange:ea}),!!h&&(0,t.jsx)(S,{data:h.payload,onCancel:()=>b(null),onSave:e=>{h?.onSaveCallback&&h.onSaveCallback(e),b(null)}}),!!D&&(0,t.jsx)(M,{data:D.payload,onCancel:()=>{L(null),D?.onCancelCallback&&D.onCancelCallback()},onSave:e=>{D?.onSaveCallback&&D.onSaveCallback(e),L(null)}}),!!U&&(0,t.jsx)(P,{data:U.payload,onCancel:()=>{B(null),U?.onCancelCallback&&U.onCancelCallback()},onSave:e=>{U?.onSaveCallback&&U.onSaveCallback(e),B(null)},onValidateBeforeSave:e=>!U?.onValidateBeforeSaveCallback||U?.onValidateBeforeSaveCallback(e)}),!!r&&(0,t.jsx)(w,{onCancel:eh}),ee&&(0,t.jsx)(N,{show:ee,onHide:()=>et(!1)}),!!z&&(0,t.jsx)(k,{provider:z.payload.currentProvider,configurateMethod:z.payload.currentConfigurationMethod,currentCustomConfigurationModelFixedFields:z.payload.currentCustomConfigurationModelFixedFields,isModelCredential:z.payload.isModelCredential,credential:z.payload.credential,model:z.payload.model,mode:z.payload.mode,onCancel:ed,onSave:eu,onRemove:ec}),!!G&&(0,t.jsx)(j,{data:G.payload,datasetBindings:G.datasetBindings??[],onSave:ep,onCancel:em,onEdit:eg,isEditMode:G.isEditMode??!1}),!!K&&(0,t.jsx)(I,{...K}),Q&&(0,t.jsx)(T,{data:Q.payload,onSave:e=>{Q?.onSaveCallback&&Q.onSaveCallback(e),H(null)},onCancel:ef,promptVariables:Q.payload.promptVariables,workflowVariables:Q.payload.workflowVariables,onAutoAddPromptVariable:Q.payload.onAutoAddPromptVariable}),!!W&&(0,t.jsx)(A,{...W.payload,onCancel:()=>{Y(null),W.onCancelCallback?.()},onSave:()=>{Y(null),W.onSaveCallback?.({})}}),!!Z&&(0,t.jsx)(F,{...Z.payload,onClose:()=>X(null)}),!!es&&(0,t.jsx)(O,{show:!0,usage:es.payload.usage,total:es.payload.total,resetInDays:es.payload.resetInDays,onClose:()=>{ei(),eo(null)},onUpgrade:()=>{ei(),eo(null),ev()}})]})})},B=R},215128,683503,421784,265824,e=>{"use strict";e.s(["useAuth",()=>C],215128);var t=e.i(268255);e.i(152567);var a=e.i(408767),r=e.i(137667),l=e.i(225162),n=e.i(875037),s=e.i(562572),o=e.i(367916);let i="models",d=(e,t,a)=>(0,s.useQuery)({enabled:e,queryKey:[i,"model-list",t,a],queryFn:()=>(0,o.get)(`/workspaces/current/model-providers/${t}/credentials${a?`?credential_id=${a}`:""}`)}),u=e=>(0,n.useMutation)({mutationFn:t=>(0,o.post)(`/workspaces/current/model-providers/${e}/credentials`,{body:t})}),c=e=>(0,n.useMutation)({mutationFn:t=>(0,o.put)(`/workspaces/current/model-providers/${e}/credentials`,{body:t})}),m=e=>(0,n.useMutation)({mutationFn:t=>(0,o.del)(`/workspaces/current/model-providers/${e}/credentials`,{body:t})}),p=e=>(0,n.useMutation)({mutationFn:t=>(0,o.post)(`/workspaces/current/model-providers/${e}/credentials/switch`,{body:t})}),g=(e,t,a,r,l,n)=>(0,s.useQuery)({enabled:e,queryKey:[i,"model-list",t,r,l,a,n],queryFn:()=>(0,o.get)(`/workspaces/current/model-providers/${t}/models/credentials?model=${r}&model_type=${l}&config_from=${n}${a?`&credential_id=${a}`:""}`),staleTime:0,gcTime:0}),f=e=>(0,n.useMutation)({mutationFn:t=>(0,o.post)(`/workspaces/current/model-providers/${e}/models/credentials`,{body:t})}),v=e=>(0,n.useMutation)({mutationFn:t=>(0,o.put)(`/workspaces/current/model-providers/${e}/models/credentials`,{body:t})}),h=e=>(0,n.useMutation)({mutationFn:t=>(0,o.del)(`/workspaces/current/model-providers/${e}/models/credentials`,{body:t})}),b=e=>(0,n.useMutation)({mutationFn:t=>(0,o.del)(`/workspaces/current/model-providers/${e}/models`,{body:t})}),x=e=>(0,n.useMutation)({mutationFn:t=>(0,o.post)(`/workspaces/current/model-providers/${e}/models/credentials/switch`,{body:t})});e.s(["useActiveModelCredential",0,x,"useActiveProviderCredential",0,p,"useAddModelCredential",0,f,"useAddProviderCredential",0,u,"useDeleteModel",0,b,"useDeleteModelCredential",0,h,"useDeleteProviderCredential",0,m,"useEditModelCredential",0,v,"useEditProviderCredential",0,c,"useGetModelCredential",0,g,"useGetProviderCredential",0,d,"useModelProviderModelList",0,e=>(0,s.useQuery)({queryKey:[i,"model-list",e],queryFn:()=>(0,o.get)(`/workspaces/current/model-providers/${e}/models`)}),"useUpdateModelLoadBalancingConfig",0,e=>(0,n.useMutation)({mutationFn:t=>(0,o.post)(`/workspaces/current/model-providers/${e}/models`,{body:t})})],683503);let y=(e,t,a,r,l)=>{let n=d(!t&&!!a,e,a),s=g(!!t&&(!!a||!!r),e,a,r?.model,r?.model_type,l);return t?s:n},_=e=>{let{mutateAsync:a}=u(e),{mutateAsync:r}=c(e),{mutateAsync:l}=m(e),{mutateAsync:n}=p(e),{mutateAsync:s}=f(e),{mutateAsync:o}=x(e),{mutateAsync:i}=h(e),{mutateAsync:d}=v(e),g=(0,t.useCallback)(e=>e?s:a,[s,a]),b=(0,t.useCallback)(e=>e?d:r,[d,r]);return{getAddCredentialService:g,getEditCredentialService:b,getDeleteCredentialService:(0,t.useCallback)(e=>e?i:l,[i,l]),getActiveCredentialService:(0,t.useCallback)(e=>e?o:n,[o,n])}};e.s(["useAuthService",0,_,"useGetCredential",0,y],421784);let C=function(e,n,s){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{isModelCredential:i,onUpdate:d,onRemove:u,mode:c}=o,{t:m}=(0,a.useTranslation)(),{notify:p}=(0,r.useToastContext)(),{getDeleteCredentialService:g,getActiveCredentialService:f,getEditCredentialService:v,getAddCredentialService:h}=_(e.provider),{mutateAsync:x}=b(e.provider),y=(0,l.useModelModalHandler)(),{handleRefreshModel:C}=(0,l.useRefreshModel)(),E=(0,t.useRef)(null),[S,M]=(0,t.useState)(null),P=(0,t.useCallback)(e=>{M(e),E.current=e},[]),w=(0,t.useRef)(null),[N,k]=(0,t.useState)(null),j=(0,t.useCallback)(e=>{k(e),w.current=e},[]),I=(0,t.useCallback)((e,t)=>{e&&P(e.credential_id),t&&j(t)},[]),T=(0,t.useCallback)(()=>{P(null),j(null)},[]),[A,F]=(0,t.useState)(!1),O=(0,t.useRef)(A),R=(0,t.useCallback)(e=>{O.current=e,F(e)},[]),D=(0,t.useCallback)(async(t,a)=>{if(!O.current)try{R(!0),await f(!!a)({credential_id:t.credential_id,model:a?.model,model_type:a?.model_type}),p({type:"success",message:m("api.actionSuccess",{ns:"common"})}),C(e,void 0,!0)}finally{R(!1)}},[f,p,m,R]),L=(0,t.useCallback)(async()=>{if(!O.current){if(!E.current&&!w.current)return void T();try{R(!0);let t={};E.current&&(t={credential_id:E.current,model:w.current?.model,model_type:w.current?.model_type},await g(!!i)(t)),!E.current&&w.current&&(t={model:w.current.model,model_type:w.current.model_type},await x(t)),p({type:"success",message:m("api.actionSuccess",{ns:"common"})}),C(e,void 0,!0),u?.(E.current??""),T()}finally{R(!1)}}},[p,m,R,g,i,T,C,e,n,x]);return{pendingOperationCredentialId:E,pendingOperationModel:w,openConfirmDelete:I,closeConfirmDelete:T,doingAction:A,handleActiveCredential:D,handleConfirmDelete:L,deleteCredentialId:S,deleteModel:N,handleSaveCredential:(0,t.useCallback)(async t=>{if(!O.current)try{R(!0);let a={};a=t.credential_id?await v(!!i)(t):await h(!!i)(t),"success"===a.result&&(p({type:"success",message:m("actionMsg.modifiedSuccessfully",{ns:"common"})}),C(e,void 0,!t.credential_id))}finally{R(!1)}},[p,m,R,v,h]),handleOpenModal:(0,t.useCallback)((t,a)=>{y(e,n,s,{isModelCredential:i,credential:t,model:a,onUpdate:d,mode:c})},[y,e,n,s,i,d,c])}};e.s(["useCredentialData",0,(e,a,r,l,n)=>{let s=(0,t.useMemo)(()=>a?"predefined-model":"custom-model",[a]),{isLoading:o,data:i={}}=y(e.provider,r,l?.credential_id,n,s);return{isLoading:o,credentialData:i}}],265824)},797844,e=>{"use strict";var t=e.i(268255);e.s(["useCredentialStatus",0,e=>{let{current_credential_id:a,current_credential_name:r,available_credentials:l}=e.custom_configuration,n=!!l?.length,s=a&&r,o=n&&!a&&!r,i=l?.find(e=>e.credential_id===a);return(0,t.useMemo)(()=>({hasCredential:n,authorized:s,authRemoved:o,current_credential_id:a,current_credential_name:r,available_credentials:l,notAllowedToUse:i?.not_allowed_to_use}),[n,s,o,a,r,l])}])},302823,e=>{"use strict";e.s(["useCanAddedModels",0,e=>{let{can_added_models:t}=e.custom_configuration;return t||[]},"useCustomModels",0,e=>{let{custom_models:t}=e.custom_configuration;return t||[]}])},603135,e=>{"use strict";var t,a,r=((t={}).textInput="text-input",t.textNumber="number-input",t.secretInput="secret-input",t.select="select",t.radio="radio",t.checkbox="checkbox",t.files="files",t.file="file",t.modelSelector="model-selector",t.toolSelector="tool-selector",t.multiToolSelector="array[tools]",t.appSelector="app-selector",t.dynamicSelect="dynamic-select",t.boolean="boolean",t),l=((a={}).Success="success",a.Warning="warning",a.Error="error",a.Validating="validating",a);e.s(["FormItemValidateStatusEnum",()=>l,"FormTypeEnum",()=>r])},750552,982643,e=>{"use strict";e.i(81828);var t,a,r=((t={}).ANTHROPIC="langgenius/anthropic/anthropic",t.OPENAI="langgenius/openai/openai",t.GEMINI="langgenius/gemini/google",t.X="langgenius/x/x",t.DEEPSEEK="langgenius/deepseek/deepseek",t.TONGYI="langgenius/tongyi/tongyi",t);e.s(["ModelProviderQuotaGetPaid",()=>r],982643),(a={}).Success="success",a.Error="error",a.Exceed="exceed";var l=e.i(739255);let n=[r.OPENAI,r.ANTHROPIC,r.GEMINI,r.X,r.DEEPSEEK,r.TONGYI],s={[r.OPENAI]:"OpenAI",[r.ANTHROPIC]:"Anthropic",[r.GEMINI]:"Gemini",[r.X]:"xAI",[r.DEEPSEEK]:"DeepSeek",[r.TONGYI]:"Tongyi"};e.s(["MODEL_PROVIDER_QUOTA_GET_PAID",0,n,"genModelNameFormSchema",0,e=>({type:l.FormTypeEnum.textInput,label:e?.label||{zh_Hans:"模型名称",en_US:"Model Name"},variable:"__model_name",required:!0,show_on:[],placeholder:e?.placeholder||{zh_Hans:"请输入模型名称",en_US:"Please enter model name"}}),"genModelTypeFormSchema",0,e=>({type:l.FormTypeEnum.select,label:{zh_Hans:"模型类型",en_US:"Model Type"},variable:"__model_type",default:e[0],required:!0,show_on:[],options:e.map(e=>({value:e,label:{zh_Hans:l.MODEL_TYPE_TEXT[e],en_US:l.MODEL_TYPE_TEXT[e]},show_on:[]}))}),"isNullOrUndefined",0,e=>null==e,"modelNameMap",0,s,"modelTypeFormat",0,e=>e===l.ModelTypeEnum.textEmbedding?"TEXT EMBEDDING":e.toLocaleUpperCase(),"sizeFormat",0,e=>{let t=Math.floor(e/1e3);return t<1?`${e}`:`${t}K`}],750552)},966240,651482,e=>{"use strict";e.s([],966240),e.i(215128),e.i(421784),e.i(265824),e.i(797844),e.i(302823);var t=e.i(268255);e.i(152567);var a=e.i(408767),r=e.i(603135),l=e.i(750552);e.s(["useModelFormSchemas",0,(e,n,s,o,i)=>{let{t:d}=(0,a.useTranslation)(),{provider_credential_schema:u,supported_model_types:c,model_credential_schema:m}=e,p=(0,t.useMemo)(()=>{let e=n?u?.credential_form_schemas:m?.credential_form_schemas;return Array.isArray(e)?e:[]},[n,u?.credential_form_schemas,c,m?.credential_form_schemas,m?.model,i]),g=(0,t.useMemo)(()=>[{type:r.FormTypeEnum.textInput,variable:"__authorization_name__",label:d("auth.authorizationName",{ns:"plugin"}),required:!1},...p],[p,d]),f=(0,t.useMemo)(()=>{let e={};return p.forEach(t=>{e[t.variable]=t.default}),o&&(e={...e,__authorization_name__:o?.credential_name},s&&(e={...e,...s})),i&&(e={...e,__model_name:i?.model,__model_type:i?.model_type}),e},[s,o,i,p]);return{formSchemas:g,formValues:f,modelNameAndTypeFormSchemas:(0,t.useMemo)(()=>n?[]:[(0,l.genModelNameFormSchema)(m?.model),(0,l.genModelTypeFormSchema)(c)],[c,m?.model,n]),modelNameAndTypeFormValues:(0,t.useMemo)(()=>{let e={};return n||i&&(e={...e,__model_name:i?.model,__model_type:i?.model_type}),e},[i,n])}}],651482)},315431,870790,834828,593216,360571,453982,170499,117384,266931,986374,e=>{"use strict";var t=e.i(563199),a=e.i(807324);e.i(487941);var r=e.i(962806);let l=e=>{let{ref:l,...n}=e;return(0,t.jsx)(a.default,{...n,ref:l,data:r.default})};l.displayName="AnthropicDark",e.s(["default",0,l],870790);var n=e.i(967904);let s=e=>{let{ref:r,...l}=e;return(0,t.jsx)(a.default,{...l,ref:r,data:n.default})};s.displayName="AnthropicLight",e.s(["default",0,s],834828);var o=e.i(851528);let i=e=>{let{ref:r,...l}=e;return(0,t.jsx)(a.default,{...l,ref:r,data:o.default})};i.displayName="AnthropicShortLight",e.s(["default",0,i],593216),e.i(970257),e.i(301810),e.i(874595),e.i(70859),e.i(866671),e.i(792607),e.i(437502),e.i(120427),e.i(86661),e.i(559790),e.i(512556);var d=e.i(543641);let u=e=>{let{ref:r,...l}=e;return(0,t.jsx)(a.default,{...l,ref:r,data:d.default})};u.displayName="Deepseek",e.s(["default",0,u],360571);var c=e.i(143093);let m=e=>{let{ref:r,...l}=e;return(0,t.jsx)(a.default,{...l,ref:r,data:c.default})};m.displayName="Gemini",e.s(["default",0,m],453982),e.i(380204),e.i(912660);var p=e.i(440193);let g=e=>{let{ref:r,...l}=e;return(0,t.jsx)(a.default,{...l,ref:r,data:p.default})};g.displayName="Grok",e.s(["default",0,g],170499),e.i(289769),e.i(75962),e.i(478287),e.i(256871),e.i(474375),e.i(15579),e.i(320555),e.i(712372),e.i(816135),e.i(143565),e.i(244386),e.i(754836),e.i(550978),e.i(149709);var f=e.i(323088);let v=e=>{let{ref:r,...l}=e;return(0,t.jsx)(a.default,{...l,ref:r,data:f.default})};v.displayName="OpenaiSmall",e.s(["default",0,v],117384),e.i(763323),e.i(486654),e.i(449351),e.i(593732);var h=e.i(516252);let b=e=>{let{ref:r,...l}=e;return(0,t.jsx)(a.default,{...l,ref:r,data:h.default})};b.displayName="OpenaiYellow",e.i(678679),e.i(393086),e.i(397657),e.i(916711);var x=e.i(82535);let y=e=>{let{ref:r,...l}=e;return(0,t.jsx)(a.default,{...l,ref:r,data:x.default})};y.displayName="Tongyi",e.s(["default",0,y],266931),e.i(396332),e.i(975204),e.i(531577),e.i(675842),e.i(643659),e.s([],315431),e.s(["OpenaiYellow",0,b],986374)},36860,382257,708995,849249,340801,136041,826118,186571,41417,e=>{"use strict";var t=e.i(563199),a=e.i(807324);e.i(299498);var r=e.i(210610);let l=e=>{let{ref:l,...n}=e;return(0,t.jsx)(a.default,{...n,ref:l,data:r.default})};l.displayName="Generator",e.s(["default",0,l],382257);var n=e.i(377427);let s=e=>{let{ref:r,...l}=e;return(0,t.jsx)(a.default,{...l,ref:r,data:n.default})};s.displayName="Group",e.s(["default",0,s],708995);var o=e.i(851881);let i=e=>{let{ref:r,...l}=e;return(0,t.jsx)(a.default,{...l,ref:r,data:o.default})};i.displayName="HourglassShape",e.s(["default",0,i],849249);var d=e.i(232736);let u=e=>{let{ref:r,...l}=e;return(0,t.jsx)(a.default,{...l,ref:r,data:d.default})};u.displayName="Mcp",e.s(["default",0,u],340801);var c=e.i(184158);let m=e=>{let{ref:r,...l}=e;return(0,t.jsx)(a.default,{...l,ref:r,data:c.default})};m.displayName="NoToolPlaceholder",e.s(["default",0,m],136041);var p=e.i(377930);let g=e=>{let{ref:r,...l}=e;return(0,t.jsx)(a.default,{...l,ref:r,data:p.default})};g.displayName="Openai",e.s(["default",0,g],826118);var f=e.i(303712);let v=e=>{let{ref:r,...l}=e;return(0,t.jsx)(a.default,{...l,ref:r,data:f.default})};v.displayName="ReplayLine",e.s(["default",0,v],186571);var h=e.i(608954);let b=e=>{let{ref:r,...l}=e;return(0,t.jsx)(a.default,{...l,ref:r,data:h.default})};b.displayName="SquareChecklist",e.s(["default",0,b],41417),e.s([],36860)},438270,e=>{"use strict";var t=e.i(708995);e.s(["Group",()=>t.default])},722591,e=>{"use strict";e.s(["default",()=>d]);var t=e.i(563199);e.i(315431);var a=e.i(986374);e.i(36860);var r=e.i(438270),l=e.i(922521),n=e.i(645429),s=e.i(648404),o=e.i(935139),i=e.i(225162);let d=e=>{let{provider:d,className:u,modelName:c,iconClassName:m,isDeprecated:p=!1}=e,{theme:g}=(0,l.default)(),f=(0,i.useLanguage)();return d?.provider&&["openai","langgenius/openai/openai"].includes(d.provider)&&c?.startsWith("o")?(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)(a.OpenaiYellow,{className:(0,o.cn)("h-5 w-5",u)})}):d?.icon_small?(0,t.jsx)("div",{className:(0,o.cn)("flex h-5 w-5 items-center justify-center",p&&"opacity-50",u),children:(0,t.jsx)("img",{alt:"model-icon",src:(0,n.renderI18nObject)(g===s.Theme.dark&&d.icon_small_dark?d.icon_small_dark:d.icon_small,f),className:m})}):(0,t.jsx)("div",{className:(0,o.cn)("flex h-5 w-5 items-center justify-center rounded-md border-[0.5px] border-components-panel-border-subtle bg-background-default-subtle",u),children:(0,t.jsx)("div",{className:(0,o.cn)("flex h-5 w-5 items-center justify-center opacity-35",m),children:(0,t.jsx)(r.Group,{className:"h-3 w-3 text-text-tertiary"})})})}},83278,e=>{"use strict";var t=e.i(563199),a=e.i(268255),r=e.i(935139);let l=(0,a.memo)(e=>{let{className:a,text:l,children:n,uppercase:s=!0,hasRedCornerMark:o}=e;return(0,t.jsxs)("div",{className:(0,r.cn)("relative inline-flex h-5 items-center whitespace-nowrap rounded-[5px] border border-divider-deep px-[5px] leading-3 text-text-tertiary",s?"system-2xs-medium-uppercase":"system-xs-medium",a),children:[o&&(0,t.jsx)("div",{className:"absolute right-[-2px] top-[-2px] h-1.5 w-1.5 rounded-[2px] border border-components-badge-status-light-error-border-inner bg-components-badge-status-light-error-bg shadow-sm"}),n||l]})});e.s(["default",0,l])},836340,e=>{"use strict";var t=e.i(563199),a=e.i(935139);let r={green:"bg-components-badge-status-light-success-bg",orange:"bg-components-badge-status-light-warning-bg",red:"bg-components-badge-status-light-error-bg",blue:"bg-components-badge-status-light-normal-bg",yellow:"bg-components-badge-status-light-warning-bg",gray:"bg-components-badge-status-light-disabled-bg"},l={green:"border-components-badge-status-light-success-border-inner",orange:"border-components-badge-status-light-warning-border-inner",red:"border-components-badge-status-light-error-border-inner",blue:"border-components-badge-status-light-normal-border-inner",yellow:"border-components-badge-status-light-warning-border-inner",gray:"border-components-badge-status-light-disabled-border-inner"},n={green:"shadow-status-indicator-green-shadow",orange:"shadow-status-indicator-warning-shadow",red:"shadow-status-indicator-red-shadow",blue:"shadow-status-indicator-blue-shadow",yellow:"shadow-status-indicator-warning-shadow",gray:"shadow-status-indicator-gray-shadow"};function s(e){let{color:s="green",className:o=""}=e;return(0,t.jsx)("div",{"data-testid":"status-indicator",className:(0,a.cn)("h-2 w-2 rounded-[3px] border border-solid",r[s],l[s],n[s],o)})}e.s(["default",()=>s])},105058,558199,652910,e=>{"use strict";e.s(["default",()=>x],105058);var t=e.i(563199),a=e.i(837699),r=e.i(268255);e.i(152567);var l=e.i(408767),n=e.i(739255);e.i(466836),e.s(["default",()=>b],652910);var s=e.i(151094),o=e.i(547105),i=e.i(391185),d=e.i(935139);e.i(966240);var u=e.i(215128),c=e.i(722591),m=e.i(654313),p=e.i(83278),g=e.i(421001),f=e.i(836340);let v=(0,r.memo)(e=>{let{credential:n,disabled:s,onDelete:o,onEdit:i,onItemClick:u,disableRename:c,disableEdit:v,disableDelete:h,disableDeleteButShowAction:b,disableDeleteTip:x,showSelectedIcon:y,selectedCredentialId:_}=e,{t:C}=(0,l.useTranslation)(),E=(0,r.useMemo)(()=>!(c&&v&&h),[c,v,h]),S=(0,r.useMemo)(()=>b&&_===n.credential_id,[b,_,n.credential_id]),M=(0,t.jsxs)("div",{className:(0,d.cn)("group flex h-8 items-center rounded-lg p-1 hover:bg-state-base-hover",(s||n.not_allowed_to_use)&&"cursor-not-allowed opacity-50"),onClick:()=>{s||n.not_allowed_to_use||u?.(n)},children:[(0,t.jsxs)("div",{className:"flex w-0 grow items-center space-x-1.5",children:[y&&(0,t.jsx)("div",{className:"h-4 w-4",children:_===n.credential_id&&(0,t.jsx)(a.RiCheckLine,{className:"h-4 w-4 text-text-accent"})}),(0,t.jsx)(f.default,{className:"ml-2 mr-1.5 shrink-0"}),(0,t.jsx)("div",{className:"system-md-regular truncate text-text-secondary",title:n.credential_name,children:n.credential_name})]}),n.from_enterprise&&(0,t.jsx)(p.default,{className:"shrink-0",children:"Enterprise"}),E&&!n.from_enterprise&&(0,t.jsxs)("div",{className:"ml-2 hidden shrink-0 items-center group-hover:flex",children:[!v&&!n.not_allowed_to_use&&(0,t.jsx)(g.default,{popupContent:C("operation.edit",{ns:"common"}),children:(0,t.jsx)(m.default,{disabled:s,onClick:e=>{e.stopPropagation(),i?.(n)},children:(0,t.jsx)(a.RiEqualizer2Line,{className:"h-4 w-4 text-text-tertiary"})})}),!h&&(0,t.jsx)(g.default,{popupContent:S?x:C("operation.delete",{ns:"common"}),children:(0,t.jsx)(m.default,{className:"hover:bg-transparent",onClick:e=>{s||S||(e.stopPropagation(),o?.(n))},children:(0,t.jsx)(a.RiDeleteBinLine,{className:(0,d.cn)("h-4 w-4 text-text-tertiary",!S&&"hover:text-text-destructive",S&&"opacity-50")})})})]})]},n.credential_id);return n.not_allowed_to_use?(0,t.jsx)(g.default,{popupContent:C("auth.customCredentialUnavailable",{ns:"plugin"}),children:M}):M});e.s(["default",0,v],558199);let h=(0,r.memo)(e=>{let{provider:a,model:l,title:n,credentials:s,disabled:o,onDelete:i,onEdit:d,showItemSelectedIcon:u,selectedCredentialId:m,onItemClick:p,showModelTitle:g,disableDeleteButShowAction:f,disableDeleteTip:h}=e,b=(0,r.useCallback)(e=>{d?.(e,l)},[d,l]),x=(0,r.useCallback)(e=>{i?.(e,l)},[i,l]),y=(0,r.useCallback)(e=>{p?.(e,l)},[p,l]);return(0,t.jsxs)("div",{className:"p-1",children:[g&&(0,t.jsxs)("div",{className:"flex h-9 items-center px-2",children:[l?.model&&(0,t.jsx)(c.default,{className:"mr-1 h-5 w-5 shrink-0",provider:a,modelName:l.model}),(0,t.jsx)("div",{className:"system-md-medium mx-1 grow truncate text-text-primary",title:n??l?.model,children:n??l?.model})]}),s.map(e=>(0,t.jsx)(v,{credential:e,disabled:o,onDelete:x,onEdit:b,showSelectedIcon:u,selectedCredentialId:m,onItemClick:y,disableDeleteButShowAction:f,disableDeleteTip:h},e.credential_id))]})}),b=(0,r.memo)(e=>{let{provider:n,configurationMethod:c,currentCustomConfigurationModelFixedFields:m,items:p,authParams:g,disabled:f,renderTrigger:v,isOpen:b,onOpenChange:x,offset:y=8,placement:_="bottom-end",triggerPopupSameWidth:C=!1,popupClassName:E,showItemSelectedIcon:S,onItemClick:M,triggerOnlyOpenModal:P,hideAddAction:w,disableItemClick:N,popupTitle:k,showModelTitle:j,disableDeleteButShowAction:I,disableDeleteTip:T}=e,{t:A}=(0,l.useTranslation)(),[F,O]=(0,r.useState)(!1),R=b??F,D=(0,r.useCallback)(e=>{x&&x(e),O(e)},[x]),{isModelCredential:L,onUpdate:U,onRemove:B,mode:z}=g||{},{openConfirmDelete:$,closeConfirmDelete:G,doingAction:q,handleActiveCredential:K,handleConfirmDelete:V,deleteCredentialId:Q,handleOpenModal:H}=(0,u.useAuth)(n,c,m,{isModelCredential:L,onUpdate:U,onRemove:B,mode:z}),W=(0,r.useCallback)((e,t)=>{H(e,t),D(!1)},[H,D]),Y=(0,r.useCallback)((e,t)=>{N||(M?M(e,t):K(e,t),D(!1))},[K,M,D,N]),Z=!1===n.allow_custom_token;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.PortalToFollowElem,{open:R,onOpenChange:D,placement:_,offset:y,triggerPopupSameWidth:C,children:[(0,t.jsx)(i.PortalToFollowElemTrigger,{onClick:()=>{P?H():D(!R)},asChild:!0,children:v(R)}),(0,t.jsx)(i.PortalToFollowElemContent,{className:"z-[100]",children:(0,t.jsxs)("div",{className:(0,d.cn)("w-[360px] rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg-blur shadow-lg backdrop-blur-[5px]",E),children:[k&&(0,t.jsx)("div",{className:"system-xs-medium px-3 pb-0.5 pt-[10px] text-text-tertiary",children:k}),(0,t.jsx)("div",{className:"max-h-[304px] overflow-y-auto",children:p.map((e,a)=>(0,t.jsxs)(r.Fragment,{children:[(0,t.jsx)(h,{provider:n,title:e.title,model:e.model,credentials:e.credentials,disabled:f,onDelete:$,disableDeleteButShowAction:I,disableDeleteTip:T,onEdit:W,showItemSelectedIcon:S,selectedCredentialId:e.selectedCredential?.credential_id,onItemClick:Y,showModelTitle:j}),a!==p.length-1&&(0,t.jsx)("div",{className:"h-[1px] bg-divider-subtle"})]},a))}),(0,t.jsx)("div",{className:"h-[1px] bg-divider-subtle"}),L&&!Z&&!w&&(0,t.jsxs)("div",{onClick:()=>W(void 0,m?{model:m.__model_name,model_type:m.__model_type}:void 0),className:"system-xs-medium flex h-[40px] cursor-pointer items-center px-3 text-text-accent-light-mode-only",children:[(0,t.jsx)(a.RiAddLine,{className:"mr-1 h-4 w-4"}),A("modelProvider.auth.addModelCredential",{ns:"common"})]}),!L&&!Z&&!w&&(0,t.jsx)("div",{className:"p-2",children:(0,t.jsx)(s.default,{onClick:()=>W(),className:"w-full",children:A("modelProvider.auth.addApiKey",{ns:"common"})})})]})})]}),Q&&(0,t.jsx)(o.default,{isShow:!0,title:A("modelProvider.confirmDelete",{ns:"common"}),isDisabled:q,onCancel:G,onConfirm:V})]})}),x=(0,r.memo)(e=>{let{provider:s,model:o,configurationMethod:i,modelCredential:u,onSelectCredential:c,onUpdate:m,onRemove:p}=e,{t:g}=(0,l.useTranslation)(),{available_credentials:f}=u,v=i===n.ConfigurationMethodEnum.customizableModel,h=!1===s.allow_custom_token,x=(0,r.useCallback)((e,t)=>{m?.(e,t)},[m]),y=(0,r.useCallback)(e=>(0,t.jsxs)("div",{className:(0,d.cn)("system-sm-medium flex h-8 items-center rounded-lg px-3 text-text-accent hover:bg-state-base-hover",e&&"bg-state-base-hover"),children:[(0,t.jsx)(a.RiAddLine,{className:"mr-2 h-4 w-4"}),g("modelProvider.auth.addCredential",{ns:"common"})]}),[g,v]);return(0,t.jsx)(b,{provider:s,renderTrigger:y,authParams:{isModelCredential:v,mode:n.ModelModalModeEnum.configModelCredential,onUpdate:x,onRemove:p},triggerOnlyOpenModal:!f?.length&&!h,items:[{title:v?"":g("modelProvider.auth.apiKeys",{ns:"common"}),model:v?o:void 0,credentials:f??[]}],showModelTitle:!v,configurationMethod:i,currentCustomConfigurationModelFixedFields:v?{__model_name:o.model,__model_type:o.model_type}:void 0,onItemClick:c,placement:"bottom-start",popupTitle:v?g("modelProvider.auth.modelCredentials",{ns:"common"}):""})})},238450,e=>{"use strict";e.s(["default",()=>p]);var t=e.i(563199),a=e.i(837699),r=e.i(268255);e.i(152567);var l=e.i(408767),n=e.i(151094),s=e.i(391185),o=e.i(421001),i=e.i(739255),d=e.i(935139),u=e.i(722591),c=e.i(215128),m=e.i(302823);let p=(0,r.memo)(e=>{let{provider:p,configurationMethod:g,currentCustomConfigurationModelFixedFields:f}=e,{t:v}=(0,l.useTranslation)(),[h,b]=(0,r.useState)(!1),x=(0,m.useCanAddedModels)(p),y=!x.length,{handleOpenModal:_}=(0,c.useAuth)(p,g,f,{isModelCredential:!0,mode:i.ModelModalModeEnum.configCustomModel}),{handleOpenModal:C}=(0,c.useAuth)(p,g,f,{isModelCredential:!0,mode:i.ModelModalModeEnum.addCustomModelToModelList}),E=!1===p.allow_custom_token,S=(0,r.useCallback)(e=>{let r=(0,t.jsxs)(n.Button,{variant:"ghost",size:"small",className:(0,d.cn)("text-text-tertiary",e&&"bg-components-button-ghost-bg-hover",E&&!!y&&"cursor-not-allowed opacity-50"),children:[(0,t.jsx)(a.RiAddCircleFill,{className:"mr-1 h-3.5 w-3.5"}),v("modelProvider.addModel",{ns:"common"})]});return E&&y?(0,t.jsx)(o.default,{asChild:!0,popupContent:v("auth.credentialUnavailable",{ns:"plugin"}),children:r}):r},[v,E,y]);return(0,t.jsxs)(s.PortalToFollowElem,{open:h,onOpenChange:b,placement:"bottom-end",offset:{mainAxis:4,crossAxis:0},children:[(0,t.jsx)(s.PortalToFollowElemTrigger,{onClick:()=>{if(y){if(E)return;_();return}b(e=>!e)},children:S(h)}),(0,t.jsx)(s.PortalToFollowElemContent,{className:"z-[100]",children:(0,t.jsxs)("div",{className:"w-[320px] rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg-blur shadow-lg",children:[(0,t.jsx)("div",{className:"max-h-[304px] overflow-y-auto p-1",children:x.map(e=>(0,t.jsxs)("div",{className:"flex h-8 cursor-pointer items-center rounded-lg px-2 hover:bg-state-base-hover",onClick:()=>{C(void 0,e),b(!1)},children:[(0,t.jsx)(u.default,{className:"mr-1 h-5 w-5 shrink-0",iconClassName:"h-5 w-5",provider:p,modelName:e.model}),(0,t.jsx)("div",{className:"system-md-regular grow truncate text-text-primary",title:e.model,children:e.model})]},e.model))}),!E&&(0,t.jsxs)("div",{className:"system-xs-medium flex cursor-pointer items-center border-t border-t-divider-subtle p-3 text-text-accent-light-mode-only",onClick:()=>{_(),b(!1)},children:[(0,t.jsx)(a.RiAddLine,{className:"mr-1 h-4 w-4"}),v("modelProvider.auth.addNewModel",{ns:"common"})]})]})})]})})},77064,e=>{"use strict";var t=e.i(563199),a=e.i(837699),r=e.i(268255);e.i(152567);var l=e.i(408767),n=e.i(151094),s=e.i(836340),o=e.i(935139);let i=(0,r.memo)(e=>{let{onClick:r,loadBalancingEnabled:i,loadBalancingInvalid:d,credentialRemoved:u}=e,{t:c}=(0,l.useTranslation)();return d?(0,t.jsxs)("div",{className:"system-2xs-medium-uppercase relative flex h-[18px] cursor-pointer items-center rounded-[5px] border border-text-warning bg-components-badge-bg-dimm px-1.5 text-text-warning",onClick:r,children:[(0,t.jsx)(a.RiScales3Line,{className:"mr-0.5 h-3 w-3"}),c("modelProvider.auth.authorizationError",{ns:"common"}),(0,t.jsx)(s.default,{color:"orange",className:"absolute right-[-1px] top-[-1px] h-1.5 w-1.5"})]}):(0,t.jsxs)(n.default,{variant:"secondary",size:"small",className:(0,o.cn)("hidden shrink-0 group-hover:flex",u&&"flex"),onClick:r,children:[u&&(0,t.jsxs)(t.Fragment,{children:[c("modelProvider.auth.credentialRemoved",{ns:"common"}),(0,t.jsx)(s.default,{color:"red",className:"ml-2"})]}),!i&&!u&&!d&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.RiEqualizer2Line,{className:"mr-1 h-4 w-4"}),c("operation.config",{ns:"common"})]}),i&&!u&&!d&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.RiScales3Line,{className:"mr-1 h-4 w-4"}),c("modelProvider.auth.configLoadBalancing",{ns:"common"})]})]})});e.s(["default",0,i])},722648,e=>{"use strict";e.s(["default",()=>u]);var t=e.i(563199),a=e.i(837699),r=e.i(268255);e.i(152567);var l=e.i(408767),n=e.i(151094),s=e.i(421001),o=e.i(739255),i=e.i(652910);e.i(966240);var d=e.i(797844);let u=(0,r.memo)(e=>{let{provider:u,currentCustomConfigurationModelFixedFields:c}=e,{t:m}=(0,l.useTranslation)(),{hasCredential:p,authorized:g,current_credential_id:f,current_credential_name:v,available_credentials:h}=(0,d.useCredentialStatus)(u),b=!1===u.allow_custom_token,x=(0,r.useCallback)(()=>{let e=p?m("operation.config",{ns:"common"}):m("operation.setup",{ns:"common"}),r=(0,t.jsxs)(n.Button,{className:"flex grow",size:"small",variant:g?"secondary":"secondary-accent",title:e,children:[(0,t.jsx)(a.RiEqualizer2Line,{className:"mr-1 h-3.5 w-3.5 shrink-0"}),(0,t.jsx)("span",{className:"w-0 grow truncate text-left",children:e})]});return b&&!p?(0,t.jsx)(s.default,{asChild:!0,popupContent:m("auth.credentialUnavailable",{ns:"plugin"}),children:r}):r},[g,p,b,m]);return(0,t.jsx)(i.default,{provider:u,configurationMethod:o.ConfigurationMethodEnum.predefinedModel,currentCustomConfigurationModelFixedFields:c,items:[{title:m("modelProvider.auth.apiKeys",{ns:"common"}),credentials:h??[],selectedCredential:{credential_id:f??"",credential_name:v??""}}],showItemSelectedIcon:!0,showModelTitle:!0,renderTrigger:x,triggerOnlyOpenModal:!p&&!b})})},844586,e=>{"use strict";var t=e.i(563199),a=e.i(837699),r=e.i(268255);e.i(152567);var l=e.i(408767),n=e.i(83278),s=e.i(391185),o=e.i(836340),i=e.i(558199);let d=(0,r.memo)(e=>{let{selectedCredential:d,credentials:u,onSelect:c,disabled:m,notAllowAddNewCredential:p}=e,{t:g}=(0,l.useTranslation)(),[f,v]=(0,r.useState)(!1),h=(0,r.useCallback)(e=>{v(!1),c(e)},[c]),b=(0,r.useCallback)(()=>{h({credential_id:"__add_new_credential",addNewCredential:!0,credential_name:g("modelProvider.auth.addNewModelCredential",{ns:"common"})})},[h,g]);return(0,t.jsxs)(s.PortalToFollowElem,{open:f,onOpenChange:v,triggerPopupSameWidth:!0,children:[(0,t.jsx)(s.PortalToFollowElemTrigger,{asChild:!0,onClick:()=>!m&&v(e=>!e),children:(0,t.jsxs)("div",{className:"system-sm-regular flex h-8 w-full items-center justify-between rounded-lg bg-components-input-bg-normal px-2",children:[d&&(0,t.jsxs)("div",{className:"flex items-center",children:[!d.addNewCredential&&(0,t.jsx)(o.default,{className:"ml-1 mr-2 shrink-0"}),(0,t.jsx)("div",{className:"system-sm-regular truncate text-components-input-text-filled",title:d.credential_name,children:d.credential_name}),d.from_enterprise&&(0,t.jsx)(n.default,{className:"shrink-0",children:"Enterprise"})]}),!d&&(0,t.jsx)("div",{className:"system-sm-regular grow truncate text-components-input-text-placeholder",children:g("modelProvider.auth.selectModelCredential",{ns:"common"})}),(0,t.jsx)(a.RiArrowDownSLine,{className:"h-4 w-4 text-text-quaternary"})]})}),(0,t.jsx)(s.PortalToFollowElemContent,{className:"z-[100]",children:(0,t.jsxs)("div",{className:"border-ccomponents-panel-border rounded-xl border-[0.5px] bg-components-panel-bg-blur shadow-lg",children:[(0,t.jsx)("div",{className:"max-h-[320px] overflow-y-auto p-1",children:u.map(e=>(0,t.jsx)(i.default,{credential:e,disableDelete:!0,disableEdit:!0,disableRename:!0,onItemClick:h,showSelectedIcon:!0,selectedCredentialId:d?.credential_id},e.credential_id))}),!p&&(0,t.jsxs)("div",{className:"system-xs-medium flex h-10 cursor-pointer items-center border-t border-t-divider-subtle px-7 text-text-accent-light-mode-only",onClick:b,children:[(0,t.jsx)(a.RiAddLine,{className:"mr-1 h-4 w-4"}),g("modelProvider.auth.addNewModelCredential",{ns:"common"})]})]})})]})});e.s(["default",0,d])},527521,e=>{"use strict";e.s(["default",()=>d]);var t=e.i(563199),a=e.i(268255);e.i(152567);var r=e.i(408767),l=e.i(151094),n=e.i(739255),s=e.i(935139),o=e.i(652910);e.i(966240);var i=e.i(302823);let d=(0,a.memo)(e=>{let{provider:d,currentCustomConfigurationModelFixedFields:u}=e,{t:c}=(0,r.useTranslation)(),m=(0,i.useCustomModels)(d),p=!m.length,g=(0,a.useCallback)(e=>(0,t.jsx)(l.Button,{variant:"ghost",size:"small",className:(0,s.cn)("mr-0.5 text-text-tertiary",e&&"bg-components-button-ghost-bg-hover"),children:c("modelProvider.auth.manageCredentials",{ns:"common"})}),[c]);return p?null:(0,t.jsx)(o.default,{provider:d,configurationMethod:n.ConfigurationMethodEnum.customizableModel,currentCustomConfigurationModelFixedFields:u,items:m.map(e=>({model:e,credentials:e.available_model_credentials??[],selectedCredential:e.current_credential_id?{credential_id:e.current_credential_id,credential_name:e.current_credential_name}:void 0})),renderTrigger:g,authParams:{isModelCredential:!0,mode:n.ModelModalModeEnum.configModelCredential},hideAddAction:!0,disableItemClick:!0,popupTitle:c("modelProvider.auth.customModelCredentials",{ns:"common"}),showModelTitle:!0,disableDeleteButShowAction:!0,disableDeleteTip:c("modelProvider.auth.customModelCredentialsDeleteTip",{ns:"common"})})})},466836,726547,e=>{"use strict";e.s([],466836),e.i(105058),e.i(238450);var t=e.i(652910);e.i(77064),e.i(722648),e.i(844586),e.i(527521),e.s(["default",()=>m],726547);var a=e.i(563199),r=e.i(837699),l=e.i(268255);e.i(152567);var n=e.i(408767),s=e.i(83278),o=e.i(151094),i=e.i(421001),d=e.i(739255),u=e.i(836340),c=e.i(935139);let m=(0,l.memo)(e=>{let{provider:m,model:p,customModelCredential:g,setCustomModelCredential:f,credentials:v,onUpdate:h,onRemove:b}=e,{t:x}=(0,n.useTranslation)(),y=!1===m.allow_custom_token,_=(0,l.useCallback)(e=>{f(e)},[f]),C=(0,l.useCallback)(()=>{let e=g?.credential_id,t=v?.find(t=>t.credential_id===e),l=!v?.length,n=e&&!t&&!l,d=t?.not_allowed_to_use,m="green";(n||d)&&(m="red");let p=(0,a.jsxs)(o.default,{variant:"secondary",className:(0,c.cn)("shrink-0 space-x-1",(n||d)&&"text-components-button-destructive-secondary-text",l&&"cursor-not-allowed opacity-50"),children:[!l&&(0,a.jsx)(u.default,{className:"mr-2",color:m}),n&&x("modelProvider.auth.authRemoved",{ns:"common"}),(d||l)&&x("auth.credentialUnavailableInButton",{ns:"plugin"}),!n&&!d&&!l&&g?.credential_name,t?.from_enterprise&&(0,a.jsx)(s.default,{className:"ml-2",children:"Enterprise"}),(0,a.jsx)(r.RiArrowDownSLine,{className:"h-4 w-4"})]});return l&&y?(0,a.jsx)(i.default,{asChild:!0,popupContent:x("auth.credentialUnavailable",{ns:"plugin"}),children:p}):p},[g,x,v,y]);return(0,a.jsx)(t.default,{provider:m,configurationMethod:d.ConfigurationMethodEnum.customizableModel,currentCustomConfigurationModelFixedFields:p?{__model_name:p.model,__model_type:p.model_type}:void 0,authParams:{isModelCredential:!0,mode:d.ModelModalModeEnum.configModelCredential,onUpdate:h,onRemove:b},items:[{model:p,credentials:v||[],selectedCredential:g?{credential_id:g?.credential_id||"",credential_name:g?.credential_name||""}:void 0}],renderTrigger:C,onItemClick:_,enableAddModelCredential:!0,showItemSelectedIcon:!0,popupTitle:x("modelProvider.auth.modelCredentials",{ns:"common"}),triggerOnlyOpenModal:!v?.length})})},778432,e=>{"use strict";e.s(["AddCustomModel",()=>t.default]);var t=e.i(238450)},910297,407098,320423,e=>{"use strict";e.s(["ManageCustomModelCredentials",()=>t.default],910297);var t=e.i(527521),a=e.i(563199),r=e.i(935139);e.s(["default",0,e=>{let{className:t,children:l}=e;return(0,a.jsx)("div",{className:(0,r.cn)("system-2xs-medium-uppercase flex h-[18px] cursor-default items-center rounded-[5px] border border-divider-deep px-1 text-text-tertiary",t),children:l})}],407098),e.s(["default",()=>c],320423),e.i(315431);var l=e.i(870790),l=l,n=e.i(834828),n=n;e.i(36860);var s=e.i(826118),s=s,o=e.i(922521),i=e.i(645429),d=e.i(648404),u=e.i(225162);let c=e=>{let{provider:t,className:c}=e,{theme:m}=(0,o.default)(),p=(0,u.useLanguage)();return"langgenius/anthropic/anthropic"===t.provider?(0,a.jsxs)("div",{className:"mb-2 py-[7px]",children:[m===d.Theme.dark&&(0,a.jsx)(n.default,{className:"h-2.5 w-[90px]"}),m===d.Theme.light&&(0,a.jsx)(l.default,{className:"h-2.5 w-[90px]"})]}):"langgenius/openai/openai"===t.provider?(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)(s.default,{className:"h-6 w-auto text-text-inverted-dimmed"})}):(0,a.jsxs)("div",{className:(0,r.cn)("inline-flex items-center gap-2",c),children:[(0,a.jsx)("img",{alt:"provider-icon",src:(0,i.renderI18nObject)(m===d.Theme.dark&&t.icon_small_dark?t.icon_small_dark:t.icon_small,p),className:"h-6 w-6"}),(0,a.jsx)("div",{className:"system-md-semibold text-text-primary",children:(0,i.renderI18nObject)(t.label,p)})]})}},607610,e=>{"use strict";e.s(["ConfigProvider",()=>t.default]);var t=e.i(722648)},126953,848082,e=>{"use strict";let t,a;e.s(["default",()=>eb],126953);var r=e.i(563199),l=e.i(268255);e.i(152567);var n=e.i(408767),s=e.i(137667);e.i(466836);var o=e.i(607610);e.i(966240);var i=e.i(797844),d=e.i(836340),u=e.i(925521),c=e.i(249420),m=e.i(81828),p=e.i(935139),g=e.i(739255),f=e.i(225162),v=e.i(58091),h=e.i(182370),b=e.i(725968),x=e.i(876581),y=e.i(589393),_=e.i(71216),C=e.i(126765),E=e.i(782165),S=e.i(518836),M=e.i(775885),P=e.i(122783),w=e.i(944296),N=e.i(777009),k=e.i(818805),j=e.i(135477),I=e.i(329512),T=e.i(692941),A=e.i(988851),F=e.i(808534),O=e.i(939895),R=e.i(794085),D=e.i(268850),L=e.i(294662),U=e.i(455028),B=e.i(652038),z=e.i(875880),$=e.i(858023),G=e.i(198136),q=e.i(642330),K=((t=K||{})[t.Open=0]="Open",t[t.Closed=1]="Closed",t),V=((a=V||{})[a.TogglePopover=0]="TogglePopover",a[a.ClosePopover=1]="ClosePopover",a[a.SetButton=2]="SetButton",a[a.SetButtonId=3]="SetButtonId",a[a.SetPanel=4]="SetPanel",a[a.SetPanelId=5]="SetPanelId",a);let Q={0:e=>({...e,popoverState:(0,B.match)(e.popoverState,{0:1,1:0}),__demoMode:!1}),1:e=>1===e.popoverState?e:{...e,popoverState:1,__demoMode:!1},2:(e,t)=>e.button===t.button?e:{...e,button:t.button},3:(e,t)=>e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId},4:(e,t)=>e.panel===t.panel?e:{...e,panel:t.panel},5:(e,t)=>e.panelId===t.panelId?e:{...e,panelId:t.panelId}},H=(0,l.createContext)(null);function W(e){let t=(0,l.useContext)(H);if(null===t){let t=Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,W),t}return t}H.displayName="PopoverContext";let Y=(0,l.createContext)(null);function Z(e){let t=(0,l.useContext)(Y);if(null===t){let t=Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Z),t}return t}Y.displayName="PopoverAPIContext";let X=(0,l.createContext)(null);function J(){return(0,l.useContext)(X)}X.displayName="PopoverGroupContext";let ee=(0,l.createContext)(null);function et(e,t){return(0,B.match)(t.type,Q,e,t)}ee.displayName="PopoverPanelContext";let ea=$.RenderFeatures.RenderStrategy|$.RenderFeatures.Static;function er(e,t){let a=(0,l.useId)(),{id:r=`headlessui-popover-backdrop-${a}`,transition:n=!1,...s}=e,[{popoverState:o},i]=W("Popover.Backdrop"),[d,u]=(0,l.useState)(null),c=(0,I.useSyncRefs)(t,u),m=(0,D.useOpenClosed)(),[p,g]=(0,A.useTransition)(n,d,null!==m?(m&D.State.Open)===D.State.Open:0===o),f=(0,_.useEvent)(e=>{if((0,L.isDisabledReactIssue7711)(e.currentTarget))return e.preventDefault();i({type:1})}),v=(0,l.useMemo)(()=>({open:0===o}),[o]),h={ref:c,id:r,"aria-hidden":!0,onClick:f,...(0,A.transitionDataAttributes)(g)};return(0,$.useRender)()({ourProps:h,theirProps:s,slot:v,defaultTag:"div",features:ea,visible:p,name:"Popover.Backdrop"})}let el=$.RenderFeatures.RenderStrategy|$.RenderFeatures.Static,en=(0,$.forwardRefWithAs)(function(e,t){var a;let{__demoMode:r=!1,...n}=e,s=(0,l.useRef)(null),o=(0,I.useSyncRefs)(t,(0,I.optionalRef)(e=>{s.current=e})),i=(0,l.useRef)([]),d=(0,l.useReducer)(et,{__demoMode:r,popoverState:+!r,buttons:i,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:(0,l.createRef)(),afterPanelSentinel:(0,l.createRef)(),afterButtonSentinel:(0,l.createRef)()}),[{popoverState:u,button:c,buttonId:m,panel:p,panelId:g,beforePanelSentinel:f,afterPanelSentinel:v,afterButtonSentinel:h},b]=d,x=(0,w.useOwnerDocument)(null!=(a=s.current)?a:c),y=(0,l.useMemo)(()=>{if(!c||!p)return!1;for(let e of document.querySelectorAll("body > *"))if(Number(null==e?void 0:e.contains(c))^Number(null==e?void 0:e.contains(p)))return!0;let e=(0,U.getFocusableElements)(),t=e.indexOf(c),a=(t+e.length-1)%e.length,r=(t+1)%e.length,l=e[a],n=e[r];return!p.contains(l)&&!p.contains(n)},[c,p]),E=(0,S.useLatestValue)(m),M=(0,S.useLatestValue)(g),N=(0,l.useMemo)(()=>({buttonId:E,panelId:M,close:()=>b({type:1})}),[E,M,b]),j=J(),T=null==j?void 0:j.registerPopover,A=(0,_.useEvent)(()=>{var e;return null!=(e=null==j?void 0:j.isFocusWithinPopoverGroup())?e:(null==x?void 0:x.activeElement)&&((null==c?void 0:c.contains(x.activeElement))||(null==p?void 0:p.contains(x.activeElement)))});(0,l.useEffect)(()=>null==T?void 0:T(N),[T,N]);let[R,L]=(0,q.useNestedPortals)(),z=(0,k.useMainTreeNode)(c),G=(0,k.useRootContainers)({mainTreeNode:z,portals:R,defaultContainers:[c,p]});(0,C.useEventListener)(null==x?void 0:x.defaultView,"focus",e=>{var t,a,r,l,n,s;e.target!==window&&e.target instanceof HTMLElement&&0===u&&(A()||c&&p&&(G.contains(e.target)||null!=(a=null==(t=f.current)?void 0:t.contains)&&a.call(t,e.target)||null!=(l=null==(r=v.current)?void 0:r.contains)&&l.call(r,e.target)||null!=(s=null==(n=h.current)?void 0:n.contains)&&s.call(n,e.target)||b({type:1})))},!0),(0,P.useOutsideClick)(0===u,G.resolveContainers,(e,t)=>{b({type:1}),(0,U.isFocusableElement)(t,U.FocusableMode.Loose)||(e.preventDefault(),null==c||c.focus())});let K=(0,_.useEvent)(e=>{b({type:1});let t=e?e instanceof HTMLElement?e:"current"in e&&e.current instanceof HTMLElement?e.current:c:c;null==t||t.focus()}),V=(0,l.useMemo)(()=>({close:K,isPortalled:y}),[K,y]),Q=(0,l.useMemo)(()=>({open:0===u,close:K}),[u,K]),W=(0,$.useRender)();return l.default.createElement(k.MainTreeProvider,{node:z},l.default.createElement(O.FloatingProvider,null,l.default.createElement(ee.Provider,{value:null},l.default.createElement(H.Provider,{value:d},l.default.createElement(Y.Provider,{value:V},l.default.createElement(F.CloseProvider,{value:K},l.default.createElement(D.OpenClosedProvider,{value:(0,B.match)(u,{0:D.State.Open,1:D.State.Closed})},l.default.createElement(L,null,W({ourProps:{ref:o},theirProps:n,slot:Q,defaultTag:"div",name:"Popover"})))))))))}),es=(0,$.forwardRefWithAs)(function(e,t){let a=(0,l.useId)(),{id:r=`headlessui-popover-button-${a}`,disabled:n=!1,autoFocus:s=!1,...o}=e,[i,d]=W("Popover.Button"),{isPortalled:u}=Z("Popover.Button"),c=(0,l.useRef)(null),m=`headlessui-focus-sentinel-${(0,l.useId)()}`,p=J(),g=null==p?void 0:p.closeOthers,f=null!==(0,l.useContext)(ee);(0,l.useEffect)(()=>{if(!f)return d({type:3,buttonId:r}),()=>{d({type:3,buttonId:null})}},[f,r,d]);let[v]=(0,l.useState)(()=>Symbol()),y=(0,I.useSyncRefs)(c,t,(0,O.useFloatingReference)(),(0,_.useEvent)(e=>{if(!f){if(e)i.buttons.current.push(v);else{let e=i.buttons.current.indexOf(v);-1!==e&&i.buttons.current.splice(e,1)}i.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),e&&d({type:2,button:e})}})),C=(0,I.useSyncRefs)(c,t),E=(0,w.useOwnerDocument)(c),S=(0,_.useEvent)(e=>{var t,a,r;if(f){if(1===i.popoverState)return;switch(e.key){case G.Keys.Space:case G.Keys.Enter:e.preventDefault(),null==(a=(t=e.target).click)||a.call(t),d({type:1}),null==(r=i.button)||r.focus()}}else switch(e.key){case G.Keys.Space:case G.Keys.Enter:e.preventDefault(),e.stopPropagation(),1===i.popoverState&&(null==g||g(i.buttonId)),d({type:0});break;case G.Keys.Escape:if(0!==i.popoverState)return null==g?void 0:g(i.buttonId);if(!c.current||null!=E&&E.activeElement&&!c.current.contains(E.activeElement))return;e.preventDefault(),e.stopPropagation(),d({type:1})}}),M=(0,_.useEvent)(e=>{f||e.key===G.Keys.Space&&e.preventDefault()}),P=(0,_.useEvent)(e=>{var t,a;(0,L.isDisabledReactIssue7711)(e.currentTarget)||n||(f?(d({type:1}),null==(t=i.button)||t.focus()):(e.preventDefault(),e.stopPropagation(),1===i.popoverState&&(null==g||g(i.buttonId)),d({type:0}),null==(a=i.button)||a.focus()))}),k=(0,_.useEvent)(e=>{e.preventDefault(),e.stopPropagation()}),{isFocusVisible:j,focusProps:A}=(0,h.useFocusRing)({autoFocus:s}),{isHovered:F,hoverProps:D}=(0,b.useHover)({isDisabled:n}),{pressed:z,pressProps:q}=(0,x.useActivePress)({disabled:n}),K=0===i.popoverState,V=(0,l.useMemo)(()=>({open:K,active:z||K,disabled:n,hover:F,focus:j,autofocus:s}),[K,F,j,z,n,s]),Q=(0,N.useResolveButtonType)(e,i.button),H=f?(0,$.mergeProps)({ref:C,type:Q,onKeyDown:S,onClick:P,disabled:n||void 0,autoFocus:s},A,D,q):(0,$.mergeProps)({ref:y,id:i.buttonId,type:Q,"aria-expanded":0===i.popoverState,"aria-controls":i.panel?i.panelId:void 0,disabled:n||void 0,autoFocus:s,onKeyDown:S,onKeyUp:M,onClick:P,onMouseDown:k},A,D,q),Y=(0,T.useTabDirection)(),X=(0,_.useEvent)(()=>{let e=i.panel;e&&(0,B.match)(Y.current,{[T.Direction.Forwards]:()=>(0,U.focusIn)(e,U.Focus.First),[T.Direction.Backwards]:()=>(0,U.focusIn)(e,U.Focus.Last)})===U.FocusResult.Error&&(0,U.focusIn)((0,U.getFocusableElements)().filter(e=>"true"!==e.dataset.headlessuiFocusGuard),(0,B.match)(Y.current,{[T.Direction.Forwards]:U.Focus.Next,[T.Direction.Backwards]:U.Focus.Previous}),{relativeTo:i.button})}),et=(0,$.useRender)();return l.default.createElement(l.default.Fragment,null,et({ourProps:H,theirProps:o,slot:V,defaultTag:"button",name:"Popover.Button"}),K&&!f&&u&&l.default.createElement(R.Hidden,{id:m,ref:i.afterButtonSentinel,features:R.HiddenFeatures.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:X}))}),eo=(0,$.forwardRefWithAs)(er),ei=(0,$.forwardRefWithAs)(er),ed=(0,$.forwardRefWithAs)(function(e,t){let a=(0,l.useId)(),{id:r=`headlessui-popover-panel-${a}`,focus:n=!1,anchor:s,portal:o=!1,modal:i=!1,transition:d=!1,...u}=e,[c,m]=W("Popover.Panel"),{close:p,isPortalled:g}=Z("Popover.Panel"),f=`headlessui-focus-sentinel-before-${a}`,v=`headlessui-focus-sentinel-after-${a}`,h=(0,l.useRef)(null),b=(0,O.useResolvedAnchor)(s),[x,C]=(0,O.useFloatingPanel)(b),S=(0,O.useFloatingPanelProps)();b&&(o=!0);let[P,N]=(0,l.useState)(null),k=(0,I.useSyncRefs)(h,t,b?x:null,(0,_.useEvent)(e=>m({type:4,panel:e})),N),F=(0,w.useOwnerDocument)(c.button),L=(0,w.useOwnerDocument)(h);(0,E.useIsoMorphicEffect)(()=>(m({type:5,panelId:r}),()=>{m({type:5,panelId:null})}),[r,m]);let z=(0,D.useOpenClosed)(),[K,V]=(0,A.useTransition)(d,P,null!==z?(z&D.State.Open)===D.State.Open:0===c.popoverState);(0,M.useOnDisappear)(K,c.button,()=>{m({type:1})});let Q=!c.__demoMode&&i&&K;(0,j.useScrollLock)(Q,L);let H=(0,_.useEvent)(e=>{var t;if(e.key===G.Keys.Escape){if(0!==c.popoverState||!h.current||null!=L&&L.activeElement&&!h.current.contains(L.activeElement))return;e.preventDefault(),e.stopPropagation(),m({type:1}),null==(t=c.button)||t.focus()}});(0,l.useEffect)(()=>{var t;e.static||1===c.popoverState&&(null==(t=e.unmount)||t)&&m({type:4,panel:null})},[c.popoverState,e.unmount,e.static,m]),(0,l.useEffect)(()=>{if(c.__demoMode||!n||0!==c.popoverState||!h.current)return;let e=null==L?void 0:L.activeElement;h.current.contains(e)||(0,U.focusIn)(h.current,U.Focus.First)},[c.__demoMode,n,h.current,c.popoverState]);let X=(0,l.useMemo)(()=>({open:0===c.popoverState,close:p}),[c.popoverState,p]),J=(0,$.mergeProps)(b?S():{},{ref:k,id:r,onKeyDown:H,onBlur:n&&0===c.popoverState?e=>{var t,a,r,l,n;let s=e.relatedTarget;s&&h.current&&(null!=(t=h.current)&&t.contains(s)||(m({type:1}),(null!=(r=null==(a=c.beforePanelSentinel.current)?void 0:a.contains)&&r.call(a,s)||null!=(n=null==(l=c.afterPanelSentinel.current)?void 0:l.contains)&&n.call(l,s))&&s.focus({preventScroll:!0})))}:void 0,tabIndex:-1,style:{...u.style,...C,"--button-width":(0,y.useElementSize)(c.button,!0).width},...(0,A.transitionDataAttributes)(V)}),et=(0,T.useTabDirection)(),ea=(0,_.useEvent)(()=>{let e=h.current;e&&(0,B.match)(et.current,{[T.Direction.Forwards]:()=>{var t;(0,U.focusIn)(e,U.Focus.First)===U.FocusResult.Error&&(null==(t=c.afterPanelSentinel.current)||t.focus())},[T.Direction.Backwards]:()=>{var e;null==(e=c.button)||e.focus({preventScroll:!0})}})}),er=(0,_.useEvent)(()=>{let e=h.current;e&&(0,B.match)(et.current,{[T.Direction.Forwards]:()=>{if(!c.button)return;let e=(0,U.getFocusableElements)(),t=e.indexOf(c.button),a=e.slice(0,t+1),r=[...e.slice(t+1),...a];for(let e of r.slice())if("true"===e.dataset.headlessuiFocusGuard||null!=P&&P.contains(e)){let t=r.indexOf(e);-1!==t&&r.splice(t,1)}(0,U.focusIn)(r,U.Focus.First,{sorted:!1})},[T.Direction.Backwards]:()=>{var t;(0,U.focusIn)(e,U.Focus.Previous)===U.FocusResult.Error&&(null==(t=c.button)||t.focus())}})}),en=(0,$.useRender)();return l.default.createElement(D.ResetOpenClosedProvider,null,l.default.createElement(ee.Provider,{value:r},l.default.createElement(Y.Provider,{value:{close:p,isPortalled:g}},l.default.createElement(q.Portal,{enabled:!!o&&(e.static||K),ownerDocument:F},K&&g&&l.default.createElement(R.Hidden,{id:f,ref:c.beforePanelSentinel,features:R.HiddenFeatures.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:ea}),en({ourProps:J,theirProps:u,slot:X,defaultTag:"div",features:el,visible:K,name:"Popover.Panel"}),K&&g&&l.default.createElement(R.Hidden,{id:v,ref:c.afterPanelSentinel,features:R.HiddenFeatures.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:er})))))}),eu=Object.assign(en,{Button:es,Backdrop:ei,Overlay:eo,Panel:ed,Group:(0,$.forwardRefWithAs)(function(e,t){let a=(0,l.useRef)(null),r=(0,I.useSyncRefs)(a,t),[n,s]=(0,l.useState)([]),o=(0,_.useEvent)(e=>{s(t=>{let a=t.indexOf(e);if(-1!==a){let e=t.slice();return e.splice(a,1),e}return t})}),i=(0,_.useEvent)(e=>(s(t=>[...t,e]),()=>o(e))),d=(0,_.useEvent)(()=>{var e;let t=(0,z.getOwnerDocument)(a);if(!t)return!1;let r=t.activeElement;return!!(null!=(e=a.current)&&e.contains(r))||n.some(e=>{var a,l;return(null==(a=t.getElementById(e.buttonId.current))?void 0:a.contains(r))||(null==(l=t.getElementById(e.panelId.current))?void 0:l.contains(r))})}),u=(0,_.useEvent)(e=>{for(let t of n)t.buttonId.current!==e&&t.close()}),c=(0,l.useMemo)(()=>({registerPopover:i,unregisterPopover:o,isFocusWithinPopoverGroup:d,closeOthers:u}),[i,o,d,u]),m=(0,l.useMemo)(()=>({}),[]),p=(0,$.useRender)();return l.default.createElement(k.MainTreeProvider,null,l.default.createElement(X.Provider,{value:c},p({ourProps:{ref:r},theirProps:e,slot:m,defaultTag:"div",name:"Popover.Group"})))})});e.s(["Popover",()=>eu,"PopoverButton",()=>es,"PopoverPanel",()=>ed],848082);var ec=e.i(157169),em=e.i(837699),ep=e.i(151094);let eg=e=>{let{value:t,onSelect:a}=e,{t:s}=(0,n.useTranslation)(),o=[{key:g.PreferredProviderTypeEnum.custom,text:s("modelProvider.apiKey",{ns:"common"})},{key:g.PreferredProviderTypeEnum.system,text:s("modelProvider.quota",{ns:"common"})}];return(0,r.jsxs)(eu,{className:"relative",children:[(0,r.jsx)(es,{as:"div",children:e=>{let{open:t}=e;return(0,r.jsx)(ep.default,{className:(0,p.cn)("h-6 w-6 rounded-md px-0",t&&"bg-components-button-secondary-bg-hover"),children:(0,r.jsx)(em.RiMoreFill,{className:"h-3 w-3"})})}}),(0,r.jsx)(ec.Transition,{as:l.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)(ed,{className:"absolute right-0 top-7 z-10 w-[144px] rounded-lg border-[0.5px] border-components-panel-border bg-components-panel-bg shadow-lg",children:(0,r.jsxs)("div",{className:"p-1",children:[(0,r.jsx)("div",{className:"px-3 pb-1 pt-2 text-sm font-medium text-text-secondary",children:s("modelProvider.card.priorityUse",{ns:"common"})}),o.map(e=>(0,r.jsx)(es,{as:l.Fragment,children:(0,r.jsxs)("div",{className:"flex h-9 cursor-pointer items-center justify-between rounded-lg px-3 text-sm text-text-secondary hover:bg-components-panel-on-panel-item-bg-hover",onClick:()=>a(e.key),children:[(0,r.jsx)("div",{className:"grow",children:e.text}),t===e.key&&(0,r.jsx)(em.RiCheckLine,{className:"h-4 w-4 text-text-accent"})]})},e.key))]})})})]})};e.i(668763);var ef=e.i(131368),ef=ef,ev=e.i(421001);let eh=()=>{let{t:e}=(0,n.useTranslation)();return(0,r.jsx)(ev.default,{popupContent:e("modelProvider.priorityUsing",{ns:"common"})||"",children:(0,r.jsx)("div",{className:"absolute -right-[5px] -top-[5px] cursor-pointer rounded-[5px] border-[0.5px] border-components-panel-border-subtle bg-util-colors-indigo-indigo-50 shadow-xs",children:(0,r.jsx)(ef.default,{className:"h-3 w-3 rotate-180 text-util-colors-indigo-indigo-600"})})})},eb=e=>{let{provider:t}=e,{t:a}=(0,n.useTranslation)(),{notify:h}=(0,s.useToastContext)(),{eventEmitter:b}=(0,c.useEventEmitterContextContext)(),x=(0,f.useUpdateModelList)(),y=(0,f.useUpdateModelProviders)(),_=t.custom_configuration,C=t.system_configuration,E=t.preferred_provider_type,S=_.status===g.CustomConfigurationStatusEnum.active,M=t.configurate_methods,{hasCredential:P,authorized:w,authRemoved:N,current_credential_name:k,notAllowedToUse:j}=(0,i.useCredentialStatus)(t),I=C.enabled&&S&&u.IS_CLOUD_EDITION,T=async e=>{"success"===(await (0,m.changeModelProviderPriority)({url:`/workspaces/current/model-providers/${t.provider}/preferred-provider-type`,body:{preferred_provider_type:e}})).result&&(h({type:"success",message:a("actionMsg.modifiedSuccessfully",{ns:"common"})}),y(),M.forEach(e=>{e===g.ConfigurationMethodEnum.predefinedModel&&t.supported_model_types.forEach(e=>x(e))}),b?.emit({type:v.UPDATE_MODEL_PROVIDER_CUSTOM_MODEL_LIST,payload:t.provider}))},A=(0,l.useMemo)(()=>P?w?k:N?a("modelProvider.auth.authRemoved",{ns:"common"}):"":a("modelProvider.auth.unAuthorized",{ns:"common"}),[w,N,k,P]),F=(0,l.useMemo)(()=>N||!P?"red":j?"gray":"green",[N,j,P]);return(0,r.jsxs)(r.Fragment,{children:[t.provider_credential_schema&&(0,r.jsxs)("div",{className:(0,p.cn)("relative ml-1 w-[120px] shrink-0 rounded-lg border-[0.5px] border-components-panel-border bg-white/[0.18] p-1",N&&"border-state-destructive-border bg-state-destructive-hover"),children:[(0,r.jsxs)("div",{className:"system-xs-medium mb-1 flex h-5 items-center justify-between pl-2 pr-[7px] pt-1 text-text-tertiary",children:[(0,r.jsx)("div",{className:(0,p.cn)("grow truncate",N&&"text-text-destructive"),title:A,children:A}),(0,r.jsx)(d.default,{className:"shrink-0",color:F})]}),(0,r.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,r.jsx)(o.ConfigProvider,{provider:t}),I&&(0,r.jsx)(eg,{value:E,onSelect:T})]}),E===g.PreferredProviderTypeEnum.custom&&C.enabled&&(0,r.jsx)(eh,{})]}),I&&!t.provider_credential_schema&&(0,r.jsx)("div",{className:"ml-1",children:(0,r.jsx)(eg,{value:E,onSelect:T})})]})}},77445,295973,343050,867970,e=>{"use strict";var t=e.i(563199),a=e.i(807324),r=e.i(562107);let l=e=>{let{ref:l,...n}=e;return(0,t.jsx)(a.default,{...n,ref:l,data:r.default})};l.displayName="Balance",e.s(["default",0,l],295973),e.i(826851),e.i(262899),e.i(30243);var n=e.i(492986);let s=e=>{let{ref:r,...l}=e;return(0,t.jsx)(a.default,{...l,ref:r,data:n.default})};s.displayName="Tag01",e.s(["default",0,s],343050);var o=e.i(695709);let i=e=>{let{ref:r,...l}=e;return(0,t.jsx)(a.default,{...l,ref:r,data:o.default})};i.displayName="Tag03",e.s(["default",0,i],867970),e.s([],77445)},964493,e=>{"use strict";var t=e.i(295973);e.s(["Balance",()=>t.default])},260484,e=>{"use strict";var t=e.i(563199),a=e.i(182370),r=e.i(725968),l=e.i(268255),n=e.i(876581),s=e.i(614653),o=e.i(125234),i=e.i(969350),d=e.i(71216),u=e.i(777009),c=e.i(329512),m=e.i(602652),p=e.i(274406),g=e.i(344554),f=e.i(294662),v=e.i(330620),h=e.i(858023),b=e.i(869873),x=e.i(198136),y=e.i(90158);let _=(0,l.createContext)(null);_.displayName="GroupContext";let C=l.Fragment,E=Object.assign((0,h.forwardRefWithAs)(function(e,t){var C;let E=(0,l.useId)(),S=(0,g.useProvidedId)(),M=(0,m.useDisabled)(),{id:P=S||`headlessui-switch-${E}`,disabled:w=M||!1,checked:N,defaultChecked:k,onChange:j,name:I,value:T,form:A,autoFocus:F=!1,...O}=e,R=(0,l.useContext)(_),[D,L]=(0,l.useState)(null),U=(0,l.useRef)(null),B=(0,c.useSyncRefs)(U,t,null===R?null:R.setSwitch,L),z=(0,o.useDefaultValue)(k),[$,G]=(0,s.useControllable)(N,j,null!=z&&z),q=(0,i.useDisposables)(),[K,V]=(0,l.useState)(!1),Q=(0,d.useEvent)(()=>{V(!0),null==G||G(!$),q.nextFrame(()=>{V(!1)})}),H=(0,d.useEvent)(e=>{if((0,f.isDisabledReactIssue7711)(e.currentTarget))return e.preventDefault();e.preventDefault(),Q()}),W=(0,d.useEvent)(e=>{e.key===x.Keys.Space?(e.preventDefault(),Q()):e.key===x.Keys.Enter&&(0,v.attemptSubmit)(e.currentTarget)}),Y=(0,d.useEvent)(e=>e.preventDefault()),Z=(0,y.useLabelledBy)(),X=(0,b.useDescribedBy)(),{isFocusVisible:J,focusProps:ee}=(0,a.useFocusRing)({autoFocus:F}),{isHovered:et,hoverProps:ea}=(0,r.useHover)({isDisabled:w}),{pressed:er,pressProps:el}=(0,n.useActivePress)({disabled:w}),en=(0,l.useMemo)(()=>({checked:$,disabled:w,hover:et,focus:J,active:er,autofocus:F,changing:K}),[$,et,J,er,w,K,F]),es=(0,h.mergeProps)({id:P,ref:B,role:"switch",type:(0,u.useResolveButtonType)(e,D),tabIndex:-1===e.tabIndex?0:null!=(C=e.tabIndex)?C:0,"aria-checked":$,"aria-labelledby":Z,"aria-describedby":X,disabled:w||void 0,autoFocus:F,onClick:H,onKeyUp:W,onKeyPress:Y},ee,ea,el),eo=(0,l.useCallback)(()=>{if(void 0!==z)return null==G?void 0:G(z)},[G,z]),ei=(0,h.useRender)();return l.default.createElement(l.default.Fragment,null,null!=I&&l.default.createElement(p.FormFields,{disabled:w,data:{[I]:T||"on"},overrides:{type:"checkbox",checked:$},form:A,onReset:eo}),ei({ourProps:es,theirProps:O,slot:en,defaultTag:"button",name:"Switch"}))}),{Group:function(e){var t;let[a,r]=(0,l.useState)(null),[n,s]=(0,y.useLabels)(),[o,i]=(0,b.useDescriptions)(),d=(0,l.useMemo)(()=>({switch:a,setSwitch:r}),[a,r]),u=(0,h.useRender)();return l.default.createElement(i,{name:"Switch.Description",value:o},l.default.createElement(s,{name:"Switch.Label",value:n,props:{htmlFor:null==(t=d.switch)?void 0:t.id,onClick(e){a&&(e.currentTarget instanceof HTMLLabelElement&&e.preventDefault(),a.click(),a.focus({preventScroll:!0}))}}},l.default.createElement(_.Provider,{value:d},u({ourProps:{},theirProps:e,slot:{},defaultTag:C,name:"Switch.Group"}))))},Label:y.Label,Description:b.Description});var S=e.i(935139);let M=e=>{let{ref:a,onChange:r,size:n="md",defaultValue:s=!1,disabled:o=!1,className:i}=e,[d,u]=(0,l.useState)(s);return(0,l.useEffect)(()=>{u(s)},[s]),(0,t.jsx)(E,{ref:a,checked:d,onChange:e=>{o||(u(e),r?.(e))},className:(0,S.cn)({lg:"h-6 w-11",l:"h-5 w-9",md:"h-4 w-7",sm:"h-3 w-5",xs:"h-2.5 w-3.5"}[n],d?"bg-components-toggle-bg":"bg-components-toggle-bg-unchecked","relative inline-flex  shrink-0 cursor-pointer rounded-[5px] border-2 border-transparent transition-colors duration-200 ease-in-out",o?"!cursor-not-allowed !opacity-50":"","xs"===n&&"rounded-sm",i),children:(0,t.jsx)("span",{"aria-hidden":"true",className:(0,S.cn)({lg:"h-5 w-5",l:"h-4 w-4",md:"h-3 w-3",sm:"h-2 w-2",xs:"h-1.5 w-1"}[n],d?({lg:"translate-x-5",l:"translate-x-4",md:"translate-x-3",sm:"translate-x-2",xs:"translate-x-1.5"})[n]:"translate-x-0","xs"===n&&"rounded-[1px]","pointer-events-none inline-block rounded-[3px] bg-components-toggle-knob shadow ring-0 transition duration-200 ease-in-out")})})};M.displayName="Switch";let P=l.memo(M);e.s(["default",0,P],260484)},225162,500841,540284,58091,e=>{"use strict";e.s(["useCurrentProviderAndModel",()=>G,"useDefaultModel",()=>$,"useLanguage",()=>B,"useMarketplaceAllPlugins",()=>W,"useModelList",()=>z,"useModelListAndDefaultModel",()=>K,"useModelListAndDefaultModelAndCurrentProviderAndModel",()=>V,"useModelModalHandler",()=>Z,"useRefreshModel",()=>Y,"useSystemDefaultModelAndModelList",()=>U,"useTextGenerationCurrentProviderAndModelAndModelList",()=>q,"useUpdateModelList",()=>Q,"useUpdateModelProviders",()=>H],225162);var t=e.i(562572),a=e.i(214309),r=e.i(268255),l=e.i(351797),n=e.i(944911),s=e.i(249420),o=e.i(683257),i=e.i(296124),d=e.i(56971),u=e.i(81828),c=e.i(652669),m=e.i(739255);e.s(["UPDATE_MODEL_PROVIDER_CUSTOM_MODEL_LIST",()=>D,"default",()=>L],58091);var p=e.i(563199),g=e.i(837699);e.i(152567);var f=e.i(408767);e.i(466836);var v=e.i(778432),h=e.i(910297),b=e.i(925521),x=e.i(711536),y=e.i(935139),_=e.i(407098),C=e.i(320423),E=e.i(750552),S=e.i(126953),M=e.i(38532),P=e.i(83278);e.i(77445);var w=e.i(964493),N=e.i(260484),k=e.i(421001),j=e.i(342687),I=e.i(77064),I=I,T=e.i(722591);e.s(["default",()=>F],540284);let A=e=>{let{className:t,feature:a,showFeaturesLabel:r}=e,{t:l}=(0,f.useTranslation)();return a===m.ModelFeatureEnum.vision?r?(0,p.jsxs)(_.default,{className:(0,y.cn)("gap-x-0.5",t),children:[(0,p.jsx)(g.RiImageCircleAiLine,{className:"size-3"}),(0,p.jsx)("span",{children:m.ModelFeatureTextEnum.vision})]}):(0,p.jsx)(k.default,{popupContent:l("modelProvider.featureSupported",{ns:"common",feature:m.ModelFeatureTextEnum.vision}),children:(0,p.jsx)("div",{className:"inline-block cursor-help",children:(0,p.jsx)(_.default,{className:(0,y.cn)("w-[18px] justify-center !px-0",t),children:(0,p.jsx)(g.RiImageCircleAiLine,{className:"size-3"})})})}):a===m.ModelFeatureEnum.document?r?(0,p.jsxs)(_.default,{className:(0,y.cn)("gap-x-0.5",t),children:[(0,p.jsx)(g.RiFileTextLine,{className:"size-3"}),(0,p.jsx)("span",{children:m.ModelFeatureTextEnum.document})]}):(0,p.jsx)(k.default,{popupContent:l("modelProvider.featureSupported",{ns:"common",feature:m.ModelFeatureTextEnum.document}),children:(0,p.jsx)("div",{className:"inline-block cursor-help",children:(0,p.jsx)(_.default,{className:(0,y.cn)("w-[18px] justify-center !px-0",t),children:(0,p.jsx)(g.RiFileTextLine,{className:"size-3"})})})}):a===m.ModelFeatureEnum.audio?r?(0,p.jsxs)(_.default,{className:(0,y.cn)("gap-x-0.5",t),children:[(0,p.jsx)(g.RiVoiceAiFill,{className:"size-3"}),(0,p.jsx)("span",{children:m.ModelFeatureTextEnum.audio})]}):(0,p.jsx)(k.default,{popupContent:l("modelProvider.featureSupported",{ns:"common",feature:m.ModelFeatureTextEnum.audio}),children:(0,p.jsx)("div",{className:"inline-block cursor-help",children:(0,p.jsx)(_.default,{className:(0,y.cn)("w-[18px] justify-center !px-0",t),children:(0,p.jsx)(g.RiVoiceAiFill,{className:"size-3"})})})}):a===m.ModelFeatureEnum.video?r?(0,p.jsxs)(_.default,{className:(0,y.cn)("gap-x-0.5",t),children:[(0,p.jsx)(g.RiFilmAiLine,{className:"size-3"}),(0,p.jsx)("span",{children:m.ModelFeatureTextEnum.video})]}):(0,p.jsx)(k.default,{popupContent:l("modelProvider.featureSupported",{ns:"common",feature:m.ModelFeatureTextEnum.video}),children:(0,p.jsx)("div",{className:"inline-block cursor-help",children:(0,p.jsx)(_.default,{className:(0,y.cn)("w-[18px] justify-center !px-0",t),children:(0,p.jsx)(g.RiFilmAiLine,{className:"size-3"})})})}):null};e.s(["default",0,A],500841);let F=e=>{let{modelItem:t,className:a,showModelType:r,modelTypeClassName:l,showMode:n,modeClassName:s,showFeatures:o,showFeaturesLabel:i,featuresClassName:d,showContextSize:u,children:c}=e,m=B();return t?(0,p.jsxs)("div",{className:(0,y.cn)("system-sm-regular flex items-center gap-0.5 overflow-hidden truncate text-ellipsis text-components-input-text-filled",a),children:[(0,p.jsx)("div",{className:"truncate",title:t.label[m]||t.label.en_US,children:t.label[m]||t.label.en_US}),(0,p.jsxs)("div",{className:"flex items-center gap-0.5",children:[!!(r&&t.model_type)&&(0,p.jsx)(_.default,{className:l,children:(0,E.modelTypeFormat)(t.model_type)}),!!(t.model_properties.mode&&n)&&(0,p.jsx)(_.default,{className:s,children:t.model_properties.mode.toLocaleUpperCase()}),!!(u&&t.model_properties.context_size)&&(0,p.jsx)(_.default,{children:(0,E.sizeFormat)(t.model_properties.context_size)}),o&&t.features?.map(e=>(0,p.jsx)(A,{feature:e,className:d,showFeaturesLabel:i},e))]}),c]}):null},O=(0,r.memo)(e=>{let{model:t,provider:a,isConfigurable:l,onChange:n,onModifyLoadBalancing:s}=e,{t:o}=(0,f.useTranslation)(),{plan:i}=(0,d.useProviderContext)(),c=(0,d.useProviderContextSelector)(e=>e.modelLoadBalancingEnabled),{isCurrentWorkspaceManager:g}=(0,x.useAppContext)(),v=Q(),h=(0,r.useCallback)(async e=>{e?await (0,u.enableModel)(`/workspaces/current/model-providers/${a.provider}/models/enable`,{model:t.model,model_type:t.model_type}):await (0,u.disableModel)(`/workspaces/current/model-providers/${a.provider}/models/disable`,{model:t.model,model_type:t.model_type}),v(t.model_type),n?.(a.provider)},[t.model,t.model_type,n,a.provider,v]),{run:b}=(0,M.useDebounceFn)(h,{wait:500}),_=(0,r.useCallback)(async e=>{b(e)},[b]);return(0,p.jsxs)("div",{className:(0,y.cn)("group flex h-8 items-center rounded-lg pl-2 pr-2.5",l&&"hover:bg-components-panel-on-panel-item-bg-hover",t.deprecated&&"opacity-60"),children:[(0,p.jsx)(T.default,{className:"mr-2 shrink-0",provider:a,modelName:t.model}),(0,p.jsx)(F,{className:"system-md-regular grow text-text-secondary",modelItem:t,showModelType:!0,showMode:!0,showContextSize:!0,showFeatures:!0,showFeaturesLabel:!0}),(0,p.jsxs)("div",{className:"flex shrink-0 items-center",children:[c&&!t.deprecated&&t.load_balancing_enabled&&!t.has_invalid_load_balancing_configs&&(0,p.jsx)(P.default,{className:"mr-1 h-[18px] w-[18px] items-center justify-center border-text-accent-secondary p-0",children:(0,p.jsx)(w.Balance,{className:"h-3 w-3 text-text-accent-secondary"})}),g&&(c||i.type===j.Plan.sandbox)&&!t.deprecated&&[m.ModelStatusEnum.active,m.ModelStatusEnum.disabled].includes(t.status)&&(0,p.jsx)(I.default,{onClick:()=>s?.(t),loadBalancingEnabled:t.load_balancing_enabled,loadBalancingInvalid:t.has_invalid_load_balancing_configs,credentialRemoved:t.status===m.ModelStatusEnum.credentialRemoved}),t.deprecated?(0,p.jsx)(k.default,{popupContent:(0,p.jsx)("span",{className:"font-semibold",children:o("modelProvider.modelHasBeenDeprecated",{ns:"common"})}),offset:{mainAxis:4},children:(0,p.jsx)(N.default,{defaultValue:!1,disabled:!0,size:"md"})}):g&&(0,p.jsx)(N.default,{className:"ml-2",defaultValue:t?.status===m.ModelStatusEnum.active,disabled:![m.ModelStatusEnum.active,m.ModelStatusEnum.disabled].includes(t.status),size:"md",onChange:_})]})]},`${t.model}-${t.fetch_from}`)}),R=e=>{let{provider:t,models:a,onCollapse:l,onChange:n}=e,{t:s}=(0,f.useTranslation)(),o=t.configurate_methods.filter(e=>e!==m.ConfigurationMethodEnum.fetchFromRemote),{isCurrentWorkspaceManager:d}=(0,x.useAppContext)(),u=o.includes(m.ConfigurationMethodEnum.customizableModel),c=(0,i.useModalContextSelector)(e=>e.setShowModelLoadBalancingModal),b=(0,r.useCallback)((e,a)=>{c({provider:t,credential:a,configurateMethod:e.fetch_from,model:e,open:!!e,onClose:()=>c(null),onSave:n})},[n,t,c]);return(0,p.jsx)("div",{className:"rounded-b-xl px-2 pb-2",children:(0,p.jsxs)("div",{className:"rounded-lg bg-components-panel-bg py-1",children:[(0,p.jsxs)("div",{className:"flex items-center pl-1 pr-[3px]",children:[(0,p.jsxs)("span",{className:"group mr-2 flex shrink-0 items-center",children:[(0,p.jsxs)("span",{className:"system-xs-medium inline-flex h-6 items-center pl-1 pr-1.5 text-text-tertiary group-hover:hidden",children:[s("modelProvider.modelsNum",{ns:"common",num:a.length}),(0,p.jsx)(g.RiArrowRightSLine,{className:"mr-0.5 h-4 w-4 rotate-90"})]}),(0,p.jsxs)("span",{className:"system-xs-medium hidden h-6 cursor-pointer items-center rounded-lg bg-state-base-hover pl-1 pr-1.5 text-text-tertiary group-hover:inline-flex",onClick:()=>l(),children:[s("modelProvider.modelsNum",{ns:"common",num:a.length}),(0,p.jsx)(g.RiArrowRightSLine,{className:"mr-0.5 h-4 w-4 rotate-90"})]})]}),u&&d&&(0,p.jsxs)("div",{className:"flex grow justify-end",children:[(0,p.jsx)(h.ManageCustomModelCredentials,{provider:t,currentCustomConfigurationModelFixedFields:void 0}),(0,p.jsx)(v.AddCustomModel,{provider:t,configurationMethod:m.ConfigurationMethodEnum.customizableModel,currentCustomConfigurationModelFixedFields:void 0})]})]}),a.map(e=>(0,p.jsx)(O,{model:e,provider:t,isConfigurable:u,onChange:n,onModifyLoadBalancing:b},`${e.model}-${e.model_type}-${e.fetch_from}`))]})})},D="UPDATE_MODEL_PROVIDER_CUSTOM_MODEL_LIST",L=e=>{let{notConfigured:t,provider:a}=e,{t:l}=(0,f.useTranslation)(),{eventEmitter:n}=(0,s.useEventEmitterContextContext)(),[o,i]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[M,P]=(0,r.useState)(!0),[w,N]=(0,r.useState)([]),k=a.configurate_methods.filter(e=>e!==m.ConfigurationMethodEnum.fetchFromRemote),j=a.system_configuration,I=o&&!!w.length,{isCurrentWorkspaceManager:T}=(0,x.useAppContext)(),A=j.enabled&&E.MODEL_PROVIDER_QUOTA_GET_PAID.includes(a.provider)&&!b.IS_CE_EDITION,F=k.includes(m.ConfigurationMethodEnum.predefinedModel)&&T,O=async e=>{if(!d)try{c(!0);let t=await (0,u.fetchModelProviderModelList)(`/workspaces/current/model-providers/${e}/models`);N(t.data),P(!1),i(!0)}finally{c(!1)}};return n?.useSubscription(e=>{e?.type===D&&e.payload===a.provider&&O(e.payload)}),(0,p.jsxs)("div",{className:(0,y.cn)("mb-2 rounded-xl border-[0.5px] border-divider-regular bg-third-party-model-bg-default shadow-xs","langgenius/openai/openai"===a.provider&&"bg-third-party-model-bg-openai","langgenius/anthropic/anthropic"===a.provider&&"bg-third-party-model-bg-anthropic"),children:[(0,p.jsxs)("div",{className:"flex rounded-t-xl py-2 pl-3 pr-2",children:[(0,p.jsxs)("div",{className:"grow px-1 pb-0.5 pt-1",children:[(0,p.jsx)(C.default,{className:"mb-2",provider:a}),(0,p.jsx)("div",{className:"flex gap-0.5",children:a.supported_model_types.map(e=>(0,p.jsx)(_.default,{children:(0,E.modelTypeFormat)(e)},e))})]}),F&&(0,p.jsx)(S.default,{provider:a})]}),M&&(0,p.jsxs)("div",{className:"system-xs-medium group flex items-center justify-between border-t border-t-divider-subtle py-1.5 pl-2 pr-[11px] text-text-tertiary",children:[(A||!t)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex h-6 items-center pl-1 pr-1.5 leading-6 group-hover:hidden",children:[I?l("modelProvider.modelsNum",{ns:"common",num:w.length}):l("modelProvider.showModels",{ns:"common"}),!d&&(0,p.jsx)(g.RiArrowRightSLine,{className:"h-4 w-4"})]}),(0,p.jsxs)("div",{className:"hidden h-6 cursor-pointer items-center rounded-lg pl-1 pr-1.5 hover:bg-components-button-ghost-bg-hover group-hover:flex",onClick:()=>{o?P(!1):O(a.provider)},children:[I?l("modelProvider.showModelsNum",{ns:"common",num:w.length}):l("modelProvider.showModels",{ns:"common"}),!d&&(0,p.jsx)(g.RiArrowRightSLine,{className:"h-4 w-4"}),d&&(0,p.jsx)(g.RiLoader2Line,{className:"ml-0.5 h-3 w-3 animate-spin"})]})]}),!A&&t&&(0,p.jsxs)("div",{className:"flex h-6 items-center pl-1 pr-1.5",children:[(0,p.jsx)(g.RiInformation2Fill,{className:"mr-1 h-4 w-4 text-text-accent"}),(0,p.jsx)("span",{className:"system-xs-medium text-text-secondary",children:l("modelProvider.configureTip",{ns:"common"})})]}),k.includes(m.ConfigurationMethodEnum.customizableModel)&&T&&(0,p.jsxs)("div",{className:"flex grow justify-end",children:[(0,p.jsx)(h.ManageCustomModelCredentials,{provider:a,currentCustomConfigurationModelFixedFields:void 0}),(0,p.jsx)(v.AddCustomModel,{provider:a,configurationMethod:m.ConfigurationMethodEnum.customizableModel,currentCustomConfigurationModelFixedFields:void 0})]})]}),!M&&(0,p.jsx)(R,{provider:a,models:w,onCollapse:()=>P(!0),onChange:e=>O(e)})]})},U=(e,t)=>{let a=(0,r.useMemo)(()=>{let a=t.find(t=>t.provider===e?.provider.provider),r=a?.models.find(t=>t.model===e?.model);return a&&r&&{model:r.model,provider:a.provider}},[e,t]),[l,n]=(0,r.useState)(a),s=(0,r.useCallback)(e=>{n(e)},[]);return(0,r.useEffect)(()=>{n(a)},[a]),[l,s]},B=()=>(0,o.useLocale)().replace("-","_"),z=e=>{let{data:a,refetch:r,isPending:l}=(0,t.useQuery)({queryKey:c.commonQueryKeys.modelList(e),queryFn:()=>(0,u.fetchModelList)(`/workspaces/current/models/model-types/${e}`)});return{data:a?.data||[],mutate:r,isLoading:l}},$=e=>{let{data:a,refetch:r,isPending:l}=(0,t.useQuery)({queryKey:c.commonQueryKeys.defaultModel(e),queryFn:()=>(0,u.fetchDefaultModal)(`/workspaces/current/default-model?model_type=${e}`)});return{data:a?.data,mutate:r,isLoading:l}},G=(e,t)=>{let a=e.find(e=>e.provider===t?.provider),r=a?.models.find(e=>e.model===t?.model);return{currentProvider:a,currentModel:r}},q=e=>{let{textGenerationModelList:t}=(0,d.useProviderContext)(),a=t.filter(e=>e.status===m.ModelStatusEnum.active),{currentProvider:r,currentModel:l}=G(t,e);return{currentProvider:r,currentModel:l,textGenerationModelList:t,activeTextGenerationModelList:a}},K=e=>{let{data:t}=z(e),{data:a}=$(e);return{modelList:t,defaultModel:a}},V=e=>{let{modelList:t,defaultModel:a}=K(e),{currentProvider:r,currentModel:l}=G(t,{provider:a?.provider.provider||"",model:a?.model||""});return{modelList:t,defaultModel:a,currentProvider:r,currentModel:l}},Q=()=>{let e=(0,a.useQueryClient)();return(0,r.useCallback)(t=>{e.invalidateQueries({queryKey:c.commonQueryKeys.modelList(t)})},[e])},H=()=>{let e=(0,a.useQueryClient)();return(0,r.useCallback)(()=>{e.invalidateQueries({queryKey:c.commonQueryKeys.modelProviders})},[e])},W=(e,t)=>{let a=(0,r.useMemo)(()=>e.map(e=>e.provider.replace(/(.+)\/([^/]+)$/,"$1")),[e]),{plugins:s=[],isLoading:o}=(0,l.useMarketplacePluginsByCollectionId)("__model-settings-pinned-models"),{plugins:i,queryPlugins:d,queryPluginsWithDebounced:u,isLoading:c}=(0,l.useMarketplacePlugins)();return(0,r.useEffect)(()=>{t?u({query:t,category:n.PluginCategoryEnum.model,exclude:a,type:"plugin",sort_by:"install_count",sort_order:"DESC"}):d({query:"",category:n.PluginCategoryEnum.model,type:"plugin",page_size:1e3,exclude:a,sort_by:"install_count",sort_order:"DESC"})},[d,u,t,a]),{plugins:(0,r.useMemo)(()=>{let e=s.filter(e=>!a.includes(e.plugin_id));if(i?.length)for(let t=0;t<i.length;t++){let a=i[t];"bundle"===a.type||e.find(e=>e.plugin_id===a.plugin_id)||e.push(a)}return e},[i,s,a]),isLoading:o||c}},Y=()=>{let{eventEmitter:e}=(0,s.useEventEmitterContextContext)(),t=H(),a=Q();return{handleRefreshModel:(0,r.useCallback)((r,l,n)=>{t(),r.supported_model_types.forEach(e=>{a(e)}),n&&r.custom_configuration.status===m.CustomConfigurationStatusEnum.active&&(e?.emit({type:D,payload:r.provider}),l?.__model_type&&a(l.__model_type))},[e,a,t])}},Z=()=>{let e=(0,i.useModalContextSelector)(e=>e.setShowModelModal);return function(t,a,r){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e({payload:{currentProvider:t,currentConfigurationMethod:a,currentCustomConfigurationModelFixedFields:r,isModelCredential:l.isModelCredential,credential:l.credential,model:l.model,mode:l.mode},onSaveCallback:(e,t)=>{l.onUpdate?.(e,t)}})}}},711536,e=>{"use strict";e.s(["AppContextProvider",()=>y,"default",()=>C,"useAppContext",()=>_,"useSelector",()=>x],711536);var t=e.i(563199),a=e.i(214309),r=e.i(124836),l=e.i(268255),n=e.i(339548);e.i(201987);var s=e.i(207331),o=e.i(182915);e.i(47690);var i=e.i(84314),d=e.i(225162),u=e.i(491234);let c=()=>{let e=(0,d.useLanguage)(),[a,r]=(0,l.useState)(()=>"1"!==localStorage.getItem("hide-maintenance-notice")),n=u.NOTICE_I18N.title,s=u.NOTICE_I18N.desc;return a?(0,t.jsxs)("div",{className:"z-20 flex h-[38px] shrink-0 items-center border-[0.5px] border-b border-b-[#FEF0C7] bg-[#FFFAEB] px-4",children:[(0,t.jsx)("div",{className:"mr-2 flex h-[22px] shrink-0 items-center rounded-xl bg-[#F79009] px-2 text-[11px] font-medium text-white",children:n[e]}),u.NOTICE_I18N.href&&"#"!==u.NOTICE_I18N.href?(0,t.jsx)("div",{className:"grow cursor-pointer text-xs font-medium text-gray-700",onClick:()=>{window.open(u.NOTICE_I18N.href,"_blank")},children:s[e]}):(0,t.jsx)("div",{className:"grow text-xs font-medium text-gray-700",children:s[e]}),(0,t.jsx)(i.X,{className:"h-4 w-4 shrink-0 cursor-pointer text-gray-500",onClick:()=>{localStorage.setItem("hide-maintenance-notice","1"),r(!1)}})]}):null};var m=e.i(925521),p=e.i(652669),g=e.i(494268);let f={id:"",name:"",email:"",avatar:"",avatar_url:"",is_password_set:!1},v={current_env:"",current_version:"",latest_version:"",release_date:"",release_notes:"",version:"",can_auto_update:!1},h={id:"",name:"",plan:"",status:"",created_at:0,role:"normal",providers:[],trial_credits:200,trial_credits_used:0,next_credit_reset_date:0},b=(0,n.createContext)({userProfile:f,currentWorkspace:h,isCurrentWorkspaceManager:!1,isCurrentWorkspaceOwner:!1,isCurrentWorkspaceEditor:!1,isCurrentWorkspaceDatasetOperator:!1,mutateUserProfile:r.noop,mutateCurrentWorkspace:r.noop,langGeniusVersionInfo:v,useSelector:x,isLoadingCurrentWorkspace:!1,isValidatingCurrentWorkspace:!1});function x(e){return(0,n.useContextSelector)(b,e)}let y=e=>{let{children:r}=e,n=(0,a.useQueryClient)(),i=(0,g.useGlobalPublicStore)(e=>e.systemFeatures),{data:d}=(0,p.useUserProfile)(),{data:u,isPending:y,isFetching:_}=(0,p.useCurrentWorkspace)(),C=(0,p.useLangGeniusVersion)(d?.meta.currentVersion,!i.branding.enabled),E=(0,l.useMemo)(()=>d?.profile||f,[d?.profile]),S=(0,l.useMemo)(()=>u||h,[u]),M=(0,l.useMemo)(()=>{if(!d?.meta?.currentVersion||!C.data)return v;let e=d.meta.currentVersion,t=d.meta.currentEnv||"",a=C.data;return{...a,current_version:e,latest_version:a.version,current_env:t}},[C.data,d?.meta]),P=(0,l.useMemo)(()=>["owner","admin"].includes(S.role),[S.role]),w=(0,l.useMemo)(()=>"owner"===S.role,[S.role]),N=(0,l.useMemo)(()=>["owner","admin","editor"].includes(S.role),[S.role]),k=(0,l.useMemo)(()=>"dataset_operator"===S.role,[S.role]),j=(0,l.useCallback)(()=>{n.invalidateQueries({queryKey:["common","user-profile"]})},[n]),I=(0,l.useCallback)(()=>{n.invalidateQueries({queryKey:["common","current-workspace"]})},[n]);return(0,l.useEffect)(()=>{m.ZENDESK_FIELD_IDS.ENVIRONMENT&&M?.current_env&&(0,o.setZendeskConversationFields)([{id:m.ZENDESK_FIELD_IDS.ENVIRONMENT,value:M.current_env.toLowerCase()}])},[M?.current_env]),(0,l.useEffect)(()=>{m.ZENDESK_FIELD_IDS.VERSION&&M?.version&&(0,o.setZendeskConversationFields)([{id:m.ZENDESK_FIELD_IDS.VERSION,value:M.version}])},[M?.version]),(0,l.useEffect)(()=>{m.ZENDESK_FIELD_IDS.EMAIL&&E?.email&&(0,o.setZendeskConversationFields)([{id:m.ZENDESK_FIELD_IDS.EMAIL,value:E.email}])},[E?.email]),(0,l.useEffect)(()=>{m.ZENDESK_FIELD_IDS.WORKSPACE_ID&&S?.id&&(0,o.setZendeskConversationFields)([{id:m.ZENDESK_FIELD_IDS.WORKSPACE_ID,value:S.id}])},[S?.id]),(0,l.useEffect)(()=>{if(E?.id){(0,s.setUserId)(E.email);let e={email:E.email,name:E.name,has_password:E.is_password_set};S?.id&&(e.workspace_id=S.id,e.workspace_name=S.name,e.workspace_plan=S.plan,e.workspace_status=S.status,e.workspace_role=S.role),(0,s.setUserProperties)(e)}},[E,S]),(0,t.jsx)(b.Provider,{value:{userProfile:E,mutateUserProfile:j,langGeniusVersionInfo:M,useSelector:x,currentWorkspace:S,isCurrentWorkspaceManager:P,isCurrentWorkspaceOwner:w,isCurrentWorkspaceEditor:N,isCurrentWorkspaceDatasetOperator:k,mutateCurrentWorkspace:I,isLoadingCurrentWorkspace:y,isValidatingCurrentWorkspace:_},children:(0,t.jsxs)("div",{className:"flex h-full flex-col overflow-y-auto",children:[globalThis.document?.body?.getAttribute("data-public-maintenance-notice")&&(0,t.jsx)(c,{}),(0,t.jsx)("div",{className:"relative flex grow flex-col overflow-y-auto overflow-x-hidden bg-background-body",children:r})]})})},_=()=>(0,n.useContext)(b),C=b}]);