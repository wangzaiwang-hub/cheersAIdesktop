(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,551193,e=>{"use strict";let t,n,o;var a=e.i(268255),r=e.i(198136),s=e.i(126765),i=e.i(243815),l=e.i(71216),c=e.i(741064),d=e.i(782165),u=e.i(775885),p=e.i(122783),m=e.i(944296),f=e.i(818805),x=e.i(135477),g=e.i(92054),h=e.i(329512),v=e.i(808534),b=e.i(268850),y=e.i(316688),w=e.i(652038),C=e.i(858023),j=e.i(869873),N=e.i(969350),k=e.i(425324),E=e.i(979845),_=e.i(692941),D=e.i(394149),F=e.i(794085),T=e.i(996978),R=e.i(455028),P=e.i(692558);function S(e){if(!e)return new Set;if("function"==typeof e)return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}var I=((t=I||{})[t.None=0]="None",t[t.InitialFocus=1]="InitialFocus",t[t.TabLock=2]="TabLock",t[t.FocusLock=4]="FocusLock",t[t.RestoreFocus=8]="RestoreFocus",t[t.AutoFocus=16]="AutoFocus",t);let L=Object.assign((0,C.forwardRefWithAs)(function(e,t){let n=(0,a.useRef)(null),o=(0,h.useSyncRefs)(n,t),{initialFocus:r,initialFocusFallback:c,containers:d,features:u=15,...p}=e;(0,g.useServerHandoffComplete)()||(u=0);let f=(0,m.useOwnerDocument)(n);!function(e,t){let{ownerDocument:n}=t,o=!!(8&e),r=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,a.useRef)(T.history.slice());return(0,D.useWatch)((e,n)=>{let[o]=e,[a]=n;!0===a&&!1===o&&(0,P.microTask)(()=>{t.current.splice(0)}),!1===a&&!0===o&&(t.current=T.history.slice())},[e,T.history,t]),(0,l.useEvent)(()=>{var e;return null!=(e=t.current.find(e=>null!=e&&e.isConnected))?e:null})}(o);(0,D.useWatch)(()=>{o||(null==n?void 0:n.activeElement)===(null==n?void 0:n.body)&&(0,R.focusElement)(r())},[o]),(0,E.useOnUnmount)(()=>{o&&(0,R.focusElement)(r())})}(u,{ownerDocument:f});let x=function(e,t){let{ownerDocument:n,container:o,initialFocus:r,initialFocusFallback:s}=t,l=(0,a.useRef)(null),c=(0,i.useIsTopLayer)(!!(1&e),"focus-trap#initial-focus"),d=(0,k.useIsMounted)();return(0,D.useWatch)(()=>{if(0===e)return;if(!c){null!=s&&s.current&&(0,R.focusElement)(s.current);return}let t=o.current;t&&(0,P.microTask)(()=>{if(!d.current)return;let o=null==n?void 0:n.activeElement;if(null!=r&&r.current){if((null==r?void 0:r.current)===o){l.current=o;return}}else if(t.contains(o)){l.current=o;return}if(null!=r&&r.current)(0,R.focusElement)(r.current);else{if(16&e){if((0,R.focusIn)(t,R.Focus.First|R.Focus.AutoFocus)!==R.FocusResult.Error)return}else if((0,R.focusIn)(t,R.Focus.First)!==R.FocusResult.Error)return;if(null!=s&&s.current&&((0,R.focusElement)(s.current),(null==n?void 0:n.activeElement)===s.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}l.current=null==n?void 0:n.activeElement})},[s,c,e]),l}(u,{ownerDocument:f,container:n,initialFocus:r,initialFocusFallback:c});!function(e,t){let{ownerDocument:n,container:o,containers:a,previousActiveElement:r}=t,i=(0,k.useIsMounted)(),l=!!(4&e);(0,s.useEventListener)(null==n?void 0:n.defaultView,"focus",e=>{if(!l||!i.current)return;let t=S(a);o.current instanceof HTMLElement&&t.add(o.current);let n=r.current;if(!n)return;let s=e.target;s&&s instanceof HTMLElement?A(t,s)?(r.current=s,(0,R.focusElement)(s)):(e.preventDefault(),e.stopPropagation(),(0,R.focusElement)(n)):(0,R.focusElement)(r.current)},!0)}(u,{ownerDocument:f,container:n,containers:d,previousActiveElement:x});let v=(0,_.useTabDirection)(),b=(0,l.useEvent)(e=>{let t=n.current;t&&(0,w.match)(v.current,{[_.Direction.Forwards]:()=>{(0,R.focusIn)(t,R.Focus.First,{skipElements:[e.relatedTarget,c]})},[_.Direction.Backwards]:()=>{(0,R.focusIn)(t,R.Focus.Last,{skipElements:[e.relatedTarget,c]})}})}),y=(0,i.useIsTopLayer)(!!(2&u),"focus-trap#tab-lock"),j=(0,N.useDisposables)(),I=(0,a.useRef)(!1),L=(0,C.useRender)();return a.default.createElement(a.default.Fragment,null,y&&a.default.createElement(F.Hidden,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:b,features:F.HiddenFeatures.Focusable}),L({ourProps:{ref:o,onKeyDown(e){"Tab"==e.key&&(I.current=!0,j.requestAnimationFrame(()=>{I.current=!1}))},onBlur(e){if(!(4&u))return;let t=S(d);n.current instanceof HTMLElement&&t.add(n.current);let o=e.relatedTarget;o instanceof HTMLElement&&"true"!==o.dataset.headlessuiFocusGuard&&(A(t,o)||(I.current?(0,R.focusIn)(n.current,(0,w.match)(v.current,{[_.Direction.Forwards]:()=>R.Focus.Next,[_.Direction.Backwards]:()=>R.Focus.Previous})|R.Focus.WrapAround,{relativeTo:e.target}):e.target instanceof HTMLElement&&(0,R.focusElement)(e.target)))}},theirProps:p,defaultTag:"div",name:"FocusTrap"}),y&&a.default.createElement(F.Hidden,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:b,features:F.HiddenFeatures.Focusable}))}),{features:I});function A(e,t){for(let n of e)if(n.contains(t))return!0;return!1}var M=e.i(642330),O=e.i(157169),B=((n=B||{})[n.Open=0]="Open",n[n.Closed=1]="Closed",n),H=((o=H||{})[o.SetTitleId=0]="SetTitleId",o);let z={0:(e,t)=>e.titleId===t.id?e:{...e,titleId:t.id}},V=(0,a.createContext)(null);function q(e){let t=(0,a.useContext)(V);if(null===t){let t=Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,q),t}return t}function U(e,t){return(0,w.match)(t.type,z,e,t)}V.displayName="DialogContext";let W=(0,C.forwardRefWithAs)(function(e,t){let n=(0,a.useId)(),{id:o=`headlessui-dialog-${n}`,open:w,onClose:N,initialFocus:k,role:E="dialog",autoFocus:_=!0,__demoMode:D=!1,unmount:F=!1,...T}=e,R=(0,a.useRef)(!1);E="dialog"===E||"alertdialog"===E?E:(R.current||(R.current=!0,console.warn(`Invalid role [${E}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog");let P=(0,b.useOpenClosed)();void 0===w&&null!==P&&(w=(P&b.State.Open)===b.State.Open);let S=(0,a.useRef)(null),A=(0,h.useSyncRefs)(S,t),O=(0,m.useOwnerDocument)(S),B=+!w,[H,z]=(0,a.useReducer)(U,{titleId:null,descriptionId:null,panelRef:(0,a.createRef)()}),q=(0,l.useEvent)(()=>N(!1)),W=(0,l.useEvent)(e=>z({type:0,id:e})),G=!!(0,g.useServerHandoffComplete)()&&0===B,[K,X]=(0,M.useNestedPortals)(),Z=(0,f.useMainTreeNode)(),{resolveContainers:J}=(0,f.useRootContainers)({mainTreeNode:Z,portals:K,defaultContainers:[{get current(){var Q;return null!=(Q=H.panelRef.current)?Q:S.current}}]}),ee=null!==P&&(P&b.State.Closing)===b.State.Closing;(0,c.useInertOthers)(!D&&!ee&&G,{allowed:(0,l.useEvent)(()=>{var e,t;return[null!=(t=null==(e=S.current)?void 0:e.closest("[data-headlessui-portal]"))?t:null]}),disallowed:(0,l.useEvent)(()=>{var e;return[null!=(e=null==Z?void 0:Z.closest("body > *:not(#headlessui-portal-root)"))?e:null]})}),(0,p.useOutsideClick)(G,J,e=>{e.preventDefault(),q()}),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"u">typeof document?document.defaultView:null,n=arguments.length>2?arguments[2]:void 0,o=(0,i.useIsTopLayer)(e,"escape");(0,s.useEventListener)(t,"keydown",e=>{o&&(e.defaultPrevented||e.key===r.Keys.Escape&&n(e))})}(G,null==O?void 0:O.defaultView,e=>{e.preventDefault(),e.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur(),q()}),(0,x.useScrollLock)(!D&&!ee&&G,O,J),(0,u.useOnDisappear)(G,S,q);let[et,en]=(0,j.useDescriptions)(),eo=(0,a.useMemo)(()=>[{dialogState:B,close:q,setTitleId:W,unmount:F},H],[B,H,q,W,F]),ea=(0,a.useMemo)(()=>({open:0===B}),[B]),er={ref:A,id:o,role:E,tabIndex:-1,"aria-modal":D?void 0:0===B||void 0,"aria-labelledby":H.titleId,"aria-describedby":et,unmount:F},es=!function(){var e;let[t]=(0,a.useState)(()=>"u">typeof window&&"function"==typeof window.matchMedia?window.matchMedia("(pointer: coarse)"):null),[n,o]=(0,a.useState)(null!=(e=null==t?void 0:t.matches)&&e);return(0,d.useIsoMorphicEffect)(()=>{if(t)return t.addEventListener("change",e),()=>t.removeEventListener("change",e);function e(e){o(e.matches)}},[t]),n}(),ei=I.None;G&&!D&&(ei|=I.RestoreFocus,ei|=I.TabLock,_&&(ei|=I.AutoFocus),es&&(ei|=I.InitialFocus));let el=(0,C.useRender)();return a.default.createElement(b.ResetOpenClosedProvider,null,a.default.createElement(y.ForcePortalRoot,{force:!0},a.default.createElement(M.Portal,null,a.default.createElement(V.Provider,{value:eo},a.default.createElement(M.PortalGroup,{target:S},a.default.createElement(y.ForcePortalRoot,{force:!1},a.default.createElement(en,{slot:ea},a.default.createElement(X,null,a.default.createElement(L,{initialFocus:k,initialFocusFallback:S,containers:J,features:ei},a.default.createElement(v.CloseProvider,{value:q},el({ourProps:er,theirProps:T,slot:ea,defaultTag:$,features:Y,visible:0===B,name:"Dialog"})))))))))))}),$="div",Y=C.RenderFeatures.RenderStrategy|C.RenderFeatures.Static,G=(0,C.forwardRefWithAs)(function(e,t){let{transition:n=!1,open:o,...r}=e,s=(0,b.useOpenClosed)(),i=e.hasOwnProperty("open")||null!==s,l=e.hasOwnProperty("onClose");if(!i&&!l)throw Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!i)throw Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!s&&"boolean"!=typeof e.open)throw Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if("function"!=typeof e.onClose)throw Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(void 0!==o||n)&&!r.static?a.default.createElement(f.MainTreeProvider,null,a.default.createElement(O.Transition,{show:o,transition:n,unmount:r.unmount},a.default.createElement(W,{ref:t,...r}))):a.default.createElement(f.MainTreeProvider,null,a.default.createElement(W,{ref:t,open:o,...r}))}),K=(0,C.forwardRefWithAs)(function(e,t){let n=(0,a.useId)(),{id:o=`headlessui-dialog-panel-${n}`,transition:r=!1,...s}=e,[{dialogState:i,unmount:c},d]=q("Dialog.Panel"),u=(0,h.useSyncRefs)(t,d.panelRef),p=(0,a.useMemo)(()=>({open:0===i}),[i]),m=(0,l.useEvent)(e=>{e.stopPropagation()}),f=r?O.TransitionChild:a.Fragment,x=(0,C.useRender)();return a.default.createElement(f,{...r?{unmount:c}:{}},x({ourProps:{ref:u,id:o,onClick:m},theirProps:s,slot:p,defaultTag:"div",name:"Dialog.Panel"}))}),X=(0,C.forwardRefWithAs)(function(e,t){let{transition:n=!1,...o}=e,[{dialogState:r,unmount:s}]=q("Dialog.Backdrop"),i=(0,a.useMemo)(()=>({open:0===r}),[r]),l=n?O.TransitionChild:a.Fragment,c=(0,C.useRender)();return a.default.createElement(l,{...n?{unmount:s}:{}},c({ourProps:{ref:t,"aria-hidden":!0},theirProps:o,slot:i,defaultTag:"div",name:"Dialog.Backdrop"}))}),Z=(0,C.forwardRefWithAs)(function(e,t){let n=(0,a.useId)(),{id:o=`headlessui-dialog-title-${n}`,...r}=e,[{dialogState:s,setTitleId:i}]=q("Dialog.Title"),l=(0,h.useSyncRefs)(t);(0,a.useEffect)(()=>(i(o),()=>i(null)),[o,i]);let c=(0,a.useMemo)(()=>({open:0===s}),[s]);return(0,C.useRender)()({ourProps:{ref:l,id:o},theirProps:r,slot:c,defaultTag:"h2",name:"Dialog.Title"})}),J=(j.Description,Object.assign(G,{Panel:K,Title:Z,Description:j.Description}));e.s(["Dialog",()=>J,"DialogBackdrop",()=>X,"DialogPanel",()=>K,"DialogTitle",()=>Z],551193)},21151,e=>{"use strict";var t=e.i(563199),n=e.i(551193),o=e.i(157169),a=e.i(837699),r=e.i(124836),s=e.i(268255),i=e.i(935139);function l(e){let{className:l,wrapperClassName:c,containerClassName:d,isShow:u,onClose:p=r.noop,title:m,description:f,children:x,closable:g=!1,overflowVisible:h=!1,highPriority:v=!1,overlayOpacity:b=!1,clickOutsideNotClose:y=!1}=e;return(0,t.jsx)(o.Transition,{appear:!0,show:u,as:s.Fragment,children:(0,t.jsxs)(n.Dialog,{as:"div",className:(0,i.cn)("relative",v?"z-[1100]":"z-[60]",c),onClose:y?r.noop:p,children:[(0,t.jsx)(o.TransitionChild,{children:(0,t.jsx)("div",{className:(0,i.cn)("fixed inset-0",b?"bg-workflow-canvas-canvas-overlay":"bg-background-overlay","duration-300 ease-in data-[closed]:opacity-0","data-[enter]:opacity-100","data-[leave]:opacity-0")})}),(0,t.jsx)("div",{className:"fixed inset-0 overflow-y-auto",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,t.jsx)("div",{className:(0,i.cn)("flex min-h-full items-center justify-center p-4 text-center",d),children:(0,t.jsx)(o.TransitionChild,{children:(0,t.jsxs)(n.DialogPanel,{className:(0,i.cn)("relative w-full max-w-[480px] rounded-2xl bg-components-panel-bg p-6 text-left align-middle shadow-xl transition-all",h?"overflow-visible":"overflow-hidden","duration-100 ease-in data-[closed]:scale-95 data-[closed]:opacity-0","data-[enter]:scale-100 data-[enter]:opacity-100","data-[enter]:scale-95 data-[leave]:opacity-0",l),children:[!!m&&(0,t.jsx)(n.DialogTitle,{as:"h3",className:"title-2xl-semi-bold text-text-primary",children:m}),!!f&&(0,t.jsx)("div",{className:"body-md-regular mt-2 text-text-secondary",children:f}),g&&(0,t.jsx)("div",{className:"absolute right-6 top-6 z-10 flex h-5 w-5 items-center justify-center rounded-2xl hover:cursor-pointer hover:bg-state-base-hover",children:(0,t.jsx)(a.RiCloseLine,{className:"h-4 w-4 text-text-tertiary",onClick:e=>{e.stopPropagation(),p()}})}),x]})})})})]})})}e.s(["default",()=>l])},410893,e=>{"use strict";var t=e.i(797181);e.s(["ArrowUpRight",()=>t.default])},462505,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{id:"book-open-01"},children:[{type:"element",name:"path",attributes:{id:"Fill",opacity:"0.12",d:"M1 3.1C1 2.53995 1 2.25992 1.10899 2.04601C1.20487 1.85785 1.35785 1.70487 1.54601 1.60899C1.75992 1.5 2.03995 1.5 2.6 1.5H2.8C3.9201 1.5 4.48016 1.5 4.90798 1.71799C5.28431 1.90973 5.59027 2.21569 5.78201 2.59202C6 3.01984 6 3.5799 6 4.7V10.5L5.94997 10.425C5.60265 9.90398 5.42899 9.64349 5.19955 9.45491C4.99643 9.28796 4.76238 9.1627 4.5108 9.0863C4.22663 9 3.91355 9 3.28741 9H2.6C2.03995 9 1.75992 9 1.54601 8.89101C1.35785 8.79513 1.20487 8.64215 1.10899 8.45399C1 8.24008 1 7.96005 1 7.4V3.1Z",fill:"currentColor"},children:[]},{type:"element",name:"path",attributes:{id:"Icon",d:"M6 10.5L5.94997 10.425C5.60265 9.90398 5.42899 9.64349 5.19955 9.45491C4.99643 9.28796 4.76238 9.1627 4.5108 9.0863C4.22663 9 3.91355 9 3.28741 9H2.6C2.03995 9 1.75992 9 1.54601 8.89101C1.35785 8.79513 1.20487 8.64215 1.10899 8.45399C1 8.24008 1 7.96005 1 7.4V3.1C1 2.53995 1 2.25992 1.10899 2.04601C1.20487 1.85785 1.35785 1.70487 1.54601 1.60899C1.75992 1.5 2.03995 1.5 2.6 1.5H2.8C3.9201 1.5 4.48016 1.5 4.90798 1.71799C5.28431 1.90973 5.59027 2.21569 5.78201 2.59202C6 3.01984 6 3.5799 6 4.7M6 10.5V4.7M6 10.5L6.05003 10.425C6.39735 9.90398 6.57101 9.64349 6.80045 9.45491C7.00357 9.28796 7.23762 9.1627 7.4892 9.0863C7.77337 9 8.08645 9 8.71259 9H9.4C9.96005 9 10.2401 9 10.454 8.89101C10.6422 8.79513 10.7951 8.64215 10.891 8.45399C11 8.24008 11 7.96005 11 7.4V3.1C11 2.53995 11 2.25992 10.891 2.04601C10.7951 1.85785 10.6422 1.70487 10.454 1.60899C10.2401 1.5 9.96005 1.5 9.4 1.5H9.2C8.07989 1.5 7.51984 1.5 7.09202 1.71799C6.71569 1.90973 6.40973 2.21569 6.21799 2.59202C6 3.01984 6 3.5799 6 4.7",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},children:[]}]}]},name:"BookOpen01"})},50874,258703,e=>{"use strict";var t=e.i(563199),n=e.i(807324),o=e.i(462505);let a=e=>{let{ref:a,...r}=e;return(0,t.jsx)(n.default,{...r,ref:a,data:o.default})};a.displayName="BookOpen01",e.s([],50874),e.s(["BookOpen01",0,a],258703)},963636,e=>{"use strict";var t=e.i(563199),n=e.i(837699),o=e.i(268255);e.i(152567);var a=e.i(408767);e.i(668763);var r=e.i(410893),s=e.i(391185),i=e.i(59375),l=e.i(296124),c=e.i(652669);e.s(["default",0,e=>{let{value:d,onChange:u}=e,{t:p}=(0,a.useTranslation)(),[m,f]=(0,o.useState)(!1),{setShowAccountSettingModal:x,setShowApiBasedExtensionModal:g}=(0,l.useModalContext)(),{data:h,refetch:v}=(0,c.useApiBasedExtensions)(),b=h?.find(e=>e.id===d);return(0,t.jsxs)(s.PortalToFollowElem,{open:m,onOpenChange:f,placement:"bottom-start",offset:4,children:[(0,t.jsx)(s.PortalToFollowElemTrigger,{onClick:()=>f(e=>!e),className:"w-full",children:b?(0,t.jsxs)("div",{className:"flex h-9 cursor-pointer items-center justify-between rounded-lg bg-components-input-bg-normal pl-3 pr-2.5",children:[(0,t.jsx)("div",{className:"text-sm text-text-primary",children:b.name}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"mr-1.5 w-[270px] truncate text-right text-xs text-text-quaternary",children:b.api_endpoint}),(0,t.jsx)(n.RiArrowDownSLine,{className:`h-4 w-4 text-text-secondary ${!m&&"opacity-60"}`})]})]}):(0,t.jsxs)("div",{className:"flex h-9 cursor-pointer items-center justify-between rounded-lg bg-components-input-bg-normal pl-3 pr-2.5 text-sm text-text-quaternary",children:[p("apiBasedExtension.selector.placeholder",{ns:"common"}),(0,t.jsx)(n.RiArrowDownSLine,{className:`h-4 w-4 text-text-secondary ${!m&&"opacity-60"}`})]})}),(0,t.jsx)(s.PortalToFollowElemContent,{className:"z-[102] w-[calc(100%-32px)] max-w-[576px]",children:(0,t.jsxs)("div",{className:"z-10 w-full rounded-lg border-[0.5px] border-components-panel-border bg-components-panel-bg shadow-lg",children:[(0,t.jsxs)("div",{className:"p-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-3 pb-1 pt-2",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-text-tertiary",children:p("apiBasedExtension.selector.title",{ns:"common"})}),(0,t.jsxs)("div",{className:"flex cursor-pointer items-center text-xs text-text-accent",onClick:()=>{f(!1),x({payload:i.ACCOUNT_SETTING_TAB.API_BASED_EXTENSION})},children:[p("apiBasedExtension.selector.manage",{ns:"common"}),(0,t.jsx)(r.ArrowUpRight,{className:"ml-0.5 h-3 w-3"})]})]}),(0,t.jsx)("div",{className:"max-h-[250px] overflow-y-auto",children:h?.map(e=>(0,t.jsxs)("div",{className:"w-full cursor-pointer rounded-md px-3 py-1.5 text-left hover:stroke-state-base-hover",onClick:()=>{u(e.id),f(!1)},children:[(0,t.jsx)("div",{className:"text-sm text-text-primary",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-text-tertiary",children:e.api_endpoint})]},e.id))})]}),(0,t.jsx)("div",{className:"h-px bg-divider-regular"}),(0,t.jsx)("div",{className:"p-1",children:(0,t.jsxs)("div",{className:"flex h-8 cursor-pointer items-center px-3 text-sm text-text-accent",onClick:()=>{f(!1),g({payload:{},onSaveCallback:()=>v()})},children:[(0,t.jsx)(n.RiAddLine,{className:"mr-2 h-4 w-4"}),p("operation.add",{ns:"common"})]})})]})})]})}])},740083,e=>{"use strict";var t=e.i(563199),n=e.i(299951),o=e.i(873517),a=e.i(683257);e.s(["default",0,e=>{let{forms:r,value:s,onChange:i}=e,l=(0,a.useLocale)(),c=(e,t)=>{i({...s,[e]:t})};return(0,t.jsx)(t.Fragment,{children:r.map((e,a)=>(0,t.jsxs)("div",{className:"py-2",children:[(0,t.jsx)("div",{className:"flex h-9 items-center text-sm font-medium text-text-primary",children:"zh-Hans"===l?e.label["zh-Hans"]:e.label["en-US"]}),"text-input"===e.type&&(0,t.jsx)("input",{value:s?.[e.variable]||"",className:"block h-9 w-full appearance-none rounded-lg bg-components-input-bg-normal px-3 text-sm text-text-primary outline-none",placeholder:e.placeholder,onChange:t=>c(e.variable,t.target.value)}),"paragraph"===e.type&&(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)(o.default,{className:"resize-none",value:s?.[e.variable]||"",placeholder:e.placeholder,onChange:t=>c(e.variable,t.target.value)})}),"select"===e.type&&(0,t.jsx)(n.PortalSelect,{value:s?.[e.variable],items:e.options.map(e=>({name:e.label["zh-Hans"===l?"zh-Hans":"en-US"],value:e.value})),onSelect:t=>c(e.variable,t.value),popupClassName:"w-[576px] !z-[102]"})]},a))})}])},139574,e=>{"use strict";var t=e.i(563199),n=e.i(837699),o=e.i(124836),a=e.i(268255);e.i(152567);var r=e.i(408767),s=e.i(151094),i=e.i(757198);e.i(50874);var l=e.i(258703);e.i(47690);var c=e.i(218043),c=c,d=e.i(21151),u=e.i(137667),p=e.i(963636),m=e.i(59375),f=e.i(739255),x=e.i(683257),g=e.i(296124),h=e.i(491234),v=e.i(652669),b=e.i(935139),y=e.i(740083),w=e.i(260484);let C=e=>{let{title:n,info:o,showPreset:a=!0,config:s,onConfigChange:i}=e,{t:l}=(0,r.useTranslation)(),c=(e,t)=>{"preset_response"===e&&"string"==typeof t&&(t=t.slice(0,100)),i({...s,[e]:t})};return(0,t.jsx)("div",{className:"py-2",children:(0,t.jsxs)("div",{className:"rounded-lg border border-components-panel-border bg-components-panel-bg",children:[(0,t.jsxs)("div",{className:"flex h-10 items-center justify-between rounded-lg px-3",children:[(0,t.jsx)("div",{className:"shrink-0 text-sm font-medium text-text-primary",children:n}),(0,t.jsxs)("div",{className:"flex grow items-center justify-end",children:[o&&(0,t.jsx)("div",{className:"mr-2 truncate text-xs text-text-tertiary",title:o,children:o}),(0,t.jsx)(w.default,{size:"l",defaultValue:s.enabled,onChange:e=>c("enabled",e)})]})]}),s.enabled&&a&&(0,t.jsxs)("div",{className:"rounded-lg bg-components-panel-bg px-3 pb-3 pt-1",children:[(0,t.jsxs)("div",{className:"flex h-8 items-center justify-between text-[13px] font-medium text-text-secondary",children:[l("feature.moderation.modal.content.preset",{ns:"appDebug"}),(0,t.jsx)("span",{className:"text-xs font-normal text-text-tertiary",children:l("feature.moderation.modal.content.supportMarkdown",{ns:"appDebug"})})]}),(0,t.jsxs)("div",{className:"relative h-20 rounded-lg bg-components-input-bg-normal px-3 py-2",children:[(0,t.jsx)("textarea",{value:s.preset_response||"",className:"block h-full w-full resize-none appearance-none bg-transparent text-sm text-text-secondary outline-none",placeholder:l("feature.moderation.modal.content.placeholder",{ns:"appDebug"})||"",onChange:e=>c("preset_response",e.target.value)}),(0,t.jsxs)("div",{className:"absolute bottom-2 right-2 flex h-5 items-center rounded-md bg-background-section px-1 text-xs font-medium text-text-quaternary",children:[(0,t.jsx)("span",{children:(s.preset_response||"").length}),"/",(0,t.jsx)("span",{className:"text-text-tertiary",children:"100"})]})]})]})]})})},j=["openai_moderation","keywords","api"];e.s(["default",0,e=>{let{data:w,onCancel:N,onSave:k}=e,{t:E}=(0,r.useTranslation)(),_=(0,x.useDocLink)(),{notify:D}=(0,u.useToastContext)(),F=(0,x.useLocale)(),{data:T,isPending:R,refetch:P}=(0,v.useModelProviders)(),[S,I]=(0,a.useState)(w),{setShowAccountSettingModal:L}=(0,g.useModalContext)(),{data:A}=(0,v.useCodeBasedExtensions)("moderation"),M=T?.data.find(e=>"langgenius/openai/openai"===e.provider),O=M?.system_configuration.enabled?M?.system_configuration.quota_configurations.find(e=>e.quota_type===M.system_configuration.current_quota_type):void 0,B=O?.is_valid,H=M?.custom_configuration.status===f.CustomConfigurationStatusEnum.active||B,z=[{key:"openai_moderation",name:E("feature.moderation.modal.provider.openai",{ns:"appDebug"})},{key:"keywords",name:E("feature.moderation.modal.provider.keywords",{ns:"appDebug"})},{key:"api",name:E("apiBasedExtension.selector.title",{ns:"common"})},...A?A.data.map(e=>({key:e.name,name:"zh-Hans"===F?e.label["zh-Hans"]:e.label["en-US"],form_schema:e.form_schema})):[]],V=z.find(e=>e.key===S.type),q=(e,t)=>{I({...S,config:{...S.config,[e]:t}})};return(0,t.jsxs)(d.default,{isShow:!0,onClose:o.noop,className:"!mt-14 !w-[600px] !max-w-none !p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"title-2xl-semi-bold text-text-primary",children:E("feature.moderation.modal.title",{ns:"appDebug"})}),(0,t.jsx)("div",{className:"cursor-pointer p-1",onClick:N,children:(0,t.jsx)(n.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})})]}),(0,t.jsxs)("div",{className:"py-2",children:[(0,t.jsx)("div",{className:"text-sm font-medium leading-9 text-text-primary",children:E("feature.moderation.modal.provider.title",{ns:"appDebug"})}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2.5",children:z.map(e=>(0,t.jsxs)("div",{className:(0,b.cn)("system-sm-regular flex h-8 cursor-default items-center rounded-md border border-components-option-card-option-border bg-components-option-card-option-bg px-2 text-text-secondary",S.type!==e.key&&"cursor-pointer hover:border-components-option-card-option-border-hover hover:bg-components-option-card-option-bg-hover hover:shadow-xs",S.type===e.key&&"system-sm-medium border-[1.5px] border-components-option-card-option-selected-border bg-components-option-card-option-selected-bg shadow-xs","openai_moderation"===S.type&&"openai_moderation"===e.key&&!H&&"text-text-disabled"),onClick:()=>{var t;let n,o;return t=e.key,o=z.find(e=>e.key===t),void(0>j.findIndex(e=>e===t)&&o?.form_schema&&(n=o?.form_schema.reduce((e,t)=>(e[t.variable]=t.default,e),{})),I({...S,type:t,config:n}))},children:[(0,t.jsx)("div",{className:(0,b.cn)("mr-2 h-4 w-4 rounded-full border border-components-radio-border bg-components-radio-bg shadow-xs",S.type===e.key&&"border-[5px] border-components-radio-border-checked")}),e.name]},e.key))}),!R&&!H&&"openai_moderation"===S.type&&(0,t.jsxs)("div",{className:"mt-2 flex items-center rounded-lg border border-[#FEF0C7] bg-[#FFFAEB] px-3 py-2",children:[(0,t.jsx)(c.default,{className:"mr-1 h-4 w-4 text-[#F79009]"}),(0,t.jsxs)("div",{className:"flex items-center text-xs font-medium text-gray-700",children:[E("feature.moderation.modal.openaiNotConfig.before",{ns:"appDebug"}),(0,t.jsxs)("span",{className:"cursor-pointer text-primary-600",onClick:()=>{L({payload:m.ACCOUNT_SETTING_TAB.PROVIDER,onCancelCallback:()=>{P()}})},children:[" ",E("settings.provider",{ns:"common"})," "]}),E("feature.moderation.modal.openaiNotConfig.after",{ns:"appDebug"})]})]})]}),"keywords"===S.type&&(0,t.jsxs)("div",{className:"py-2",children:[(0,t.jsx)("div",{className:"mb-1 text-sm font-medium text-text-primary",children:E("feature.moderation.modal.provider.keywords",{ns:"appDebug"})}),(0,t.jsx)("div",{className:"mb-2 text-xs text-text-tertiary",children:E("feature.moderation.modal.keywords.tip",{ns:"appDebug"})}),(0,t.jsxs)("div",{className:"relative h-[88px] rounded-lg bg-components-input-bg-normal px-3 py-2",children:[(0,t.jsx)("textarea",{value:S.config?.keywords||"",onChange:e=>{let t=e.target.value.split("\n").reduce((e,t)=>(""!==t&&e.push(t.slice(0,100)),""===t&&""!==e[e.length-1]&&e.push(t),e),[]);I({...S,config:{...S.config,keywords:t.slice(0,100).join("\n")}})},className:"block h-full w-full resize-none appearance-none bg-transparent text-sm text-text-secondary outline-none",placeholder:E("feature.moderation.modal.keywords.placeholder",{ns:"appDebug"})||""}),(0,t.jsxs)("div",{className:"absolute bottom-2 right-2 flex h-5 items-center rounded-md bg-background-section px-1 text-xs font-medium text-text-quaternary",children:[(0,t.jsx)("span",{children:(S.config?.keywords||"").split("\n").filter(Boolean).length}),"/",(0,t.jsxs)("span",{className:"text-text-tertiary",children:["100",E("feature.moderation.modal.keywords.line",{ns:"appDebug"})]})]})]})]}),"api"===S.type&&(0,t.jsxs)("div",{className:"py-2",children:[(0,t.jsxs)("div",{className:"flex h-9 items-center justify-between",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-text-primary",children:E("apiBasedExtension.selector.title",{ns:"common"})}),(0,t.jsxs)("a",{href:_("/use-dify/workspace/api-extension/api-extension"),target:"_blank",rel:"noopener noreferrer",className:"group flex items-center text-xs text-text-tertiary hover:text-primary-600",children:[(0,t.jsx)(l.BookOpen01,{className:"mr-1 h-3 w-3 text-text-tertiary group-hover:text-primary-600"}),E("apiBasedExtension.link",{ns:"common"})]})]}),(0,t.jsx)(p.default,{value:S.config?.api_based_extension_id||"",onChange:e=>{I({...S,config:{...S.config,api_based_extension_id:e}})}})]}),0>j.findIndex(e=>e===S.type)&&V?.form_schema&&(0,t.jsx)(y.default,{forms:V?.form_schema,value:S.config,onChange:e=>{I({...S,config:{...S.config,...e}})}}),(0,t.jsx)(i.default,{bgStyle:"gradient",className:"my-3 h-px"}),(0,t.jsx)(C,{title:E("feature.moderation.modal.content.input",{ns:"appDebug"})||"",config:S.config?.inputs_config||{enabled:!1,preset_response:""},onConfigChange:e=>q("inputs_config",e),info:"api"===S.type&&E("feature.moderation.modal.content.fromApi",{ns:"appDebug"})||"",showPreset:"api"!==S.type}),(0,t.jsx)(C,{title:E("feature.moderation.modal.content.output",{ns:"appDebug"})||"",config:S.config?.outputs_config||{enabled:!1,preset_response:""},onConfigChange:e=>q("outputs_config",e),info:"api"===S.type&&E("feature.moderation.modal.content.fromApi",{ns:"appDebug"})||"",showPreset:"api"!==S.type}),(0,t.jsx)("div",{className:"mb-8 mt-1 text-xs font-medium text-text-tertiary",children:E("feature.moderation.modal.content.condition",{ns:"appDebug"})}),(0,t.jsxs)("div",{className:"flex items-center justify-end",children:[(0,t.jsx)(s.default,{onClick:N,className:"mr-2",children:E("operation.cancel",{ns:"common"})}),(0,t.jsx)(s.default,{variant:"primary",onClick:()=>{if("openai_moderation"!==S.type||H){if(!S.config?.inputs_config?.enabled&&!S.config?.outputs_config?.enabled)return void D({type:"error",message:E("feature.moderation.modal.content.condition",{ns:"appDebug"})});if("keywords"===S.type&&!S.config.keywords)return void D({type:"error",message:E("errorMessage.valueOfVarRequired",{ns:"appDebug",key:F!==h.LanguagesSupported[1]?"keywords":"关键词"})});if("api"===S.type&&!S.config.api_based_extension_id)return void D({type:"error",message:E("errorMessage.valueOfVarRequired",{ns:"appDebug",key:F!==h.LanguagesSupported[1]?"API Extension":"API 扩展"})});if(0>j.findIndex(e=>e===S.type)&&V?.form_schema){for(let e=0;e<V.form_schema.length;e++)if(!S.config?.[V.form_schema[e].variable]&&V.form_schema[e].required)return void D({type:"error",message:E("errorMessage.valueOfVarRequired",{ns:"appDebug",key:F!==h.LanguagesSupported[1]?V.form_schema[e].label["en-US"]:V.form_schema[e].label["zh-Hans"]})})}if(S.config.inputs_config?.enabled&&!S.config.inputs_config.preset_response&&"api"!==S.type||S.config.outputs_config?.enabled&&!S.config.outputs_config.preset_response&&"api"!==S.type)return void D({type:"error",message:E("feature.moderation.modal.content.errorMessage",{ns:"appDebug"})});k((e=>{let{enabled:t,type:n,config:o}=e,{inputs_config:a,outputs_config:r}=o,s={};return"keywords"===n&&(s.keywords=o?.keywords),"api"===n&&(s.api_based_extension_id=o?.api_based_extension_id),0>j.findIndex(e=>e===n)&&V?.form_schema&&V.form_schema.forEach(e=>{s[e.variable]=o?.[e.variable]}),{type:n,enabled:t,config:{inputs_config:a||{enabled:!1},outputs_config:r||{enabled:!1},...s}}})(S))}},disabled:"openai_moderation"===S.type&&!H,children:E("operation.save",{ns:"common"})})]})]})}],139574)},157154,e=>{e.n(e.i(139574))}]);