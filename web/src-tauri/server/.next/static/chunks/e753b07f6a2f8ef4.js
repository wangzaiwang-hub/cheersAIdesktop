(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,521632,e=>{"use strict";var t=e.i(563199),r=e.i(551193),s=e.i(716042);e.i(152567);var n=e.i(408767),a=e.i(935139),i=e.i(151094);function o(e){let{title:o="",description:l="",dialogClassName:d="",dialogBackdropClassName:c="",containerClassName:u="",panelClassName:p="",children:m,footer:h,mask:f=!0,positionCenter:x,showClose:g=!1,isOpen:v,clickOutsideNotOpen:b,onClose:y,onCancel:j,onOk:w,unmount:N=!1,noOverlay:C=!1}=e,{t:k}=(0,n.useTranslation)();return(0,t.jsx)(r.Dialog,{unmount:N,open:v,onClose:()=>{b||y()},className:(0,a.cn)("fixed inset-0 z-[30] overflow-y-auto",d),children:(0,t.jsxs)("div",{className:(0,a.cn)("flex h-screen w-screen justify-end",x&&"!justify-center",u),children:[!C&&(0,t.jsx)(r.DialogBackdrop,{className:(0,a.cn)("fixed inset-0 z-[40]",f&&"bg-black/30",c),onClick:()=>{b||y()}}),(0,t.jsxs)("div",{className:(0,a.cn)("relative z-[50] flex w-full max-w-sm flex-col justify-between overflow-hidden bg-components-panel-bg p-6 text-left align-middle shadow-xl",p),children:[(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[o&&(0,t.jsx)(r.DialogTitle,{as:"h3",className:"text-lg font-medium leading-6 text-text-primary",children:o}),g&&(0,t.jsx)(r.DialogTitle,{className:"mb-4 flex cursor-pointer items-center",as:"div",children:(0,t.jsx)(s.XMarkIcon,{className:"h-4 w-4 text-text-tertiary",onClick:y})})]}),l&&(0,t.jsx)("div",{className:"mt-2 text-xs font-normal text-text-tertiary",children:l}),m]}),h||(null===h?null:(0,t.jsxs)("div",{className:"mt-10 flex flex-row justify-end",children:[(0,t.jsx)(i.default,{className:"mr-2",onClick:()=>{j?.()},children:k("operation.cancel",{ns:"common"})}),(0,t.jsx)(i.default,{onClick:()=>{w?.()},children:k("operation.save",{ns:"common"})})]}))]})]})})}e.s(["default",()=>o])},288243,479147,56505,429524,99443,4206,698589,861450,324097,53339,327381,677231,e=>{"use strict";var t=e.i(563199),r=e.i(807324);e.i(842233);var s=e.i(369016);let n=e=>{let{ref:n,...a}=e;return(0,t.jsx)(r.default,{...a,ref:n,data:s.default})};n.displayName="ArrowDownRoundFill",e.s(["default",0,n],479147);var a=e.i(56595);let i=e=>{let{ref:s,...n}=e;return(0,t.jsx)(r.default,{...n,ref:s,data:a.default})};i.displayName="CheckCircle",e.s(["default",0,i],56505),e.i(801705);var o=e.i(273676);let l=e=>{let{ref:s,...n}=e;return(0,t.jsx)(r.default,{...n,ref:s,data:o.default})};l.displayName="Download02",e.s(["default",0,l],429524);var d=e.i(641818);let c=e=>{let{ref:s,...n}=e;return(0,t.jsx)(r.default,{...n,ref:s,data:d.default})};c.displayName="Edit03",e.s(["default",0,c],99443),e.i(241070);var u=e.i(672227);let p=e=>{let{ref:s,...n}=e;return(0,t.jsx)(r.default,{...n,ref:s,data:u.default})};p.displayName="Eye",e.s(["default",0,p],4206);var m=e.i(909660);let h=e=>{let{ref:s,...n}=e;return(0,t.jsx)(r.default,{...n,ref:s,data:m.default})};h.displayName="Github",e.s(["default",0,h],698589);var f=e.i(574125);let x=e=>{let{ref:s,...n}=e;return(0,t.jsx)(r.default,{...n,ref:s,data:f.default})};x.displayName="MessageClockCircle",e.s(["default",0,x],861450),e.i(420186),e.i(870018),e.i(722390);var g=e.i(460261);let v=e=>{let{ref:s,...n}=e;return(0,t.jsx)(r.default,{...n,ref:s,data:g.default})};v.displayName="Target04",e.s(["default",0,v],324097);var b=e.i(620879);let y=e=>{let{ref:s,...n}=e;return(0,t.jsx)(r.default,{...n,ref:s,data:b.default})};y.displayName="Tool03",e.s(["default",0,y],53339);var j=e.i(485919);let w=e=>{let{ref:s,...n}=e;return(0,t.jsx)(r.default,{...n,ref:s,data:j.default})};w.displayName="XCircle",e.s(["default",0,w],327381);var N=e.i(995711);let C=e=>{let{ref:s,...n}=e;return(0,t.jsx)(r.default,{...n,ref:s,data:N.default})};C.displayName="ZapFast",e.s(["default",0,C],677231),e.i(481054),e.s([],288243)},744256,e=>{"use strict";var t=e.i(327381);e.s(["XCircle",()=>t.default])},117960,262531,403033,538868,506033,790064,171132,896071,e=>{"use strict";var t=e.i(563199),r=e.i(268255),s=e.i(391185),n=e.i(935139),a=e.i(225162);e.i(152567);var i=e.i(408767),o=e.i(807324),l=e.i(378389);let d=e=>{let{ref:r,...s}=e;return(0,t.jsx)(o.default,{...s,ref:r,data:l.default})};d.displayName="AlertTriangle",e.i(15336);var c=e.i(591206);let u=e=>{let{ref:r,...s}=e;return(0,t.jsx)(o.default,{...s,ref:r,data:c.default})};u.displayName="ThumbsUp",e.s(["default",0,u],262531);var p=e.i(884106);let m=e=>{let{ref:r,...s}=e;return(0,t.jsx)(o.default,{...s,ref:r,data:p.default})};m.displayName="Warning",e.s(["default",0,m],403033),e.s([],538868),e.s(["AlertTriangle",0,d],506033);var h=e.i(421001),f=e.i(56971),x=e.i(722591);let g=e=>{let{modelName:r,providerName:s,className:a,showWarnIcon:o,contentClassName:l}=e,{t:c}=(0,i.useTranslation)(),{modelProviders:u}=(0,f.useProviderContext)(),p=u.find(e=>e.provider===s);return(0,t.jsx)("div",{className:(0,n.cn)("group box-content flex h-8 grow cursor-pointer items-center gap-1 rounded-lg bg-components-input-bg-disabled p-[3px] pl-1",a),children:(0,t.jsxs)("div",{className:(0,n.cn)("flex w-full items-center",l),children:[(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-1 py-[1px]",children:[(0,t.jsx)(x.default,{className:"h-4 w-4",provider:p,modelName:r}),(0,t.jsx)("div",{className:"system-sm-regular truncate text-components-input-text-filled",children:r})]}),(0,t.jsx)("div",{className:"flex shrink-0 items-center justify-center",children:o&&(0,t.jsx)(h.default,{popupContent:c("modelProvider.deprecated",{ns:"common"}),children:(0,t.jsx)(d,{className:"h-4 w-4 text-text-warning-secondary"})})})]})})};var v=e.i(837699),b=e.i(401966);let y=e=>{let{ref:r,...s}=e;return(0,t.jsx)(o.default,{...s,ref:r,data:b.default})};y.displayName="CubeOutline",e.s([],790064),e.s(["CubeOutline",0,y],171132);let j=e=>{let{open:r,className:s}=e,{t:a}=(0,i.useTranslation)();return(0,t.jsxs)("div",{className:(0,n.cn)("flex cursor-pointer items-center gap-0.5 rounded-lg bg-components-input-bg-normal p-1 hover:bg-components-input-bg-hover",r&&"bg-components-input-bg-hover",s),children:[(0,t.jsxs)("div",{className:"flex grow items-center",children:[(0,t.jsx)("div",{className:"mr-1.5 flex h-4 w-4 items-center justify-center rounded-[5px] border border-dashed border-divider-regular",children:(0,t.jsx)(y,{className:"h-3 w-3 text-text-quaternary"})}),(0,t.jsx)("div",{className:"truncate text-[13px] text-text-tertiary",title:"Configure model",children:a("detailPanel.configureModel",{ns:"plugin"})})]}),(0,t.jsx)("div",{className:"flex h-4 w-4 shrink-0 items-center justify-center",children:(0,t.jsx)(v.RiEqualizer2Line,{className:"h-3.5 w-3.5 text-text-tertiary"})})]})};var w=e.i(739255),N=e.i(540284);let C=e=>{let{open:r,provider:s,model:i,className:o,readonly:l}=e,c=(0,a.useLanguage)();return(0,t.jsxs)("div",{className:(0,n.cn)("group flex h-8 items-center gap-0.5 rounded-lg bg-components-input-bg-normal p-1",!l&&"cursor-pointer hover:bg-components-input-bg-hover",r&&"bg-components-input-bg-hover",i.status!==w.ModelStatusEnum.active&&"bg-components-input-bg-disabled hover:bg-components-input-bg-disabled",o),children:[(0,t.jsx)(x.default,{className:"p-0.5",provider:s,modelName:i.model}),(0,t.jsxs)("div",{className:"flex grow items-center gap-1 truncate px-1 py-[3px]",children:[(0,t.jsx)(N.default,{className:"grow",modelItem:i,showMode:!0,showFeatures:!0}),!l&&(0,t.jsx)("div",{className:"flex h-4 w-4 shrink-0 items-center justify-center",children:i.status!==w.ModelStatusEnum.active?(0,t.jsx)(h.default,{popupContent:w.MODEL_STATUS_TEXT[i.status][c],children:(0,t.jsx)(d,{className:"h-4 w-4 text-text-warning-secondary"})}):(0,t.jsx)(v.RiArrowDownSLine,{className:"h-3.5 w-3.5 text-text-tertiary"})})]})]})};e.i(288243);var k=e.i(744256),_=e.i(388558),E=e.i(59375),L=e.i(296124);let T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!!e&&!!e.length&&e.some(e=>[w.ModelFeatureEnum.toolCall,w.ModelFeatureEnum.multiToolCall,w.ModelFeatureEnum.streamToolCall].includes(e))};e.s(["supportFunctionCall",0,T],896071),e.i(47690);var S=e.i(490774),R=e.i(407098),D=e.i(750552),F=e.i(500841);let A=e=>{let{defaultModel:r,model:s,onSelect:o}=e,{t:l}=(0,i.useTranslation)(),d=(0,a.useLanguage)(),{setShowModelModal:c}=(0,L.useModalContext)(),{modelProviders:u}=(0,f.useProviderContext)(),p=(0,a.useUpdateModelList)(),m=(0,a.useUpdateModelProviders)(),g=u.find(e=>e.provider===s.provider),v=()=>{c({payload:{currentProvider:g,currentConfigurationMethod:w.ConfigurationMethodEnum.predefinedModel},onSaveCallback:()=>{m();let e=s.models[0].model_type;e&&p(e)}})};return(0,t.jsxs)("div",{className:"mb-1",children:[(0,t.jsx)("div",{className:"flex h-[22px] items-center px-3 text-xs font-medium text-text-tertiary",children:s.label[d]||s.label.en_US}),s.models.map(e=>(0,t.jsx)(h.default,{position:"right",popupClassName:"p-3 !w-[206px] bg-components-panel-bg-blur backdrop-blur-sm border-[0.5px] border-components-panel-border rounded-xl",popupContent:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,t.jsx)(x.default,{className:(0,n.cn)("h-5 w-5 shrink-0"),provider:s,modelName:e.model}),(0,t.jsx)("div",{className:"system-md-medium text-wrap break-words text-text-primary",children:e.label[d]||e.label.en_US})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[!!e.model_type&&(0,t.jsx)(R.default,{children:(0,D.modelTypeFormat)(e.model_type)}),!!e.model_properties.mode&&(0,t.jsx)(R.default,{children:e.model_properties.mode.toLocaleUpperCase()}),!!e.model_properties.context_size&&(0,t.jsx)(R.default,{children:(0,D.sizeFormat)(e.model_properties.context_size)})]}),[w.ModelTypeEnum.textGeneration,w.ModelTypeEnum.textEmbedding,w.ModelTypeEnum.rerank].includes(e.model_type)&&e.features?.some(e=>[w.ModelFeatureEnum.vision,w.ModelFeatureEnum.audio,w.ModelFeatureEnum.video,w.ModelFeatureEnum.document].includes(e))&&(0,t.jsxs)("div",{className:"pt-2",children:[(0,t.jsx)("div",{className:"system-2xs-medium-uppercase mb-1 text-text-tertiary",children:l("model.capabilities",{ns:"common"})}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.features?.map(e=>(0,t.jsx)(F.default,{feature:e,showFeaturesLabel:!0},e))})]})]}),children:(0,t.jsxs)("div",{className:(0,n.cn)("group relative flex h-8 items-center gap-1 rounded-lg px-3 py-1.5",e.status===w.ModelStatusEnum.active?"cursor-pointer hover:bg-state-base-hover":"cursor-not-allowed hover:bg-state-base-hover-alt"),onClick:()=>{var t;return t=s.provider,void(e.status===w.ModelStatusEnum.active&&o(t,e))},children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.default,{className:(0,n.cn)("h-5 w-5 shrink-0"),provider:s,modelName:e.model}),(0,t.jsx)(N.default,{className:(0,n.cn)("system-sm-medium text-text-secondary",e.status!==w.ModelStatusEnum.active&&"opacity-60"),modelItem:e})]}),r?.model===e.model&&r.provider===g.provider&&(0,t.jsx)(S.Check,{className:"h-4 w-4 shrink-0 text-text-accent"}),e.status===w.ModelStatusEnum.noConfigure&&(0,t.jsx)("div",{className:"hidden cursor-pointer text-xs font-medium text-text-accent group-hover:block",onClick:v,children:l("operation.add",{ns:"common"}).toLocaleUpperCase()})]},e.model)},e.model))]})},P=e=>{let{defaultModel:s,modelList:n,onSelect:o,scopeFeatures:l=[],onHide:d}=e,{t:c}=(0,i.useTranslation)(),u=(0,a.useLanguage)(),[p,m]=(0,r.useState)(""),{setShowAccountSettingModal:h}=(0,L.useModalContext)(),f=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=()=>{_.tooltipManager.closeActiveTooltip()},t=f.current;if(t)return t.addEventListener("scroll",e,{passive:!0}),()=>{t.removeEventListener("scroll",e)}},[]);let x=(0,r.useMemo)(()=>n.map(e=>{let t=e.models.filter(e=>void 0!==e.label[u]?e.label[u].toLowerCase().includes(p.toLowerCase()):Object.values(e.label).some(e=>e.toLowerCase().includes(p.toLowerCase()))).filter(e=>0===l.length||l.every(t=>t===w.ModelFeatureEnum.toolCall?T(e.features):e.features?.includes(t)??!1));return{...e,models:t}}).filter(e=>e.models.length>0),[u,n,l,p]);return(0,t.jsxs)("div",{ref:f,className:"max-h-[480px] w-[320px] overflow-y-auto rounded-lg border-[0.5px] border-components-panel-border bg-components-panel-bg shadow-lg",children:[(0,t.jsx)("div",{className:"sticky top-0 z-10 bg-components-panel-bg pb-1 pl-3 pr-2 pt-3",children:(0,t.jsxs)("div",{className:`
          flex h-8 items-center rounded-lg border pl-[9px] pr-[10px]
          ${p?"border-components-input-border-active bg-components-input-bg-active shadow-xs":"border-transparent bg-components-input-bg-normal"}
        `,children:[(0,t.jsx)(v.RiSearchLine,{className:`
              mr-[7px] h-[14px] w-[14px] shrink-0
              ${p?"text-text-tertiary":"text-text-quaternary"}
            `}),(0,t.jsx)("input",{className:"block h-[18px] grow appearance-none bg-transparent text-[13px] text-text-primary outline-none",placeholder:c("form.searchModel",{ns:"datasetSettings"})||"",value:p,onChange:e=>m(e.target.value)}),p&&(0,t.jsx)(k.XCircle,{className:"ml-1.5 h-[14px] w-[14px] shrink-0 cursor-pointer text-text-quaternary",onClick:()=>m("")})]})}),(0,t.jsxs)("div",{className:"p-1",children:[x.map(e=>(0,t.jsx)(A,{defaultModel:s,model:e,onSelect:o},e.provider)),!x.length&&(0,t.jsx)("div",{className:"break-all px-3 py-1.5 text-center text-xs leading-[18px] text-text-tertiary",children:`No model found for “${p}”`})]}),(0,t.jsxs)("div",{className:"sticky bottom-0 flex cursor-pointer items-center rounded-b-lg border-t border-divider-subtle bg-components-panel-bg px-4 py-2 text-text-accent-light-mode-only",onClick:()=>{d(),h({payload:E.ACCOUNT_SETTING_TAB.PROVIDER})},children:[(0,t.jsx)("span",{className:"system-xs-medium",children:c("model.settingsLink",{ns:"common"})}),(0,t.jsx)(v.RiArrowRightUpLine,{className:"ml-0.5 h-3 w-3"})]})]})};e.s(["default",0,e=>{let{defaultModel:i,modelList:o,triggerClassName:l,popupClassName:d,onSelect:c,readonly:u,scopeFeatures:p=[],deprecatedClassName:m,showDeprecatedWarnIcon:h=!1}=e,[f,x]=(0,r.useState)(!1),{currentProvider:v,currentModel:b}=(0,a.useCurrentProviderAndModel)(o,i);return(0,t.jsx)(s.PortalToFollowElem,{open:f,onOpenChange:x,placement:"bottom-start",offset:4,children:(0,t.jsxs)("div",{className:(0,n.cn)("relative"),children:[(0,t.jsxs)(s.PortalToFollowElemTrigger,{onClick:()=>{u||x(e=>!e)},className:"block",children:[b&&v&&(0,t.jsx)(C,{open:f,provider:v,model:b,className:l,readonly:u}),!b&&i&&(0,t.jsx)(g,{modelName:i?.model||"",providerName:i?.provider||"",className:l,showWarnIcon:h,contentClassName:m}),!i&&(0,t.jsx)(j,{open:f,className:l})]}),(0,t.jsx)(s.PortalToFollowElemContent,{className:`z-[1002] ${d}`,children:(0,t.jsx)(P,{defaultModel:i,modelList:o,onSelect:(e,t)=>{x(!1),c&&c({provider:e,model:t.model})},scopeFeatures:p,onHide:()=>x(!1)})})]})})}],117960)},716042,e=>{"use strict";var t=e.i(268255);let r=t.forwardRef(function(e,r){let{title:s,titleId:n,...a}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},a),s?t.createElement("title",{id:n},s):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))});e.s(["XMarkIcon",0,r],716042)},964596,e=>{"use strict";var t=e.i(563199),r=e.i(848082),s=e.i(157169),n=e.i(268255),a=e.i(935139);function i(e){let{trigger:i="hover",position:o="bottom",htmlContent:l,popupClassName:d,btnElement:c,className:u,btnClassName:p,manualClose:m,disabled:h=!1}=e,f=(0,n.useRef)(null),x=(0,n.useRef)(null),g=e=>{null!=x.current&&window.clearTimeout(x.current),e||f.current?.click()},v=e=>{x.current=window.setTimeout(()=>{e&&f.current?.click()},100)};return(0,t.jsx)(r.Popover,{className:"relative",children:e=>{let{open:x}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{..."hover"!==i?{}:{onMouseLeave:()=>v(x),onMouseEnter:()=>g(x)},children:[(0,t.jsx)(r.PopoverButton,{ref:f,disabled:h,className:(0,a.cn)("group inline-flex items-center rounded-lg border border-components-button-secondary-border bg-components-button-secondary-bg px-3 py-2 text-base font-medium hover:border-components-button-secondary-border-hover hover:bg-components-button-secondary-bg-hover focus:outline-none",x&&"border-components-button-secondary-border bg-components-button-secondary-bg-hover",p&&"string"==typeof p&&p,p&&"string"!=typeof p&&p?.(x)),children:c}),(0,t.jsx)(s.Transition,{as:n.Fragment,children:(0,t.jsx)(r.PopoverPanel,{className:(0,a.cn)("absolute z-10 mt-1 w-full max-w-sm px-4 sm:px-0 lg:max-w-3xl","bottom"===o&&"left-1/2 -translate-x-1/2","bl"===o&&"left-0","br"===o&&"right-0",u),..."hover"!==i?{}:{onMouseLeave:()=>v(x),onMouseEnter:()=>g(x)},children:e=>{let{close:r}=e;return(0,t.jsx)("div",{className:(0,a.cn)("w-fit min-w-[130px] overflow-hidden rounded-lg bg-components-panel-bg shadow-lg ring-1 ring-black/5",d),..."hover"!==i?{}:{onMouseLeave:()=>v(x),onMouseEnter:()=>g(x)},children:(0,n.isValidElement)(l)?(0,n.cloneElement)(l,{open:x,onClose:r,...m?{onClick:r}:{}}):l})}})})]})})}})}e.s(["default",()=>i])},737198,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"path",attributes:{d:"M22.7 11.5L20.7005 13.5L18.7 11.5M20.9451 13C20.9814 12.6717 21 12.338 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21C14.8273 21 17.35 19.6963 19 17.6573M12 7V12L15 14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},children:[]}]},name:"ClockFastForward"})},490414,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{id:"Icon","clip-path":"url(#clip0_635_10941)"},children:[{type:"element",name:"path",attributes:{id:"Vector",d:"M14.6334 8.66683C14.6552 8.44756 14.6663 8.22516 14.6663 8.00016C14.6663 4.31826 11.6816 1.3335 7.99967 1.3335C4.31778 1.3335 1.33301 4.31826 1.33301 8.00016C1.33301 11.6821 4.31778 14.6668 7.99967 14.6668C8.11145 14.6668 8.22258 14.6641 8.33301 14.6586C8.44487 14.6531 8.556 14.6449 8.66634 14.6339M7.99967 4.00016V8.00016L5.42265 9.25534M11.853 9.97346L14.4308 11.9068C14.6238 12.0515 14.7203 12.1239 14.7548 12.2126C14.785 12.2904 14.785 12.3766 14.7548 12.4543C14.7203 12.543 14.6238 12.6154 14.4308 12.7601L11.853 14.6935C11.5784 14.8995 11.441 15.0024 11.3261 15.0001C11.226 14.998 11.1322 14.9511 11.0706 14.8723C10.9997 14.7818 10.9997 14.6101 10.9997 14.2668V10.4001C10.9997 10.0568 10.9997 9.88516 11.0706 9.79463C11.1322 9.71585 11.226 9.66895 11.3261 9.66687C11.441 9.66448 11.5784 9.76747 11.853 9.97346Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},children:[]}]},{type:"element",name:"defs",attributes:{},children:[{type:"element",name:"clipPath",attributes:{id:"clip0_635_10941"},children:[{type:"element",name:"rect",attributes:{width:"16",height:"16",fill:"white"},children:[]}]}]}]},name:"ClockPlay"})},13393,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{id:"Icon"},children:[{type:"element",name:"path",attributes:{id:"Vector",d:"M29.2673 17.3332C29.3109 16.8946 29.3332 16.4498 29.3332 15.9998C29.3332 8.63604 23.3636 2.6665 15.9998 2.6665C8.63604 2.6665 2.6665 8.63604 2.6665 15.9998C2.6665 23.3636 8.63604 29.3332 15.9998 29.3332C16.2234 29.3332 16.4457 29.3277 16.6665 29.3168C16.8902 29.3058 17.1125 29.2892 17.3332 29.2673M15.9998 7.99984V15.9998L10.8458 18.5102M23.7065 19.9464L28.8621 23.8131C29.2481 24.1026 29.441 24.2473 29.5101 24.4248C29.5705 24.5802 29.5705 24.7527 29.5101 24.9081C29.441 25.0855 29.2481 25.2303 28.8621 25.5198L23.7065 29.3864C23.1572 29.7984 22.8825 30.0044 22.6526 29.9996C22.4526 29.9955 22.265 29.9017 22.1416 29.7441C21.9998 29.5631 21.9998 29.2197 21.9998 28.5331V20.7998C21.9998 20.1131 21.9998 19.7698 22.1416 19.5888C22.265 19.4312 22.4526 19.3374 22.6526 19.3333C22.8825 19.3285 23.1572 19.5345 23.7065 19.9464Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},children:[]}]}]},name:"ClockPlaySlim"})},144768,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{id:"clock-refresh"},children:[{type:"element",name:"g",attributes:{id:"Solid"},children:[{type:"element",name:"path",attributes:{d:"M9.76984 2.8375L9.71551 3.04027C8.27602 1.22839 5.68891 0.69459 3.62457 1.88644C2.25681 2.67611 1.43067 4.04369 1.27558 5.50073C1.24636 5.77532 1.44526 6.02161 1.71985 6.05084C1.99444 6.08007 2.24074 5.88116 2.26997 5.60657C2.39268 4.4537 3.04533 3.37556 4.12456 2.75247C5.7025 1.84145 7.66731 2.20754 8.82211 3.53002L8.65016 3.48395C8.38343 3.41248 8.10926 3.57077 8.03779 3.8375C7.96632 4.10424 8.12461 4.37841 8.39134 4.44988L9.75737 4.8159C10.0241 4.88737 10.2983 4.72908 10.3697 4.46235L10.7358 3.09632C10.8072 2.82959 10.6489 2.55542 10.3822 2.48395C10.1155 2.41248 9.84131 2.57077 9.76984 2.8375Z",fill:"currentColor"},children:[]},{type:"element",name:"path",attributes:{d:"M10.2792 5.94921C10.5538 5.97844 10.7527 6.22473 10.7235 6.49932C10.5684 7.95635 9.74225 9.32394 8.3745 10.1136C6.31011 11.3055 3.72295 10.7716 2.28347 8.95968L2.22918 9.1623C2.15771 9.42903 1.88354 9.58732 1.61681 9.51585C1.35008 9.44438 1.19178 9.17021 1.26325 8.90348L1.62928 7.53746C1.70075 7.27072 1.97492 7.11243 2.24165 7.1839L3.60768 7.54993C3.87441 7.6214 4.0327 7.89557 3.96123 8.1623C3.88976 8.42903 3.61559 8.58732 3.34886 8.51585L3.17668 8.46972C4.33144 9.79246 6.29644 10.1587 7.8745 9.24758C8.95373 8.62449 9.60638 7.54634 9.72909 6.39348C9.75832 6.11889 10.0046 5.91998 10.2792 5.94921Z",fill:"currentColor"},children:[]},{type:"element",name:"path",attributes:{d:"M6.49954 3.74997C6.49954 3.47382 6.27568 3.24997 5.99954 3.24997C5.7234 3.24997 5.49954 3.47382 5.49954 3.74997V5.99997C5.49954 6.1756 5.59169 6.33835 5.74229 6.42871L6.99229 7.17871C7.22908 7.32079 7.53621 7.244 7.67828 7.00721C7.82036 6.77042 7.74358 6.46329 7.50679 6.32122L6.49954 5.71687V3.74997Z",fill:"currentColor"},children:[]}]}]}]},name:"ClockRefresh"})},711786,983389,15676,912558,e=>{"use strict";var t=e.i(563199),r=e.i(807324),s=e.i(737198);let n=e=>{let{ref:n,...a}=e;return(0,t.jsx)(r.default,{...a,ref:n,data:s.default})};n.displayName="ClockFastForward",e.s(["default",0,n],983389);var a=e.i(490414);let i=e=>{let{ref:s,...n}=e;return(0,t.jsx)(r.default,{...n,ref:s,data:a.default})};i.displayName="ClockPlay",e.s(["default",0,i],15676);var o=e.i(13393);let l=e=>{let{ref:s,...n}=e;return(0,t.jsx)(r.default,{...n,ref:s,data:o.default})};l.displayName="ClockPlaySlim",e.s(["default",0,l],912558),e.i(144768),e.s([],711786)},888972,e=>{"use strict";var t=e.i(563199),r=e.i(837699),s=e.i(38532),n=e.i(268255);e.i(152567);var a=e.i(408767),i=e.i(151094),o=e.i(291631),l=e.i(935139);let d={currentPage:0,setCurrentPage:e.i(124836).noop,truncableText:"...",truncableClassName:"",pages:[],hasPreviousPage:!1,hasNextPage:!1,previousPages:[],isPreviousTruncable:!1,middlePages:[],isNextTruncable:!1,nextPages:[]},c=n.createContext(d),u=e=>{let{prev:r}=e,{isPreviousTruncable:s,isNextTruncable:a,truncableText:i,truncableClassName:o}=n.useContext(c);return s&&!0===r||a&&!r?(0,t.jsx)("li",{className:o||void 0,children:i}):null},p=e=>{let{dataTestId:r,...s}=e,a=(e=>{let{currentPage:t,setCurrentPage:r,truncableText:s="...",truncableClassName:a="",totalPages:i,edgePageCount:o,middlePagesSiblingCount:l}=e,d=n.useMemo(()=>Array.from({length:i},(e,t)=>t+1),[i]),c=t>1,u=t<i,p=t<=l,m=t+l>=i,h=n.useMemo(()=>{let e=2*l+1;return p?d.slice(0,e):m?d.slice(-e):d.slice(t-l,t+l+1)},[t,p,m,l,d]),f=(0,n.useCallback)(()=>d.slice(0,h[0]-1),[h,d]),x=n.useMemo(()=>p||f().length<1?[]:d.slice(0,o).filter(e=>!h.includes(e)),[o,f,p,h,d]),g=n.useMemo(()=>d.slice(h[h.length-1],d[d.length]),[d,h]),v=n.useMemo(()=>m||g.length<1?[]:d.slice(d.length-o,d.length).filter(e=>!h.includes(e)),[o,g.length,m,h,d]),b=n.useMemo(()=>h[0]>x[x.length-1]+1,[x,h]),y=n.useMemo(()=>h[h.length-1]+1<v[0],[v,h]);return{currentPage:t,setCurrentPage:r,truncableText:s,truncableClassName:a,pages:d,hasPreviousPage:c,hasNextPage:u,previousPages:x,isPreviousTruncable:b,middlePages:h,isNextTruncable:y,nextPages:v}})(s);return(0,t.jsx)(c.Provider,{value:a,children:(0,t.jsx)("div",{className:s.className,"data-testid":r,children:s.children})})};p.PrevButton=e=>{let{className:r,children:s,dataTestId:a,as:i=(0,t.jsx)("button",{type:"button"}),...o}=e,d=n.useContext(c),u=()=>{d.currentPage+1>1&&d.setCurrentPage(d.currentPage-1)},p=0===d.currentPage;return(0,t.jsx)(i.type,{...o,...i.props,className:(0,l.cn)(r,i.props.className),onClick:()=>u(),tabIndex:p?"-1":0,disabled:p,"data-testid":a,onKeyPress:e=>{e.preventDefault(),"Enter"!==e.key||p||u()},children:i.props.children??s})},p.NextButton=e=>{let{className:r,children:s,dataTestId:a,as:i=(0,t.jsx)("button",{type:"button"}),...o}=e,d=n.useContext(c),u=()=>{d.currentPage+1<d.pages.length&&d.setCurrentPage(d.currentPage+1)},p=d.currentPage===d.pages.length-1;return(0,t.jsx)(i.type,{...o,...i.props,className:(0,l.cn)(r,i.props.className),onClick:()=>u(),tabIndex:p?"-1":0,disabled:p,"data-testid":a,onKeyPress:e=>{e.preventDefault(),"Enter"!==e.key||p||u()},children:i.props.children??s})},p.PageButton=e=>{let{as:r=(0,t.jsx)("a",{}),className:s,dataTestIdActive:a,dataTestIdInactive:i,activeClassName:o,inactiveClassName:d,renderExtraProps:p}=e,m=n.useContext(c),h=e=>(0,t.jsx)("li",{children:(0,t.jsx)(r.type,{"data-testid":(0,l.cn)({[`${a}`]:a&&m.currentPage+1===e,[`${i}-${e}`]:a&&m.currentPage+1!==e})||void 0,tabIndex:0,onKeyPress:t=>{"Enter"===t.key&&m.setCurrentPage(e-1)},onClick:()=>m.setCurrentPage(e-1),className:(0,l.cn)(s,m.currentPage+1===e?o:d),...r.props,...p?p(e):{},children:e})},e);return(0,t.jsxs)(t.Fragment,{children:[m.previousPages.map(h),(0,t.jsx)(u,{prev:!0}),m.middlePages.map(h),(0,t.jsx)(u,{}),m.nextPages.map(h)]})},e.s(["default",0,e=>{let{className:d,current:c,onChange:u,total:m,limit:h=10,onLimitChange:f}=e,{t:x}=(0,a.useTranslation)(),g=Math.ceil(m/h),v=n.useRef(null),[b,y]=n.useState(!1),[j,w]=n.useState(c+1),[N,C]=n.useState(!1),{run:k}=(0,s.useDebounceFn)(e=>{if(Number.parseInt(e)>g){w(g),u(g-1),y(!1);return}if(1>Number.parseInt(e)){w(1),u(0),y(!1);return}u(Number.parseInt(e)-1),w(Number.parseInt(e)),y(!1)},{wait:500}),_=()=>{""!==j&&String(j)!==String(c+1)?k(String(j)):(""===j&&w(c+1),y(!1))};return(0,t.jsxs)(p,{className:(0,l.cn)("flex w-full select-none items-center px-6 py-3",d),currentPage:c,edgePageCount:2,middlePagesSiblingCount:1,setCurrentPage:u,totalPages:g,truncableClassName:"flex items-center justify-center w-8 px-1 py-2 system-sm-medium text-text-tertiary",truncableText:"...",children:[(0,t.jsxs)("div",{className:"flex items-center gap-0.5 rounded-[10px] bg-background-section-burn p-0.5",children:[(0,t.jsx)(p.PrevButton,{as:(0,t.jsx)("div",{}),disabled:0===c,children:(0,t.jsx)(i.default,{variant:"secondary",className:"h-7 w-7 px-1.5",disabled:0===c,children:(0,t.jsx)(r.RiArrowLeftLine,{className:"h-4 w-4"})})}),!b&&(0,t.jsxs)("div",{ref:v,className:"flex items-center gap-0.5 rounded-lg px-2 py-1.5 hover:cursor-text hover:bg-state-base-hover-alt",onClick:()=>y(!0),children:[(0,t.jsx)("div",{className:"system-xs-medium text-text-secondary",children:c+1}),(0,t.jsx)("div",{className:"system-xs-medium text-text-quaternary",children:"/"}),(0,t.jsx)("div",{className:"system-xs-medium text-text-secondary",children:g})]}),b&&(0,t.jsx)(o.default,{styleCss:{height:"28px",width:`${v.current?.clientWidth}px`},placeholder:"",autoFocus:!0,value:j,onChange:e=>{let t=e.target.value;if(!t||isNaN(Number.parseInt(t)))return w("");w(Number.parseInt(t))},onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),_()):"Escape"===e.key&&(e.preventDefault(),w(c+1),y(!1))},onBlur:()=>{_()}}),(0,t.jsx)(p.NextButton,{as:(0,t.jsx)("div",{}),disabled:c===g-1,children:(0,t.jsx)(i.default,{variant:"secondary",className:"h-7 w-7 px-1.5",disabled:c===g-1,children:(0,t.jsx)(r.RiArrowRightLine,{className:"h-4 w-4"})})})]}),(0,t.jsx)("div",{className:(0,l.cn)("flex grow list-none items-center justify-center gap-1"),children:(0,t.jsx)(p.PageButton,{className:"system-sm-medium flex min-w-8 cursor-pointer items-center justify-center rounded-lg px-1 py-2 hover:bg-components-button-ghost-bg-hover",activeClassName:"bg-components-button-tertiary-bg text-components-button-tertiary-text hover:bg-components-button-ghost-bg-hover",inactiveClassName:"text-text-tertiary"})}),f&&(0,t.jsxs)("div",{className:"flex shrink-0 items-center gap-2",children:[(0,t.jsx)("div",{className:"system-2xs-regular-uppercase w-[51px] shrink-0 text-end text-text-tertiary",children:N?x("pagination.perPage",{ns:"common"}):""}),(0,t.jsxs)("div",{className:"flex items-center gap-[1px] rounded-[10px] bg-components-segmented-control-bg-normal p-0.5",onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:[(0,t.jsx)("div",{className:(0,l.cn)("system-sm-medium cursor-pointer rounded-lg border-[0.5px] border-transparent px-2.5 py-1.5 text-text-tertiary hover:bg-state-base-hover hover:text-text-secondary",10===h&&"border-components-segmented-control-item-active-border bg-components-segmented-control-item-active-bg text-text-secondary shadow-xs hover:bg-components-segmented-control-item-active-bg"),onClick:()=>f?.(10),children:"10"}),(0,t.jsx)("div",{className:(0,l.cn)("system-sm-medium cursor-pointer rounded-lg border-[0.5px] border-transparent px-2.5 py-1.5 text-text-tertiary hover:bg-state-base-hover hover:text-text-secondary",25===h&&"border-components-segmented-control-item-active-border bg-components-segmented-control-item-active-bg text-text-secondary shadow-xs hover:bg-components-segmented-control-item-active-bg"),onClick:()=>f?.(25),children:"25"}),(0,t.jsx)("div",{className:(0,l.cn)("system-sm-medium cursor-pointer rounded-lg border-[0.5px] border-transparent px-2.5 py-1.5 text-text-tertiary hover:bg-state-base-hover hover:text-text-secondary",50===h&&"border-components-segmented-control-item-active-border bg-components-segmented-control-item-active-bg text-text-secondary shadow-xs hover:bg-components-segmented-control-item-active-bg"),onClick:()=>f?.(50),children:"50"})]})]})]})}],888972)},245962,e=>{"use strict";var t=e.i(563199),r=e.i(617571),s=e.i(268255);e.i(152567);var n=e.i(408767);e.i(21511);var a=e.i(389600),i=e.i(751489),o=e.i(421001);let l="overview.appInfo.embedded";e.s(["default",0,e=>{let{content:d}=e,{t:c}=(0,n.useTranslation)(),{copied:u,copy:p,reset:m}=(0,r.useClipboard)(),h=(0,s.useCallback)(()=>{p(d)},[p,d]);return(0,t.jsx)(o.default,{popupContent:c(u?`${l}.copied`:`${l}.copy`,{ns:"appOverview"})||"",children:(0,t.jsx)("div",{onMouseLeave:m,children:u?(0,t.jsx)(i.CopyCheck,{className:"mx-1 h-3.5 w-3.5 text-text-tertiary"}):(0,t.jsx)(a.Copy,{className:"mx-1 h-3.5 w-3.5 cursor-pointer text-text-tertiary",onClick:h})})})}])},969789,e=>{"use strict";var t=e.i(563199),r=e.i(268255);e.i(152567);var s=e.i(408767),n=e.i(325222),a=e.i(935139),i=e.i(21151),o=e.i(84366),l=e.i(942064),d=e.i(800727);let c=r.memo(e=>{let{show:r,onHide:c}=e,{t:u}=(0,s.useTranslation)();return(0,t.jsx)(i.default,{isShow:r,onClose:c,closable:!0,className:"!p-0",children:(0,t.jsx)(n.default,{wrapperClassName:"rounded-lg",canvasClassName:"rounded-lg",gradientClassName:"rounded-lg",children:(0,t.jsxs)("div",{className:"mt-6 flex cursor-pointer flex-col rounded-lg border-2 border-solid border-transparent px-7 py-6 shadow-md transition-all duration-200 ease-in-out",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:(0,a.cn)(l.default.textGradient,"text-[18px] font-semibold leading-[27px]"),children:[(0,t.jsx)("div",{children:u("annotatedResponse.fullTipLine1",{ns:"billing"})}),(0,t.jsx)("div",{children:u("annotatedResponse.fullTipLine2",{ns:"billing"})})]})}),(0,t.jsx)(d.default,{className:"mt-4"}),(0,t.jsx)("div",{className:"mt-7 flex justify-end",children:(0,t.jsx)(o.default,{loc:"annotation-create"})})]})})})});e.s(["default",0,c])},621087,e=>{e.v({disabled:"style-module__Qhtp0a__disabled",slider:"style-module__Qhtp0a__slider","slider-thumb":"style-module__Qhtp0a__slider-thumb","slider-track":"style-module__Qhtp0a__slider-track","slider-track-1":"style-module__Qhtp0a__slider-track-1"})},491939,718574,e=>{"use strict";var t,r,s=e.i(563199),n=e.i(268255);e.i(152567);var a=e.i(408767),i=e.i(151094),o=e.i(21151),l=e.i(137667),d=e.i(739255),c=e.i(225162),u=e.i(117960),p=e.i(925521),m=e.i(421001);let h=e=>{let{title:t,tooltip:r,children:n}=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-1 flex items-center space-x-1",children:[(0,s.jsx)("div",{className:"system-sm-semibold py-1 text-text-secondary",children:t}),(0,s.jsx)(m.default,{popupContent:(0,s.jsx)("div",{className:"system-sm-regular max-w-[200px] text-text-secondary",children:r})})]}),(0,s.jsx)("div",{children:n})]})};var f=e.i(539522),x=e.i(935139),g=e.i(621087);let v=e=>{let{className:t,max:r,min:n,step:a,value:i,disabled:o,onChange:l}=e;return(0,s.jsx)(f.default,{disabled:o,value:isNaN(i)?0:i,min:n||0,max:r||100,step:a||1,className:(0,x.cn)(t,g.default.slider),thumbClassName:(0,x.cn)(g.default["slider-thumb"],"top-[-7px] h-[18px] w-2 cursor-pointer rounded-[36px] border !border-black/8 bg-white shadow-md"),trackClassName:g.default["slider-track"],onChange:l,renderThumb:(e,t)=>(0,s.jsx)("div",{...e,children:(0,s.jsx)("div",{className:"relative h-full w-full",children:(0,s.jsx)("div",{className:"system-sm-semibold absolute left-[50%] top-[-16px] translate-x-[-50%] text-text-primary",children:(t.valueNow/100).toFixed(2)})})})})},b=n.memo(e=>{let{className:t,value:r,onChange:n}=e,{t:i}=(0,a.useTranslation)();return(0,s.jsxs)("div",{className:t,children:[(0,s.jsx)("div",{className:"mt-[14px] h-px",children:(0,s.jsx)(v,{max:100,min:80,step:1,value:r,onChange:n})}),(0,s.jsxs)("div",{className:"system-xs-semibold-uppercase mt-[10px] flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex space-x-1 text-util-colors-cyan-cyan-500",children:[(0,s.jsx)("div",{children:"0.8"}),(0,s.jsx)("div",{children:"·"}),(0,s.jsx)("div",{children:i("feature.annotation.scoreThreshold.easyMatch",{ns:"appDebug"})})]}),(0,s.jsxs)("div",{className:"flex space-x-1 text-util-colors-blue-blue-500",children:[(0,s.jsx)("div",{children:"1.0"}),(0,s.jsx)("div",{children:"·"}),(0,s.jsx)("div",{children:i("feature.annotation.scoreThreshold.accurateMatch",{ns:"appDebug"})})]})]})]})}),y=n.memo(e=>{let{isShow:t,onHide:r,onSave:m,isInit:f,annotationConfig:x}=e,{t:g}=(0,a.useTranslation)(),{modelList:v,defaultModel:y,currentModel:j}=(0,c.useModelListAndDefaultModelAndCurrentProviderAndModel)(d.ModelTypeEnum.textEmbedding),[w,N]=(0,n.useState)(x),[C,k]=(0,n.useState)(!1),[_,E]=(0,n.useState)(x.embedding_model?{providerName:x.embedding_model.embedding_provider_name,modelName:x.embedding_model.embedding_model_name}:y?{providerName:y.provider.provider,modelName:y.model}:void 0),L=()=>{C||r()},T=async()=>{_&&_.modelName&&(_.modelName!==y?.model||j)?(k(!0),await m({embedding_provider_name:_.providerName,embedding_model_name:_.modelName},w.score_threshold),k(!1)):l.default.notify({message:g("modelProvider.embeddingModel.required",{ns:"common"}),type:"error"})};return(0,s.jsxs)(o.default,{isShow:t,onClose:L,className:"!mt-14 !w-[640px] !max-w-none !p-6",children:[(0,s.jsx)("div",{className:"title-2xl-semi-bold mb-2 text-text-primary",children:g(`initSetup.${f?"title":"configTitle"}`,{ns:"appAnnotation"})}),(0,s.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,s.jsx)(h,{title:g("feature.annotation.scoreThreshold.title",{ns:"appDebug"}),tooltip:g("feature.annotation.scoreThreshold.description",{ns:"appDebug"}),children:(0,s.jsx)(b,{className:"mt-1",value:100*(w.score_threshold||p.ANNOTATION_DEFAULT.score_threshold),onChange:e=>{N({...w,score_threshold:e/100})}})}),(0,s.jsx)(h,{title:g("modelProvider.embeddingModel.key",{ns:"common"}),tooltip:g("embeddingModelSwitchTip",{ns:"appAnnotation"}),children:(0,s.jsx)("div",{className:"pt-1",children:(0,s.jsx)(u.default,{defaultModel:_&&{provider:_.providerName,model:_.modelName},modelList:v,onSelect:e=>{E({providerName:e.provider,modelName:e.model})}})})})]}),(0,s.jsxs)("div",{className:"mt-6 flex justify-end gap-2",children:[(0,s.jsx)(i.default,{onClick:L,children:g("operation.cancel",{ns:"common"})}),(0,s.jsxs)(i.default,{variant:"primary",onClick:T,loading:C,children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{children:g(`initSetup.${f?"confirmBtn":"configConfirmBtn"}`,{ns:"appAnnotation"})})]})]})]})});e.s(["default",0,y],491939);var j=((t={}).enable="enable",t.disable="disable",t),w=((r={}).waiting="waiting",r.processing="processing",r.completed="completed",r);e.s(["AnnotationEnableStatus",()=>j,"JobStatus",()=>w],718574)},290422,e=>{"use strict";e.s(["addFileInfos",0,(e,t)=>e&&t?e.map(e=>e.files&&e.files?.length>0?{...e,message_files:e.files.map(e=>t.find(t=>t.id===e))}:e):e,"sortAgentSorts",0,e=>{if(!e||e.some(e=>void 0===e.position))return e;let t=[...e];return t.sort((e,t)=>e.position-t.position),t}])},988720,e=>{"use strict";var t=e.i(563199),r=e.i(268255),s=e.i(935139);let n=e=>{let{className:r,isActive:n,onClick:a,option:i,smallItem:o}=e;return(0,t.jsxs)("div",{className:(0,s.cn)("relative pb-2.5 ",!n&&"cursor-pointer",o?"system-sm-semibold-uppercase":"system-xl-semibold",r),onClick:()=>!n&&a(i.value),children:[(0,t.jsx)("div",{className:(0,s.cn)(n?"text-text-primary":"text-text-tertiary"),children:i.text}),n&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-util-colors-blue-brand-blue-brand-600"})]},i.value)},a=r.memo(e=>{let{className:r,value:a,onChange:i,options:o,noBorderBottom:l,itemClassName:d,smallItem:c}=e;return(0,t.jsx)("div",{className:(0,s.cn)(r,!l&&"border-b border-divider-subtle","flex  space-x-6"),children:o.map(e=>(0,t.jsx)(n,{isActive:e.value===a,option:e,onClick:i,className:d,smallItem:c},e.value))})});e.s(["default",0,a])},419874,e=>{"use strict";var t=e.i(563199),r=e.i(837699),s=e.i(417944),n=e.i(26012),a=e.i(326531),i=e.i(268255);e.i(152567);var o=e.i(408767),l=e.i(189299),d=e.i(654313),c=e.i(744704),u=e.i(75518),p=e.i(449980),m=e.i(379415),h=e.i(543753),f=e.i(137667),x=e.i(459760),g=e.i(447301),v=e.i(935139);e.i(237855);var b=e.i(297162),y=e.i(481162),j=e.i(955371);let w=(0,i.memo)(e=>{let{data:r,content:s,currentTab:n}=e;return(0,t.jsxs)(t.Fragment,{children:["RESULT"===n&&(0,t.jsxs)("div",{className:"space-y-3 p-4",children:[r?.resultText&&(0,t.jsx)(m.Markdown,{content:r?.resultText||""}),!!r?.files?.length&&(0,t.jsx)("div",{className:"flex flex-col gap-2",children:r?.files.map(e=>(0,t.jsxs)("div",{className:"system-xs-regular flex flex-col gap-1",children:[(0,t.jsx)("div",{className:"py-1 text-text-tertiary ",children:e.varName}),(0,t.jsx)(b.FileList,{files:e.list,showDeleteAction:!1,showDownloadAction:!0,canPreview:!0})]},e.varName))})]}),"DETAIL"===n&&s&&(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)(y.default,{readOnly:!0,title:(0,t.jsx)("div",{children:"JSON OUTPUT"}),language:j.CodeLanguage.json,value:s,isJSONStringifyBeauty:!0})})]})}),N=e=>{let{isWorkflow:b,workflowProcessData:y,className:j,isError:C,onRetry:k,content:_,messageId:E,isLoading:L,isResponding:T,moreLikeThis:S,isInWebApp:R=!1,feedback:D,onFeedback:F,onSave:A,depth:P=1,isMobile:O,appSourceType:M,installedAppId:I,taskId:B,controlClearMoreLikeThis:U,supportFeedback:q,isShowTextToSpeech:z,hideProcessDetail:$,siteInfo:K,inSidePanel:W}=e,{t:H}=(0,o.useTranslation)(),Q=(0,a.useParams)(),V=1===P,J=M===g.AppSourceType.tryApp,[G,Z]=(0,i.useState)(""),[X,Y]=(0,i.useState)(null),[ee,et]=(0,i.useState)({rating:null}),{config:er}=(0,u.useChatContext)(),es=(0,l.useStore)(e=>e.setCurrentLogItem),en=(0,l.useStore)(e=>e.setShowPromptLogModal),ea=async e=>{await (0,g.updateFeedback)({url:`/messages/${X}/feedbacks`,body:{rating:e.rating}},M,I),et(e)},[ei,{setTrue:eo,setFalse:el}]=(0,s.useBoolean)(!1),ed=async()=>{if(ei||!E)return void f.default.notify({type:"warning",message:H("errorMessage.waitForResponse",{ns:"appDebug"})});eo();let e=await (0,g.fetchMoreLikeThis)(E,M,I);Z(e.answer),et({rating:null}),Y(e.id),el()};(0,i.useEffect)(()=>{U&&(Y(null),Z(""))},[U]),(0,i.useEffect)(()=>{L&&Y(null)},[L]);let ec=async()=>{let e=await (0,x.fetchTextGenerationMessage)({appId:Q.appId,messageId:E});es(Array.isArray(e.message)?{...e,log:[...e.message,..."assistant"!==e.message[e.message.length-1].role?[{role:"assistant",text:e.answer,files:e.message_files?.filter(e=>"assistant"===e.belongs_to)||[]}]:[]]}:{...e,log:["string"==typeof e.message?{text:e.message}:e.message]}),en(!0)},[eu,ep]=(0,i.useState)("DETAIL"),em=!!y?.resultText||!!y?.files?.length,eh=async e=>{ep(e)};return(0,i.useEffect)(()=>{y?.resultText||y?.files?.length?eh("RESULT"):eh("DETAIL")},[y?.files?.length,y?.resultText]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:(0,v.cn)("relative",!V&&"mt-3",j),children:[L&&(0,t.jsx)("div",{className:(0,v.cn)("flex h-10 items-center",!W&&"rounded-2xl border-t border-divider-subtle bg-chat-bubble-bg"),children:(0,t.jsx)(p.default,{type:"area"})}),!L&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:(0,v.cn)("relative",!W&&"rounded-2xl border-t border-divider-subtle bg-chat-bubble-bg"),children:[y&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:(0,v.cn)("p-3",em&&"border-b border-divider-subtle"),children:[B&&(0,t.jsxs)("div",{className:(0,v.cn)("system-2xs-medium-uppercase mb-2 flex items-center text-text-accent-secondary",C&&"text-text-destructive"),children:[(0,t.jsx)(r.RiPlayList2Line,{className:"mr-1 h-3 w-3"}),(0,t.jsx)("span",{children:H("generation.execution",{ns:"share"})}),(0,t.jsx)("span",{className:"px-1",children:"·"}),(0,t.jsx)("span",{children:B})]}),K&&y&&(0,t.jsx)(c.default,{data:y,expand:y.expand,hideProcessDetail:$,hideInfo:$,readonly:!K.show_workflow_steps}),em&&(0,t.jsxs)("div",{className:"flex items-center space-x-6 px-1",children:[(0,t.jsx)("div",{className:(0,v.cn)("system-sm-semibold-uppercase cursor-pointer border-b-2 border-transparent py-3 text-text-tertiary","RESULT"===eu&&"border-util-colors-blue-brand-blue-brand-600 text-text-primary"),onClick:()=>eh("RESULT"),children:H("result",{ns:"runLog"})}),(0,t.jsx)("div",{className:(0,v.cn)("system-sm-semibold-uppercase cursor-pointer border-b-2 border-transparent py-3 text-text-tertiary","DETAIL"===eu&&"border-util-colors-blue-brand-blue-brand-600 text-text-primary"),onClick:()=>eh("DETAIL"),children:H("detail",{ns:"runLog"})})]})]}),!C&&(0,t.jsx)(w,{data:y,content:_,currentTab:eu})]}),!y&&B&&(0,t.jsxs)("div",{className:(0,v.cn)("system-2xs-medium-uppercase sticky left-0 top-0 flex w-full items-center rounded-t-2xl bg-components-actionbar-bg p-4 pb-3 text-text-accent-secondary",C&&"text-text-destructive"),children:[(0,t.jsx)(r.RiPlayList2Line,{className:"mr-1 h-3 w-3"}),(0,t.jsx)("span",{children:H("generation.execution",{ns:"share"})}),(0,t.jsx)("span",{className:"px-1",children:"·"}),(0,t.jsx)("span",{children:`${B}${P>1?`-${P-1}`:""}`})]}),C&&(0,t.jsx)("div",{className:"body-lg-regular p-4 pt-0 text-text-quaternary",children:H("generation.batchFailed.outputPlaceholder",{ns:"share"})}),!y&&!C&&"string"==typeof _&&(0,t.jsx)("div",{className:(0,v.cn)("p-4",B&&"pt-0"),children:(0,t.jsx)(m.Markdown,{content:_})})]}),(0,t.jsxs)("div",{className:(0,v.cn)("system-xs-regular relative mt-1 h-4 px-4 text-text-quaternary",O&&(X||ei)&&P<3&&"pl-10"),children:[!b&&(0,t.jsxs)("span",{children:[_?.length," ",H("unit.char",{ns:"common"})]}),(0,t.jsxs)("div",{className:"absolute bottom-1 right-2 flex items-center",children:[!R&&M!==g.AppSourceType.installedApp&&!T&&(0,t.jsx)("div",{className:"ml-1 flex items-center gap-0.5 rounded-[10px] border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg p-0.5 shadow-md backdrop-blur-sm",children:(0,t.jsx)(d.default,{disabled:C||!E,onClick:ec,children:(0,t.jsx)(r.RiFileList3Line,{className:"h-4 w-4"})})}),(0,t.jsxs)("div",{className:"ml-1 flex items-center gap-0.5 rounded-[10px] border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg p-0.5 shadow-md backdrop-blur-sm",children:[S&&!J&&(0,t.jsx)(d.default,{state:3===P?d.ActionButtonState.Disabled:d.ActionButtonState.Default,disabled:3===P,onClick:ed,children:(0,t.jsx)(r.RiSparklingLine,{className:"h-4 w-4"})}),z&&!J&&(0,t.jsx)(h.default,{id:E,voice:er?.text_to_speech?.voice}),("RESULT"===eu&&y?.resultText||!b)&&(0,t.jsx)(d.default,{disabled:C||!E,onClick:()=>{let e=b?y?.resultText:_;"string"==typeof e?(0,n.default)(e):(0,n.default)(JSON.stringify(e)),f.default.notify({type:"success",message:H("actionMsg.copySuccessfully",{ns:"common"})})},children:(0,t.jsx)(r.RiClipboardLine,{className:"h-4 w-4"})}),R&&C&&(0,t.jsx)(d.default,{onClick:k,children:(0,t.jsx)(r.RiReplay15Line,{className:"h-4 w-4"})}),R&&!b&&!J&&(0,t.jsx)(d.default,{disabled:C||!E,onClick:()=>{A?.(E)},children:(0,t.jsx)(r.RiBookmark3Line,{className:"h-4 w-4"})})]}),(q||R)&&!b&&!J&&!C&&E&&(0,t.jsxs)("div",{className:"ml-1 flex items-center gap-0.5 rounded-[10px] border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg p-0.5 shadow-md backdrop-blur-sm",children:[!D?.rating&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.default,{onClick:()=>F?.({rating:"like"}),children:(0,t.jsx)(r.RiThumbUpLine,{className:"h-4 w-4"})}),(0,t.jsx)(d.default,{onClick:()=>F?.({rating:"dislike"}),children:(0,t.jsx)(r.RiThumbDownLine,{className:"h-4 w-4"})})]}),D?.rating==="like"&&(0,t.jsx)(d.default,{state:d.ActionButtonState.Active,onClick:()=>F?.({rating:null}),children:(0,t.jsx)(r.RiThumbUpLine,{className:"h-4 w-4"})}),D?.rating==="dislike"&&(0,t.jsx)(d.default,{state:d.ActionButtonState.Destructive,onClick:()=>F?.({rating:null}),children:(0,t.jsx)(r.RiThumbDownLine,{className:"h-4 w-4"})})]})]})]}),!V&&(0,t.jsxs)("div",{className:(0,v.cn)("absolute top-[-32px] flex h-[33px] w-4 justify-center",O?"left-[17px]":"left-[50%] translate-x-[-50%]"),children:[(0,t.jsx)("div",{className:"h-full w-0.5 bg-divider-regular"}),(0,t.jsx)("div",{className:(0,v.cn)("absolute left-0 flex h-4 w-4 items-center justify-center rounded-2xl border-[0.5px] border-divider-subtle bg-util-colors-blue-blue-500 shadow-xs",O?"top-[3.5px]":"top-2"),children:(0,t.jsx)(r.RiSparklingFill,{className:"h-3 w-3 text-text-primary-on-surface"})})]})]})]}),(X||ei)&&P<3&&(0,t.jsx)(N,{isInWebApp:!0,content:G,messageId:X,depth:P+1,moreLikeThis:!0,onFeedback:ea,isLoading:ei,feedback:ee,onSave:A,isShowTextToSpeech:z,isMobile:O,appSourceType:M,installedAppId:I,controlClearMoreLikeThis:U,isWorkflow:b,siteInfo:K,taskId:B})]})},C=i.memo(N);e.s(["default",0,C],419874)},224859,(e,t,r)=>{var s;let n;e.e,s=function e(){var t,r="u">typeof self?self:"u">typeof window?window:void 0!==r?r:{},s=!r.document&&!!r.postMessage,n=r.IS_PAPA_WORKER||!1,a={},i=0,o={};function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var t=b(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new m(t),(this._handle.streamer=this)._config=t}).call(this,e),this.parseChunk=function(e,t){var s=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<s){let t=this._config.newline;t||(a=this._config.quoteChar||'"',t=this._handle.guessLineEndings(e,a)),e=[...e.split(t).slice(s)].join(t)}this.isFirstChunk&&j(this._config.beforeFirstChunk)&&void 0!==(a=this._config.beforeFirstChunk(e))&&(e=a),this.isFirstChunk=!1,this._halted=!1;var s=this._partialLine+e,a=(this._partialLine="",this._handle.parse(s,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=a.meta.cursor,this._finished||(this._partialLine=s.substring(e-this._baseIndex),this._baseIndex=e),a&&a.data&&(this._rowCount+=a.data.length),s=this._finished||this._config.preview&&this._rowCount>=this._config.preview,n)r.postMessage({results:a,workerId:o.WORKER_ID,finished:s});else if(j(this._config.chunk)&&!t){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=a=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!s||!j(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),s||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(e){j(this._config.error)?this._config.error(e):n&&this._config.error&&r.postMessage({workerId:o.WORKER_ID,error:e,finished:!1})}}function d(e){var t;(e=e||{}).chunkSize||(e.chunkSize=o.RemoteChunkSize),l.call(this,e),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),s||(t.onload=y(this._chunkLoaded,this),t.onerror=y(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var e,r,n=this._config.downloadRequestHeaders;for(r in n)t.setRequestHeader(r,n[r])}this._config.chunkSize&&(e=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+e));try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}s&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){let e;4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null!==(e=(e=t).getResponseHeader("Content-Range"))?parseInt(e.substring(e.lastIndexOf("/")+1)):-1),this.parseChunk(t.responseText)))},this._chunkError=function(e){e=t.statusText||e,this._sendError(Error(e))}}function c(e){(e=e||{}).chunkSize||(e.chunkSize=o.LocalChunkSize),l.call(this,e);var t,r,s="u">typeof FileReader;this.stream=function(e){this._input=e,r=e.slice||e.webkitSlice||e.mozSlice,s?((t=new FileReader).onload=y(this._chunkLoaded,this),t.onerror=y(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input,n=(this._config.chunkSize&&(n=Math.min(this._start+this._config.chunkSize,this._input.size),e=r.call(e,this._start,n)),t.readAsText(e,this._config.encoding));s||this._chunkLoaded({target:{result:n}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function u(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){var e,r;if(!this._finished)return t=(e=this._config.chunkSize)?(r=t.substring(0,e),t.substring(e)):(r=t,""),this._finished=!t,this.parseChunk(r)}}function p(e){l.call(this,e=e||{});var t=[],r=!0,s=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){s&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=y(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=y(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=y(function(){this._streamCleanUp(),s=!0,this._streamData("")},this),this._streamCleanUp=y(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function m(e){var t,r,s,n,a=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,i=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,l=this,d=0,c=0,u=!1,p=!1,m=[],x={data:[],errors:[],meta:{}};function g(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function v(){if(x&&s&&(w("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),s=!1),e.skipEmptyLines&&(x.data=x.data.filter(function(e){return!g(e)})),y()){if(x)if(Array.isArray(x.data[0])){for(var t,r=0;y()&&r<x.data.length;r++)x.data[r].forEach(n);x.data.splice(0,1)}else x.data.forEach(n);function n(t,r){j(e.transformHeader)&&(t=e.transformHeader(t,r)),m.push(t)}}function l(t,r){for(var s=e.header?{}:[],n=0;n<t.length;n++){var o=n,l=t[n],l=((t,r)=>(e.dynamicTypingFunction&&void 0===e.dynamicTyping[t]&&(e.dynamicTyping[t]=e.dynamicTypingFunction(t)),!0===(e.dynamicTyping[t]||e.dynamicTyping))?"true"===r||"TRUE"===r||"false"!==r&&"FALSE"!==r&&((e=>{if(a.test(e)&&-0x20000000000000<(e=parseFloat(e))&&e<0x20000000000000)return 1})(r)?parseFloat(r):i.test(r)?new Date(r):""===r?null:r):r)(o=e.header?n>=m.length?"__parsed_extra":m[n]:o,l=e.transform?e.transform(l,o):l);"__parsed_extra"===o?(s[o]=s[o]||[],s[o].push(l)):s[o]=l}return e.header&&(n>m.length?w("FieldMismatch","TooManyFields","Too many fields: expected "+m.length+" fields but parsed "+n,c+r):n<m.length&&w("FieldMismatch","TooFewFields","Too few fields: expected "+m.length+" fields but parsed "+n,c+r)),s}x&&(e.header||e.dynamicTyping||e.transform)&&(t=1,!x.data.length||Array.isArray(x.data[0])?(x.data=x.data.map(l),t=x.data.length):x.data=l(x.data,0),e.header&&x.meta&&(x.meta.fields=m),c+=t)}function y(){return e.header&&0===m.length}function w(e,t,r,s){e={type:e,code:t,message:r},void 0!==s&&(e.row=s),x.errors.push(e)}j(e.step)&&(n=e.step,e.step=function(t){x=t,y()?v():(v(),0!==x.data.length&&(d+=t.data.length,e.preview&&d>e.preview?r.abort():(x.data=x.data[0],n(x,l))))}),this.parse=function(n,a,i){var l=e.quoteChar||'"',l=(e.newline||(e.newline=this.guessLineEndings(n,l)),s=!1,e.delimiter?j(e.delimiter)&&(e.delimiter=e.delimiter(n),x.meta.delimiter=e.delimiter):((l=((t,r,s,n,a)=>{var i,l,d,c;a=a||[",","	","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var u=0;u<a.length;u++){for(var p,m=a[u],h=0,x=0,v=0,b=(d=void 0,new f({comments:n,delimiter:m,newline:r,preview:10}).parse(t)),y=0;y<b.data.length;y++)s&&g(b.data[y])?v++:(x+=p=b.data[y].length,void 0===d?d=p:0<p&&(h+=Math.abs(p-d),d=p));0<b.data.length&&(x/=b.data.length-v),(void 0===l||h<=l)&&(void 0===c||c<x)&&1.99<x&&(l=h,i=m,c=x)}return{successful:!!(e.delimiter=i),bestDelimiter:i}})(n,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=l.bestDelimiter:(s=!0,e.delimiter=o.DefaultDelimiter),x.meta.delimiter=e.delimiter),b(e));return e.preview&&e.header&&l.preview++,t=n,x=(r=new f(l)).parse(t,a,i),v(),u?{meta:{paused:!0}}:x||{meta:{paused:!1}}},this.paused=function(){return u},this.pause=function(){u=!0,r.abort(),t=j(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){l.streamer._halted?(u=!1,l.streamer.parseChunk(t,!0)):setTimeout(l.resume,3)},this.aborted=function(){return p},this.abort=function(){p=!0,r.abort(),x.meta.aborted=!0,j(e.complete)&&e.complete(x),t=""},this.guessLineEndings=function(e,t){e=e.substring(0,1048576);var t=RegExp(h(t)+"([^]*?)"+h(t),"gm"),r=(e=e.replace(t,"")).split("\r"),t=e.split("\n"),e=1<t.length&&t[0].length<r[0].length;if(1===r.length||e)return"\n";for(var s=0,n=0;n<r.length;n++)"\n"===r[n][0]&&s++;return s>=r.length/2?"\r\n":"\r"}}function h(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function f(e){var t=(e=e||{}).delimiter,r=e.newline,s=e.comments,n=e.step,a=e.preview,i=e.fastMode,l=null,d=!1,c=null==e.quoteChar?'"':e.quoteChar,u=c;if(void 0!==e.escapeChar&&(u=e.escapeChar),("string"!=typeof t||-1<o.BAD_DELIMITERS.indexOf(t))&&(t=","),s===t)throw Error("Comment character same as delimiter");!0===s?s="#":("string"!=typeof s||-1<o.BAD_DELIMITERS.indexOf(s))&&(s=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var p=0,m=!1;this.parse=function(o,f,x){if("string"!=typeof o)throw Error("Input must be a string");var g=o.length,v=t.length,b=r.length,y=s.length,w=j(n),N=[],C=[],k=[],_=p=0;if(!o)return I();if(i||!1!==i&&-1===o.indexOf(c)){for(var E=o.split(r),L=0;L<E.length;L++){if(k=E[L],p+=k.length,L!==E.length-1)p+=r.length;else if(x)break;if(!s||k.substring(0,y)!==s){if(w){if(N=[],A(k.split(t)),B(),m)return I()}else A(k.split(t));if(a&&a<=L)return N=N.slice(0,a),I(!0)}}return I()}for(var T=o.indexOf(t,p),S=o.indexOf(r,p),R=RegExp(h(u)+h(c),"g"),D=o.indexOf(c,p);;)if(o[p]===c)for(D=p,p++;;){if(-1===(D=o.indexOf(c,D+1)))return x||C.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:N.length,index:p}),O();if(D===g-1)return O(o.substring(p,D).replace(R,c));if(c===u&&o[D+1]===u)D++;else if(c===u||0===D||o[D-1]!==u){-1!==T&&T<D+1&&(T=o.indexOf(t,D+1));var F=P(-1===(S=-1!==S&&S<D+1?o.indexOf(r,D+1):S)?T:Math.min(T,S));if(o.substr(D+1+F,v)===t){k.push(o.substring(p,D).replace(R,c)),o[p=D+1+F+v]!==c&&(D=o.indexOf(c,p)),T=o.indexOf(t,p),S=o.indexOf(r,p);break}if(F=P(S),o.substring(D+1+F,D+1+F+b)===r){if(k.push(o.substring(p,D).replace(R,c)),M(D+1+F+b),T=o.indexOf(t,p),D=o.indexOf(c,p),w&&(B(),m))return I();if(a&&N.length>=a)return I(!0);break}C.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:N.length,index:p}),D++}}else if(s&&0===k.length&&o.substring(p,p+y)===s){if(-1===S)return I();p=S+b,S=o.indexOf(r,p),T=o.indexOf(t,p)}else if(-1!==T&&(T<S||-1===S))k.push(o.substring(p,T)),p=T+v,T=o.indexOf(t,p);else{if(-1===S)break;if(k.push(o.substring(p,S)),M(S+b),w&&(B(),m))return I();if(a&&N.length>=a)return I(!0)}return O();function A(e){N.push(e),_=p}function P(e){return -1!==e&&(e=o.substring(D+1,e))&&""===e.trim()?e.length:0}function O(e){return x||(void 0===e&&(e=o.substring(p)),k.push(e),p=g,A(k),w&&B()),I()}function M(e){p=e,A(k),k=[],S=o.indexOf(r,p)}function I(s){if(e.header&&!f&&N.length&&!d){var n=N[0],a=Object.create(null),i=new Set(n);let t=!1;for(let r=0;r<n.length;r++){let s=n[r];if(a[s=j(e.transformHeader)?e.transformHeader(s,r):s]){let e,o=a[s];for(;e=s+"_"+o,o++,i.has(e););i.add(e),n[r]=e,a[s]++,t=!0,(l=null===l?{}:l)[e]=s}else a[s]=1,n[r]=s;i.add(s)}t&&console.warn("Duplicate headers found and renamed."),d=!0}return{data:N,errors:C,meta:{delimiter:t,linebreak:r,aborted:m,truncated:!!s,cursor:_+(f||0),renamedHeaders:l}}}function B(){n(I()),N=[],C=[]}},this.abort=function(){m=!0},this.getCharIndex=function(){return p}}function x(e){var t=e.data,r=a[t.workerId],s=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var n={abort:function(){s=!0,g(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(j(r.userStep)){for(var i=0;i<t.results.data.length&&(r.userStep({data:t.results.data[i],errors:t.results.errors,meta:t.results.meta},n),!s);i++);delete t.results}else j(r.userChunk)&&(r.userChunk(t.results,n,t.file),delete t.results)}t.finished&&!s&&g(t.workerId,t.results)}function g(e,t){var r=a[e];j(r.userComplete)&&r.userComplete(t),r.terminate(),delete a[e]}function v(){throw Error("Not implemented.")}function b(e){if("object"!=typeof e||null===e)return e;var t,r=Array.isArray(e)?[]:{};for(t in e)r[t]=b(e[t]);return r}function y(e,t){return function(){e.apply(t,arguments)}}function j(e){return"function"==typeof e}return o.parse=function(t,s){var n,l,m,h=(s=s||{}).dynamicTyping||!1;if(j(h)&&(s.dynamicTypingFunction=h,h={}),s.dynamicTyping=h,s.transform=!!j(s.transform)&&s.transform,!s.worker||!o.WORKERS_SUPPORTED){let e;return h=null,o.NODE_STREAM_INPUT,"string"==typeof t?(t=65279!==(e=t).charCodeAt(0)?e:e.slice(1),h=new(s.download?d:u)(s)):!0===t.readable&&j(t.read)&&j(t.on)?h=new p(s):(r.File&&t instanceof File||t instanceof Object)&&(h=new c(s)),h.stream(t)}(h=!!o.WORKERS_SUPPORTED&&(l=r.URL||r.webkitURL||null,m=e.toString(),n=o.BLOB_URL||(o.BLOB_URL=l.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",m,")();"],{type:"text/javascript"}))),(n=new r.Worker(n)).onmessage=x,n.id=i++,a[n.id]=n)).userStep=s.step,h.userChunk=s.chunk,h.userComplete=s.complete,h.userError=s.error,s.step=j(s.step),s.chunk=j(s.chunk),s.complete=j(s.complete),s.error=j(s.error),delete s.worker,h.postMessage({input:t,config:s,workerId:h.id})},o.unparse=function(e,t){var r=!1,s=!0,n=",",a="\r\n",i='"',l=i+i,d=!1,c=null,u=!1,p=((()=>{if("object"==typeof t){if("string"!=typeof t.delimiter||o.BAD_DELIMITERS.filter(function(e){return -1!==t.delimiter.indexOf(e)}).length||(n=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(r=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(d=t.skipEmptyLines),"string"==typeof t.newline&&(a=t.newline),"string"==typeof t.quoteChar&&(i=t.quoteChar),"boolean"==typeof t.header&&(s=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw Error("Option columns is empty");c=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+i),t.escapeFormulae instanceof RegExp?u=t.escapeFormulae:"boolean"==typeof t.escapeFormulae&&t.escapeFormulae&&(u=/^[=+\-@\t\r].*$/)}})(),RegExp(h(i),"g"));if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return m(null,e,d);if("object"==typeof e[0])return m(c||Object.keys(e[0]),e,d)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||c),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),m(e.fields||[],e.data||[],d);throw Error("Unable to serialize unrecognized input");function m(e,t,r){var i="",o=("string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(e)&&0<e.length),l=!Array.isArray(t[0]);if(o&&s){for(var d=0;d<e.length;d++)0<d&&(i+=n),i+=f(e[d],d);0<t.length&&(i+=a)}for(var c=0;c<t.length;c++){var u=(o?e:t[c]).length,p=!1,m=o?0===Object.keys(t[c]).length:0===t[c].length;if(r&&!o&&(p="greedy"===r?""===t[c].join("").trim():1===t[c].length&&0===t[c][0].length),"greedy"===r&&o){for(var h=[],x=0;x<u;x++){var g=l?e[x]:x;h.push(t[c][g])}p=""===h.join("").trim()}if(!p){for(var v=0;v<u;v++){0<v&&!m&&(i+=n);var b=o&&l?e[v]:v;i+=f(t[c][b],v)}c<t.length-1&&(!r||0<u&&!m)&&(i+=a)}}return i}function f(e,t){var s,a;return null==e?"":e.constructor===Date?JSON.stringify(e).slice(1,25):(a=!1,u&&"string"==typeof e&&u.test(e)&&(e="'"+e,a=!0),s=e.toString().replace(p,l),(a=a||!0===r||"function"==typeof r&&r(e,t)||Array.isArray(r)&&r[t]||((e,t)=>{for(var r=0;r<t.length;r++)if(-1<e.indexOf(t[r]))return!0;return!1})(s,o.BAD_DELIMITERS)||-1<s.indexOf(n)||" "===s.charAt(0)||" "===s.charAt(s.length-1))?i+s+i:s)}},o.RECORD_SEP="\x1e",o.UNIT_SEP="\x1f",o.BYTE_ORDER_MARK="\uFEFF",o.BAD_DELIMITERS=["\r","\n",'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!s&&!!r.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=0xa00000,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=f,o.ParserHandle=m,o.NetworkStreamer=d,o.FileStreamer=c,o.StringStreamer=u,o.ReadableStreamStreamer=p,r.jQuery&&((t=r.jQuery).fn.parse=function(e){var s=e.config||{},n=[];return this.each(function(e){if(!("INPUT"===t(this).prop("tagName").toUpperCase()&&"file"===t(this).attr("type").toLowerCase()&&r.FileReader)||!this.files||0===this.files.length)return!0;for(var a=0;a<this.files.length;a++)n.push({file:this.files[a],inputElem:this,instanceConfig:t.extend({},s)})}),a(),this;function a(){if(0===n.length)j(e.complete)&&e.complete();else{var r,s,a,l=n[0];if(j(e.before)){var d=e.before(l.file,l.inputElem);if("object"==typeof d){if("abort"===d.action)return r=l.file,s=l.inputElem,a=d.reason,void(j(e.error)&&e.error({name:"AbortError"},r,s,a));if("skip"===d.action)return void i();"object"==typeof d.config&&(l.instanceConfig=t.extend(l.instanceConfig,d.config))}else if("skip"===d)return void i()}var c=l.instanceConfig.complete;l.instanceConfig.complete=function(e){j(c)&&c(e,l.file,l.inputElem),i()},o.parse(l.file,l.instanceConfig)}}function i(){n.splice(0,1),a()}}),n&&(r.onmessage=function(e){e=e.data,void 0===o.WORKER_ID&&e&&(o.WORKER_ID=e.workerId),"string"==typeof e.input?r.postMessage({workerId:o.WORKER_ID,results:o.parse(e.input,e.config),finished:!0}):(r.File&&e.input instanceof File||e.input instanceof Object)&&(e=o.parse(e.input,e.config))&&r.postMessage({workerId:o.WORKER_ID,results:e,finished:!0})}),(d.prototype=Object.create(l.prototype)).constructor=d,(c.prototype=Object.create(l.prototype)).constructor=c,(u.prototype=Object.create(u.prototype)).constructor=u,(p.prototype=Object.create(l.prototype)).constructor=p,o},"function"==typeof define&&define.amd?void 0!==(n=s())&&e.v(n):t.exports=s()},149649,193105,e=>{"use strict";var t=e.i(224859),r=e.i(268255),s=function(){return(s=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function n(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)0>t.indexOf(s[n])&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r}function a(e,t,r){if(r||2==arguments.length)for(var s,n=0,a=t.length;n<a;n++)!s&&n in t||(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function i(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){for(var r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];return e.some(function(e){return!i(t)&&e&&e.apply(void 0,a([t],r,!1)),i(t)})}}function l(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(e){return"Files"===e||"application/x-moz-file"===e}):!!e.target&&!!e.target.files}"function"==typeof SuppressedError&&SuppressedError;var d=function(e){var t=Array.isArray(e=Array.isArray(e)&&1===e.length?e[0]:e)?"one of ".concat(e.join(", ")):e;return{code:"file-invalid-type",message:"File type must be ".concat(t)}};function c(e){return null!=e}var u=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," bytes")}},p=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," bytes")}},m={code:"too-many-files",message:"Too many files"};function h(e){e.preventDefault()}var f={Link:"link",Button:"button"};function x(){return{CSVDownloader:function(){var e=this,s=function(s){var n=s.children,a=s.data,i=void 0===a?{}:a,o=s.filename,l=s.type,d=void 0===l?f.Link:l,c=s.style,u=void 0===c?{}:c,p=s.className,m=void 0===p?"":p,h=s.bom,x=void 0!==h&&h,g=s.config,v=void 0===g?{}:g,b=function(){var r,s,n;return r=void 0,s=void 0,n=function(){var e,r,s,n,a,l;return function(e,t){var r,s,n,a,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){var d=[o,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(i=0)),i;)try{if(r=1,s&&(n=2&d[0]?s.return:d[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,d[1])).done)return n;switch(s=0,n&&(d=[2&d[0],n.value]),d[0]){case 0:case 1:n=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,s=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(!(n=(n=i.trys).length>0&&n[n.length-1])&&(6===d[0]||2===d[0])){i=0;continue}if(3===d[0]&&(!n||d[1]>n[0]&&d[1]<n[3])){i.label=d[1];break}if(6===d[0]&&i.label<n[1]){i.label=n[1],n=d;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(d);break}n[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(e){d=[6,e],s=0}finally{r=n=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}}(this,function(d){switch(d.label){case 0:return e=x?"\uFEFF":"",r=null,s=null,"function"!=typeof i?[3,2]:[4,i()];case 1:i=d.sent(),d.label=2;case 2:return r="object"==typeof i?t.default.unparse(i,v):i,n=new Blob(["".concat(e).concat(r)],{type:"text/csv;charset=utf-8;"}),s=(a=window.navigator).msSaveBlob?a.msSaveBlob(n,"".concat(o,".csv")):window.URL.createObjectURL(n),(l=document.createElement("a")).href=s,l.setAttribute("download","".concat(o,".csv")),l.click(),l.remove(),[2]}})},new(s||(s=Promise))(function(t,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var r;e.done?t(e.value):((r=e.value)instanceof s?r:new s(function(e){e(r)})).then(i,o)}l((n=n.apply(e,r||[])).next())})};return r.default.createElement(r.default.Fragment,null,d===f.Button?r.default.createElement("button",{onClick:function(){return b()},style:u,className:m},n):r.default.createElement("a",{onClick:function(){return b()},style:u,className:m},n))};return r.default.useMemo(function(){return s},[])}(),Type:f}}var g={borderRadius:3,boxShadow:"inset 0 1px 3px rgba(0, 0, 0, .2)",bottom:14,width:"100%"},v={backgroundColor:"#659cef",borderRadius:3,height:10,transition:"width 500ms ease-in-out"};function b(e){var t=e.style,s=e.className,n=e.display,a=(0,r.useState)(0),i=a[0],o=a[1];return(0,r.useEffect)(function(){o(e.percentage)},[e.percentage]),r.default.createElement("span",{style:Object.assign({},g,v,t,{width:"".concat(i,"%"),display:n}),className:s})}function y(e){var t=e.color,s=e.width,n=e.height;return r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:void 0===s?23:s,height:void 0===n?23:n,viewBox:"0 0 512 512"},r.default.createElement("path",{fill:t,d:"M504.1 256C504.1 119 393 7.9 256 7.9S7.9 119 7.9 256 119 504.1 256 504.1 504.1 393 504.1 256z"}),r.default.createElement("path",{fill:"#FFF",d:"M285 256l72.5-84.2c7.9-9.2 6.9-23-2.3-31-9.2-7.9-23-6.9-30.9 2.3L256 222.4l-68.2-79.2c-7.9-9.2-21.8-10.2-31-2.3-9.2 7.9-10.2 21.8-2.3 31L227 256l-72.5 84.2c-7.9 9.2-6.9 23 2.3 31 4.1 3.6 9.2 5.3 14.3 5.3 6.2 0 12.3-2.6 16.6-7.6l68.2-79.2 68.2 79.2c4.3 5 10.5 7.6 16.6 7.6 5.1 0 10.2-1.7 14.3-5.3 9.2-7.9 10.2-21.8 2.3-31L285 256z"}))}function j(){var e;return{CSVReader:(e=function(e){var f=e.children,x=e.accept,g=void 0===x?"text/csv, .csv, application/vnd.ms-excel":x,v=e.config,j=void 0===v?{}:v,C=e.minSize,k=void 0===C?0:C,_=e.maxSize,E=void 0===_?1/0:_,L=e.maxFiles,T=void 0===L?1:L,S=e.disabled,R=void 0!==S&&S,D=e.noClick,F=void 0!==D&&D,A=e.noDrag,P=void 0!==A&&A,O=e.noDragEventsBubbling,M=void 0!==O&&O,I=e.noKeyboard,B=void 0!==I&&I,U=e.multiple,q=void 0!==U&&U,z=e.required,$=void 0!==z&&z,K=e.preventDropOnDocument,W=void 0===K||K,H=e.onUploadAccepted,Q=e.validator,V=e.onUploadRejected,J=e.onDragEnter,G=e.onDragOver,Z=e.onDragLeave,X=(0,r.useRef)(null),Y=(0,r.useRef)(null),ee=(0,r.useRef)([]),et=(0,r.useReducer)(N,w),er=et[0],es=et[1],en=er.acceptedFile,ea=er.displayProgressBar,ei=er.progressBarPercentage,eo=er.draggedFiles,el=er.isFileDialogActive,ed=function(e){Y.current&&Y.current.contains(e.target)||(e.preventDefault(),ee.current=[])};(0,r.useEffect)(function(){return W&&(document.addEventListener("dragover",h,!1),document.addEventListener("drop",ed,!1)),function(){W&&(document.removeEventListener("dragover",h),document.removeEventListener("drop",ed))}},[Y,W]);var ec=function(e){return R?null:e},eu=function(e){return P?null:ec(e)},ep=function(e){M&&e.stopPropagation()},em=function(e){e.preventDefault(e),e.persist(),ep(e)},eh=function(e){es({displayProgressBar:e,type:"setDisplayProgressBar"})},ef=function(e){es({progressBarPercentage:e,type:"setProgressBarPercentage"})},ex=(0,r.useCallback)(function(){X.current&&er.displayProgressBar&&(es({type:"openDialog"}),X.current.value=null,X.current.click())},[es]),eg=function(){el&&setTimeout(function(){X.current&&(X.current.files.length||es({type:"closeDialog"}))},300)};(0,r.useEffect)(function(){return window.addEventListener("focus",eg,!1),function(){window.removeEventListener("focus",eg,!1)}},[X,el]);var ev=(0,r.useCallback)(function(){var e,t;F||(void 0===e&&(e=window.navigator.userAgent),-1!==(t=e).indexOf("MSIE")||-1!==t.indexOf("Trident/")||-1!==e.indexOf("Edge/")?setTimeout(ex,0):ex())},[X,F]),eb=(0,r.useCallback)(function(e){if(em(e),ef(0),ee.current=[],l(e)&&(!i(e)||M)){var r=[],s=[];if(Array.from(e.target.files||e.dataTransfer&&e.dataTransfer.files).forEach(function(e){var t,n=[t="application/x-moz-file"===e.type||function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(","),s=e.name||"",n=(e.type||"").toLowerCase(),a=n.replace(/\/.*$/,"");return r.some(function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?s.toLowerCase().endsWith(t):t.endsWith("/*")?a===t.replace(/\/.*$/,""):n===t})}return!0}(e,g),t?null:d(g)],a=n[0],i=n[1],o=function(e,t,r){if(c(e.size))if(c(t)&&c(r)){if(e.size>r)return[!1,u(r)];if(e.size<t)return[!1,p(t)]}else{if(c(t)&&e.size<t)return[!1,p(t)];if(c(r)&&e.size>r)return[!1,u(r)]}return[!0,null]}(e,k,E),l=o[0],m=o[1],h=Q?Q(e):null;if(a&&l&&!h)r.push(e);else{var f=[i,m];h&&(f=f.concat(h)),s.push({file:e,errors:f.filter(function(e){return e})})}}),(!q&&r.length>1||q&&T>=1&&r.length>T)&&(r.forEach(function(e){s.push({file:e,errors:[m]})}),r.splice(0)),es({acceptedFiles:r,fileRejections:s,type:"setFiles"}),eh("block"),s.length>0&&V&&V(s,e),r.length>0&&H){var n={},a=[],o=[],h=[],f=new window.FileReader,x=0;r.forEach(function(e){es({acceptedFile:e,type:"setFile"}),n={complete:(null==j?void 0:j.complete)||(null==j?void 0:j.step)?j.complete:function(){H({data:a,errors:o,meta:h},e)},step:(null==j?void 0:j.step)?j.step:function(t){if(a.push(t.data),t.errors.length>0&&o.push(t.errors),t.length>0&&h.push(t[0].meta),j&&j.preview)x=Math.round(a.length/j.preview*100),a.length===j.preview&&H({data:a,errors:o,meta:h},e);else{var r=Math.round(t.meta.cursor/e.size*100);if(r===x)return;x=r}ef(x)}},n=Object.assign({},j,n),f.onload=function(e){t.default.parse(e.target.result,n)},f.onloadend=function(){setTimeout(function(){eh("none")},2e3)},f.readAsText(e,j.encoding||"utf-8")})}}},[q,g,k,E,T,Q,H]),ey=(0,r.useCallback)(function(e){ep(e)},[]),ej=function(e){return B?null:ec(e)},ew=(0,r.useCallback)(function(e){em(e),ee.current=a(a([],ee.current,!0),[e.target],!1),l(e)&&(!i(e)||M)&&(es({draggedFiles:eo,isDragActive:!0,type:"setDraggedFiles"}),J&&J(e))},[J,M]),eN=(0,r.useCallback)(function(e){em(e);var t=l(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(e){}return t&&G&&G(e),!1},[G,M]),eC=(0,r.useCallback)(function(e){em(e);var t=ee.current.filter(function(e){return Y.current&&Y.current.contains(e)}),r=t.indexOf(e.target);-1!==r&&t.splice(r,1),ee.current=t,t.length>0||(es({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),l(e)&&Z&&Z(e))},[Y,Z,M]),ek=(0,r.useCallback)(function(e){Y.current&&Y.current.isEqualNode(e.target)&&("Space"!==e.key&&"Enter"!==e.key||(e.preventDefault(),ex()))},[Y,X]),e_=(0,r.useCallback)(function(){es({type:"focus"})},[]),eE=(0,r.useCallback)(function(){es({type:"blur"})},[]),eL=(0,r.useMemo)(function(){return function(e){void 0===e&&(e={});var t=e.onClick,r=e.onDrop,a=e.onDragOver,i=e.onDragLeave,l=e.onKeyDown,d=e.onFocus,c=e.onBlur,u=e.onDragEnter,p=n(e,["onClick","onDrop","onDragOver","onDragLeave","onKeyDown","onFocus","onBlur","onDragEnter"]);return s({onClick:ec(o(void 0===t?function(){}:t,ev)),onDrop:eu(o(void 0===r?function(){}:r,eb)),onDragEnter:eu(o(void 0===u?function(){}:u,ew)),onDragOver:eu(o(void 0===a?function(){}:a,eN)),onDragLeave:eu(o(void 0===i?function(){}:i,eC)),onKeyDown:ej(o(void 0===l?function(){}:l,ek)),onFocus:ej(o(void 0===d?function(){}:d,e_)),onBlur:ej(o(void 0===c?function(){}:c,eE))},p)}},[Y,ek,e_,eE,ev,ew,eN,eC,eb,B,P,R]),eT=(0,r.useMemo)(function(){return function(e){void 0===e&&(e={});var t,r=e.refKey,a=e.onChange,i=e.onClick,l=n(e,["refKey","onChange","onClick"]),d=((t={accept:g,multiple:q,required:$,type:"file",style:{display:"none"},onChange:ec(o(void 0===a?function(){}:a,eb)),onClick:ec(o(void 0===i?function(){}:i,ey)),autoComplete:"off",tabIndex:-1})[void 0===r?"ref":r]=X,t);return s(s({},d),l)}},[X,g,eb,R]),eS=(0,r.useCallback)(function(e){X.current.value="",es({type:"reset"}),e.stopPropagation()},[]),eR=(0,r.useMemo)(function(){return function(e){void 0===e&&(e={});var t=e.onClick,r=n(e,["onClick"]);return s({onClick:ec(o(void 0===t?function(){}:t,eS))},r)}},[eS]);return r.default.createElement(r.default.Fragment,null,r.default.createElement("input",s({},eT())),f({getRootProps:eL,acceptedFile:en,ProgressBar:function(e){return r.default.createElement(b,s({display:ea,percentage:ei},e))},getRemoveFileProps:eR,Remove:function(e){return r.default.createElement(y,s({},e))}}))},(0,r.useMemo)(function(){return e},[]))}}var w={displayProgressBar:"none",progressBarPercentage:0,isDragActive:!1,isFileDialogActive:!1,isFocused:!1,draggedFiles:[],acceptedFiles:[],acceptedFile:null};function N(e,t){switch(t.type){case"openDialog":return s(s({},e),{isFileDialogActive:!0});case"closeDialog":return s(s({},e),{isFileDialogActive:!1});case"setFiles":return s(s({},e),{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"setFile":return s(s({},e),{acceptedFile:t.acceptedFile});case"setDisplayProgressBar":return s(s({},e),{displayProgressBar:t.displayProgressBar});case"setProgressBarPercentage":return s(s({},e),{progressBarPercentage:t.progressBarPercentage});case"setDraggedFiles":var r=t.isDragActive,n=t.draggedFiles;return s(s({},e),{draggedFiles:n,isDragActive:r});case"focus":return s(s({},e),{isFocused:!0});case"blur":return s(s({},e),{isFocused:!1});case"reset":return s({},w);default:return e}}t.default.BAD_DELIMITERS,t.default.RECORD_SEP,t.default.UNIT_SEP,t.default.WORKERS_SUPPORTED,t.default.LocalChunkSize,t.default.DefaultDelimiter,e.s(["useCSVDownloader",()=>x,"useCSVReader",()=>j],149649);var C=e.i(429524);e.s(["Download02",()=>C.default],193105)},748573,860169,e=>{"use strict";var t=e.i(563199),r=e.i(837699),s=e.i(268255),n=e.i(391185),a=e.i(935139);e.s(["default",0,e=>{let{className:i,panelClassName:o,showLeftIcon:l=!0,leftIcon:d,value:c,items:u,onSelect:p,onClear:m}=e,[h,f]=(0,s.useState)(!1),x=(0,s.useMemo)(()=>u.find(e=>e.value===c)?.name||"",[u,c]);return(0,t.jsx)(n.PortalToFollowElem,{open:h,onOpenChange:f,placement:"bottom-start",offset:4,children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(n.PortalToFollowElemTrigger,{onClick:()=>f(e=>!e),className:"block",children:(0,t.jsxs)("div",{className:(0,a.cn)("flex min-h-8 cursor-pointer items-center rounded-lg border-[0.5px] border-transparent bg-components-input-bg-normal px-2 py-1 hover:bg-state-base-hover-alt",h&&!c&&"!bg-state-base-hover-alt hover:bg-state-base-hover-alt",!h&&!!c&&"!border-components-button-secondary-border !bg-components-button-secondary-bg shadow-xs hover:border-components-button-secondary-border-hover hover:!bg-components-button-secondary-bg-hover",h&&!!c&&"!border-components-button-secondary-border-hover !bg-components-button-secondary-bg-hover shadow-xs hover:border-components-button-secondary-border-hover hover:!bg-components-button-secondary-bg-hover",i),children:[l&&(0,t.jsx)("div",{className:"p-0.5",children:d||(0,t.jsx)(r.RiFilter3Line,{className:(0,a.cn)("h-4 w-4 text-text-tertiary",!!c&&"text-text-secondary")})}),(0,t.jsx)("div",{className:"flex grow items-center gap-0.5 first-line:p-1",children:(0,t.jsx)("div",{className:(0,a.cn)("system-sm-regular text-text-tertiary",!!c&&"text-text-secondary"),children:x})}),!c&&(0,t.jsx)(r.RiArrowDownSLine,{className:"h-4 w-4 text-text-tertiary"}),!!c&&(0,t.jsx)("div",{className:"group/clear cursor-pointer p-[1px]",onClick:e=>{e.stopPropagation(),m()},children:(0,t.jsx)(r.RiCloseCircleFill,{className:"h-3.5 w-3.5 text-text-quaternary group-hover/clear:text-text-tertiary"})})]})}),(0,t.jsx)(n.PortalToFollowElemContent,{className:"z-[1002]",children:(0,t.jsx)("div",{className:(0,a.cn)("relative w-[240px] rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg-blur shadow-lg",o),children:(0,t.jsx)("div",{className:"max-h-72 overflow-auto p-1",children:u.map(e=>(0,t.jsxs)("div",{className:"flex cursor-pointer items-center gap-2 rounded-lg px-2 py-[6px] pl-3 hover:bg-state-base-hover",onClick:()=>{p(e),f(!1)},children:[(0,t.jsx)("div",{title:e.name,className:"system-sm-medium grow truncate text-text-secondary",children:e.name}),c===e.value&&(0,t.jsx)(r.RiCheckLine,{className:"h-4 w-4 shrink-0 text-util-colors-blue-light-blue-light-600"})]},e.value))})})})]})})}],748573),e.i(152567);var i=e.i(408767);e.s(["default",0,e=>{let{order:o,value:l,items:d,onSelect:c}=e,{t:u}=(0,i.useTranslation)(),[p,m]=(0,s.useState)(!1),h=(0,s.useMemo)(()=>d.find(e=>e.value===l)?.name||"",[d,l]);return(0,t.jsxs)("div",{className:"inline-flex items-center",children:[(0,t.jsx)(n.PortalToFollowElem,{open:p,onOpenChange:m,placement:"bottom-start",offset:4,children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(n.PortalToFollowElemTrigger,{onClick:()=>m(e=>!e),className:"block",children:(0,t.jsxs)("div",{className:(0,a.cn)("flex min-h-8 cursor-pointer items-center rounded-l-lg bg-components-input-bg-normal px-2 py-1 hover:bg-state-base-hover-alt",p&&"!bg-state-base-hover-alt hover:bg-state-base-hover-alt"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-0.5 px-1",children:[(0,t.jsx)("div",{className:"system-sm-regular text-text-tertiary",children:u("filter.sortBy",{ns:"appLog"})}),(0,t.jsx)("div",{className:(0,a.cn)("system-sm-regular text-text-tertiary",!!l&&"text-text-secondary"),children:h})]}),(0,t.jsx)(r.RiArrowDownSLine,{className:"h-4 w-4 text-text-tertiary"})]})}),(0,t.jsx)(n.PortalToFollowElemContent,{className:"z-[1002]",children:(0,t.jsx)("div",{className:"relative w-[240px] rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg-blur shadow-lg",children:(0,t.jsx)("div",{className:"max-h-72 overflow-auto p-1",children:d.map(e=>(0,t.jsxs)("div",{className:"flex cursor-pointer items-center gap-2 rounded-lg px-2 py-[6px] pl-3 hover:bg-state-base-hover",onClick:()=>{c(`${o}${e.value}`),m(!1)},children:[(0,t.jsx)("div",{title:e.name,className:"system-sm-medium grow truncate text-text-secondary",children:e.name}),l===e.value&&(0,t.jsx)(r.RiCheckLine,{className:"h-4 w-4 shrink-0 text-util-colors-blue-light-blue-light-600"})]},e.value))})})})]})}),(0,t.jsxs)("div",{className:"ml-px cursor-pointer rounded-r-lg bg-components-button-tertiary-bg p-2 hover:bg-components-button-tertiary-bg-hover",onClick:()=>c(`${o?"":"-"}${l}`),children:[!o&&(0,t.jsx)(r.RiSortAsc,{className:"h-4 w-4 text-components-button-tertiary-text"}),o&&(0,t.jsx)(r.RiSortDesc,{className:"h-4 w-4 text-components-button-tertiary-text"})]})]})}],860169)},125955,(e,t,r)=>{e.e,t.exports=function(){"use strict";var e="month",t="quarter";return function(r,s){var n=s.prototype;n.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var a=n.add;n.add=function(r,s){return r=Number(r),this.$utils().p(s)===t?this.add(3*r,e):a.bind(this)(r,s)};var i=n.startOf;n.startOf=function(r,s){var n=this.$utils(),a=!!n.u(s)||s;if(n.p(r)===t){var o=this.quarter()-1;return a?this.month(3*o).startOf(e).startOf("day"):this.month(3*o+2).endOf(e).endOf("day")}return i.bind(this)(r,s)}}}()},929808,552455,e=>{"use strict";var t=e.i(563199),r=e.i(837699),s=e.i(585458),n=e.i(125955);e.i(152567);var a=e.i(408767),i=e.i(748573),o=e.i(291631),l=e.i(860169),d=e.i(562572),c=e.i(367916);let u=e=>(0,d.useQuery)({queryKey:["log","annotations-count",e],queryFn:()=>(0,c.get)(`/apps/${e}/annotations/count`),enabled:!!e});e.s(["useAnnotationsCount",0,u,"useChatConversationDetail",0,(e,t)=>(0,d.useQuery)({queryKey:["log","chat-conversation-detail",e,t],queryFn:()=>(0,c.get)(`/apps/${e}/chat-conversations/${t}`),enabled:!!e&&!!t}),"useChatConversations",0,e=>{let{appId:t,params:r}=e;return(0,d.useQuery)({queryKey:["log","chat-conversations",t,r],queryFn:()=>(0,c.get)(`/apps/${t}/chat-conversations`,{params:r}),enabled:!!t})},"useCompletionConversationDetail",0,(e,t)=>(0,d.useQuery)({queryKey:["log","completion-conversation-detail",e,t],queryFn:()=>(0,c.get)(`/apps/${e}/completion-conversations/${t}`),enabled:!!e&&!!t}),"useCompletionConversations",0,e=>{let{appId:t,params:r}=e;return(0,d.useQuery)({queryKey:["log","completion-conversations",t,r],queryFn:()=>(0,c.get)(`/apps/${t}/completion-conversations`,{params:r}),enabled:!!t})},"useWorkflowLogs",0,e=>{let{appId:t,params:r}=e;return(0,d.useQuery)({queryKey:["log","workflow-logs",t,r],queryFn:()=>(0,c.get)(`/apps/${t}/workflow-app-logs`,{params:r}),enabled:!!t})}],552455),s.default.extend(n.default);let p=(0,s.default)(),m={1:{value:0,name:"today"},2:{value:7,name:"last7days"},3:{value:28,name:"last4weeks"},4:{value:p.diff(p.subtract(3,"month"),"day"),name:"last3months"},5:{value:p.diff(p.subtract(12,"month"),"day"),name:"last12months"},6:{value:p.diff(p.startOf("month"),"day"),name:"monthToDate"},7:{value:p.diff(p.startOf("quarter"),"day"),name:"quarterToDate"},8:{value:p.diff(p.startOf("year"),"day"),name:"yearToDate"},9:{value:-1,name:"allTime"}};e.s(["TIME_PERIOD_MAPPING",0,m,"default",0,e=>{let{isChatMode:s,appId:n,queryParams:d,setQueryParams:c}=e,{data:p,isLoading:h}=u(n),{t:f}=(0,a.useTranslation)();return h||!p?null:(0,t.jsxs)("div",{className:"mb-2 flex flex-row flex-wrap items-center gap-2",children:[(0,t.jsx)(i.default,{className:"min-w-[150px]",panelClassName:"w-[270px]",leftIcon:(0,t.jsx)(r.RiCalendarLine,{className:"h-4 w-4 text-text-secondary"}),value:d.period,onSelect:e=>{c({...d,period:e.value})},onClear:()=>c({...d,period:"9"}),items:Object.entries(m).map(e=>{let[t,r]=e;return{value:t,name:f(`filter.period.${r.name}`,{ns:"appLog"})}})}),(0,t.jsx)(i.default,{className:"min-w-[150px]",panelClassName:"w-[270px]",showLeftIcon:!1,value:d.annotation_status||"all",onSelect:e=>{c({...d,annotation_status:e.value})},onClear:()=>c({...d,annotation_status:"all"}),items:[{value:"all",name:f("filter.annotation.all",{ns:"appLog"})},{value:"annotated",name:f("filter.annotation.annotated",{ns:"appLog",count:p?.count})},{value:"not_annotated",name:f("filter.annotation.not_annotated",{ns:"appLog"})}]}),(0,t.jsx)(o.default,{wrapperClassName:"w-[200px]",showLeftIcon:!0,showClearIcon:!0,value:d.keyword,placeholder:f("operation.search",{ns:"common"}),onChange:e=>{c({...d,keyword:e.target.value})},onClear:()=>c({...d,keyword:""})}),s&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"h-3.5 w-px bg-divider-regular"}),(0,t.jsx)(l.default,{order:d.sort_by?.startsWith("-")?"-":"",value:d.sort_by?.replace("-","")||"created_at",items:[{value:"created_at",name:f("table.header.time",{ns:"appLog"})},{value:"updated_at",name:f("table.header.updatedTime",{ns:"appLog"})}],onSelect:e=>{c({...d,sort_by:e})}})]})]})}],929808)},739780,e=>{"use strict";var t=e.i(563199);e.i(152567);var r=e.i(408767),s=e.i(481162),n=e.i(216669),a=e.i(955371);e.i(493599);var i=e.i(252386);e.i(213284);var o=e.i(891670);e.i(17744);var l=e.i(737222);e.i(610580);var d=e.i(384761),c=e.i(390622);e.i(905691);var u=e.i(52592),p=e.i(70380),m=e.i(157884);let h=e=>{let{status:s,executor:n,startTime:a,time:i,tokens:o,steps:l=1,showSteps:d=!0}=e,{t:c}=(0,r.useTranslation)(),{formatTime:u}=(0,m.default)();return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"system-xs-medium-uppercase h-6 py-1 text-text-tertiary",children:c("meta.title",{ns:"runLog"})}),(0,t.jsxs)("div",{className:"py-1",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"system-xs-regular w-[104px] shrink-0 truncate px-2 py-1.5 text-text-tertiary",children:c("meta.status",{ns:"runLog"})}),(0,t.jsxs)("div",{className:"system-xs-regular grow px-2 py-1.5 text-text-secondary",children:["running"===s&&(0,t.jsx)("div",{className:"my-1 h-2 w-16 rounded-sm bg-text-quaternary"}),"succeeded"===s&&(0,t.jsx)("span",{children:"SUCCESS"}),"partial-succeeded"===s&&(0,t.jsx)("span",{children:"PARTIAL SUCCESS"}),"exception"===s&&(0,t.jsx)("span",{children:"EXCEPTION"}),"failed"===s&&(0,t.jsx)("span",{children:"FAIL"}),"stopped"===s&&(0,t.jsx)("span",{children:"STOP"})]})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"system-xs-regular w-[104px] shrink-0 truncate px-2 py-1.5 text-text-tertiary",children:c("meta.executor",{ns:"runLog"})}),(0,t.jsxs)("div",{className:"system-xs-regular grow px-2 py-1.5 text-text-secondary",children:["running"===s&&(0,t.jsx)("div",{className:"my-1 h-2 w-[88px] rounded-sm bg-text-quaternary"}),"running"!==s&&(0,t.jsx)("span",{children:n||"N/A"})]})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"system-xs-regular w-[104px] shrink-0 truncate px-2 py-1.5 text-text-tertiary",children:c("meta.startTime",{ns:"runLog"})}),(0,t.jsxs)("div",{className:"system-xs-regular grow px-2 py-1.5 text-text-secondary",children:["running"===s&&(0,t.jsx)("div",{className:"my-1 h-2 w-[72px] rounded-sm bg-text-quaternary"}),"running"!==s&&(0,t.jsx)("span",{children:a?u(a,c("dateTimeFormat",{ns:"appLog"})):"-"})]})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"system-xs-regular w-[104px] shrink-0 truncate px-2 py-1.5 text-text-tertiary",children:c("meta.time",{ns:"runLog"})}),(0,t.jsxs)("div",{className:"system-xs-regular grow px-2 py-1.5 text-text-secondary",children:["running"===s&&(0,t.jsx)("div",{className:"my-1 h-2 w-[72px] rounded-sm bg-text-quaternary"}),"running"!==s&&(0,t.jsx)("span",{children:i?`${i.toFixed(3)}s`:"-"})]})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"system-xs-regular w-[104px] shrink-0 truncate px-2 py-1.5 text-text-tertiary",children:c("meta.tokens",{ns:"runLog"})}),(0,t.jsxs)("div",{className:"system-xs-regular grow px-2 py-1.5 text-text-secondary",children:["running"===s&&(0,t.jsx)("div",{className:"my-1 h-2 w-[48px] rounded-sm bg-text-quaternary"}),"running"!==s&&(0,t.jsx)("span",{children:`${o||0} Tokens`})]})]}),d&&(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"system-xs-regular w-[104px] shrink-0 truncate px-2 py-1.5 text-text-tertiary",children:c("meta.steps",{ns:"runLog"})}),(0,t.jsxs)("div",{className:"system-xs-regular grow px-2 py-1.5 text-text-secondary",children:["running"===s&&(0,t.jsx)("div",{className:"my-1 h-2 w-[24px] rounded-sm bg-text-quaternary"}),"running"!==s&&(0,t.jsx)("span",{children:l})]})]})]})]})};var f=e.i(40720);e.s(["default",0,e=>{let{nodeInfo:m,inputs:x,inputs_truncated:g,process_data:v,process_data_truncated:b,outputs:y,outputs_truncated:j,outputs_full_content:w,status:N,error:C,elapsed_time:k,total_tokens:_,created_at:E,created_by:L,steps:T,showSteps:S,exceptionCounts:R,execution_metadata:D,isListening:F=!1,handleShowIterationResultList:A,handleShowLoopResultList:P,onShowRetryDetail:O,handleShowAgentOrToolLog:M}=e,{t:I}=(0,r.useTranslation)(),B=m?.node_type===c.BlockEnum.Iteration&&!!m?.details?.length,U=m?.node_type===c.BlockEnum.Loop&&!!m?.details?.length,q=(0,u.hasRetryNode)(m?.node_type)&&!!m?.retryDetail?.length,z=m?.node_type===c.BlockEnum.Agent&&!!m?.agentLog?.length,$=m?.node_type===c.BlockEnum.Tool&&!!m?.agentLog?.length;return(0,t.jsxs)("div",{className:"bg-components-panel-bg py-2",children:[(0,t.jsx)("div",{className:"px-4 py-2",children:(0,t.jsx)(f.default,{status:N,time:k,tokens:_,error:C,exceptionCounts:R,isListening:F})}),(0,t.jsxs)("div",{className:"px-4",children:[B&&A&&(0,t.jsx)(o.IterationLogTrigger,{nodeInfo:m,onShowIterationResultList:A}),U&&P&&(0,t.jsx)(l.LoopLogTrigger,{nodeInfo:m,onShowLoopResultList:P}),q&&O&&(0,t.jsx)(d.RetryLogTrigger,{nodeInfo:m,onShowRetryResultList:O}),(z||$)&&M&&(0,t.jsx)(i.AgentLogTrigger,{nodeInfo:m,onShowAgentOrToolLog:M})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 px-4 py-2",children:[(0,t.jsx)(s.default,{readOnly:!0,title:(0,t.jsx)("div",{children:I("common.input",{ns:"workflow"}).toLocaleUpperCase()}),language:a.CodeLanguage.json,value:x,isJSONStringifyBeauty:!0,footer:g&&(0,t.jsx)(p.default,{textHasNoExport:!0,className:"mx-1 mb-1 mt-2 h-7"})}),v&&(0,t.jsx)(s.default,{readOnly:!0,title:(0,t.jsx)("div",{children:I("common.processData",{ns:"workflow"}).toLocaleUpperCase()}),language:a.CodeLanguage.json,value:v,isJSONStringifyBeauty:!0,footer:b&&(0,t.jsx)(p.default,{textHasNoExport:!0,className:"mx-1 mb-1 mt-2 h-7"})}),(y||"running"===N)&&(0,t.jsx)(s.default,{readOnly:!0,title:(0,t.jsx)("div",{children:I("common.output",{ns:"workflow"}).toLocaleUpperCase()}),language:a.CodeLanguage.json,value:y,isJSONStringifyBeauty:!0,tip:(0,t.jsx)(n.default,{type:D?.error_strategy}),footer:j&&(0,t.jsx)(p.default,{textHasNoExport:!0,downloadUrl:w?.download_url,className:"mx-1 mb-1 mt-2 h-7"})})]}),(0,t.jsx)("div",{className:"px-4 py-2",children:(0,t.jsx)("div",{className:"divider-subtle h-[0.5px]"})}),(0,t.jsx)("div",{className:"px-4 py-2",children:(0,t.jsx)(h,{status:N,executor:L,startTime:E,time:k,tokens:_,steps:T,showSteps:S})})]})}],739780)},344595,e=>{"use strict";var t=e.i(563199),r=e.i(268255);e.i(152567);var s=e.i(408767),n=e.i(339548),a=e.i(449980),i=e.i(137667),o=e.i(390622),l=e.i(933548),d=e.i(935139);e.i(275225);var c=e.i(705405),u=e.i(925818);e.i(237855);var p=e.i(297162),m=e.i(223314),h=e.i(379415),f=e.i(481162),x=e.i(955371),g=e.i(51828);let v=e=>{let{isRunning:s,outputs:n,error:a,height:i}=e,o=(0,r.useMemo)(()=>{if(!n||"object"!=typeof n)return!1;let e=Object.keys(n),t=n[e[0]];return 1===e.length&&("string"==typeof t||Array.isArray(t)&&t.every(e=>"string"==typeof e))},[n]),l=(0,r.useMemo)(()=>{let e=[];if(!n||Object.keys(n).length>1)return e;for(let t in n)Array.isArray(n[t])?n[t].map(t=>(t?.dify_model_identity==="__dify__file__"&&e.push(t),null)):n[t]?.dify_model_identity==="__dify__file__"&&e.push(n[t]);return(0,m.getProcessedFilesFromResponse)(e)},[n]);return(0,t.jsxs)("div",{className:"p-2",children:[s&&(0,t.jsx)("div",{className:"pl-[26px] pt-4",children:(0,t.jsx)(u.default,{type:"text"})}),!s&&a&&(0,t.jsx)("div",{className:"px-4",children:(0,t.jsx)(g.default,{status:"failed",children:a})}),!s&&!n&&(0,t.jsx)("div",{className:"px-4 py-2",children:(0,t.jsx)(h.Markdown,{content:"No Output"})}),o&&(0,t.jsx)("div",{className:"px-4 py-2",children:(0,t.jsx)(h.Markdown,{content:Array.isArray(n[Object.keys(n)[0]])?n[Object.keys(n)[0]].join("\n"):n[Object.keys(n)[0]]||""})}),l.length>0&&(0,t.jsx)("div",{className:"px-4 py-2",children:(0,t.jsx)(p.FileList,{files:l,showDeleteAction:!1,showDownloadAction:!0,canPreview:!0})}),!o&&n&&Object.keys(n).length>0&&i>0&&(0,t.jsx)("div",{className:"flex flex-col gap-2",children:(0,t.jsx)(f.default,{showFileList:!0,readOnly:!0,title:(0,t.jsx)("div",{tabIndex:0,children:"Output"}),language:x.CodeLanguage.json,value:JSON.stringify(n,null,2),isJSONStringifyBeauty:!0,height:i?(i-16)/2:void 0})})]})};var b=e.i(739780),y=e.i(40720),j=e.i(567898);e.s(["default",0,e=>{let{hideResult:u,activeTab:p="RESULT",getResultCallback:m,runDetailUrl:h,tracingListUrl:f}=e,{t:x}=(0,s.useTranslation)(),{notify:g}=(0,n.useContext)(i.ToastContext),[w,N]=(0,r.useState)(p),[C,k]=(0,r.useState)(!0),[_,E]=(0,r.useState)(),[L,T]=(0,r.useState)([]),S=(0,c.useStore)(e=>e.isListening),R=(0,r.useMemo)(()=>_?.created_by_role==="account"?_.created_by_account?.name||"":_?.created_by_role==="end_user"?_.created_by_end_user?.session_id||"":"N/A",[_]),D=(0,r.useCallback)(async()=>{try{let e=await (0,l.fetchRunDetail)(h);E(e),m&&m(e)}catch(e){g({type:"error",message:`${e}`})}},[g,m,h]),F=(0,r.useCallback)(async()=>{try{let{data:e}=await (0,l.fetchTracingList)({url:f});T(e)}catch(e){g({type:"error",message:`${e}`})}},[g,f]),A=(0,r.useCallback)(async()=>{k(!0),await D(),await F(),k(!1)},[D,F]),P=async e=>{N(e),"RESULT"===e&&h&&await D(),f&&await F()};(0,r.useEffect)(()=>{S&&N("DETAIL")},[S]),(0,r.useEffect)(()=>{h&&f&&A()},[h,f]);let[O,M]=(0,r.useState)(0),I=(0,r.useRef)(null);return(0,r.useEffect)(()=>{I.current&&M(I.current?.clientHeight-16-16-2-1)},[C]),(0,t.jsxs)("div",{className:"relative flex grow flex-col",children:[(0,t.jsxs)("div",{className:"flex shrink-0 items-center border-b-[0.5px] border-divider-subtle px-4",children:[!u&&(0,t.jsx)("div",{className:(0,d.cn)("system-sm-semibold-uppercase mr-6 cursor-pointer border-b-2 border-transparent py-3 text-text-tertiary","RESULT"===w&&"!border-util-colors-blue-brand-blue-brand-600 text-text-primary"),onClick:()=>P("RESULT"),children:x("result",{ns:"runLog"})}),(0,t.jsx)("div",{className:(0,d.cn)("system-sm-semibold-uppercase mr-6 cursor-pointer border-b-2 border-transparent py-3 text-text-tertiary","DETAIL"===w&&"!border-util-colors-blue-brand-blue-brand-600 text-text-primary"),onClick:()=>P("DETAIL"),children:x("detail",{ns:"runLog"})}),(0,t.jsx)("div",{className:(0,d.cn)("system-sm-semibold-uppercase mr-6 cursor-pointer border-b-2 border-transparent py-3 text-text-tertiary","TRACING"===w&&"!border-util-colors-blue-brand-blue-brand-600 text-text-primary"),onClick:()=>P("TRACING"),children:x("tracing",{ns:"runLog"})})]}),(0,t.jsxs)("div",{ref:I,className:(0,d.cn)("relative h-0 grow overflow-y-auto rounded-b-xl bg-components-panel-bg"),children:[C&&(0,t.jsx)("div",{className:"flex h-full items-center justify-center bg-components-panel-bg",children:(0,t.jsx)(a.default,{})}),!C&&"RESULT"===w&&_&&(0,t.jsx)(v,{outputs:_.outputs,error:_.error,height:O}),!C&&"DETAIL"===w&&_&&(0,t.jsx)(b.default,{inputs:_.inputs,inputs_truncated:_.inputs_truncated,outputs:_.outputs,outputs_truncated:_.outputs_truncated,outputs_full_content:_.outputs_full_content,status:_.status,error:_.error,elapsed_time:_.elapsed_time,total_tokens:_.total_tokens,created_at:_.created_at,created_by:R,steps:_.total_steps,exceptionCounts:_.exceptions_count,isListening:S}),!C&&"DETAIL"===w&&!_&&S&&(0,t.jsx)(y.default,{status:o.WorkflowRunningStatus.Running,isListening:!0}),!C&&"TRACING"===w&&(0,t.jsx)(j.default,{className:"bg-background-section-burn",list:L})]})]})}],344595)},522617,e=>{"use strict";var t=e.i(563199),r=e.i(837699),s=e.i(892081),n=e.i(268255);e.i(152567);var a=e.i(408767),i=e.i(189299),o=e.i(344595),l=e.i(935139);e.s(["default",0,e=>{let{currentLogItem:d,defaultTab:c="DETAIL",width:u,fixedWidth:p,onCancel:m}=e,{t:h}=(0,a.useTranslation)(),f=(0,n.useRef)(null),[x,g]=(0,n.useState)(!1),v=(0,i.useStore)(e=>e.appDetail);return((0,s.useClickAway)(()=>{x&&m()},f),(0,n.useEffect)(()=>{g(!0)},[]),d&&d.workflow_run_id)?(0,t.jsxs)("div",{className:(0,l.cn)("relative z-10 flex flex-col rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg pt-3 shadow-xl"),style:{width:p?u:480,...!p?{position:"fixed",top:64,left:8+(u-480),bottom:16}:{marginRight:8}},ref:f,children:[(0,t.jsx)("h1",{className:"system-xl-semibold shrink-0 px-4 py-1 text-text-primary",children:h("runDetail.title",{ns:"appLog"})}),(0,t.jsx)("span",{className:"absolute right-3 top-4 z-20 cursor-pointer p-1",onClick:m,children:(0,t.jsx)(r.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})}),(0,t.jsx)(o.default,{hideResult:!0,activeTab:c,runDetailUrl:`/apps/${v?.id}/workflow-runs/${d.workflow_run_id}`,tracingListUrl:`/apps/${v?.id}/workflow-runs/${d.workflow_run_id}/node-executions`})]}):null}])},201201,e=>{e.v(t=>Promise.all(["static/chunks/33d89f7067007c66.js","static/chunks/c798d4f27fd7256a.js","static/chunks/093735e21ea40753.css"].map(t=>e.l(t))).then(()=>t(661305)))},320876,e=>{e.v(e=>Promise.resolve().then(()=>e(793359)))}]);