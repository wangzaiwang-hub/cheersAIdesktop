(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,261484,e=>{"use strict";var t=e.i(268255),s={SVG:"image/svg+xml",ICO:"image/x-icon",GIF:"image/gif",PNG:"image/png"};let a=function(e){(0,t.useEffect)(function(){if(e){var t=e.split("."),a=t[t.length-1].toLocaleUpperCase(),r=document.querySelector("link[rel*='icon']")||document.createElement("link");r.type=s[a],r.href=e,r.rel="shortcut icon",document.getElementsByTagName("head")[0].appendChild(r)}},[e])};var r=e.i(685888),l=e.i(354440),n={restoreOnUnmount:!1};let i=function(e,s){void 0===s&&(s=n);var a=(0,t.useRef)(l.default?document.title:"");(0,t.useEffect)(function(){document.title=e},[e]),(0,r.default)(function(){s.restoreOnUnmount&&(document.title=a.current)})};var o=e.i(494268),c=e.i(168014);function d(e){let s=(0,o.useIsSystemFeaturesPending)(),r=(0,o.useGlobalPublicStore)(e=>e.systemFeatures),l=e?`${e} - `:"",n="",d="";!1===s&&(r.branding.enabled?(n=`${l}${r.branding.application_title}`,d=r.branding.favicon):(n=`${l}Dify`,d=`${c.basePath}/favicon.ico`)),i(n),(0,t.useEffect)(()=>{let e=null;return r.branding.favicon&&(document.querySelectorAll("link[rel='icon'], link[rel='shortcut icon'], link[rel='apple-touch-icon'], link[rel='mask-icon']").forEach(e=>e.parentNode?.removeChild(e)),(e=document.createElement("link")).rel="apple-touch-icon",e.href=r.branding.favicon,document.head.appendChild(e)),()=>{e?.remove()}},[r.branding.favicon]),a(d)}e.s(["default",()=>d],261484)},892081,e=>{"use strict";var t=e.i(393689),s=e.i(220431);let a=function(e){if(!e||!document.getRootNode)return document;var t,a=Array.isArray(e)?e:[e];return a.every(function(e){var t=(0,s.getTargetElement)(e);return!!t&&t.getRootNode()instanceof ShadowRoot})?(t=(0,s.getTargetElement)(a[0]))?t.getRootNode():document:document};var r=e.i(99878);function l(e,l,n){void 0===n&&(n="click");var i=(0,t.default)(e);(0,r.default)(function(){var e=function(e){(Array.isArray(l)?l:[l]).some(function(t){var a=(0,s.getTargetElement)(t);return!a||a.contains(e.target)})||i.current(e)},t=a(l),r=Array.isArray(n)?n:[n];return r.forEach(function(s){return t.addEventListener(s,e)}),function(){r.forEach(function(s){return t.removeEventListener(s,e)})}},Array.isArray(n)?n:[n],l)}e.s(["useClickAway",()=>l],892081)},112757,e=>{"use strict";var t=e.i(707844);e.s(["Line3",()=>t.default])},597280,e=>{"use strict";var t=e.i(563199),s=e.i(294237),a=e.i(268255),r=e.i(421001),l=e.i(935139);let n=(0,s.cva)([],{variants:{align:{left:"justify-start",center:"justify-center",right:"justify-end"}},defaultVariants:{align:"center"}}),i=a.memo(e=>{let{className:s,title:i,onSelect:o,selected:c,disabled:d,align:u="center",tooltip:m}=e,p=(0,a.useCallback)(()=>{c||d||o()},[o,c,d]);return(0,t.jsxs)("div",{className:(0,l.cn)("system-sm-regular flex h-8 cursor-default items-center rounded-md border border-components-option-card-option-border bg-components-option-card-option-bg px-2 text-text-secondary",!c&&!d&&"cursor-pointer hover:border-components-option-card-option-border-hover hover:bg-components-option-card-option-bg-hover hover:shadow-xs",c&&"system-sm-medium border-[1.5px] border-components-option-card-option-selected-border bg-components-option-card-option-selected-bg shadow-xs",d&&"text-text-disabled",n({align:u}),s),onClick:p,children:[(0,t.jsx)("span",{children:i}),m&&(0,t.jsx)(r.default,{popupContent:(0,t.jsx)("div",{className:"w-[240px]",children:m})})]})});e.s(["default",0,i])},249385,e=>{"use strict";var t=e.i(563199),s=e.i(837699),a=e.i(268255),r=e.i(654313);let l=a.memo(e=>{let{onClick:a}=e;return(0,t.jsx)(r.default,{size:"l",className:"group shrink-0 hover:!bg-state-destructive-hover",onClick:a,children:(0,t.jsx)(s.RiDeleteBinLine,{className:"h-4 w-4 text-text-tertiary group-hover:text-text-destructive"})})});e.s(["default",0,l])},766036,e=>{"use strict";var t=e.i(563199),s=e.i(837699),a=e.i(268255),r=e.i(935139);let l=a.memo(e=>{let{className:a,onClick:l}=e;return(0,t.jsx)("div",{className:(0,r.cn)(a,"cursor-pointer select-none rounded-md p-1 hover:bg-state-base-hover"),onClick:l,children:(0,t.jsx)(s.RiAddLine,{className:"h-4 w-4 text-text-tertiary"})})});e.s(["default",0,l])},359173,e=>{"use strict";var t=e.i(321124);e.s(["ChevronSelectorVertical",()=>t.default])},22461,116546,64997,e=>{"use strict";var t=e.i(563199),s=e.i(837699),a=e.i(124836),r=e.i(105845),l=e.i(268255);e.i(152567);var n=e.i(408767),i=e.i(192447),o=e.i(83278),c=e.i(766036);e.i(432024);var d=e.i(112757);e.i(39598);var u=e.i(678383),m=e.i(391185),p=e.i(421001),x=e.i(739255),h=e.i(120219),f=e.i(959752);e.i(845780);var g=e.i(720315),v=e.i(949250),y=e.i(417944),b=e.i(892081);e.i(668763);var j=e.i(359173);e.i(47690);var w=e.i(490774),N=e.i(935139);let C=l.memo(e=>{let{className:s,trigger:a,DropDownIcon:r=j.ChevronSelectorVertical,noLeft:n,options:i,allOptions:o,value:c,placeholder:d="",onChange:u,uppercase:m,triggerClassName:p,popupClassName:x,itemClassName:h,readonly:f,showChecked:g}=e,v=""===c||null==c,C=o?o.find(e=>e.value===c):i.find(e=>e.value===c),[k,{setFalse:T,toggle:S}]=(0,y.useBoolean)(!1),_=l.useRef(null);return(0,b.useClickAway)(()=>{T()},_),(0,t.jsxs)("div",{className:(0,N.cn)(!a&&!n&&"left-[-8px]","relative select-none",s),ref:_,children:[a?(0,t.jsx)("div",{onClick:S,className:(0,N.cn)(!f&&"cursor-pointer"),children:a}):(0,t.jsxs)("div",{onClick:S,className:(0,N.cn)(k&&"bg-state-base-hover","flex h-5 cursor-pointer items-center rounded-md pl-1 pr-0.5 text-xs font-semibold text-text-secondary hover:bg-state-base-hover"),children:[(0,t.jsx)("div",{className:(0,N.cn)("text-sm font-semibold",m&&"uppercase",v&&"text-text-tertiary",p),children:v?d:C?.label}),!f&&(0,t.jsx)(r,{className:"h-3 w-3 "})]}),k&&!f&&(0,t.jsx)("div",{className:(0,N.cn)("absolute top-[24px] z-10 w-[120px]  select-none rounded-lg border border-components-panel-border bg-components-panel-bg p-1 shadow-lg",x),children:i.map(e=>(0,t.jsxs)("div",{onClick:()=>{T(),u(e.value)},className:(0,N.cn)(h,m&&"uppercase","flex h-[30px] min-w-[44px] cursor-pointer items-center justify-between rounded-lg px-3 text-[13px] font-medium text-text-secondary hover:bg-state-base-hover"),children:[(0,t.jsx)("div",{children:e.label}),g&&e.value===c&&(0,t.jsx)(w.Check,{className:"h-4 w-4 text-text-primary"})]},e.value))})]})});e.s(["default",0,C],116546),e.i(603198);var k=e.i(697743);e.i(187243);var T=e.i(989425),S=e.i(390622);e.i(905691);var _=e.i(48498),L=e.i(157644),I=e.i(619507),O=e.i(249385),F=e.i(299951),M=e.i(225162);let A={},E=l.memo(e=>{let{schema:s=A,readonly:a,value:r,onChange:n,onOpenChange:i,isLoading:o}=e,c=(0,M.useLanguage)(),d=s.placeholder,u=(0,l.useCallback)(e=>{n(""===e.target.value?"":Number.parseFloat(e.target.value),T.VarType.constant)},[n]),m=(0,l.useCallback)(e=>{n(e=null===e?"":e,T.VarType.constant)},[n]);return(0,t.jsxs)(t.Fragment,{children:[(s.type===x.FormTypeEnum.select||s.type===x.FormTypeEnum.dynamicSelect)&&(0,t.jsx)(F.SimpleSelect,{wrapperClassName:"w-full !h-8",className:"flex items-center",disabled:a,defaultValue:r,items:s.options.map(e=>({value:e.value,name:e.label[c]||e.label.en_US})),onSelect:e=>m(e.value),placeholder:d?.[c]||d?.en_US,onOpenChange:i,isLoading:o}),s.type===x.FormTypeEnum.textNumber&&(0,t.jsx)("input",{type:"number",className:"h-8 w-full overflow-hidden rounded-lg bg-workflow-block-parma-bg p-2 text-[13px] font-normal leading-8 text-text-secondary placeholder:text-gray-400 focus:outline-none",value:r,onChange:u,readOnly:a,placeholder:d?.[c]||d?.en_US,min:s.min,max:s.max})]})});var P=e.i(963855),R=e.i(625285);let V=e=>{let{className:s}=e;return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"240",height:"2",viewBox:"0 0 240 2",fill:"none",className:s,children:[(0,t.jsx)("path",{d:"M0 1H240",stroke:"url(#paint0_linear_8619_59125)"}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"paint0_linear_8619_59125",x1:"240",y1:"9.99584",x2:"3.95539e-05",y2:"9.88094",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopColor:"white",stopOpacity:"0.01"}),(0,t.jsx)("stop",{offset:"0.9031",stopColor:"#101828",stopOpacity:"0.04"}),(0,t.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0.01"})]})})]})},z=e=>{let{className:s}=e;return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2",height:"132",viewBox:"0 0 2 132",fill:"none",className:s,children:[(0,t.jsx)("path",{d:"M1 0L1 132",stroke:"url(#paint0_linear_8619_59128)"}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"paint0_linear_8619_59128",x1:"-7.99584",y1:"132",x2:"-7.96108",y2:"6.4974e-07",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopColor:"white",stopOpacity:"0.01"}),(0,t.jsx)("stop",{offset:"0.877606",stopColor:"#101828",stopOpacity:"0.04"}),(0,t.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0.01"})]})})]})},B=e=>{let{title:s,description:a,icon:r}=e;return(0,t.jsxs)("div",{className:"flex w-[320px] flex-col items-start gap-2 rounded-[10px] bg-workflow-process-bg p-4",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 items-center justify-center gap-2 rounded-[10px]",children:(0,t.jsxs)("div",{className:"relative flex grow items-center justify-center gap-2 self-stretch rounded-[10px] border-[0.5px] border-components-card-border bg-components-card-bg p-1 shadow-lg",children:[r||(0,t.jsx)(u.Variable02,{className:"h-5 w-5 shrink-0 text-text-accent"}),(0,t.jsx)(z,{className:"absolute -right-[1px] top-1/2 -translate-y-1/4"}),(0,t.jsx)(z,{className:"absolute -left-[1px] top-1/2 -translate-y-1/4"}),(0,t.jsx)(V,{className:"absolute left-3/4 top-0 -translate-x-1/4 -translate-y-1/2"}),(0,t.jsx)(V,{className:"absolute left-3/4 top-full -translate-x-1/4 -translate-y-1/2"})]})}),(0,t.jsxs)("div",{className:"flex flex-col items-start gap-1 self-stretch",children:[(0,t.jsx)("div",{className:"system-sm-medium text-text-secondary",children:s}),a]})]})};e.s(["default",0,B],64997),e.i(275225);var D=e.i(705405),q=e.i(139269);let U=l.memo(e=>{let{vars:s,popupFor:a,onChange:r,itemWidth:i,isSupportFileVar:o=!0,zIndex:c,preferSchemaType:d}=e,{t:u}=(0,n.useTranslation)(),m=(0,D.useStore)(e=>e.pipelineId),p=(0,l.useMemo)(()=>!!m,[m]),x=(0,D.useStore)(e=>e.setShowInputFieldPanel);return(0,t.jsx)("div",{className:"space-y-1 rounded-lg border border-components-panel-border bg-components-panel-bg p-1 shadow-lg",style:{width:i||228},children:(!s||0===s.length)&&a?"toAssigned"===a?(0,t.jsx)(B,{title:u("variableReference.noAvailableVars",{ns:"workflow"})||"",description:(0,t.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:u("variableReference.noVarsForOperation",{ns:"workflow"})})}):(0,t.jsx)(B,{title:u("variableReference.noAssignedVars",{ns:"workflow"})||"",description:(0,t.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:u("variableReference.assignedVarsDescription",{ns:"workflow"})})}):(0,t.jsx)(q.default,{searchBoxClassName:"mt-1",vars:s,onChange:r,itemWidth:i,isSupportFileVar:o,zIndex:c,showManageInputField:p,onManageInputField:()=>x?.(!0),preferSchemaType:d})})}),H=[],W=l.memo(e=>{let y,b,{nodeId:j,readonly:w,className:F,isShowNodeName:M=!0,value:A=H,onOpen:V=a.noop,onChange:z,isSupportConstantValue:B,defaultVarKindType:D=T.VarType.constant,onlyLeafNodeVar:q,filterVar:W=()=>!0,isFilterFileVar:$,availableNodes:G,availableVars:Z,isAddBtnTrigger:K,schema:Q,valueTypePlaceHolder:Y,isInTable:J,onRemove:X,typePlaceHolder:ee,isSupportFileVar:et=!0,placeholder:es,minWidth:ea,popupFor:er,zIndex:el,currentTool:en,currentProvider:ei,preferSchemaType:eo}=e,{t:ec}=(0,n.useTranslation)(),ed=(0,i.useStoreApi)(),eu=(0,i.useNodes)(),em=(0,g.useIsChatMode)(),{getCurrentVariableType:ep}=(0,v.useWorkflowVariables)(),{availableVars:ex,availableNodesWithParent:eh}=(0,I.default)(j,{onlyLeafNodeVar:q,passedInAvailableNodes:G,filterVar:W}),ef=(0,i.useReactFlow)(),eg=eh.find(e=>e.data.type===S.BlockEnum.Start),ev=eu.find(e=>e.id===j),ey=!!ev?.data?.isInIteration,eb=ey?eu.find(e=>e.id===ev?.parentId):null,ej=!!ev?.data?.isInLoop,ew=ej?eu.find(e=>e.id===ev?.parentId):null,eN=(0,l.useRef)(null),[eC,ek]=(0,l.useState)(227);(0,l.useEffect)(()=>{eN.current&&ek(eN.current.clientWidth)},[eN.current]);let[eT,eS]=(0,l.useState)(D),e_=B&&eT===T.VarType.constant,eL=(0,l.useMemo)(()=>{let e=Z||ex;return $?(0,P.removeFileVars)(e):e},[Z,ex,$]),[eI,eO]=(0,l.useState)(!1);(0,l.useEffect)(()=>{V()},[eI]);let eF=!e_&&A.length>0,eM=(0,l.useMemo)(()=>!!ey&&!!(A[0]===ev?.parentId&&["item","index"].includes(A[1])),[ey,A,ev]),eA=(0,l.useMemo)(()=>!!ej&&!!(A[0]===ev?.parentId&&["item","index"].includes(A[1])),[ej,A,ev]),eE=eF?A[0]:"",eP=(0,l.useMemo)(()=>{if(!eF||e_)return null;if(eM)return eb?.data;if(eA)return ew?.data;if((0,P.isSystemVar)(A))return eg?.data;let e=(0,P.getNodeInfoById)(eh,eE)?.data;if(e)return{...e,id:eE}},[A,eF,e_,eM,eb,eh,eE,eg,eA,ew]),eR=A.length>2&&!(0,P.isRagVariableVar)(A),eV=(0,l.useMemo)(()=>{if(!eF)return"";let e=f.VAR_SHOW_NAME_MAP[A.join(".")];if(e)return e;let t=(0,P.isSystemVar)(A),s=Array.isArray(A)?A[A.length-1]:"";return`${t?"sys.":""}${s}`},[eF,A]),ez=[{label:"Variable",value:T.VarType.variable},{label:"Constant",value:T.VarType.constant}],eB=(0,l.useCallback)(e=>{eS(e),e===T.VarType.constant?z("",e):z([],e)},[z]),eD=(0,l.useRef)(null),[eq,eU]=(0,l.useState)(!1),[eH,eW]=(0,l.useState)(0);(0,l.useEffect)(()=>{eH&&eD.current&&(eD.current.focus(),eU(!0))},[eH]);let e$=(0,l.useCallback)((e,t)=>{z((0,r.produce)(e,e=>{e[1]&&e[1].startsWith("sys.")&&(e.shift(),e[0].split(".").forEach((t,s)=>{e[s]=t}))}),eT,t),eO(!1)},[z,eT]),eG=(0,l.useCallback)(()=>{eT===T.VarType.constant?z("",eT):z([],eT)},[z,eT]),eZ=(0,l.useCallback)(e=>{let t=eh.findIndex(t=>t.id===e),s=eh[t],{clientWidth:a,clientHeight:r}=document.getElementById("workflow-container"),{setViewport:l}=ef,{transform:n}=ed.getState(),i=n[2],o=s.position;l({x:(a-400-s.width*i)/2-o.x*i,y:(r-s.height*i)/2-o.y*i,zoom:n[2]})},[eh,ef,ed]),eK=ep({parentNode:ey?eb:ew,valueSelector:A,availableNodes:eh,isChatMode:em,isConstant:!!e_,preferSchemaType:eo}),{isEnv:eQ,isChatVar:eY,isGlobal:eJ,isRagVar:eX,isValidVar:e0,isException:e1}=(0,l.useMemo)(()=>{let e=(0,P.isENV)(A),t=(0,P.isConversationVar)(A),s=(0,P.isGlobalVar)(A),a=(0,P.isRagVariableVar)(A),r=!!eP||e||t||s||a;return{isEnv:e,isChatVar:t,isGlobal:s,isRagVar:a,isValidVar:r,isException:(0,_.isExceptionVariable)(eV,eP?.type)}},[A,eP,eV]),e2=eC-56,[e5,e3,e4]=(y=((eP?.title||"")+(eV||"")+(eK||"")).length,b=15+Math.floor((eP?.title?.length||0)/y*e2),[b,-15+Math.floor((eV?.length||0)/y*e2),Math.floor((eK?.length||0)/y*e2)]),e8=B?"div":m.PortalToFollowElemTrigger,e9=B?m.PortalToFollowElemTrigger:"div",e6=(0,l.useMemo)(()=>e0&&eR?(0,t.jsx)(R.default,{nodeName:eP?.title,path:A.slice(1),varType:(0,P.varTypeToStructType)(eK),nodeType:eP?.type}):!e0&&eF?ec("errorMsg.invalidVariable",{ns:"workflow"}):null,[e0,eR,eF,ec,eP?.title,eP?.type,A,eK]),[e7,te]=(0,l.useState)(null),[tt,ts]=(0,l.useState)(!1),{mutateAsync:ta}=(0,L.useFetchDynamicOptions)(ei?.plugin_id||"",ei?.name||"",en?.name||"",Q?.variable||"","tool"),tr=async()=>{if(Q?.type===x.FormTypeEnum.dynamicSelect&&en&&ei){ts(!0);try{let e=await ta();te(e?.options||[])}finally{ts(!1)}}};(0,l.useEffect)(()=>{tr()},[en,ei,Q]);let tl=(0,l.useMemo)(()=>{if(Q?.type!==x.FormTypeEnum.dynamicSelect)return Q;if(e7)return{...Q,options:e7};if(tt&&A&&"string"==typeof A){let e=[{value:A,label:{en_US:A,zh_Hans:A},show_on:[]}];return{...Q,options:e}}return{...Q,options:[]}},[Q,e7,tt,A]),tn=(0,l.useMemo)(()=>eQ?"environment":eY?"conversation":eJ?"global":eA?"loop":eX?"rag":"system",[eQ,eY,eJ,eA,eX]);return(0,t.jsx)("div",{className:(0,N.cn)(F,!w&&"cursor-pointer"),children:(0,t.jsxs)(m.PortalToFollowElem,{open:eI,onOpenChange:eO,placement:K?"bottom-end":"bottom-start",children:[(0,t.jsx)(e8,{onClick:()=>{w||(e_?eW(Date.now()):eO(!eI))},className:"group/picker-trigger-wrap relative !flex",children:(0,t.jsxs)(t.Fragment,{children:[K?(0,t.jsx)("div",{children:(0,t.jsx)(c.default,{onClick:a.noop})}):(0,t.jsxs)("div",{ref:B?null:eN,className:(0,N.cn)(eI||eq?"border-gray-300":"border-gray-100","group/wrap relative flex h-8 w-full items-center",!B&&"rounded-lg bg-components-input-bg-normal p-1",J&&"border-none bg-transparent",w&&"bg-components-input-bg-disabled"),children:[B?(0,t.jsx)("div",{onClick:e=>{e.stopPropagation(),eO(!1),eW(Date.now())},className:"mr-1 flex h-full items-center space-x-1",children:(0,t.jsx)(C,{noLeft:!0,trigger:(0,t.jsxs)("div",{className:"radius-md flex h-8 items-center bg-components-input-bg-normal px-2",children:[(0,t.jsx)("div",{className:"system-sm-regular mr-1 text-components-input-text-filled",children:ez.find(e=>e.value===eT)?.label}),(0,t.jsx)(s.RiArrowDownSLine,{className:"h-4 w-4 text-text-quaternary"})]}),popupClassName:"top-8",readonly:w,value:eT,options:ez,onChange:eB,showChecked:!0})}):!eF&&(0,t.jsx)("div",{className:"ml-1.5 mr-1",children:(0,t.jsx)(u.Variable02,{className:`h-4 w-4 ${w?"text-components-input-text-disabled":"text-components-input-text-placeholder"}`})}),e_?(0,t.jsx)(E,{value:A,onChange:z,schema:tl,readonly:w,isLoading:tt}):(0,t.jsx)(e9,{onClick:()=>{w||(e_?eW(Date.now()):eO(!eI))},className:"h-full grow",children:(0,t.jsx)("div",{ref:B?eN:null,className:(0,N.cn)("h-full",B&&"flex items-center rounded-lg bg-components-panel-bg py-1 pl-1"),children:(0,t.jsx)(p.default,{noDecoration:eR,popupContent:e6,children:(0,t.jsx)("div",{className:(0,N.cn)("h-full items-center rounded-[5px] px-1.5",eF?"inline-flex bg-components-badge-white-to-dark":"flex"),children:eF?(0,t.jsxs)(t.Fragment,{children:[M&&!eQ&&!eY&&!eJ&&!eX&&(0,t.jsxs)("div",{className:"flex items-center",onClick:e=>{(e.metaKey||e.ctrlKey)&&(e.stopPropagation(),eZ(eP?.id))},children:[(0,t.jsx)("div",{className:"h-3 px-[1px]",children:eP?.type&&(0,t.jsx)(h.VarBlockIcon,{className:"!text-text-primary",type:eP.type})}),(0,t.jsx)("div",{className:"mx-0.5 truncate text-xs font-medium text-text-secondary",title:eP?.title,style:{maxWidth:e5},children:eP?.title}),(0,t.jsx)(d.Line3,{className:"mr-0.5"})]}),eR&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(s.RiMoreLine,{className:"h-3 w-3 text-text-secondary"}),(0,t.jsx)(d.Line3,{className:"mr-0.5 text-divider-deep"})]}),(0,t.jsxs)("div",{className:"flex items-center text-text-accent",children:[tt&&(0,t.jsx)(s.RiLoader4Line,{className:"h-3.5 w-3.5 animate-spin text-text-secondary"}),(0,t.jsx)(k.VariableIconWithColor,{variables:A,variableCategory:tn,isExceptionVariable:e1}),(0,t.jsx)("div",{className:(0,N.cn)("ml-0.5 truncate text-xs font-medium",eQ&&"!text-text-secondary",eY&&"text-util-colors-teal-teal-700",e1&&"text-text-warning",eJ&&"text-util-colors-orange-orange-600"),title:eV,style:{maxWidth:e3},children:eV})]}),(0,t.jsx)("div",{className:"system-xs-regular ml-0.5 truncate text-center capitalize text-text-tertiary",title:eK,style:{maxWidth:e4},children:eK}),!e0&&(0,t.jsx)(s.RiErrorWarningFill,{className:"ml-0.5 h-3 w-3 text-text-destructive"})]}):(0,t.jsx)("div",{className:`overflow-hidden ${w?"text-components-input-text-disabled":"text-components-input-text-placeholder"} system-sm-regular text-ellipsis`,children:tt?(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(s.RiLoader4Line,{className:"mr-1 h-3.5 w-3.5 animate-spin text-text-secondary"}),(0,t.jsx)("span",{children:es??ec("common.setVarValuePlaceholder",{ns:"workflow"})})]}):es??ec("common.setVarValuePlaceholder",{ns:"workflow"})})})})})}),eF&&!w&&!J&&(0,t.jsx)("div",{className:"group invisible absolute right-1 top-[50%] h-5 translate-y-[-50%] cursor-pointer rounded-md p-1 hover:bg-state-base-hover group-hover/wrap:visible",onClick:eG,children:(0,t.jsx)(s.RiCloseLine,{className:"h-3.5 w-3.5 text-text-tertiary group-hover:text-text-secondary"})}),!eF&&Y&&(0,t.jsx)(o.default,{className:" absolute right-1 top-[50%] translate-y-[-50%] capitalize",text:Y,uppercase:!1})]}),!w&&J&&(0,t.jsx)(O.default,{className:"absolute right-1 top-0.5 hidden group-hover/picker-trigger-wrap:block",onClick:()=>X?.()}),!eF&&ee&&(0,t.jsx)(o.default,{className:"absolute right-2 top-1.5",text:ee,uppercase:!1})]})}),(0,t.jsx)(m.PortalToFollowElemContent,{style:{zIndex:el||100},className:"mt-1",children:!e_&&(0,t.jsx)(U,{vars:eL,popupFor:er,onChange:e$,itemWidth:K?260:ea||eC,isSupportFileVar:et,zIndex:el,preferSchemaType:eo})})]})})});e.s(["default",0,W],22461)},852933,e=>{"use strict";var t=e.i(563199),s=e.i(837699),a=e.i(268255);e.i(152567);var r=e.i(408767),l=e.i(391185),n=e.i(935139);e.s(["default",0,e=>{let{options:i,value:o,onChange:c,containerProps:d,triggerProps:u,popupProps:m,CustomTrigger:p,CustomOption:x}=e,{t:h}=(0,r.useTranslation)(),{open:f,onOpenChange:g,placement:v,offset:y,triggerPopupSameWidth:b=!0}=d||{},{className:j}=u||{},{wrapperClassName:w,className:N,itemClassName:C}=m||{},[k,T]=(0,a.useState)(!1),S=f??k,_=(0,a.useCallback)(e=>{g?.(e),T(e)},[g]),L=i.find(e=>e.value===o),I=L?.label||h("placeholder.select",{ns:"common"});return(0,t.jsxs)(l.PortalToFollowElem,{placement:v||"bottom-start",offset:y||4,open:S,onOpenChange:_,triggerPopupSameWidth:b,children:[(0,t.jsx)(l.PortalToFollowElemTrigger,{onClick:()=>_(!S),asChild:!0,children:(0,t.jsx)("div",{className:(0,n.cn)("system-sm-regular group flex h-8 cursor-pointer items-center rounded-lg bg-components-input-bg-normal px-2 text-components-input-text-filled hover:bg-state-base-hover-alt",S&&"bg-state-base-hover-alt",j),children:p?p(L,S):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grow",title:I,children:I}),(0,t.jsx)(s.RiArrowDownSLine,{className:(0,n.cn)("h-4 w-4 shrink-0 text-text-quaternary group-hover:text-text-secondary",S&&"text-text-secondary")})]})})}),(0,t.jsx)(l.PortalToFollowElemContent,{className:(0,n.cn)("z-10",w),children:(0,t.jsx)("div",{className:(0,n.cn)("rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg-blur p-1 shadow-lg shadow-shadow-shadow-5",N),children:i.map(e=>{let a=o===e.value;return(0,t.jsx)("div",{className:(0,n.cn)("system-sm-medium flex h-8 cursor-pointer items-center rounded-lg px-2 text-text-secondary hover:bg-state-base-hover",C),title:e.label,onClick:()=>{c?.(e.value),_(!1)},children:x?x(e,a):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mr-1 grow truncate px-1",children:e.label}),a&&(0,t.jsx)(s.RiCheckLine,{className:"h-4 w-4 shrink-0 text-text-accent"})]})},e.value)})})})]})}])},612437,(e,t,s)=>{e.e,t.exports=function(e,t,s){e=e||{};var a=t.prototype,r={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function l(e,t,s,r){return a.fromToBase(e,t,s,r)}s.en.relativeTime=r,a.fromToBase=function(t,a,l,n,i){for(var o,c,d,u=l.$locale().relativeTime||r,m=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],p=m.length,x=0;x<p;x+=1){var h=m[x];h.d&&(o=n?s(t).diff(l,h.d,!0):l.diff(t,h.d,!0));var f=(e.rounding||Math.round)(Math.abs(o));if(d=o>0,f<=h.r||!h.r){f<=1&&x>0&&(h=m[x-1]);var g=u[h.l];i&&(f=i(""+f)),c="string"==typeof g?g.replace("%d",f):g(f,a,h.l,d);break}}if(a)return c;var v=d?u.future:u.past;return"function"==typeof v?v(c):v.replace("%s",c)},a.to=function(e,t){return l(e,t,this,!0)},a.from=function(e,t){return l(e,t,this)};var n=function(e){return e.$u?s.utc():s()};a.toNow=function(e){return this.to(n(this),e)},a.fromNow=function(e){return this.from(n(this),e)}}},363372,e=>{"use strict";var t=e.i(585458),s=e.i(612437),a=e.i(268255),r=e.i(683257),l=e.i(491234);e.i(341888),e.i(194663),e.i(726767),e.i(171457),e.i(271967),e.i(429863),e.i(659291),e.i(690397),e.i(732213),e.i(388201),e.i(855379),e.i(992481),e.i(722553),e.i(525435),e.i(932957),e.i(354438),e.i(433104),e.i(516248),e.i(931171),e.i(248238),t.default.extend(s.default),e.s(["useFormatTimeFromNow",0,()=>{let e=(0,r.useLocale)();return{formatTimeFromNow:(0,a.useCallback)(s=>{let a=l.localeMap[e]??"en";return(0,t.default)(s).locale(a).fromNow()},[e])}}])},740474,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"path",attributes:{d:"M8.00001 12.7761L12.1381 8.63804L11.1953 7.69524L8.00001 10.8905L4.80475 7.69524L3.86194 8.63804L8.00001 12.7761ZM8.00001 9.00951L12.1381 4.87146L11.1953 3.92865L8.00001 7.12391L4.80475 3.92865L3.86194 4.87146L8.00001 9.00951Z",fill:"currentColor"},children:[]}]},name:"ArrowDownDoubleLine"})},285520,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"path",attributes:{d:"M6.02888 6.23572C5.08558 6.23572 4.56458 7.33027 5.15943 8.06239L7.13069 10.4885C7.57898 11.0403 8.42124 11.0403 8.86962 10.4885L10.8408 8.06239C11.4357 7.33027 10.9147 6.23572 9.97134 6.23572H6.02888Z",fill:"currentColor","fill-opacity":"0.3"},children:[]}]},name:"ArrowDownRoundFill"})},437251,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"path",attributes:{d:"M8 3.22388L3.86194 7.36193L4.80475 8.30473L8 5.10949L11.1953 8.30473L12.1381 7.36193L8 3.22388ZM8 6.99046L3.86194 11.1285L4.80475 12.0713L8 8.87606L11.1953 12.0713L12.1381 11.1285L8 6.99046Z",fill:"currentColor"},children:[]}]},name:"ArrowUpDoubleLine"})},870008,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{id:"chevron-down"},children:[{type:"element",name:"path",attributes:{id:"Icon",d:"M6 9L12 15L18 9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},children:[]}]}]},name:"ChevronDown"})},963634,e=>{e.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"path",attributes:{d:"M9.01488 2.54553C8.91549 2.45869 8.79321 2.40229 8.66264 2.38306C8.53206 2.36384 8.39872 2.38261 8.27852 2.43712C8.15833 2.49164 8.05636 2.5796 7.98481 2.6905C7.91325 2.8014 7.87513 2.93055 7.875 3.06253V6.50003C6.05164 6.50003 4.30295 7.22436 3.01364 8.51367C1.72433 9.80299 1 11.5517 1 13.375C1 15.1984 1.72433 16.9471 3.01364 18.2364C4.30295 19.5257 6.05164 20.25 7.875 20.25H12C12.3647 20.25 12.7144 20.1052 12.9723 19.8473C13.2301 19.5894 13.375 19.2397 13.375 18.875C13.375 18.5104 13.2301 18.1606 12.9723 17.9028C12.7144 17.6449 12.3647 17.5 12 17.5H7.875C6.78098 17.5 5.73177 17.0654 4.95818 16.2919C4.1846 15.5183 3.75 14.4691 3.75 13.375C3.75 12.281 4.1846 11.2318 4.95818 10.4582C5.73177 9.68463 6.78098 9.25003 7.875 9.25003V12.6875C7.87513 12.8195 7.91325 12.9487 7.98481 13.0596C8.05636 13.1705 8.15833 13.2584 8.27852 13.3129C8.39872 13.3675 8.53206 13.3862 8.66264 13.367C8.79321 13.3478 8.91549 13.2914 9.01488 13.2045L14.5149 8.39203C14.5885 8.32751 14.6475 8.24801 14.6879 8.15885C14.7283 8.06969 14.7492 7.97292 14.7492 7.87503C14.7492 7.77714 14.7283 7.68038 14.6879 7.59122C14.6475 7.50206 14.5885 7.42256 14.5149 7.35803L9.01488 2.54553Z",fill:"currentColor"},children:[]},{type:"element",name:"path",attributes:{d:"M21.625 17.5H17.5C17.1353 17.5 16.7856 17.6449 16.5277 17.9028C16.2699 18.1606 16.125 18.5104 16.125 18.875C16.125 19.2397 16.2699 19.5894 16.5277 19.8473C16.7856 20.1052 17.1353 20.25 17.5 20.25H21.625C21.9897 20.25 22.3394 20.1052 22.5973 19.8473C22.8551 19.5894 23 19.2397 23 18.875C23 18.5104 22.8551 18.1606 22.5973 17.9028C22.3394 17.6449 21.9897 17.5 21.625 17.5Z",fill:"currentColor"},children:[]},{type:"element",name:"path",attributes:{d:"M21.625 12H17.5C17.1353 12 16.7856 12.1449 16.5277 12.4028C16.2699 12.6606 16.125 13.0104 16.125 13.375C16.125 13.7397 16.2699 14.0894 16.5277 14.3473C16.7856 14.6052 17.1353 14.75 17.5 14.75H21.625C21.9897 14.75 22.3394 14.6052 22.5973 14.3473C22.8551 14.0894 23 13.7397 23 13.375C23 13.0104 22.8551 12.6606 22.5973 12.4028C22.3394 12.1449 21.9897 12 21.625 12Z",fill:"currentColor"},children:[]},{type:"element",name:"path",attributes:{d:"M17.5 9.25003H21.625C21.9897 9.25003 22.3394 9.10517 22.5973 8.8473C22.8551 8.58944 23 8.23971 23 7.87503C23 7.51036 22.8551 7.16062 22.5973 6.90276C22.3394 6.6449 21.9897 6.50003 21.625 6.50003H17.5C17.1353 6.50003 16.7856 6.6449 16.5277 6.90276C16.2699 7.16062 16.125 7.51036 16.125 7.87503C16.125 8.23971 16.2699 8.58944 16.5277 8.8473C16.7856 9.10517 17.1353 9.25003 17.5 9.25003Z",fill:"currentColor"},children:[]}]},name:"HighPriority"})},59848,e=>{"use strict";var t=e.i(685888);e.s(["useUnmount",()=>t.default])},360052,e=>{"use strict";var t=e.i(867970);e.s(["Tag03",()=>t.default])},561518,e=>{"use strict";var t=e.i(563199),s=e.i(124836),a=e.i(268255);e.i(152567);var r=e.i(408767),l=e.i(151094),n=e.i(757198),i=e.i(21151),o=e.i(935139),c=e.i(586482);e.s(["default",0,e=>{let{isModal:d=!0,onSelect:u,onClose:m,className:p}=e,{t:x}=(0,r.useTranslation)(),[h,f]=(0,a.useState)(""),[g,v]=(0,a.useState)(),y=(0,a.useCallback)((e,t)=>{f(e),v(t)},[f,v]);return d?(0,t.jsxs)(i.default,{onClose:s.noop,isShow:!0,closable:!1,wrapperClassName:p,className:(0,o.cn)("flex max-h-[552px] flex-col rounded-xl border-[0.5px] border-divider-subtle p-0 shadow-xl"),children:[(0,t.jsx)(c.default,{className:"pt-3",onSelect:y}),(0,t.jsx)(n.default,{className:"mb-0 mt-3"}),(0,t.jsxs)("div",{className:"flex w-full items-center justify-center gap-2 p-3",children:[(0,t.jsx)(l.default,{className:"w-full",onClick:()=>{m?.()},children:x("iconPicker.cancel",{ns:"app"})}),(0,t.jsx)(l.default,{disabled:""===h||!g,variant:"primary",className:"w-full",onClick:()=>{u?.(h,g)},children:x("iconPicker.ok",{ns:"app"})})]})]}):(0,t.jsx)(t.Fragment,{})}])},592366,e=>{"use strict";var t=e.i(563199),s=e.i(837699),a=e.i(268255),r=e.i(521632),l=e.i(271743),n=e.i(935139);let i=a.memo(e=>{let{isShow:i,onHide:o,dialogClassName:c="",dialogBackdropClassName:d="",panelClassName:u="",maxWidthClassName:m="!max-w-[640px]",height:p="calc(100vh - 72px)",contentClassName:x,headerClassName:h,title:f,titleDescription:g,body:v,foot:y,isShowMask:b,clickOutsideNotOpen:j=!0,positionCenter:w}=e,N=(0,a.useRef)(null),C=(0,l.default)()===l.MediaType.mobile;return i?(0,t.jsx)(r.default,{isOpen:i,clickOutsideNotOpen:j,onClose:o,footer:null,mask:C||b,positionCenter:w,dialogClassName:c,dialogBackdropClassName:d,panelClassName:(0,n.cn)("mx-2 mb-3 mt-16 rounded-xl !p-0 sm:mr-2",u,m),children:(0,t.jsxs)("div",{className:(0,n.cn)(x,"flex w-full flex-col rounded-xl border-[0.5px] border-divider-subtle bg-components-panel-bg shadow-xl"),style:{height:p},ref:N,children:[(0,t.jsxs)("div",{className:(0,n.cn)(h,"shrink-0 border-b border-divider-subtle py-4"),children:[(0,t.jsxs)("div",{className:"flex h-6 items-center justify-between pl-6 pr-5",children:[(0,t.jsx)("div",{className:"system-xl-semibold text-text-primary",children:f}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("div",{onClick:o,className:"flex h-6 w-6 cursor-pointer items-center justify-center",children:(0,t.jsx)(s.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})})})]}),g&&(0,t.jsx)("div",{className:"system-xs-regular pl-6 pr-10 text-text-tertiary",children:g})]}),(0,t.jsx)("div",{className:"grow overflow-y-auto",children:v}),y&&(0,t.jsx)("div",{className:"shrink-0",children:y})]})}):null});e.s(["default",0,i])},955371,e=>{"use strict";var t,s=((t={}).python3="python3",t.javascript="javascript",t.json="json",t);e.s(["CodeLanguage",()=>s])},410893,e=>{"use strict";var t=e.i(797181);e.s(["ArrowUpRight",()=>t.default])},389600,e=>{"use strict";var t=e.i(498664);e.s(["Copy",()=>t.default])},394895,e=>{"use strict";var t=e.i(563199),s=e.i(837699),a=e.i(268255),r=e.i(654313),l=e.i(391185),n=e.i(935139);e.s(["default",0,e=>{let{items:i,onSelect:o,secondItems:c,renderTrigger:d,triggerProps:u,popupClassName:m,itemClassName:p,secondItemClassName:x}=e,[h,f]=(0,a.useState)(!1),g=e=>{f(!1),o(e)};return(0,t.jsxs)(l.PortalToFollowElem,{open:h,onOpenChange:f,placement:"bottom-end",children:[(0,t.jsx)(l.PortalToFollowElemTrigger,{onClick:()=>f(e=>!e),children:d?d(h):(0,t.jsx)(r.default,{...u,className:(0,n.cn)(h&&"bg-divider-regular",u?.className),children:(0,t.jsx)(s.RiMoreFill,{className:"h-4 w-4 text-text-tertiary"})})}),(0,t.jsx)(l.PortalToFollowElemContent,{className:m,children:(0,t.jsxs)("div",{className:"rounded-lg border-[0.5px] border-components-panel-border bg-components-panel-bg text-sm text-text-secondary shadow-lg",children:[!!i.length&&(0,t.jsx)("div",{className:"p-1",children:i.map(e=>(0,t.jsx)("div",{className:(0,n.cn)("flex h-8 cursor-pointer items-center rounded-lg px-3 hover:bg-components-panel-on-panel-item-bg-hover",p),onClick:()=>g(e),children:e.text},e.value))}),!!i.length&&!!c?.length&&(0,t.jsx)("div",{className:"h-px bg-divider-regular"}),!!c?.length&&(0,t.jsx)("div",{className:"p-1",children:c.map(e=>(0,t.jsx)("div",{className:(0,n.cn)("flex h-8 cursor-pointer items-center rounded-lg px-3 hover:bg-components-panel-on-panel-item-bg-hover",x),onClick:()=>g(e),children:e.text},e.value))})]})})]})}])},670977,e=>{"use strict";var t=e.i(479147);e.s(["ArrowDownRoundFill",()=>t.default])},149086,289751,219830,e=>{"use strict";var t,s=e.i(824627),a=e.i(268255),r=e.i(295978),l=e.i(773923),n=e.i(703440);let i=function(e){n.default&&!(0,l.isFunction)(e)&&console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof e));var t=(0,a.useRef)(e);t.current=(0,a.useMemo)(function(){return e},[e]);var s=(0,a.useRef)(void 0);return s.current||(s.current=function(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];return t.current.apply(this,e)}),s.current};e.s(["default",0,i],289751);let o=(t=a.useEffect,function(e,s){var r=(0,a.useRef)(!1);t(function(){return function(){r.current=!1}},[]),t(function(){if(r.current)return e();r.current=!0},s)});e.s(["default",0,o],219830);var c="AHOOKS_SYNC_STORAGE_EVENT_NAME";function d(e){return function(t,n){void 0===n&&(n={});var d,u=n.listenStorageChange,m=void 0!==u&&u,p=n.onError,x=void 0===p?function(e){console.error(e)}:p;try{d=e()}catch(e){x(e)}function h(){try{var e=null==d?void 0:d.getItem(t);if(e)return n.deserializer?n.deserializer(e):JSON.parse(e)}catch(e){x(e)}return(0,l.isFunction)(n.defaultValue)?n.defaultValue():n.defaultValue}var f=(0,s.__read)((0,a.useState)(h),2),g=f[0],v=f[1];o(function(){v(h())},[t]);var y=function(e){e.key===t&&e.storageArea===d&&v(h())};return(0,r.default)("storage",y,{enable:m}),(0,r.default)(c,function(e){y(e.detail)},{enable:m}),[g,i(function(e){var s=(0,l.isFunction)(e)?e(g):e;m||v(s);try{var a=void 0,r=null==d?void 0:d.getItem(t);(0,l.isUndef)(s)?(a=null,null==d||d.removeItem(t)):(a=n.serializer?n.serializer(s):JSON.stringify(s),null==d||d.setItem(t,a)),dispatchEvent(new CustomEvent(c,{detail:{key:t,newValue:a,oldValue:r,storageArea:d}}))}catch(e){x(e)}})]}}e.s(["createUseStorageState",()=>d],149086)},863085,e=>{"use strict";var t=e.i(56505);e.s(["CheckCircle",()=>t.default])},910605,e=>{"use strict";var t=e.i(27808);e.s(["FileUploaderInAttachmentWrapper",()=>t.default])},849124,e=>{"use strict";var t=e.i(434012);e.s(["LinkExternal02",()=>t.default])},988720,e=>{"use strict";var t=e.i(563199),s=e.i(268255),a=e.i(935139);let r=e=>{let{className:s,isActive:r,onClick:l,option:n,smallItem:i}=e;return(0,t.jsxs)("div",{className:(0,a.cn)("relative pb-2.5 ",!r&&"cursor-pointer",i?"system-sm-semibold-uppercase":"system-xl-semibold",s),onClick:()=>!r&&l(n.value),children:[(0,t.jsx)("div",{className:(0,a.cn)(r?"text-text-primary":"text-text-tertiary"),children:n.text}),r&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-util-colors-blue-brand-blue-brand-600"})]},n.value)},l=s.memo(e=>{let{className:s,value:l,onChange:n,options:i,noBorderBottom:o,itemClassName:c,smallItem:d}=e;return(0,t.jsx)("div",{className:(0,a.cn)(s,!o&&"border-b border-divider-subtle","flex  space-x-6"),children:i.map(e=>(0,t.jsx)(r,{isActive:e.value===l,option:e,onClick:n,className:c,smallItem:d},e.value))})});e.s(["default",0,l])},661509,e=>{"use strict";var t=e.i(563199),s=e.i(837699),a=e.i(268255);e.i(152567);var r=e.i(408767),l=e.i(654313),n=e.i(151094),i=e.i(521632),o=e.i(449980),c=e.i(988720),d=e.i(633957),u=e.i(580932),m=e.i(519436),p=e.i(312343);e.i(302047);var x=e.i(674245),h=e.i(325011),f=e.i(665127),g=e.i(946700),v=e.i(885327),y=e.i(683257),b=e.i(491234),j=e.i(344600),w=e.i(935139);let N=a.memo(e=>{let N,{showBackButton:C=!1,collection:k,isBuiltIn:T=!0,isModel:S=!0,toolName:_,setting:L={},readonly:I,onHide:O,onSave:F,credentialId:M,onAuthorizationItemClick:A}=e,E=(0,y.useLocale)(),P=(0,b.getLanguage)(E),{t:R}=(0,r.useTranslation)(),V=k.tools,z=V?.length>0,[B,D]=(0,a.useState)(!z),[q,U]=(0,a.useState)(z?V:[]),H=q.find(e=>e.name===_),W=H?(0,v.toolParametersToFormSchemas)(H.parameters):[],$=W.filter(e=>"llm"===e.form),G=W.filter(e=>"llm"!==e.form),Z=G.length>0,[K,Q]=(0,a.useState)(L),[Y,J]=(0,a.useState)("info"),X="info"===Y;(0,a.useEffect)(()=>{k&&!z&&(async()=>{D(!0);try{let e=await new Promise(e=>{!async function(){S?e(await (0,j.fetchModelToolList)(k.name)):T?e(await (0,j.fetchBuiltInToolList)(k.name)):k.type===g.CollectionType.workflow?e(await (0,j.fetchWorkflowToolList)(k.id)):e(await (0,j.fetchCustomToolList)(k.name))}()});U(e)}catch{}D(!1)})()},[k?.name,k?.id,k?.type]),(0,a.useEffect)(()=>{J(!I&&Z?"setting":"info")},[Z]);let ee=(N=!0,G.forEach(e=>{e.required&&!K[e.name]&&(N=!1)}),N),et=(0,t.jsx)("div",{className:"",children:$.length>0&&(0,t.jsx)("div",{className:"space-y-1 py-2",children:$.map((e,s)=>{var a;return(0,t.jsxs)("div",{className:"py-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"code-sm-semibold text-text-secondary",children:e.label[P]}),(0,t.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:"number-input"===(a=e.type)?R("setBuiltInTools.number",{ns:"tools"}):"text-input"===a?R("setBuiltInTools.string",{ns:"tools"}):"checkbox"===a?"boolean":"file"===a?R("setBuiltInTools.file",{ns:"tools"}):a}),e.required&&(0,t.jsx)("div",{className:"system-xs-medium text-text-warning-secondary",children:R("setBuiltInTools.required",{ns:"tools"})})]}),e.human_description&&(0,t.jsx)("div",{className:"system-xs-regular mt-0.5 text-text-tertiary",children:e.human_description?.[P]})]},s)})})}),es=(0,t.jsx)(d.default,{value:K,onChange:Q,formSchemas:G,isEditMode:!1,showOnVariableMap:{},validating:!1,readonly:I});return(0,t.jsx)(i.default,{isOpen:!0,clickOutsideNotOpen:!1,onClose:O,footer:null,mask:!1,positionCenter:!1,panelClassName:(0,w.cn)("mb-2 mr-2 mt-[64px] !w-[420px] !max-w-[420px] justify-start rounded-2xl border-[0.5px] border-components-panel-border !bg-components-panel-bg !p-0 shadow-xl"),children:(0,t.jsxs)(t.Fragment,{children:[B&&(0,t.jsx)(o.default,{type:"app"}),!B&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"relative border-b border-divider-subtle p-4 pb-3",children:[(0,t.jsx)("div",{className:"absolute right-3 top-3",children:(0,t.jsx)(l.default,{onClick:O,children:(0,t.jsx)(s.RiCloseLine,{className:"h-4 w-4"})})}),C&&(0,t.jsxs)("div",{className:"system-xs-semibold-uppercase mb-2 flex cursor-pointer items-center gap-1 text-text-accent-secondary",onClick:O,children:[(0,t.jsx)(s.RiArrowLeftLine,{className:"h-4 w-4"}),R("detailPanel.operation.back",{ns:"plugin"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(u.default,{size:"tiny",className:"h-6 w-6",src:k.icon}),(0,t.jsx)(p.default,{packageNameClassName:"w-auto",orgName:k.author,packageName:k.name.split("/").pop()||""})]}),(0,t.jsx)("div",{className:"system-md-semibold mt-1 text-text-primary",children:H?.label[P]}),!!H?.description[P]&&(0,t.jsx)(m.default,{className:"mb-2 mt-3 h-auto",text:H.description[P],descriptionLineRows:2}),k.allow_delete&&k.type===g.CollectionType.builtIn&&(0,t.jsx)(h.PluginAuthInAgent,{pluginPayload:{provider:k.name,category:x.AuthCategory.tool,providerType:k.type,detail:k},credentialId:M,onAuthorizationItemClick:A})]}),(0,t.jsx)("div",{className:"h-full",children:(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[Z&&!I?(0,t.jsx)(c.default,{className:"mt-1 shrink-0 px-4",itemClassName:"py-3",noBorderBottom:!0,value:Y,onChange:e=>{J(e)},options:[{value:"info",text:R("setBuiltInTools.parameters",{ns:"tools"})},{value:"setting",text:R("setBuiltInTools.setting",{ns:"tools"})}]}):(0,t.jsx)("div",{className:"system-sm-semibold-uppercase p-4 pb-1 text-text-primary",children:R("setBuiltInTools.parameters",{ns:"tools"})}),(0,t.jsxs)("div",{className:"h-0 grow overflow-y-auto px-4",children:[X?et:es,!I&&!X&&(0,t.jsxs)("div",{className:"flex shrink-0 justify-end space-x-2 rounded-b-[10px] bg-components-panel-bg py-2",children:[(0,t.jsx)(n.default,{className:"flex h-8 items-center !px-3 !text-[13px] font-medium ",onClick:O,children:R("operation.cancel",{ns:"common"})}),(0,t.jsx)(n.default,{className:"flex h-8 items-center !px-3 !text-[13px] font-medium",variant:"primary",disabled:!ee,onClick:()=>F?.(K),children:R("operation.save",{ns:"common"})})]})]}),(0,t.jsx)(f.ReadmeEntrance,{pluginDetail:k,className:"mt-auto"})]})})]})]})})});e.s(["default",0,N])},464747,e=>{"use strict";e.s(["transformDataSourceToTool",0,e=>({id:e.plugin_id,provider:e.provider,name:e.provider,author:e.declaration.identity.author,description:e.declaration.identity.description,icon:e.declaration.identity.icon,label:e.declaration.identity.label,type:e.declaration.provider_type,team_credentials:{},allow_delete:!0,is_team_authorization:e.is_authorized,is_authorized:e.is_authorized,labels:e.declaration.identity.tags||[],plugin_id:e.plugin_id,plugin_unique_identifier:e.plugin_unique_identifier,tools:e.declaration.datasources.map(e=>({name:e.identity.name,author:e.identity.author,label:e.identity.label,description:e.description,parameters:e.parameters,labels:[],output_schema:e.output_schema})),credentialsSchema:e.declaration.credentials_schema||[],meta:{version:""}})])},919230,158238,e=>{"use strict";var t=e.i(563199),s=e.i(268255),a=e.i(837699),r=e.i(128984);let l=s.memo(e=>{let{downloadCount:s}=e;return(0,t.jsxs)("div",{className:"flex items-center space-x-1 text-text-tertiary",children:[(0,t.jsx)(a.RiInstallLine,{className:"h-3 w-3 shrink-0"}),(0,t.jsx)("div",{className:"system-xs-regular",children:(0,r.formatNumber)(s)})]})});e.s(["default",0,l],158238);let n=s.memo(e=>{let{downloadCount:s,tags:a}=e;return(0,t.jsxs)("div",{className:"flex h-5 items-center",children:[void 0!==s&&(0,t.jsx)(l,{downloadCount:s}),void 0!==s&&a&&a.length>0&&(0,t.jsx)("div",{className:"system-xs-regular mx-2 text-text-quaternary",children:"Â·"}),a&&a.length>0&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"flex h-4 flex-wrap space-x-2 overflow-hidden",children:a.map(e=>(0,t.jsxs)("div",{className:"system-xs-regular flex max-w-[120px] space-x-1 overflow-hidden",title:`# ${e}`,children:[(0,t.jsx)("span",{className:"text-text-quaternary",children:"#"}),(0,t.jsx)("span",{className:"truncate text-text-tertiary",children:e})]},e))})})]})});e.s(["default",0,n],919230)},850917,e=>{"use strict";var t=e.i(563199),s=e.i(922521);e.s(["default",0,e=>{let{className:a}=e,{theme:r}=(0,s.default)();return"dark"===r?(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2",height:"240",viewBox:"0 0 2 240",fill:"none",className:a,children:[(0,t.jsx)("path",{d:"M1 0L1 240",stroke:"url(#paint0_linear_6295_52176)"}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"paint0_linear_6295_52176",x1:"-7.99584",y1:"240",x2:"-7.88094",y2:"3.95539e-05",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopOpacity:"0.01"}),(0,t.jsx)("stop",{offset:"0.503965",stopColor:"#C8CEDA",stopOpacity:"0.14"}),(0,t.jsx)("stop",{offset:"1",stopOpacity:"0.01"})]})})]}):(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2",height:"241",viewBox:"0 0 2 241",fill:"none",className:a,children:[(0,t.jsx)("path",{d:"M1 0.5L1 240.5",stroke:"url(#paint0_linear_1989_74474)"}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"paint0_linear_1989_74474",x1:"-7.99584",y1:"240.5",x2:"-7.88094",y2:"0.50004",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopColor:"white",stopOpacity:"0.01"}),(0,t.jsx)("stop",{offset:"0.503965",stopColor:"#101828",stopOpacity:"0.08"}),(0,t.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0.01"})]})})]})}])},24393,e=>{"use strict";var t=e.i(563199),s=e.i(374170);e.i(36860);var a=e.i(438270),r=e.i(935139),l=e.i(850917);e.s(["default",0,e=>{let{text:n,lightCard:i,className:o}=e,{t:c}=(0,s.useTranslation)();return(0,t.jsxs)("div",{className:(0,r.cn)("relative flex h-0 grow flex-wrap overflow-hidden p-2",o),children:[Array.from({length:16}).map((e,s)=>(0,t.jsx)("div",{className:(0,r.cn)("mb-3 mr-3 h-[144px] w-[calc((100%-36px)/4)] rounded-xl bg-background-section-burn",s%4==3&&"mr-0",s>11&&"mb-0",i&&"bg-background-default-lighter opacity-75")},s)),!i&&(0,t.jsx)("div",{className:"absolute inset-0 z-[1] bg-marketplace-plugin-empty"}),(0,t.jsxs)("div",{className:"absolute left-1/2 top-1/2 z-[2] flex -translate-x-1/2 -translate-y-1/2 flex-col items-center",children:[(0,t.jsxs)("div",{className:"relative mb-3 flex h-14 w-14 items-center justify-center rounded-xl border border-dashed border-divider-deep bg-components-card-bg shadow-lg",children:[(0,t.jsx)(a.Group,{className:"h-5 w-5 text-text-primary"}),(0,t.jsx)(l.default,{className:"absolute right-[-1px] top-1/2 -translate-y-1/2"}),(0,t.jsx)(l.default,{className:"absolute left-[-1px] top-1/2 -translate-y-1/2"}),(0,t.jsx)(l.default,{className:"absolute left-1/2 top-0 -translate-x-1/2 -translate-y-1/2 rotate-90"}),(0,t.jsx)(l.default,{className:"absolute left-1/2 top-full -translate-x-1/2 -translate-y-1/2 rotate-90"})]}),(0,t.jsx)("div",{className:"system-md-regular text-center text-text-tertiary",children:n||c("marketplace.noPluginFound",{ns:"plugin"})})]})]})}])},602116,e=>{"use strict";var t,s=e.i(29354),a=e.i(353269),r=e.i(45284),l=e.i(268255),n=e.i(616301);e.i(604193),Symbol("Input"),!function(){if(!("u"<typeof window)&&window.GestureEvent)try{let e=navigator.userAgent?.match(/version\/([\d\.]+) safari/i);parseFloat(e[1])}catch{return 320}}();let i=function(){try{let e="nuqs-localStorage-test";if("u"<typeof localStorage)return!1;localStorage.setItem(e,e);let t=localStorage.getItem(e)===e;return localStorage.removeItem(e),t&&(localStorage.getItem("debug")||"").includes("nuqs")}catch{return!1}}();function o(e,t,s){try{return e(t)}catch(e){return!function(e){for(var t=arguments.length,s=Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];i&&console.warn(e,...s)}("[nuqs] Error while parsing value `%s`: %O"+(s?" (for key `%s`)":""),t,e,s),null}}function c(e){function t(t){if(void 0===t)return null;let s="";if(Array.isArray(t)){if(void 0===t[0])return null;s=t[0]}return"string"==typeof t&&(s=t),o(e.parse,s)}return{type:"single",eq:(e,t)=>e===t,...e,parseServerSide:t,withDefault(e){return{...this,defaultValue:e,parseServerSide:s=>t(s)??e}},withOptions(e){return{...this,...e}}}}let d=c({parse:e=>e,serialize:String});function u(e,t){return e.valueOf()===t.valueOf()}c({parse:e=>{let t=parseInt(e);return t==t?t:null},serialize:e=>""+Math.round(e)}),c({parse:e=>{let t=parseInt(e);return t==t?t-1:null},serialize:e=>""+Math.round(e+1)}),c({parse:e=>{let t=parseInt(e,16);return t==t?t:null},serialize:e=>{let t=Math.round(e).toString(16);return(1&t.length?"0":"")+t}}),c({parse:e=>{let t=parseFloat(e);return t==t?t:null},serialize:String}),c({parse:e=>"true"===e.toLowerCase(),serialize:String}),c({parse:e=>{let t=parseInt(e);return t==t?new Date(t):null},serialize:e=>""+e.valueOf(),eq:u}),c({parse:e=>{let t=new Date(e);return t.valueOf()==t.valueOf()?t:null},serialize:e=>e.toISOString(),eq:u}),c({parse:e=>{let t=new Date(e.slice(0,10));return t.valueOf()==t.valueOf()?t:null},serialize:e=>e.toISOString().slice(0,10),eq:u});let m={category:(t=Object.values(n.PLUGIN_TYPE_SEARCH_MAP),c({parse:e=>t.includes(e)?e:null,serialize:String})).withDefault("all").withOptions({history:"replace",clearOnDefault:!1}),q:d.withDefault("").withOptions({history:"replace"}),tags:(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",s=e.eq??((e,t)=>e===t),a=encodeURIComponent(t);return c({parse:s=>""===s?[]:s.split(t).map((s,r)=>o(e.parse,s.replaceAll(a,t),`[${r}]`)).filter(e=>null!=e),serialize:s=>s.map(s=>(e.serialize?e.serialize(s):String(s)).replaceAll(t,a)).join(t),eq:(e,t)=>e===t||e.length===t.length&&e.every((e,a)=>s(e,t[a]))})})(d).withDefault([]).withOptions({history:"replace"})},p=(0,s.atom)(n.DEFAULT_SORT);function x(){return(0,a.useAtom)(p)}function h(){return(0,a.useAtomValue)(p)}function f(){return(0,r.useQueryState)("q",m.q)}function g(){return(0,r.useQueryState)("category",m.category)}function v(){return(0,r.useQueryState)("tags",m.tags)}let y=(0,s.atom)(null);function b(){let[e]=f(),[t]=v(),[s]=g(),r=(0,a.useAtomValue)(y);return!!e||t.length>0||(r??!n.PLUGIN_CATEGORY_WITH_COLLECTIONS.has(s))}function j(){let[,e]=f(),t=(0,a.useSetAtom)(p),s=(0,a.useSetAtom)(y);return(0,l.useCallback)(a=>{a&&(e(a?.query||""),t({sortBy:a?.sort_by||n.DEFAULT_SORT.sortBy,sortOrder:a?.sort_order||n.DEFAULT_SORT.sortOrder}),s(!0))},[e,t,s])}e.s(["searchModeAtom",0,y,"useActivePluginType",()=>g,"useFilterPluginTags",()=>v,"useMarketplaceMoreClick",()=>j,"useMarketplaceSearchMode",()=>b,"useMarketplaceSort",()=>x,"useMarketplaceSortValue",()=>h,"useSearchPluginText",()=>f],602116)},224729,e=>{"use strict";var t=e.i(563199),s=e.i(935139),a=e.i(24393),r=e.i(374170),l=e.i(683257),n=e.i(837699),i=e.i(417944),o=e.i(282031),c=e.i(268255),d=e.i(151094),u=e.i(365181),m=e.i(919230),p=e.i(40666),x=e.i(931576),h=e.i(108185);let f=c.memo(e=>{let{plugin:s,showInstallButton:a}=e,{t:f}=(0,r.useTranslation)(),{theme:g}=(0,o.useTheme)(),[v,{setTrue:y,setFalse:b}]=(0,i.useBoolean)(!1),j=(0,l.useLocale)(),{getTagLabel:w}=(0,p.useTags)(),N=(0,c.useMemo)(()=>({language:j,theme:g}),[j,g]),C=(0,c.useMemo)(()=>s.tags.map(e=>w(e.name)),[s.tags,w]);return a?(0,t.jsxs)("div",{className:"group relative cursor-pointer rounded-xl  hover:bg-components-panel-on-panel-item-bg-hover",children:[(0,t.jsx)(u.default,{payload:s,footer:(0,t.jsx)(m.default,{downloadCount:s.install_count,tags:C})},s.name),(0,t.jsxs)("div",{className:"absolute bottom-0 hidden w-full items-center space-x-2 rounded-b-xl bg-gradient-to-tr from-components-panel-on-panel-item-bg to-background-gradient-mask-transparent px-4 pb-4 pt-4 group-hover:flex",children:[(0,t.jsx)(d.default,{variant:"primary",className:"w-[calc(50%-4px)]",onClick:y,children:f("detailPanel.operation.install",{ns:"plugin"})}),(0,t.jsx)("a",{href:(0,h.getPluginLinkInMarketplace)(s,N),target:"_blank",className:"block w-[calc(50%-4px)] flex-1 shrink-0",children:(0,t.jsxs)(d.default,{className:"w-full gap-0.5",children:[f("detailPanel.operation.detail",{ns:"plugin"}),(0,t.jsx)(n.RiArrowRightUpLine,{className:"ml-1 h-4 w-4"})]})})]}),v&&(0,t.jsx)(x.default,{manifest:s,uniqueIdentifier:s.latest_package_identifier,onClose:b,onSuccess:b})]}):(0,t.jsx)("a",{className:"group relative inline-block cursor-pointer rounded-xl",href:(0,h.getPluginDetailLinkInMarketplace)(s),children:(0,t.jsx)(u.default,{payload:s,footer:(0,t.jsx)(m.default,{downloadCount:s.install_count,tags:C})},s.name)})});var g=e.i(491234),v=e.i(602116);let y=e=>{let{marketplaceCollections:a,marketplaceCollectionPluginsMap:i,showInstallButton:o,cardContainerClassName:c,cardRender:d}=e,{t:u}=(0,r.useTranslation)(),m=(0,l.useLocale)(),p=(0,v.useMarketplaceMoreClick)();return(0,t.jsx)(t.Fragment,{children:a.filter(e=>i[e.name]?.length).map(e=>(0,t.jsxs)("div",{className:"py-3",children:[(0,t.jsxs)("div",{className:"flex items-end justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"title-xl-semi-bold text-text-primary",children:e.label[(0,g.getLanguage)(m)]}),(0,t.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:e.description[(0,g.getLanguage)(m)]})]}),e.searchable&&(0,t.jsxs)("div",{className:"system-xs-medium flex cursor-pointer items-center text-text-accent ",onClick:()=>p(e.search_params),children:[u("marketplace.viewMore",{ns:"plugin"}),(0,t.jsx)(n.RiArrowRightSLine,{className:"h-4 w-4"})]})]}),(0,t.jsx)("div",{className:(0,s.cn)("mt-2 grid grid-cols-4 gap-3",c),children:i[e.name].map(e=>d?d(e):(0,t.jsx)(f,{plugin:e,showInstallButton:o},e.plugin_id))})]},e.name))})};e.s(["default",0,e=>{let{marketplaceCollections:r,marketplaceCollectionPluginsMap:l,plugins:n,showInstallButton:i,cardContainerClassName:o,cardRender:c,emptyClassName:d}=e;return(0,t.jsxs)(t.Fragment,{children:[!n&&(0,t.jsx)(y,{marketplaceCollections:r,marketplaceCollectionPluginsMap:l,showInstallButton:i,cardContainerClassName:o,cardRender:c}),n&&!!n.length&&(0,t.jsx)("div",{className:(0,s.cn)("grid grid-cols-4 gap-3",o),children:n.map(e=>c?c(e):(0,t.jsx)(f,{plugin:e,showInstallButton:i},`${e.org}/${e.name}`))}),n&&!n.length&&(0,t.jsx)(a.default,{className:d})]})}],224729)},483561,e=>{"use strict";var t=e.i(259217);e.s(["Settings01",()=>t.default])},762366,e=>{"use strict";var t=e.i(563199),s=e.i(837699),a=e.i(105845),r=e.i(268255);e.i(152567);var l=e.i(408767),n=e.i(257899),i=e.i(151094),o=e.i(592366),c=e.i(561518),d=e.i(291631),u=e.i(873517),m=e.i(137667),p=e.i(421001),x=e.i(32032),h=e.i(124836);e.i(793622);var f=e.i(259509),g=e.i(21151),v=e.i(935139);let y=e=>{let{show:a,onConfirm:r,onClose:n}=e,{t:o}=(0,l.useTranslation)();return(0,t.jsxs)(g.default,{className:(0,v.cn)("w-[600px] max-w-[600px] p-8"),isShow:a,onClose:h.noop,children:[(0,t.jsx)("div",{className:"absolute right-4 top-4 cursor-pointer p-2",onClick:n,children:(0,t.jsx)(s.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})}),(0,t.jsx)("div",{className:"h-12 w-12 rounded-xl border-[0.5px] border-divider-regular bg-background-section p-3 shadow-xl",children:(0,t.jsx)(f.AlertTriangle,{className:"h-6 w-6 text-[rgb(247,144,9)]"})}),(0,t.jsx)("div",{className:"relative mt-3 text-xl font-semibold leading-[30px] text-text-primary",children:o("createTool.confirmTitle",{ns:"tools"})}),(0,t.jsx)("div",{className:"my-1 text-sm leading-5 text-text-tertiary",children:o("createTool.confirmTip",{ns:"tools"})}),(0,t.jsx)("div",{className:"flex items-center justify-end pt-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(i.default,{className:"mr-2",onClick:n,children:o("operation.cancel",{ns:"common"})}),(0,t.jsx)(i.default,{variant:"warning",onClick:r,children:o("operation.confirm",{ns:"common"})})]})})]})};e.i(47690);var b=e.i(490774),j=e.i(391185);let w=e=>{let{value:a,onChange:n}=e,{t:i}=(0,l.useTranslation)(),[o,c]=(0,r.useState)(!1);return(0,t.jsx)(j.PortalToFollowElem,{open:o,onOpenChange:c,placement:"bottom-start",offset:4,children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(j.PortalToFollowElemTrigger,{onClick:()=>c(e=>!e),className:"block",children:(0,t.jsxs)("div",{className:(0,v.cn)("flex h-9 min-h-[56px] cursor-pointer items-center gap-1 bg-transparent px-3 py-2 hover:bg-background-section-burn",o&&"!bg-background-section-burn hover:bg-background-section-burn"),children:[(0,t.jsx)("div",{className:(0,v.cn)("grow truncate text-[13px] leading-[18px] text-text-secondary"),children:i("llm"===a?"createTool.toolInput.methodParameter":"createTool.toolInput.methodSetting",{ns:"tools"})}),(0,t.jsx)("div",{className:"ml-1 shrink-0 text-text-secondary opacity-60",children:(0,t.jsx)(s.RiArrowDownSLine,{className:"h-4 w-4"})})]})}),(0,t.jsx)(j.PortalToFollowElemContent,{className:"z-[1040]",children:(0,t.jsx)("div",{className:"relative w-[320px] rounded-lg border-[0.5px] border-components-panel-border bg-components-panel-bg-blur shadow-lg  backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"p-1",children:[(0,t.jsxs)("div",{className:"cursor-pointer rounded-lg py-2.5 pl-3 pr-2 hover:bg-components-panel-on-panel-item-bg-hover",onClick:()=>n("llm"),children:[(0,t.jsxs)("div",{className:"item-center flex gap-1",children:[(0,t.jsx)("div",{className:"h-4 w-4 shrink-0",children:"llm"===a&&(0,t.jsx)(b.Check,{className:"h-4 w-4 shrink-0 text-text-accent"})}),(0,t.jsx)("div",{className:"text-[13px] font-medium leading-[18px] text-text-secondary",children:i("createTool.toolInput.methodParameter",{ns:"tools"})})]}),(0,t.jsx)("div",{className:"pl-5 text-[13px] leading-[18px] text-text-tertiary",children:i("createTool.toolInput.methodParameterTip",{ns:"tools"})})]}),(0,t.jsxs)("div",{className:"cursor-pointer rounded-lg py-2.5 pl-3 pr-2 hover:bg-components-panel-on-panel-item-bg-hover",onClick:()=>n("form"),children:[(0,t.jsxs)("div",{className:"item-center flex gap-1",children:[(0,t.jsx)("div",{className:"h-4 w-4 shrink-0",children:"form"===a&&(0,t.jsx)(b.Check,{className:"h-4 w-4 shrink-0 text-text-accent"})}),(0,t.jsx)("div",{className:"text-[13px] font-medium leading-[18px] text-text-secondary",children:i("createTool.toolInput.methodSetting",{ns:"tools"})})]}),(0,t.jsx)("div",{className:"pl-5 text-[13px] leading-[18px] text-text-tertiary",children:i("createTool.toolInput.methodSettingTip",{ns:"tools"})})]})]})})})]})})};var N=e.i(390622);let C=new Set(Object.values(N.VarType)),k=r.memo(e=>{let{isAdd:h,payload:f,onHide:g,onRemove:b,onSave:j,onCreate:k}=e,{t:T}=(0,l.useTranslation)(),[S,_]=(0,r.useState)(!1),[L,I]=(0,r.useState)(f.icon),[O,F]=(0,r.useState)(f.label),[M,A]=(0,r.useState)(f.name),[E,P]=(0,r.useState)(f.description),[R,V]=(0,r.useState)(f.parameters),z=f.outputParameters,B=f.tool?.output_schema,D=(0,r.useMemo)(()=>Array.isArray(z)?z:B?.properties?Object.entries(B.properties).map(e=>{let[t,s]=e;return{name:t,description:s.description,type:(e=>{if(e)return C.has(e)?e:void 0})(s.type)}}):[],[z,B]),q=[{name:"text",description:T("nodes.tool.outputVars.text",{ns:"workflow"}),type:N.VarType.string,reserved:!0},{name:"files",description:T("nodes.tool.outputVars.files.title",{ns:"workflow"}),type:N.VarType.arrayFile,reserved:!0},{name:"json",description:T("nodes.tool.outputVars.json",{ns:"workflow"}),type:N.VarType.arrayObject,reserved:!0}],U=(e,t,s)=>{V((0,a.produce)(R,a=>{"description"===e?a[s].description=t:a[s].form=t}))},[H,W]=(0,r.useState)(f.labels),[$,G]=(0,r.useState)(f.privacy_policy),[Z,K]=(0,r.useState)(!1),Q=e=>""===e||/^\w+$/.test(e),Y=()=>{let e="";if(O||(e=T("errorMsg.fieldRequired",{ns:"common",field:T("createTool.name",{ns:"tools"})})),M||(e=T("errorMsg.fieldRequired",{ns:"common",field:T("createTool.nameForToolCall",{ns:"tools"})})),Q(M)||(e=T("createTool.nameForToolCall",{ns:"tools"})+T("createTool.nameForToolCallTip",{ns:"tools"})),e)return void m.default.notify({type:"error",message:e});let t={name:M,description:E,icon:L,label:O,parameters:R.map(e=>({name:e.name,description:e.description,form:e.form})),labels:H,privacy_policy:$};h?k?.({...t,workflow_app_id:f.workflow_app_id}):j?.({...t,workflow_tool_id:f.workflow_tool_id})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.default,{isShow:!0,onHide:g,title:T("common.workflowAsTool",{ns:"workflow"}),panelClassName:"mt-2 !w-[640px]",maxWidthClassName:"!max-w-[640px]",height:"calc(100vh - 16px)",headerClassName:"!border-b-divider",body:(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsxs)("div",{className:"h-0 grow space-y-4 overflow-y-auto px-6 py-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"system-sm-medium py-2 text-text-primary",children:[T("createTool.name",{ns:"tools"})," ",(0,t.jsx)("span",{className:"ml-1 text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsx)(n.default,{size:"large",onClick:()=>{_(!0)},className:"cursor-pointer",iconType:"emoji",icon:L.content,background:L.background}),(0,t.jsx)(d.default,{className:"h-10 grow",placeholder:T("createTool.toolNamePlaceHolder",{ns:"tools"}),value:O,onChange:e=>F(e.target.value)})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"system-sm-medium flex items-center py-2 text-text-primary",children:[T("createTool.nameForToolCall",{ns:"tools"})," ",(0,t.jsx)("span",{className:"ml-1 text-red-500",children:"*"}),(0,t.jsx)(p.default,{popupContent:(0,t.jsx)("div",{className:"w-[180px]",children:T("createTool.nameForToolCallPlaceHolder",{ns:"tools"})})})]}),(0,t.jsx)(d.default,{className:"h-10",placeholder:T("createTool.nameForToolCallPlaceHolder",{ns:"tools"}),value:M,onChange:e=>A(e.target.value)}),!Q(M)&&(0,t.jsx)("div",{className:"text-xs leading-[18px] text-red-500",children:T("createTool.nameForToolCallTip",{ns:"tools"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"system-sm-medium py-2 text-text-primary",children:T("createTool.description",{ns:"tools"})}),(0,t.jsx)(u.default,{placeholder:T("createTool.descriptionPlaceholder",{ns:"tools"})||"",value:E,onChange:e=>P(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"system-sm-medium py-2 text-text-primary",children:T("createTool.toolInput.title",{ns:"tools"})}),(0,t.jsx)("div",{className:"w-full overflow-x-auto rounded-lg border border-divider-regular",children:(0,t.jsxs)("table",{className:"w-full text-xs font-normal leading-[18px] text-text-secondary",children:[(0,t.jsx)("thead",{className:"uppercase text-text-tertiary",children:(0,t.jsxs)("tr",{className:"border-b border-divider-regular",children:[(0,t.jsx)("th",{className:"w-[156px] p-2 pl-3 font-medium",children:T("createTool.toolInput.name",{ns:"tools"})}),(0,t.jsx)("th",{className:"w-[102px] p-2 pl-3 font-medium",children:T("createTool.toolInput.method",{ns:"tools"})}),(0,t.jsx)("th",{className:"p-2 pl-3 font-medium",children:T("createTool.toolInput.description",{ns:"tools"})})]})}),(0,t.jsx)("tbody",{children:R.map((e,s)=>(0,t.jsxs)("tr",{className:"border-b border-divider-regular last:border-0",children:[(0,t.jsx)("td",{className:"max-w-[156px] p-2 pl-3",children:(0,t.jsxs)("div",{className:"text-[13px] leading-[18px]",children:[(0,t.jsxs)("div",{title:e.name,className:"flex",children:[(0,t.jsx)("span",{className:"truncate font-medium text-text-primary",children:e.name}),(0,t.jsx)("span",{className:"shrink-0 pl-1 text-xs leading-[18px] text-[#ec4a0a]",children:e.required?T("createTool.toolInput.required",{ns:"tools"}):""})]}),(0,t.jsx)("div",{className:"text-text-tertiary",children:e.type})]})}),(0,t.jsxs)("td",{children:["__image"===e.name&&(0,t.jsx)("div",{className:(0,v.cn)("flex h-9 min-h-[56px] cursor-default items-center gap-1 bg-transparent px-3 py-2"),children:(0,t.jsx)("div",{className:(0,v.cn)("grow truncate text-[13px] leading-[18px] text-text-secondary"),children:T("createTool.toolInput.methodParameter",{ns:"tools"})})}),"__image"!==e.name&&(0,t.jsx)(w,{value:e.form,onChange:e=>U("form",e,s)})]}),(0,t.jsx)("td",{className:"w-[236px] p-2 pl-3 text-text-tertiary",children:(0,t.jsx)("input",{type:"text",className:"w-full appearance-none bg-transparent text-[13px] font-normal leading-[18px] text-text-secondary caret-primary-600 outline-none placeholder:text-text-quaternary",placeholder:T("createTool.toolInput.descriptionPlaceholder",{ns:"tools"}),value:e.description,onChange:e=>U("description",e.target.value,s)})})]},s))})]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"system-sm-medium py-2 text-text-primary",children:T("createTool.toolOutput.title",{ns:"tools"})}),(0,t.jsx)("div",{className:"w-full overflow-x-auto rounded-lg border border-divider-regular",children:(0,t.jsxs)("table",{className:"w-full text-xs font-normal leading-[18px] text-text-secondary",children:[(0,t.jsx)("thead",{className:"uppercase text-text-tertiary",children:(0,t.jsxs)("tr",{className:"border-b border-divider-regular",children:[(0,t.jsx)("th",{className:"w-[156px] p-2 pl-3 font-medium",children:T("createTool.name",{ns:"tools"})}),(0,t.jsx)("th",{className:"p-2 pl-3 font-medium",children:T("createTool.toolOutput.description",{ns:"tools"})})]})}),(0,t.jsx)("tbody",{children:[...q,...D].map((e,a)=>{let r;return(0,t.jsxs)("tr",{className:"border-b border-divider-regular last:border-0",children:[(0,t.jsx)("td",{className:"max-w-[156px] p-2 pl-3",children:(0,t.jsxs)("div",{className:"text-[13px] leading-[18px]",children:[(0,t.jsxs)("div",{title:e.name,className:"flex items-center",children:[(0,t.jsx)("span",{className:"truncate font-medium text-text-primary",children:e.name}),(0,t.jsx)("span",{className:"shrink-0 pl-1 text-xs leading-[18px] text-[#ec4a0a]",children:e.reserved?T("createTool.toolOutput.reserved",{ns:"tools"}):""}),!e.reserved&&(r=e.name,q.find(e=>e.name===r))?(0,t.jsx)(p.default,{popupContent:(0,t.jsx)("div",{className:"w-[180px]",children:T("createTool.toolOutput.reservedParameterDuplicateTip",{ns:"tools"})}),children:(0,t.jsx)(s.RiErrorWarningLine,{className:"h-3 w-3 text-text-warning-secondary"})}):null]}),(0,t.jsx)("div",{className:"text-text-tertiary",children:e.type})]})}),(0,t.jsx)("td",{className:"w-[236px] p-2 pl-3 text-text-tertiary",children:(0,t.jsx)("span",{className:"text-[13px] font-normal leading-[18px] text-text-secondary",children:e.description})})]},a)})})]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"system-sm-medium py-2 text-text-primary",children:T("createTool.toolInput.label",{ns:"tools"})}),(0,t.jsx)(x.default,{value:H,onChange:e=>{W(e)}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"system-sm-medium py-2 text-text-primary",children:T("createTool.privacyPolicy",{ns:"tools"})}),(0,t.jsx)(d.default,{className:"h-10",value:$,onChange:e=>G(e.target.value),placeholder:T("createTool.privacyPolicyPlaceholder",{ns:"tools"})||""})]})]}),(0,t.jsxs)("div",{className:(0,v.cn)(!h&&b?"justify-between":"justify-end","mt-2 flex shrink-0 rounded-b-[10px] border-t border-divider-regular bg-background-section-burn px-6 py-4"),children:[!h&&b&&(0,t.jsx)(i.default,{variant:"warning",onClick:b,children:T("operation.delete",{ns:"common"})}),(0,t.jsxs)("div",{className:"flex space-x-2 ",children:[(0,t.jsx)(i.default,{onClick:g,children:T("operation.cancel",{ns:"common"})}),(0,t.jsx)(i.default,{variant:"primary",onClick:()=>{h?Y():K(!0)},children:T("operation.save",{ns:"common"})})]})]})]}),isShowMask:!0,clickOutsideNotOpen:!0}),S&&(0,t.jsx)(c.default,{onSelect:(e,t)=>{I({content:e,background:t}),_(!1)},onClose:()=>{_(!1)}}),Z&&(0,t.jsx)(y,{show:Z,onClose:()=>K(!1),onConfirm:Y})]})});e.s(["default",0,k],762366)},23651,e=>{"use strict";var t=e.i(343050);e.s(["Tag01",()=>t.default])},207853,e=>{"use strict";var t=e.i(563199),s=e.i(935139);e.s(["default",0,e=>{let{className:a,value:r,onChange:l,options:n}=e;return(0,t.jsx)("div",{className:(0,s.cn)(a,"relative flex"),children:n.map(e=>(0,t.jsxs)("div",{onClick:()=>l(e.value),className:(0,s.cn)("mr-1 flex h-[32px] cursor-pointer items-center rounded-lg border-[0.5px] border-transparent px-3 py-[7px] text-[13px] font-medium leading-[18px] text-text-tertiary hover:bg-state-base-hover",r===e.value&&"border-components-main-nav-nav-button-border bg-state-base-hover text-components-main-nav-nav-button-text-active shadow-xs"),children:[e.icon,e.text]},e.value))})}])},201201,e=>{e.v(t=>Promise.all(["static/chunks/33d89f7067007c66.js","static/chunks/c798d4f27fd7256a.js","static/chunks/093735e21ea40753.css"].map(t=>e.l(t))).then(()=>t(661305)))},170830,e=>{e.v(e=>Promise.resolve().then(()=>e(81828)))}]);