(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,210644,e=>{"use strict";var t=e.i(824627),n=e.i(585458),s=e.i(268255),r=e.i(393689),a=e.i(773923),i=function(e){if(!e)return 0;var t=(0,n.default)(e).valueOf()-Date.now();return t<0?0:t};e.s(["useCountDown",0,function(e){void 0===e&&(e={});var n=e||{},o=n.leftTime,l=n.targetDate,c=n.interval,d=void 0===c?1e3:c,u=n.onEnd,m=(0,s.useMemo)(function(){return(0,a.isNumber)(o)&&o>0?Date.now()+o:void 0},[o]),f="leftTime"in e?m:l,h=(0,t.__read)((0,s.useState)(function(){return i(f)}),2),g=h[0],x=h[1],v=(0,r.default)(u);(0,s.useEffect)(function(){if(!f)return void x(0);x(i(f));var e=setInterval(function(){var t,n=i(f);x(n),0===n&&(clearInterval(e),null==(t=v.current)||t.call(v))},d);return function(){return clearInterval(e)}},[f,d]);var p=(0,s.useMemo)(function(){return{days:Math.floor(g/864e5),hours:Math.floor(g/36e5)%24,minutes:Math.floor(g/6e4)%60,seconds:Math.floor(g/1e3)%60,milliseconds:Math.floor(g)%1e3}},[g]);return[g,p]}],210644)},508430,e=>{"use strict";var t=e.i(563199),n=e.i(210644),s=e.i(268255);e.i(152567);var r=e.i(408767);let a="leftTime";function i(e){let{onResend:i}=e,{t:o}=(0,r.useTranslation)(),[l,c]=(0,s.useState)(()=>Number(localStorage.getItem(a)||59e3)),[d]=(0,n.useCountDown)({leftTime:l,onEnd:()=>{c(0),localStorage.removeItem(a)}}),u=async function(){c(59e3),localStorage.setItem(a,"59000"),i?.()};return(0,s.useEffect)(()=>{localStorage.setItem(a,`${d}`)},[d]),(0,t.jsxs)("p",{className:"system-xs-regular text-text-tertiary",children:[(0,t.jsx)("span",{children:o("checkCode.didNotReceiveCode",{ns:"login"})}),d>0&&(0,t.jsxs)("span",{children:[Math.round(d/1e3),"s"]}),d<=0&&(0,t.jsx)("span",{className:"system-xs-medium cursor-pointer text-text-accent-secondary",onClick:u,children:o("checkCode.resend",{ns:"login"})})]})}e.s(["COUNT_DOWN_KEY",0,a,"COUNT_DOWN_TIME_MS",0,59e3,"default",()=>i])},542848,e=>{"use strict";var t=e.i(563199),n=e.i(837699),s=e.i(326531),r=e.i(268255);e.i(152567);var a=e.i(408767),i=e.i(151094),o=e.i(291631),l=e.i(137667),c=e.i(508430),d=e.i(683257),u=e.i(652669);function m(){let{t:e}=(0,a.useTranslation)(),m=(0,s.useRouter)(),f=(0,s.useSearchParams)(),h=decodeURIComponent(f.get("email")),[g,x]=(0,r.useState)(decodeURIComponent(f.get("token"))),[v,p]=(0,r.useState)(""),[y,C]=(0,r.useState)(!1),k=(0,d.useLocale)(),{mutateAsync:b}=(0,u.useSendMail)(),{mutateAsync:j}=(0,u.useMailValidity)(),N=async()=>{try{if(!v.trim())return void l.default.notify({type:"error",message:e("checkCode.emptyCode",{ns:"login"})});if(!/\d{6}/.test(v))return void l.default.notify({type:"error",message:e("checkCode.invalidCode",{ns:"login"})});C(!0);let t=await j({email:h,code:v,token:g});if(t.is_valid){let e=new URLSearchParams(f);e.set("token",encodeURIComponent(t.token)),m.push(`/signup/set-password?${e.toString()}`)}else l.default.notify({type:"error",message:e("checkCode.invalidCode",{ns:"login"})})}catch(e){console.error(e)}finally{C(!1)}},S=async()=>{try{let e=await b({email:h,language:k});if("success"===e.result){let t=new URLSearchParams(f),n=e?.data;t.set("token",encodeURIComponent(n)),x(n),m.replace(`/signup/check-code?${t.toString()}`)}}catch(e){console.error(e)}};return(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"inline-flex h-14 w-14 items-center justify-center rounded-2xl border border-components-panel-border-subtle bg-background-default-dodge shadow-lg",children:(0,t.jsx)(n.RiMailSendFill,{className:"h-6 w-6 text-2xl text-text-accent-light-mode-only"})}),(0,t.jsxs)("div",{className:"pb-4 pt-2",children:[(0,t.jsx)("h2",{className:"title-4xl-semi-bold text-text-primary",children:e("checkCode.checkYourEmail",{ns:"login"})}),(0,t.jsxs)("p",{className:"body-md-regular mt-2 text-text-secondary",children:[(0,t.jsxs)("span",{children:[e("checkCode.tipsPrefix",{ns:"login"}),(0,t.jsx)("strong",{children:h})]}),(0,t.jsx)("br",{}),e("checkCode.validTime",{ns:"login"})]})]}),(0,t.jsxs)("form",{action:"",children:[(0,t.jsx)("label",{htmlFor:"code",className:"system-md-semibold mb-1 text-text-secondary",children:e("checkCode.verificationCode",{ns:"login"})}),(0,t.jsx)(o.default,{value:v,onChange:e=>p(e.target.value),maxLength:6,className:"mt-1",placeholder:e("checkCode.verificationCodePlaceholder",{ns:"login"})}),(0,t.jsx)(i.default,{loading:y,disabled:y,className:"my-3 w-full",variant:"primary",onClick:N,children:e("checkCode.verify",{ns:"login"})}),(0,t.jsx)(c.default,{onResend:S})]}),(0,t.jsx)("div",{className:"py-2",children:(0,t.jsx)("div",{className:"h-px bg-gradient-to-r from-background-gradient-mask-transparent via-divider-regular to-background-gradient-mask-transparent"})}),(0,t.jsxs)("div",{onClick:()=>m.back(),className:"flex h-9 cursor-pointer items-center justify-center text-text-tertiary",children:[(0,t.jsx)("div",{className:"bg-background-default-dimm inline-block rounded-full p-1",children:(0,t.jsx)(n.RiArrowLeftLine,{size:12})}),(0,t.jsx)("span",{className:"system-xs-regular ml-2",children:e("back",{ns:"login"})})]})]})}e.s(["default",()=>m])}]);