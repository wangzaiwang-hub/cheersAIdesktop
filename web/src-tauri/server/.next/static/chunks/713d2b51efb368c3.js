(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64856,570126,t=>{"use strict";var e=t.i(804893),a=t.i(737652),l=t.i(362988),r=t.i(948827),n=t.i(206655),i=t.i(418274);t.i(991577);var s=t.i(692423);function h(t,e,a){if(t&&t.length){let[l,r]=e,n=Math.PI/180*a,i=Math.cos(n),s=Math.sin(n);for(let e of t){let[t,a]=e;e[0]=(t-l)*i-(a-r)*s+l,e[1]=(t-l)*s+(a-r)*i+r}}}function o(t,e){var a;let l=e.hachureAngle+90,r=e.hachureGap;r<0&&(r=4*e.strokeWidth),r=Math.round(Math.max(r,.1));let n=1;return e.roughness>=1&&((null==(a=e.randomizer)?void 0:a.next())||Math.random())>.7&&(n=r),function(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=Math.max(e,.1),n=t[0]&&t[0][0]&&"number"==typeof t[0][0]?[t]:t,i=[0,0];if(a)for(let t of n)h(t,i,a);let s=function(t,e,a){let l=[];for(let e of t){var r,n;let t=[...e];r=t[0],n=t[t.length-1],r[0]===n[0]&&r[1]===n[1]||t.push([t[0][0],t[0][1]]),t.length>2&&l.push(t)}let i=[];e=Math.max(e,.1);let s=[];for(let t of l)for(let e=0;e<t.length-1;e++){let a=t[e],l=t[e+1];if(a[1]!==l[1]){let t=Math.min(a[1],l[1]);s.push({ymin:t,ymax:Math.max(a[1],l[1]),x:t===a[1]?a[0]:l[0],islope:(l[0]-a[0])/(l[1]-a[1])})}}if(s.sort((t,e)=>t.ymin<e.ymin?-1:t.ymin>e.ymin?1:t.x<e.x?-1:t.x>e.x?1:t.ymax===e.ymax?0:(t.ymax-e.ymax)/Math.abs(t.ymax-e.ymax)),!s.length)return i;let h=[],o=s[0].ymin,d=0;for(;h.length||s.length;){if(s.length){let t=-1;for(let e=0;e<s.length&&!(s[e].ymin>o);e++)t=e;s.splice(0,t+1).forEach(t=>{h.push({s:o,edge:t})})}if((h=h.filter(t=>!(t.edge.ymax<=o))).sort((t,e)=>t.edge.x===e.edge.x?0:(t.edge.x-e.edge.x)/Math.abs(t.edge.x-e.edge.x)),(1!==a||d%e==0)&&h.length>1)for(let t=0;t<h.length;t+=2){let e=t+1;if(e>=h.length)break;let a=h[t].edge,l=h[e].edge;i.push([[Math.round(a.x),o],[Math.round(l.x),o]])}o+=a,h.forEach(t=>{t.edge.x=t.edge.x+a*t.edge.islope}),d++}return i}(n,r,l);if(a){let t;for(let t of n)h(t,i,-a);t=[],s.forEach(e=>t.push(...e)),h(t,i,-a)}return s}(t,r,l,n||1)}class d{constructor(t){this.helper=t}fillPolygons(t,e){return this._fillPolygons(t,e)}_fillPolygons(t,e){let a=o(t,e);return{type:"fillSketch",ops:this.renderLines(a,e)}}renderLines(t,e){let a=[];for(let l of t)a.push(...this.helper.doubleLineOps(l[0][0],l[0][1],l[1][0],l[1][1],e));return a}}function c(t){let e=t[0],a=t[1];return Math.sqrt(Math.pow(e[0]-a[0],2)+Math.pow(e[1]-a[1],2))}class g extends d{fillPolygons(t,e){let a=e.hachureGap;a<0&&(a=4*e.strokeWidth);let l=o(t,Object.assign({},e,{hachureGap:a=Math.max(a,.1)})),r=Math.PI/180*e.hachureAngle,n=[],i=.5*a*Math.cos(r),s=.5*a*Math.sin(r);for(let[t,e]of l)c([t,e])&&n.push([[t[0]-i,t[1]+s],[...e]],[[t[0]+i,t[1]-s],[...e]]);return{type:"fillSketch",ops:this.renderLines(n,e)}}}class u extends d{fillPolygons(t,e){let a=this._fillPolygons(t,e),l=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),r=this._fillPolygons(t,l);return a.ops=a.ops.concat(r.ops),a}}class f{constructor(t){this.helper=t}fillPolygons(t,e){let a=o(t,e=Object.assign({},e,{hachureAngle:0}));return this.dotsOnLines(a,e)}dotsOnLines(t,e){let a=[],l=e.hachureGap;l<0&&(l=4*e.strokeWidth),l=Math.max(l,.1);let r=e.fillWeight;r<0&&(r=e.strokeWidth/2);let n=l/4;for(let i of t){let t=c(i),s=Math.ceil(t/l)-1,h=t-s*l,o=(i[0][0]+i[1][0])/2-l/4,d=Math.min(i[0][1],i[1][1]);for(let t=0;t<s;t++){let i=o-n+2*Math.random()*n,s=d+h+t*l-n+2*Math.random()*n,c=this.helper.ellipse(i,s,r,r,e);a.push(...c.ops)}}return{type:"fillSketch",ops:a}}}class p{constructor(t){this.helper=t}fillPolygons(t,e){let a=o(t,e);return{type:"fillSketch",ops:this.dashedLine(a,e)}}dashedLine(t,e){let a=e.dashOffset<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashOffset,l=e.dashGap<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashGap,r=[];return t.forEach(t=>{let n=c(t),i=Math.floor(n/(a+l)),s=(n+l-i*(a+l))/2,h=t[0],o=t[1];h[0]>o[0]&&(h=t[1],o=t[0]);let d=Math.atan((o[1]-h[1])/(o[0]-h[0]));for(let t=0;t<i;t++){let n=t*(a+l),i=n+a,o=[h[0]+n*Math.cos(d)+s*Math.cos(d),h[1]+n*Math.sin(d)+s*Math.sin(d)],c=[h[0]+i*Math.cos(d)+s*Math.cos(d),h[1]+i*Math.sin(d)+s*Math.sin(d)];r.push(...this.helper.doubleLineOps(o[0],o[1],c[0],c[1],e))}}),r}}class y{constructor(t){this.helper=t}fillPolygons(t,e){let a=e.hachureGap<0?4*e.strokeWidth:e.hachureGap,l=e.zigzagOffset<0?a:e.zigzagOffset,r=o(t,e=Object.assign({},e,{hachureGap:a+l}));return{type:"fillSketch",ops:this.zigzagLines(r,l,e)}}zigzagLines(t,e,a){let l=[];return t.forEach(t=>{let r=Math.round(c(t)/(2*e)),n=t[0],i=t[1];n[0]>i[0]&&(n=t[1],i=t[0]);let s=Math.atan((i[1]-n[1])/(i[0]-n[0]));for(let t=0;t<r;t++){let r=2*t*e,i=2*(t+1)*e,h=Math.sqrt(2*Math.pow(e,2)),o=[n[0]+r*Math.cos(s),n[1]+r*Math.sin(s)],d=[n[0]+i*Math.cos(s),n[1]+i*Math.sin(s)],c=[o[0]+h*Math.cos(s+Math.PI/4),o[1]+h*Math.sin(s+Math.PI/4)];l.push(...this.helper.doubleLineOps(o[0],o[1],c[0],c[1],a),...this.helper.doubleLineOps(c[0],c[1],d[0],d[1],a))}}),l}}let m={};class x{constructor(t){this.seed=t}next(){return this.seed?(0x80000000-1&(this.seed=Math.imul(48271,this.seed)))/0x80000000:Math.random()}}let w={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function b(t){let e=[],a=function(t){let e=[];for(;""!==t;)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:0,text:RegExp.$1},t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];e[e.length]={type:1,text:`${parseFloat(RegExp.$1)}`},t=t.substr(RegExp.$1.length)}return e[e.length]={type:2,text:""},e}(t),l="BOD",r=0,n=a[0];for(;2!==n.type;){let i=0,s=[];if("BOD"===l){if("M"!==n.text&&"m"!==n.text)return b("M0,0"+t);r++,i=w[n.text],l=n.text}else 1===n.type?i=w[l]:(r++,i=w[n.text],l=n.text);if(!(r+i<a.length))throw Error("Path data ended short");for(let t=r;t<r+i;t++){let e=a[t];if(1!==e.type)throw Error("Param not a number: "+l+","+e.text);s[s.length]=+e.text}if("number"!=typeof w[l])throw Error("Bad segment: "+l);{let t={key:l,data:s};e.push(t),r+=i,n=a[r],"M"===l&&(l="L"),"m"===l&&(l="l")}}return e}function $(t){let e=0,a=0,l=0,r=0,n=[];for(let{key:i,data:s}of t)switch(i){case"M":n.push({key:"M",data:[...s]}),[e,a]=s,[l,r]=s;break;case"m":e+=s[0],a+=s[1],n.push({key:"M",data:[e,a]}),l=e,r=a;break;case"L":n.push({key:"L",data:[...s]}),[e,a]=s;break;case"l":e+=s[0],a+=s[1],n.push({key:"L",data:[e,a]});break;case"C":n.push({key:"C",data:[...s]}),e=s[4],a=s[5];break;case"c":{let t=s.map((t,l)=>l%2?t+a:t+e);n.push({key:"C",data:t}),e=t[4],a=t[5];break}case"Q":n.push({key:"Q",data:[...s]}),e=s[2],a=s[3];break;case"q":{let t=s.map((t,l)=>l%2?t+a:t+e);n.push({key:"Q",data:t}),e=t[2],a=t[3];break}case"A":n.push({key:"A",data:[...s]}),e=s[5],a=s[6];break;case"a":e+=s[5],a+=s[6],n.push({key:"A",data:[s[0],s[1],s[2],s[3],s[4],e,a]});break;case"H":n.push({key:"H",data:[...s]}),e=s[0];break;case"h":e+=s[0],n.push({key:"H",data:[e]});break;case"V":n.push({key:"V",data:[...s]}),a=s[0];break;case"v":a+=s[0],n.push({key:"V",data:[a]});break;case"S":n.push({key:"S",data:[...s]}),e=s[2],a=s[3];break;case"s":{let t=s.map((t,l)=>l%2?t+a:t+e);n.push({key:"S",data:t}),e=t[2],a=t[3];break}case"T":n.push({key:"T",data:[...s]}),e=s[0],a=s[1];break;case"t":e+=s[0],a+=s[1],n.push({key:"T",data:[e,a]});break;case"Z":case"z":n.push({key:"Z",data:[]}),e=l,a=r}return n}function k(t){let e=[],a="",l=0,r=0,n=0,i=0,s=0,h=0;for(let{key:o,data:d}of t){switch(o){case"M":e.push({key:"M",data:[...d]}),[l,r]=d,[n,i]=d;break;case"C":e.push({key:"C",data:[...d]}),l=d[4],r=d[5],s=d[2],h=d[3];break;case"L":e.push({key:"L",data:[...d]}),[l,r]=d;break;case"H":l=d[0],e.push({key:"L",data:[l,r]});break;case"V":r=d[0],e.push({key:"L",data:[l,r]});break;case"S":{let t=0,n=0;"C"===a||"S"===a?(t=l+(l-s),n=r+(r-h)):(t=l,n=r),e.push({key:"C",data:[t,n,...d]}),s=d[0],h=d[1],l=d[2],r=d[3];break}case"T":{let[t,n]=d,i=0,o=0;"Q"===a||"T"===a?(i=l+(l-s),o=r+(r-h)):(i=l,o=r);let c=l+2*(i-l)/3,g=r+2*(o-r)/3,u=t+2*(i-t)/3,f=n+2*(o-n)/3;e.push({key:"C",data:[c,g,u,f,t,n]}),s=i,h=o,l=t,r=n;break}case"Q":{let[t,a,n,i]=d,o=l+2*(t-l)/3,c=r+2*(a-r)/3,g=n+2*(t-n)/3,u=i+2*(a-i)/3;e.push({key:"C",data:[o,c,g,u,n,i]}),s=t,h=a,l=n,r=i;break}case"A":{let t=Math.abs(d[0]),a=Math.abs(d[1]),n=d[2],i=d[3],s=d[4],h=d[5],o=d[6];0===t||0===a?(e.push({key:"C",data:[l,r,h,o,h,o]}),l=h,r=o):(l!==h||r!==o)&&((function t(e,a,l,r,n,i,s,h,o,d){let c=Math.PI*s/180,g=[],u=0,f=0,p=0,y=0;if(d)[u,f,p,y]=d;else{[e,a]=M(e,a,-c),[l,r]=M(l,r,-c);let t=(e-l)/2,s=(a-r)/2,d=t*t/(n*n)+s*s/(i*i);d>1&&(n*=d=Math.sqrt(d),i*=d);let g=n*n,m=i*i,x=(h===o?-1:1)*Math.sqrt(Math.abs((g*m-g*s*s-m*t*t)/(g*s*s+m*t*t)));p=x*n*s/i+(e+l)/2,y=-(x*i)*t/n+(a+r)/2,u=Math.asin(parseFloat(((a-y)/i).toFixed(9))),f=Math.asin(parseFloat(((r-y)/i).toFixed(9))),e<p&&(u=Math.PI-u),l<p&&(f=Math.PI-f),u<0&&(u=2*Math.PI+u),f<0&&(f=2*Math.PI+f),o&&u>f&&(u-=2*Math.PI),!o&&f>u&&(f-=2*Math.PI)}let m=f-u;if(Math.abs(m)>120*Math.PI/180){let e=f,a=l,h=r;g=t(l=p+n*Math.cos(f=o&&f>u?u+120*Math.PI/180*1:u+-(120*Math.PI/180*1)),r=y+i*Math.sin(f),a,h,n,i,s,0,o,[f,e,p,y])}m=f-u;let x=Math.cos(u),w=Math.cos(f),b=Math.tan(m/4),$=4/3*n*b,k=4/3*i*b,S=[e,a],v=[e+$*Math.sin(u),a-k*x],_=[l+$*Math.sin(f),r-k*w],D=[l,r];if(v[0]=2*S[0]-v[0],v[1]=2*S[1]-v[1],d)return[v,_,D].concat(g);{g=[v,_,D].concat(g);let t=[];for(let e=0;e<g.length;e+=3){let a=M(g[e][0],g[e][1],c),l=M(g[e+1][0],g[e+1][1],c),r=M(g[e+2][0],g[e+2][1],c);t.push([a[0],a[1],l[0],l[1],r[0],r[1]])}return t}})(l,r,h,o,t,a,n,i,s).forEach(function(t){e.push({key:"C",data:t})}),l=h,r=o);break}case"Z":e.push({key:"Z",data:[]}),l=n,r=i}a=o}return e}function M(t,e,a){return[t*Math.cos(a)-e*Math.sin(a),t*Math.sin(a)+e*Math.cos(a)]}let S={randOffset:function(t,e){return I(t,e)},randOffsetWithRange:function(t,e,a){return R(t,e,a)},ellipse:function(t,e,a,l,r){let n=C(a,l,r);return N(t,e,r,n).opset},doubleLineOps:function(t,e,a,l,r){return W(t,e,a,l,r,!0)}};function v(t,e,a,l,r){return{type:"path",ops:W(t,e,a,l,r)}}function _(t,e,a){let l=(t||[]).length;if(l>2){let r=[];for(let e=0;e<l-1;e++)r.push(...W(t[e][0],t[e][1],t[e+1][0],t[e+1][1],a));return e&&r.push(...W(t[l-1][0],t[l-1][1],t[0][0],t[0][1],a)),{type:"path",ops:r}}return 2===l?v(t[0][0],t[0][1],t[1][0],t[1][1],a):{type:"path",ops:[]}}function D(t,e){if(t.length){let a="number"==typeof t[0][0]?[t]:t,l=z(a[0],+(1+.2*e.roughness),e),r=e.disableMultiStroke?[]:z(a[0],1.5*(1+.22*e.roughness),L(e));for(let t=1;t<a.length;t++){let n=a[t];if(n.length){let t=z(n,+(1+.2*e.roughness),e),a=e.disableMultiStroke?[]:z(n,1.5*(1+.22*e.roughness),L(e));for(let e of t)"move"!==e.op&&l.push(e);for(let t of a)"move"!==t.op&&r.push(t)}}return{type:"path",ops:l.concat(r)}}return{type:"path",ops:[]}}function C(t,e,a){let l=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),r=2*Math.PI/Math.ceil(Math.max(a.curveStepCount,a.curveStepCount/Math.sqrt(200)*l)),n=Math.abs(t/2),i=Math.abs(e/2),s=1-a.curveFitting;return n+=I(n*s,a),i+=I(i*s,a),{increment:r,rx:n,ry:i}}function N(t,e,a,l){let[r,n]=H(l.increment,t,e,l.rx,l.ry,1,l.increment*R(.1,R(.4,1,a),a),a),i=q(r,null,a);if(!a.disableMultiStroke&&0!==a.roughness){let[r]=H(l.increment,t,e,l.rx,l.ry,1.5,0,a),n=q(r,null,a);i=i.concat(n)}return{estimatedPoints:n,opset:{type:"path",ops:i}}}function A(t,e,a,l,r,n,i,s,h){let o=Math.abs(a/2),d=Math.abs(l/2);o+=I(.01*o,h),d+=I(.01*d,h);let c=r,g=n;for(;c<0;)c+=2*Math.PI,g+=2*Math.PI;g-c>2*Math.PI&&(c=0,g=2*Math.PI);let u=Math.min(2*Math.PI/h.curveStepCount/2,(g-c)/2),f=j(u,t,e,o,d,c,g,1,h);if(!h.disableMultiStroke){let a=j(u,t,e,o,d,c,g,1.5,h);f.push(...a)}return i&&(s?f.push(...W(t,e,t+o*Math.cos(c),e+d*Math.sin(c),h),...W(t,e,t+o*Math.cos(g),e+d*Math.sin(g),h)):f.push({op:"lineTo",data:[t,e]},{op:"lineTo",data:[t+o*Math.cos(c),e+d*Math.sin(c)]})),{type:"path",ops:f}}function P(t,e){let a=k($(b(t))),l=[],r=[0,0],n=[0,0];for(let{key:t,data:i}of a)switch(t){case"M":n=[i[0],i[1]],r=[i[0],i[1]];break;case"L":l.push(...W(n[0],n[1],i[0],i[1],e)),n=[i[0],i[1]];break;case"C":{let[t,a,r,s,h,o]=i;l.push(...function(t,e,a,l,r,n,i,s){let h=[],o=[s.maxRandomnessOffset||1,(s.maxRandomnessOffset||1)+.3],d=[0,0],c=s.disableMultiStroke?1:2,g=s.preserveVertices;for(let u=0;u<c;u++)0===u?h.push({op:"move",data:[i[0],i[1]]}):h.push({op:"move",data:[i[0]+(g?0:I(o[0],s)),i[1]+(g?0:I(o[0],s))]}),d=g?[r,n]:[r+I(o[u],s),n+I(o[u],s)],h.push({op:"bcurveTo",data:[t+I(o[u],s),e+I(o[u],s),a+I(o[u],s),l+I(o[u],s),d[0],d[1]]});return h}(t,a,r,s,h,o,n,e)),n=[h,o];break}case"Z":l.push(...W(n[0],n[1],r[0],r[1],e)),n=[r[0],r[1]]}return{type:"path",ops:l}}function O(t,e){let a=[];for(let l of t)if(l.length){let t=e.maxRandomnessOffset||0,r=l.length;if(r>2){a.push({op:"move",data:[l[0][0]+I(t,e),l[0][1]+I(t,e)]});for(let n=1;n<r;n++)a.push({op:"lineTo",data:[l[n][0]+I(t,e),l[n][1]+I(t,e)]})}}return{type:"fillPath",ops:a}}function B(t,e){return(function(t,e){let a=t.fillStyle||"hachure";if(!m[a])switch(a){case"zigzag":m[a]||(m[a]=new g(e));break;case"cross-hatch":m[a]||(m[a]=new u(e));break;case"dots":m[a]||(m[a]=new f(e));break;case"dashed":m[a]||(m[a]=new p(e));break;case"zigzag-line":m[a]||(m[a]=new y(e));break;default:m[a="hachure"]||(m[a]=new d(e))}return m[a]})(e,S).fillPolygons(t,e)}function L(t){let e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function T(t){return t.randomizer||(t.randomizer=new x(t.seed||0)),t.randomizer.next()}function R(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return a.roughness*l*(T(a)*(e-t)+t)}function I(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return R(-t,t,e,a)}function W(t,e,a,l,r){let n=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=n?r.disableMultiStrokeFill:r.disableMultiStroke,s=E(t,e,a,l,r,!0,!1);if(i)return s;let h=E(t,e,a,l,r,!0,!0);return s.concat(h)}function E(t,e,a,l,r,n,i){let s=Math.pow(t-a,2)+Math.pow(e-l,2),h=Math.sqrt(s),o=1;o=h<200?1:h>500?.4:-.0016668*h+1.233334;let d=r.maxRandomnessOffset||0;d*d*100>s&&(d=h/10);let c=d/2,g=.2+.2*T(r),u=r.bowing*r.maxRandomnessOffset*(l-e)/200,f=r.bowing*r.maxRandomnessOffset*(t-a)/200;u=I(u,r,o),f=I(f,r,o);let p=[],y=r.preserveVertices;return n&&(i?p.push({op:"move",data:[t+(y?0:I(c,r,o)),e+(y?0:I(c,r,o))]}):p.push({op:"move",data:[t+(y?0:I(d,r,o)),e+(y?0:I(d,r,o))]})),i?p.push({op:"bcurveTo",data:[u+t+(a-t)*g+I(c,r,o),f+e+(l-e)*g+I(c,r,o),u+t+2*(a-t)*g+I(c,r,o),f+e+2*(l-e)*g+I(c,r,o),a+(y?0:I(c,r,o)),l+(y?0:I(c,r,o))]}):p.push({op:"bcurveTo",data:[u+t+(a-t)*g+I(d,r,o),f+e+(l-e)*g+I(d,r,o),u+t+2*(a-t)*g+I(d,r,o),f+e+2*(l-e)*g+I(d,r,o),a+(y?0:I(d,r,o)),l+(y?0:I(d,r,o))]}),p}function z(t,e,a){if(!t.length)return[];let l=[];l.push([t[0][0]+I(e,a),t[0][1]+I(e,a)]),l.push([t[0][0]+I(e,a),t[0][1]+I(e,a)]);for(let r=1;r<t.length;r++)l.push([t[r][0]+I(e,a),t[r][1]+I(e,a)]),r===t.length-1&&l.push([t[r][0]+I(e,a),t[r][1]+I(e,a)]);return q(l,null,a)}function q(t,e,a){let l=t.length,r=[];if(l>3){let n=[],i=1-a.curveTightness;r.push({op:"move",data:[t[1][0],t[1][1]]});for(let e=1;e+2<l;e++){let a=t[e];n[0]=[a[0],a[1]],n[1]=[a[0]+(i*t[e+1][0]-i*t[e-1][0])/6,a[1]+(i*t[e+1][1]-i*t[e-1][1])/6],n[2]=[t[e+1][0]+(i*t[e][0]-i*t[e+2][0])/6,t[e+1][1]+(i*t[e][1]-i*t[e+2][1])/6],n[3]=[t[e+1][0],t[e+1][1]],r.push({op:"bcurveTo",data:[n[1][0],n[1][1],n[2][0],n[2][1],n[3][0],n[3][1]]})}if(e&&2===e.length){let t=a.maxRandomnessOffset;r.push({op:"lineTo",data:[e[0]+I(t,a),e[1]+I(t,a)]})}}else 3===l?(r.push({op:"move",data:[t[1][0],t[1][1]]}),r.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===l&&r.push(...E(t[0][0],t[0][1],t[1][0],t[1][1],a,!0,!0));return r}function H(t,e,a,l,r,n,i,s){let h=[],o=[];if(0===s.roughness){t/=4,o.push([e+l*Math.cos(-t),a+r*Math.sin(-t)]);for(let n=0;n<=2*Math.PI;n+=t){let t=[e+l*Math.cos(n),a+r*Math.sin(n)];h.push(t),o.push(t)}o.push([e+ +l,a+0*r]),o.push([e+l*Math.cos(t),a+r*Math.sin(t)])}else{let d=I(.5,s)-Math.PI/2;o.push([I(n,s)+e+.9*l*Math.cos(d-t),I(n,s)+a+.9*r*Math.sin(d-t)]);let c=2*Math.PI+d-.01;for(let i=d;i<c;i+=t){let t=[I(n,s)+e+l*Math.cos(i),I(n,s)+a+r*Math.sin(i)];h.push(t),o.push(t)}o.push([I(n,s)+e+l*Math.cos(d+2*Math.PI+.5*i),I(n,s)+a+r*Math.sin(d+2*Math.PI+.5*i)]),o.push([I(n,s)+e+.98*l*Math.cos(d+i),I(n,s)+a+.98*r*Math.sin(d+i)]),o.push([I(n,s)+e+.9*l*Math.cos(d+.5*i),I(n,s)+a+.9*r*Math.sin(d+.5*i)])}return[o,h]}function j(t,e,a,l,r,n,i,s,h){let o=n+I(.1,h),d=[];d.push([I(s,h)+e+.9*l*Math.cos(o-t),I(s,h)+a+.9*r*Math.sin(o-t)]);for(let n=o;n<=i;n+=t)d.push([I(s,h)+e+l*Math.cos(n),I(s,h)+a+r*Math.sin(n)]);return d.push([e+l*Math.cos(i),a+r*Math.sin(i)]),d.push([e+l*Math.cos(i),a+r*Math.sin(i)]),q(d,null,h)}function F(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=t.length;if(a<3)throw Error("A curve must have at least three points.");let l=[];if(3===a)l.push([...t[0]],[...t[1]],[...t[2]],[...t[2]]);else{let a=[];a.push(t[0],t[0]);for(let e=1;e<t.length;e++)a.push(t[e]),e===t.length-1&&a.push(t[e]);let r=[],n=1-e;l.push([...a[0]]);for(let t=1;t+2<a.length;t++){let e=a[t];r[0]=[e[0],e[1]],r[1]=[e[0]+(n*a[t+1][0]-n*a[t-1][0])/6,e[1]+(n*a[t+1][1]-n*a[t-1][1])/6],r[2]=[a[t+1][0]+(n*a[t][0]-n*a[t+2][0])/6,a[t+1][1]+(n*a[t][1]-n*a[t+2][1])/6],r[3]=[a[t+1][0],a[t+1][1]],l.push(r[1],r[2],r[3])}}return l}function G(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function V(t,e,a){return[t[0]+(e[0]-t[0])*a,t[1]+(e[1]-t[1])*a]}function U(t,e,a,l,r){let n=r||[],i=t[e],s=t[a-1],h=0,o=1;for(let l=e+1;l<a-1;++l){let e=function(t,e,a){let l=G(e,a);if(0===l)return G(t,e);let r=((t[0]-e[0])*(a[0]-e[0])+(t[1]-e[1])*(a[1]-e[1]))/l;return G(t,V(e,a,r=Math.max(0,Math.min(1,r))))}(t[l],i,s);e>h&&(h=e,o=l)}return Math.sqrt(h)>l?(U(t,e,o+1,l,n),U(t,o,a,l,n)):(n.length||n.push(i),n.push(s)),n}function Z(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15,a=arguments.length>2?arguments[2]:void 0,l=[],r=(t.length-1)/3;for(let a=0;a<r;a++)!function t(e,a,l,r){let n,i,s,h,o,d,c,g,u=r||[];if(n=e[a+0],i=e[a+1],s=e[a+2],h=e[a+3],o=3*i[0]-2*n[0]-h[0],o*=o,d=3*i[1]-2*n[1]-h[1],d*=d,c=3*s[0]-2*h[0]-n[0],c*=c,g=3*s[1]-2*h[1]-n[1],g*=g,o<c&&(o=c),d<g&&(d=g),o+d<l){let t=e[a+0];u.length?Math.sqrt(G(u[u.length-1],t))>1&&u.push(t):u.push(t),u.push(e[a+3])}else{let r=e[a+0],n=e[a+1],i=e[a+2],s=e[a+3],h=V(r,n,.5),o=V(n,i,.5),d=V(i,s,.5),c=V(h,o,.5),g=V(o,d,.5),f=V(c,g,.5);t([r,h,c,f],0,l,u),t([f,g,d,s],0,l,u)}return u}(t,3*a,e,l);return a&&a>0?U(l,0,l.length,a):l}let X="none";class Q{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(0x80000000*Math.random())}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,e,a){return{shape:t,sets:e||[],options:a||this.defaultOptions}}line(t,e,a,l,r){let n=this._o(r);return this._d("line",[v(t,e,a,l,n)],n)}rectangle(t,e,a,l,r){var n,i,s,h;let o=this._o(r),d=[],c=_([[n=t,i=e],[n+(s=a),i],[n+s,i+(h=l)],[n,i+h]],!0,o);if(o.fill){let r=[[t,e],[t+a,e],[t+a,e+l],[t,e+l]];"solid"===o.fillStyle?d.push(O([r],o)):d.push(B([r],o))}return o.stroke!==X&&d.push(c),this._d("rectangle",d,o)}ellipse(t,e,a,l,r){let n=this._o(r),i=[],s=C(a,l,n),h=N(t,e,n,s);if(n.fill)if("solid"===n.fillStyle){let a=N(t,e,n,s).opset;a.type="fillPath",i.push(a)}else i.push(B([h.estimatedPoints],n));return n.stroke!==X&&i.push(h.opset),this._d("ellipse",i,n)}circle(t,e,a,l){let r=this.ellipse(t,e,a,a,l);return r.shape="circle",r}linearPath(t,e){let a=this._o(e);return this._d("linearPath",[_(t,!1,a)],a)}arc(t,e,a,l,r,n){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,h=this._o(s),o=[],d=A(t,e,a,l,r,n,i,!0,h);if(i&&h.fill)if("solid"===h.fillStyle){let i=Object.assign({},h);i.disableMultiStroke=!0;let s=A(t,e,a,l,r,n,!0,!1,i);s.type="fillPath",o.push(s)}else o.push(function(t,e,a,l,r,n,i){let s=Math.abs(a/2),h=Math.abs(l/2);s+=I(.01*s,i),h+=I(.01*h,i);let o=r,d=n;for(;o<0;)o+=2*Math.PI,d+=2*Math.PI;d-o>2*Math.PI&&(o=0,d=2*Math.PI);let c=(d-o)/i.curveStepCount,g=[];for(let a=o;a<=d;a+=c)g.push([t+s*Math.cos(a),e+h*Math.sin(a)]);return g.push([t+s*Math.cos(d),e+h*Math.sin(d)]),g.push([t,e]),B([g],i)}(t,e,a,l,r,n,h));return h.stroke!==X&&o.push(d),this._d("arc",o,h)}curve(t,e){let a=this._o(e),l=[],r=D(t,a);if(a.fill&&a.fill!==X)if("solid"===a.fillStyle){let e=D(t,Object.assign(Object.assign({},a),{disableMultiStroke:!0,roughness:a.roughness?a.roughness+a.fillShapeRoughnessGain:0}));l.push({type:"fillPath",ops:this._mergedShape(e.ops)})}else{let e=[];if(t.length)for(let l of"number"==typeof t[0][0]?[t]:t)l.length<3?e.push(...l):3===l.length?e.push(...Z(F([l[0],l[0],l[1],l[2]]),10,(1+a.roughness)/2)):e.push(...Z(F(l),10,(1+a.roughness)/2));e.length&&l.push(B([e],a))}return a.stroke!==X&&l.push(r),this._d("curve",l,a)}polygon(t,e){let a=this._o(e),l=[],r=_(t,!0,a);return a.fill&&("solid"===a.fillStyle?l.push(O([t],a)):l.push(B([t],a))),a.stroke!==X&&l.push(r),this._d("polygon",l,a)}path(t,e){let a=this._o(e),l=[];if(!t)return this._d("path",l,a);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");let r=a.fill&&"transparent"!==a.fill&&a.fill!==X,n=a.stroke!==X,i=!!(a.simplification&&a.simplification<1),s=function(t,e,a){let l=k($(b(t))),r=[],n=[],i=[0,0],s=[],h=()=>{s.length>=4&&n.push(...Z(s,1)),s=[]},o=()=>{h(),n.length&&(r.push(n),n=[])};for(let{key:t,data:e}of l)switch(t){case"M":o(),i=[e[0],e[1]],n.push(i);break;case"L":h(),n.push([e[0],e[1]]);break;case"C":if(!s.length){let t=n.length?n[n.length-1]:i;s.push([t[0],t[1]])}s.push([e[0],e[1]]),s.push([e[2],e[3]]),s.push([e[4],e[5]]);break;case"Z":h(),n.push([i[0],i[1]])}if(o(),!a)return r;let d=[];for(let t of r){let e=U(t,0,t.length,a);e.length&&d.push(e)}return d}(t,0,i?4-4*(a.simplification||1):(1+a.roughness)/2),h=P(t,a);if(r)if("solid"===a.fillStyle)if(1===s.length){let e=P(t,Object.assign(Object.assign({},a),{disableMultiStroke:!0,roughness:a.roughness?a.roughness+a.fillShapeRoughnessGain:0}));l.push({type:"fillPath",ops:this._mergedShape(e.ops)})}else l.push(O(s,a));else l.push(B(s,a));return n&&(i?s.forEach(t=>{l.push(_(t,!1,a))}):l.push(h)),this._d("path",l,a)}opsToPath(t,e){let a="";for(let l of t.ops){let t="number"==typeof e&&e>=0?l.data.map(t=>+t.toFixed(e)):l.data;switch(l.op){case"move":a+=`M${t[0]} ${t[1]} `;break;case"bcurveTo":a+=`C${t[0]} ${t[1]}, ${t[2]} ${t[3]}, ${t[4]} ${t[5]} `;break;case"lineTo":a+=`L${t[0]} ${t[1]} `}}return a.trim()}toPaths(t){let e=t.sets||[],a=t.options||this.defaultOptions,l=[];for(let t of e){let e=null;switch(t.type){case"path":e={d:this.opsToPath(t),stroke:a.stroke,strokeWidth:a.strokeWidth,fill:X};break;case"fillPath":e={d:this.opsToPath(t),stroke:X,strokeWidth:0,fill:a.fill||X};break;case"fillSketch":e=this.fillSketch(t,a)}e&&l.push(e)}return l}fillSketch(t,e){let a=e.fillWeight;return a<0&&(a=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||X,strokeWidth:a,fill:X}}_mergedShape(t){return t.filter((t,e)=>0===e||"move"!==t.op)}}class J{constructor(t,e){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Q(e)}draw(t){let e=t.sets||[],a=t.options||this.getDefaultOptions(),l=this.ctx,r=t.options.fixedDecimalPlaceDigits;for(let n of e)switch(n.type){case"path":l.save(),l.strokeStyle="none"===a.stroke?"transparent":a.stroke,l.lineWidth=a.strokeWidth,a.strokeLineDash&&l.setLineDash(a.strokeLineDash),a.strokeLineDashOffset&&(l.lineDashOffset=a.strokeLineDashOffset),this._drawToContext(l,n,r),l.restore();break;case"fillPath":{l.save(),l.fillStyle=a.fill||"";let e="curve"===t.shape||"polygon"===t.shape||"path"===t.shape?"evenodd":"nonzero";this._drawToContext(l,n,r,e),l.restore();break}case"fillSketch":this.fillSketch(l,n,a)}}fillSketch(t,e,a){let l=a.fillWeight;l<0&&(l=a.strokeWidth/2),t.save(),a.fillLineDash&&t.setLineDash(a.fillLineDash),a.fillLineDashOffset&&(t.lineDashOffset=a.fillLineDashOffset),t.strokeStyle=a.fill||"",t.lineWidth=l,this._drawToContext(t,e,a.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"nonzero";for(let l of(t.beginPath(),e.ops)){let e="number"==typeof a&&a>=0?l.data.map(t=>+t.toFixed(a)):l.data;switch(l.op){case"move":t.moveTo(e[0],e[1]);break;case"bcurveTo":t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]);break;case"lineTo":t.lineTo(e[0],e[1])}}"fillPath"===e.type?t.fill(l):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,e,a,l,r){let n=this.gen.line(t,e,a,l,r);return this.draw(n),n}rectangle(t,e,a,l,r){let n=this.gen.rectangle(t,e,a,l,r);return this.draw(n),n}ellipse(t,e,a,l,r){let n=this.gen.ellipse(t,e,a,l,r);return this.draw(n),n}circle(t,e,a,l){let r=this.gen.circle(t,e,a,l);return this.draw(r),r}linearPath(t,e){let a=this.gen.linearPath(t,e);return this.draw(a),a}polygon(t,e){let a=this.gen.polygon(t,e);return this.draw(a),a}arc(t,e,a,l,r,n){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,h=this.gen.arc(t,e,a,l,r,n,i,s);return this.draw(h),h}curve(t,e){let a=this.gen.curve(t,e);return this.draw(a),a}path(t,e){let a=this.gen.path(t,e);return this.draw(a),a}}let Y="http://www.w3.org/2000/svg";class K{constructor(t,e){this.svg=t,this.gen=new Q(e)}draw(t){let e=t.sets||[],a=t.options||this.getDefaultOptions(),l=this.svg.ownerDocument||window.document,r=l.createElementNS(Y,"g"),n=t.options.fixedDecimalPlaceDigits;for(let i of e){let e=null;switch(i.type){case"path":(e=l.createElementNS(Y,"path")).setAttribute("d",this.opsToPath(i,n)),e.setAttribute("stroke",a.stroke),e.setAttribute("stroke-width",a.strokeWidth+""),e.setAttribute("fill","none"),a.strokeLineDash&&e.setAttribute("stroke-dasharray",a.strokeLineDash.join(" ").trim()),a.strokeLineDashOffset&&e.setAttribute("stroke-dashoffset",`${a.strokeLineDashOffset}`);break;case"fillPath":(e=l.createElementNS(Y,"path")).setAttribute("d",this.opsToPath(i,n)),e.setAttribute("stroke","none"),e.setAttribute("stroke-width","0"),e.setAttribute("fill",a.fill||""),"curve"!==t.shape&&"polygon"!==t.shape||e.setAttribute("fill-rule","evenodd");break;case"fillSketch":e=this.fillSketch(l,i,a)}e&&r.appendChild(e)}return r}fillSketch(t,e,a){let l=a.fillWeight;l<0&&(l=a.strokeWidth/2);let r=t.createElementNS(Y,"path");return r.setAttribute("d",this.opsToPath(e,a.fixedDecimalPlaceDigits)),r.setAttribute("stroke",a.fill||""),r.setAttribute("stroke-width",l+""),r.setAttribute("fill","none"),a.fillLineDash&&r.setAttribute("stroke-dasharray",a.fillLineDash.join(" ").trim()),a.fillLineDashOffset&&r.setAttribute("stroke-dashoffset",`${a.fillLineDashOffset}`),r}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,e){return this.gen.opsToPath(t,e)}line(t,e,a,l,r){let n=this.gen.line(t,e,a,l,r);return this.draw(n)}rectangle(t,e,a,l,r){let n=this.gen.rectangle(t,e,a,l,r);return this.draw(n)}ellipse(t,e,a,l,r){let n=this.gen.ellipse(t,e,a,l,r);return this.draw(n)}circle(t,e,a,l){let r=this.gen.circle(t,e,a,l);return this.draw(r)}linearPath(t,e){let a=this.gen.linearPath(t,e);return this.draw(a)}polygon(t,e){let a=this.gen.polygon(t,e);return this.draw(a)}arc(t,e,a,l,r,n){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,h=this.gen.arc(t,e,a,l,r,n,i,s);return this.draw(h)}curve(t,e){let a=this.gen.curve(t,e);return this.draw(a)}path(t,e){let a=this.gen.path(t,e);return this.draw(a)}}var tt={canvas:(t,e)=>new J(t,e),svg:(t,e)=>new K(t,e),generator:t=>new Q(t),newSeed:()=>Q.newSeed()};t.s(["default",()=>tt],570126);var te=(0,i.__name)(async(t,e,a)=>{let h,o=e.useHtmlLabels||(0,n.evaluate)((0,n.getConfig2)()?.htmlLabels),d=t.insert("g").attr("class",a||"node default").attr("id",e.domId||e.id),c=d.insert("g").attr("class","label").attr("style",(0,r.handleUndefinedAttr)(e.labelStyle));h=void 0===e.label?"":"string"==typeof e.label?e.label:e.label[0];let g=await (0,l.createText)(c,(0,n.sanitizeText)((0,r.decodeEntities)(h),(0,n.getConfig2)()),{useHtmlLabels:o,width:e.width||(0,n.getConfig2)().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img}),u=g.getBBox(),f=(e?.padding??0)/2;if(o){let t=g.children[0],e=(0,s.select)(g),a=t.getElementsByTagName("img");if(a){let t=""===h.replace(/<img[^>]*>/g,"").trim();await Promise.all([...a].map(e=>new Promise(a=>{function l(){if(e.style.display="flex",e.style.flexDirection="column",t){let t=(0,n.getConfig2)().fontSize?(0,n.getConfig2)().fontSize:window.getComputedStyle(document.body).fontSize,[a=n.defaultConfig_default.fontSize]=(0,r.parseFontSize)(t),l=5*a+"px";e.style.minWidth=l,e.style.maxWidth=l}else e.style.width="100%";a(e)}(0,i.__name)(l,"setupImage"),setTimeout(()=>{e.complete&&l()}),e.addEventListener("error",l),e.addEventListener("load",l)})))}u=t.getBoundingClientRect(),e.attr("width",u.width),e.attr("height",u.height)}return o?c.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"):c.attr("transform","translate(0, "+-u.height/2+")"),e.centerLabel&&c.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),c.insert("rect",":first-child"),{shapeSvg:d,bbox:u,halfPadding:f,label:c}},"labelHelper"),ta=(0,i.__name)(async(t,e,a)=>{let i=a.useHtmlLabels||(0,n.evaluate)((0,n.getConfig2)()?.flowchart?.htmlLabels),h=t.insert("g").attr("class","label").attr("style",a.labelStyle||""),o=await (0,l.createText)(h,(0,n.sanitizeText)((0,r.decodeEntities)(e),(0,n.getConfig2)()),{useHtmlLabels:i,width:a.width||(0,n.getConfig2)()?.flowchart?.wrappingWidth,style:a.labelStyle,addSvgBackground:!!a.icon||!!a.img}),d=o.getBBox(),c=a.padding/2;if((0,n.evaluate)((0,n.getConfig2)()?.flowchart?.htmlLabels)){let t=o.children[0],e=(0,s.select)(o);d=t.getBoundingClientRect(),e.attr("width",d.width),e.attr("height",d.height)}return i?h.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"):h.attr("transform","translate(0, "+-d.height/2+")"),a.centerLabel&&h.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),h.insert("rect",":first-child"),{shapeSvg:t,bbox:d,halfPadding:c,label:h}},"insertLabel"),tl=(0,i.__name)((t,e)=>{let a=e.node().getBBox();t.width=a.width,t.height=a.height},"updateNodeBounds"),tr=(0,i.__name)((t,e)=>("handDrawn"===t.look?"rough-node":"node")+" "+t.cssClasses+" "+(e||""),"getNodeClasses");function tn(t){let e=t.map((t,e)=>`${0===e?"M":"L"}${t.x},${t.y}`);return e.push("Z"),e.join(" ")}function ti(t,e,a,l,r,n){let i=[],s=a-t,h=2*Math.PI/(s/n),o=e+(l-e)/2;for(let e=0;e<=50;e++){let a=t+e/50*s,l=o+r*Math.sin(h*(a-t));i.push({x:a,y:l})}return i}function ts(t,e,a,l,r,n){let i=[],s=r*Math.PI/180,h=(n*Math.PI/180-s)/(l-1);for(let r=0;r<l;r++){let l=s+r*h,n=t+a*Math.cos(l),o=e+a*Math.sin(l);i.push({x:-n,y:-o})}return i}(0,i.__name)(tn,"createPathFromPoints"),(0,i.__name)(ti,"generateFullSineWavePoints"),(0,i.__name)(ts,"generateCirclePoints");var th=(0,i.__name)((t,e)=>{var a,l,r=t.x,n=t.y,i=e.x-r,s=e.y-n,h=t.width/2,o=t.height/2;return Math.abs(s)*h>Math.abs(i)*o?(s<0&&(o=-o),a=0===s?0:o*i/s,l=o):(i<0&&(h=-h),a=h,l=0===i?0:h*s/i),{x:r+a,y:n+l}},"intersectRect");function to(t,e){e&&t.attr("style",e)}async function td(t){let e=(0,s.select)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),a=e.append("xhtml:div"),l=(0,n.getConfig2)(),r=t.label;t.label&&(0,n.hasKatex)(t.label)&&(r=await (0,n.renderKatexSanitized)(t.label.replace(n.common_default.lineBreakRegex,"\n"),l));let i='<span class="'+(t.isNode?"nodeLabel":"edgeLabel")+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+r+"</span>";return a.html((0,n.sanitizeText)(i,l)),to(a,t.labelStyle),a.style("display","inline-block"),a.style("padding-right","1px"),a.style("white-space","nowrap"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}(0,i.__name)(to,"applyStyle"),(0,i.__name)(td,"addHtmlLabel");var tc=(0,i.__name)(async(t,e,a,l)=>{let s=t||"";if("object"==typeof s&&(s=s[0]),(0,n.evaluate)((0,n.getConfig2)().flowchart.htmlLabels)){s=s.replace(/\\n|\n/g,"<br />"),i.log.info("vertexText"+s);let t={isNode:l,label:(0,r.decodeEntities)(s).replace(/fa[blrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`),labelStyle:e?e.replace("fill:","color:"):e};return await td(t)}{let t=document.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",e.replace("color:","fill:"));for(let e of"string"==typeof s?s.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(s)?s:[]){let l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),a?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=e.trim(),t.appendChild(l)}return t}},"createLabel"),tg=(0,i.__name)((t,e,a,l,r)=>["M",t+r,e,"H",t+a-r,"A",r,r,"0 0 1",t+a,e+r,"V",e+l-r,"A",r,r,"0 0 1",t+a-r,e+l,"H",t+r,"A",r,r,"0 0 1",t,e+l-r,"V",e+r,"A",r,r,"0 0 1",t+r,e,"Z"].join(" "),"createRoundedRectPathD"),tu=(0,i.__name)(async(t,r)=>{let h;i.log.info("Creating subgraph rect for ",r.id,r);let o=(0,n.getConfig2)(),{themeVariables:d,handDrawnSeed:c}=o,{clusterBkg:g,clusterBorder:u}=d,{labelStyles:f,nodeStyles:p,borderStyles:y,backgroundStyles:m}=(0,a.styles2String)(r),x=t.insert("g").attr("class","cluster "+r.cssClasses).attr("id",r.id).attr("data-look",r.look),w=(0,n.evaluate)(o.flowchart.htmlLabels),b=x.insert("g").attr("class","cluster-label "),$=await (0,l.createText)(b,r.label,{style:r.labelStyle,useHtmlLabels:w,isNode:!0}),k=$.getBBox();if((0,n.evaluate)(o.flowchart.htmlLabels)){let t=$.children[0],e=(0,s.select)($);k=t.getBoundingClientRect(),e.attr("width",k.width),e.attr("height",k.height)}let M=r.width<=k.width+r.padding?k.width+r.padding:r.width;r.width<=k.width+r.padding?r.diff=(M-r.width)/2-r.padding:r.diff=-r.padding;let S=r.height,v=r.x-M/2,_=r.y-S/2;if(i.log.trace("Data ",r,JSON.stringify(r)),"handDrawn"===r.look){let t=tt.svg(x),e=(0,a.userNodeOverrides)(r,{roughness:.7,fill:g,stroke:u,fillWeight:3,seed:c}),l=t.path(tg(v,_,M,S,0),e);(h=x.insert(()=>(i.log.debug("Rough node insert CXC",l),l),":first-child")).select("path:nth-child(2)").attr("style",y.join(";")),h.select("path").attr("style",m.join(";").replace("fill","stroke"))}else(h=x.insert("rect",":first-child")).attr("style",p).attr("rx",r.rx).attr("ry",r.ry).attr("x",v).attr("y",_).attr("width",M).attr("height",S);let{subGraphTitleTopMargin:D}=(0,e.getSubGraphTitleMargins)(o);if(b.attr("transform",`translate(${r.x-k.width/2}, ${r.y-r.height/2+D})`),f){let t=b.select("span");t&&t.attr("style",f)}let C=h.node().getBBox();return r.offsetX=0,r.width=C.width,r.height=C.height,r.offsetY=k.height-r.padding/2,r.intersect=function(t){return th(r,t)},{cluster:x,labelBBox:k}},"rect"),tf=(0,i.__name)((t,e)=>{let a=t.insert("g").attr("class","note-cluster").attr("id",e.id),l=a.insert("rect",":first-child"),r=0*e.padding,n=r/2;l.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-n).attr("y",e.y-e.height/2-n).attr("width",e.width+r).attr("height",e.height+r).attr("fill","none");let i=l.node().getBBox();return e.width=i.width,e.height=i.height,e.intersect=function(t){return th(e,t)},{cluster:a,labelBBox:{width:0,height:0}}},"noteGroup"),tp=(0,i.__name)(async(t,e)=>{let a,l=(0,n.getConfig2)(),{themeVariables:r,handDrawnSeed:i}=l,{altBackground:h,compositeBackground:o,compositeTitleBackground:d,nodeBorder:c}=r,g=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),u=g.insert("g",":first-child"),f=g.insert("g").attr("class","cluster-label"),p=g.append("rect"),y=f.node().appendChild(await tc(e.label,e.labelStyle,void 0,!0)),m=y.getBBox();if((0,n.evaluate)(l.flowchart.htmlLabels)){let t=y.children[0],e=(0,s.select)(y);m=t.getBoundingClientRect(),e.attr("width",m.width),e.attr("height",m.height)}let x=0*e.padding,w=(e.width<=m.width+e.padding?m.width+e.padding:e.width)+x;e.width<=m.width+e.padding?e.diff=(w-e.width)/2-e.padding:e.diff=-e.padding;let b=e.height+x,$=e.height+x-m.height-6,k=e.x-w/2,M=e.y-b/2;e.width=w;let S=e.y-e.height/2-x/2+m.height+2;if("handDrawn"===e.look){let t=e.cssClasses.includes("statediagram-cluster-alt"),l=tt.svg(g),r=e.rx||e.ry?l.path(tg(k,M,w,b,10),{roughness:.7,fill:d,fillStyle:"solid",stroke:c,seed:i}):l.rectangle(k,M,w,b,{seed:i});a=g.insert(()=>r,":first-child");let n=l.rectangle(k,S,w,$,{fill:t?h:o,fillStyle:t?"hachure":"solid",stroke:c,seed:i});a=g.insert(()=>r,":first-child"),p=g.insert(()=>n)}else(a=u.insert("rect",":first-child")).attr("class","outer").attr("x",k).attr("y",M).attr("width",w).attr("height",b).attr("data-look",e.look),p.attr("class","inner").attr("x",k).attr("y",S).attr("width",w).attr("height",$);return f.attr("transform",`translate(${e.x-m.width/2}, ${M+1-3*!(0,n.evaluate)(l.flowchart.htmlLabels)})`),e.height=a.node().getBBox().height,e.offsetX=0,e.offsetY=m.height-e.padding/2,e.labelBBox=m,e.intersect=function(t){return th(e,t)},{cluster:g,labelBBox:m}},"roundedWithTitle"),ty=(0,i.__name)(async(t,r)=>{let h;i.log.info("Creating subgraph rect for ",r.id,r);let o=(0,n.getConfig2)(),{themeVariables:d,handDrawnSeed:c}=o,{clusterBkg:g,clusterBorder:u}=d,{labelStyles:f,nodeStyles:p,borderStyles:y,backgroundStyles:m}=(0,a.styles2String)(r),x=t.insert("g").attr("class","cluster "+r.cssClasses).attr("id",r.id).attr("data-look",r.look),w=(0,n.evaluate)(o.flowchart.htmlLabels),b=x.insert("g").attr("class","cluster-label "),$=await (0,l.createText)(b,r.label,{style:r.labelStyle,useHtmlLabels:w,isNode:!0,width:r.width}),k=$.getBBox();if((0,n.evaluate)(o.flowchart.htmlLabels)){let t=$.children[0],e=(0,s.select)($);k=t.getBoundingClientRect(),e.attr("width",k.width),e.attr("height",k.height)}let M=r.width<=k.width+r.padding?k.width+r.padding:r.width;r.width<=k.width+r.padding?r.diff=(M-r.width)/2-r.padding:r.diff=-r.padding;let S=r.height,v=r.x-M/2,_=r.y-S/2;if(i.log.trace("Data ",r,JSON.stringify(r)),"handDrawn"===r.look){let t=tt.svg(x),e=(0,a.userNodeOverrides)(r,{roughness:.7,fill:g,stroke:u,fillWeight:4,seed:c}),l=t.path(tg(v,_,M,S,r.rx),e);(h=x.insert(()=>(i.log.debug("Rough node insert CXC",l),l),":first-child")).select("path:nth-child(2)").attr("style",y.join(";")),h.select("path").attr("style",m.join(";").replace("fill","stroke"))}else(h=x.insert("rect",":first-child")).attr("style",p).attr("rx",r.rx).attr("ry",r.ry).attr("x",v).attr("y",_).attr("width",M).attr("height",S);let{subGraphTitleTopMargin:D}=(0,e.getSubGraphTitleMargins)(o);if(b.attr("transform",`translate(${r.x-k.width/2}, ${r.y-r.height/2+D})`),f){let t=b.select("span");t&&t.attr("style",f)}let C=h.node().getBBox();return r.offsetX=0,r.width=C.width,r.height=C.height,r.offsetY=k.height-r.padding/2,r.intersect=function(t){return th(r,t)},{cluster:x,labelBBox:k}},"kanbanSection"),tm={rect:tu,squareRect:tu,roundedWithTitle:tp,noteGroup:tf,divider:(0,i.__name)((t,e)=>{let a,{themeVariables:l,handDrawnSeed:r}=(0,n.getConfig2)(),{nodeBorder:i}=l,s=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),h=s.insert("g",":first-child"),o=0*e.padding,d=e.width+o;e.diff=-e.padding;let c=e.height+o,g=e.x-d/2,u=e.y-c/2;if(e.width=d,"handDrawn"===e.look){let t=tt.svg(s).rectangle(g,u,d,c,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:i,seed:r});a=s.insert(()=>t,":first-child")}else(a=h.insert("rect",":first-child")).attr("class","divider").attr("x",g).attr("y",u).attr("width",d).attr("height",c).attr("data-look",e.look);return e.height=a.node().getBBox().height,e.offsetX=0,e.offsetY=0,e.intersect=function(t){return th(e,t)},{cluster:s,labelBBox:{}}},"divider"),kanbanSection:ty},tx=new Map,tw=(0,i.__name)(async(t,e)=>{let a=e.shape||"rect",l=await tm[a](t,e);return tx.set(e.id,l),l},"insertCluster"),tb=(0,i.__name)(()=>{tx=new Map},"clear");function t$(t,e,a,l){var r=t.x,n=t.y,i=r-l.x,s=n-l.y,h=Math.sqrt(e*e*s*s+a*a*i*i),o=Math.abs(e*a*i/h);l.x<r&&(o=-o);var d=Math.abs(e*a*s/h);return l.y<n&&(d=-d),{x:r+o,y:n+d}}function tk(t,e,a){return t$(t,e,e,a)}function tM(t,e,a,l){{let r=e.y-t.y,n=t.x-e.x,i=e.x*t.y-t.x*e.y,s=r*a.x+n*a.y+i,h=r*l.x+n*l.y+i;if(0!==s&&0!==h&&tS(s,h))return;let o=l.y-a.y,d=a.x-l.x,c=l.x*a.y-a.x*l.y,g=o*t.x+d*t.y+c,u=o*e.x+d*e.y+c;if(1e-6>Math.abs(g)&&1e-6>Math.abs(u)&&tS(g,u))return;let f=r*d-o*n;if(0===f)return;let p=Math.abs(f/2),y=n*c-d*i;return{x:y<0?(y-p)/f:(y+p)/f,y:(y=o*i-r*c)<0?(y-p)/f:(y+p)/f}}}function tS(t,e){return t*e>0}function tv(t,e,a){let l=t.x,r=t.y,n=[],i=1/0,s=1/0;"function"==typeof e.forEach?e.forEach(function(t){i=Math.min(i,t.x),s=Math.min(s,t.y)}):(i=Math.min(i,e.x),s=Math.min(s,e.y));let h=l-t.width/2-i,o=r-t.height/2-s;for(let l=0;l<e.length;l++){let r=e[l],i=e[l<e.length-1?l+1:0],s=tM(t,a,{x:h+r.x,y:o+r.y},{x:h+i.x,y:o+i.y});s&&n.push(s)}return n.length?(n.length>1&&n.sort(function(t,e){let l=t.x-a.x,r=t.y-a.y,n=Math.sqrt(l*l+r*r),i=e.x-a.x,s=e.y-a.y,h=Math.sqrt(i*i+s*s);return n<h?-1:+(n!==h)}),n[0]):t}(0,i.__name)(function(t,e){return t.intersect(e)},"intersectNode"),(0,i.__name)(t$,"intersectEllipse"),(0,i.__name)(tk,"intersectCircle"),(0,i.__name)(tM,"intersectLine"),(0,i.__name)(tS,"sameSign"),(0,i.__name)(tv,"intersectPolygon");function t_(t,e){let{labelStyles:l}=(0,a.styles2String)(e);e.labelStyle=l;let n=tr(e),s=n;n||(s="anchor");let h=t.insert("g").attr("class",s).attr("id",e.domId||e.id),{cssStyles:o}=e,d=tt.svg(h),c=(0,a.userNodeOverrides)(e,{fill:"black",stroke:"none",fillStyle:"solid"});"handDrawn"!==e.look&&(c.roughness=0);let g=d.circle(0,0,2,c),u=h.insert(()=>g,":first-child");return u.attr("class","anchor").attr("style",(0,r.handleUndefinedAttr)(o)),tl(e,u),e.intersect=function(t){return i.log.info("Circle intersect",e,1,t),tk(e,1,t)},h}function tD(t,e,a,l,r,n,i){let s=Math.atan2(l-e,a-t),h=Math.sqrt(((a-t)/2/r)**2+((l-e)/2/n)**2);if(h>1)throw Error("The given radii are too small to create an arc between the points.");let o=Math.sqrt(1-h**2),d=(t+a)/2+o*n*Math.sin(s)*(i?-1:1),c=(e+l)/2-o*r*Math.cos(s)*(i?-1:1),g=Math.atan2((e-c)/n,(t-d)/r),u=Math.atan2((l-c)/n,(a-d)/r)-g;i&&u<0&&(u+=2*Math.PI),!i&&u>0&&(u-=2*Math.PI);let f=[];for(let t=0;t<20;t++){let e=g+t/19*u,a=d+r*Math.cos(e),l=c+n*Math.sin(e);f.push({x:a,y:l})}return f}async function tC(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i}=await te(t,e,tr(e)),s=i.width+e.padding+20,h=i.height+e.padding,o=h/2,d=o/(2.5+h/50),{cssStyles:c}=e,g=[{x:s/2,y:-h/2},{x:-s/2,y:-h/2},...tD(-s/2,-h/2,-s/2,h/2,d,o,!1),{x:s/2,y:h/2},...tD(s/2,h/2,s/2,-h/2,d,o,!0)],u=tt.svg(n),f=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let p=tn(g),y=u.path(p,f),m=n.insert(()=>y,":first-child");return m.attr("class","basic label-container"),c&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",c),r&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",r),m.attr("transform",`translate(${d/2}, 0)`),tl(e,m),e.intersect=function(t){return tv(e,g,t)},n}function tN(t,e,a,l){return t.insert("polygon",":first-child").attr("points",l.map(function(t){return t.x+","+t.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+a/2+")")}async function tA(t,e){let l,{labelStyles:r,nodeStyles:n}=(0,a.styles2String)(e);e.labelStyle=r;let{shapeSvg:i,bbox:s}=await te(t,e,tr(e)),h=s.height+e.padding,o=s.width+e.padding+12,d=-h,c=[{x:12,y:d},{x:o,y:d},{x:o,y:0},{x:0,y:0},{x:0,y:d+12},{x:12,y:d}],{cssStyles:g}=e;if("handDrawn"===e.look){let t=tt.svg(i),r=(0,a.userNodeOverrides)(e,{}),n=tn(c),s=t.path(n,r);l=i.insert(()=>s,":first-child").attr("transform",`translate(${-o/2}, ${h/2})`),g&&l.attr("style",g)}else l=tN(i,o,h,c);return n&&l.attr("style",n),tl(e,l),e.intersect=function(t){return tv(e,c,t)},i}function tP(t,e){let{nodeStyles:l}=(0,a.styles2String)(e);e.label="";let r=t.insert("g").attr("class",tr(e)).attr("id",e.domId??e.id),{cssStyles:n}=e,i=Math.max(28,e.width??0),s=[{x:0,y:i/2},{x:i/2,y:0},{x:0,y:-i/2},{x:-i/2,y:0}],h=tt.svg(r),o=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(o.roughness=0,o.fillStyle="solid");let d=tn(s),c=h.path(d,o),g=r.insert(()=>c,":first-child");return n&&"handDrawn"!==e.look&&g.selectAll("path").attr("style",n),l&&"handDrawn"!==e.look&&g.selectAll("path").attr("style",l),e.width=28,e.height=28,e.intersect=function(t){return tv(e,s,t)},r}async function tO(t,e,l){let n,{labelStyles:s,nodeStyles:h}=(0,a.styles2String)(e);e.labelStyle=s;let{shapeSvg:o,bbox:d,halfPadding:c}=await te(t,e,tr(e)),g=l?.padding??c,u=d.width/2+g,{cssStyles:f}=e;if("handDrawn"===e.look){let t=tt.svg(o),l=(0,a.userNodeOverrides)(e,{}),i=t.circle(0,0,2*u,l);(n=o.insert(()=>i,":first-child")).attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(f))}else n=o.insert("circle",":first-child").attr("class","basic label-container").attr("style",h).attr("r",u).attr("cx",0).attr("cy",0);return tl(e,n),e.calcIntersect=function(t,e){let a=t.width/2;return tk(t,a,e)},e.intersect=function(t){return i.log.info("Circle intersect",e,u,t),tk(e,u,t)},o}function tB(t){let e=Math.cos(Math.PI/4),a=Math.sin(Math.PI/4),l=2*t,r={x:l/2*e,y:l/2*a},n={x:-(l/2)*e,y:l/2*a},i={x:-(l/2)*e,y:-(l/2)*a},s={x:l/2*e,y:-(l/2)*a};return`M ${n.x},${n.y} L ${s.x},${s.y}
                   M ${r.x},${r.y} L ${i.x},${i.y}`}function tL(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l,e.label="";let n=t.insert("g").attr("class",tr(e)).attr("id",e.domId??e.id),s=Math.max(30,e?.width??0),{cssStyles:h}=e,o=tt.svg(n),d=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(d.roughness=0,d.fillStyle="solid");let c=o.circle(0,0,2*s,d),g=tB(s),u=o.path(g,d),f=n.insert(()=>c,":first-child");return f.insert(()=>u),h&&"handDrawn"!==e.look&&f.selectAll("path").attr("style",h),r&&"handDrawn"!==e.look&&f.selectAll("path").attr("style",r),tl(e,f),e.intersect=function(t){return i.log.info("crossedCircle intersect",e,{radius:s,point:t}),tk(e,s,t)},n}function tT(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:180,i=[],s=r*Math.PI/180,h=(n*Math.PI/180-s)/(l-1);for(let r=0;r<l;r++){let l=s+r*h,n=t+a*Math.cos(l),o=e+a*Math.sin(l);i.push({x:-n,y:-o})}return i}async function tR(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i,label:s}=await te(t,e,tr(e)),h=i.width+(e.padding??0),o=i.height+(e.padding??0),d=Math.max(5,.1*o),{cssStyles:c}=e,g=[...tT(h/2,-o/2,d,30,-90,0),{x:-h/2-d,y:d},...tT(h/2+2*d,-d,d,20,-180,-270),...tT(h/2+2*d,d,d,20,-90,-180),{x:-h/2-d,y:-o/2},...tT(h/2,o/2,d,20,0,90)],u=[{x:h/2,y:-o/2-d},{x:-h/2,y:-o/2-d},...tT(h/2,-o/2,d,20,-90,0),{x:-h/2-d,y:-d},...tT(h/2+.1*h,-d,d,20,-180,-270),...tT(h/2+.1*h,d,d,20,-90,-180),{x:-h/2-d,y:o/2},...tT(h/2,o/2,d,20,0,90),{x:-h/2,y:o/2+d},{x:h/2,y:o/2+d}],f=tt.svg(n),p=(0,a.userNodeOverrides)(e,{fill:"none"});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let y=tn(g).replace("Z",""),m=f.path(y,p),x=tn(u),w=f.path(x,{...p}),b=n.insert("g",":first-child");return b.insert(()=>w,":first-child").attr("stroke-opacity",0),b.insert(()=>m,":first-child"),b.attr("class","text"),c&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",c),r&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",r),b.attr("transform",`translate(${d}, 0)`),s.attr("transform",`translate(${-h/2+d-(i.x-(i.left??0))},${-o/2+(e.padding??0)/2-(i.y-(i.top??0))})`),tl(e,b),e.intersect=function(t){return tv(e,u,t)},n}function tI(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:180,i=[],s=r*Math.PI/180,h=(n*Math.PI/180-s)/(l-1);for(let r=0;r<l;r++){let l=s+r*h,n=t+a*Math.cos(l),o=e+a*Math.sin(l);i.push({x:n,y:o})}return i}async function tW(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i,label:s}=await te(t,e,tr(e)),h=i.width+(e.padding??0),o=i.height+(e.padding??0),d=Math.max(5,.1*o),{cssStyles:c}=e,g=[...tI(h/2,-o/2,d,20,-90,0),{x:h/2+d,y:-d},...tI(h/2+2*d,-d,d,20,-180,-270),...tI(h/2+2*d,d,d,20,-90,-180),{x:h/2+d,y:o/2},...tI(h/2,o/2,d,20,0,90)],u=[{x:-h/2,y:-o/2-d},{x:h/2,y:-o/2-d},...tI(h/2,-o/2,d,20,-90,0),{x:h/2+d,y:-d},...tI(h/2+2*d,-d,d,20,-180,-270),...tI(h/2+2*d,d,d,20,-90,-180),{x:h/2+d,y:o/2},...tI(h/2,o/2,d,20,0,90),{x:h/2,y:o/2+d},{x:-h/2,y:o/2+d}],f=tt.svg(n),p=(0,a.userNodeOverrides)(e,{fill:"none"});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let y=tn(g).replace("Z",""),m=f.path(y,p),x=tn(u),w=f.path(x,{...p}),b=n.insert("g",":first-child");return b.insert(()=>w,":first-child").attr("stroke-opacity",0),b.insert(()=>m,":first-child"),b.attr("class","text"),c&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",c),r&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",r),b.attr("transform",`translate(${-d}, 0)`),s.attr("transform",`translate(${-h/2+(e.padding??0)/2-(i.x-(i.left??0))},${-o/2+(e.padding??0)/2-(i.y-(i.top??0))})`),tl(e,b),e.intersect=function(t){return tv(e,u,t)},n}function tE(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:180,i=[],s=r*Math.PI/180,h=(n*Math.PI/180-s)/(l-1);for(let r=0;r<l;r++){let l=s+r*h,n=t+a*Math.cos(l),o=e+a*Math.sin(l);i.push({x:-n,y:-o})}return i}async function tz(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i,label:s}=await te(t,e,tr(e)),h=i.width+(e.padding??0),o=i.height+(e.padding??0),d=Math.max(5,.1*o),{cssStyles:c}=e,g=[...tE(h/2,-o/2,d,30,-90,0),{x:-h/2-d,y:d},...tE(h/2+2*d,-d,d,20,-180,-270),...tE(h/2+2*d,d,d,20,-90,-180),{x:-h/2-d,y:-o/2},...tE(h/2,o/2,d,20,0,90)],u=[...tE(-h/2+d+d/2,-o/2,d,20,-90,-180),{x:h/2-d/2,y:d},...tE(-h/2-d/2,-d,d,20,0,90),...tE(-h/2-d/2,d,d,20,-90,0),{x:h/2-d/2,y:-d},...tE(-h/2+d+d/2,o/2,d,30,-180,-270)],f=[{x:h/2,y:-o/2-d},{x:-h/2,y:-o/2-d},...tE(h/2,-o/2,d,20,-90,0),{x:-h/2-d,y:-d},...tE(h/2+2*d,-d,d,20,-180,-270),...tE(h/2+2*d,d,d,20,-90,-180),{x:-h/2-d,y:o/2},...tE(h/2,o/2,d,20,0,90),{x:-h/2,y:o/2+d},{x:h/2-d-d/2,y:o/2+d},...tE(-h/2+d+d/2,-o/2,d,20,-90,-180),{x:h/2-d/2,y:d},...tE(-h/2-d/2,-d,d,20,0,90),...tE(-h/2-d/2,d,d,20,-90,0),{x:h/2-d/2,y:-d},...tE(-h/2+d+d/2,o/2,d,30,-180,-270)],p=tt.svg(n),y=(0,a.userNodeOverrides)(e,{fill:"none"});"handDrawn"!==e.look&&(y.roughness=0,y.fillStyle="solid");let m=tn(g).replace("Z",""),x=p.path(m,y),w=tn(u).replace("Z",""),b=p.path(w,y),$=tn(f),k=p.path($,{...y}),M=n.insert("g",":first-child");return M.insert(()=>k,":first-child").attr("stroke-opacity",0),M.insert(()=>x,":first-child"),M.insert(()=>b,":first-child"),M.attr("class","text"),c&&"handDrawn"!==e.look&&M.selectAll("path").attr("style",c),r&&"handDrawn"!==e.look&&M.selectAll("path").attr("style",r),M.attr("transform",`translate(${d-d/4}, 0)`),s.attr("transform",`translate(${-h/2+(e.padding??0)/2-(i.x-(i.left??0))},${-o/2+(e.padding??0)/2-(i.y-(i.top??0))})`),tl(e,M),e.intersect=function(t){return tv(e,f,t)},n}async function tq(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i}=await te(t,e,tr(e)),s=Math.max(80,(i.width+(e.padding??0)*2)*1.25,e?.width??0),h=Math.max(20,i.height+(e.padding??0)*2,e?.height??0),o=h/2,{cssStyles:d}=e,c=tt.svg(n),g=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(g.roughness=0,g.fillStyle="solid");let u=s-o,f=h/4,p=[{x:u,y:0},{x:f,y:0},{x:0,y:h/2},{x:f,y:h},{x:u,y:h},...ts(-u,-h/2,o,50,270,90)],y=tn(p),m=c.path(y,g),x=n.insert(()=>m,":first-child");return x.attr("class","basic label-container"),d&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",d),r&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",r),x.attr("transform",`translate(${-s/2}, ${-h/2})`),tl(e,x),e.intersect=function(t){return tv(e,p,t)},n}(0,i.__name)(t_,"anchor"),(0,i.__name)(tD,"generateArcPoints"),(0,i.__name)(tC,"bowTieRect"),(0,i.__name)(tN,"insertPolygonShape"),(0,i.__name)(tA,"card"),(0,i.__name)(tP,"choice"),(0,i.__name)(tO,"circle"),(0,i.__name)(tB,"createLine"),(0,i.__name)(tL,"crossedCircle"),(0,i.__name)(tT,"generateCirclePoints"),(0,i.__name)(tR,"curlyBraceLeft"),(0,i.__name)(tI,"generateCirclePoints"),(0,i.__name)(tW,"curlyBraceRight"),(0,i.__name)(tE,"generateCirclePoints"),(0,i.__name)(tz,"curlyBraces"),(0,i.__name)(tq,"curvedTrapezoid");var tH=(0,i.__name)((t,e,a,l,r,n)=>`M${t},${e+n} a${r},${n} 0,0,0 ${a},0 a${r},${n} 0,0,0 ${-a},0 l0,${l} a${r},${n} 0,0,0 ${a},0 l0,${-l}`,"createCylinderPathD"),tj=(0,i.__name)((t,e,a,l,r,n)=>`M${t},${e+n} M${t+a},${e+n} a${r},${n} 0,0,0 ${-a},0 l0,${l} a${r},${n} 0,0,0 ${a},0 l0,${-l}`,"createOuterCylinderPathD"),tF=(0,i.__name)((t,e,a,l,r,n)=>`M${t-a/2},${-l/2} a${r},${n} 0,0,0 ${a},0`,"createInnerCylinderPathD");async function tG(t,e){let l,{labelStyles:n,nodeStyles:i}=(0,a.styles2String)(e);e.labelStyle=n;let{shapeSvg:s,bbox:h,label:o}=await te(t,e,tr(e)),d=Math.max(h.width+e.padding,e.width??0),c=d/2,g=c/(2.5+d/50),u=Math.max(h.height+g+e.padding,e.height??0),{cssStyles:f}=e;if("handDrawn"===e.look){let t=tt.svg(s),r=tj(0,0,d,u,c,g),n=tF(0,g,d,u,c,g),i=t.path(r,(0,a.userNodeOverrides)(e,{})),h=t.path(n,(0,a.userNodeOverrides)(e,{fill:"none"}));l=s.insert(()=>h,":first-child"),(l=s.insert(()=>i,":first-child")).attr("class","basic label-container"),f&&l.attr("style",f)}else{let t=tH(0,0,d,u,c,g);l=s.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(f)).attr("style",i)}return l.attr("label-offset-y",g),l.attr("transform",`translate(${-d/2}, ${-(u/2+g)})`),tl(e,l),o.attr("transform",`translate(${-(h.width/2)-(h.x-(h.left??0))}, ${-(h.height/2)+(e.padding??0)/1.5-(h.y-(h.top??0))})`),e.intersect=function(t){let a=th(e,t),l=a.x-(e.x??0);if(0!=c&&(Math.abs(l)<(e.width??0)/2||Math.abs(l)==(e.width??0)/2&&Math.abs(a.y-(e.y??0))>(e.height??0)/2-g)){let r=g*g*(1-l*l/(c*c));r>0&&(r=Math.sqrt(r)),r=g-r,t.y-(e.y??0)>0&&(r=-r),a.y+=r}return a},s}async function tV(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i,label:s}=await te(t,e,tr(e)),h=i.width+e.padding,o=i.height+e.padding,d=.2*o,c=-h/2,g=-o/2-d/2,{cssStyles:u}=e,f=tt.svg(n),p=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let y=f.polygon([{x:c,y:g+d},{x:-c,y:g+d},{x:-c,y:-g},{x:c,y:-g},{x:c,y:g},{x:-c,y:g},{x:-c,y:g+d}].map(t=>[t.x,t.y]),p),m=n.insert(()=>y,":first-child");return m.attr("class","basic label-container"),u&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",u),r&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",r),s.attr("transform",`translate(${c+(e.padding??0)/2-(i.x-(i.left??0))}, ${g+d+(e.padding??0)/2-(i.y-(i.top??0))})`),tl(e,m),e.intersect=function(t){return th(e,t)},n}async function tU(t,e){let l,{labelStyles:n,nodeStyles:s}=(0,a.styles2String)(e);e.labelStyle=n;let{shapeSvg:h,bbox:o,halfPadding:d}=await te(t,e,tr(e)),c=o.width/2+d+5,g=o.width/2+d,{cssStyles:u}=e;if("handDrawn"===e.look){let t=tt.svg(h),n=(0,a.userNodeOverrides)(e,{roughness:.2,strokeWidth:2.5}),i=(0,a.userNodeOverrides)(e,{roughness:.2,strokeWidth:1.5}),s=t.circle(0,0,2*c,n),o=t.circle(0,0,2*g,i);(l=h.insert("g",":first-child")).attr("class",(0,r.handleUndefinedAttr)(e.cssClasses)).attr("style",(0,r.handleUndefinedAttr)(u)),l.node()?.appendChild(s),l.node()?.appendChild(o)}else{let t=(l=h.insert("g",":first-child")).insert("circle",":first-child"),e=l.insert("circle");l.attr("class","basic label-container").attr("style",s),t.attr("class","outer-circle").attr("style",s).attr("r",c).attr("cx",0).attr("cy",0),e.attr("class","inner-circle").attr("style",s).attr("r",g).attr("cx",0).attr("cy",0)}return tl(e,l),e.intersect=function(t){return i.log.info("DoubleCircle intersect",e,c,t),tk(e,c,t)},h}function tZ(t,e,l){let{config:{themeVariables:r}}=l,{labelStyles:n,nodeStyles:s}=(0,a.styles2String)(e);e.label="",e.labelStyle=n;let h=t.insert("g").attr("class",tr(e)).attr("id",e.domId??e.id),{cssStyles:o}=e,d=tt.svg(h),{nodeBorder:c}=r,g=(0,a.userNodeOverrides)(e,{fillStyle:"solid"});"handDrawn"!==e.look&&(g.roughness=0);let u=d.circle(0,0,14,g),f=h.insert(()=>u,":first-child");return f.selectAll("path").attr("style",`fill: ${c} !important;`),o&&o.length>0&&"handDrawn"!==e.look&&f.selectAll("path").attr("style",o),s&&"handDrawn"!==e.look&&f.selectAll("path").attr("style",s),tl(e,f),e.intersect=function(t){return i.log.info("filledCircle intersect",e,{radius:7,point:t}),tk(e,7,t)},h}async function tX(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:s,label:h}=await te(t,e,tr(e)),o=s.width+(e.padding??0),d=o+s.height,c=o+s.height,g=[{x:0,y:-d},{x:c,y:-d},{x:c/2,y:0}],{cssStyles:u}=e,f=tt.svg(n),p=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let y=tn(g),m=f.path(y,p),x=n.insert(()=>m,":first-child").attr("transform",`translate(${-d/2}, ${d/2})`);return u&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",u),r&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",r),e.width=o,e.height=d,tl(e,x),h.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-d/2+(e.padding??0)/2+(s.y-(s.top??0))})`),e.intersect=function(t){return i.log.info("Triangle intersect",e,g,t),tv(e,g,t)},n}function tQ(t,e,l){let{dir:r,config:{state:n,themeVariables:i}}=l,{nodeStyles:s}=(0,a.styles2String)(e);e.label="";let h=t.insert("g").attr("class",tr(e)).attr("id",e.domId??e.id),{cssStyles:o}=e,d=Math.max(70,e?.width??0),c=Math.max(10,e?.height??0);"LR"===r&&(d=Math.max(10,e?.width??0),c=Math.max(70,e?.height??0));let g=-1*d/2,u=-1*c/2,f=tt.svg(h),p=(0,a.userNodeOverrides)(e,{stroke:i.lineColor,fill:i.lineColor});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let y=f.rectangle(g,u,d,c,p),m=h.insert(()=>y,":first-child");o&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",o),s&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",s),tl(e,m);let x=n?.padding??0;return e.width&&e.height&&(e.width+=x/2||0,e.height+=x/2||0),e.intersect=function(t){return th(e,t)},h}async function tJ(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:s}=await te(t,e,tr(e)),h=Math.max(80,s.width+(e.padding??0)*2,e?.width??0),o=Math.max(50,s.height+(e.padding??0)*2,e?.height??0),d=o/2,{cssStyles:c}=e,g=tt.svg(n),u=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(u.roughness=0,u.fillStyle="solid");let f=[{x:-h/2,y:-o/2},{x:h/2-d,y:-o/2},...ts(-h/2+d,0,d,50,90,270),{x:h/2-d,y:o/2},{x:-h/2,y:o/2}],p=tn(f),y=g.path(p,u),m=n.insert(()=>y,":first-child");return m.attr("class","basic label-container"),c&&"handDrawn"!==e.look&&m.selectChildren("path").attr("style",c),r&&"handDrawn"!==e.look&&m.selectChildren("path").attr("style",r),tl(e,m),e.intersect=function(t){return i.log.info("Pill intersect",e,{radius:d,point:t}),tv(e,f,t)},n}async function tY(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i}=await te(t,e,tr(e)),s=i.height+(e.padding??0),h=i.width+(e.padding??0)*2.5,{cssStyles:o}=e,d=tt.svg(n),c=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(c.roughness=0,c.fillStyle="solid");let g=h/2,u=g/6,f=s/2,p=(g+=u)-f/2,y=[{x:-p,y:-f},{x:0,y:-f},{x:p,y:-f},{x:g,y:0},{x:p,y:f},{x:0,y:f},{x:-p,y:f},{x:-g,y:0}],m=tn(y),x=d.path(m,c),w=n.insert(()=>x,":first-child");return w.attr("class","basic label-container"),o&&"handDrawn"!==e.look&&w.selectChildren("path").attr("style",o),r&&"handDrawn"!==e.look&&w.selectChildren("path").attr("style",r),e.width=h,e.height=s,tl(e,w),e.intersect=function(t){return tv(e,y,t)},n}async function tK(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.label="",e.labelStyle=l;let{shapeSvg:n}=await te(t,e,tr(e)),s=Math.max(30,e?.width??0),h=Math.max(30,e?.height??0),{cssStyles:o}=e,d=tt.svg(n),c=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(c.roughness=0,c.fillStyle="solid");let g=[{x:0,y:0},{x:s,y:0},{x:0,y:h},{x:s,y:h}],u=tn(g),f=d.path(u,c),p=n.insert(()=>f,":first-child");return p.attr("class","basic label-container"),o&&"handDrawn"!==e.look&&p.selectChildren("path").attr("style",o),r&&"handDrawn"!==e.look&&p.selectChildren("path").attr("style",r),p.attr("transform",`translate(${-s/2}, ${-h/2})`),tl(e,p),e.intersect=function(t){return i.log.info("Pill intersect",e,{points:g}),tv(e,g,t)},n}async function t0(t,e,r){let{config:{themeVariables:n,flowchart:s}}=r,{labelStyles:h}=(0,a.styles2String)(e);e.labelStyle=h;let o=Math.max(e.assetHeight??48,e.assetWidth??48);e.width=Math.max(o,s?.wrappingWidth??0);let{shapeSvg:d,bbox:c,label:g}=await te(t,e,"icon-shape default"),u="t"===e.pos,{nodeBorder:f}=n,{stylesMap:p}=(0,a.compileStyles)(e),y=-o/2,m=-o/2,x=8*!!e.label,w=tt.svg(d),b=(0,a.userNodeOverrides)(e,{stroke:"none",fill:"none"});"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");let $=w.rectangle(y,m,o,o,b),k=Math.max(o,c.width),M=o+c.height+x,S=w.rectangle(-k/2,-M/2,k,M,{...b,fill:"transparent",stroke:"none"}),v=d.insert(()=>$,":first-child"),_=d.insert(()=>S);if(e.icon){let t=d.append("g");t.html(`<g>${await (0,l.getIconSVG)(e.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);let a=t.node().getBBox(),r=a.width,n=a.height,i=a.x,s=a.y;t.attr("transform",`translate(${-r/2-i},${u?c.height/2+x/2-n/2-s:-c.height/2-x/2-n/2-s})`),t.attr("style",`color: ${p.get("stroke")??f};`)}return g.attr("transform",`translate(${-c.width/2-(c.x-(c.left??0))},${u?-M/2:M/2-c.height})`),v.attr("transform",`translate(0,${u?c.height/2+x/2:-c.height/2-x/2})`),tl(e,_),e.intersect=function(t){if(i.log.info("iconSquare intersect",e,t),!e.label)return th(e,t);let a=e.x??0,l=e.y??0,r=e.height??0,n=[];return tv(e,n=u?[{x:a-c.width/2,y:l-r/2},{x:a+c.width/2,y:l-r/2},{x:a+c.width/2,y:l-r/2+c.height+x},{x:a+o/2,y:l-r/2+c.height+x},{x:a+o/2,y:l+r/2},{x:a-o/2,y:l+r/2},{x:a-o/2,y:l-r/2+c.height+x},{x:a-c.width/2,y:l-r/2+c.height+x}]:[{x:a-o/2,y:l-r/2},{x:a+o/2,y:l-r/2},{x:a+o/2,y:l-r/2+o},{x:a+c.width/2,y:l-r/2+o},{x:a+c.width/2/2,y:l+r/2},{x:a-c.width/2,y:l+r/2},{x:a-c.width/2,y:l-r/2+o},{x:a-o/2,y:l-r/2+o}],t)},d}async function t2(t,e,r){let{config:{themeVariables:n,flowchart:s}}=r,{labelStyles:h}=(0,a.styles2String)(e);e.labelStyle=h;let o=Math.max(e.assetHeight??48,e.assetWidth??48);e.width=Math.max(o,s?.wrappingWidth??0);let{shapeSvg:d,bbox:c,label:g}=await te(t,e,"icon-shape default"),u=8*!!e.label,f="t"===e.pos,{nodeBorder:p,mainBkg:y}=n,{stylesMap:m}=(0,a.compileStyles)(e),x=tt.svg(d),w=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid"),w.stroke=m.get("fill")??y;let b=d.append("g");e.icon&&b.html(`<g>${await (0,l.getIconSVG)(e.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);let $=b.node().getBBox(),k=$.width,M=$.height,S=$.x,v=$.y,_=Math.max(k,M)*Math.SQRT2+40,D=x.circle(0,0,_,w),C=Math.max(_,c.width),N=_+c.height+u,A=x.rectangle(-C/2,-N/2,C,N,{...w,fill:"transparent",stroke:"none"}),P=d.insert(()=>D,":first-child"),O=d.insert(()=>A);return b.attr("transform",`translate(${-k/2-S},${f?c.height/2+u/2-M/2-v:-c.height/2-u/2-M/2-v})`),b.attr("style",`color: ${m.get("stroke")??p};`),g.attr("transform",`translate(${-c.width/2-(c.x-(c.left??0))},${f?-N/2:N/2-c.height})`),P.attr("transform",`translate(0,${f?c.height/2+u/2:-c.height/2-u/2})`),tl(e,O),e.intersect=function(t){return i.log.info("iconSquare intersect",e,t),th(e,t)},d}async function t1(t,e,r){let{config:{themeVariables:n,flowchart:s}}=r,{labelStyles:h}=(0,a.styles2String)(e);e.labelStyle=h;let o=Math.max(e.assetHeight??48,e.assetWidth??48);e.width=Math.max(o,s?.wrappingWidth??0);let{shapeSvg:d,bbox:c,halfPadding:g,label:u}=await te(t,e,"icon-shape default"),f="t"===e.pos,p=o+2*g,y=o+2*g,{nodeBorder:m,mainBkg:x}=n,{stylesMap:w}=(0,a.compileStyles)(e),b=8*!!e.label,$=tt.svg(d),k=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(k.roughness=0,k.fillStyle="solid"),k.stroke=w.get("fill")??x;let M=$.path(tg(-y/2,-p/2,y,p,5),k),S=Math.max(y,c.width),v=p+c.height+b,_=$.rectangle(-S/2,-v/2,S,v,{...k,fill:"transparent",stroke:"none"}),D=d.insert(()=>M,":first-child").attr("class","icon-shape2"),C=d.insert(()=>_);if(e.icon){let t=d.append("g");t.html(`<g>${await (0,l.getIconSVG)(e.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);let a=t.node().getBBox(),r=a.width,n=a.height,i=a.x,s=a.y;t.attr("transform",`translate(${-r/2-i},${f?c.height/2+b/2-n/2-s:-c.height/2-b/2-n/2-s})`),t.attr("style",`color: ${w.get("stroke")??m};`)}return u.attr("transform",`translate(${-c.width/2-(c.x-(c.left??0))},${f?-v/2:v/2-c.height})`),D.attr("transform",`translate(0,${f?c.height/2+b/2:-c.height/2-b/2})`),tl(e,C),e.intersect=function(t){if(i.log.info("iconSquare intersect",e,t),!e.label)return th(e,t);let a=e.x??0,l=e.y??0,r=e.height??0,n=[];return tv(e,n=f?[{x:a-c.width/2,y:l-r/2},{x:a+c.width/2,y:l-r/2},{x:a+c.width/2,y:l-r/2+c.height+b},{x:a+y/2,y:l-r/2+c.height+b},{x:a+y/2,y:l+r/2},{x:a-y/2,y:l+r/2},{x:a-y/2,y:l-r/2+c.height+b},{x:a-c.width/2,y:l-r/2+c.height+b}]:[{x:a-y/2,y:l-r/2},{x:a+y/2,y:l-r/2},{x:a+y/2,y:l-r/2+p},{x:a+c.width/2,y:l-r/2+p},{x:a+c.width/2/2,y:l+r/2},{x:a-c.width/2,y:l+r/2},{x:a-c.width/2,y:l-r/2+p},{x:a-y/2,y:l-r/2+p}],t)},d}async function t5(t,e,r){let{config:{themeVariables:n,flowchart:s}}=r,{labelStyles:h}=(0,a.styles2String)(e);e.labelStyle=h;let o=Math.max(e.assetHeight??48,e.assetWidth??48);e.width=Math.max(o,s?.wrappingWidth??0);let{shapeSvg:d,bbox:c,halfPadding:g,label:u}=await te(t,e,"icon-shape default"),f="t"===e.pos,p=o+2*g,y=o+2*g,{nodeBorder:m,mainBkg:x}=n,{stylesMap:w}=(0,a.compileStyles)(e),b=8*!!e.label,$=tt.svg(d),k=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(k.roughness=0,k.fillStyle="solid"),k.stroke=w.get("fill")??x;let M=$.path(tg(-y/2,-p/2,y,p,.1),k),S=Math.max(y,c.width),v=p+c.height+b,_=$.rectangle(-S/2,-v/2,S,v,{...k,fill:"transparent",stroke:"none"}),D=d.insert(()=>M,":first-child"),C=d.insert(()=>_);if(e.icon){let t=d.append("g");t.html(`<g>${await (0,l.getIconSVG)(e.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);let a=t.node().getBBox(),r=a.width,n=a.height,i=a.x,s=a.y;t.attr("transform",`translate(${-r/2-i},${f?c.height/2+b/2-n/2-s:-c.height/2-b/2-n/2-s})`),t.attr("style",`color: ${w.get("stroke")??m};`)}return u.attr("transform",`translate(${-c.width/2-(c.x-(c.left??0))},${f?-v/2:v/2-c.height})`),D.attr("transform",`translate(0,${f?c.height/2+b/2:-c.height/2-b/2})`),tl(e,C),e.intersect=function(t){if(i.log.info("iconSquare intersect",e,t),!e.label)return th(e,t);let a=e.x??0,l=e.y??0,r=e.height??0,n=[];return tv(e,n=f?[{x:a-c.width/2,y:l-r/2},{x:a+c.width/2,y:l-r/2},{x:a+c.width/2,y:l-r/2+c.height+b},{x:a+y/2,y:l-r/2+c.height+b},{x:a+y/2,y:l+r/2},{x:a-y/2,y:l+r/2},{x:a-y/2,y:l-r/2+c.height+b},{x:a-c.width/2,y:l-r/2+c.height+b}]:[{x:a-y/2,y:l-r/2},{x:a+y/2,y:l-r/2},{x:a+y/2,y:l-r/2+p},{x:a+c.width/2,y:l-r/2+p},{x:a+c.width/2/2,y:l+r/2},{x:a-c.width/2,y:l+r/2},{x:a-c.width/2,y:l-r/2+p},{x:a-y/2,y:l-r/2+p}],t)},d}async function t3(t,e,l){let{config:{flowchart:r}}=l,n=new Image;n.src=e?.img??"",await n.decode();let s=Number(n.naturalWidth.toString().replace("px","")),h=Number(n.naturalHeight.toString().replace("px",""));e.imageAspectRatio=s/h;let{labelStyles:o}=(0,a.styles2String)(e);e.labelStyle=o;let d=r?.wrappingWidth;e.defaultWidth=r?.wrappingWidth;let c=Math.max(e.label?d??0:0,e?.assetWidth??s),g="on"===e.constraint&&e?.assetHeight?e.assetHeight*e.imageAspectRatio:c,u="on"===e.constraint?g/e.imageAspectRatio:e?.assetHeight??h;e.width=Math.max(g,d??0);let{shapeSvg:f,bbox:p,label:y}=await te(t,e,"image-shape default"),m="t"===e.pos,x=-g/2,w=8*!!e.label,b=tt.svg(f),$=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&($.roughness=0,$.fillStyle="solid");let k=b.rectangle(x,-u/2,g,u,$),M=Math.max(g,p.width),S=u+p.height+w,v=b.rectangle(-M/2,-S/2,M,S,{...$,fill:"none",stroke:"none"}),_=f.insert(()=>k,":first-child"),D=f.insert(()=>v);if(e.img){let t=f.append("image");t.attr("href",e.img),t.attr("width",g),t.attr("height",u),t.attr("preserveAspectRatio","none"),t.attr("transform",`translate(${-g/2},${m?S/2-u:-S/2})`)}return y.attr("transform",`translate(${-p.width/2-(p.x-(p.left??0))},${m?-u/2-p.height/2-w/2:u/2-p.height/2+w/2})`),_.attr("transform",`translate(0,${m?p.height/2+w/2:-p.height/2-w/2})`),tl(e,D),e.intersect=function(t){if(i.log.info("iconSquare intersect",e,t),!e.label)return th(e,t);let a=e.x??0,l=e.y??0,r=e.height??0,n=[];return tv(e,n=m?[{x:a-p.width/2,y:l-r/2},{x:a+p.width/2,y:l-r/2},{x:a+p.width/2,y:l-r/2+p.height+w},{x:a+g/2,y:l-r/2+p.height+w},{x:a+g/2,y:l+r/2},{x:a-g/2,y:l+r/2},{x:a-g/2,y:l-r/2+p.height+w},{x:a-p.width/2,y:l-r/2+p.height+w}]:[{x:a-g/2,y:l-r/2},{x:a+g/2,y:l-r/2},{x:a+g/2,y:l-r/2+u},{x:a+p.width/2,y:l-r/2+u},{x:a+p.width/2/2,y:l+r/2},{x:a-p.width/2,y:l+r/2},{x:a-p.width/2,y:l-r/2+u},{x:a-g/2,y:l-r/2+u}],t)},f}async function t4(t,e){let l,{labelStyles:r,nodeStyles:n}=(0,a.styles2String)(e);e.labelStyle=r;let{shapeSvg:i,bbox:s}=await te(t,e,tr(e)),h=Math.max(s.width+(e.padding??0)*2,e?.width??0),o=Math.max(s.height+(e.padding??0)*2,e?.height??0),d=[{x:0,y:0},{x:h,y:0},{x:h+3*o/6,y:-o},{x:-3*o/6,y:-o}],{cssStyles:c}=e;if("handDrawn"===e.look){let t=tt.svg(i),r=(0,a.userNodeOverrides)(e,{}),n=tn(d),s=t.path(n,r);l=i.insert(()=>s,":first-child").attr("transform",`translate(${-h/2}, ${o/2})`),c&&l.attr("style",c)}else l=tN(i,h,o,d);return n&&l.attr("style",n),e.width=h,e.height=o,tl(e,l),e.intersect=function(t){return tv(e,d,t)},i}async function t8(t,e,l){let n,{labelStyles:i,nodeStyles:s}=(0,a.styles2String)(e);e.labelStyle=i;let{shapeSvg:h,bbox:o}=await te(t,e,tr(e)),d=Math.max(o.width+2*l.labelPaddingX,e?.width||0),c=Math.max(o.height+2*l.labelPaddingY,e?.height||0),g=-d/2,u=-c/2,{rx:f,ry:p}=e,{cssStyles:y}=e;if(l?.rx&&l.ry&&(f=l.rx,p=l.ry),"handDrawn"===e.look){let t=tt.svg(h),l=(0,a.userNodeOverrides)(e,{}),i=f||p?t.path(tg(g,u,d,c,f||0),l):t.rectangle(g,u,d,c,l);(n=h.insert(()=>i,":first-child")).attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(y))}else(n=h.insert("rect",":first-child")).attr("class","basic label-container").attr("style",s).attr("rx",(0,r.handleUndefinedAttr)(f)).attr("ry",(0,r.handleUndefinedAttr)(p)).attr("x",g).attr("y",u).attr("width",d).attr("height",c);return tl(e,n),e.calcIntersect=function(t,e){return th(t,e)},e.intersect=function(t){return th(e,t)},h}async function t6(t,e){let{shapeSvg:a,bbox:l,label:r}=await te(t,e,"label"),n=a.insert("rect",":first-child");return n.attr("width",.1).attr("height",.1),a.attr("class","label edgeLabel"),r.attr("transform",`translate(${-(l.width/2)-(l.x-(l.left??0))}, ${-(l.height/2)-(l.y-(l.top??0))})`),tl(e,n),e.intersect=function(t){return th(e,t)},a}async function t9(t,e){let l,{labelStyles:r,nodeStyles:n}=(0,a.styles2String)(e);e.labelStyle=r;let{shapeSvg:i,bbox:s}=await te(t,e,tr(e)),h=Math.max(s.width+(e.padding??0),e?.width??0),o=Math.max(s.height+(e.padding??0),e?.height??0),d=[{x:0,y:0},{x:h+3*o/6,y:0},{x:h,y:-o},{x:-(3*o)/6,y:-o}],{cssStyles:c}=e;if("handDrawn"===e.look){let t=tt.svg(i),r=(0,a.userNodeOverrides)(e,{}),n=tn(d),s=t.path(n,r);l=i.insert(()=>s,":first-child").attr("transform",`translate(${-h/2}, ${o/2})`),c&&l.attr("style",c)}else l=tN(i,h,o,d);return n&&l.attr("style",n),e.width=h,e.height=o,tl(e,l),e.intersect=function(t){return tv(e,d,t)},i}async function t7(t,e){let l,{labelStyles:r,nodeStyles:n}=(0,a.styles2String)(e);e.labelStyle=r;let{shapeSvg:i,bbox:s}=await te(t,e,tr(e)),h=Math.max(s.width+(e.padding??0),e?.width??0),o=Math.max(s.height+(e.padding??0),e?.height??0),d=[{x:-3*o/6,y:0},{x:h,y:0},{x:h+3*o/6,y:-o},{x:0,y:-o}],{cssStyles:c}=e;if("handDrawn"===e.look){let t=tt.svg(i),r=(0,a.userNodeOverrides)(e,{}),n=tn(d),s=t.path(n,r);l=i.insert(()=>s,":first-child").attr("transform",`translate(${-h/2}, ${o/2})`),c&&l.attr("style",c)}else l=tN(i,h,o,d);return n&&l.attr("style",n),e.width=h,e.height=o,tl(e,l),e.intersect=function(t){return tv(e,d,t)},i}function et(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.label="",e.labelStyle=l;let n=t.insert("g").attr("class",tr(e)).attr("id",e.domId??e.id),{cssStyles:s}=e,h=Math.max(35,e?.width??0),o=Math.max(35,e?.height??0),d=[{x:h,y:0},{x:0,y:o+3.5},{x:h-14,y:o+3.5},{x:0,y:2*o},{x:h,y:o-3.5},{x:14,y:o-3.5}],c=tt.svg(n),g=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(g.roughness=0,g.fillStyle="solid");let u=tn(d),f=c.path(u,g),p=n.insert(()=>f,":first-child");return s&&"handDrawn"!==e.look&&p.selectAll("path").attr("style",s),r&&"handDrawn"!==e.look&&p.selectAll("path").attr("style",r),p.attr("transform",`translate(-${h/2},${-o})`),tl(e,p),e.intersect=function(t){return i.log.info("lightningBolt intersect",e,t),tv(e,d,t)},n}(0,i.__name)(tG,"cylinder"),(0,i.__name)(tV,"dividedRectangle"),(0,i.__name)(tU,"doublecircle"),(0,i.__name)(tZ,"filledCircle"),(0,i.__name)(tX,"flippedTriangle"),(0,i.__name)(tQ,"forkJoin"),(0,i.__name)(tJ,"halfRoundedRectangle"),(0,i.__name)(tY,"hexagon"),(0,i.__name)(tK,"hourglass"),(0,i.__name)(t0,"icon"),(0,i.__name)(t2,"iconCircle"),(0,i.__name)(t1,"iconRounded"),(0,i.__name)(t5,"iconSquare"),(0,i.__name)(t3,"imageSquare"),(0,i.__name)(t4,"inv_trapezoid"),(0,i.__name)(t8,"drawRect"),(0,i.__name)(t6,"labelRect"),(0,i.__name)(t9,"lean_left"),(0,i.__name)(t7,"lean_right"),(0,i.__name)(et,"lightningBolt");var ee=(0,i.__name)((t,e,a,l,r,n,i)=>`M${t},${e+n} a${r},${n} 0,0,0 ${a},0 a${r},${n} 0,0,0 ${-a},0 l0,${l} a${r},${n} 0,0,0 ${a},0 l0,${-l} M${t},${e+n+i} a${r},${n} 0,0,0 ${a},0`,"createCylinderPathD"),ea=(0,i.__name)((t,e,a,l,r,n,i)=>`M${t},${e+n} M${t+a},${e+n} a${r},${n} 0,0,0 ${-a},0 l0,${l} a${r},${n} 0,0,0 ${a},0 l0,${-l} M${t},${e+n+i} a${r},${n} 0,0,0 ${a},0`,"createOuterCylinderPathD"),el=(0,i.__name)((t,e,a,l,r,n)=>`M${t-a/2},${-l/2} a${r},${n} 0,0,0 ${a},0`,"createInnerCylinderPathD");async function er(t,e){let l,{labelStyles:n,nodeStyles:i}=(0,a.styles2String)(e);e.labelStyle=n;let{shapeSvg:s,bbox:h,label:o}=await te(t,e,tr(e)),d=Math.max(h.width+(e.padding??0),e.width??0),c=d/2,g=c/(2.5+d/50),u=Math.max(h.height+g+(e.padding??0),e.height??0),f=.1*u,{cssStyles:p}=e;if("handDrawn"===e.look){let t=tt.svg(s),r=ea(0,0,d,u,c,g,f),n=el(0,g,d,u,c,g),i=(0,a.userNodeOverrides)(e,{}),h=t.path(r,i),o=t.path(n,i);s.insert(()=>o,":first-child").attr("class","line"),(l=s.insert(()=>h,":first-child")).attr("class","basic label-container"),p&&l.attr("style",p)}else{let t=ee(0,0,d,u,c,g,f);l=s.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(p)).attr("style",i)}return l.attr("label-offset-y",g),l.attr("transform",`translate(${-d/2}, ${-(u/2+g)})`),tl(e,l),o.attr("transform",`translate(${-(h.width/2)-(h.x-(h.left??0))}, ${-(h.height/2)+g-(h.y-(h.top??0))})`),e.intersect=function(t){let a=th(e,t),l=a.x-(e.x??0);if(0!=c&&(Math.abs(l)<(e.width??0)/2||Math.abs(l)==(e.width??0)/2&&Math.abs(a.y-(e.y??0))>(e.height??0)/2-g)){let r=g*g*(1-l*l/(c*c));r>0&&(r=Math.sqrt(r)),r=g-r,t.y-(e.y??0)>0&&(r=-r),a.y+=r}return a},s}async function en(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i,label:s}=await te(t,e,tr(e)),h=Math.max(i.width+(e.padding??0)*2,e?.width??0),o=Math.max(i.height+(e.padding??0)*2,e?.height??0),d=o/4,c=o+d,{cssStyles:g}=e,u=tt.svg(n),f=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let p=[{x:-h/2-h/2*.1,y:-c/2},{x:-h/2-h/2*.1,y:c/2},...ti(-h/2-h/2*.1,c/2,h/2+h/2*.1,c/2,d,.8),{x:h/2+h/2*.1,y:-c/2},{x:-h/2-h/2*.1,y:-c/2},{x:-h/2,y:-c/2},{x:-h/2,y:c/2*1.1},{x:-h/2,y:-c/2}],y=u.polygon(p.map(t=>[t.x,t.y]),f),m=n.insert(()=>y,":first-child");return m.attr("class","basic label-container"),g&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",g),r&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",r),m.attr("transform",`translate(0,${-d/2})`),s.attr("transform",`translate(${-h/2+(e.padding??0)+h/2*.1/2-(i.x-(i.left??0))},${-o/2+(e.padding??0)-d/2-(i.y-(i.top??0))})`),tl(e,m),e.intersect=function(t){return tv(e,p,t)},n}async function ei(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i,label:s}=await te(t,e,tr(e)),h=Math.max(i.width+(e.padding??0)*2,e?.width??0),o=Math.max(i.height+(e.padding??0)*2,e?.height??0),d=-h/2,c=-o/2,{cssStyles:g}=e,u=tt.svg(n),f=(0,a.userNodeOverrides)(e,{}),p=[{x:d-5,y:c+5},{x:d-5,y:c+o+5},{x:d+h-5,y:c+o+5},{x:d+h-5,y:c+o},{x:d+h,y:c+o},{x:d+h,y:c+o-5},{x:d+h+5,y:c+o-5},{x:d+h+5,y:c-5},{x:d+5,y:c-5},{x:d+5,y:c},{x:d,y:c},{x:d,y:c+5}];"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let y=tn(p),m=u.path(y,f),x=tn([{x:d,y:c+5},{x:d+h-5,y:c+5},{x:d+h-5,y:c+o},{x:d+h,y:c+o},{x:d+h,y:c},{x:d,y:c}]),w=u.path(x,{...f,fill:"none"}),b=n.insert(()=>w,":first-child");return b.insert(()=>m,":first-child"),b.attr("class","basic label-container"),g&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",g),r&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",r),s.attr("transform",`translate(${-(i.width/2)-5-(i.x-(i.left??0))}, ${-(i.height/2)+5-(i.y-(i.top??0))})`),tl(e,b),e.intersect=function(t){return tv(e,p,t)},n}async function es(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i,label:s}=await te(t,e,tr(e)),h=Math.max(i.width+(e.padding??0)*2,e?.width??0),o=Math.max(i.height+(e.padding??0)*2,e?.height??0),d=o/4,c=o+d,g=-h/2,u=-c/2,{cssStyles:f}=e,p=ti(g-5,u+c+5,g+h-5,u+c+5,d,.8),y=p?.[p.length-1],m=[{x:g-5,y:u+5},{x:g-5,y:u+c+5},...p,{x:g+h-5,y:y.y-5},{x:g+h,y:y.y-5},{x:g+h,y:y.y-10},{x:g+h+5,y:y.y-10},{x:g+h+5,y:u-5},{x:g+5,y:u-5},{x:g+5,y:u},{x:g,y:u},{x:g,y:u+5}],x=[{x:g,y:u+5},{x:g+h-5,y:u+5},{x:g+h-5,y:y.y-5},{x:g+h,y:y.y-5},{x:g+h,y:u},{x:g,y:u}],w=tt.svg(n),b=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");let $=tn(m),k=w.path($,b),M=tn(x),S=w.path(M,b),v=n.insert(()=>k,":first-child");return v.insert(()=>S),v.attr("class","basic label-container"),f&&"handDrawn"!==e.look&&v.selectAll("path").attr("style",f),r&&"handDrawn"!==e.look&&v.selectAll("path").attr("style",r),v.attr("transform",`translate(0,${-d/2})`),s.attr("transform",`translate(${-(i.width/2)-5-(i.x-(i.left??0))}, ${-(i.height/2)+5-d/2-(i.y-(i.top??0))})`),tl(e,v),e.intersect=function(t){return tv(e,m,t)},n}async function eh(t,e,l){let{config:{themeVariables:r}}=l,{labelStyles:i,nodeStyles:s}=(0,a.styles2String)(e);e.labelStyle=i,e.useHtmlLabels||(0,n.getConfig)().flowchart?.htmlLabels!==!1||(e.centerLabel=!0);let{shapeSvg:h,bbox:o,label:d}=await te(t,e,tr(e)),c=Math.max(o.width+(e.padding??0)*2,e?.width??0),g=Math.max(o.height+(e.padding??0)*2,e?.height??0),{cssStyles:u}=e,f=tt.svg(h),p=(0,a.userNodeOverrides)(e,{fill:r.noteBkgColor,stroke:r.noteBorderColor});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let y=f.rectangle(-c/2,-g/2,c,g,p),m=h.insert(()=>y,":first-child");return m.attr("class","basic label-container"),u&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",u),s&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",s),d.attr("transform",`translate(${-o.width/2-(o.x-(o.left??0))}, ${-(o.height/2)-(o.y-(o.top??0))})`),tl(e,m),e.intersect=function(t){return th(e,t)},h}(0,i.__name)(er,"linedCylinder"),(0,i.__name)(en,"linedWaveEdgedRect"),(0,i.__name)(ei,"multiRect"),(0,i.__name)(es,"multiWaveEdgedRectangle"),(0,i.__name)(eh,"note");var eo=(0,i.__name)((t,e,a)=>`M${t+a/2},${e} L${t+a},${e-a/2} L${t+a/2},${e-a} L${t},${e-a/2} Z`,"createDecisionBoxPathD");async function ed(t,e){let l,{labelStyles:r,nodeStyles:n}=(0,a.styles2String)(e);e.labelStyle=r;let{shapeSvg:i,bbox:s}=await te(t,e,tr(e)),h=s.width+e.padding+(s.height+e.padding),o=[{x:h/2,y:0},{x:h,y:-h/2},{x:h/2,y:-h},{x:0,y:-h/2}],{cssStyles:d}=e;if("handDrawn"===e.look){let t=tt.svg(i),r=(0,a.userNodeOverrides)(e,{}),n=eo(0,0,h),s=t.path(n,r);l=i.insert(()=>s,":first-child").attr("transform",`translate(${-h/2+.5}, ${h/2})`),d&&l.attr("style",d)}else(l=tN(i,h,h,o)).attr("transform",`translate(${-h/2+.5}, ${h/2})`);return n&&l.attr("style",n),tl(e,l),e.calcIntersect=function(t,e){let a=t.width,l=tv(t,[{x:a/2,y:0},{x:a,y:-a/2},{x:a/2,y:-a},{x:0,y:-a/2}],e);return{x:l.x-.5,y:l.y-.5}},e.intersect=function(t){return this.calcIntersect(e,t)},i}async function ec(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i,label:s}=await te(t,e,tr(e)),h=Math.max(i.width+(e.padding??0),e?.width??0),o=Math.max(i.height+(e.padding??0),e?.height??0),d=-h/2,c=-o/2,g=c/2,u=[{x:d+g,y:c},{x:d,y:0},{x:d+g,y:-c},{x:-d,y:-c},{x:-d,y:c}],{cssStyles:f}=e,p=tt.svg(n),y=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(y.roughness=0,y.fillStyle="solid");let m=tn(u),x=p.path(m,y),w=n.insert(()=>x,":first-child");return w.attr("class","basic label-container"),f&&"handDrawn"!==e.look&&w.selectAll("path").attr("style",f),r&&"handDrawn"!==e.look&&w.selectAll("path").attr("style",r),w.attr("transform",`translate(${-g/2},0)`),s.attr("transform",`translate(${-g/2-i.width/2-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),tl(e,w),e.intersect=function(t){return tv(e,u,t)},n}async function eg(t,e){let l,r,h,{labelStyles:o,nodeStyles:d}=(0,a.styles2String)(e);e.labelStyle=o,l=e.cssClasses?"node "+e.cssClasses:"node default";let c=t.insert("g").attr("class",l).attr("id",e.domId||e.id),g=c.insert("g"),u=c.insert("g").attr("class","label").attr("style",d),f=e.description,p=e.label,y=u.node().appendChild(await tc(p,e.labelStyle,!0,!0)),m={width:0,height:0};if((0,n.evaluate)((0,n.getConfig2)()?.flowchart?.htmlLabels)){let t=y.children[0],e=(0,s.select)(y);m=t.getBoundingClientRect(),e.attr("width",m.width),e.attr("height",m.height)}i.log.info("Text 2",f);let x=f||[],w=y.getBBox(),b=u.node().appendChild(await tc(x.join?x.join("<br/>"):x,e.labelStyle,!0,!0)),$=b.children[0],k=(0,s.select)(b);m=$.getBoundingClientRect(),k.attr("width",m.width),k.attr("height",m.height);let M=(e.padding||0)/2;(0,s.select)(b).attr("transform","translate( "+(m.width>w.width?0:(w.width-m.width)/2)+", "+(w.height+M+5)+")"),(0,s.select)(y).attr("transform","translate( "+(m.width<w.width?0:-(w.width-m.width)/2)+", 0)"),m=u.node().getBBox(),u.attr("transform","translate("+-m.width/2+", "+(-m.height/2-M+3)+")");let S=m.width+(e.padding||0),v=m.height+(e.padding||0),_=-m.width/2-M,D=-m.height/2-M;if("handDrawn"===e.look){let t=tt.svg(c),l=(0,a.userNodeOverrides)(e,{}),n=t.path(tg(_,D,S,v,e.rx||0),l),s=t.line(-m.width/2-M,-m.height/2-M+w.height+M,m.width/2+M,-m.height/2-M+w.height+M,l);h=c.insert(()=>(i.log.debug("Rough node insert CXC",n),s),":first-child"),r=c.insert(()=>(i.log.debug("Rough node insert CXC",n),n),":first-child")}else r=g.insert("rect",":first-child"),h=g.insert("line"),r.attr("class","outer title-state").attr("style",d).attr("x",-m.width/2-M).attr("y",-m.height/2-M).attr("width",m.width+(e.padding||0)).attr("height",m.height+(e.padding||0)),h.attr("class","divider").attr("x1",-m.width/2-M).attr("x2",m.width/2+M).attr("y1",-m.height/2-M+w.height+M).attr("y2",-m.height/2-M+w.height+M);return tl(e,r),e.intersect=function(t){return th(e,t)},c}function eu(t,e,a,l,r,n,i){let s=Math.atan2(l-e,a-t),h=Math.sqrt(((a-t)/2/r)**2+((l-e)/2/n)**2);if(h>1)throw Error("The given radii are too small to create an arc between the points.");let o=Math.sqrt(1-h**2),d=(t+a)/2+o*n*Math.sin(s)*(i?-1:1),c=(e+l)/2-o*r*Math.cos(s)*(i?-1:1),g=Math.atan2((e-c)/n,(t-d)/r),u=Math.atan2((l-c)/n,(a-d)/r)-g;i&&u<0&&(u+=2*Math.PI),!i&&u>0&&(u-=2*Math.PI);let f=[];for(let t=0;t<20;t++){let e=g+t/19*u,a=d+r*Math.cos(e),l=c+n*Math.sin(e);f.push({x:a,y:l})}return f}async function ef(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i}=await te(t,e,tr(e)),s=e?.padding??0,h=e?.padding??0,o=(e?.width?e?.width:i.width)+2*s,d=(e?.height?e?.height:i.height)+2*h,c=e.radius||5,g=e.taper||5,{cssStyles:u}=e,f=tt.svg(n),p=(0,a.userNodeOverrides)(e,{});e.stroke&&(p.stroke=e.stroke),"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let y=[{x:-o/2+g,y:-d/2},{x:o/2-g,y:-d/2},...eu(o/2-g,-d/2,o/2,-d/2+g,c,c,!0),{x:o/2,y:-d/2+g},{x:o/2,y:d/2-g},...eu(o/2,d/2-g,o/2-g,d/2,c,c,!0),{x:o/2-g,y:d/2},{x:-o/2+g,y:d/2},...eu(-o/2+g,d/2,-o/2,d/2-g,c,c,!0),{x:-o/2,y:d/2-g},{x:-o/2,y:-d/2+g},...eu(-o/2,-d/2+g,-o/2+g,-d/2,c,c,!0)],m=tn(y),x=f.path(m,p),w=n.insert(()=>x,":first-child");return w.attr("class","basic label-container outer-path"),u&&"handDrawn"!==e.look&&w.selectChildren("path").attr("style",u),r&&"handDrawn"!==e.look&&w.selectChildren("path").attr("style",r),tl(e,w),e.intersect=function(t){return tv(e,y,t)},n}async function ep(t,e){let{labelStyles:l,nodeStyles:n}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:s,label:h}=await te(t,e,tr(e)),o=e?.padding??0,d=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),g=-s.width/2-o,u=-s.height/2-o,{cssStyles:f}=e,p=tt.svg(i),y=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(y.roughness=0,y.fillStyle="solid");let m=p.polygon([{x:g,y:u},{x:g+d+8,y:u},{x:g+d+8,y:u+c},{x:g-8,y:u+c},{x:g-8,y:u},{x:g,y:u},{x:g,y:u+c}].map(t=>[t.x,t.y]),y),x=i.insert(()=>m,":first-child");return x.attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(f)),n&&"handDrawn"!==e.look&&x.selectAll("path").attr("style",n),f&&"handDrawn"!==e.look&&x.selectAll("path").attr("style",n),h.attr("transform",`translate(${-d/2+4+(e.padding??0)-(s.x-(s.left??0))},${-c/2+(e.padding??0)-(s.y-(s.top??0))})`),tl(e,x),e.intersect=function(t){return th(e,t)},i}async function ey(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i,label:s}=await te(t,e,tr(e)),h=Math.max(i.width+(e.padding??0)*2,e?.width??0),o=Math.max(i.height+(e.padding??0)*2,e?.height??0),d=-h/2,c=-o/2,{cssStyles:g}=e,u=tt.svg(n),f=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let p=[{x:d,y:c},{x:d,y:c+o},{x:d+h,y:c+o},{x:d+h,y:c-o/2}],y=tn(p),m=u.path(y,f),x=n.insert(()=>m,":first-child");return x.attr("class","basic label-container"),g&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",g),r&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",r),x.attr("transform",`translate(0, ${o/4})`),s.attr("transform",`translate(${-h/2+(e.padding??0)-(i.x-(i.left??0))}, ${-o/4+(e.padding??0)-(i.y-(i.top??0))})`),tl(e,x),e.intersect=function(t){return tv(e,p,t)},n}async function em(t,e){let a={rx:0,ry:0,classes:"",labelPaddingX:e.labelPaddingX??2*(e?.padding||0),labelPaddingY:+(e?.padding||0)};return t8(t,e,a)}async function ex(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i}=await te(t,e,tr(e)),s=i.height+e.padding,h=i.width+s/4+e.padding,o=s/2,{cssStyles:d}=e,c=tt.svg(n),g=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(g.roughness=0,g.fillStyle="solid");let u=[{x:-h/2+o,y:-s/2},{x:h/2-o,y:-s/2},...ts(-h/2+o,0,o,50,90,270),{x:h/2-o,y:s/2},...ts(h/2-o,0,o,50,270,450)],f=tn(u),p=c.path(f,g),y=n.insert(()=>p,":first-child");return y.attr("class","basic label-container outer-path"),d&&"handDrawn"!==e.look&&y.selectChildren("path").attr("style",d),r&&"handDrawn"!==e.look&&y.selectChildren("path").attr("style",r),tl(e,y),e.intersect=function(t){return tv(e,u,t)},n}async function ew(t,e){return t8(t,e,{rx:5,ry:5,classes:"flowchart-node"})}function eb(t,e,l){let{config:{themeVariables:r}}=l,{labelStyles:n,nodeStyles:i}=(0,a.styles2String)(e);e.labelStyle=n;let{cssStyles:s}=e,{lineColor:h,stateBorder:o,nodeBorder:d}=r,c=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),g=tt.svg(c),u=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(u.roughness=0,u.fillStyle="solid");let f=g.circle(0,0,14,{...u,stroke:h,strokeWidth:2}),p=o??d,y=g.circle(0,0,5,{...u,fill:p,stroke:p,strokeWidth:2,fillStyle:"solid"}),m=c.insert(()=>f,":first-child");return m.insert(()=>y),s&&m.selectAll("path").attr("style",s),i&&m.selectAll("path").attr("style",i),tl(e,m),e.intersect=function(t){return tk(e,7,t)},c}function e$(t,e,l){let r,{config:{themeVariables:n}}=l,{lineColor:i}=n,s=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);if("handDrawn"===e.look){let t=tt.svg(s).circle(0,0,14,(0,a.solidStateFill)(i));(r=s.insert(()=>t)).attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else(r=s.insert("circle",":first-child")).attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return tl(e,r),e.intersect=function(t){return tk(e,7,t)},s}async function ek(t,e){let{labelStyles:l,nodeStyles:n}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:s}=await te(t,e,tr(e)),h=(e?.padding||0)/2,o=s.width+e.padding,d=s.height+e.padding,c=-s.width/2-h,g=-s.height/2-h,u=[{x:0,y:0},{x:o,y:0},{x:o,y:-d},{x:0,y:-d},{x:0,y:0},{x:-8,y:0},{x:o+8,y:0},{x:o+8,y:-d},{x:-8,y:-d},{x:-8,y:0}];if("handDrawn"===e.look){let t=tt.svg(i),l=(0,a.userNodeOverrides)(e,{}),n=t.rectangle(c-8,g,o+16,d,l),s=t.line(c,g,c,g+d,l),h=t.line(c+o,g,c+o,g+d,l);i.insert(()=>s,":first-child"),i.insert(()=>h,":first-child");let u=i.insert(()=>n,":first-child"),{cssStyles:f}=e;u.attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(f)),tl(e,u)}else{let t=tN(i,o,d,u);n&&t.attr("style",n),tl(e,t)}return e.intersect=function(t){return tv(e,u,t)},i}async function eM(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i}=await te(t,e,tr(e)),s=Math.max(i.width+(e.padding??0)*2,e?.width??0),h=Math.max(i.height+(e.padding??0)*2,e?.height??0),o=-s/2,d=-h/2,c=.2*h,{cssStyles:g}=e,u=tt.svg(n),f=(0,a.userNodeOverrides)(e,{}),p=[{x:o-c/2,y:d},{x:o+s+c/2,y:d},{x:o+s+c/2,y:d+h},{x:o-c/2,y:d+h}];"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let y=tn(p),m=u.path(y,f),x=tn([{x:o+s-c/2,y:d+h},{x:o+s+c/2,y:d+h},{x:o+s+c/2,y:d+h-.2*h}]),w=u.path(x,{...f,fillStyle:"solid"}),b=n.insert(()=>w,":first-child");return b.insert(()=>m,":first-child"),b.attr("class","basic label-container"),g&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",g),r&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",r),tl(e,b),e.intersect=function(t){return tv(e,p,t)},n}async function eS(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i,label:s}=await te(t,e,tr(e)),h=Math.max(i.width+(e.padding??0)*2,e?.width??0),o=Math.max(i.height+(e.padding??0)*2,e?.height??0),d=o/4,c=.2*h,g=.2*o,u=o+d,{cssStyles:f}=e,p=tt.svg(n),y=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(y.roughness=0,y.fillStyle="solid");let m=[{x:-h/2-h/2*.1,y:u/2},...ti(-h/2-h/2*.1,u/2,h/2+h/2*.1,u/2,d,.8),{x:h/2+h/2*.1,y:-u/2},{x:-h/2-h/2*.1,y:-u/2}],x=-h/2+h/2*.1,w=-u/2-.4*g,b=[{x:x+h-c,y:(w+o)*1.4},{x:x+h,y:w+o-g},{x:x+h,y:(w+o)*.9},...ti(x+h,(w+o)*1.3,x+h-c,(w+o)*1.5,-(.03*o),.5)],$=tn(m),k=p.path($,y),M=tn(b),S=p.path(M,{...y,fillStyle:"solid"}),v=n.insert(()=>S,":first-child");return v.insert(()=>k,":first-child"),v.attr("class","basic label-container"),f&&"handDrawn"!==e.look&&v.selectAll("path").attr("style",f),r&&"handDrawn"!==e.look&&v.selectAll("path").attr("style",r),v.attr("transform",`translate(0,${-d/2})`),s.attr("transform",`translate(${-h/2+(e.padding??0)-(i.x-(i.left??0))},${-o/2+(e.padding??0)-d/2-(i.y-(i.top??0))})`),tl(e,v),e.intersect=function(t){return tv(e,m,t)},n}async function ev(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i}=await te(t,e,tr(e)),s=Math.max(i.width+e.padding,e?.width||0),h=Math.max(i.height+e.padding,e?.height||0),o=n.insert("rect",":first-child");return o.attr("class","text").attr("style",r).attr("rx",0).attr("ry",0).attr("x",-s/2).attr("y",-h/2).attr("width",s).attr("height",h),tl(e,o),e.intersect=function(t){return th(e,t)},n}(0,i.__name)(ed,"question"),(0,i.__name)(ec,"rect_left_inv_arrow"),(0,i.__name)(eg,"rectWithTitle"),(0,i.__name)(eu,"generateArcPoints"),(0,i.__name)(ef,"roundedRect"),(0,i.__name)(ep,"shadedProcess"),(0,i.__name)(ey,"slopedRect"),(0,i.__name)(em,"squareRect"),(0,i.__name)(ex,"stadium"),(0,i.__name)(ew,"state"),(0,i.__name)(eb,"stateEnd"),(0,i.__name)(e$,"stateStart"),(0,i.__name)(ek,"subroutine"),(0,i.__name)(eM,"taggedRect"),(0,i.__name)(eS,"taggedWaveEdgedRectangle"),(0,i.__name)(ev,"text");var e_=(0,i.__name)((t,e,a,l,r,n)=>`M${t},${e}
    a${r},${n} 0,0,1 0,${-l}
    l${a},0
    a${r},${n} 0,0,1 0,${l}
    M${a},${-l}
    a${r},${n} 0,0,0 0,${l}
    l${-a},0`,"createCylinderPathD"),eD=(0,i.__name)((t,e,a,l,r,n)=>`M${t},${e} M${t+a},${e} a${r},${n} 0,0,0 0,${-l} l${-a},0 a${r},${n} 0,0,0 0,${l} l${a},0`,"createOuterCylinderPathD"),eC=(0,i.__name)((t,e,a,l,r,n)=>`M${t+a/2},${-l/2} a${r},${n} 0,0,0 0,${l}`,"createInnerCylinderPathD");async function eN(t,e){let l,{labelStyles:n,nodeStyles:i}=(0,a.styles2String)(e);e.labelStyle=n;let{shapeSvg:s,bbox:h,label:o,halfPadding:d}=await te(t,e,tr(e)),c="neo"===e.look?2*d:d,g=h.height+c,u=g/2,f=u/(2.5+g/50),p=h.width+f+c,{cssStyles:y}=e;if("handDrawn"===e.look){let t=tt.svg(s),r=eD(0,0,p,g,f,u),n=eC(0,0,p,g,f,u),i=t.path(r,(0,a.userNodeOverrides)(e,{})),h=t.path(n,(0,a.userNodeOverrides)(e,{fill:"none"}));l=s.insert(()=>h,":first-child"),(l=s.insert(()=>i,":first-child")).attr("class","basic label-container"),y&&l.attr("style",y)}else{let t=e_(0,0,p,g,f,u);(l=s.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(y)).attr("style",i)).attr("class","basic label-container"),y&&l.selectAll("path").attr("style",y),i&&l.selectAll("path").attr("style",i)}return l.attr("label-offset-x",f),l.attr("transform",`translate(${-p/2}, ${g/2} )`),o.attr("transform",`translate(${-(h.width/2)-f-(h.x-(h.left??0))}, ${-(h.height/2)-(h.y-(h.top??0))})`),tl(e,l),e.intersect=function(t){let a=th(e,t),l=a.y-(e.y??0);if(0!=u&&(Math.abs(l)<(e.height??0)/2||Math.abs(l)==(e.height??0)/2&&Math.abs(a.x-(e.x??0))>(e.width??0)/2-f)){let r=f*f*(1-l*l/(u*u));0!=r&&(r=Math.sqrt(Math.abs(r))),r=f-r,t.x-(e.x??0)>0&&(r=-r),a.x+=r}return a},s}async function eA(t,e){let l,{labelStyles:r,nodeStyles:n}=(0,a.styles2String)(e);e.labelStyle=r;let{shapeSvg:i,bbox:s}=await te(t,e,tr(e)),h=s.width+e.padding,o=s.height+e.padding,d=[{x:-3*o/6,y:0},{x:h+3*o/6,y:0},{x:h,y:-o},{x:0,y:-o}],{cssStyles:c}=e;if("handDrawn"===e.look){let t=tt.svg(i),r=(0,a.userNodeOverrides)(e,{}),n=tn(d),s=t.path(n,r);l=i.insert(()=>s,":first-child").attr("transform",`translate(${-h/2}, ${o/2})`),c&&l.attr("style",c)}else l=tN(i,h,o,d);return n&&l.attr("style",n),e.width=h,e.height=o,tl(e,l),e.intersect=function(t){return tv(e,d,t)},i}async function eP(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i}=await te(t,e,tr(e)),s=Math.max(60,i.width+(e.padding??0)*2,e?.width??0),h=Math.max(20,i.height+(e.padding??0)*2,e?.height??0),{cssStyles:o}=e,d=tt.svg(n),c=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(c.roughness=0,c.fillStyle="solid");let g=[{x:-s/2*.8,y:-h/2},{x:s/2*.8,y:-h/2},{x:s/2,y:-h/2*.6},{x:s/2,y:h/2},{x:-s/2,y:h/2},{x:-s/2,y:-h/2*.6}],u=tn(g),f=d.path(u,c),p=n.insert(()=>f,":first-child");return p.attr("class","basic label-container"),o&&"handDrawn"!==e.look&&p.selectChildren("path").attr("style",o),r&&"handDrawn"!==e.look&&p.selectChildren("path").attr("style",r),tl(e,p),e.intersect=function(t){return tv(e,g,t)},n}async function eO(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:s,bbox:h,label:o}=await te(t,e,tr(e)),d=(0,n.evaluate)((0,n.getConfig2)().flowchart?.htmlLabels),c=h.width+(e.padding??0),g=c+h.height,u=c+h.height,f=[{x:0,y:0},{x:u,y:0},{x:u/2,y:-g}],{cssStyles:p}=e,y=tt.svg(s),m=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(m.roughness=0,m.fillStyle="solid");let x=tn(f),w=y.path(x,m),b=s.insert(()=>w,":first-child").attr("transform",`translate(${-g/2}, ${g/2})`);return p&&"handDrawn"!==e.look&&b.selectChildren("path").attr("style",p),r&&"handDrawn"!==e.look&&b.selectChildren("path").attr("style",r),e.width=c,e.height=g,tl(e,b),o.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))}, ${g/2-(h.height+(e.padding??0)/(d?2:1)-(h.y-(h.top??0)))})`),e.intersect=function(t){return i.log.info("Triangle intersect",e,f,t),tv(e,f,t)},s}async function eB(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i,label:s}=await te(t,e,tr(e)),h=Math.max(i.width+(e.padding??0)*2,e?.width??0),o=Math.max(i.height+(e.padding??0)*2,e?.height??0),d=o/8,c=o+d,{cssStyles:g}=e,u=70-h,f=u>0?u/2:0,p=tt.svg(n),y=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(y.roughness=0,y.fillStyle="solid");let m=[{x:-h/2-f,y:c/2},...ti(-h/2-f,c/2,h/2+f,c/2,d,.8),{x:h/2+f,y:-c/2},{x:-h/2-f,y:-c/2}],x=tn(m),w=p.path(x,y),b=n.insert(()=>w,":first-child");return b.attr("class","basic label-container"),g&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",g),r&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",r),b.attr("transform",`translate(0,${-d/2})`),s.attr("transform",`translate(${-h/2+(e.padding??0)-(i.x-(i.left??0))},${-o/2+(e.padding??0)-d-(i.y-(i.top??0))})`),tl(e,b),e.intersect=function(t){return tv(e,m,t)},n}async function eL(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i}=await te(t,e,tr(e)),s=Math.max(i.width+(e.padding??0)*2,e?.width??0),h=Math.max(i.height+(e.padding??0)*2,e?.height??0),o=s/h,d=s,c=h;d>c*o?c=d/o:d=c*o,d=Math.max(d,100);let g=Math.min(.2*(c=Math.max(c,50)),c/4),u=c+2*g,{cssStyles:f}=e,p=tt.svg(n),y=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(y.roughness=0,y.fillStyle="solid");let m=[{x:-d/2,y:u/2},...ti(-d/2,u/2,d/2,u/2,g,1),{x:d/2,y:-u/2},...ti(d/2,-u/2,-d/2,-u/2,g,-1)],x=tn(m),w=p.path(x,y),b=n.insert(()=>w,":first-child");return b.attr("class","basic label-container"),f&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",f),r&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",r),tl(e,b),e.intersect=function(t){return tv(e,m,t)},n}async function eT(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i,label:s}=await te(t,e,tr(e)),h=Math.max(i.width+(e.padding??0)*2,e?.width??0),o=Math.max(i.height+(e.padding??0)*2,e?.height??0),d=-h/2,c=-o/2,{cssStyles:g}=e,u=tt.svg(n),f=(0,a.userNodeOverrides)(e,{}),p=[{x:d-5,y:c-5},{x:d-5,y:c+o},{x:d+h,y:c+o},{x:d+h,y:c-5}],y=`M${d-5},${c-5} L${d+h},${c-5} L${d+h},${c+o} L${d-5},${c+o} L${d-5},${c-5}
                M${d-5},${c} L${d+h},${c}
                M${d},${c-5} L${d},${c+o}`;"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let m=u.path(y,f),x=n.insert(()=>m,":first-child");return x.attr("transform","translate(2.5, 2.5)"),x.attr("class","basic label-container"),g&&"handDrawn"!==e.look&&x.selectAll("path").attr("style",g),r&&"handDrawn"!==e.look&&x.selectAll("path").attr("style",r),s.attr("transform",`translate(${-(i.width/2)+2.5-(i.x-(i.left??0))}, ${-(i.height/2)+2.5-(i.y-(i.top??0))})`),tl(e,x),e.intersect=function(t){return tv(e,p,t)},n}async function eR(t,e){if(e.alias&&(e.label=e.alias),"handDrawn"===e.look){let{themeVariables:a}=(0,n.getConfig)(),{background:l}=a,r={...e,id:e.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${l}`]};await eR(t,r)}let l=(0,n.getConfig)();e.useHtmlLabels=l.htmlLabels;let i=l.er?.diagramPadding??10,h=l.er?.entityPadding??6,{cssStyles:o}=e,{labelStyles:d,nodeStyles:c}=(0,a.styles2String)(e);if(0===e.attributes.length&&e.label){let a={rx:0,ry:0,labelPaddingX:i,labelPaddingY:1.5*i,classes:""};(0,r.calculateTextWidth)(e.label,l)+2*a.labelPaddingX<l.er.minEntityWidth&&(e.width=l.er.minEntityWidth);let s=await t8(t,e,a);if(!(0,n.evaluate)(l.htmlLabels)){let t=s.select("text"),e=t.node()?.getBBox();t.attr("transform",`translate(${-e.width/2}, 0)`)}return s}l.htmlLabels||(i*=1.25,h*=1.25);let g=tr(e);g||(g="node default");let u=t.insert("g").attr("class",g).attr("id",e.domId||e.id),f=await eI(u,e.label??"",l,0,0,["name"],d);f.height+=h;let p=0,y=[],m=[],x=0,w=0,b=0,$=0,k=!0,M=!0;for(let t of e.attributes){let e=await eI(u,t.type,l,0,p,["attribute-type"],d);x=Math.max(x,e.width+i);let a=await eI(u,t.name,l,0,p,["attribute-name"],d);w=Math.max(w,a.width+i);let r=await eI(u,t.keys.join(),l,0,p,["attribute-keys"],d);b=Math.max(b,r.width+i);let n=await eI(u,t.comment,l,0,p,["attribute-comment"],d);$=Math.max($,n.width+i);let s=Math.max(e.height,a.height,r.height,n.height)+h;m.push({yOffset:p,rowHeight:s}),p+=s}let S=4;b<=i&&(k=!1,b=0,S--),$<=i&&(M=!1,$=0,S--);let v=u.node().getBBox();if(f.width+2*i-(x+w+b+$)>0){let t=f.width+2*i-(x+w+b+$);x+=t/S,w+=t/S,b>0&&(b+=t/S),$>0&&($+=t/S)}let _=x+w+b+$,D=tt.svg(u),C=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(C.roughness=0,C.fillStyle="solid");let N=0;m.length>0&&(N=m.reduce((t,e)=>t+(e?.rowHeight??0),0));let A=Math.max(v.width+2*i,e?.width||0,_),P=Math.max((N??0)+f.height,e?.height||0),O=-A/2,B=-P/2;u.selectAll("g:not(:first-child)").each((t,e,a)=>{let l=(0,s.select)(a[e]),r=l.attr("transform"),n=0,o=0;if(r){let t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(r);t&&(n=parseFloat(t[1]),o=parseFloat(t[2]),l.attr("class").includes("attribute-name")?n+=x:l.attr("class").includes("attribute-keys")?n+=x+w:l.attr("class").includes("attribute-comment")&&(n+=x+w+b))}l.attr("transform",`translate(${O+i/2+n}, ${o+B+f.height+h/2})`)}),u.select(".name").attr("transform","translate("+-f.width/2+", "+(B+h/2)+")");let L=D.rectangle(O,B,A,P,C),T=u.insert(()=>L,":first-child").attr("style",o.join("")),{themeVariables:R}=(0,n.getConfig)(),{rowEven:I,rowOdd:W,nodeBorder:E}=R;for(let[t,e]of(y.push(0),m.entries())){let a=(t+1)%2==0&&0!==e.yOffset,l=D.rectangle(O,f.height+B+e?.yOffset,A,e?.rowHeight,{...C,fill:a?I:W,stroke:E});u.insert(()=>l,"g.label").attr("style",o.join("")).attr("class",`row-rect-${a?"even":"odd"}`)}let z=D.line(O,f.height+B,A+O,f.height+B,C);for(let t of(u.insert(()=>z).attr("class","divider"),z=D.line(x+O,f.height+B,x+O,P+B,C),u.insert(()=>z).attr("class","divider"),k&&(z=D.line(x+w+O,f.height+B,x+w+O,P+B,C),u.insert(()=>z).attr("class","divider")),M&&(z=D.line(x+w+b+O,f.height+B,x+w+b+O,P+B,C),u.insert(()=>z).attr("class","divider")),y))z=D.line(O,f.height+B+t,A+O,f.height+B+t,C),u.insert(()=>z).attr("class","divider");if(tl(e,T),c&&"handDrawn"!==e.look){let t=c.split(";"),e=t?.filter(t=>t.includes("stroke"))?.map(t=>`${t}`).join("; ");u.selectAll("path").attr("style",e??""),u.selectAll(".row-rect-even path").attr("style",c)}return e.intersect=function(t){return th(e,t)},u}async function eI(t,e,a){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",c=t.insert("g").attr("class",`label ${o.join(" ")}`).attr("transform",`translate(${i}, ${h})`).attr("style",d);e!==(0,n.parseGenericTypes)(e)&&(e=(e=(0,n.parseGenericTypes)(e)).replaceAll("<","&lt;").replaceAll(">","&gt;"));let g=c.node().appendChild(await (0,l.createText)(c,e,{width:(0,r.calculateTextWidth)(e,a)+100,style:d,useHtmlLabels:a.htmlLabels},a));if(e.includes("&lt;")||e.includes("&gt;")){let t=g.children[0];for(t.textContent=t.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");t.childNodes[0];)(t=t.childNodes[0]).textContent=t.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let u=g.getBBox();if((0,n.evaluate)(a.htmlLabels)){let t=g.children[0];t.style.textAlign="start";let e=(0,s.select)(g);u=t.getBoundingClientRect(),e.attr("width",u.width),e.attr("height",u.height)}return u}async function eW(t,e,a,l){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.class.padding??12,n=3*!l,i=t.insert("g").attr("class",tr(e)).attr("id",e.domId||e.id),s=null,h=null,o=null,d=null,c=0,g=0,u=0;if(s=i.insert("g").attr("class","annotation-group text"),e.annotations.length>0){let t=e.annotations[0];await eE(s,{text:`\xab${t}\xbb`},0),c=s.node().getBBox().height}h=i.insert("g").attr("class","label-group text"),await eE(h,e,0,["font-weight: bolder"]);let f=h.node().getBBox();g=f.height,o=i.insert("g").attr("class","members-group text");let p=0;for(let t of e.members){let e=await eE(o,t,p,[t.parseClassifier()]);p+=e+n}(u=o.node().getBBox().height)<=0&&(u=r/2),d=i.insert("g").attr("class","methods-group text");let y=0;for(let t of e.methods){let e=await eE(d,t,y,[t.parseClassifier()]);y+=e+n}let m=i.node().getBBox();if(null!==s){let t=s.node().getBBox();s.attr("transform",`translate(${-t.width/2})`)}return h.attr("transform",`translate(${-f.width/2}, ${c})`),m=i.node().getBBox(),o.attr("transform",`translate(0, ${c+g+2*r})`),m=i.node().getBBox(),d.attr("transform",`translate(0, ${c+g+(u?u+4*r:2*r)})`),m=i.node().getBBox(),{shapeSvg:i,bbox:m}}async function eE(t,e,a){let h,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],d=t.insert("g").attr("class","label").attr("style",o.join("; ")),c=(0,n.getConfig)(),g="useHtmlLabels"in e?e.useHtmlLabels:(0,n.evaluate)(c.htmlLabels)??!0,u="";u="text"in e?e.text:e.label,!g&&u.startsWith("\\")&&(u=u.substring(1)),(0,n.hasKatex)(u)&&(g=!0);let f=await (0,l.createText)(d,(0,n.sanitizeText2)((0,r.decodeEntities)(u)),{width:(0,r.calculateTextWidth)(u,c)+50,classes:"markdown-node-label",useHtmlLabels:g},c),p=1;if(g){let t=f.children[0],e=(0,s.select)(f);p=t.innerHTML.split("<br>").length,t.innerHTML.includes("</math>")&&(p+=t.innerHTML.split("<mrow>").length-1);let a=t.getElementsByTagName("img");if(a){let t=""===u.replace(/<img[^>]*>/g,"").trim();await Promise.all([...a].map(e=>new Promise(a=>{function l(){if(e.style.display="flex",e.style.flexDirection="column",t){let t=5*parseInt(c.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,10)+"px";e.style.minWidth=t,e.style.maxWidth=t}else e.style.width="100%";a(e)}(0,i.__name)(l,"setupImage"),setTimeout(()=>{e.complete&&l()}),e.addEventListener("error",l),e.addEventListener("load",l)})))}h=t.getBoundingClientRect(),e.attr("width",h.width),e.attr("height",h.height)}else{o.includes("font-weight: bolder")&&(0,s.select)(f).selectAll("tspan").attr("font-weight",""),p=f.children.length;let t=f.children[0];(""===f.textContent||f.textContent.includes("&gt"))&&(t.textContent=u[0]+u.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim()," "===u[1]&&(t.textContent=t.textContent[0]+" "+t.textContent.substring(1))),"undefined"===t.textContent&&(t.textContent=""),h=f.getBBox()}return d.attr("transform","translate(0,"+(-h.height/(2*p)+a)+")"),h.height}async function ez(t,e){let l=(0,n.getConfig2)(),r=l.class.padding??12,i=e.useHtmlLabels??(0,n.evaluate)(l.htmlLabels)??!0;e.annotations=e.annotations??[],e.members=e.members??[],e.methods=e.methods??[];let{shapeSvg:h,bbox:o}=await eW(t,e,l,i,r),{labelStyles:d,nodeStyles:c}=(0,a.styles2String)(e);e.labelStyle=d,e.cssStyles=e.styles||"";let g=e.styles?.join(";")||c||"";e.cssStyles||(e.cssStyles=g.replaceAll("!important","").split(";"));let u=0===e.members.length&&0===e.methods.length&&!l.class?.hideEmptyMembersBox,f=tt.svg(h),p=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let y=o.width,m=o.height;0===e.members.length&&0===e.methods.length?m+=r:e.members.length>0&&0===e.methods.length&&(m+=2*r);let x=-y/2,w=-m/2,b=f.rectangle(x-r,w-r-(u?r:0===e.members.length&&0===e.methods.length?-r/2:0),y+2*r,m+2*r+(u?2*r:0===e.members.length&&0===e.methods.length?-r:0),p),$=h.insert(()=>b,":first-child");$.attr("class","basic label-container");let k=$.node().getBBox();h.selectAll(".text").each((t,a,l)=>{let n=(0,s.select)(l[a]),o=n.attr("transform"),d=0;if(o){let t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(o);t&&(d=parseFloat(t[2]))}let c=d+w+r-(u?r:0===e.members.length&&0===e.methods.length?-r/2:0);i||(c-=4);let g=x;(n.attr("class").includes("label-group")||n.attr("class").includes("annotation-group"))&&(g=-n.node()?.getBBox().width/2||0,h.selectAll("text").each(function(t,e,a){"middle"===window.getComputedStyle(a[e]).textAnchor&&(g=0)})),n.attr("transform",`translate(${g}, ${c})`)});let M=h.select(".annotation-group").node().getBBox().height-(u?r/2:0)||0,S=h.select(".label-group").node().getBBox().height-(u?r/2:0)||0,v=h.select(".members-group").node().getBBox().height-(u?r/2:0)||0;if(e.members.length>0||e.methods.length>0||u){let t=f.line(k.x,M+S+w+r,k.x+k.width,M+S+w+r,p);h.insert(()=>t).attr("class","divider").attr("style",g)}if(u||e.members.length>0||e.methods.length>0){let t=f.line(k.x,M+S+v+w+2*r+r,k.x+k.width,M+S+v+w+r+2*r,p);h.insert(()=>t).attr("class","divider").attr("style",g)}if("handDrawn"!==e.look&&h.selectAll("path").attr("style",g),$.select(":nth-child(2)").attr("style",g),h.selectAll(".divider").select("path").attr("style",g),e.labelStyle?h.selectAll("span").attr("style",e.labelStyle):h.selectAll("span").attr("style",g),!i){let t=RegExp(/color\s*:\s*([^;]*)/),e=t.exec(g);if(e){let t=e[0].replace("color","fill");h.selectAll("tspan").attr("style",t)}else if(d){let e=t.exec(d);if(e){let t=e[0].replace("color","fill");h.selectAll("tspan").attr("style",t)}}}return tl(e,$),e.intersect=function(t){return th(e,t)},h}async function eq(t,e){let l,{labelStyles:r,nodeStyles:n}=(0,a.styles2String)(e);e.labelStyle=r;let i="verifyMethod"in e,h=tr(e),o=t.insert("g").attr("class",h).attr("id",e.domId??e.id),d=l=i?await eH(o,`&lt;&lt;${e.type}&gt;&gt;`,0,e.labelStyle):await eH(o,"&lt;&lt;Element&gt;&gt;",0,e.labelStyle),c=await eH(o,e.name,d,e.labelStyle+"; font-weight: bold;");if(d+=c+20,i){let t=await eH(o,`${e.requirementId?`ID: ${e.requirementId}`:""}`,d,e.labelStyle);d+=t;let a=await eH(o,`${e.text?`Text: ${e.text}`:""}`,d,e.labelStyle);d+=a;let l=await eH(o,`${e.risk?`Risk: ${e.risk}`:""}`,d,e.labelStyle);d+=l,await eH(o,`${e.verifyMethod?`Verification: ${e.verifyMethod}`:""}`,d,e.labelStyle)}else{let t=await eH(o,`${e.type?`Type: ${e.type}`:""}`,d,e.labelStyle);d+=t,await eH(o,`${e.docRef?`Doc Ref: ${e.docRef}`:""}`,d,e.labelStyle)}let g=(o.node()?.getBBox().width??200)+20,u=(o.node()?.getBBox().height??200)+20,f=-g/2,p=-u/2,y=tt.svg(o),m=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(m.roughness=0,m.fillStyle="solid");let x=y.rectangle(f,p,g,u,m),w=o.insert(()=>x,":first-child");if(w.attr("class","basic label-container").attr("style",n),o.selectAll(".label").each((t,e,a)=>{let l=(0,s.select)(a[e]),r=l.attr("transform"),n=0,i=0;if(r){let t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(r);t&&(n=parseFloat(t[1]),i=parseFloat(t[2]))}let h=i-u/2,o=f+10;(0===e||1===e)&&(o=n),l.attr("transform",`translate(${o}, ${h+20})`)}),d>l+c+20){let t=y.line(f,p+l+c+20,f+g,p+l+c+20,m);o.insert(()=>t).attr("style",n)}return tl(e,w),e.intersect=function(t){return th(e,t)},o}async function eH(t,e,a){let i,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(""===e)return 0;let o=t.insert("g").attr("class","label").attr("style",h),d=(0,n.getConfig2)(),c=d.htmlLabels??!0,g=await (0,l.createText)(o,(0,n.sanitizeText2)((0,r.decodeEntities)(e)),{width:(0,r.calculateTextWidth)(e,d)+50,classes:"markdown-node-label",useHtmlLabels:c,style:h},d);if(c){let t=g.children[0],e=(0,s.select)(g);i=t.getBoundingClientRect(),e.attr("width",i.width),e.attr("height",i.height)}else{for(let t of g.children[0].children)t.textContent=t.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),h&&t.setAttribute("style",h);i=g.getBBox(),i.height+=6}return o.attr("transform",`translate(${-i.width/2},${-i.height/2+a})`),i.height}(0,i.__name)(eN,"tiltedCylinder"),(0,i.__name)(eA,"trapezoid"),(0,i.__name)(eP,"trapezoidalPentagon"),(0,i.__name)(eO,"triangle"),(0,i.__name)(eB,"waveEdgedRectangle"),(0,i.__name)(eL,"waveRectangle"),(0,i.__name)(eT,"windowPane"),(0,i.__name)(eR,"erBox"),(0,i.__name)(eI,"addText"),(0,i.__name)(eW,"textHelper"),(0,i.__name)(eE,"addText"),(0,i.__name)(ez,"classBox"),(0,i.__name)(eq,"requirementBox"),(0,i.__name)(eH,"addText");var ej=(0,i.__name)(t=>{switch(t){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function eF(t,e,l){let r,n,i,s,{config:h}=l,{labelStyles:o,nodeStyles:d}=(0,a.styles2String)(e);e.labelStyle=o||"";let c=e.width;e.width=(e.width??200)-10;let{shapeSvg:g,bbox:u,label:f}=await te(t,e,tr(e)),p=e.padding||10,y="";"ticket"in e&&e.ticket&&h?.kanban?.ticketBaseUrl&&(y=h?.kanban?.ticketBaseUrl.replace("#TICKET#",e.ticket),r=g.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",y).attr("target","_blank"));let m={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1};r?{label:n,bbox:i}=await ta(r,"ticket"in e&&e.ticket||"",m):{label:n,bbox:i}=await ta(g,"ticket"in e&&e.ticket||"",m);let{label:x,bbox:w}=await ta(g,"assigned"in e&&e.assigned||"",m);e.width=c;let b=e?.width||0,$=Math.max(i.height,w.height)/2,k=Math.max(u.height+20,e?.height||0)+$,M=-b/2,S=-k/2;f.attr("transform","translate("+(p-b/2)+", "+(-$-u.height/2)+")"),n.attr("transform","translate("+(p-b/2)+", "+(-$+u.height/2)+")"),x.attr("transform","translate("+(p+b/2-w.width-20)+", "+(-$+u.height/2)+")");let{rx:v,ry:_}=e,{cssStyles:D}=e;if("handDrawn"===e.look){let t=tt.svg(g),l=(0,a.userNodeOverrides)(e,{}),r=v||_?t.path(tg(M,S,b,k,v||0),l):t.rectangle(M,S,b,k,l);(s=g.insert(()=>r,":first-child")).attr("class","basic label-container").attr("style",D||null)}else{(s=g.insert("rect",":first-child")).attr("class","basic label-container __APA__").attr("style",d).attr("rx",v??5).attr("ry",_??5).attr("x",M).attr("y",S).attr("width",b).attr("height",k);let t="priority"in e&&e.priority;if(t){let e=g.append("line"),a=M+2,l=S+Math.floor((v??0)/2),r=S+k-Math.floor((v??0)/2);e.attr("x1",a).attr("y1",l).attr("x2",a).attr("y2",r).attr("stroke-width","4").attr("stroke",ej(t))}}return tl(e,s),e.height=k,e.intersect=function(t){return th(e,t)},g}async function eG(t,e){let l,{labelStyles:n,nodeStyles:s}=(0,a.styles2String)(e);e.labelStyle=n;let{shapeSvg:h,bbox:o,halfPadding:d,label:c}=await te(t,e,tr(e)),g=o.width+10*d,u=o.height+8*d,f=.15*g,{cssStyles:p}=e,y=o.width+20,m=o.height+20,x=Math.max(g,y),w=Math.max(u,m);c.attr("transform",`translate(${-o.width/2}, ${-o.height/2})`);let b=`M0 0 
    a${f},${f} 1 0,0 ${.25*x},${-1*w*.1}
    a${f},${f} 1 0,0 ${.25*x},0
    a${f},${f} 1 0,0 ${.25*x},0
    a${f},${f} 1 0,0 ${.25*x},${.1*w}

    a${f},${f} 1 0,0 ${.15*x},${.33*w}
    a${.8*f},${.8*f} 1 0,0 0,${.34*w}
    a${f},${f} 1 0,0 ${-1*x*.15},${.33*w}

    a${f},${f} 1 0,0 ${-1*x*.25},${.15*w}
    a${f},${f} 1 0,0 ${-1*x*.25},0
    a${f},${f} 1 0,0 ${-1*x*.25},0
    a${f},${f} 1 0,0 ${-1*x*.25},${-1*w*.15}

    a${f},${f} 1 0,0 ${-1*x*.1},${-1*w*.33}
    a${.8*f},${.8*f} 1 0,0 0,${-1*w*.34}
    a${f},${f} 1 0,0 ${.1*x},${-1*w*.33}
  H0 V0 Z`;if("handDrawn"===e.look){let t=tt.svg(h),n=(0,a.userNodeOverrides)(e,{}),i=t.path(b,n);(l=h.insert(()=>i,":first-child")).attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(p))}else l=h.insert("path",":first-child").attr("class","basic label-container").attr("style",s).attr("d",b);return l.attr("transform",`translate(${-x/2}, ${-w/2})`),tl(e,l),e.calcIntersect=function(t,e){return th(t,e)},e.intersect=function(t){return i.log.info("Bang intersect",e,t),th(e,t)},h}async function eV(t,e){let l,{labelStyles:n,nodeStyles:s}=(0,a.styles2String)(e);e.labelStyle=n;let{shapeSvg:h,bbox:o,halfPadding:d,label:c}=await te(t,e,tr(e)),g=o.width+2*d,u=o.height+2*d,f=.15*g,p=.25*g,y=.35*g,m=.2*g,{cssStyles:x}=e,w=`M0 0 
    a${f},${f} 0 0,1 ${.25*g},${-1*g*.1}
    a${y},${y} 1 0,1 ${.4*g},${-1*g*.1}
    a${p},${p} 1 0,1 ${.35*g},${.2*g}

    a${f},${f} 1 0,1 ${.15*g},${.35*u}
    a${m},${m} 1 0,1 ${-1*g*.15},${.65*u}

    a${p},${f} 1 0,1 ${-1*g*.25},${.15*g}
    a${y},${y} 1 0,1 ${-1*g*.5},0
    a${f},${f} 1 0,1 ${-1*g*.25},${-1*g*.15}

    a${f},${f} 1 0,1 ${-1*g*.1},${-1*u*.35}
    a${m},${m} 1 0,1 ${.1*g},${-1*u*.65}
  H0 V0 Z`;if("handDrawn"===e.look){let t=tt.svg(h),n=(0,a.userNodeOverrides)(e,{}),i=t.path(w,n);(l=h.insert(()=>i,":first-child")).attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(x))}else l=h.insert("path",":first-child").attr("class","basic label-container").attr("style",s).attr("d",w);return c.attr("transform",`translate(${-o.width/2}, ${-o.height/2})`),l.attr("transform",`translate(${-g/2}, ${-u/2})`),tl(e,l),e.calcIntersect=function(t,e){return th(t,e)},e.intersect=function(t){return i.log.info("Cloud intersect",e,t),th(e,t)},h}async function eU(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:i,halfPadding:s,label:h}=await te(t,e,tr(e)),o=i.width+8*s,d=i.height+2*s,c=`
    M${-o/2} ${d/2-5}
    v${-d+10}
    q0,-5 5,-5
    h${o-10}
    q5,0 5,5
    v${d-10}
    q0,5 -5,5
    h${-o+10}
    q-5,0 -5,-5
    Z
  `,g=n.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+e.type).attr("style",r).attr("d",c);return n.append("line").attr("class","node-line-").attr("x1",-o/2).attr("y1",d/2).attr("x2",o/2).attr("y2",d/2),h.attr("transform",`translate(${-i.width/2}, ${-i.height/2})`),n.append(()=>h.node()),tl(e,g),e.calcIntersect=function(t,e){return th(t,e)},e.intersect=function(t){return th(e,t)},n}async function eZ(t,e){let a={padding:e.padding??0};return tO(t,e,a)}(0,i.__name)(eF,"kanbanItem"),(0,i.__name)(eG,"bang"),(0,i.__name)(eV,"cloud"),(0,i.__name)(eU,"defaultMindmapNode"),(0,i.__name)(eZ,"mindmapCircle");var eX=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:em},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:ef},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:ex},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:ek},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:tG},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:tO},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:eG},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:eV},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:ed},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:tY},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:t7},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:t9},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:eA},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:t4},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:tU},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:ev},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:tA},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:ep},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:e$},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:eb},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:tQ},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:tK},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:tR},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:tW},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:tz},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:et},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:eB},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:tJ},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:eN},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:er},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:tq},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:tV},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:eO},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:eT},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:tZ},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:eP},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:tX},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:ey},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:es},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:ei},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:tC},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:tL},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:eS},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:eM},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:eL},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:ec},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:en}],eQ=(0,i.__name)(()=>Object.fromEntries([...Object.entries({state:ew,choice:tP,note:eh,rectWithTitle:eg,labelRect:t6,iconSquare:t5,iconCircle:t2,icon:t0,iconRounded:t1,imageSquare:t3,anchor:t_,kanbanItem:eF,mindmapCircle:eZ,defaultMindmapNode:eU,classBox:ez,erBox:eR,requirementBox:eq}),...eX.flatMap(t=>[t.shortName,..."aliases"in t?t.aliases:[],..."internalAliases"in t?t.internalAliases:[]].map(e=>[e,t.handler]))]),"generateShapeMap")();function eJ(t){return t in eQ}(0,i.__name)(eJ,"isValidShape");var eY=new Map;async function eK(t,e,a){let l,r;"rect"===e.shape&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");let n=e.shape?eQ[e.shape]:void 0;if(!n)throw Error(`No such shape: ${e.shape}. Please check your syntax.`);if(e.link){let i;"sandbox"===a.config.securityLevel?i="_top":e.linkTarget&&(i=e.linkTarget||"_blank"),l=t.insert("svg:a").attr("xlink:href",e.link).attr("target",i??null),r=await n(l,e,a)}else l=r=await n(t,e,a);return e.tooltip&&r.attr("title",e.tooltip),eY.set(e.id,l),e.haveCallback&&l.attr("class",l.attr("class")+" clickable"),l}(0,i.__name)(eK,"insertNode");var e0=(0,i.__name)((t,e)=>{eY.set(e.id,t)},"setNodeElem"),e2=(0,i.__name)(()=>{eY.clear()},"clear"),e1=(0,i.__name)(t=>{let e=eY.get(t.id);i.log.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");let a=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+a-t.width/2)+", "+(t.y-t.height/2-8)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),a},"positionNode");t.s(["clear",()=>tb,"clear2",()=>e2,"createLabel_default",()=>tc,"insertCluster",()=>tw,"insertNode",()=>eK,"isValidShape",()=>eJ,"labelHelper",()=>te,"positionNode",()=>e1,"setNodeElem",()=>e0,"updateNodeBounds",()=>tl],64856)}]);