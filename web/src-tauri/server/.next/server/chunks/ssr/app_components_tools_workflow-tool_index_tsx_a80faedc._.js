module.exports=[743904,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(494261),e=a.i(57843);a.i(752298);var f=a.i(693025),g=a.i(355968),h=a.i(909795),i=a.i(504612),j=a.i(658682),k=a.i(816134),l=a.i(146172),m=a.i(114715),n=a.i(483664),o=a.i(949783),p=a.i(111089);a.i(955696);var q=a.i(2496),r=a.i(940272),s=a.i(527344);let t=({show:a,onConfirm:d,onClose:e})=>{let{t:g}=(0,f.useTranslation)();return(0,b.jsxs)(r.default,{className:(0,s.cn)("w-[600px] max-w-[600px] p-8"),isShow:a,onClose:p.noop,children:[(0,b.jsx)("div",{className:"absolute right-4 top-4 cursor-pointer p-2",onClick:e,children:(0,b.jsx)(c.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-xl border-[0.5px] border-divider-regular bg-background-section p-3 shadow-xl",children:(0,b.jsx)(q.AlertTriangle,{className:"h-6 w-6 text-[rgb(247,144,9)]"})}),(0,b.jsx)("div",{className:"relative mt-3 text-xl font-semibold leading-[30px] text-text-primary",children:g("createTool.confirmTitle",{ns:"tools"})}),(0,b.jsx)("div",{className:"my-1 text-sm leading-5 text-text-tertiary",children:g("createTool.confirmTip",{ns:"tools"})}),(0,b.jsx)("div",{className:"flex items-center justify-end pt-6",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(h.default,{className:"mr-2",onClick:e,children:g("operation.cancel",{ns:"common"})}),(0,b.jsx)(h.default,{variant:"warning",onClick:d,children:g("operation.confirm",{ns:"common"})})]})})]})};a.i(622666);var u=a.i(332945),v=a.i(825319);let w=({value:a,onChange:d})=>{let{t:g}=(0,f.useTranslation)(),[h,i]=(0,e.useState)(!1);return(0,b.jsx)(v.PortalToFollowElem,{open:h,onOpenChange:i,placement:"bottom-start",offset:4,children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(v.PortalToFollowElemTrigger,{onClick:()=>i(a=>!a),className:"block",children:(0,b.jsxs)("div",{className:(0,s.cn)("flex h-9 min-h-[56px] cursor-pointer items-center gap-1 bg-transparent px-3 py-2 hover:bg-background-section-burn",h&&"!bg-background-section-burn hover:bg-background-section-burn"),children:[(0,b.jsx)("div",{className:(0,s.cn)("grow truncate text-[13px] leading-[18px] text-text-secondary"),children:g("llm"===a?"createTool.toolInput.methodParameter":"createTool.toolInput.methodSetting",{ns:"tools"})}),(0,b.jsx)("div",{className:"ml-1 shrink-0 text-text-secondary opacity-60",children:(0,b.jsx)(c.RiArrowDownSLine,{className:"h-4 w-4"})})]})}),(0,b.jsx)(v.PortalToFollowElemContent,{className:"z-[1040]",children:(0,b.jsx)("div",{className:"relative w-[320px] rounded-lg border-[0.5px] border-components-panel-border bg-components-panel-bg-blur shadow-lg  backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"p-1",children:[(0,b.jsxs)("div",{className:"cursor-pointer rounded-lg py-2.5 pl-3 pr-2 hover:bg-components-panel-on-panel-item-bg-hover",onClick:()=>d("llm"),children:[(0,b.jsxs)("div",{className:"item-center flex gap-1",children:[(0,b.jsx)("div",{className:"h-4 w-4 shrink-0",children:"llm"===a&&(0,b.jsx)(u.Check,{className:"h-4 w-4 shrink-0 text-text-accent"})}),(0,b.jsx)("div",{className:"text-[13px] font-medium leading-[18px] text-text-secondary",children:g("createTool.toolInput.methodParameter",{ns:"tools"})})]}),(0,b.jsx)("div",{className:"pl-5 text-[13px] leading-[18px] text-text-tertiary",children:g("createTool.toolInput.methodParameterTip",{ns:"tools"})})]}),(0,b.jsxs)("div",{className:"cursor-pointer rounded-lg py-2.5 pl-3 pr-2 hover:bg-components-panel-on-panel-item-bg-hover",onClick:()=>d("form"),children:[(0,b.jsxs)("div",{className:"item-center flex gap-1",children:[(0,b.jsx)("div",{className:"h-4 w-4 shrink-0",children:"form"===a&&(0,b.jsx)(u.Check,{className:"h-4 w-4 shrink-0 text-text-accent"})}),(0,b.jsx)("div",{className:"text-[13px] font-medium leading-[18px] text-text-secondary",children:g("createTool.toolInput.methodSetting",{ns:"tools"})})]}),(0,b.jsx)("div",{className:"pl-5 text-[13px] leading-[18px] text-text-tertiary",children:g("createTool.toolInput.methodSettingTip",{ns:"tools"})})]})]})})})]})})};var x=a.i(735310);let y=new Set(Object.values(x.VarType)),z=e.memo(({isAdd:a,payload:p,onHide:q,onRemove:r,onSave:u,onCreate:v})=>{let{t:z}=(0,f.useTranslation)(),[A,B]=(0,e.useState)(!1),[C,D]=(0,e.useState)(p.icon),[E,F]=(0,e.useState)(p.label),[G,H]=(0,e.useState)(p.name),[I,J]=(0,e.useState)(p.description),[K,L]=(0,e.useState)(p.parameters),M=p.outputParameters,N=p.tool?.output_schema,O=(0,e.useMemo)(()=>Array.isArray(M)?M:N?.properties?Object.entries(N.properties).map(([a,b])=>({name:a,description:b.description,type:(a=>{if(a)return y.has(a)?a:void 0})(b.type)})):[],[M,N]),P=[{name:"text",description:z("nodes.tool.outputVars.text",{ns:"workflow"}),type:x.VarType.string,reserved:!0},{name:"files",description:z("nodes.tool.outputVars.files.title",{ns:"workflow"}),type:x.VarType.arrayFile,reserved:!0},{name:"json",description:z("nodes.tool.outputVars.json",{ns:"workflow"}),type:x.VarType.arrayObject,reserved:!0}],Q=(a,b,c)=>{L((0,d.produce)(K,d=>{"description"===a?d[c].description=b:d[c].form=b}))},[R,S]=(0,e.useState)(p.labels),[T,U]=(0,e.useState)(p.privacy_policy),[V,W]=(0,e.useState)(!1),X=a=>""===a||/^\w+$/.test(a),Y=()=>{let b="";if(E||(b=z("errorMsg.fieldRequired",{ns:"common",field:z("createTool.name",{ns:"tools"})})),G||(b=z("errorMsg.fieldRequired",{ns:"common",field:z("createTool.nameForToolCall",{ns:"tools"})})),X(G)||(b=z("createTool.nameForToolCall",{ns:"tools"})+z("createTool.nameForToolCallTip",{ns:"tools"})),b)return void m.default.notify({type:"error",message:b});let c={name:G,description:I,icon:C,label:E,parameters:K.map(a=>({name:a.name,description:a.description,form:a.form})),labels:R,privacy_policy:T};a?v?.({...c,workflow_app_id:p.workflow_app_id}):u?.({...c,workflow_tool_id:p.workflow_tool_id})};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.default,{isShow:!0,onHide:q,title:z("common.workflowAsTool",{ns:"workflow"}),panelClassName:"mt-2 !w-[640px]",maxWidthClassName:"!max-w-[640px]",height:"calc(100vh - 16px)",headerClassName:"!border-b-divider",body:(0,b.jsxs)("div",{className:"flex h-full flex-col",children:[(0,b.jsxs)("div",{className:"h-0 grow space-y-4 overflow-y-auto px-6 py-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"system-sm-medium py-2 text-text-primary",children:[z("createTool.name",{ns:"tools"})," ",(0,b.jsx)("span",{className:"ml-1 text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsx)(g.default,{size:"large",onClick:()=>{B(!0)},className:"cursor-pointer",iconType:"emoji",icon:C.content,background:C.background}),(0,b.jsx)(k.default,{className:"h-10 grow",placeholder:z("createTool.toolNamePlaceHolder",{ns:"tools"}),value:E,onChange:a=>F(a.target.value)})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"system-sm-medium flex items-center py-2 text-text-primary",children:[z("createTool.nameForToolCall",{ns:"tools"})," ",(0,b.jsx)("span",{className:"ml-1 text-red-500",children:"*"}),(0,b.jsx)(n.default,{popupContent:(0,b.jsx)("div",{className:"w-[180px]",children:z("createTool.nameForToolCallPlaceHolder",{ns:"tools"})})})]}),(0,b.jsx)(k.default,{className:"h-10",placeholder:z("createTool.nameForToolCallPlaceHolder",{ns:"tools"}),value:G,onChange:a=>H(a.target.value)}),!X(G)&&(0,b.jsx)("div",{className:"text-xs leading-[18px] text-red-500",children:z("createTool.nameForToolCallTip",{ns:"tools"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"system-sm-medium py-2 text-text-primary",children:z("createTool.description",{ns:"tools"})}),(0,b.jsx)(l.default,{placeholder:z("createTool.descriptionPlaceholder",{ns:"tools"})||"",value:I,onChange:a=>J(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"system-sm-medium py-2 text-text-primary",children:z("createTool.toolInput.title",{ns:"tools"})}),(0,b.jsx)("div",{className:"w-full overflow-x-auto rounded-lg border border-divider-regular",children:(0,b.jsxs)("table",{className:"w-full text-xs font-normal leading-[18px] text-text-secondary",children:[(0,b.jsx)("thead",{className:"uppercase text-text-tertiary",children:(0,b.jsxs)("tr",{className:"border-b border-divider-regular",children:[(0,b.jsx)("th",{className:"w-[156px] p-2 pl-3 font-medium",children:z("createTool.toolInput.name",{ns:"tools"})}),(0,b.jsx)("th",{className:"w-[102px] p-2 pl-3 font-medium",children:z("createTool.toolInput.method",{ns:"tools"})}),(0,b.jsx)("th",{className:"p-2 pl-3 font-medium",children:z("createTool.toolInput.description",{ns:"tools"})})]})}),(0,b.jsx)("tbody",{children:K.map((a,c)=>(0,b.jsxs)("tr",{className:"border-b border-divider-regular last:border-0",children:[(0,b.jsx)("td",{className:"max-w-[156px] p-2 pl-3",children:(0,b.jsxs)("div",{className:"text-[13px] leading-[18px]",children:[(0,b.jsxs)("div",{title:a.name,className:"flex",children:[(0,b.jsx)("span",{className:"truncate font-medium text-text-primary",children:a.name}),(0,b.jsx)("span",{className:"shrink-0 pl-1 text-xs leading-[18px] text-[#ec4a0a]",children:a.required?z("createTool.toolInput.required",{ns:"tools"}):""})]}),(0,b.jsx)("div",{className:"text-text-tertiary",children:a.type})]})}),(0,b.jsxs)("td",{children:["__image"===a.name&&(0,b.jsx)("div",{className:(0,s.cn)("flex h-9 min-h-[56px] cursor-default items-center gap-1 bg-transparent px-3 py-2"),children:(0,b.jsx)("div",{className:(0,s.cn)("grow truncate text-[13px] leading-[18px] text-text-secondary"),children:z("createTool.toolInput.methodParameter",{ns:"tools"})})}),"__image"!==a.name&&(0,b.jsx)(w,{value:a.form,onChange:a=>Q("form",a,c)})]}),(0,b.jsx)("td",{className:"w-[236px] p-2 pl-3 text-text-tertiary",children:(0,b.jsx)("input",{type:"text",className:"w-full appearance-none bg-transparent text-[13px] font-normal leading-[18px] text-text-secondary caret-primary-600 outline-none placeholder:text-text-quaternary",placeholder:z("createTool.toolInput.descriptionPlaceholder",{ns:"tools"}),value:a.description,onChange:a=>Q("description",a.target.value,c)})})]},c))})]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"system-sm-medium py-2 text-text-primary",children:z("createTool.toolOutput.title",{ns:"tools"})}),(0,b.jsx)("div",{className:"w-full overflow-x-auto rounded-lg border border-divider-regular",children:(0,b.jsxs)("table",{className:"w-full text-xs font-normal leading-[18px] text-text-secondary",children:[(0,b.jsx)("thead",{className:"uppercase text-text-tertiary",children:(0,b.jsxs)("tr",{className:"border-b border-divider-regular",children:[(0,b.jsx)("th",{className:"w-[156px] p-2 pl-3 font-medium",children:z("createTool.name",{ns:"tools"})}),(0,b.jsx)("th",{className:"p-2 pl-3 font-medium",children:z("createTool.toolOutput.description",{ns:"tools"})})]})}),(0,b.jsx)("tbody",{children:[...P,...O].map((a,d)=>{let e;return(0,b.jsxs)("tr",{className:"border-b border-divider-regular last:border-0",children:[(0,b.jsx)("td",{className:"max-w-[156px] p-2 pl-3",children:(0,b.jsxs)("div",{className:"text-[13px] leading-[18px]",children:[(0,b.jsxs)("div",{title:a.name,className:"flex items-center",children:[(0,b.jsx)("span",{className:"truncate font-medium text-text-primary",children:a.name}),(0,b.jsx)("span",{className:"shrink-0 pl-1 text-xs leading-[18px] text-[#ec4a0a]",children:a.reserved?z("createTool.toolOutput.reserved",{ns:"tools"}):""}),!a.reserved&&(e=a.name,P.find(a=>a.name===e))?(0,b.jsx)(n.default,{popupContent:(0,b.jsx)("div",{className:"w-[180px]",children:z("createTool.toolOutput.reservedParameterDuplicateTip",{ns:"tools"})}),children:(0,b.jsx)(c.RiErrorWarningLine,{className:"h-3 w-3 text-text-warning-secondary"})}):null]}),(0,b.jsx)("div",{className:"text-text-tertiary",children:a.type})]})}),(0,b.jsx)("td",{className:"w-[236px] p-2 pl-3 text-text-tertiary",children:(0,b.jsx)("span",{className:"text-[13px] font-normal leading-[18px] text-text-secondary",children:a.description})})]},d)})})]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"system-sm-medium py-2 text-text-primary",children:z("createTool.toolInput.label",{ns:"tools"})}),(0,b.jsx)(o.default,{value:R,onChange:a=>{S(a)}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"system-sm-medium py-2 text-text-primary",children:z("createTool.privacyPolicy",{ns:"tools"})}),(0,b.jsx)(k.default,{className:"h-10",value:T,onChange:a=>U(a.target.value),placeholder:z("createTool.privacyPolicyPlaceholder",{ns:"tools"})||""})]})]}),(0,b.jsxs)("div",{className:(0,s.cn)(!a&&r?"justify-between":"justify-end","mt-2 flex shrink-0 rounded-b-[10px] border-t border-divider-regular bg-background-section-burn px-6 py-4"),children:[!a&&r&&(0,b.jsx)(h.default,{variant:"warning",onClick:r,children:z("operation.delete",{ns:"common"})}),(0,b.jsxs)("div",{className:"flex space-x-2 ",children:[(0,b.jsx)(h.default,{onClick:q,children:z("operation.cancel",{ns:"common"})}),(0,b.jsx)(h.default,{variant:"primary",onClick:()=>{a?Y():W(!0)},children:z("operation.save",{ns:"common"})})]})]})]}),isShowMask:!0,clickOutsideNotOpen:!0}),A&&(0,b.jsx)(j.default,{onSelect:(a,b)=>{D({content:a,background:b}),B(!1)},onClose:()=>{B(!1)}}),V&&(0,b.jsx)(t,{show:V,onClose:()=>W(!1),onConfirm:Y})]})});a.s(["default",0,z],743904)}];

//# sourceMappingURL=app_components_tools_workflow-tool_index_tsx_a80faedc._.js.map