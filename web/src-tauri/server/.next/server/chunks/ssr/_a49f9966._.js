module.exports=[501127,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(57843),e=a.i(175809),f=a.i(825319),g=a.i(527344);a.s(["default",0,({items:a,onSelect:h,secondItems:i,renderTrigger:j,triggerProps:k,popupClassName:l,itemClassName:m,secondItemClassName:n})=>{let[o,p]=(0,d.useState)(!1),q=a=>{p(!1),h(a)};return(0,b.jsxs)(f.PortalToFollowElem,{open:o,onOpenChange:p,placement:"bottom-end",children:[(0,b.jsx)(f.PortalToFollowElemTrigger,{onClick:()=>p(a=>!a),children:j?j(o):(0,b.jsx)(e.default,{...k,className:(0,g.cn)(o&&"bg-divider-regular",k?.className),children:(0,b.jsx)(c.RiMoreFill,{className:"h-4 w-4 text-text-tertiary"})})}),(0,b.jsx)(f.PortalToFollowElemContent,{className:l,children:(0,b.jsxs)("div",{className:"rounded-lg border-[0.5px] border-components-panel-border bg-components-panel-bg text-sm text-text-secondary shadow-lg",children:[!!a.length&&(0,b.jsx)("div",{className:"p-1",children:a.map(a=>(0,b.jsx)("div",{className:(0,g.cn)("flex h-8 cursor-pointer items-center rounded-lg px-3 hover:bg-components-panel-on-panel-item-bg-hover",m),onClick:()=>q(a),children:a.text},a.value))}),!!a.length&&!!i?.length&&(0,b.jsx)("div",{className:"h-px bg-divider-regular"}),!!i?.length&&(0,b.jsx)("div",{className:"p-1",children:i.map(a=>(0,b.jsx)("div",{className:(0,g.cn)("flex h-8 cursor-pointer items-center rounded-lg px-3 hover:bg-components-panel-on-panel-item-bg-hover",n),onClick:()=>q(a),children:a.text},a.value))})]})})]})}])},820051,869758,a=>{"use strict";var b=a.i(848636),c=a.i(528698),d=a.i(986431);let e=new Set(["all",...d.DisplayStatusList.map(a=>a.toLowerCase())]),f={active:"available"},g={enabled:"available"},h=a=>{if(!a)return"all";let b=a.toLowerCase();return f[b]?f[b]:e.has(b)?b:"all"},i=a=>{let b=h(a);return"all"===b?"all":g[b]||b};a.s(["normalizeStatusForQuery",0,i,"sanitizeStatusValue",0,h],869758);var j=a.i(41511),k=a.i(218257),l=a.i(425282);let m="knowledge/document",n=[m,"documentList"],o=[m,"autoDisabledDocument"],p=a=>(Array.isArray(a)?a:[a]).map(a=>`document_id=${a}`).join("&"),q=a=>(0,b.useMutation)({mutationFn:({datasetId:b,documentIds:c,documentId:d})=>(0,j.patch)(`/datasets/${b}/documents/status/${a}/batch?${p(d||c)}`)}),r=[m,"documentDetail","withoutMetaData"];a.s(["useAutoDisabledDocuments",0,a=>(0,c.useQuery)({queryKey:[...o,a],queryFn:()=>(0,j.get)(`/datasets/${a}/auto-disable-logs`)}),"useDocumentArchive",0,()=>q(d.DocumentActionType.archive),"useDocumentBatchRetryIndex",0,()=>(0,b.useMutation)({mutationFn:({datasetId:a,documentIds:b})=>(0,j.post)(`/datasets/${a}/retry`,{body:{document_ids:b}})}),"useDocumentDelete",0,()=>(0,b.useMutation)({mutationFn:({datasetId:a,documentIds:b,documentId:c})=>(0,j.del)(`/datasets/${a}/documents?${p(c||b)}`)}),"useDocumentDetail",0,a=>{let{datasetId:b,documentId:d,params:e}=a;return(0,c.useQuery)({queryKey:[...r,"withoutMetaData",b,d,e],queryFn:()=>(0,j.get)(`/datasets/${b}/documents/${d}`,{params:e})})},"useDocumentDisable",0,()=>q(d.DocumentActionType.disable),"useDocumentDownload",0,()=>(0,b.useMutation)({mutationFn:({datasetId:a,documentId:b})=>{if(!a||!b)throw Error("datasetId and documentId are required");return(0,k.fetchDocumentDownloadUrl)({datasetId:a,documentId:b})}}),"useDocumentDownloadZip",0,()=>(0,b.useMutation)({mutationFn:({datasetId:a,documentIds:b})=>{if(!a||!b?.length)throw Error("datasetId and documentIds are required");return(0,k.downloadDocumentsZip)({datasetId:a,documentIds:b})}}),"useDocumentEnable",0,()=>q(d.DocumentActionType.enable),"useDocumentList",0,a=>{let{query:b,datasetId:d,refetchInterval:e}=a,{keyword:f,page:g,limit:h,sort:k,status:l}=b,m=i(l),o={keyword:f,page:g,limit:h};return k&&(o.sort=k),m&&"all"!==m&&(o.status=m),(0,c.useQuery)({queryKey:[...n,d,o],queryFn:()=>(0,j.get)(`/datasets/${d}/documents`,{params:o}),refetchInterval:e})},"useDocumentListKey",0,n,"useDocumentMetadata",0,a=>{let{datasetId:b,documentId:d,params:e}=a;return(0,c.useQuery)({queryKey:[...r,"onlyMetaData",b,d,e],queryFn:()=>(0,j.get)(`/datasets/${b}/documents/${d}`,{params:e})})},"useDocumentPause",0,()=>(0,b.useMutation)({mutationFn:({datasetId:a,documentId:b})=>{if(!a||!b)throw Error("datasetId and documentId are required");return(0,k.pauseDocIndexing)({datasetId:a,documentId:b})}}),"useDocumentResume",0,()=>(0,b.useMutation)({mutationFn:({datasetId:a,documentId:b})=>{if(!a||!b)throw Error("datasetId and documentId are required");return(0,k.resumeDocIndexing)({datasetId:a,documentId:b})}}),"useDocumentSummary",0,()=>(0,b.useMutation)({mutationFn:({datasetId:a,documentIds:b,documentId:c})=>(0,j.post)(`/datasets/${a}/documents/generate-summary`,{body:{document_list:c?[c]:b}})}),"useDocumentUnArchive",0,()=>q(d.DocumentActionType.unArchive),"useInvalidDisabledDocument",0,()=>(0,l.useInvalid)(o),"useInvalidDocumentDetail",0,()=>(0,l.useInvalid)(r),"useInvalidDocumentList",0,a=>(0,l.useInvalid)(a?[...n,a]:n),"useSyncDocument",0,()=>(0,b.useMutation)({mutationFn:({datasetId:a,documentId:b})=>(0,j.get)(`/datasets/${a}/documents/${b}/notion/sync`)}),"useSyncWebsite",0,()=>(0,b.useMutation)({mutationFn:({datasetId:a,documentId:b})=>(0,j.get)(`/datasets/${a}/documents/${b}/website-sync`)})],820051)},83967,a=>{"use strict";var b=a.i(608061),c=a.i(57843);a.i(752298);var d=a.i(693025),e=a.i(483664),f=a.i(527344),g=a.i(749993),h=a.i(259768);let i=c.memo(({className:a,Icon:c,name:i,tooltip:j,usage:k,total:l,unit:m,unitPosition:n="suffix",resetHint:o,resetInDays:p,hideIcon:q=!1,storageMode:r=!1,storageThreshold:s=50,storageTooltip:t,isSandboxPlan:u=!1})=>{let{t:v}=(0,d.useTranslation)(),w=r&&k<s,x=r&&u&&k>=s,y=k/l*100,z=l===g.NUM_INFINITE,A=z?v("plansCommon.unlimited",{ns:"billing"}):l;!z&&m&&"inline"===n&&(A=`${l}${m}`);let B=!!m&&!z&&"suffix"===n,C=o??("number"==typeof p?v("usagePage.resetsIn",{ns:"billing",count:p}):void 0),D=a=>r&&t?(0,b.jsx)(e.default,{popupContent:(0,b.jsx)("div",{className:"w-[200px]",children:t}),asChild:!1,children:(0,b.jsx)("div",{className:"cursor-default",children:a})}):a;return(0,b.jsxs)("div",{className:(0,f.cn)("flex flex-col gap-2 rounded-xl bg-components-panel-bg p-4",a),children:[!q&&c&&(0,b.jsx)(c,{className:"h-4 w-4 text-text-tertiary"}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("div",{className:"system-xs-medium text-text-tertiary",children:i}),j&&(0,b.jsx)(e.default,{popupContent:(0,b.jsx)("div",{className:"w-[180px]",children:j})})]}),(0,b.jsxs)("div",{className:"system-md-semibold flex items-center gap-1 text-text-primary",children:[D((()=>{if(r){if(x)return(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{children:s}),(0,b.jsx)("span",{className:"system-md-regular text-text-quaternary",children:"/"}),(0,b.jsxs)("span",{children:[s," ",m]})]});if(w)return(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsxs)("span",{children:["<"," ",s]}),!u&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"system-md-regular text-text-quaternary",children:"/"}),(0,b.jsx)("span",{children:A})]}),u&&(0,b.jsx)("span",{children:m})]})}return(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{children:k}),(0,b.jsx)("span",{className:"system-md-regular text-text-quaternary",children:"/"}),(0,b.jsx)("span",{children:A})]})})()),C?(0,b.jsx)("div",{className:"system-xs-regular ml-auto flex-1 text-right text-text-tertiary",children:C}):B?(0,b.jsx)("div",{className:"system-xs-medium ml-auto text-text-tertiary",children:m}):null]}),D((0,b.jsx)(h.default,{percent:w?0:y,color:x||y>=100?"bg-components-progress-error-progress":y>=80?"bg-components-progress-warning-progress":"bg-components-progress-bar-progress-solid",indeterminate:w,indeterminateFull:w&&u}))]})});a.s(["default",0,i])},779121,(a,b,c)=>{a.e,b.exports=function(a,b,c){a=a||{};var d=b.prototype,e={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function f(a,b,c,e){return d.fromToBase(a,b,c,e)}c.en.relativeTime=e,d.fromToBase=function(b,d,f,g,h){for(var i,j,k,l=f.$locale().relativeTime||e,m=a.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],n=m.length,o=0;o<n;o+=1){var p=m[o];p.d&&(i=g?c(b).diff(f,p.d,!0):f.diff(b,p.d,!0));var q=(a.rounding||Math.round)(Math.abs(i));if(k=i>0,q<=p.r||!p.r){q<=1&&o>0&&(p=m[o-1]);var r=l[p.l];h&&(q=h(""+q)),j="string"==typeof r?r.replace("%d",q):r(q,d,p.l,k);break}}if(d)return j;var s=k?l.future:l.past;return"function"==typeof s?s(j):s.replace("%s",j)},d.to=function(a,b){return f(a,b,this,!0)},d.from=function(a,b){return f(a,b,this)};var g=function(a){return a.$u?c.utc():c()};d.toNow=function(a){return this.to(g(this),a)},d.fromNow=function(a){return this.from(g(this),a)}}},204685,a=>{"use strict";var b=a.i(435133),c=a.i(779121),d=a.i(57843),e=a.i(252813),f=a.i(136403);a.i(12951),a.i(303890),a.i(659257),a.i(435125),a.i(460925),a.i(793823),a.i(336872),a.i(679858),a.i(231291),a.i(810843),a.i(201515),a.i(583301),a.i(834039),a.i(428571),a.i(40164),a.i(544460),a.i(626673),a.i(305644),a.i(84036),a.i(447712),b.default.extend(c.default),a.s(["useFormatTimeFromNow",0,()=>{let a=(0,e.useLocale)();return{formatTimeFromNow:(0,d.useCallback)(c=>{let d=f.localeMap[a]??"en";return(0,b.default)(c).locale(d).fromNow()},[a])}}])},87208,a=>{"use strict";var b=a.i(57843);a.s(["useAsyncWindowOpen",0,()=>(0,b.useCallback)(async(a,b)=>{let{immediateUrl:c,target:d="_blank",features:e,onError:f}=b??{},g=e?`${e},noopener,noreferrer`:"noopener,noreferrer";if(c){let a=window.open(c,d,g);if(!a)return void f?.(Error("Failed to open new window"));try{a.opener=null}catch{}return}let h=window.open("about:blank",d,e);if(!h)return void f?.(Error("Failed to open new window"));try{h.opener=null}catch{}try{let b=await a();if(b){h.location.href=b;return}h.close(),f?.(Error("No url resolved for new window"))}catch(a){h.close(),f?.(a instanceof Error?a:Error(String(a)))}},[])])},335913,a=>{"use strict";var b=a.i(608061),c=a.i(142261),d=a.i(57843),e=a.i(483664),f=a.i(527344);let g=(0,c.cva)([],{variants:{align:{left:"justify-start",center:"justify-center",right:"justify-end"}},defaultVariants:{align:"center"}}),h=d.memo(({className:a,title:c,onSelect:h,selected:i,disabled:j,align:k="center",tooltip:l})=>{let m=(0,d.useCallback)(()=>{i||j||h()},[h,i,j]);return(0,b.jsxs)("div",{className:(0,f.cn)("system-sm-regular flex h-8 cursor-default items-center rounded-md border border-components-option-card-option-border bg-components-option-card-option-bg px-2 text-text-secondary",!i&&!j&&"cursor-pointer hover:border-components-option-card-option-border-hover hover:bg-components-option-card-option-bg-hover hover:shadow-xs",i&&"system-sm-medium border-[1.5px] border-components-option-card-option-selected-border bg-components-option-card-option-selected-bg shadow-xs",j&&"text-text-disabled",g({align:k}),a),onClick:m,children:[(0,b.jsx)("span",{children:c}),l&&(0,b.jsx)(e.default,{popupContent:(0,b.jsx)("div",{className:"w-[240px]",children:l})})]})});a.s(["default",0,h])},413353,a=>{"use strict";var b=a.i(780442);a.s(["FileTypeIcon",()=>b.default])},962037,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(57843);a.i(752298);var e=a.i(693025),f=a.i(825319),g=a.i(527344);a.s(["default",0,({options:a,value:h,onChange:i,containerProps:j,triggerProps:k,popupProps:l,CustomTrigger:m,CustomOption:n})=>{let{t:o}=(0,e.useTranslation)(),{open:p,onOpenChange:q,placement:r,offset:s,triggerPopupSameWidth:t=!0}=j||{},{className:u}=k||{},{wrapperClassName:v,className:w,itemClassName:x}=l||{},[y,z]=(0,d.useState)(!1),A=p??y,B=(0,d.useCallback)(a=>{q?.(a),z(a)},[q]),C=a.find(a=>a.value===h),D=C?.label||o("placeholder.select",{ns:"common"});return(0,b.jsxs)(f.PortalToFollowElem,{placement:r||"bottom-start",offset:s||4,open:A,onOpenChange:B,triggerPopupSameWidth:t,children:[(0,b.jsx)(f.PortalToFollowElemTrigger,{onClick:()=>B(!A),asChild:!0,children:(0,b.jsx)("div",{className:(0,g.cn)("system-sm-regular group flex h-8 cursor-pointer items-center rounded-lg bg-components-input-bg-normal px-2 text-components-input-text-filled hover:bg-state-base-hover-alt",A&&"bg-state-base-hover-alt",u),children:m?m(C,A):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grow",title:D,children:D}),(0,b.jsx)(c.RiArrowDownSLine,{className:(0,g.cn)("h-4 w-4 shrink-0 text-text-quaternary group-hover:text-text-secondary",A&&"text-text-secondary")})]})})}),(0,b.jsx)(f.PortalToFollowElemContent,{className:(0,g.cn)("z-10",v),children:(0,b.jsx)("div",{className:(0,g.cn)("rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg-blur p-1 shadow-lg shadow-shadow-shadow-5",w),children:a.map(a=>{let d=h===a.value;return(0,b.jsx)("div",{className:(0,g.cn)("system-sm-medium flex h-8 cursor-pointer items-center rounded-lg px-2 text-text-secondary hover:bg-state-base-hover",x),title:a.label,onClick:()=>{i?.(a.value),B(!1)},children:n?n(a,d):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"mr-1 grow truncate px-1",children:a.label}),d&&(0,b.jsx)(c.RiCheckLine,{className:"h-4 w-4 shrink-0 text-text-accent"})]})},a.value)})})})]})}])},210924,a=>{"use strict";var b=a.i(441885),c=a.i(938409);let d=a=>{if(!a)return"";let b=a.split(".");return b.length<=1||""===b[0]&&2===b.length?"":b[b.length-1].toLowerCase()};a.s(["getFileExtension",0,d,"getFileType",0,a=>{let e=d(a);return"gif"===e?b.FileAppearanceTypeEnum.gif:c.FILE_EXTS.image.includes(e.toUpperCase())?b.FileAppearanceTypeEnum.image:c.FILE_EXTS.video.includes(e.toUpperCase())?b.FileAppearanceTypeEnum.video:c.FILE_EXTS.audio.includes(e.toUpperCase())?b.FileAppearanceTypeEnum.audio:"html"===e||"htm"===e||"xml"===e||"json"===e?b.FileAppearanceTypeEnum.code:"pdf"===e?b.FileAppearanceTypeEnum.pdf:"md"===e||"markdown"===e||"mdx"===e?b.FileAppearanceTypeEnum.markdown:"xlsx"===e||"xls"===e||"csv"===e?b.FileAppearanceTypeEnum.excel:"docx"===e||"doc"===e?b.FileAppearanceTypeEnum.word:"pptx"===e||"ppt"===e?b.FileAppearanceTypeEnum.ppt:c.FILE_EXTS.document.includes(e.toUpperCase())?b.FileAppearanceTypeEnum.document:b.FileAppearanceTypeEnum.custom}])},518907,715674,a=>{"use strict";var b=a.i(680904),c=a.i(818908);a.s(["generateZodSchema",0,a=>{let d={};return a.forEach(a=>{let e;switch(a.type){case c.BaseFieldType.textInput:case c.BaseFieldType.paragraph:e=b.z.string();break;case c.BaseFieldType.numberInput:e=b.z.number();break;case c.BaseFieldType.checkbox:e=b.z.boolean();break;case c.BaseFieldType.select:e=b.z.string();break;default:e=b.z.any()}a.maxLength&&[c.BaseFieldType.textInput,c.BaseFieldType.paragraph].includes(a.type)&&(e=e.max(a.maxLength,`${a.label} exceeds max length of ${a.maxLength}`)),a.min&&[c.BaseFieldType.numberInput].includes(a.type)&&(e=e.min(a.min,`${a.label} must be at least ${a.min}`)),a.max&&[c.BaseFieldType.numberInput].includes(a.type)&&(e=e.max(a.max,`${a.label} exceeds max value of ${a.max}`)),a.required?[c.BaseFieldType.textInput,c.BaseFieldType.paragraph].includes(a.type)&&(e=e.nonempty(`${a.label} is required`)):e=e.optional().nullable(),d[a.variable]=e}),b.z.object(d)}],518907);var d=a.i(57843),e=a.i(827460);a.s(["useConfigurations",0,a=>(0,d.useMemo)(()=>{let b=[];return a.forEach(a=>{b.push({type:e.VAR_TYPE_MAP[a.type],variable:a.variable,label:a.label,required:a.required,maxLength:a.max_length,options:a.options?.map(a=>({label:a,value:a})),showConditions:[],placeholder:a.placeholder,tooltip:a.tooltips,unit:a.unit,allowedFileTypes:a.allowed_file_types,allowedFileExtensions:a.allowed_file_extensions,allowedFileUploadMethods:a.allowed_file_upload_methods})}),b},[a]),"useInitialData",0,(a,b)=>(0,d.useMemo)(()=>a.reduce((a,d)=>{let f=e.VAR_TYPE_MAP[d.type],g=d.variable,h=b?.[g]||d.default_value;return[c.BaseFieldType.textInput,c.BaseFieldType.paragraph,c.BaseFieldType.select].includes(f)&&(a[g]=h??""),f===c.BaseFieldType.numberInput&&(a[g]=h??0),f===c.BaseFieldType.checkbox&&(a[g]=h??!1),[c.BaseFieldType.file,c.BaseFieldType.fileList].includes(f)&&(a[g]=h??[]),a},{}),[b,a])],715674)},306370,a=>{"use strict";var b=a.i(608061),c=a.i(53952),d=a.i(433225),e=a.i(818908);a.s(["default",0,({initialData:a,config:f})=>(0,d.withForm)({defaultValues:a,render:function({form:a}){let{type:d,label:g,placeholder:h,variable:i,tooltip:j,showConditions:k,max:l,min:m,options:n,required:o,showOptional:p,popupProps:q,allowedFileExtensions:r,allowedFileTypes:s,allowedFileUploadMethods:t,maxLength:u,unit:v}=f;return(0,c.useStore)(a.store,a=>{let b=a.values;return!k.length||k.every(a=>{let{variable:c,value:d}=a;return b[c]===d})})?d===e.BaseFieldType.textInput?(0,b.jsx)(a.AppField,{name:i,children:a=>(0,b.jsx)(a.TextField,{label:g,labelOptions:{tooltip:j,isRequired:o,showOptional:p},placeholder:h})}):d===e.BaseFieldType.paragraph?(0,b.jsx)(a.AppField,{name:i,children:a=>(0,b.jsx)(a.TextAreaField,{label:g,labelOptions:{tooltip:j,isRequired:o,showOptional:p},placeholder:h})}):d===e.BaseFieldType.numberInput?(0,b.jsx)(a.AppField,{name:i,children:a=>(0,b.jsx)(a.NumberInputField,{label:g,labelOptions:{tooltip:j,isRequired:o,showOptional:p},placeholder:h,max:l,min:m,unit:v})}):d===e.BaseFieldType.checkbox?(0,b.jsx)(a.AppField,{name:i,children:a=>(0,b.jsx)(a.CheckboxField,{label:g})}):d===e.BaseFieldType.select?(0,b.jsx)(a.AppField,{name:i,children:a=>(0,b.jsx)(a.SelectField,{label:g,labelOptions:{tooltip:j,isRequired:o,showOptional:p},options:n,popupProps:q})}):d===e.BaseFieldType.file?(0,b.jsx)(a.AppField,{name:i,children:a=>(0,b.jsx)(a.FileUploaderField,{label:g,labelOptions:{tooltip:j,isRequired:o,showOptional:p},fileConfig:{allowed_file_extensions:r,allowed_file_types:s,allowed_file_upload_methods:t,number_limits:1}})}):d===e.BaseFieldType.fileList?(0,b.jsx)(a.AppField,{name:i,children:a=>(0,b.jsx)(a.FileUploaderField,{label:g,labelOptions:{tooltip:j,isRequired:o,showOptional:p},fileConfig:{allowed_file_extensions:r,allowed_file_types:s,allowed_file_upload_methods:t,number_limits:u}})}):(0,b.jsx)(b.Fragment,{}):(0,b.jsx)(b.Fragment,{})}})])},493845,a=>{"use strict";let b=a.i(647357).default;a.s(["timezones",0,b])},415464,a=>{"use strict";var b=a.i(435133),c=a.i(127406);b.default.extend(c.default),a.s(["formatTime",0,({date:a,dateFormat:c})=>(0,b.default)(a).format(c),"getDaysUntilEndOfMonth",0,(a=(0,b.default)())=>{let c=(0,b.default)(a).startOf("day");return Math.max((0,b.default)(a).endOf("month").startOf("day").diff(c,"day"),0)},"isAfter",0,(a,c)=>(0,b.default)(a).isAfter((0,b.default)(c))])},393621,a=>{"use strict";var b=a.i(608061),c=a.i(57843);a.i(752298);var d=a.i(693025),e=a.i(527344);let f=c.memo(({code:a=404,isUnknownReason:c,unknownReason:f,className:g})=>{let{t:h}=(0,d.useTranslation)();return(0,b.jsxs)("div",{className:(0,e.cn)("flex h-screen w-screen items-center justify-center",g),children:[(0,b.jsx)("h1",{className:"mr-5 h-[50px] shrink-0 pr-5 text-[24px] font-medium leading-[50px]",style:{borderRight:"1px solid rgba(0,0,0,.3)"},children:a}),(0,b.jsx)("div",{className:"text-sm",children:f||h(c?"common.appUnknownError":"common.appUnavailable",{ns:"share"})})]})});a.s(["default",0,f])},63087,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(57843);a.i(752298);var e=a.i(693025),f=a.i(375616),g=a.i(931164),h=a.i(83967),i=a.i(751630);let j=(0,i.getPlanVectorSpaceLimitMB)(g.Plan.sandbox),k=d.memo(({className:a})=>{let d,{t:k}=(0,e.useTranslation)(),{plan:l}=(0,f.useProviderContext)(),{type:m,usage:n,total:o}=l,p=(d=(0,i.getPlanVectorSpaceLimitMB)(m))>0?d:o.vectorSpace,q=m===g.Plan.sandbox;return(0,b.jsx)(h.default,{className:a,Icon:c.RiHardDrive3Line,name:k("usagePage.vectorSpace",{ns:"billing"}),tooltip:k("usagePage.vectorSpaceTooltip",{ns:"billing"}),usage:n.vectorSpace,total:p,unit:"MB",unitPosition:"inline",storageMode:!0,storageThreshold:j,storageTooltip:k("usagePage.storageThresholdTooltip",{ns:"billing"}),isSandboxPlan:q})});a.s(["default",0,k])},661738,a=>{a.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{"clip-path":"url(#clip0_7847_32895)"},children:[{type:"element",name:"path",attributes:{d:"M10.5 2.5C10.5 3.32843 8.48528 4 6 4C3.51472 4 1.5 3.32843 1.5 2.5M10.5 2.5C10.5 1.67157 8.48528 1 6 1C3.51472 1 1.5 1.67157 1.5 2.5M10.5 2.5V9.5C10.5 10.33 8.5 11 6 11C3.5 11 1.5 10.33 1.5 9.5V2.5M10.5 6C10.5 6.83 8.5 7.5 6 7.5C3.5 7.5 1.5 6.83 1.5 6",stroke:"#667085","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},children:[]}]},{type:"element",name:"defs",attributes:{},children:[{type:"element",name:"clipPath",attributes:{id:"clip0_7847_32895"},children:[{type:"element",name:"rect",attributes:{width:"12",height:"12",fill:"white"},children:[]}]}]}]},name:"DataSet"})},893666,a=>{a.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{"clip-path":"url(#clip0_7998_4025)"},children:[{type:"element",name:"path",attributes:{d:"M6 1.125V2.375M6 9V11M2.875 6H1.125M10.625 6H9.875M9.22855 9.22855L8.875 8.875M9.33211 2.70789L8.625 3.415M2.46079 9.53921L3.875 8.125M2.56434 2.60434L3.625 3.665",stroke:"#667085","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},children:[]}]},{type:"element",name:"defs",attributes:{},children:[{type:"element",name:"clipPath",attributes:{id:"clip0_7998_4025"},children:[{type:"element",name:"rect",attributes:{width:"12",height:"12",fill:"white"},children:[]}]}]}]},name:"Loading"})},169953,a=>{a.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{"clip-path":"url(#clip0_7847_32899)"},children:[{type:"element",name:"path",attributes:{d:"M10.5 10.5L8.75005 8.75M10 5.75C10 8.09721 8.09721 10 5.75 10C3.40279 10 1.5 8.09721 1.5 5.75C1.5 3.40279 3.40279 1.5 5.75 1.5C8.09721 1.5 10 3.40279 10 5.75Z",stroke:"#667085","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},children:[]}]},{type:"element",name:"defs",attributes:{},children:[{type:"element",name:"clipPath",attributes:{id:"clip0_7847_32899"},children:[{type:"element",name:"rect",attributes:{width:"12",height:"12",fill:"white"},children:[]}]}]}]},name:"Search"})},246,a=>{a.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"path",attributes:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 6C4 5.72386 4.22386 5.5 4.5 5.5L10.5 5.5C10.7761 5.5 11 5.72386 11 6C11 6.27614 10.7761 6.5 10.5 6.5L4.5 6.5C4.22386 6.5 4 6.27614 4 6Z",fill:"#667085"},children:[]},{type:"element",name:"path",attributes:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 3C4 2.72386 4.22386 2.5 4.5 2.5L10.5 2.5C10.7761 2.5 11 2.72386 11 3C11 3.27614 10.7761 3.5 10.5 3.5L4.5 3.5C4.22386 3.5 4 3.27614 4 3Z",fill:"#667085"},children:[]},{type:"element",name:"path",attributes:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 9C4 8.72386 4.22386 8.5 4.5 8.5L10.5 8.5C10.7761 8.5 11 8.72386 11 9C11 9.27614 10.7761 9.5 10.5 9.5L4.5 9.5C4.22386 9.5 4 9.27614 4 9Z",fill:"#667085"},children:[]},{type:"element",name:"path",attributes:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1 6C1 5.44772 1.44772 5 2 5C2.55228 5 3 5.44772 3 6C3 6.55228 2.55228 7 2 7C1.44772 7 1 6.55228 1 6Z",fill:"#667085"},children:[]},{type:"element",name:"path",attributes:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1 3C1 2.44772 1.44772 2 2 2C2.55228 2 3 2.44772 3 3C3 3.55228 2.55228 4 2 4C1.44772 4 1 3.55228 1 3Z",fill:"#667085"},children:[]},{type:"element",name:"path",attributes:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1 9C1 8.44772 1.44772 8 2 8C2.55228 8 3 8.44772 3 9C3 9.55228 2.55228 10 2 10C1.44772 10 1 9.55228 1 9Z",fill:"#667085"},children:[]}]},name:"ThoughtList"})},380526,a=>{a.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{"clip-path":"url(#clip0_7847_32887)"},children:[{type:"element",name:"path",attributes:{d:"M4.5 1.75V1M2.53033 2.53033L2 2M2.53033 6.5L2 7.03033M6.5 2.53033L7.03033 2M1.75 4.5H1M7.93224 8.09479L6.68637 10.4085C6.54404 10.6728 6.47287 10.805 6.38725 10.8384C6.31295 10.8674 6.22926 10.8592 6.16199 10.8164C6.08447 10.767 6.04028 10.6235 5.95191 10.3366L4.22259 4.72263C4.1504 4.48825 4.1143 4.37107 4.14335 4.29192C4.16865 4.22298 4.22298 4.16865 4.29192 4.14335C4.37107 4.1143 4.48825 4.1504 4.72262 4.2226L10.3366 5.95192C10.6235 6.0403 10.767 6.08449 10.8164 6.16201C10.8592 6.22928 10.8674 6.31297 10.8384 6.38727C10.805 6.47289 10.6728 6.54406 10.4085 6.68639L8.09479 7.93224C8.05551 7.95339 8.03587 7.96396 8.01868 7.97755C8.00341 7.98961 7.98961 8.00341 7.97755 8.01868C7.96396 8.03587 7.95339 8.05551 7.93224 8.09479Z",stroke:"#667085","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},children:[]}]},{type:"element",name:"defs",attributes:{},children:[{type:"element",name:"clipPath",attributes:{id:"clip0_7847_32887"},children:[{type:"element",name:"rect",attributes:{width:"12",height:"12",fill:"white"},children:[]}]}]}]},name:"WebReader"})},615007,a=>{"use strict";var b=a.i(57843);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))});a.s(["CheckCircleIcon",0,c],615007)},740923,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(57843),e=a.i(555237);a.i(752298);var f=a.i(693025),g=a.i(909795),h=a.i(252813);let i=d.memo(function({isShow:a,title:i,content:j,onConfirm:k,onCancel:l,maskClosable:m=!0,showLink:n,email:o}){let{t:p}=(0,f.useTranslation)(),q=(0,h.useDocLink)(),r=(0,d.useRef)(null),[s,t]=(0,d.useState)(a),u=q("/use-dify/workspace/subscription-management#dify-for-education");(0,d.useEffect)(()=>{let a=a=>{"Escape"===a.key&&l()};return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}},[l]);let v=a=>{m&&r.current&&!r.current.contains(a.target)&&l()};return((0,d.useEffect)(()=>(document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}),[m]),(0,d.useEffect)(()=>{if(a)t(!0);else{let a=setTimeout(()=>t(!1),200);return()=>clearTimeout(a)}},[a]),s)?(0,e.createPortal)((0,b.jsx)("div",{className:"fixed inset-0 z-[10000000] flex items-center justify-center bg-background-overlay",onClick:a=>{a.preventDefault(),a.stopPropagation()},children:(0,b.jsx)("div",{ref:r,className:"relative w-full max-w-[481px] overflow-hidden",children:(0,b.jsxs)("div",{className:"shadows-shadow-lg flex max-w-full flex-col items-start rounded-2xl border-[0.5px] border-solid border-components-panel-border bg-components-panel-bg",children:[(0,b.jsxs)("div",{className:"flex flex-col items-start gap-2 self-stretch pb-4 pl-6 pr-6 pt-6",children:[(0,b.jsx)("div",{className:"title-2xl-semi-bold text-text-primary",children:i}),(0,b.jsx)("div",{className:"system-md-regular w-full text-text-tertiary",children:j})]}),o&&(0,b.jsxs)("div",{className:"w-full space-y-1 px-6 py-3",children:[(0,b.jsx)("div",{className:"system-sm-semibold py-1 text-text-secondary",children:p("emailLabel",{ns:"education"})}),(0,b.jsx)("div",{className:"system-sm-regular rounded-lg bg-components-input-bg-disabled px-3 py-2 text-components-input-text-filled-disabled",children:o})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2 self-stretch p-6",children:[(0,b.jsx)("div",{className:"flex items-center gap-1",children:n&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("a",{onClick:()=>{window.open(u,"_blank","noopener,noreferrer")},href:u,target:"_blank",className:"system-xs-regular cursor-pointer text-text-accent",children:p("learn",{ns:"education"})}),(0,b.jsx)(c.RiExternalLinkLine,{className:"h-3 w-3 text-text-accent"})]})}),(0,b.jsx)(g.default,{variant:"primary",className:"!w-20",onClick:k,children:p("operation.ok",{ns:"common"})})]})]})})}),document.body):null});a.s(["default",0,i])},935392,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(57843);a.i(752298);var e=a.i(693025),f=a.i(218865),g=a.i(909795),h=a.i(192875),i=a.i(368206),j=a.i(698636),k=a.i(986431),l=a.i(827460),m=a.i(914513),n=a.i(50051),o=a.i(330492),p=a.i(460183),q=a.i(209796),r=a.i(288117),s=a.i(210924);let t=d.memo(({dataSourceType:a,localFiles:t,onlineDocuments:u,websitePages:v,onlineDriveFiles:w,isIdle:x,isPending:y,estimateData:z,onPreview:A,handlePreviewFileChange:B,handlePreviewOnlineDocumentChange:C,handlePreviewWebsitePageChange:D,handlePreviewOnlineDriveFileChange:E})=>{let{t:F}=(0,e.useTranslation)(),G=(0,j.useDatasetDetailContextWithSelector)(a=>a.dataset?.doc_form),[H,I]=(0,d.useState)(t[0]),[J,K]=(0,d.useState)(u[0]),[L,M]=(0,d.useState)(v[0]),[N,O]=(0,d.useState)(w[0]);return(0,b.jsxs)(q.default,{header:(0,b.jsx)(r.PreviewHeader,{title:F("stepTwo.preview",{ns:"datasetCreation"}),children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[a===l.DatasourceType.localFile&&(0,b.jsx)(n.default,{files:t,onChange:a=>{I(a),B(a)},value:H}),a===l.DatasourceType.onlineDocument&&(0,b.jsx)(n.default,{files:u.map(a=>({id:a.page_id,name:a.page_name,extension:"md"})),onChange:a=>{let b=u.find(b=>b.page_id===a.id);K(b),C(b)},value:{id:J?.page_id||"",name:J?.page_name||"",extension:"md"}}),a===l.DatasourceType.websiteCrawl&&(0,b.jsx)(n.default,{files:v.map(a=>({id:a.source_url,name:a.title,extension:"md"})),onChange:a=>{let b=v.find(b=>b.source_url===a.id);M(b),D(b)},value:{id:L?.source_url||"",name:L?.title||"",extension:"md"}}),a===l.DatasourceType.onlineDrive&&(0,b.jsx)(n.default,{files:w.map(a=>({id:a.id,name:a.name,extension:(0,s.getFileExtension)(N?.name)})),onChange:a=>{let b=w.find(b=>b.id===a.id);O(b),E(b)},value:{id:N?.id||"",name:N?.name||"",extension:(0,s.getFileExtension)(N?.name)}}),G!==k.ChunkingMode.qa&&(0,b.jsx)(f.default,{text:F("stepTwo.previewChunkCount",{ns:"datasetCreation",count:z?.total_segments||0})})]})}),className:"relative flex h-full w-full shrink-0",mainClassName:"space-y-6",children:[!y&&G===k.ChunkingMode.qa&&z?.qa_preview&&z?.qa_preview.map((a,c)=>(0,b.jsx)(m.ChunkContainer,{label:`Chunk-${c+1}`,characterCount:a.question.length+a.answer.length,children:(0,b.jsx)(m.QAPreview,{qa:a})},`${a.question}-${c}`)),!y&&G===k.ChunkingMode.text&&z?.preview&&z?.preview.map((a,c)=>(0,b.jsxs)(m.ChunkContainer,{label:`Chunk-${c+1}`,characterCount:a.content.length,children:[a.content,a.summary&&(0,b.jsx)(i.default,{summary:a.summary})]},`${a.content}-${c}`)),!y&&G===k.ChunkingMode.parentChild&&z?.preview&&z?.preview?.map((a,c)=>(0,b.jsx)(m.ChunkContainer,{label:`Chunk-${c+1}`,characterCount:a.content.length,children:(0,b.jsxs)(p.FormattedText,{children:[a.child_chunks.map((a,c)=>{let d=c+1;return(0,b.jsx)(o.PreviewSlice,{label:`C-${d}`,text:a,tooltip:`Child-chunk-${d} \xb7 ${a.length} Characters`,labelInnerClassName:"text-[10px] font-semibold align-bottom leading-7",dividerClassName:"leading-7"},a)}),a.summary&&(0,b.jsx)(i.default,{summary:a.summary})]})},`${a.content}-${c}`)),x&&(0,b.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 pb-4",children:[(0,b.jsx)(c.RiSearchEyeLine,{className:"size-10 text-text-empty-state-icon"}),(0,b.jsx)("p",{className:"text-sm text-text-tertiary",children:F("stepTwo.previewChunkTip",{ns:"datasetCreation"})}),(0,b.jsx)(g.default,{onClick:A,children:F("addDocuments.stepTwo.previewChunks",{ns:"datasetPipeline"})})]})}),y&&(0,b.jsx)("div",{className:"h-full w-full space-y-6 overflow-hidden",children:Array.from({length:10},(a,c)=>(0,b.jsxs)(h.SkeletonContainer,{children:[(0,b.jsxs)(h.SkeletonRow,{children:[(0,b.jsx)(h.SkeletonRectangle,{className:"w-20"}),(0,b.jsx)(h.SkeletonPoint,{}),(0,b.jsx)(h.SkeletonRectangle,{className:"w-24"})]}),(0,b.jsx)(h.SkeletonRectangle,{className:"w-full"}),(0,b.jsx)(h.SkeletonRectangle,{className:"w-full"}),(0,b.jsx)(h.SkeletonRectangle,{className:"w-[422px]"})]},c))})]})});a.s(["default",0,t])},937201,a=>{"use strict";var b=a.i(608061),c=a.i(57843),d=a.i(433225),e=a.i(306370),f=a.i(114715),g=a.i(429150);a.i(752298);var h=a.i(693025),i=a.i(909795);let j=c.memo(({onReset:a,resetDisabled:c,previewDisabled:d,onPreview:e})=>{let{t:f}=(0,h.useTranslation)();return(0,b.jsxs)("div",{className:"flex items-center gap-x-1 px-4 py-2",children:[(0,b.jsx)("div",{className:"system-sm-semibold-uppercase grow text-text-secondary",children:f("addDocuments.stepTwo.chunkSettings",{ns:"datasetPipeline"})}),(0,b.jsx)(i.default,{variant:"ghost",disabled:c,onClick:a,children:f("operation.reset",{ns:"common"})}),(0,b.jsxs)(i.default,{variant:"secondary-accent",onClick:e,className:"gap-x-0.5",disabled:d,children:[(0,b.jsx)(g.RiSearchEyeLine,{className:"size-4"}),(0,b.jsx)("span",{className:"px-0.5",children:f("addDocuments.stepTwo.previewChunks",{ns:"datasetPipeline"})})]})]})});a.s(["default",0,({initialData:a,configurations:g,schema:h,onSubmit:i,onPreview:k,ref:l,isRunning:m})=>{let n=(0,d.useAppForm)({defaultValues:a,validators:{onSubmit:({value:a})=>{let b=h.safeParse(a);if(!b.success){let a=b.error.issues[0],c=`"${a.path.join(".")}" ${a.message}`;return f.default.notify({type:"error",message:c}),c}}},onSubmit:({value:a})=>{i(a)}});(0,c.useImperativeHandle)(l,()=>({submit:()=>{n.handleSubmit()}}),[n]);let o=(0,c.useCallback)(()=>{n.reset()},[n]);return(0,b.jsxs)("form",{className:"flex w-full flex-col rounded-lg border border-components-panel-border bg-components-panel-bg",onSubmit:a=>{a.preventDefault(),a.stopPropagation(),n.handleSubmit()},children:[(0,b.jsx)(n.Subscribe,{selector:a=>a.isDirty,children:a=>(0,b.jsx)(j,{onReset:o,resetDisabled:!a,onPreview:k,previewDisabled:m})}),(0,b.jsx)("div",{className:"flex flex-col gap-3 border-t border-divider-subtle px-4 py-3",children:g.map((c,d)=>{let f=(0,e.default)({initialData:a,config:c});return(0,b.jsx)(f,{form:n},d)})})]})}],937201)}];

//# sourceMappingURL=_a49f9966._.js.map