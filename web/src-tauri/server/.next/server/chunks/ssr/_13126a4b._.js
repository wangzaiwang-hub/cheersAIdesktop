module.exports=[53952,a=>{"use strict";var b=a.i(911456);function c(a,e=a=>a){return(0,b.useSyncExternalStoreWithSelector)(a.subscribe,()=>a.state,()=>a.state,e,d)}function d(a,b){if(Object.is(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;if(a instanceof Map&&b instanceof Map){if(a.size!==b.size)return!1;for(let[c,d]of a)if(!b.has(c)||!Object.is(d,b.get(c)))return!1;return!0}if(a instanceof Set&&b instanceof Set){if(a.size!==b.size)return!1;for(let c of a)if(!b.has(c))return!1;return!0}if(a instanceof Date&&b instanceof Date)return a.getTime()===b.getTime();let c=e(a);if(c.length!==e(b).length)return!1;for(let d=0;d<c.length;d++)if(!Object.prototype.hasOwnProperty.call(b,c[d])||!Object.is(a[c[d]],b[c[d]]))return!1;return!0}function e(a){return Object.keys(a).concat(Object.getOwnPropertySymbols(a))}a.s(["useStore",()=>c])},166102,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(57843);a.i(752298);var e=a.i(693025),f=a.i(825319),g=a.i(527344);a.s(["default",0,a=>{let{options:h,containerProps:i,triggerProps:j,popupProps:k,placeholder:l,disabled:m,triggerPopupSameWidth:n,multiple:o,value:p,onChange:q}=a,{t:r}=(0,e.useTranslation)(),{open:s,onOpenChange:t,placement:u,offset:v}=i||{},{className:w}=j||{},{wrapperClassName:x,className:y,itemClassName:z,title:A,titleClassName:B}=k||{},[C,D]=(0,d.useState)(!1),E=s??C,F=(0,d.useCallback)(a=>{t?.(a),D(a)},[t]),G=(0,d.useMemo)(()=>{let a=l||r("placeholder.select",{ns:"common"});return o?p?.length?r("dynamicSelect.selected",{ns:"common",count:p.length}):a:h.find(a=>a.value===p)?.label||a},[o,p,h,l]);return(0,b.jsxs)(f.PortalToFollowElem,{placement:u||"bottom-start",offset:v||4,open:E,onOpenChange:F,triggerPopupSameWidth:n,children:[(0,b.jsx)(f.PortalToFollowElemTrigger,{onClick:()=>!m&&F(!E),asChild:!0,children:(0,b.jsxs)("div",{className:(0,g.cn)("system-sm-regular group flex h-8 items-center rounded-lg bg-components-input-bg-normal px-2 text-components-input-text-filled",!m&&"cursor-pointer hover:bg-state-base-hover-alt",m&&"cursor-not-allowed opacity-50",E&&!m&&"bg-state-base-hover-alt",w),children:[(0,b.jsx)("div",{className:"grow",title:G,children:G}),(0,b.jsx)(c.RiArrowDownSLine,{className:(0,g.cn)("h-4 w-4 shrink-0 text-text-quaternary group-hover:text-text-secondary",E&&"text-text-secondary")})]})}),(0,b.jsx)(f.PortalToFollowElemContent,{className:(0,g.cn)("z-[9999]",x),children:(0,b.jsxs)("div",{className:(0,g.cn)("max-h-80 overflow-auto rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg-blur p-1 shadow-lg",y),children:[A&&(0,b.jsx)("div",{className:(0,g.cn)("system-xs-medium-uppercase flex h-[22px] items-center px-3 text-text-tertiary",B),children:A}),h.map(a=>(0,b.jsxs)("div",{className:(0,g.cn)("system-sm-medium flex h-8 cursor-pointer items-center rounded-lg px-2 text-text-secondary hover:bg-state-base-hover",z),title:a.label,onClick:()=>{if(!m){if(o){let b=p??[],c=b.includes(a.value)?b.filter(b=>b!==a.value):[...b,a.value];q?.(c);return}q?.(a.value),F(!1)}},children:[(0,b.jsx)("div",{className:"mr-1 grow truncate px-1",children:a.label}),(o?(p??[]).includes(a.value):p===a.value)&&(0,b.jsx)(c.RiCheckLine,{className:"h-4 w-4 shrink-0 text-text-accent"})]},a.value))]})})]})}])},521607,559423,601712,156458,495863,66515,275995,a=>{"use strict";let b;a.s(["__derivedToStore",()=>f,"__flush",()=>l,"__storeToDerived",()=>e,"batch",()=>m],601712),a.s(["Derived",()=>d],559423);class c{constructor(a,b){this.listeners=new Set,this.subscribe=a=>{var b,c;this.listeners.add(a);let d=null==(c=null==(b=this.options)?void 0:b.onSubscribe)?void 0:c.call(b,a,this);return()=>{this.listeners.delete(a),null==d||d()}},this.prevState=a,this.state=a,this.options=b}setState(a){var b,c,d;(this.prevState=this.state,null==(b=this.options)?void 0:b.updateFn)?this.state=this.options.updateFn(this.prevState)(a):"function"==typeof a?this.state=a(this.prevState):this.state=a,null==(d=null==(c=this.options)?void 0:c.onUpdate)||d.call(c),l(this)}}class d{constructor(a){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{let a=this.options.deps.length,b=Array(a),c=Array(a);for(let d=0;d<a;d++){let a=this.options.deps[d];b[d]=a.prevState,c[d]=a.state}return this.lastSeenDepValues=c,{prevDepVals:b,currDepVals:c,prevVal:this.prevState??void 0}},this.recompute=()=>{var a,b;this.prevState=this.state;let c=this.getDepVals();this.state=this.options.fn(c),null==(b=(a=this.options).onUpdate)||b.call(a)},this.checkIfRecalculationNeededDeeply=()=>{for(let a of this.options.deps)a instanceof d&&a.checkIfRecalculationNeededDeeply();let a=!1,b=this.lastSeenDepValues,{currDepVals:c}=this.getDepVals();for(let d=0;d<c.length;d++)if(c[d]!==b[d]){a=!0;break}a&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{for(let a of(this.unregisterFromGraph(),this._subscriptions))a()}),this.subscribe=a=>{var b,c;this.listeners.add(a);let d=null==(c=(b=this.options).onSubscribe)?void 0:c.call(b,a,this);return()=>{this.listeners.delete(a),null==d||d()}},this.options=a,this.state=a.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(a=this.options.deps){for(let b of a)if(b instanceof d)b.registerOnGraph(),this.registerOnGraph(b.options.deps);else if(b instanceof c){let a=e.get(b);a||(a=new Set,e.set(b,a)),a.add(this);let c=f.get(this);c||(c=new Set,f.set(this,c)),c.add(b)}}unregisterFromGraph(a=this.options.deps){for(let b of a)if(b instanceof d)this.unregisterFromGraph(b.options.deps);else if(b instanceof c){let a=e.get(b);a&&a.delete(this);let c=f.get(this);c&&c.delete(b)}}}let e=new WeakMap,f=new WeakMap,g={current:[]},h=!1,i=0,j=new Set,k=new Map;function l(a){if((i>0&&!k.has(a)&&k.set(a,a.prevState),j.add(a),!(i>0))&&!h)try{for(h=!0;j.size>0;){let a=Array.from(j);for(let b of(j.clear(),a)){let a=k.get(b)??b.prevState;b.prevState=a,function(a){let b={prevVal:a.prevState,currentVal:a.state};for(let c of a.listeners)c(b)}(b)}for(let b of a){let a=e.get(b);a&&(g.current.push(b),function a(b){for(let c of Array.from(b).sort((a,b)=>a instanceof d&&a.options.deps.includes(b)?1:b instanceof d&&b.options.deps.includes(a)?-1:0)){if(g.current.includes(c))continue;g.current.push(c),c.recompute();let b=f.get(c);if(b)for(let c of b){let b=e.get(c);b&&a(b)}}}(a))}for(let b of a){let a=e.get(b);if(a)for(let b of a)!function(a){let b={prevVal:a.prevState,currentVal:a.state};for(let c of a.listeners)c(b)}(b)}}}finally{h=!1,g.current=[],k.clear()}}function m(a){i++;try{a()}finally{if(0==--i){let a=j.values().next().value;a&&l(a)}}}function n(a,b){return"function"==typeof a?a(b):a}function o(a,b){return y(b).reduce((a,b)=>null===a?null:void 0!==a?a[b]:void 0,a)}function p(a,b,c){let d=y(b);return function a(b){if(!d.length)return n(c,b);let e=d.shift();if("string"==typeof e||"number"==typeof e&&!Array.isArray(b))return"object"==typeof b?(null===b&&(b={}),{...b,[e]:a(b[e])}):{[e]:a()};if(Array.isArray(b)&&"number"==typeof e){let c=b.slice(0,e);return[...c.length?c:Array(e),a(b[e]),...b.slice(e+1)]}return[...Array(e),a()]}(a)}function q(a,b){let c=y(b);return function a(b){if(!b)return;if(1===c.length){let a=c[0];if(Array.isArray(b)&&"number"==typeof a)return b.filter((b,c)=>c!==a);let{[a]:d,...e}=b;return e}let d=c.shift();if("string"==typeof d&&"object"==typeof b)return{...b,[d]:a(b[d])};if("number"==typeof d&&Array.isArray(b)){if(d>=b.length)return b;let c=b.slice(0,d);return[...c.length?c:Array(d),a(b[d]),...b.slice(d+1)]}throw Error("It seems we have created an infinite loop in deleteBy. ")}(a)}let r=/^(\d+)$/gm,s=/\.(\d+)(?=\.)/gm,t=/^(\d+)\./gm,u=/\.(\d+$)/gm,v=/\.{2,}/gm,w="__int__",x=`${w}$1`;function y(a){if(Array.isArray(a))return[...a];if("string"!=typeof a)throw Error("Path must be a string.");return a.replace(/(^\[)|]/gm,"").replace(/\[/g,".").replace(r,x).replace(s,`.${x}.`).replace(t,`${x}.`).replace(u,`.${x}`).replace(v,".").split(".").map(a=>{if(a.startsWith(w)){let b=a.substring(w.length),c=parseInt(b,10);return String(c)===b?c:b}return a})}function z(a,b){return 0===a.length?b:0===b.length?a:b.startsWith("[")||b.startsWith(".")?a+b:`${a}.${b}`}function A(a){return!(Array.isArray(a)&&0===a.length)}function B(a,b){return b.validationLogic({form:b.form,validators:b.validators,event:{type:a,async:!1},runValidation:a=>a.validators.filter(Boolean).map(a=>({cause:a.cause,validate:a.fn}))})}function C(a,b){let{asyncDebounceMs:c}=b,{onBlurAsyncDebounceMs:d,onChangeAsyncDebounceMs:e,onDynamicAsyncDebounceMs:f}=b.validators||{},g=c??0;return b.validationLogic({form:b.form,validators:b.validators,event:{type:a,async:!0},runValidation:b=>b.validators.filter(Boolean).map(b=>{let c=b?.cause||a,h=g;switch(c){case"change":h=e??g;break;case"blur":h=d??g;break;case"dynamic":h=f??g;break;case"submit":h=0}return"submit"===a&&(h=0),{cause:c,validate:b.fn,debounceMs:h}})})}let D=a=>!!a&&"object"==typeof a&&"fields"in a;function E(a,b){if(Object.is(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;if(a instanceof Date&&b instanceof Date)return a.getTime()===b.getTime();if(a instanceof Map&&b instanceof Map){if(a.size!==b.size)return!1;for(let[c,d]of a)if(!b.has(c)||!Object.is(d,b.get(c)))return!1;return!0}if(a instanceof Set&&b instanceof Set){if(a.size!==b.size)return!1;for(let c of a)if(!b.has(c))return!1;return!0}let c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(let e of c)if(!d.includes(e)||!E(a[e],b[e]))return!1;return!0}let F=({newFormValidatorError:a,isPreviousErrorFromFormValidator:b,previousErrorValue:c})=>a?{newErrorValue:a,newSource:"form"}:b?{newErrorValue:void 0,newSource:void 0}:c?{newErrorValue:c,newSource:"field"}:{newErrorValue:void 0,newSource:void 0},G=({formLevelError:a,fieldLevelError:b})=>b?{newErrorValue:b,newSource:"field"}:a?{newErrorValue:a,newSource:"form"}:{newErrorValue:void 0,newSource:void 0};function H(a,b){return null==a?b:{...a,...b}}let I=256,J=[];for(;I--;)J[I]=(I+256).toString(16).substring(1);function K(){let a,c=0,d="";if(!b||I+16>256){for(b=Array(256),c=256;c--;)b[c]=256*Math.random()|0;c=0,I=0}for(;c<16;c++)a=b[I+c],6===c?d+=J[15&a|64]:8===c?d+=J[63&a|128]:d+=J[a],1&c&&c>1&&c<11&&(d+="-");return I++,d}a.s(["concatenatePaths",()=>z,"deleteBy",()=>q,"determineFieldLevelErrorSourceAndValue",()=>G,"determineFormLevelErrorSourceAndValue",()=>F,"evaluate",()=>E,"functionalUpdate",()=>n,"getAsyncValidatorArray",()=>C,"getBy",()=>o,"getSyncValidatorArray",()=>B,"isGlobalFormValidationError",()=>D,"isNonEmptyArray",()=>A,"makePathArray",()=>y,"mergeOpts",()=>H,"setBy",()=>p,"uuid",()=>K],156458);let L=a=>{if(!a.validators)return a.runValidation({validators:[],form:a.form});let b=a.event.async,c=b?void 0:{fn:a.validators.onMount,cause:"mount"},d={fn:b?a.validators.onChangeAsync:a.validators.onChange,cause:"change"},e={fn:b?a.validators.onBlurAsync:a.validators.onBlur,cause:"blur"},f={fn:b?a.validators.onSubmitAsync:a.validators.onSubmit,cause:"submit"},g=b?void 0:{fn:()=>void 0,cause:"server"};switch(a.event.type){case"mount":return a.runValidation({validators:[c],form:a.form});case"submit":return a.runValidation({validators:[d,e,f,g],form:a.form});case"server":return a.runValidation({validators:[],form:a.form});case"blur":return a.runValidation({validators:[e,g],form:a.form});case"change":return a.runValidation({validators:[d,g],form:a.form});default:throw Error(`Unknown validation event type: ${a.event.type}`)}};a.s(["defaultValidationLogic",()=>L],495863);let M=(a,b)=>{let c=function(a,b){let c=new Map;for(let d of a){let a=d.path??[],e=b,f="";for(let b=0;b<a.length;b++){let c=a[b];if(void 0===c)continue;let d="object"==typeof c?c.key:c,g=Number(d);Array.isArray(e)&&!Number.isNaN(g)?f+=`[${g}]`:f+=(b>0?".":"")+String(d),e="object"==typeof e&&null!==e?e[d]:void 0}c.set(f,(c.get(f)??[]).concat(d))}return Object.fromEntries(c)}(a,b);return{form:c,fields:c}},N={validate({value:a,validationSource:b},c){let d=c["~standard"].validate(a);if(d instanceof Promise)throw Error("async function passed to sync validator");if(d.issues)return"field"===b?d.issues:M(d.issues,a)},async validateAsync({value:a,validationSource:b},c){let d=await c["~standard"].validate(a);if(d.issues)return"field"===b?d.issues:M(d.issues,a)}},O=a=>!!a&&"~standard"in a;a.s(["isStandardSchemaValidator",()=>O,"standardSchemaValidators",()=>N],66515);let P={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,isValid:!0,isDefaultValue:!0,errors:[],errorMap:{},errorSourceMap:{}};function Q(a){function b(a,b){return`${a}[${b}]`}function c(b,c){("up"===c?b:[...b].reverse()).forEach(b=>{var e;let f=(e=b.toString(),e.replace(/\[(\d+)\]/,(a,b)=>{let d=parseInt(b,10),e="up"===c?d+1:Math.max(0,d-1);return`[${e}]`})),g=a.getFieldMeta(f);g?a.setFieldMeta(b,g):a.setFieldMeta(b,d())})}let d=()=>P;return{handleArrayFieldMetaShift:function(e,f,g,h){let i=function(c,d,e,f){let g=[b(c,d)];if("swap"===e)g.push(b(c,f));else if("move"===e){let[a,e]=[Math.min(d,f),Math.max(d,f)];for(let d=a;d<=e;d++)g.push(b(c,d))}else{let e=a.getFieldValue(c),f=Array.isArray(e)?e.length:0;for(let a=d+1;a<f;a++)g.push(b(c,a))}return Object.keys(a.fieldInfo).filter(a=>g.some(b=>a.startsWith(b)))}(e,f,g,h);({insert:()=>{var g,h,j;return g=i,h=e,j=f,void(c(g,"down"),g.forEach(c=>{c.toString().startsWith(b(h,j))&&a.setFieldMeta(c,d())}))},remove:()=>{c(i,"up")},swap:()=>{var c,d,g,j;return void 0!==h&&(c=i,d=e,g=f,j=h,void c.forEach(c=>{if(!c.toString().startsWith(b(d,g)))return;let e=c.toString().replace(b(d,g),b(d,j)),[f,h]=[a.getFieldMeta(c),a.getFieldMeta(e)];f&&a.setFieldMeta(e,f),h&&a.setFieldMeta(c,h)}))},move:()=>{var d,g,j,k;let l;return void 0!==h&&(d=i,g=e,j=f,k=h,l=new Map(Object.keys(a.fieldInfo).filter(a=>a.startsWith(b(g,j))).map(b=>[b,a.getFieldMeta(b)])),void(c(d,j<k?"up":"down"),Object.keys(a.fieldInfo).filter(a=>a.startsWith(b(g,k))).forEach(c=>{let d=c.replace(b(g,k),b(g,j)),e=l.get(d);e&&a.setFieldMeta(c,e)})))}})[g]()}}}a.s(["defaultFieldMeta",()=>P,"metaHelper",()=>Q],275995);class R{#a=!0;#b;#c;#d;#e;#f;#g;#h;#i=0;#j=5;#k=!1;#l=()=>{this.debugLog("Connected to event bus"),this.#f=!0,this.#k=!1,this.debugLog("Emitting queued events",this.#e),this.#e.forEach(a=>this.emitEventToBus(a)),this.#e=[],this.stopConnectLoop(),this.#c().removeEventListener("tanstack-connect-success",this.#l)};#m=()=>{if(this.#i<this.#j){this.#i++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#c().removeEventListener("tanstack-connect",this.#m),this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#n=()=>{this.#k||(this.#k=!0,this.#c().addEventListener("tanstack-connect-success",this.#l),this.#m())};constructor({pluginId:a,debug:b=!1,enabled:c=!0,reconnectEveryMs:d=300}){this.#b=a,this.#a=c,this.#c=this.getGlobalTarget,this.#d=b,this.debugLog(" Initializing event subscription for plugin",this.#b),this.#e=[],this.#f=!1,this.#g=null,this.#h=d}startConnectLoop(){null!==this.#g||this.#f||(this.debugLog(`Starting connect loop (every ${this.#h}ms)`),this.#g=setInterval(this.#m,this.#h))}stopConnectLoop(){this.#k=!1,null!==this.#g&&(clearInterval(this.#g),this.#g=null,this.debugLog("Stopped connect loop"))}debugLog(...a){this.#d&&console.log(`ðŸŒ´ [tanstack-devtools:${this.#b}-plugin]`,...a)}getGlobalTarget(){if("u">typeof globalThis&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;let a="u">typeof EventTarget?new EventTarget:void 0;return void 0===a||void 0===a.addEventListener?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),a)}getPluginId(){return this.#b}dispatchCustomEventShim(a,b){try{let c=new Event(a,{detail:b});this.#c().dispatchEvent(c)}catch(a){this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(a,b){try{this.#c().dispatchEvent(new CustomEvent(a,{detail:b}))}catch(c){this.dispatchCustomEventShim(a,b)}}emitEventToBus(a){this.debugLog("Emitting event to client bus",a),this.dispatchCustomEvent("tanstack-dispatch-event",a)}emit(a,b){if(!this.#a)return void this.debugLog("Event bus client is disabled, not emitting event",a,b);if(!this.#f){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#e.push({type:`${this.#b}:${a}`,payload:b,pluginId:this.#b}),"u">typeof CustomEvent&&!this.#k&&(this.#n(),this.startConnectLoop());return}return this.emitEventToBus({type:`${this.#b}:${a}`,payload:b,pluginId:this.#b})}on(a,b){let c=`${this.#b}:${a}`;if(!this.#a)return this.debugLog("Event bus client is disabled, not registering event",c),()=>{};let d=a=>{this.debugLog("Received event from bus",a.detail),b(a.detail)};return this.#c().addEventListener(c,d),this.debugLog("Registered event to bus",c),()=>{this.#c().removeEventListener(c,d)}}onAll(a){if(!this.#a)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};let b=b=>{a(b.detail)};return this.#c().addEventListener("tanstack-devtools-global",b),()=>this.#c().removeEventListener("tanstack-devtools-global",b)}onAllPluginEvents(a){if(!this.#a)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};let b=b=>{let c=b.detail;this.#b&&c.pluginId!==this.#b||a(c)};return this.#c().addEventListener("tanstack-devtools-global",b),()=>this.#c().removeEventListener("tanstack-devtools-global",b)}}let S=new class extends R{constructor(){super({pluginId:"form-devtools"})}};function T(a){return{values:a.values??{},errorMap:a.errorMap??{},fieldMetaBase:a.fieldMetaBase??{},isSubmitted:a.isSubmitted??!1,isSubmitting:a.isSubmitting??!1,isValidating:a.isValidating??!1,submissionAttempts:a.submissionAttempts??0,isSubmitSuccessful:a.isSubmitSuccessful??!1,validationMetaMap:a.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}}}class U{constructor(a){this.options={},this.fieldInfo={},this.prevTransformArray=[],this.mount=()=>{let a=this.fieldMetaDerived.mount(),b=this.store.mount(),c=()=>{a(),b(),S.emit("form-unmounted",{id:this._formId})};this.options.listeners?.onMount?.({formApi:this});let{onMount:d}=this.options.validators||{};return S.emit("form-state-change",{id:this._formId,state:this.store.state,options:this.options}),d&&this.validateSync("mount"),c},this.update=a=>{if(!a)return;let b=this.options;this.options=a;let c=!!a.transform?.deps?.some((a,b)=>a!==this.prevTransformArray[b]),d=a.defaultValues&&!E(a.defaultValues,b.defaultValues)&&!this.state.isTouched,e=!E(a.defaultState,b.defaultState)&&!this.state.isTouched;(d||e||c)&&m(()=>{this.baseStore.setState(()=>T(Object.assign({},this.state,e?a.defaultState:{},d?{values:a.defaultValues}:{},c?{_force_re_eval:!this.state._force_re_eval}:{})))})},this.reset=(a,b)=>{let{fieldMeta:c}=this.state,d=this.resetFieldMeta(c);a&&!b?.keepDefaultValues&&(this.options={...this.options,defaultValues:a}),this.baseStore.setState(()=>T({...this.options.defaultState,values:a??this.options.defaultValues??this.options.defaultState?.values,fieldMetaBase:d}))},this.validateAllFields=async a=>{let b=[];return m(()=>{Object.values(this.fieldInfo).forEach(c=>{if(!c.instance)return;let d=c.instance;b.push(Promise.resolve().then(()=>d.validate(a,{skipFormValidation:!0}))),c.instance.state.meta.isTouched||c.instance.setMeta(a=>({...a,isTouched:!0}))})}),(await Promise.all(b)).flat()},this.validateArrayFieldsStartingFrom=async(a,b,c)=>{let d=this.getFieldValue(a),e=Array.isArray(d)?Math.max(d.length-1,0):null,f=[`${a}[${b}]`];for(let c=b+1;c<=(e??0);c++)f.push(`${a}[${c}]`);let g=Object.keys(this.fieldInfo).filter(a=>f.some(b=>a.startsWith(b))),h=[];return m(()=>{g.forEach(a=>{h.push(Promise.resolve().then(()=>this.validateField(a,c)))})}),(await Promise.all(h)).flat()},this.validateField=(a,b)=>{let c=this.fieldInfo[a]?.instance;return c?(c.state.meta.isTouched||c.setMeta(a=>({...a,isTouched:!0})),c.validate(b)):[]},this.validateSync=a=>{let b=B(a,{...this.options,form:this,validationLogic:this.options.validationLogic||L}),c=!1,d={};return m(()=>{for(let a of b){if(!a.validate)continue;let{formError:b,fieldErrors:e}=V(this.runValidator({validate:a.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"})),f=W(a.cause);for(let a of Object.keys(this.state.fieldMeta)){if(void 0===this.baseStore.state.fieldMetaBase[a])continue;let b=this.getFieldMeta(a);if(!b)continue;let{errorMap:c,errorSourceMap:g}=b,h=e?.[a],{newErrorValue:i,newSource:j}=F({newFormValidatorError:h,isPreviousErrorFromFormValidator:g?.[f]==="form",previousErrorValue:c?.[f]});"form"===j&&(d[a]={...d[a],[f]:h}),c?.[f]!==i&&this.setFieldMeta(a,a=>({...a,errorMap:{...a.errorMap,[f]:i},errorSourceMap:{...a.errorSourceMap,[f]:j}}))}this.state.errorMap?.[f]!==b&&this.baseStore.setState(a=>({...a,errorMap:{...a.errorMap,[f]:b}})),(b||e)&&(c=!0)}let e=W("submit");this.state.errorMap?.[e]&&"submit"!==a&&!c&&this.baseStore.setState(a=>({...a,errorMap:{...a.errorMap,[e]:void 0}}));let f=W("server");this.state.errorMap?.[f]&&"server"!==a&&!c&&this.baseStore.setState(a=>({...a,errorMap:{...a.errorMap,[f]:void 0}}))}),{hasErrored:c,fieldsErrorMap:d}},this.validateAsync=async a=>{let b,c=C(a,{...this.options,form:this,validationLogic:this.options.validationLogic||L});this.state.isFormValidating||this.baseStore.setState(a=>({...a,isFormValidating:!0}));let d=[];for(let a of c){if(!a.validate)continue;let c=W(a.cause),e=this.state.validationMetaMap[c];e?.lastAbortController.abort();let f=new AbortController;this.state.validationMetaMap[c]={lastAbortController:f},d.push(new Promise(async c=>{let d;try{d=await new Promise((b,c)=>{setTimeout(async()=>{if(f.signal.aborted)return b(void 0);try{b(await this.runValidator({validate:a.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:f.signal},type:"validateAsync"}))}catch(a){c(a)}},a.debounceMs)})}catch(a){d=a}let{formError:e,fieldErrors:g}=V(d);g&&(b=b?{...b,...g}:g);let h=W(a.cause);for(let a of Object.keys(this.state.fieldMeta)){if(void 0===this.baseStore.state.fieldMetaBase[a])continue;let c=this.getFieldMeta(a);if(!c)continue;let{errorMap:d,errorSourceMap:e}=c,{newErrorValue:f,newSource:g}=F({newFormValidatorError:b?.[a],isPreviousErrorFromFormValidator:e?.[h]==="form",previousErrorValue:d?.[h]});d?.[h]!==f&&this.setFieldMeta(a,a=>({...a,errorMap:{...a.errorMap,[h]:f},errorSourceMap:{...a.errorSourceMap,[h]:g}}))}this.baseStore.setState(a=>({...a,errorMap:{...a.errorMap,[h]:e}})),c(b?{fieldErrors:b,errorMapKey:h}:void 0)}))}let e={};if(d.length){for(let a of(await Promise.all(d)))if(a?.fieldErrors){let{errorMapKey:b}=a;for(let[c,d]of Object.entries(a.fieldErrors)){let a={...e[c]||{},[b]:d};e[c]=a}}}return this.baseStore.setState(a=>({...a,isFormValidating:!1})),e},this.validate=a=>{let{hasErrored:b,fieldsErrorMap:c}=this.validateSync(a);return b&&!this.options.asyncAlways?c:this.validateAsync(a)},this.getFieldValue=a=>o(this.state.values,a),this.getFieldMeta=a=>this.state.fieldMeta[a],this.getFieldInfo=a=>this.fieldInfo[a]||={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}},this.setFieldMeta=(a,b)=>{this.baseStore.setState(c=>({...c,fieldMetaBase:{...c.fieldMetaBase,[a]:n(b,c.fieldMetaBase[a])}}))},this.resetFieldMeta=a=>Object.keys(a).reduce((a,b)=>(a[b]=P,a),{}),this.setFieldValue=(a,b,c)=>{let d=c?.dontUpdateMeta??!1,e=c?.dontRunListeners??!1,f=c?.dontValidate??!1;m(()=>{d||this.setFieldMeta(a,a=>({...a,isTouched:!0,isDirty:!0,errorMap:{...a?.errorMap,onMount:void 0}})),this.baseStore.setState(c=>({...c,values:p(c.values,a,b)}))}),e||this.getFieldInfo(a).instance?.triggerOnChangeListener(),f||this.validateField(a,"change")},this.deleteField=a=>{let b=[...Object.keys(this.fieldInfo).filter(b=>{let c=a.toString();return b!==c&&b.startsWith(c)}),a];this.baseStore.setState(a=>{let c={...a};return b.forEach(a=>{c.values=q(c.values,a),delete this.fieldInfo[a],delete c.fieldMetaBase[a]}),c})},this.pushFieldValue=(a,b,c)=>{this.setFieldValue(a,a=>[...Array.isArray(a)?a:[],b],c)},this.insertFieldValue=async(a,b,c,d)=>{this.setFieldValue(a,a=>[...a.slice(0,b),c,...a.slice(b)],H(d,{dontValidate:!0}));let e=d?.dontValidate??!1;e||await this.validateField(a,"change"),Q(this).handleArrayFieldMetaShift(a,b,"insert"),e||await this.validateArrayFieldsStartingFrom(a,b,"change")},this.replaceFieldValue=async(a,b,c,d)=>{this.setFieldValue(a,a=>a.map((a,d)=>d===b?c:a),H(d,{dontValidate:!0})),d?.dontValidate||(await this.validateField(a,"change"),await this.validateArrayFieldsStartingFrom(a,b,"change"))},this.removeFieldValue=async(a,b,c)=>{let d=this.getFieldValue(a),e=Array.isArray(d)?Math.max(d.length-1,0):null;if(this.setFieldValue(a,a=>a.filter((a,c)=>c!==b),H(c,{dontValidate:!0})),Q(this).handleArrayFieldMetaShift(a,b,"remove"),null!==e){let b=`${a}[${e}]`;this.deleteField(b)}c?.dontValidate||(await this.validateField(a,"change"),await this.validateArrayFieldsStartingFrom(a,b,"change"))},this.swapFieldValues=(a,b,c,d)=>{this.setFieldValue(a,a=>{let d=a[b],e=a[c];return p(p(a,`${b}`,e),`${c}`,d)},H(d,{dontValidate:!0})),Q(this).handleArrayFieldMetaShift(a,b,"swap",c),d?.dontValidate||(this.validateField(a,"change"),this.validateField(`${a}[${b}]`,"change"),this.validateField(`${a}[${c}]`,"change"))},this.moveFieldValues=(a,b,c,d)=>{this.setFieldValue(a,a=>{let d=[...a];return d.splice(c,0,d.splice(b,1)[0]),d},H(d,{dontValidate:!0})),Q(this).handleArrayFieldMetaShift(a,b,"move",c),d?.dontValidate||(this.validateField(a,"change"),this.validateField(`${a}[${b}]`,"change"),this.validateField(`${a}[${c}]`,"change"))},this.clearFieldValues=(a,b)=>{let c=this.getFieldValue(a),d=Array.isArray(c)?Math.max(c.length-1,0):null;if(this.setFieldValue(a,[],H(b,{dontValidate:!0})),null!==d)for(let b=0;b<=d;b++){let c=`${a}[${b}]`;this.deleteField(c)}b?.dontValidate||this.validateField(a,"change")},this.resetField=a=>{this.baseStore.setState(b=>({...b,fieldMetaBase:{...b.fieldMetaBase,[a]:P},values:this.options.defaultValues?p(b.values,a,o(this.options.defaultValues,a)):b.values}))},this.getAllErrors=()=>({form:{errors:this.state.errors,errorMap:this.state.errorMap},fields:Object.entries(this.state.fieldMeta).reduce((a,[b,c])=>(Object.keys(c).length&&c.errors.length&&(a[b]={errors:c.errors,errorMap:c.errorMap}),a),{})}),this.parseValuesWithSchema=a=>N.validate({value:this.state.values,validationSource:"form"},a),this.parseValuesWithSchemaAsync=a=>N.validateAsync({value:this.state.values,validationSource:"form"},a),this.timeoutIds={validations:{},listeners:{},formListeners:{}},this._formId=a?.formId??K(),this._devtoolsSubmissionOverride=!1,this.baseStore=new c(T({...a?.defaultState,values:a?.defaultValues??a?.defaultState?.values})),this.fieldMetaDerived=new d({deps:[this.baseStore],fn:({prevDepVals:a,currDepVals:b,prevVal:c})=>{let d=a?.[0],e=b[0],f=0,g={};for(let a of Object.keys(e.fieldMetaBase)){let b=e.fieldMetaBase[a],h=d?.fieldMetaBase[a],i=c?.[a],j=o(e.values,a),k=i?.errors;if(!h||b.errorMap!==h.errorMap){k=Object.values(b.errorMap??{}).filter(a=>void 0!==a);let c=this.getFieldInfo(a)?.instance;c&&!c.options.disableErrorFlat&&(k=k?.flat(1))}let l=!A(k??[]),m=!b.isDirty,n=E(j,o(this.options.defaultValues,a))||E(j,this.getFieldInfo(a)?.instance?.options.defaultValue);if(i&&i.isPristine===m&&i.isValid===l&&i.isDefaultValue===n&&i.errors===k&&b===h){g[a]=i,f++;continue}g[a]={...b,errors:k,isPristine:m,isValid:l,isDefaultValue:n}}return Object.keys(e.fieldMetaBase).length&&c&&f===Object.keys(e.fieldMetaBase).length?c:g}}),this.store=new d({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:a,currDepVals:b,prevVal:c})=>{let d=a?.[0],e=b[0],f=Object.values(b[1]).filter(Boolean),g=f.some(a=>a.isValidating),h=f.every(a=>a.isValid),i=f.some(a=>a.isTouched),j=f.some(a=>a.isBlurred),k=f.every(a=>a.isDefaultValue),l=i&&e.errorMap?.onMount,m=f.some(a=>a.isDirty),n=!m,o=!!(e.errorMap?.onMount||f.some(a=>a?.errorMap?.onMount)),p=c?.errors??[];d&&e.errorMap===d.errorMap||(p=Object.values(e.errorMap).reduce((a,b)=>(void 0===b||(b&&D(b)?a.push(b.form):a.push(b)),a),[]));let q=0===p.length,r=h&&q,s=this.options.canSubmitWhenInvalid??!1,t=0===e.submissionAttempts&&!i&&!o||!g&&!e.isSubmitting&&r||s,u=e.errorMap;if(l&&(p=p.filter(a=>a!==e.errorMap.onMount),u=Object.assign(u,{onMount:void 0})),c&&d&&c.errorMap===u&&c.fieldMeta===this.fieldMetaDerived.state&&c.errors===p&&c.isFieldsValidating===g&&c.isFieldsValid===h&&c.isFormValid===q&&c.isValid===r&&c.canSubmit===t&&c.isTouched===i&&c.isBlurred===j&&c.isPristine===n&&c.isDefaultValue===k&&c.isDirty===m&&E(d,e))return c;let v={...e,errorMap:u,fieldMeta:this.fieldMetaDerived.state,errors:p,isFieldsValidating:g,isFieldsValid:h,isFormValid:q,isValid:r,canSubmit:t,isTouched:i,isBlurred:j,isPristine:n,isDefaultValue:k,isDirty:m},w=this.options.transform?.deps??[];if(w.length!==this.prevTransformArray.length||w.some((a,b)=>a!==this.prevTransformArray[b])){let a=Object.assign({},this,{state:v});this.options.transform?.fn(a),v=a.state,this.prevTransformArray=w}return v}}),this.handleSubmit=this.handleSubmit.bind(this),this.update(a||{}),this.store.subscribe(()=>{S.emit("form-state-change",{id:this._formId,state:this.store.state,options:this.options})}),S.on("request-form-state",a=>{a.payload.id===this._formId&&S.emit("form-state-change",{id:this._formId,state:this.store.state,options:this.options})}),S.on("request-form-reset",a=>{a.payload.id===this._formId&&this.reset()}),S.on("request-form-force-submit",a=>{a.payload.id===this._formId&&(this._devtoolsSubmissionOverride=!0,this.handleSubmit(),this._devtoolsSubmissionOverride=!1)})}get state(){return this.store.state}get formId(){return this._formId}runValidator(a){return O(a.validate)?N[a.type](a.value,a.validate):a.validate(a.value)}async handleSubmit(a){this.baseStore.setState(a=>({...a,isSubmitted:!1,submissionAttempts:a.submissionAttempts+1,isSubmitSuccessful:!1})),m(()=>{Object.values(this.fieldInfo).forEach(a=>{a.instance&&(a.instance.state.meta.isTouched||a.instance.setMeta(a=>({...a,isTouched:!0})))})});let b=a??this.options.onSubmitMeta;if(!this.state.canSubmit&&!this._devtoolsSubmissionOverride)return void this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:b});this.baseStore.setState(a=>({...a,isSubmitting:!0}));let c=()=>{this.baseStore.setState(a=>({...a,isSubmitting:!1}))};if(await this.validateAllFields("submit"),!this.state.isFieldsValid){c(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:b}),S.emit("form-submission-state-change",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validateAllFields",errors:Object.values(this.state.fieldMeta).map(a=>a.errors).flat()});return}if(await this.validate("submit"),!this.state.isValid){c(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:b}),S.emit("form-submission-state-change",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validate",errors:this.state.errors});return}m(()=>{Object.values(this.fieldInfo).forEach(a=>{a.instance?.options.listeners?.onSubmit?.({value:a.instance.state.value,fieldApi:a.instance})})}),this.options.listeners?.onSubmit?.({formApi:this,meta:b});try{await this.options.onSubmit?.({value:this.state.values,formApi:this,meta:b}),m(()=>{this.baseStore.setState(a=>({...a,isSubmitted:!0,isSubmitSuccessful:!0})),S.emit("form-submission-state-change",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!0}),c()})}catch(a){throw this.baseStore.setState(a=>({...a,isSubmitSuccessful:!1})),S.emit("form-submission-state-change",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"inflight",onError:a}),c(),a}}setErrorMap(a){m(()=>{Object.entries(a).forEach(([a,b])=>{if(D(b)){let{formError:c,fieldErrors:d}=V(b);for(let b of Object.keys(this.fieldInfo))this.getFieldMeta(b)&&this.setFieldMeta(b,c=>({...c,errorMap:{...c.errorMap,[a]:d?.[b]},errorSourceMap:{...c.errorSourceMap,[a]:"form"}}));this.baseStore.setState(b=>({...b,errorMap:{...b.errorMap,[a]:c}}))}else this.baseStore.setState(c=>({...c,errorMap:{...c.errorMap,[a]:b}}))})})}}function V(a){if(a)return D(a)?{formError:V(a.form).formError,fieldErrors:a.fields}:{formError:a};return{formError:void 0}}function W(a){switch(a){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";default:return"onChange"}}a.s(["FormApi",()=>U],521607)},45936,57089,a=>{"use strict";var b=a.i(608061),c=a.i(521607),d=a.i(156458),e=a.i(53952),f=a.i(57843),g=a.i(601712),h=a.i(559423),i=a.i(66515),j=a.i(275995),k=a.i(495863);class l{constructor(a){this.options={},this.mount=()=>{let a=this.store.mount();void 0!==this.options.defaultValue&&this.form.setFieldValue(this.name,this.options.defaultValue,{dontUpdateMeta:!0}),this.getInfo().instance=this,this.update(this.options);let{onMount:b}=this.options.validators||{};if(b){let a=this.runValidator({validate:b,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});a&&this.setMeta(b=>({...b,errorMap:{...b?.errorMap,onMount:a},errorSourceMap:{...b?.errorSourceMap,onMount:"field"}}))}return this.options.listeners?.onMount?.({value:this.state.value,fieldApi:this}),a},this.update=a=>{this.options=a;let b=this.name!==a.name;if(this.name=a.name,void 0===this.state.value){let c=(0,d.getBy)(a.form.options.defaultValues,a.name),e=a.defaultValue??c;b?this.setValue(a=>a||e,{dontUpdateMeta:!0}):void 0!==e&&this.setValue(e,{dontUpdateMeta:!0})}void 0===this.form.getFieldMeta(this.name)&&this.setMeta(this.state.meta)},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(a,b)=>{this.form.setFieldValue(this.name,a,(0,d.mergeOpts)(b,{dontRunListeners:!0,dontValidate:!0})),b?.dontRunListeners||this.triggerOnChangeListener(),b?.dontValidate||this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=a=>this.form.setFieldMeta(this.name,a),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(a,b)=>{this.form.pushFieldValue(this.name,a,(0,d.mergeOpts)(b,{dontRunListeners:!0})),b?.dontRunListeners||this.triggerOnChangeListener()},this.insertValue=(a,b,c)=>{this.form.insertFieldValue(this.name,a,b,(0,d.mergeOpts)(c,{dontRunListeners:!0})),c?.dontRunListeners||this.triggerOnChangeListener()},this.replaceValue=(a,b,c)=>{this.form.replaceFieldValue(this.name,a,b,(0,d.mergeOpts)(c,{dontRunListeners:!0})),c?.dontRunListeners||this.triggerOnChangeListener()},this.removeValue=(a,b)=>{this.form.removeFieldValue(this.name,a,(0,d.mergeOpts)(b,{dontRunListeners:!0})),b?.dontRunListeners||this.triggerOnChangeListener()},this.swapValues=(a,b,c)=>{this.form.swapFieldValues(this.name,a,b,(0,d.mergeOpts)(c,{dontRunListeners:!0})),c?.dontRunListeners||this.triggerOnChangeListener()},this.moveValue=(a,b,c)=>{this.form.moveFieldValues(this.name,a,b,(0,d.mergeOpts)(c,{dontRunListeners:!0})),c?.dontRunListeners||this.triggerOnChangeListener()},this.clearValues=a=>{this.form.clearFieldValues(this.name,(0,d.mergeOpts)(a,{dontRunListeners:!0})),a?.dontRunListeners||this.triggerOnChangeListener()},this.getLinkedFields=a=>{let b=Object.values(this.form.fieldInfo),c=[];for(let d of b){if(!d.instance)continue;let{onChangeListenTo:b,onBlurListenTo:e}=d.instance.options.validators||{};"change"===a&&b?.includes(this.name)&&c.push(d.instance),"blur"===a&&e?.includes(this.name)&&c.push(d.instance)}return c},this.validateSync=(a,b)=>{let c=(0,d.getSyncValidatorArray)(a,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||k.defaultValidationLogic}),e=this.getLinkedFields(a).reduce((b,c)=>{let e=(0,d.getSyncValidatorArray)(a,{...c.options,form:c.form,validationLogic:c.form.options.validationLogic||k.defaultValidationLogic});return e.forEach(a=>{a.field=c}),b.concat(e)},[]),f=!1;(0,g.batch)(()=>{let a=(a,c)=>{let e=n(c.cause),g=c.validate?m(a.runValidator({validate:c.validate,value:{value:a.store.state.value,validationSource:"field",fieldApi:a},type:"validate"})):void 0,h=b[e],{newErrorValue:i,newSource:j}=(0,d.determineFieldLevelErrorSourceAndValue)({formLevelError:h,fieldLevelError:g});a.state.meta.errorMap?.[e]!==i&&a.setMeta(a=>({...a,errorMap:{...a.errorMap,[e]:i},errorSourceMap:{...a.errorSourceMap,[e]:j}})),i&&(f=!0)};for(let b of c)a(this,b);for(let b of e)b.validate&&a(b.field,b)});let h=n("submit");return this.state.meta.errorMap?.[h]&&"submit"!==a&&!f&&this.setMeta(a=>({...a,errorMap:{...a.errorMap,[h]:void 0},errorSourceMap:{...a.errorSourceMap,[h]:void 0}})),{hasErrored:f}},this.validateAsync=async(a,b)=>{let c=(0,d.getAsyncValidatorArray)(a,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||k.defaultValidationLogic}),e=await b,f=this.getLinkedFields(a),g=f.reduce((b,c)=>{let e=(0,d.getAsyncValidatorArray)(a,{...c.options,form:c.form,validationLogic:c.form.options.validationLogic||k.defaultValidationLogic});return e.forEach(a=>{a.field=c}),b.concat(e)},[]);for(let a of(this.state.meta.isValidating||this.setMeta(a=>({...a,isValidating:!0})),f))a.setMeta(a=>({...a,isValidating:!0}));let h=[],i=[],j=(a,b,c)=>{let f=n(b.cause),g=a.getInfo().validationMetaMap[f];g?.lastAbortController.abort();let h=new AbortController;this.getInfo().validationMetaMap[f]={lastAbortController:h},c.push(new Promise(async c=>{let g;try{g=await new Promise((c,d)=>{this.timeoutIds.validations[b.cause]&&clearTimeout(this.timeoutIds.validations[b.cause]),this.timeoutIds.validations[b.cause]=setTimeout(async()=>{if(h.signal.aborted)return c(void 0);try{c(await this.runValidator({validate:b.validate,value:{value:a.store.state.value,fieldApi:a,signal:h.signal,validationSource:"field"},type:"validateAsync"}))}catch(a){d(a)}},b.debounceMs)})}catch(a){g=a}if(h.signal.aborted)return c(void 0);let i=m(g),j=e[this.name]?.[f],{newErrorValue:k,newSource:l}=(0,d.determineFieldLevelErrorSourceAndValue)({formLevelError:j,fieldLevelError:i});a.setMeta(a=>({...a,errorMap:{...a?.errorMap,[f]:k},errorSourceMap:{...a.errorSourceMap,[f]:l}})),c(k)}))};for(let a of c)a.validate&&j(this,a,h);for(let a of g)a.validate&&j(a.field,a,i);let l=[];for(let a of((h.length||i.length)&&(l=await Promise.all(h),await Promise.all(i)),this.setMeta(a=>({...a,isValidating:!1})),f))a.setMeta(a=>({...a,isValidating:!1}));return l.filter(Boolean)},this.validate=(a,b)=>{if(!this.state.meta.isTouched)return[];let{fieldsErrorMap:c}=b?.skipFormValidation?{fieldsErrorMap:{}}:this.form.validateSync(a),{hasErrored:d}=this.validateSync(a,c[this.name]??{});if(d&&!this.options.asyncAlways)return this.getInfo().validationMetaMap[n(a)]?.lastAbortController.abort(),this.state.meta.errors;let e=b?.skipFormValidation?Promise.resolve({}):this.form.validateAsync(a);return this.validateAsync(a,e)},this.handleChange=a=>{this.setValue(a)},this.handleBlur=()=>{this.state.meta.isTouched||this.setMeta(a=>({...a,isTouched:!0})),this.state.meta.isBlurred||this.setMeta(a=>({...a,isBlurred:!0})),this.validate("blur"),this.triggerOnBlurListener()},this.parseValueWithSchema=a=>i.standardSchemaValidators.validate({value:this.state.value,validationSource:"field"},a),this.parseValueWithSchemaAsync=a=>i.standardSchemaValidators.validateAsync({value:this.state.value,validationSource:"field"},a),this.form=a.form,this.name=a.name,this.timeoutIds={validations:{},listeners:{},formListeners:{}},this.store=new h.Derived({deps:[this.form.store],fn:()=>({value:this.form.getFieldValue(this.name),meta:this.form.getFieldMeta(this.name)??{...j.defaultFieldMeta,...a.defaultMeta}})}),this.options=a}get state(){return this.store.state}runValidator(a){return(0,i.isStandardSchemaValidator)(a.validate)?i.standardSchemaValidators[a.type](a.value,a.validate):a.validate(a.value)}setErrorMap(a){this.setMeta(b=>({...b,errorMap:{...b.errorMap,...a}}))}triggerOnBlurListener(){let a=this.form.options.listeners?.onBlurDebounceMs;a&&a>0?(this.timeoutIds.formListeners.blur&&clearTimeout(this.timeoutIds.formListeners.blur),this.timeoutIds.formListeners.blur=setTimeout(()=>{this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this})},a)):this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this});let b=this.options.listeners?.onBlurDebounceMs;b&&b>0?(this.timeoutIds.listeners.blur&&clearTimeout(this.timeoutIds.listeners.blur),this.timeoutIds.listeners.blur=setTimeout(()=>{this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})},b)):this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})}triggerOnChangeListener(){let a=this.form.options.listeners?.onChangeDebounceMs;a&&a>0?(this.timeoutIds.formListeners.change&&clearTimeout(this.timeoutIds.formListeners.change),this.timeoutIds.formListeners.change=setTimeout(()=>{this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this})},a)):this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this});let b=this.options.listeners?.onChangeDebounceMs;b&&b>0?(this.timeoutIds.listeners.change&&clearTimeout(this.timeoutIds.listeners.change),this.timeoutIds.listeners.change=setTimeout(()=>{this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})},b)):this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})}}function m(a){if(a)return a}function n(a){switch(a){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";default:return"onChange"}}let o=f.useEffect;a.s(["useIsomorphicLayoutEffect",()=>o],57089);let p=({children:a,...c})=>{let g=function(a){let[b]=(0,f.useState)(()=>{let b=new l({...a,form:a.form,name:a.name});return b.Field=p,b});return o(b.mount,[b]),o(()=>{b.update(a)}),(0,e.useStore)(b.store,"array"===a.mode?a=>[a.meta,Object.keys(a.value??[]).length]:void 0),b}(c),h=(0,f.useMemo)(()=>(0,d.functionalUpdate)(a,g),[a,g,g.state.value,g.state.meta]);return(0,b.jsx)(b.Fragment,{children:h})};function q({form:a,selector:b,children:c}){let f=(0,e.useStore)(a.store,b);return(0,d.functionalUpdate)(c,f)}function r(a){let[d]=(0,f.useState)(()=>{let d=new c.FormApi(a);return d.Field=function(a){return(0,b.jsx)(p,{...a,form:d})},d.Subscribe=function(a){return(0,b.jsx)(q,{form:d,selector:a.selector,children:a.children})},d});return o(d.mount,[]),o(()=>{d.update(a)}),d}a.s(["useForm",()=>r],45936)}];

//# sourceMappingURL=_13126a4b._.js.map