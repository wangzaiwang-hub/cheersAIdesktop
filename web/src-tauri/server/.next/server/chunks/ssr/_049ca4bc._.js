module.exports=[61500,a=>{"use strict";var b=a.i(252813);a.s(["useDatasetApiAccessUrl",0,()=>(0,b.useDocLink)()("/api-reference/datasets/get-knowledge-base-list")])},878590,a=>{"use strict";function b(a,b){let c=Number.parseInt((a=a.replace("#","")).slice(0,2),16),d=Number.parseInt(a.slice(2,4),16),e=Number.parseInt(a.slice(4,6),16);return`rgba(${c},${d},${e},${b.toString()})`}function c(a){if(0===a.length)return{};let b={};for(let c of a.split(";"))if(c.trim().length>0){let[a,d]=c.split(":");Object.assign(b,{[a.trim()]:d.trim()})}return b}a.s(["CssTransform",()=>c,"hexToRGBA",()=>b])},463963,a=>{"use strict";var b=a.i(639378),c=a.i(878590);class d{chatColorTheme;chatColorThemeInverted;primaryColor="#1C64F2";backgroundHeaderColorStyle="backgroundImage: linear-gradient(to right, #2563eb, #0ea5e9)";headerBorderBottomStyle="";colorFontOnHeaderStyle="color: white";colorPathOnHeader="text-text-primary-on-surface";backgroundButtonDefaultColorStyle="backgroundColor: #1C64F2";roundedBackgroundColorStyle="backgroundColor: rgb(245 248 255)";chatBubbleColorStyle="";constructor(a=null,b=!1){this.chatColorTheme=a,this.chatColorThemeInverted=b,this.configCustomColor(),this.configInvertedColor()}configCustomColor(){null!==this.chatColorTheme&&""!==this.chatColorTheme&&(this.primaryColor=this.chatColorTheme??"#1C64F2",this.backgroundHeaderColorStyle=`backgroundColor: ${this.primaryColor}`,this.backgroundButtonDefaultColorStyle=`backgroundColor: ${this.primaryColor}; color: ${this.colorFontOnHeaderStyle};`,this.roundedBackgroundColorStyle=`backgroundColor: ${(0,c.hexToRGBA)(this.primaryColor,.05)}`,this.chatBubbleColorStyle=`backgroundColor: ${(0,c.hexToRGBA)(this.primaryColor,.15)}`)}configInvertedColor(){this.chatColorThemeInverted&&(this.backgroundHeaderColorStyle="backgroundColor: #ffffff",this.colorFontOnHeaderStyle=`color: ${this.primaryColor}`,this.headerBorderBottomStyle="borderBottom: 1px solid #ccc",this.colorPathOnHeader=this.primaryColor)}}let e=(0,b.createContext)(new class{_theme;buildChecker=!1;get theme(){return void 0===this._theme&&(this._theme=new d),this._theme}buildTheme(a=null,b=!1){this.buildChecker?(this.theme?.chatColorTheme!==a||this.theme?.chatColorThemeInverted!==b)&&(this._theme=new d(a,b),this.buildChecker=!0):(this._theme=new d(a,b),this.buildChecker=!0)}});a.s(["useThemeContext",0,()=>(0,b.useContext)(e)])},190124,a=>{"use strict";var b=a.i(516758),c=a.i(848636),d=a.i(528698),e=a.i(749249),f=a.i(724423),g=a.i(41511),h=a.i(692520);let i="access-control";a.s(["useAppWhiteListSubjects",0,(a,b)=>(0,d.useQuery)({queryKey:[i,"app-whitelist-subjects",a],queryFn:()=>(0,g.get)(`/enterprise/webapp/app/subjects?appId=${a}`),enabled:!!a&&b,staleTime:0,gcTime:0}),"useGetUserCanAccessApp",0,({appId:a,isInstalledApp:b=!0,enabled:c})=>{let e=(0,f.useGlobalPublicStore)(a=>a.systemFeatures);return(0,d.useQuery)({queryKey:[i,"user-can-access-app",a,e.webapp_auth.enabled,b],queryFn:()=>e.webapp_auth.enabled?(0,h.getUserCanAccess)(a,b):{result:!0},enabled:void 0!==c?c:!!a,staleTime:0,gcTime:0})},"useSearchForWhiteListCandidates",0,(a,c)=>(0,b.useInfiniteQuery)({queryKey:[i,"app-whitelist-candidates",a],queryFn:({pageParam:b})=>{let c=new URLSearchParams;return Object.keys(a).forEach(b=>{a[b]&&c.append(b,`${a[b]}`)}),c.append("pageNumber",`${b}`),(0,g.get)(`/enterprise/webapp/app/subject/search?${new URLSearchParams(c).toString()}`)},initialPageParam:1,getNextPageParam:a=>{if(a.hasMore)return a.currPage+1},gcTime:0,staleTime:0,enabled:c}),"useUpdateAccessMode",0,()=>{let a=(0,e.useQueryClient)();return(0,c.useMutation)({mutationKey:[i,"update-access-mode"],mutationFn:a=>(0,g.post)("/enterprise/webapp/app/access-mode",{body:a}),onSuccess:()=>{a.invalidateQueries({queryKey:[i,"app-whitelist-subjects"]})}})}])},618184,142222,801455,676841,477273,a=>{"use strict";var b=a.i(608061),c=a.i(796807),d=a.i(298407);let e=({ref:a,...e})=>(0,b.jsx)(c.default,{...e,ref:a,data:d.default});e.displayName="ExternalKnowledgeBase",a.s(["default",0,e],142222);var f=a.i(607922);let g=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:f.default});g.displayName="General",a.s(["default",0,g],801455),a.i(936177);var h=a.i(736484);let i=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:h.default});i.displayName="ParentChild",a.s(["default",0,i],676841);var j=a.i(286099);let k=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:j.default});k.displayName="Qa",a.s(["default",0,k],477273),a.s([],618184)},806926,a=>{"use strict";var b=a.i(142222);a.s(["ExternalKnowledgeBase",()=>b.default])},441424,a=>{"use strict";var b=a.i(801455);a.s(["General",()=>b.default])},887263,24759,a=>{"use strict";var b=a.i(676841);a.s(["ParentChild",()=>b.default],887263);var c=a.i(477273);a.s(["Qa",()=>c.default],24759)},224256,211827,999578,504454,385920,200363,863991,732164,701204,460895,560551,562416,329751,185105,20111,706492,a=>{"use strict";var b=a.i(608061),c=a.i(796807),d=a.i(307888);let e=({ref:a,...e})=>(0,b.jsx)(c.default,{...e,ref:a,data:d.default});e.displayName="AddChunks",a.s(["default",0,e],211827);var f=a.i(893473);let g=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:f.default});g.displayName="ApiAggregate",a.s(["default",0,g],999578);var h=a.i(463490);let i=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:h.default});i.displayName="ArrowShape",a.s(["default",0,i],504454);var j=a.i(292453);let k=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:j.default});k.displayName="Chunk",a.s(["default",0,k],385920);var l=a.i(957435);let m=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:l.default});m.displayName="Collapse",a.s(["default",0,m],200363),a.i(891880);var n=a.i(252327);let o=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:n.default});o.displayName="Economic",a.s(["default",0,o],863991);var p=a.i(163953);let q=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:p.default});q.displayName="FullTextSearch",a.s(["default",0,q],732164);var r=a.i(705324);let s=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:r.default});s.displayName="GeneralChunk",a.s(["default",0,s],701204);var t=a.i(913145);let u=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:t.default});u.displayName="HighQuality",a.s(["default",0,u],460895);var v=a.i(777723);let w=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:v.default});w.displayName="HybridSearch",a.s(["default",0,w],560551);var x=a.i(598170);let y=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:x.default});y.displayName="ParentChildChunk",a.s(["default",0,y],562416);var z=a.i(590823);let A=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:z.default});A.displayName="QuestionAndAnswer",a.s(["default",0,A],329751);var B=a.i(430051);let C=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:B.default});C.displayName="SearchLinesSparkle",a.s(["default",0,C],185105);var D=a.i(232868);let E=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:D.default});E.displayName="SearchMenu",a.s(["default",0,E],20111);var F=a.i(4415);let G=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:F.default});G.displayName="VectorSearch",a.s(["default",0,G],706492),a.s([],224256)},986431,463561,12588,765239,a=>{"use strict";a.i(618184);var b,c,d,e,f,g,h,i,j=a.i(806926),k=a.i(441424),l=a.i(887263),m=a.i(24759);a.i(224256);var n=a.i(701204);a.s(["GeneralChunk",()=>n.default],463561);var n=n,o=a.i(562416);a.s(["ParentChildChunk",()=>o.default],12588);var o=o,p=a.i(329751);a.s(["QuestionAndAnswer",()=>p.default],765239);var p=p,q=((b={}).FILE="upload_file",b.NOTION="notion_import",b.WEB="website_crawl",b),r=((c={}).onlyMe="only_me",c.allTeamMembers="all_team_members",c.partialMembers="partial_members",c),s=((d={}).text="text_model",d.qa="qa_model",d.parentChild="hierarchical_model",d),t=((e={}).init="init",e.running="running",e.finished="finished",e),u=((f={}).general="custom",f.parentChild="hierarchical",f),v=((g={}).SemanticFirst="semantic_first",g.KeywordFirst="keyword_first",g.Customized="customized",g),w=((h={}).RerankingModel="reranking_model",h.WeightedScore="weighted_score",h),x=((i={}).enable="enable",i.disable="disable",i.archive="archive",i.unArchive="un_archive",i.delete="delete",i.summary="summary",i);let y={text_model:k.General,qa_model:m.Qa,hierarchical_model:l.ParentChild,external:j.ExternalKnowledgeBase};n.default,p.default,o.default,a.s(["CUSTOMIZABLE_DOC_TYPES",0,["book","web_page","paper","social_media_post","personal_document","business_document","im_chat_log"],"ChunkingMode",()=>s,"CrawlStep",()=>t,"DEFAULT_WEIGHTED_SCORE",0,{allHighQualityVectorSearch:{semantic:1,keyword:0},allHighQualityFullTextSearch:{semantic:0,keyword:1},other:{semantic:.7,keyword:.3}},"DOC_FORM_ICON_WITH_BG",0,y,"DOC_FORM_TEXT",0,{text_model:"general",qa_model:"qa",hierarchical_model:"parentChild"},"DataSourceType",()=>q,"DatasetPermission",()=>r,"DisplayStatusList",0,["queuing","indexing","paused","error","available","enabled","disabled","archived"],"DocumentActionType",()=>x,"ProcessMode",()=>u,"RerankingModeEnum",()=>w,"WeightedScoreEnum",()=>v],986431)},698636,a=>{"use strict";var b=a.i(639378);let c=(0,b.createContext)({});a.s(["default",0,c,"useDatasetDetailContext",0,()=>(0,b.useContext)(c),"useDatasetDetailContextWithSelector",0,a=>(0,b.useContextSelector)(c,a)])},388206,a=>{"use strict";var b=a.i(57843);let c=(a,b)=>{let c=a instanceof Map?a:new Map(a.entries()),d=b instanceof Map?b:new Map(b.entries());if(c.size!==d.size)return!1;for(let[a,b]of c)if(!d.has(a)||!Object.is(b,d.get(a)))return!1;return!0};function d(a){let d=b.default.useRef(void 0);return b=>{let e=a(b);return!function(a,b){if(Object.is(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b||Object.getPrototypeOf(a)!==Object.getPrototypeOf(b))return!1;if(Symbol.iterator in a&&Symbol.iterator in b){if("entries"in a&&"entries"in b)return c(a,b);let d=a[Symbol.iterator](),e=b[Symbol.iterator](),f=d.next(),g=e.next();for(;!f.done&&!g.done;){if(!Object.is(f.value,g.value))return!1;f=d.next(),g=e.next()}return!!f.done&&!!g.done}return c({entries:()=>Object.entries(a)},{entries:()=>Object.entries(b)})}(d.current,e)?d.current=e:d.current}}a.s(["useShallow",()=>d],388206)},314608,a=>{"use strict";var b=a.i(240944);a.s(["useUnmount",()=>b.default])},70854,a=>{"use strict";var b=a.i(57843);a.i(752298);var c=a.i(693025);a.s(["useKnowledge",0,()=>{let{t:a}=(0,c.useTranslation)(),d=(0,b.useCallback)(b=>a(`indexingTechnique.${b}`,{ns:"dataset"}),[a]),e=(0,b.useCallback)((b,c)=>c?a("indexingMethod.invertedIndex",{ns:"dataset"}):a(`indexingMethod.${b}`,{ns:"dataset"}),[a]),f=(0,b.useCallback)((a,b)=>{let c=d(a);return b&&(c+=` \xb7 ${e(b,"economy"===a)}`),c},[d,e]);return{formatIndexingTechnique:d,formatIndexingMethod:e,formatIndexingTechniqueAndMethod:f}}])},22761,a=>{"use strict";var b=a.i(608061),c=a.i(57843),d=a.i(527344);let e=c.memo(({className:a})=>(0,b.jsx)("div",{className:(0,d.cn)("absolute size-[112px] rounded-full bg-util-colors-blue-brand-blue-brand-500 blur-[80px]",a)}));a.s(["default",0,e])},102569,a=>{"use strict";var b=a.i(854940);a.s(["TriggerAll",()=>b.default])},24561,a=>{"use strict";var b=a.i(41511),c=a.i(314576);a.i(494261);var d=a.i(735310);let e=async(a,d,e)=>(0,b.get)(`${(0,c.getFlowPrefix)(a)}/${d}/workflows/draft/variables`,{params:{page:e,limit:100}}),f=async(a,b)=>{let{items:c,total:d}=await e(a,b,1);if(d<=100)return c;let f=Math.ceil(d/100),g=[];for(let c=2;c<=f;c++)g.push(e(a,b,c));return(await Promise.all(g)).forEach(({items:a})=>{c.push(...a)}),c},g=async(a,d,e)=>{let{items:f}=await (0,b.get)(`${(0,c.getFlowPrefix)(a)}/${d}/workflows/draft/nodes/${e}/variables`);return f};a.s(["fetchAllInspectVars",0,f,"fetchNodeDefault",0,(a,c,d={})=>(0,b.get)(`apps/${a}/workflows/default-workflow-block-configs/${c}`,{params:{q:JSON.stringify(d)}}),"fetchNodeInspectVars",0,g,"fetchNodesDefaultConfigs",0,a=>(0,b.get)(a),"fetchPipelineNodeDefault",0,(a,c,d={})=>(0,b.get)(`rag/pipelines/${a}/workflows/default-workflow-block-configs/${c}`,{params:{q:JSON.stringify(d)}}),"fetchPublishedWorkflow",0,a=>(0,b.get)(a),"fetchWorkflowDraft",0,a=>(0,b.get)(a,{},{silent:!0}),"getIterationSingleNodeRunUrl",0,(a,b,d,e)=>`${(0,c.getFlowPrefix)(a)}/${d}/${b?"advanced-chat/":""}workflows/draft/iteration/nodes/${e}/run`,"getLoopSingleNodeRunUrl",0,(a,b,d,e)=>`${(0,c.getFlowPrefix)(a)}/${d}/${b?"advanced-chat/":""}workflows/draft/loop/nodes/${e}/run`,"singleNodeRun",0,(a,d,e,f)=>(0,b.post)(`${(0,c.getFlowPrefix)(a)}/${d}/workflows/draft/nodes/${e}/run`,{body:f}),"stopWorkflowRun",0,a=>(0,b.post)(a),"syncWorkflowDraft",0,({url:a,params:c})=>{let e=(a=>{let{graph:b}=a;if(!b?.nodes?.length)return a;let c=b.nodes.map(a=>{let b=(a=>{let b=a.data;if(!b||b.type!==d.BlockEnum.TriggerPlugin)return a;let c={type:d.BlockEnum.TriggerPlugin,title:b.title??"",desc:b.desc??"",plugin_id:b.plugin_id??"",provider_id:b.provider_id??"",event_name:b.event_name??"",subscription_id:b.subscription_id??"",plugin_unique_identifier:b.plugin_unique_identifier??"",event_parameters:"object"==typeof b.event_parameters&&null!==b.event_parameters?b.event_parameters:{}};return{...a,data:c}})(a);if(b.data?.type===d.BlockEnum.Start&&Array.isArray(b.data.variables)){let a={...b,data:{...b.data}};return a.data.variables=b.data.variables.map(a=>{if(a&&"json_object"===a.type&&"string"==typeof a.json_schema)try{let b=JSON.parse(a.json_schema);return{...a,json_schema:b}}catch{}return a}),a}return b});return{...a,graph:{...b,nodes:c}}})(c);return(0,b.post)(a,{body:e},{silent:!0})}],24561)},302547,a=>{"use strict";let b=(0,a.i(282791).create)(a=>({tagList:[],setTagList:b=>a(()=>({tagList:b})),showTagManagementModal:!1,setShowTagManagementModal:b=>a(()=>({showTagManagementModal:b}))}));a.s(["useStore",0,b])},556476,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(111089),e=a.i(57843);a.i(752298);var f=a.i(693025),g=a.i(909795),h=a.i(816134),i=a.i(940272),j=a.i(146172),k=a.i(218257),l=a.i(527344),m=a.i(355968),n=a.i(429178),o=a.i(114715);a.s(["default",0,({show:a,dataset:p,onSuccess:q,onClose:r})=>{let{t:s}=(0,f.useTranslation)(),[t,u]=(0,e.useState)(!1),[v,w]=(0,e.useState)(p.name),[x,y]=(0,e.useState)(p.description),z=p.external_knowledge_info.external_knowledge_id,A=p.external_knowledge_info.external_knowledge_api_id,[B,C]=(0,e.useState)(p.icon_info?.icon_type==="image"?{type:"image",url:p.icon_info?.icon_url||"",fileId:p.icon_info?.icon||""}:{type:"emoji",icon:p.icon_info?.icon||"",background:p.icon_info?.icon_background||""}),[D,E]=(0,e.useState)(!1),F=(0,e.useRef)(p.icon_info?.icon_type==="image"?{type:"image",url:p.icon_info?.icon_url||"",fileId:p.icon_info?.icon||""}:{type:"emoji",icon:p.icon_info?.icon||"",background:p.icon_info?.icon_background||""}),G=(0,e.useCallback)(()=>{E(!0),F.current=B},[B]),H=(0,e.useCallback)(a=>{C(a),E(!1)},[]),I=(0,e.useCallback)(()=>{C(F.current),E(!1)},[]),J=(0,e.useCallback)(async()=>{if(!v.trim())return void o.default.notify({type:"error",message:s("form.nameError",{ns:"datasetSettings"})});try{u(!0);let a={name:v,description:x,icon_info:{icon:"image"===B.type?B.fileId:B.icon,icon_type:B.type,icon_background:"image"===B.type?void 0:B.background,icon_url:"image"===B.type?B.url:void 0}};z&&A&&(a.external_knowledge_id=z,a.external_knowledge_api_id=A),await (0,k.updateDatasetSetting)({datasetId:p.id,body:a}),o.default.notify({type:"success",message:s("actionMsg.modifiedSuccessfully",{ns:"common"})}),q&&q(),r()}catch{o.default.notify({type:"error",message:s("actionMsg.modifiedUnsuccessfully",{ns:"common"})})}finally{u(!1)}},[B,x,p.id,A,z,v,r,q,s]);return(0,b.jsxs)(i.default,{className:"w-[520px] max-w-[520px] rounded-xl px-8 py-6",isShow:a,onClose:d.noop,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between pb-2",children:[(0,b.jsx)("div",{className:"text-xl font-medium leading-[30px] text-text-primary",children:s("title",{ns:"datasetSettings"})}),(0,b.jsx)("div",{className:"cursor-pointer p-2",onClick:r,children:(0,b.jsx)(c.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:(0,l.cn)("flex flex-col py-4"),children:[(0,b.jsx)("div",{className:"shrink-0 py-2 text-sm font-medium leading-[20px] text-text-primary",children:s("form.name",{ns:"datasetSettings"})}),(0,b.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,b.jsx)(m.default,{size:"medium",onClick:G,className:"cursor-pointer",iconType:B.type,icon:"image"===B.type?B.fileId:B.icon,background:"image"===B.type?void 0:B.background,imageUrl:"image"===B.type?B.url:void 0,showEditIcon:!0}),(0,b.jsx)(h.default,{value:v,onChange:a=>w(a.target.value),className:"h-9 grow",placeholder:s("form.namePlaceholder",{ns:"datasetSettings"})||""})]})]}),(0,b.jsxs)("div",{className:(0,l.cn)("flex flex-col py-4"),children:[(0,b.jsx)("div",{className:"shrink-0 py-2 text-sm font-medium leading-[20px] text-text-primary",children:s("form.desc",{ns:"datasetSettings"})}),(0,b.jsx)("div",{className:"w-full",children:(0,b.jsx)(j.default,{value:x,onChange:a=>y(a.target.value),className:"resize-none",placeholder:s("form.descPlaceholder",{ns:"datasetSettings"})||""})})]})]}),(0,b.jsxs)("div",{className:"flex justify-end pt-6",children:[(0,b.jsx)(g.default,{className:"mr-2",onClick:r,children:s("operation.cancel",{ns:"common"})}),(0,b.jsx)(g.default,{disabled:t,variant:"primary",onClick:J,children:s("operation.save",{ns:"common"})})]}),D&&(0,b.jsx)(n.default,{onSelect:H,onClose:I})]})}])},340527,a=>{"use strict";var b=a.i(999578);a.s(["ApiAggregate",()=>b.default])},829655,a=>{"use strict";var b=a.i(873956);a.s(["WindowCursor",()=>b.default])},537193,a=>{"use strict";var b=a.i(169570);a.s(["ApiAggregate",()=>b.default])},182769,a=>{"use strict";var b=a.i(608061);a.i(752298);var c=a.i(693025);a.i(275560);var d=a.i(537193),e=a.i(829655),f=a.i(483664),g=a.i(355968);let h=(0,b.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.833497 5.13481C0.833483 4.69553 0.83347 4.31654 0.858973 4.0044C0.88589 3.67495 0.94532 3.34727 1.10598 3.03195C1.34567 2.56155 1.72812 2.17909 2.19852 1.93941C2.51384 1.77875 2.84152 1.71932 3.17097 1.6924C3.48312 1.6669 3.86209 1.66691 4.30137 1.66693L7.62238 1.66684C8.11701 1.66618 8.55199 1.66561 8.95195 1.80356C9.30227 1.92439 9.62134 2.12159 9.88607 2.38088C10.1883 2.67692 10.3823 3.06624 10.603 3.50894L11.3484 5.00008H14.3679C15.0387 5.00007 15.5924 5.00006 16.0434 5.03691C16.5118 5.07518 16.9424 5.15732 17.3468 5.36339C17.974 5.68297 18.4839 6.19291 18.8035 6.82011C19.0096 7.22456 19.0917 7.65515 19.13 8.12356C19.1668 8.57455 19.1668 9.12818 19.1668 9.79898V13.5345C19.1668 14.2053 19.1668 14.7589 19.13 15.2099C19.0917 15.6784 19.0096 16.1089 18.8035 16.5134C18.4839 17.1406 17.974 17.6505 17.3468 17.9701C16.9424 18.1762 16.5118 18.2583 16.0434 18.2966C15.5924 18.3334 15.0387 18.3334 14.3679 18.3334H5.63243C4.96163 18.3334 4.40797 18.3334 3.95698 18.2966C3.48856 18.2583 3.05798 18.1762 2.65353 17.9701C2.02632 17.6505 1.51639 17.1406 1.19681 16.5134C0.990734 16.1089 0.908597 15.6784 0.870326 15.2099C0.833478 14.7589 0.833487 14.2053 0.833497 13.5345V5.13481ZM7.51874 3.33359C8.17742 3.33359 8.30798 3.34447 8.4085 3.37914C8.52527 3.41942 8.63163 3.48515 8.71987 3.57158C8.79584 3.64598 8.86396 3.7579 9.15852 4.34704L9.48505 5.00008L2.50023 5.00008C2.50059 4.61259 2.50314 4.34771 2.5201 4.14012C2.5386 3.91374 2.57 3.82981 2.59099 3.7886C2.67089 3.6318 2.79837 3.50432 2.95517 3.42442C2.99638 3.40343 3.08031 3.37203 3.30669 3.35353C3.54281 3.33424 3.85304 3.33359 4.3335 3.33359H7.51874Z",fill:"#444CE7"})}),i=(0,b.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,b.jsxs)("g",{clipPath:"url(#clip0_6294_13848)",children:[(0,b.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.287 21.9133L1.70748 18.6999C1.08685 17.9267 0.75 16.976 0.75 15.9974V4.36124C0.75 2.89548 1.92269 1.67923 3.43553 1.57594L15.3991 0.759137C16.2682 0.699797 17.1321 0.930818 17.8461 1.41353L22.0494 4.25543C22.8018 4.76414 23.25 5.59574 23.25 6.48319V19.7124C23.25 21.1468 22.0969 22.3345 20.6157 22.4256L7.3375 23.243C6.1555 23.3158 5.01299 22.8178 4.287 21.9133Z",fill:"white"}),(0,b.jsx)("path",{d:"M8.43607 10.1842V10.0318C8.43607 9.64564 8.74535 9.32537 9.14397 9.29876L12.0475 9.10491L16.0628 15.0178V9.82823L15.0293 9.69046V9.6181C15.0293 9.22739 15.3456 8.90501 15.7493 8.88433L18.3912 8.74899V9.12918C18.3912 9.30765 18.2585 9.46031 18.0766 9.49108L17.4408 9.59861V18.0029L16.6429 18.2773C15.9764 18.5065 15.2343 18.2611 14.8527 17.6853L10.9545 11.803V17.4173L12.1544 17.647L12.1377 17.7583C12.0853 18.1069 11.7843 18.3705 11.4202 18.3867L8.43607 18.5195C8.39662 18.1447 8.67758 17.8093 9.06518 17.7686L9.45771 17.7273V10.2416L8.43607 10.1842Z",fill:"black"}),(0,b.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.5062 2.22521L3.5426 3.04201C2.82599 3.09094 2.27051 3.66706 2.27051 4.36136V15.9975C2.27051 16.6499 2.49507 17.2837 2.90883 17.7992L5.48835 21.0126C5.90541 21.5322 6.56174 21.8183 7.24076 21.7765L20.519 20.9591C21.1995 20.9172 21.7293 20.3716 21.7293 19.7125V6.48332C21.7293 6.07557 21.5234 5.69348 21.1777 5.45975L16.9743 2.61784C16.546 2.32822 16.0277 2.1896 15.5062 2.22521ZM4.13585 4.54287C3.96946 4.41968 4.04865 4.16303 4.25768 4.14804L15.5866 3.33545C15.9476 3.30956 16.3063 3.40896 16.5982 3.61578L18.8713 5.22622C18.9576 5.28736 18.9171 5.41935 18.8102 5.42516L6.8129 6.07764C6.44983 6.09739 6.09144 5.99073 5.80276 5.77699L4.13585 4.54287ZM6.25018 8.12315C6.25018 7.7334 6.56506 7.41145 6.9677 7.38952L19.6523 6.69871C20.0447 6.67734 20.375 6.97912 20.375 7.35898V18.8141C20.375 19.2031 20.0613 19.5247 19.6594 19.5476L7.05516 20.2648C6.61845 20.2896 6.25018 19.954 6.25018 19.5312V8.12315Z",fill:"black"})]}),(0,b.jsx)("defs",{children:(0,b.jsx)("clipPath",{id:"clip0_6294_13848",children:(0,b.jsx)("rect",{width:"24",height:"24",fill:"white"})})})]}),j={app:(0,b.jsx)(g.default,{className:"border !border-[rgba(0,0,0,0.05)]"}),api:(0,b.jsx)("div",{className:"rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-blue-brand-blue-brand-500 p-1 shadow-md",children:(0,b.jsx)(d.ApiAggregate,{className:"h-4 w-4 text-text-primary-on-surface"})}),dataset:(0,b.jsx)(g.default,{innerIcon:h,className:"!border-[0.5px] !border-indigo-100 !bg-indigo-25"}),webapp:(0,b.jsx)("div",{className:"rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-blue-brand-blue-brand-500 p-1 shadow-md",children:(0,b.jsx)(e.WindowCursor,{className:"h-4 w-4 text-text-primary-on-surface"})}),notion:(0,b.jsx)(g.default,{innerIcon:i,className:"!border-[0.5px] !border-indigo-100 !bg-white"})};function k({icon:a,icon_background:d,name:e,isExternal:h,type:i,hoverTip:k,textStyle:l,isExtraInLine:m,mode:n="expand",iconType:o="app",hideType:p}){let{t:q}=(0,c.useTranslation)();return(0,b.jsxs)("div",{className:"flex grow items-center",children:[a&&d&&"app"===o&&(0,b.jsx)("div",{className:"mr-2 shrink-0",children:(0,b.jsx)(g.default,{icon:a,background:d})}),"app"!==o&&(0,b.jsx)("div",{className:"mr-2 shrink-0",children:j[o]}),"expand"===n&&(0,b.jsxs)("div",{className:"group w-full",children:[(0,b.jsxs)("div",{className:`system-md-semibold flex flex-row items-center text-text-secondary group-hover:text-text-primary ${l?.main??""}`,children:[(0,b.jsx)("div",{className:"min-w-0 overflow-hidden text-ellipsis break-normal",children:e}),k&&(0,b.jsx)(f.default,{popupContent:(0,b.jsx)("div",{className:"w-[240px]",children:k}),popupClassName:"ml-1",triggerClassName:"w-4 h-4 ml-1",position:"top"})]}),!p&&m&&(0,b.jsx)("div",{className:"system-2xs-medium-uppercase flex text-text-tertiary",children:i}),!p&&!m&&(0,b.jsx)("div",{className:"system-2xs-medium-uppercase text-text-tertiary",children:h?q("externalTag",{ns:"dataset"}):i})]})]})}a.s(["default",()=>k])},774944,a=>{a.v({autoWidth:"style-module__Qu6CpW__autoWidth",close:"style-module__Qu6CpW__close",copied:"style-module__Qu6CpW__copied",copyIcon:"style-module__Qu6CpW__copyIcon",customApi:"style-module__Qu6CpW__customApi",customModal:"style-module__Qu6CpW__customModal",trash:"style-module__Qu6CpW__trash",trashIcon:"style-module__Qu6CpW__trashIcon",w64:"style-module__Qu6CpW__w64"})},972729,a=>{"use strict";var b=a.i(608061),c=a.i(911364),d=a.i(893500),e=a.i(429150),f=a.i(57843);a.i(752298);var g=a.i(693025),h=a.i(175809),i=a.i(909795),j=a.i(42550),k=a.i(748240),l=a.i(105249),m=a.i(940272),n=a.i(705134),o=a.i(98654),p=a.i(802066),q=a.i(218257),r=a.i(847733),s=a.i(926261),t=a.i(875067),u=a.i(934402),v=a.i(483664);let w=({value:a="",className:c,children:d})=>{let[e,g]=(0,f.useState)(!1);return(0,f.useEffect)(()=>{if(e){let a=setTimeout(()=>{g(!1)},1e3);return()=>{clearTimeout(a)}}},[e]),(0,b.jsx)("div",{className:`flex items-center rounded-lg bg-components-input-bg-normal py-2 hover:bg-state-base-hover ${c}`,children:(0,b.jsxs)("div",{className:"flex h-5 grow items-center",children:[d,(0,b.jsx)("div",{className:"relative h-full grow text-[13px]",children:(0,b.jsx)("div",{className:"r-0 absolute left-0 top-0 w-full cursor-pointer truncate pl-2 pr-2",onClick:()=>{(0,t.default)(a),g(!0)},children:(0,b.jsx)(v.default,{popupContent:e?`${(0,u.t)("copied",{ns:"appApi"})}`:`${(0,u.t)("copy",{ns:"appApi"})}`,position:"bottom",children:(0,b.jsx)("span",{className:"text-text-secondary",children:a})})})}),(0,b.jsx)("div",{className:"h-4 w-px shrink-0 bg-divider-regular"}),(0,b.jsx)("div",{className:"mx-1",children:(0,b.jsx)(k.default,{content:a})})]})})};var x=a.i(774944);let y=({isShow:a=!1,onClose:c,newKey:e,className:f})=>{let{t:h}=(0,g.useTranslation)();return(0,b.jsxs)(m.default,{isShow:a,onClose:c,title:`${h("apiKeyModal.apiSecretKey",{ns:"appApi"})}`,className:`px-8 ${f}`,children:[(0,b.jsx)("div",{className:"-mr-2 -mt-6 mb-4 flex justify-end",children:(0,b.jsx)(d.XMarkIcon,{className:"h-6 w-6 cursor-pointer text-text-tertiary",onClick:c})}),(0,b.jsx)("p",{className:"mt-1 text-[13px] font-normal leading-5 text-text-tertiary",children:h("apiKeyModal.generateTips",{ns:"appApi"})}),(0,b.jsx)("div",{className:"my-4",children:(0,b.jsx)(w,{className:"w-full",value:e?.token})}),(0,b.jsx)("div",{className:"my-4 flex justify-end",children:(0,b.jsx)(i.default,{className:`shrink-0 ${x.default.w64}`,onClick:c,children:(0,b.jsx)("span",{className:"text-xs font-medium text-text-secondary",children:h("actionMsg.ok",{ns:"appApi"})})})})]})};a.s(["default",0,({isShow:a=!1,appId:t,onClose:u})=>{let{t:v}=(0,g.useTranslation)(),{formatTime:w}=(0,o.default)(),{currentWorkspace:z,isCurrentWorkspaceManager:A,isCurrentWorkspaceEditor:B}=(0,n.useAppContext)(),[C,D]=(0,f.useState)(!1),[E,F]=(0,f.useState)(!1),[G,H]=(0,f.useState)(void 0),I=(0,s.useInvalidateAppApiKeys)(),J=(0,r.useInvalidateDatasetApiKeys)(),{data:K,isLoading:L}=(0,s.useAppApiKeys)(t,{enabled:!!t&&a}),{data:M,isLoading:N}=(0,r.useDatasetApiKeys)({enabled:!t&&a}),O=t?K:M,P=t?L:N,[Q,R]=(0,f.useState)(""),S=async()=>{if(D(!1),!Q)return;let a=t?p.delApikey:q.delApikey,b=t?{url:`/apps/${t}/api-keys/${Q}`,params:{}}:{url:`/datasets/api-keys/${Q}`,params:{}};await a(b),t?I(t):J()},T=async()=>{let a=t?{url:`/apps/${t}/api-keys`,body:{}}:{url:"/datasets/api-keys",body:{}},b=t?p.createApikey:q.createApikey,c=await b(a);F(!0),H(c),t?I(t):J()};return(0,b.jsxs)(m.default,{isShow:a,onClose:u,title:`${v("apiKeyModal.apiSecretKey",{ns:"appApi"})}`,className:`${x.default.customModal} flex flex-col px-8`,children:[(0,b.jsx)("div",{className:"-mr-2 -mt-6 mb-4 flex justify-end",children:(0,b.jsx)(d.XMarkIcon,{className:"h-6 w-6 cursor-pointer text-text-tertiary",onClick:u})}),(0,b.jsx)("p",{className:"mt-1 shrink-0 text-[13px] font-normal leading-5 text-text-tertiary",children:v("apiKeyModal.apiSecretKeyTips",{ns:"appApi"})}),P&&(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(l.default,{})}),!!O?.data?.length&&(0,b.jsxs)("div",{className:"mt-4 flex grow flex-col overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex h-9 shrink-0 items-center border-b border-divider-regular text-xs font-semibold text-text-tertiary",children:[(0,b.jsx)("div",{className:"w-64 shrink-0 px-3",children:v("apiKeyModal.secretKey",{ns:"appApi"})}),(0,b.jsx)("div",{className:"w-[200px] shrink-0 px-3",children:v("apiKeyModal.created",{ns:"appApi"})}),(0,b.jsx)("div",{className:"w-[200px] shrink-0 px-3",children:v("apiKeyModal.lastUsed",{ns:"appApi"})}),(0,b.jsx)("div",{className:"grow px-3"})]}),(0,b.jsx)("div",{className:"grow overflow-auto",children:O.data.map(a=>{let c;return(0,b.jsxs)("div",{className:"flex h-9 items-center border-b border-divider-regular text-sm font-normal text-text-secondary",children:[(0,b.jsx)("div",{className:"w-64 shrink-0 truncate px-3 font-mono",children:(c=a.token,`${c.slice(0,3)}...${c.slice(-20)}`)}),(0,b.jsx)("div",{className:"w-[200px] shrink-0 truncate px-3",children:w(Number(a.created_at),v("dateTimeFormat",{ns:"appLog"}))}),(0,b.jsx)("div",{className:"w-[200px] shrink-0 truncate px-3",children:a.last_used_at?w(Number(a.last_used_at),v("dateTimeFormat",{ns:"appLog"})):v("never",{ns:"appApi"})}),(0,b.jsxs)("div",{className:"flex grow space-x-2 px-3",children:[(0,b.jsx)(k.default,{content:a.token}),A&&(0,b.jsx)(h.default,{onClick:()=>{R(a.id),D(!0)},children:(0,b.jsx)(e.RiDeleteBinLine,{className:"h-4 w-4"})})]})]},a.id)})})]}),(0,b.jsx)("div",{className:"flex",children:(0,b.jsxs)(i.default,{className:`mt-4 flex shrink-0 ${x.default.autoWidth}`,onClick:T,disabled:!z||!B,children:[(0,b.jsx)(c.PlusIcon,{className:"mr-1 flex h-4 w-4 shrink-0"}),(0,b.jsx)("div",{className:"text-xs font-medium text-text-secondary",children:v("apiKeyModal.createNewSecretKey",{ns:"appApi"})})]})}),(0,b.jsx)(y,{className:"shrink-0",isShow:E,onClose:()=>F(!1),newKey:G}),C&&(0,b.jsx)(j.default,{title:`${v("actionMsg.deleteConfirmTitle",{ns:"appApi"})}`,content:`${v("actionMsg.deleteConfirmTips",{ns:"appApi"})}`,isShow:C,onConfirm:S,onCancel:()=>{R(""),D(!1)}})]})}],972729)},234416,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(57843);a.i(752298);var e=a.i(693025),f=a.i(909795),g=a.i(972729);a.s(["default",0,({className:a,appId:h,textCls:i})=>{let[j,k]=(0,d.useState)(!1),{t:l}=(0,e.useTranslation)();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(f.default,{className:`px-3 ${a}`,onClick:()=>k(!0),size:"small",variant:"ghost",children:[(0,b.jsx)("div",{className:"flex h-3.5 w-3.5 items-center justify-center",children:(0,b.jsx)(c.RiKey2Line,{className:"h-3.5 w-3.5 text-text-tertiary"})}),(0,b.jsx)("div",{className:`system-xs-medium px-[3px] text-text-tertiary ${i}`,children:l("apiKey",{ns:"appApi"})})]}),(0,b.jsx)(g.default,{isShow:j,onClose:()=>k(!1),appId:h})]})}])},657252,a=>{a.v({app:"style-module__pvaiZG__app"})},890301,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(314608),e=a.i(860653),f=a.i(533306),g=a.i(57843);a.i(752298);var h=a.i(693025),i=a.i(388206),j=a.i(45272),k=a.i(243103),l=a.i(105249),m=a.i(302547),n=a.i(705134),o=a.i(585124),p=a.i(280342),q=a.i(802066),r=a.i(954200),s=a.i(527344),t=a.i(657252);let u=(0,e.default)(async()=>{},{loadableGenerated:{modules:[903565]},ssr:!1}),v=g.memo(a=>{let{children:e,appId:v}=a,{t:w}=(0,h.useTranslation)(),x=(0,f.useRouter)(),y=(0,f.usePathname)(),z=(0,o.default)()===o.MediaType.mobile,{isCurrentWorkspaceEditor:A,isLoadingCurrentWorkspace:B,currentWorkspace:C}=(0,n.useAppContext)(),{appDetail:D,setAppDetail:E,setAppSidebarExpand:F}=(0,k.useStore)((0,i.useShallow)(a=>({appDetail:a.appDetail,setAppDetail:a.setAppDetail,setAppSidebarExpand:a.setAppSidebarExpand}))),G=(0,m.useStore)(a=>a.showTagManagementModal),[H,I]=(0,g.useState)(!1),[J,K]=(0,g.useState)(null),[L,M]=(0,g.useState)([]),N=(0,g.useCallback)((a,b,d)=>[...b?[{name:w("appMenus.promptEng",{ns:"common"}),href:`/app/${a}/${d===r.AppModeEnum.WORKFLOW||d===r.AppModeEnum.ADVANCED_CHAT?"workflow":"configuration"}`,icon:c.RiTerminalWindowLine,selectedIcon:c.RiTerminalWindowFill}]:[],{name:w("appMenus.apiAccess",{ns:"common"}),href:`/app/${a}/develop`,icon:c.RiTerminalBoxLine,selectedIcon:c.RiTerminalBoxFill},...b?[{name:d!==r.AppModeEnum.WORKFLOW?w("appMenus.logAndAnn",{ns:"common"}):w("appMenus.logs",{ns:"common"}),href:`/app/${a}/logs`,icon:c.RiFileList3Line,selectedIcon:c.RiFileList3Fill}]:[],{name:w("appMenus.overview",{ns:"common"}),href:`/app/${a}/overview`,icon:c.RiDashboard2Line,selectedIcon:c.RiDashboard2Fill}],[w]);return((0,p.default)(D?.name||w("menus.appDetail",{ns:"common"})),(0,g.useEffect)(()=>{if(D){let a=localStorage.getItem("app-detail-collapse-or-expand")||"expand";F(z?z?"collapse":"expand":a)}},[D,z]),(0,g.useEffect)(()=>{E(),I(!0),(0,q.fetchAppDetailDirect)({url:"/apps",id:v}).then(a=>{K(a)}).catch(a=>{404===a.status&&x.replace("/apps")}).finally(()=>{I(!1)})},[v,y]),(0,g.useEffect)(()=>{!J||!C.id||B||H||(!A&&(y.endsWith("configuration")||y.endsWith("workflow")||y.endsWith("logs"))?x.replace(`/app/${v}/overview`):(J.mode===r.AppModeEnum.WORKFLOW||J.mode===r.AppModeEnum.ADVANCED_CHAT)&&y.endsWith("configuration")?x.replace(`/app/${v}/workflow`):J.mode!==r.AppModeEnum.WORKFLOW&&J.mode!==r.AppModeEnum.ADVANCED_CHAT&&y.endsWith("workflow")?x.replace(`/app/${v}/configuration`):(E({...J,enable_sso:!1}),M(N(v,A,J.mode))))},[J,A,H,B]),(0,d.useUnmount)(()=>{E()}),D)?(0,b.jsxs)("div",{className:(0,s.cn)(t.default.app,"relative flex","overflow-hidden"),children:[D&&(0,b.jsx)(j.default,{navigation:L}),(0,b.jsx)("div",{className:"grow overflow-hidden bg-components-panel-bg",children:e}),G&&(0,b.jsx)(u,{type:"app",show:G})]}):(0,b.jsx)("div",{className:"flex h-full items-center justify-center bg-background-body",children:(0,b.jsx)(l.default,{})})});a.s(["default",0,v])}];

//# sourceMappingURL=_049ca4bc._.js.map