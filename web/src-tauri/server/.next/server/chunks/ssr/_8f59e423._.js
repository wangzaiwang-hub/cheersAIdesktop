module.exports=[666115,a=>{"use strict";var b=a.i(821446),c=a.i(534427),d=a.i(57843);function e(a,b,d){try{return a(b)}catch(a){return(0,c.l)("[nuqs] Error while parsing value `%s`: %O"+(d?" (for key `%s`)":""),b,a,d),null}}function f(a){function b(b){if(void 0===b)return null;let c="";if(Array.isArray(b)){if(void 0===b[0])return null;c=b[0]}return"string"==typeof b&&(c=b),e(a.parse,c)}return{type:"single",eq:(a,b)=>a===b,...a,parseServerSide:b,withDefault(a){return{...this,defaultValue:a,parseServerSide:c=>b(c)??a}},withOptions(a){return{...this,...a}}}}let g=f({parse:a=>a,serialize:String});f({parse:a=>{let b=parseInt(a);return b==b?b:null},serialize:a=>""+Math.round(a)}),f({parse:a=>{let b=parseInt(a);return b==b?b-1:null},serialize:a=>""+Math.round(a+1)}),f({parse:a=>{let b=parseInt(a,16);return b==b?b:null},serialize:a=>{let b=Math.round(a).toString(16);return(1&b.length?"0":"")+b}}),f({parse:a=>{let b=parseFloat(a);return b==b?b:null},serialize:String});let h=f({parse:a=>"true"===a.toLowerCase(),serialize:String});function i(a,b){return a.valueOf()===b.valueOf()}function j(a,b=","){let c=a.eq??((a,b)=>a===b),d=encodeURIComponent(b);return f({parse:c=>""===c?[]:c.split(b).map((c,f)=>e(a.parse,c.replaceAll(d,b),`[${f}]`)).filter(a=>null!=a),serialize:c=>c.map(c=>(a.serialize?a.serialize(c):String(c)).replaceAll(b,d)).join(b),eq:(a,b)=>a===b||a.length===b.length&&a.every((a,d)=>c(a,b[d]))})}f({parse:a=>{let b=parseInt(a);return b==b?new Date(b):null},serialize:a=>""+a.valueOf(),eq:i}),f({parse:a=>{let b=new Date(a);return b.valueOf()==b.valueOf()?b:null},serialize:a=>a.toISOString(),eq:i}),f({parse:a=>{let b=new Date(a.slice(0,10));return b.valueOf()==b.valueOf()?b:null},serialize:a=>a.toISOString().slice(0,10),eq:i});let k=(0,b.r)(),l={};function m(a,e={}){let f=(0,d.useId)(),g=(0,c.i)(),h=(0,c.a)(),{history:i="replace",scroll:j=g?.scroll??!1,shallow:p=g?.shallow??!0,throttleMs:q=b.s.timeMs,limitUrlUpdates:r=g?.limitUrlUpdates,clearOnDefault:s=g?.clearOnDefault??!0,startTransition:t,urlKeys:u=l}=e,v=Object.keys(a).join(","),w=(0,d.useMemo)(()=>Object.fromEntries(Object.keys(a).map(a=>[a,u[a]??a])),[v,JSON.stringify(u)]),x=(0,c.r)(Object.values(w)),y=x.searchParams,z=(0,d.useRef)({}),A=(0,d.useMemo)(()=>Object.fromEntries(Object.keys(a).map(b=>[b,a[b].defaultValue??null])),[Object.values(a).map(({defaultValue:a})=>a).join(",")]),B=b.t.useQueuedQueries(Object.values(w)),[C,D]=(0,d.useState)(()=>n(a,u,y??new URLSearchParams,B).state),E=(0,d.useRef)(C);if((0,c.c)("[nuq+ %s `%s`] render - state: %O, iSP: %s",f,v,C,y),Object.keys(z.current).join("&")!==Object.values(w).join("&")){let{state:b,hasChanged:d}=n(a,u,y,B,z.current,E.current);d&&((0,c.c)("[nuq+ %s `%s`] State changed: %O",f,v,{state:b,initialSearchParams:y,queuedQueries:B,queryRef:z.current,stateRef:E.current}),E.current=b,D(b)),z.current=Object.fromEntries(Object.entries(w).map(([b,c])=>[c,a[b]?.type==="multi"?y?.getAll(c):y?.get(c)??null]))}(0,d.useEffect)(()=>{let{state:b,hasChanged:d}=n(a,u,y,B,z.current,E.current);d&&((0,c.c)("[nuq+ %s `%s`] State changed: %O",f,v,{state:b,initialSearchParams:y,queuedQueries:B,queryRef:z.current,stateRef:E.current}),E.current=b,D(b))},[Object.values(w).map(a=>`${a}=${y?.getAll(a)}`).join("&"),JSON.stringify(B)]),(0,d.useEffect)(()=>{let b=Object.keys(a).reduce((b,d)=>(b[d]=({state:b,query:e})=>{D(g=>{let{defaultValue:h}=a[d],i=w[d],j=b??h??null;return Object.is(g[d]??h??null,j)?((0,c.c)("[nuq+ %s `%s`] Cross-hook key sync %s: %O (default: %O). no change, skipping, resolved: %O",f,v,i,b,h,E.current),g):(E.current={...E.current,[d]:j},z.current[i]=e,(0,c.c)("[nuq+ %s `%s`] Cross-hook key sync %s: %O (default: %O). updateInternalState, resolved: %O",f,v,i,b,h,E.current),E.current)})},b),{});for(let d of Object.keys(a)){let a=w[d];(0,c.c)("[nuq+ %s `%s`] Subscribing to sync for `%s`",f,a,v),k.on(a,b[d])}return()=>{for(let d of Object.keys(a)){let a=w[d];(0,c.c)("[nuq+ %s `%s`] Unsubscribing to sync for `%s`",f,a,v),k.off(a,b[d])}}},[v,w]);let F=(0,d.useCallback)((d,e={})=>{let g,l=Object.fromEntries(Object.keys(a).map(a=>[a,null])),m="function"==typeof d?d(o(E.current,A))??l:d??l;(0,c.c)("[nuq+ %s `%s`] setState: %O",f,v,m);let n=0,u=!1,y=[];for(let[d,f]of Object.entries(m)){let l=a[d],m=w[d];if(!l||void 0===f)continue;(e.clearOnDefault??l.clearOnDefault??s)&&null!==f&&void 0!==l.defaultValue&&(l.eq??((a,b)=>a===b))(f,l.defaultValue)&&(f=null);let o=null===f?null:(l.serialize??String)(f);k.emit(m,{state:f,query:o});let v={key:m,query:o,options:{history:e.history??l.history??i,shallow:e.shallow??l.shallow??p,scroll:e.scroll??l.scroll??j,startTransition:e.startTransition??l.startTransition??t}};if(e?.limitUrlUpdates?.method==="debounce"||r?.method==="debounce"||l.limitUrlUpdates?.method==="debounce"){!0===v.options.shallow&&console.warn((0,c.s)(422));let a=e?.limitUrlUpdates?.timeMs??r?.timeMs??l.limitUrlUpdates?.timeMs??b.s.timeMs,d=b.t.push(v,a,x,h);n<a&&(g=d,n=a)}else{let a=e?.limitUrlUpdates?.timeMs??l?.limitUrlUpdates?.timeMs??r?.timeMs??e.throttleMs??l.throttleMs??q;y.push(b.t.abort(m)),b.n.push(v,a),u=!0}}let z=y.reduce((a,b)=>b(a),u?b.n.flush(x,h):b.n.getPendingPromise(x));return g??z},[v,i,p,j,q,r?.method,r?.timeMs,t,w,x.updateUrl,x.getSearchParamsSnapshot,x.rateLimitFactor,h,A]);return[(0,d.useMemo)(()=>o(C,A),[C,A]),F]}function n(a,c,d,f,g,h){let i=!1,j=Object.entries(a).reduce((a,[j,k])=>{var l;let m=c?.[j]??j,n=f[m],o="multi"===k.type?[]:null,p=void 0===n?("multi"===k.type?d?.getAll(m):d?.get(m))??o:n;return g&&h&&((l=g[m]??o)===p||null!==l&&null!==p&&"string"!=typeof l&&"string"!=typeof p&&l.length===p.length&&l.every((a,b)=>a===p[b]))?a[j]=h[j]??null:(i=!0,a[j]=((0,b.i)(p)?null:e(k.parse,p,m))??null,g&&(g[m]=p)),a},{});if(!i){let b=Object.keys(a),c=Object.keys(h??{});i=b.length!==c.length||b.some(a=>!c.includes(a))}return{state:j,hasChanged:i}}function o(a,b){return Object.fromEntries(Object.keys(a).map(c=>[c,a[c]??b[c]??null]))}function p(a,b={}){let{parse:c,type:e,serialize:f,eq:g,defaultValue:h,...i}=b,[{[a]:j},k]=m({[a]:{parse:c??(a=>a),type:e,serialize:f,eq:g,defaultValue:h}},i);return[j,(0,d.useCallback)((b,c={})=>k(c=>({[a]:"function"==typeof b?b(c[a]):b}),c),[a,k])]}a.s(["createParser",()=>f,"parseAsArrayOf",()=>j,"parseAsBoolean",()=>h,"parseAsString",()=>g,"useQueryState",()=>p,"useQueryStates",()=>m],666115)},263477,a=>{"use strict";a.s(["EDUCATION_RE_VERIFY_ACTION",0,"educationReVerify","EDUCATION_VERIFYING_LOCALSTORAGE_ITEM",0,"educationVerifying","EDUCATION_VERIFY_URL_SEARCHPARAMS_ACTION",0,"getEducationVerify"])},730357,a=>{"use strict";var b=a.i(423880),c=a.i(954200);a.s(["default",0,()=>{let{theme:a,resolvedTheme:d,...e}=(0,b.useTheme)();return{theme:a===c.Theme.system?d:a,...e}}])},10035,206913,915253,953471,217772,214822,236010,763043,933152,a=>{"use strict";var b=a.i(608061),c=a.i(796807);a.i(299498);var d=a.i(210610);let e=({ref:a,...e})=>(0,b.jsx)(c.default,{...e,ref:a,data:d.default});e.displayName="Generator",a.s(["default",0,e],206913);var f=a.i(377427);let g=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:f.default});g.displayName="Group",a.s(["default",0,g],915253);var h=a.i(851881);let i=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:h.default});i.displayName="HourglassShape",a.s(["default",0,i],953471);var j=a.i(232736);let k=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:j.default});k.displayName="Mcp",a.s(["default",0,k],217772);var l=a.i(184158);let m=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:l.default});m.displayName="NoToolPlaceholder",a.s(["default",0,m],214822);var n=a.i(377930);let o=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:n.default});o.displayName="Openai",a.s(["default",0,o],236010);var p=a.i(303712);let q=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:p.default});q.displayName="ReplayLine",a.s(["default",0,q],763043);var r=a.i(608954);let s=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:r.default});s.displayName="SquareChecklist",a.s(["default",0,s],933152),a.s([],10035)},423963,a=>{"use strict";var b=a.i(915253);a.s(["Group",()=>b.default])},933988,a=>{"use strict";var b,c,d,e,f,g,h,i,j,k,l=((b={}).textInput="text-input",b.textNumber="number-input",b.secretInput="secret-input",b.select="select",b.radio="radio",b.checkbox="checkbox",b.boolean="boolean",b.files="files",b.file="file",b.modelSelector="model-selector",b.toolSelector="tool-selector",b.multiToolSelector="array[tools]",b.appSelector="app-selector",b.any="any",b.object="object",b.array="array",b.dynamicSelect="dynamic-select",b),m=((c={}).textGeneration="llm",c.textEmbedding="text-embedding",c.rerank="rerank",c.speech2text="speech2text",c.moderation="moderation",c.tts="tts",c),n=((d={}).predefinedModel="predefined-model",d.customizableModel="customizable-model",d.fetchFromRemote="fetch-from-remote",d),o=((e={}).toolCall="tool-call",e.multiToolCall="multi-tool-call",e.agentThought="agent-thought",e.streamToolCall="stream-tool-call",e.vision="vision",e.video="video",e.document="document",e.audio="audio",e.StructuredOutput="structured-output",e),p=((f={}).toolCall="Tool Call",f.multiToolCall="Multi Tool Call",f.agentThought="Agent Thought",f.vision="Vision",f.video="Video",f.document="Document",f.audio="Audio",f),q=((g={}).active="active",g.noConfigure="no-configure",g.quotaExceeded="quota-exceeded",g.noPermission="no-permission",g.disabled="disabled",g.credentialRemoved="credential-removed",g),r=((h={}).active="active",h.noConfigure="no-configure",h),s=((i={}).system="system",i.custom="custom",i),t=((j={}).trial="trial",j.free="free",j.paid="paid",j),u=((k={}).configProviderCredential="config-provider-credential",k.configCustomModel="config-custom-model",k.addCustomModelToModelList="add-custom-model-to-model-list",k.configModelCredential="config-model-credential",k);a.s(["ConfigurationMethodEnum",()=>n,"CurrentSystemQuotaTypeEnum",()=>t,"CustomConfigurationStatusEnum",()=>r,"FormTypeEnum",()=>l,"MODEL_STATUS_TEXT",0,{"no-configure":{en_US:"No Configure",zh_Hans:"未配置凭据"},"quota-exceeded":{en_US:"Quota Exceeded",zh_Hans:"额度不足"},"no-permission":{en_US:"No Permission",zh_Hans:"无使用权限"}},"MODEL_TYPE_TEXT",0,{llm:"LLM","text-embedding":"Text Embedding",rerank:"Rerank",speech2text:"Speech2text",moderation:"Moderation",tts:"TTS"},"ModelFeatureEnum",()=>o,"ModelFeatureTextEnum",()=>p,"ModelModalModeEnum",()=>u,"ModelStatusEnum",()=>q,"ModelTypeEnum",()=>m,"PreferredProviderTypeEnum",()=>s])},516758,a=>{"use strict";var b=a.i(450529),c=a.i(900873),d=class extends b.QueryObserver{constructor(a,b){super(a,b)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(a){super.setOptions({...a,behavior:(0,c.infiniteQueryBehavior)()})}getOptimisticResult(a){return a.behavior=(0,c.infiniteQueryBehavior)(),super.getOptimisticResult(a)}fetchNextPage(a){return this.fetch({...a,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(a){return this.fetch({...a,meta:{fetchMore:{direction:"backward"}}})}createResult(a,b){let{state:d}=a,e=super.createResult(a,b),{isFetching:f,isRefetching:g,isError:h,isRefetchError:i}=e,j=d.fetchMeta?.fetchMore?.direction,k=h&&"forward"===j,l=f&&"forward"===j,m=h&&"backward"===j,n=f&&"backward"===j;return{...e,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,c.hasNextPage)(b,d.data),hasPreviousPage:(0,c.hasPreviousPage)(b,d.data),isFetchNextPageError:k,isFetchingNextPage:l,isFetchPreviousPageError:m,isFetchingPreviousPage:n,isRefetchError:i&&!k&&!m,isRefetching:g&&!l&&!n}}},e=a.i(438732);function f(a,b){return(0,e.useBaseQuery)(a,d,b)}a.s(["useInfiniteQuery",()=>f],516758)},456521,(a,b,c)=>{b.exports=function(a){var b=typeof a;return null!=a&&("object"==b||"function"==b)}},127361,(a,b,c)=>{b.exports=a.g&&a.g.Object===Object&&a.g},622187,(a,b,c)=>{var d=a.r(127361),e="object"==typeof self&&self&&self.Object===Object&&self;b.exports=d||e||Function("return this")()},365462,(a,b,c)=>{var d=a.r(622187);b.exports=function(){return d.Date.now()}},394194,(a,b,c)=>{var d=/\s/;b.exports=function(a){for(var b=a.length;b--&&d.test(a.charAt(b)););return b}},78720,(a,b,c)=>{var d=a.r(394194),e=/^\s+/;b.exports=function(a){return a?a.slice(0,d(a)+1).replace(e,""):a}},272098,(a,b,c)=>{b.exports=a.r(622187).Symbol},614372,(a,b,c)=>{var d=a.r(272098),e=Object.prototype,f=e.hasOwnProperty,g=e.toString,h=d?d.toStringTag:void 0;b.exports=function(a){var b=f.call(a,h),c=a[h];try{a[h]=void 0;var d=!0}catch(a){}var e=g.call(a);return d&&(b?a[h]=c:delete a[h]),e}},512092,(a,b,c)=>{var d=Object.prototype.toString;b.exports=function(a){return d.call(a)}},785671,(a,b,c)=>{var d=a.r(272098),e=a.r(614372),f=a.r(512092),g=d?d.toStringTag:void 0;b.exports=function(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":g&&g in Object(a)?e(a):f(a)}},393340,(a,b,c)=>{b.exports=function(a){return null!=a&&"object"==typeof a}},225387,(a,b,c)=>{var d=a.r(785671),e=a.r(393340);b.exports=function(a){return"symbol"==typeof a||e(a)&&"[object Symbol]"==d(a)}},334275,(a,b,c)=>{var d=a.r(78720),e=a.r(456521),f=a.r(225387),g=0/0,h=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,j=/^0o[0-7]+$/i,k=parseInt;b.exports=function(a){if("number"==typeof a)return a;if(f(a))return g;if(e(a)){var b="function"==typeof a.valueOf?a.valueOf():a;a=e(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=d(a);var c=i.test(a);return c||j.test(a)?k(a.slice(2),c?2:8):h.test(a)?g:+a}},707917,(a,b,c)=>{var d=a.r(456521),e=a.r(365462),f=a.r(334275),g=Math.max,h=Math.min;b.exports=function(a,b,c){var i,j,k,l,m,n,o=0,p=!1,q=!1,r=!0;if("function"!=typeof a)throw TypeError("Expected a function");function s(b){var c=i,d=j;return i=j=void 0,o=b,l=a.apply(d,c)}function t(a){var c=a-n,d=a-o;return void 0===n||c>=b||c<0||q&&d>=k}function u(){var a,c,d,f=e();if(t(f))return v(f);m=setTimeout(u,(a=f-n,c=f-o,d=b-a,q?h(d,k-c):d))}function v(a){return(m=void 0,r&&i)?s(a):(i=j=void 0,l)}function w(){var a,c=e(),d=t(c);if(i=arguments,j=this,n=c,d){if(void 0===m)return o=a=n,m=setTimeout(u,b),p?s(a):l;if(q)return clearTimeout(m),m=setTimeout(u,b),s(n)}return void 0===m&&(m=setTimeout(u,b)),l}return b=f(b)||0,d(c)&&(p=!!c.leading,k=(q="maxWait"in c)?g(f(c.maxWait)||0,b):k,r="trailing"in c?!!c.trailing:r),w.cancel=function(){void 0!==m&&clearTimeout(m),o=0,i=n=j=m=void 0},w.flush=function(){return void 0===m?l:v(e())},w}},981133,767080,a=>{"use strict";var b=a.i(314875),c=a.i(707917),c=c,d=a.i(57843),e=a.i(288e3),f=a.i(240944),g=a.i(429264),h=a.i(936557);let i=function(a,i){h.default&&!(0,g.isFunction)(a)&&console.error("useDebounceFn expected parameter is a function, got ".concat(typeof a));var j,k=(0,e.default)(a),l=null!=(j=null==i?void 0:i.wait)?j:1e3,m=(0,d.useMemo)(function(){return(0,c.default)(function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return k.current.apply(k,(0,b.__spreadArray)([],(0,b.__read)(a),!1))},l,i)},[]);return(0,f.default)(function(){m.cancel()}),{run:m,cancel:m.cancel,flush:m.flush}};a.s(["default",0,i],767080),a.s(["useDebounceFn",0,i],981133)},50084,263636,a=>{"use strict";var b,c,d,e,f,g,h,i=((b={}).tool="tool",b.model="model",b.extension="extension",b.agent="agent-strategy",b.datasource="datasource",b.trigger="trigger",b),j=((c={}).marketplace="marketplace",c.github="github",c.local="package",c.debugging="remote",c),k=((d={}).OAUTH="OAUTH",d.APIKEY="APIKEY",d.MANUAL="MANUAL",d),l=((e={}).everyone="everyone",e.admin="admins",e.noOne="noone",e),m=((f={}).setUrl="url",f.selectPackage="selecting",f.readyToInstall="readyToInstall",f.uploadFailed="uploadFailed",f.installed="installed",f.installFailed="failed",f),n=((g={}).uploading="uploading",g.uploadFailed="uploadFailed",g.readyToInstall="readyToInstall",g.installing="installing",g.installed="installed",g.installFailed="failed",g),o=((h={}).running="running",h.success="success",h.failed="failed",h);a.s(["InstallStep",()=>n,"InstallStepFromGitHub",()=>m,"PermissionType",()=>l,"PluginCategoryEnum",()=>i,"PluginSource",()=>j,"SupportedCreationMethods",()=>k,"TaskStatus",()=>o],263636);let p={all:"all",model:i.model,tool:i.tool,agent:i.agent,extension:i.extension,datasource:i.datasource,trigger:i.trigger,bundle:"bundle"},q=new Set([p.all,p.tool]);a.s(["DEFAULT_SORT",0,{sortBy:"install_count",sortOrder:"DESC"},"PLUGIN_CATEGORY_WITH_COLLECTIONS",0,q,"PLUGIN_TYPE_SEARCH_MAP",0,p,"SCROLL_BOTTOM_THRESHOLD",0,100],50084)},239567,947803,a=>{"use strict";var b=a.i(516758),c=a.i(528698),d=a.i(749249),e=a.i(981133),f=a.i(57843),g=a.i(41511),h=a.i(50084),i=a.i(263636),j=a.i(18039),k=a.i(187864),l=a.i(499257);let m=a=>"bundle"===a.type?`${j.MARKETPLACE_API_PREFIX}/bundles/${a.org}/${a.name}/icon`:`${j.MARKETPLACE_API_PREFIX}/plugins/${a.org}/${a.name}/icon`,n=a=>"bundle"===a.type?{...a,icon:m(a),brief:a.description,label:a.labels}:{...a,icon:m(a)},o=async(a,b,c)=>{let d=[];try{let e=await k.marketplaceClient.collectionPlugins({params:{collectionId:a},body:b},{signal:c?.signal});d=(e.data?.plugins||[]).map(a=>n(a))}catch(a){d=[]}return d},p=async(a,b)=>{let c=[],d={};try{let e=await k.marketplaceClient.collections({query:{...a,page:1,page_size:100}},{signal:b?.signal});c=e.data?.collections||[],await Promise.all(c.map(async c=>{let e=await o(c.name,a,b);d[c.name]=e}))}catch(a){c=[],d={}}return{marketplaceCollections:c,marketplaceCollectionPluginsMap:d}},q=async(a,b,c)=>{if(!a)return{plugins:[],total:0,page:1,page_size:40};let{query:d,sort_by:e,sort_order:f,category:g,tags:h,type:i,page_size:j=40}=a;try{let a=await k.marketplaceClient.searchAdvanced({params:{kind:"bundle"===i?"bundles":"plugins"},body:{page:b,page_size:j,query:d,sort_by:e,sort_order:f,category:"all"!==g?g:"",tags:h}},{signal:c});return{plugins:(a.data.bundles||a.data.plugins||[]).map(a=>n(a)),total:a.data.total,page:b,page_size:j}}catch{return{plugins:[],total:0,page:b,page_size:j}}},r=a=>[i.PluginCategoryEnum.tool,i.PluginCategoryEnum.agent,i.PluginCategoryEnum.model,i.PluginCategoryEnum.datasource,i.PluginCategoryEnum.trigger].includes(a)?`category=${a}`:a===i.PluginCategoryEnum.extension?"category=endpoint":"bundle"===a?"type=bundle":"",s=a=>{if(a!==h.PLUGIN_TYPE_SEARCH_MAP.all)return a===h.PLUGIN_TYPE_SEARCH_MAP.bundle?"bundle":"plugin"};function t(a){return a===h.PLUGIN_TYPE_SEARCH_MAP.all?{}:{category:a,condition:r(a),type:s(a)}}a.s(["getCollectionsParams",()=>t,"getFormattedPlugin",0,n,"getMarketplaceCollectionsAndPlugins",0,p,"getMarketplaceListCondition",0,r,"getMarketplaceListFilterType",0,s,"getMarketplacePlugins",0,q,"getMarketplacePluginsByCollectionId",0,o,"getPluginDetailLinkInMarketplace",0,a=>"bundle"===a.type?`/bundles/${a.org}/${a.name}`:`/plugins/${a.org}/${a.name}`,"getPluginIconInMarketplace",0,m,"getPluginLinkInMarketplace",0,(a,b)=>"bundle"===a.type?(0,l.getMarketplaceUrl)(`/bundles/${a.org}/${a.name}`,b):(0,l.getMarketplaceUrl)(`/plugins/${a.org}/${a.name}`,b)],947803),a.s(["useMarketplaceCollectionsAndPlugins",0,()=>{let[a,b]=(0,f.useState)(),[d,e]=(0,f.useState)(),[g,h]=(0,f.useState)(),{data:i,isFetching:j,isSuccess:k,isPending:l}=(0,c.useQuery)({queryKey:["marketplaceCollectionsAndPlugins",a],queryFn:({signal:b})=>p(a,{signal:b}),enabled:void 0!==a,staleTime:3e5,gcTime:6e5,retry:!1}),m=(0,f.useCallback)(a=>{b(a?{...a}:{})},[]),n=!!a&&(j||l);return{marketplaceCollections:d??i?.marketplaceCollections,setMarketplaceCollections:e,marketplaceCollectionPluginsMap:g??i?.marketplaceCollectionPluginsMap,setMarketplaceCollectionPluginsMap:h,queryMarketplaceCollectionsAndPlugins:m,isLoading:n,isSuccess:k}},"useMarketplaceContainerScroll",0,(a,b="marketplace-container")=>{let c=(0,f.useCallback)(b=>{let{scrollTop:c,scrollHeight:d,clientHeight:e}=b.target;c+e>=d-h.SCROLL_BOTTOM_THRESHOLD&&c>0&&a()},[a]);(0,f.useEffect)(()=>{let a=document.getElementById(b);return a&&a.addEventListener("scroll",c),()=>{a&&a.removeEventListener("scroll",c)}},[c])},"useMarketplacePlugins",0,()=>{let a=(0,d.useQueryClient)(),[c,h]=(0,f.useState)(),i=(0,f.useCallback)(a=>{let b=a.page_size||40;return{...a,page_size:b}},[]),j=(0,b.useInfiniteQuery)({queryKey:["marketplacePlugins",c],queryFn:async({pageParam:a=1,signal:b})=>{if(!c)return{plugins:[],total:0,page:1,page_size:40};let{query:d,sort_by:e,sort_order:f,category:h,tags:j,exclude:k,type:l,page_size:m}=i(c),o="bundle"===l?"bundles":"plugins";try{let c=await (0,g.postMarketplace)(`/${o}/search/advanced`,{body:{page:a,page_size:m,query:d,sort_by:e,sort_order:f,category:"all"!==h?h:"",tags:j,exclude:k,type:l},signal:b});return{plugins:(c.data.bundles||c.data.plugins||[]).map(a=>n(a)),total:c.data.total,page:a,page_size:m}}catch{return{plugins:[],total:0,page:a,page_size:m}}},getNextPageParam:a=>{let b=a.page+1;return a.page*a.page_size<(a.total||0)?b:void 0},initialPageParam:1,enabled:!!c,staleTime:3e5,gcTime:6e5,retry:!1}),k=(0,f.useCallback)(()=>{h(void 0),a.removeQueries({queryKey:["marketplacePlugins"]})},[a]),l=(0,f.useCallback)(a=>{h(i(a))},[i]),{run:m,cancel:o}=(0,e.useDebounceFn)(a=>{l(a)},{wait:500}),p=!!c,q=void 0!==j.data,r=p&&q?j.data.pages.flatMap(a=>a.plugins):void 0;return{plugins:r,total:p&&q?j.data.pages?.[0]?.total:void 0,resetPlugins:k,queryPlugins:l,queryPluginsWithDebounced:m,cancelQueryPluginsWithDebounced:o,isLoading:p&&(j.isPending||j.isFetching&&!j.data),isFetchingNextPage:j.isFetchingNextPage,hasNextPage:j.hasNextPage,fetchNextPage:j.fetchNextPage,page:j.data?.pages?.length||(j.isPending&&p?1:0)}},"useMarketplacePluginsByCollectionId",0,(a,b)=>{let{data:d,isFetching:e,isSuccess:f,isPending:g}=(0,c.useQuery)({queryKey:["marketplaceCollectionPlugins",a,b],queryFn:({signal:c})=>a?o(a,b,{signal:c}):Promise.resolve([]),enabled:!!a,staleTime:3e5,gcTime:6e5,retry:!1});return{plugins:d||[],isLoading:!!a&&(e||g),isSuccess:f}}],239567)},124116,a=>{"use strict";var b=a.i(608061),c=a.i(314875),d=a.i(57843),e=function(){var a=this;this.subscriptions=new Set,this.emit=function(b){var d,e;try{for(var f=(0,c.__values)(a.subscriptions),g=f.next();!g.done;g=f.next())(0,g.value)(b)}catch(a){d={error:a}}finally{try{g&&!g.done&&(e=f.return)&&e.call(f)}finally{if(d)throw d.error}}},this.useSubscription=function(b){var c=(0,d.useRef)(void 0);c.current=b,(0,d.useEffect)(function(){function b(a){c.current&&c.current(a)}return a.subscriptions.add(b),function(){a.subscriptions.delete(b)}},[])}};let f=function(){var a=(0,d.useRef)(void 0);return a.current||(a.current=new e),a.current};var g=a.i(639378);let h=(0,g.createContext)({eventEmitter:null});a.s(["EventEmitterContextProvider",0,({children:a})=>{let c=f();return(0,b.jsx)(h.Provider,{value:{eventEmitter:c},children:a})},"default",0,h,"useEventEmitterContextContext",0,()=>(0,g.useContext)(h)],124116)},933887,a=>{"use strict";let b={PROVIDER:"provider",MEMBERS:"members",BILLING:"billing",DATA_SOURCE:"data-source",API_BASED_EXTENSION:"api-based-extension",CUSTOM:"custom",LANGUAGE:"language"},c=b.MEMBERS;a.s(["ACCOUNT_SETTING_MODAL_ACTION",0,"showSettings","ACCOUNT_SETTING_TAB",0,b,"DEFAULT_ACCOUNT_SETTING_TAB",0,c,"isValidAccountSettingTab",0,a=>!!a&&Object.values(b).includes(a)])},748948,a=>{"use strict";var b=a.i(18039);a.s(["setZendeskConversationFields",0,(a,c)=>{!b.IS_CE_EDITION&&window.zE&&window.zE("messenger:set","conversationFields",a,c)},"toggleZendeskWindow",0,a=>{!b.IS_CE_EDITION&&window.zE&&window.zE("messenger",a?"open":"close")}])},622666,603985,14878,942789,95010,411219,125455,669070,513437,871640,8034,956079,115761,812232,417943,a=>{"use strict";var b=a.i(608061),c=a.i(796807);a.i(341786),a.i(798416);var d=a.i(7507);let e=({ref:a,...e})=>(0,b.jsx)(c.default,{...e,ref:a,data:d.default});e.displayName="Check",a.s(["default",0,e],603985),a.i(285847);var f=a.i(584812);let g=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:f.default});g.displayName="ChecklistSquare",a.s(["default",0,g],14878);var h=a.i(193447);let i=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:h.default});i.displayName="CodeAssistant",a.s(["default",0,i],942789),a.i(651432),a.i(704552),a.i(260583),a.i(798866);var j=a.i(46605);let k=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:j.default});k.displayName="Hash02",a.s(["default",0,k],95010),a.i(960265);var l=a.i(276893);let m=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:l.default});m.displayName="Link03",a.s(["default",0,m],411219);var n=a.i(211154);let o=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:n.default});o.displayName="LinkExternal02",a.s(["default",0,o],125455),a.i(66530);var p=a.i(406694);let q=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:p.default});q.displayName="LogOut01",a.s(["default",0,q],669070),a.i(950940);var r=a.i(753473);let s=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:r.default});s.displayName="MagicEdit",a.s(["default",0,s],513437),a.i(631925),a.i(841684);var t=a.i(415393);let u=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:t.default});u.displayName="Pin02",a.s(["default",0,u],871640);var v=a.i(604809);let w=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:v.default});w.displayName="Plus02",a.s(["default",0,w],8034),a.i(639055);var x=a.i(957657);let y=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:x.default});y.displayName="SearchMenu",a.s(["default",0,y],956079);var z=a.i(905900);let A=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:z.default});A.displayName="Settings01",a.s(["default",0,A],115761),a.i(393539);var B=a.i(777083);let C=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:B.default});C.displayName="Target04",a.s(["default",0,C],812232),a.i(345246),a.i(149308);var D=a.i(113405);let E=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:D.default});E.displayName="X",a.s(["default",0,E],417943),a.s([],622666)},902916,a=>{"use strict";var b=a.i(417943);a.s(["X",()=>b.default])},705134,a=>{"use strict";a.s(["AppContextProvider",()=>u,"default",()=>w,"useAppContext",()=>v,"useSelector",()=>t],705134);var b=a.i(608061),c=a.i(749249),d=a.i(111089),e=a.i(57843),f=a.i(639378);a.i(60796);var g=a.i(55282),h=a.i(748948);a.i(622666);var i=a.i(902916),j=a.i(701458),k=a.i(136403);let l=()=>{let a=(0,j.useLanguage)(),[c,d]=(0,e.useState)(()=>"1"!==localStorage.getItem("hide-maintenance-notice")),f=k.NOTICE_I18N.title,g=k.NOTICE_I18N.desc;return c?(0,b.jsxs)("div",{className:"z-20 flex h-[38px] shrink-0 items-center border-[0.5px] border-b border-b-[#FEF0C7] bg-[#FFFAEB] px-4",children:[(0,b.jsx)("div",{className:"mr-2 flex h-[22px] shrink-0 items-center rounded-xl bg-[#F79009] px-2 text-[11px] font-medium text-white",children:f[a]}),k.NOTICE_I18N.href&&"#"!==k.NOTICE_I18N.href?(0,b.jsx)("div",{className:"grow cursor-pointer text-xs font-medium text-gray-700",onClick:()=>{window.open(k.NOTICE_I18N.href,"_blank")},children:g[a]}):(0,b.jsx)("div",{className:"grow text-xs font-medium text-gray-700",children:g[a]}),(0,b.jsx)(i.X,{className:"h-4 w-4 shrink-0 cursor-pointer text-gray-500",onClick:()=>{localStorage.setItem("hide-maintenance-notice","1"),d(!1)}})]}):null};var m=a.i(18039),n=a.i(763539),o=a.i(724423);let p={id:"",name:"",email:"",avatar:"",avatar_url:"",is_password_set:!1},q={current_env:"",current_version:"",latest_version:"",release_date:"",release_notes:"",version:"",can_auto_update:!1},r={id:"",name:"",plan:"",status:"",created_at:0,role:"normal",providers:[],trial_credits:200,trial_credits_used:0,next_credit_reset_date:0},s=(0,f.createContext)({userProfile:p,currentWorkspace:r,isCurrentWorkspaceManager:!1,isCurrentWorkspaceOwner:!1,isCurrentWorkspaceEditor:!1,isCurrentWorkspaceDatasetOperator:!1,mutateUserProfile:d.noop,mutateCurrentWorkspace:d.noop,langGeniusVersionInfo:q,useSelector:t,isLoadingCurrentWorkspace:!1,isValidatingCurrentWorkspace:!1});function t(a){return(0,f.useContextSelector)(s,a)}let u=({children:a})=>{let d=(0,c.useQueryClient)(),f=(0,o.useGlobalPublicStore)(a=>a.systemFeatures),{data:i}=(0,n.useUserProfile)(),{data:j,isPending:k,isFetching:u}=(0,n.useCurrentWorkspace)(),v=(0,n.useLangGeniusVersion)(i?.meta.currentVersion,!f.branding.enabled),w=(0,e.useMemo)(()=>i?.profile||p,[i?.profile]),x=(0,e.useMemo)(()=>j||r,[j]),y=(0,e.useMemo)(()=>{if(!i?.meta?.currentVersion||!v.data)return q;let a=i.meta.currentVersion,b=i.meta.currentEnv||"",c=v.data;return{...c,current_version:a,latest_version:c.version,current_env:b}},[v.data,i?.meta]),z=(0,e.useMemo)(()=>["owner","admin"].includes(x.role),[x.role]),A=(0,e.useMemo)(()=>"owner"===x.role,[x.role]),B=(0,e.useMemo)(()=>["owner","admin","editor"].includes(x.role),[x.role]),C=(0,e.useMemo)(()=>"dataset_operator"===x.role,[x.role]),D=(0,e.useCallback)(()=>{d.invalidateQueries({queryKey:["common","user-profile"]})},[d]),E=(0,e.useCallback)(()=>{d.invalidateQueries({queryKey:["common","current-workspace"]})},[d]);return(0,e.useEffect)(()=>{m.ZENDESK_FIELD_IDS.ENVIRONMENT&&y?.current_env&&(0,h.setZendeskConversationFields)([{id:m.ZENDESK_FIELD_IDS.ENVIRONMENT,value:y.current_env.toLowerCase()}])},[y?.current_env]),(0,e.useEffect)(()=>{m.ZENDESK_FIELD_IDS.VERSION&&y?.version&&(0,h.setZendeskConversationFields)([{id:m.ZENDESK_FIELD_IDS.VERSION,value:y.version}])},[y?.version]),(0,e.useEffect)(()=>{m.ZENDESK_FIELD_IDS.EMAIL&&w?.email&&(0,h.setZendeskConversationFields)([{id:m.ZENDESK_FIELD_IDS.EMAIL,value:w.email}])},[w?.email]),(0,e.useEffect)(()=>{m.ZENDESK_FIELD_IDS.WORKSPACE_ID&&x?.id&&(0,h.setZendeskConversationFields)([{id:m.ZENDESK_FIELD_IDS.WORKSPACE_ID,value:x.id}])},[x?.id]),(0,e.useEffect)(()=>{if(w?.id){(0,g.setUserId)(w.email);let a={email:w.email,name:w.name,has_password:w.is_password_set};x?.id&&(a.workspace_id=x.id,a.workspace_name=x.name,a.workspace_plan=x.plan,a.workspace_status=x.status,a.workspace_role=x.role),(0,g.setUserProperties)(a)}},[w,x]),(0,b.jsx)(s.Provider,{value:{userProfile:w,mutateUserProfile:D,langGeniusVersionInfo:y,useSelector:t,currentWorkspace:x,isCurrentWorkspaceManager:z,isCurrentWorkspaceOwner:A,isCurrentWorkspaceEditor:B,isCurrentWorkspaceDatasetOperator:C,mutateCurrentWorkspace:E,isLoadingCurrentWorkspace:k,isValidatingCurrentWorkspace:u},children:(0,b.jsxs)("div",{className:"flex h-full flex-col overflow-y-auto",children:[globalThis.document?.body?.getAttribute("data-public-maintenance-notice")&&(0,b.jsx)(l,{}),(0,b.jsx)("div",{className:"relative flex grow flex-col overflow-y-auto overflow-x-hidden bg-background-body",children:a})]})})},v=()=>(0,f.useContext)(s),w=s},931164,a=>{"use strict";var b,c,d,e,f=((b={}).sandbox="sandbox",b.professional="professional",b.team="team",b.enterprise="enterprise",b),g=((c={}).standard="standard",c.priority="priority",c.topPriority="top-priority",c),h=((d={}).community="community",d.premium="premium",d.enterprise="enterprise",d),i=((e={}).standard="standard",e.priority="priority",e.topPriority="top-priority",e);a.s(["DocumentProcessingPriority",()=>i,"Plan",()=>f,"Priority",()=>g,"SelfHostedPlan",()=>h])},749993,751630,a=>{"use strict";var b=a.i(931164);let c="OpenAI/Anthropic/Llama2/Azure OpenAI/Hugging Face/Replicate",d={sandbox:{level:1,price:0,modelProviders:c,teamWorkspace:1,teamMembers:1,buildApps:5,documents:50,vectorSpace:"50MB",documentsUploadQuota:0,documentsRequestQuota:10,apiRateLimit:5e3,documentProcessingPriority:b.Priority.standard,messageRequest:200,triggerEvents:3e3,annotatedResponse:10,logHistory:30},professional:{level:2,price:59,modelProviders:c,teamWorkspace:1,teamMembers:3,buildApps:50,documents:500,vectorSpace:"5GB",documentsUploadQuota:0,documentsRequestQuota:100,apiRateLimit:-1,documentProcessingPriority:b.Priority.priority,messageRequest:5e3,triggerEvents:2e4,annotatedResponse:2e3,logHistory:-1},team:{level:3,price:159,modelProviders:c,teamWorkspace:1,teamMembers:50,buildApps:200,documents:1e3,vectorSpace:"20GB",documentsUploadQuota:0,documentsRequestQuota:1e3,apiRateLimit:-1,documentProcessingPriority:b.Priority.topPriority,messageRequest:1e4,triggerEvents:-1,annotatedResponse:5e3,logHistory:-1}},e={type:b.Plan.sandbox,usage:{documents:50,vectorSpace:1,buildApps:1,teamMembers:1,annotatedResponse:1,documentsUploadQuota:0,apiRateLimit:0,triggerEvents:0},total:{documents:50,vectorSpace:10,buildApps:10,teamMembers:1,annotatedResponse:10,documentsUploadQuota:0,apiRateLimit:d.sandbox.apiRateLimit,triggerEvents:d.sandbox.triggerEvents},reset:{apiRateLimit:null,triggerEvents:null}};a.s(["ALL_PLANS",0,d,"NUM_INFINITE",0,-1,"contactSalesUrl",0,"https://vikgc6bnu1s.typeform.com/dify-business","defaultPlan",0,e],749993);var f=a.i(435133);let g=a=>0===a?-1:a;a.s(["getPlanVectorSpaceLimitMB",0,a=>{let b=d[a];if(!b)return 0;let c=b.vectorSpace.match(/^(\d+)(MB|GB)$/i);if(!c)return 0;let e=Number.parseInt(c[1],10);return"GB"===c[2].toUpperCase()?1024*e:e},"parseCurrentPlan",0,a=>{let b=a.billing.subscription.plan,c=d[b],e=(a,b)=>{var c;return 0===(c=a??b??0)||-1===c?-1:c},h=a=>a?.usage??0,i=a=>{if(!a)return null;let b=(a=>{if("number"!=typeof a||a<=0)return null;if(a>=1e12)return(0,f.default)(a);if(a>=1e9)return(0,f.default)(1e3*a);let b=a.toString();if(8===b.length){let a=b.slice(0,4),c=b.slice(4,6),d=b.slice(6,8),e=(0,f.default)(`${a}-${c}-${d}`);return e.isValid()?e:null}return null})(a.reset_date);if(!b)return null;let c=b.startOf("day").diff((0,f.default)().startOf("day"),"day");return Number.isNaN(c)||c<0?null:c};return{type:b,usage:{vectorSpace:a.vector_space.size,buildApps:a.apps?.size||0,teamMembers:a.members.size,annotatedResponse:a.annotation_quota_limit.size,documentsUploadQuota:a.documents_upload_quota.size,apiRateLimit:h(a.api_rate_limit),triggerEvents:h(a.trigger_event)},total:{vectorSpace:g(a.vector_space.limit),buildApps:g(a.apps?.limit)||0,teamMembers:g(a.members.limit),annotatedResponse:g(a.annotation_quota_limit.limit),documentsUploadQuota:g(a.documents_upload_quota.limit),apiRateLimit:e(a.api_rate_limit?.limit,c?.apiRateLimit??-1),triggerEvents:e(a.trigger_event?.limit,c?.triggerEvents)},reset:{apiRateLimit:i(a.api_rate_limit),triggerEvents:i(a.trigger_event)}}}],751630)},375616,800034,a=>{"use strict";var b=a.i(608061),c=a.i(749249),d=a.i(435133),e=a.i(111089),f=a.i(57843);a.i(752298);var g=a.i(693025),h=a.i(639378),i=a.i(114715),j=a.i(748948),k=a.i(749993),l=a.i(751630),m=a.i(933988),n=a.i(18039),o=a.i(41511),p=a.i(763539),q=a.i(848636),r=a.i(528698),s=a.i(425282);let t="education",u=a=>(0,r.useQuery)({enabled:!a,queryKey:[t,"education-status"],queryFn:()=>(0,o.get)("/account/education"),retry:!1,staleTime:0});a.s(["useEducationAdd",0,({onSuccess:a})=>(0,q.useMutation)({mutationKey:[t,"education-add"],mutationFn:a=>(0,o.post)("/account/education",{body:a}),onSuccess:a}),"useEducationAutocomplete",0,()=>(0,q.useMutation)({mutationFn:a=>{let{keywords:b="",page:c=0,limit:d=40}=a;return(0,o.get)(`/account/education/autocomplete?keywords=${b}&page=${c}&limit=${d}`)}}),"useEducationStatus",0,u,"useEducationVerify",0,()=>(0,q.useMutation)({mutationKey:[t,"education-verify"],mutationFn:()=>(0,o.get)("/account/education/verify",{},{silent:!0})}),"useInvalidateEducationStatus",0,()=>(0,s.useInvalid)([t,"education-status"])],800034);let v={modelProviders:[],refreshModelProviders:e.noop,textGenerationModelList:[],supportRetrievalMethods:[],isAPIKeySet:!0,plan:k.defaultPlan,isFetchedPlan:!1,enableBilling:!1,onPlanInfoChanged:e.noop,enableReplaceWebAppLogo:!1,modelLoadBalancingEnabled:!1,datasetOperatorEnabled:!1,enableEducationPlan:!1,isEducationWorkspace:!1,isEducationAccount:!1,allowRefreshEducationVerify:!1,educationAccountExpireAt:null,isLoadingEducationAccountInfo:!1,isFetchingEducationAccountInfo:!1,webappCopyrightEnabled:!1,licenseLimit:{workspace_members:{size:0,limit:0}},refreshLicenseLimit:e.noop,isAllowTransferWorkspace:!1,isAllowPublishAsCustomKnowledgePipelineTemplate:!1},w=(0,h.createContext)(v);a.s(["ProviderContextProvider",0,({children:a})=>{let e=(0,c.useQueryClient)(),{data:h}=(0,p.useModelProviders)(),{data:q}=(0,p.useModelListByType)(m.ModelTypeEnum.textGeneration),{data:r}=(0,p.useSupportRetrievalMethods)(),[s,t]=(0,f.useState)(k.defaultPlan),[v,x]=(0,f.useState)(!1),[y,z]=(0,f.useState)(!0),[A,B]=(0,f.useState)(!1),[C,D]=(0,f.useState)(!1),[E,F]=(0,f.useState)(!1),[G,H]=(0,f.useState)(!1),[I,J]=(0,f.useState)({workspace_members:{size:0,limit:0}}),[K,L]=(0,f.useState)(!1),[M,N]=(0,f.useState)(!1),{data:O,isLoading:P,isFetching:Q,isFetchedAfterMount:R}=u(!K),[S,T]=(0,f.useState)(!1),[U,V]=(0,f.useState)(!1),W=async()=>{try{let a=await (0,o.get)("/features");if(!a)return void console.error("Failed to fetch plan info: data is undefined");z(a.billing?.enabled??!1),L(a.education?.enabled??!1),N(a.education?.activated??!1),B(a.can_replace_logo??!1),a.billing?.enabled&&(t((0,l.parseCurrentPlan)(a)),x(!0)),a.model_load_balancing_enabled&&D(!0),a.dataset_operator_enabled&&F(!0),a.webapp_copyright_enabled&&H(!0),a.workspace_members&&J({workspace_members:a.workspace_members}),a.is_allow_transfer_workspace&&T(a.is_allow_transfer_workspace),a.knowledge_pipeline?.publish_enabled&&V(a.knowledge_pipeline?.publish_enabled)}catch(a){console.error("Failed to fetch plan info:",a),z(!1),L(!1),N(!1),B(!1)}};(0,f.useEffect)(()=>{W()},[]),(0,f.useEffect)(()=>{n.ZENDESK_FIELD_IDS.PLAN&&s.type&&(0,j.setZendeskConversationFields)([{id:n.ZENDESK_FIELD_IDS.PLAN,value:`${s.type}-plan`}])},[s.type]);let{t:X}=(0,g.useTranslation)();return(0,f.useEffect)(()=>{if("true"!==localStorage.getItem("anthropic_quota_notice")&&!(0,d.default)().isAfter((0,d.default)("2025-03-17"))&&h?.data&&h.data.length>0){let a=h.data.find(a=>"anthropic"===a.provider);if(a&&a.system_configuration.current_quota_type===m.CurrentSystemQuotaTypeEnum.trial){let b=a.system_configuration.quota_configurations.find(b=>b.quota_type===a.system_configuration.current_quota_type);b&&b.is_valid&&b.quota_used<b.quota_limit&&i.default.notify({type:"info",message:X("provider.anthropicHosted.trialQuotaTip",{ns:"common"}),duration:6e4,onClose:()=>{localStorage.setItem("anthropic_quota_notice","true")}})}}},[h,X]),(0,b.jsx)(w.Provider,{value:{modelProviders:h?.data||[],refreshModelProviders:()=>{e.invalidateQueries({queryKey:["common","model-providers"]})},textGenerationModelList:q?.data||[],isAPIKeySet:!!q?.data?.some(a=>a.status===m.ModelStatusEnum.active),supportRetrievalMethods:r?.retrieval_method||[],plan:s,isFetchedPlan:v,enableBilling:y,onPlanInfoChanged:W,enableReplaceWebAppLogo:A,modelLoadBalancingEnabled:C,datasetOperatorEnabled:E,enableEducationPlan:K,isEducationWorkspace:M,isEducationAccount:!!R&&(O?.is_student??!1),allowRefreshEducationVerify:!!R&&(O?.allow_refresh??!1),educationAccountExpireAt:R?O?.expire_at??null:null,isLoadingEducationAccountInfo:P,isFetchingEducationAccountInfo:Q,webappCopyrightEnabled:G,licenseLimit:I,refreshLicenseLimit:W,isAllowTransferWorkspace:S,isAllowPublishAsCustomKnowledgePipelineTemplate:U},children:a})},"baseProviderContextValue",0,v,"default",0,w,"useProviderContext",0,()=>(0,h.useContext)(w),"useProviderContextSelector",0,a=>(0,h.useContextSelector)(w,a)],375616)},29255,963542,a=>{"use strict";a.s(["ModalContextProvider",()=>N,"default",()=>O,"useModalContext",()=>L,"useModalContextSelector",()=>M],29255);var b=a.i(608061),c=a.i(111089),d=a.i(860653),e=a.i(57843),f=a.i(639378),g=a.i(933887),h=a.i(263477),i=a.i(705134),j=a.i(375616),k=a.i(666115),l=a.i(668308);let m="open",n=(0,k.createParser)({parse:a=>a===m||null,serialize:a=>a?m:""}).withDefault(!1).withOptions({history:"push"});function o(){return(0,k.useQueryState)("pricing",n)}function p(){let[a,b]=(0,k.useQueryStates)({action:k.parseAsString,tab:k.parseAsString},{history:"replace"}),c=(0,e.useCallback)(c=>{if(!c)return void b({action:null,tab:null},{history:"replace"});let d=a.action!==g.ACCOUNT_SETTING_MODAL_ACTION;b({action:g.ACCOUNT_SETTING_MODAL_ACTION,tab:c.payload},{history:d?"push":"replace"})},[a.action,b]),d=a.action===g.ACCOUNT_SETTING_MODAL_ACTION,f=d?a.tab:null;return[{isOpen:d,payload:f},c]}let q=(0,k.createParser)({parse:a=>{try{let b=JSON.parse(a);if(Array.isArray(b)){let a=b[0];return"string"==typeof a?a:null}return a}catch{return a}},serialize:a=>JSON.stringify([a])}),r=(0,k.createParser)({parse:a=>{try{let b=JSON.parse(a);if(b&&"string"==typeof b.org&&"string"==typeof b.name&&"string"==typeof b.version)return{org:b.org,name:b.name,version:b.version}}catch{}return null},serialize:a=>JSON.stringify(a)});function s(){return(0,k.useQueryStates)({packageId:q,bundleInfo:r},{urlKeys:{packageId:"package-ids",bundleInfo:"bundle-info"}})}a.s(["useAccountSettingModal",()=>p,"usePluginInstallation",()=>s,"usePricingModal",()=>o],963542);var t=a.i(435133),u=a.i(749993),v=a.i(931164),w=a.i(18039);let x=(0,d.default)(async()=>{},{loadableGenerated:{modules:[924697]},ssr:!1}),y=(0,d.default)(async()=>{},{loadableGenerated:{modules:[117658]},ssr:!1}),z=(0,d.default)(async()=>{},{loadableGenerated:{modules:[157154]},ssr:!1}),A=(0,d.default)(async()=>{},{loadableGenerated:{modules:[668887]},ssr:!1}),B=(0,d.default)(async()=>{},{loadableGenerated:{modules:[812340]},ssr:!1}),C=(0,d.default)(async()=>{},{loadableGenerated:{modules:[535952]},ssr:!1}),D=(0,d.default)(async()=>{},{loadableGenerated:{modules:[359540]},ssr:!1}),E=(0,d.default)(async()=>{},{loadableGenerated:{modules:[955852]},ssr:!1}),F=(0,d.default)(async()=>{},{loadableGenerated:{modules:[100550]},ssr:!1}),G=(0,d.default)(async()=>{},{loadableGenerated:{modules:[553791]},ssr:!1}),H=(0,d.default)(async()=>{},{loadableGenerated:{modules:[43994]},ssr:!1}),I=(0,d.default)(async()=>{},{loadableGenerated:{modules:[834473]},ssr:!1}),J=(0,d.default)(async()=>{},{loadableGenerated:{modules:[672545]},ssr:!1}),K=(0,f.createContext)({setShowAccountSettingModal:c.noop,setShowApiBasedExtensionModal:c.noop,setShowModerationSettingModal:c.noop,setShowExternalDataToolModal:c.noop,setShowPricingModal:c.noop,setShowAnnotationFullModal:c.noop,setShowModelModal:c.noop,setShowExternalKnowledgeAPIModal:c.noop,setShowModelLoadBalancingModal:c.noop,setShowOpeningModal:c.noop,setShowUpdatePluginModal:c.noop,setShowEducationExpireNoticeModal:c.noop,setShowTriggerEventsLimitModal:c.noop}),L=()=>(0,f.useContext)(K),M=a=>(0,f.useContextSelector)(K,a),N=({children:a})=>{let[c,d]=o(),[f,k]=p(),m=(0,e.useRef)(null),n=f.isOpen?(0,g.isValidAccountSettingTab)(f.payload)?f.payload:g.DEFAULT_ACCOUNT_SETTING_TAB:null,[q,r]=(0,e.useState)(null),[s,L]=(0,e.useState)(null),[M,N]=(0,e.useState)(null),[O,P]=(0,e.useState)(null),[Q,R]=(0,e.useState)(null),[S,T]=(0,e.useState)(null),[U,V]=(0,e.useState)(null),[W,X]=(0,e.useState)(null),[Y,Z]=(0,e.useState)(null),{currentWorkspace:$}=(0,i.useAppContext)(),[_,aa]=(0,e.useState)(!1),ab=(0,e.useCallback)(a=>{k({payload:a})},[k]),ac=(0,e.useCallback)(a=>{let b=n?{payload:n,...m.current??{}}:null,c="function"==typeof a?a(b):a;if(!c){m.current=null,k(null);return}let{payload:d,...e}=c;m.current=e,k({payload:d})},[n,k]);(0,e.useEffect)(()=>{f.isOpen||(m.current=null)},[f.isOpen]);let{plan:ad,isFetchedPlan:ae}=(0,j.useProviderContext)(),{showTriggerEventsLimitModal:af,setShowTriggerEventsLimitModal:ag,persistTriggerEventsLimitModalDismiss:ah}=(({plan:a,isFetchedPlan:b,currentWorkspaceId:c})=>{let[d,f]=(0,e.useState)(null),g=(0,e.useRef)({});(0,e.useEffect)(()=>{if(!w.IS_CLOUD_EDITION||l.isServer||!c)return;if(!b)return void f(null);let{type:e,usage:h,total:i,reset:j}=a,k=i.triggerEvents===u.NUM_INFINITE,m=i.triggerEvents>0&&h.triggerEvents>=i.triggerEvents;if(e===v.Plan.team||k||!m){d&&f(null);return}let n=e===v.Plan.professional&&i.triggerEvents!==u.NUM_INFINITE?j.triggerEvents??void 0:void 0,o="number"==typeof j.triggerEvents?(0,t.default)().startOf("day").add(j.triggerEvents,"day").format("YYYY-MM-DD"):e===v.Plan.sandbox?(0,t.default)().endOf("month").format("YYYY-MM-DD"):"none",p=`trigger-events-limit-dismissed-${c}-${e}-${i.triggerEvents}-${o}`;if(g.current[p])return;let q=!0,r=!1;try{"1"===localStorage.getItem(p)&&(r=!0)}catch{q=!1}r||d?.payload.storageKey!==p&&f({payload:{usage:h.triggerEvents,total:i.triggerEvents,resetInDays:n,storageKey:p,persistDismiss:q}})},[a,b,d,c]);let h=(0,e.useCallback)(()=>{let a=d?.payload.storageKey;if(a){if(d?.payload.persistDismiss)try{localStorage.setItem(a,"1");return}catch{}g.current[a]=!0}},[d]);return{showTriggerEventsLimitModal:d,setShowTriggerEventsLimitModal:f,persistTriggerEventsLimitModalDismiss:h}})({plan:ad,isFetchedPlan:ae,currentWorkspaceId:$?.id}),ai=(0,e.useCallback)(()=>{P(null),O?.onCancelCallback&&O.onCancelCallback()},[O]),aj=(0,e.useCallback)(a=>{O?.onSaveCallback&&O.onSaveCallback(O.payload,a),P(null)},[O]),ak=(0,e.useCallback)(a=>{O?.onRemoveCallback&&O.onRemoveCallback(O.payload,a),P(null)},[O]),al=(0,e.useCallback)(()=>{R(null),Q?.onCancelCallback&&Q.onCancelCallback()},[Q]),am=(0,e.useCallback)(async a=>{Q?.onSaveCallback&&Q.onSaveCallback(a),R(null)},[Q]),an=(0,e.useCallback)(async a=>{Q?.onEditCallback&&Q.onEditCallback(a),R(null)},[Q]),ao=(0,e.useCallback)(()=>{V(null),U?.onCancelCallback&&U.onCancelCallback()},[U]),ap=(0,e.useCallback)(()=>{d(!0)},[d]),aq=(0,e.useCallback)(()=>{d(!1)},[d]);return(0,b.jsx)(K.Provider,{value:{setShowAccountSettingModal:ac,setShowApiBasedExtensionModal:r,setShowModerationSettingModal:L,setShowExternalDataToolModal:N,setShowPricingModal:ap,setShowAnnotationFullModal:()=>aa(!0),setShowModelModal:P,setShowExternalKnowledgeAPIModal:R,setShowModelLoadBalancingModal:T,setShowOpeningModal:V,setShowUpdatePluginModal:X,setShowEducationExpireNoticeModal:Z,setShowTriggerEventsLimitModal:ag},children:(0,b.jsxs)(b.Fragment,{children:[a,n&&(0,b.jsx)(x,{activeTab:n,onCancel:()=>{"yes"===localStorage.getItem(h.EDUCATION_VERIFYING_LOCALSTORAGE_ITEM)&&localStorage.removeItem(h.EDUCATION_VERIFYING_LOCALSTORAGE_ITEM),m.current?.onCancelCallback?.(),m.current=null,k(null)},onTabChange:ab}),!!q&&(0,b.jsx)(y,{data:q.payload,onCancel:()=>r(null),onSave:a=>{q?.onSaveCallback&&q.onSaveCallback(a),r(null)}}),!!s&&(0,b.jsx)(z,{data:s.payload,onCancel:()=>{L(null),s?.onCancelCallback&&s.onCancelCallback()},onSave:a=>{s?.onSaveCallback&&s.onSaveCallback(a),L(null)}}),!!M&&(0,b.jsx)(A,{data:M.payload,onCancel:()=>{N(null),M?.onCancelCallback&&M.onCancelCallback()},onSave:a=>{M?.onSaveCallback&&M.onSaveCallback(a),N(null)},onValidateBeforeSave:a=>!M?.onValidateBeforeSaveCallback||M?.onValidateBeforeSaveCallback(a)}),!!c&&(0,b.jsx)(B,{onCancel:aq}),_&&(0,b.jsx)(C,{show:_,onHide:()=>aa(!1)}),!!O&&(0,b.jsx)(D,{provider:O.payload.currentProvider,configurateMethod:O.payload.currentConfigurationMethod,currentCustomConfigurationModelFixedFields:O.payload.currentCustomConfigurationModelFixedFields,isModelCredential:O.payload.isModelCredential,credential:O.payload.credential,model:O.payload.model,mode:O.payload.mode,onCancel:ai,onSave:aj,onRemove:ak}),!!Q&&(0,b.jsx)(E,{data:Q.payload,datasetBindings:Q.datasetBindings??[],onSave:am,onCancel:al,onEdit:an,isEditMode:Q.isEditMode??!1}),!!S&&(0,b.jsx)(F,{...S}),U&&(0,b.jsx)(G,{data:U.payload,onSave:a=>{U?.onSaveCallback&&U.onSaveCallback(a),V(null)},onCancel:ao,promptVariables:U.payload.promptVariables,workflowVariables:U.payload.workflowVariables,onAutoAddPromptVariable:U.payload.onAutoAddPromptVariable}),!!W&&(0,b.jsx)(H,{...W.payload,onCancel:()=>{X(null),W.onCancelCallback?.()},onSave:()=>{X(null),W.onSaveCallback?.({})}}),!!Y&&(0,b.jsx)(I,{...Y.payload,onClose:()=>Z(null)}),!!af&&(0,b.jsx)(J,{show:!0,usage:af.payload.usage,total:af.payload.total,resetInDays:af.payload.resetInDays,onClose:()=>{ah(),ag(null)},onUpgrade:()=>{ah(),ag(null),ap()}})]})})},O=K},42550,a=>{"use strict";var b=a.i(608061),c=a.i(57843),d=a.i(555237);a.i(752298);var e=a.i(693025),f=a.i(909795),g=a.i(483664);let h=c.memo(function({isShow:a,type:h="warning",title:i,content:j,confirmText:k,cancelText:l,onConfirm:m,onCancel:n,showConfirm:o=!0,showCancel:p=!0,isLoading:q=!1,isDisabled:r=!1,maskClosable:s=!0}){let{t}=(0,e.useTranslation)(),u=(0,c.useRef)(null),v=(0,c.useRef)(null),[w,x]=(0,c.useState)(a),[y,z]=(0,c.useState)(!1),A=k||`${t("operation.confirm",{ns:"common"})}`,B=l||`${t("operation.cancel",{ns:"common"})}`;(0,c.useEffect)(()=>{let b=b=>{"Escape"===b.key&&n(),"Enter"===b.key&&a&&(b.preventDefault(),m())};return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[n,m,a]);let C=a=>{s&&u.current&&!u.current.contains(a.target)&&n()};return((0,c.useEffect)(()=>(document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}),[s]),(0,c.useEffect)(()=>{if(a)x(!0);else{let a=setTimeout(()=>x(!1),200);return()=>clearTimeout(a)}},[a]),(0,c.useEffect)(()=>{v.current&&z(v.current.scrollWidth>v.current.clientWidth)},[i,w]),w)?(0,d.createPortal)((0,b.jsx)("div",{className:"fixed inset-0 z-[10000000] flex items-center justify-center bg-background-overlay",onClick:a=>{a.preventDefault(),a.stopPropagation()},children:(0,b.jsx)("div",{ref:u,className:"relative w-full max-w-[480px] overflow-hidden",children:(0,b.jsxs)("div",{className:"shadows-shadow-lg flex max-w-full flex-col items-start rounded-2xl border-[0.5px] border-solid border-components-panel-border bg-components-panel-bg",children:[(0,b.jsxs)("div",{className:"flex flex-col items-start gap-2 self-stretch pb-4 pl-6 pr-6 pt-6",children:[(0,b.jsx)(g.default,{popupContent:i,disabled:!y,portalContentClassName:"!z-[10000001]",asChild:!1,triggerClassName:"w-full",children:(0,b.jsx)("div",{ref:v,className:"title-2xl-semi-bold w-full truncate text-text-primary",children:i})}),(0,b.jsx)("div",{className:"system-md-regular w-full whitespace-pre-wrap break-words text-text-tertiary",children:j})]}),(0,b.jsxs)("div",{className:"flex items-start justify-end gap-2 self-stretch p-6",children:[p&&(0,b.jsx)(f.default,{onClick:n,children:B}),o&&(0,b.jsx)(f.default,{variant:"primary",destructive:"info"!==h,loading:q,disabled:r,onClick:m,children:A})]})]})})}),document.body):null});a.s(["default",0,h])},559317,645594,972650,704617,947518,478801,960736,299717,754545,637189,39066,290612,40160,199117,667601,279152,176156,527190,a=>{"use strict";a.s([],559317),a.s(["useAuth",()=>w],972650);var b,c,d,e,f=a.i(57843);a.i(752298);var g=a.i(693025),h=a.i(114715),i=a.i(701458),j=a.i(848636),k=a.i(528698),l=a.i(41511);let m="models",n=a=>(0,j.useMutation)({mutationFn:b=>(0,l.post)(`/workspaces/current/model-providers/${a}/credentials`,{body:b})}),o=a=>(0,j.useMutation)({mutationFn:b=>(0,l.put)(`/workspaces/current/model-providers/${a}/credentials`,{body:b})}),p=a=>(0,j.useMutation)({mutationFn:b=>(0,l.del)(`/workspaces/current/model-providers/${a}/credentials`,{body:b})}),q=a=>(0,j.useMutation)({mutationFn:b=>(0,l.post)(`/workspaces/current/model-providers/${a}/credentials/switch`,{body:b})}),r=a=>(0,j.useMutation)({mutationFn:b=>(0,l.post)(`/workspaces/current/model-providers/${a}/models/credentials`,{body:b})}),s=a=>(0,j.useMutation)({mutationFn:b=>(0,l.put)(`/workspaces/current/model-providers/${a}/models/credentials`,{body:b})}),t=a=>(0,j.useMutation)({mutationFn:b=>(0,l.del)(`/workspaces/current/model-providers/${a}/models/credentials`,{body:b})}),u=a=>(0,j.useMutation)({mutationFn:b=>(0,l.del)(`/workspaces/current/model-providers/${a}/models`,{body:b})}),v=a=>(0,j.useMutation)({mutationFn:b=>(0,l.post)(`/workspaces/current/model-providers/${a}/models/credentials/switch`,{body:b})});a.s(["useActiveModelCredential",0,v,"useActiveProviderCredential",0,q,"useAddModelCredential",0,r,"useAddProviderCredential",0,n,"useDeleteModel",0,u,"useDeleteModelCredential",0,t,"useDeleteProviderCredential",0,p,"useEditModelCredential",0,s,"useEditProviderCredential",0,o,"useGetModelCredential",0,(a,b,c,d,e,f)=>(0,k.useQuery)({enabled:a,queryKey:[m,"model-list",b,d,e,c,f],queryFn:()=>(0,l.get)(`/workspaces/current/model-providers/${b}/models/credentials?model=${d}&model_type=${e}&config_from=${f}${c?`&credential_id=${c}`:""}`),staleTime:0,gcTime:0}),"useGetProviderCredential",0,(a,b,c)=>(0,k.useQuery)({enabled:a,queryKey:[m,"model-list",b,c],queryFn:()=>(0,l.get)(`/workspaces/current/model-providers/${b}/credentials${c?`?credential_id=${c}`:""}`)}),"useModelProviderModelList",0,a=>(0,k.useQuery)({queryKey:[m,"model-list",a],queryFn:()=>(0,l.get)(`/workspaces/current/model-providers/${a}/models`)})],645594);let w=(a,b,c,d={})=>{let{isModelCredential:e,onUpdate:j,onRemove:k,mode:l}=d,{t:m}=(0,g.useTranslation)(),{notify:w}=(0,h.useToastContext)(),{getDeleteCredentialService:x,getActiveCredentialService:y,getEditCredentialService:z,getAddCredentialService:A}=(a=>{let{mutateAsync:b}=n(a),{mutateAsync:c}=o(a),{mutateAsync:d}=p(a),{mutateAsync:e}=q(a),{mutateAsync:g}=r(a),{mutateAsync:h}=v(a),{mutateAsync:i}=t(a),{mutateAsync:j}=s(a),k=(0,f.useCallback)(a=>a?g:b,[g,b]),l=(0,f.useCallback)(a=>a?j:c,[j,c]);return{getAddCredentialService:k,getEditCredentialService:l,getDeleteCredentialService:(0,f.useCallback)(a=>a?i:d,[i,d]),getActiveCredentialService:(0,f.useCallback)(a=>a?h:e,[h,e])}})(a.provider),{mutateAsync:B}=u(a.provider),C=(0,i.useModelModalHandler)(),{handleRefreshModel:D}=(0,i.useRefreshModel)(),E=(0,f.useRef)(null),[F,G]=(0,f.useState)(null),H=(0,f.useCallback)(a=>{G(a),E.current=a},[]),I=(0,f.useRef)(null),[J,K]=(0,f.useState)(null),L=(0,f.useCallback)(a=>{K(a),I.current=a},[]),M=(0,f.useCallback)((a,b)=>{a&&H(a.credential_id),b&&L(b)},[]),N=(0,f.useCallback)(()=>{H(null),L(null)},[]),[O,P]=(0,f.useState)(!1),Q=(0,f.useRef)(O),R=(0,f.useCallback)(a=>{Q.current=a,P(a)},[]),S=(0,f.useCallback)(async(b,c)=>{if(!Q.current)try{R(!0),await y(!!c)({credential_id:b.credential_id,model:c?.model,model_type:c?.model_type}),w({type:"success",message:m("api.actionSuccess",{ns:"common"})}),D(a,void 0,!0)}finally{R(!1)}},[y,w,m,R]),T=(0,f.useCallback)(async()=>{if(!Q.current){if(!E.current&&!I.current)return void N();try{R(!0);let b={};E.current&&(b={credential_id:E.current,model:I.current?.model,model_type:I.current?.model_type},await x(!!e)(b)),!E.current&&I.current&&(b={model:I.current.model,model_type:I.current.model_type},await B(b)),w({type:"success",message:m("api.actionSuccess",{ns:"common"})}),D(a,void 0,!0),k?.(E.current??""),N()}finally{R(!1)}}},[w,m,R,x,e,N,D,a,b,B]);return{pendingOperationCredentialId:E,pendingOperationModel:I,openConfirmDelete:M,closeConfirmDelete:N,doingAction:O,handleActiveCredential:S,handleConfirmDelete:T,deleteCredentialId:F,deleteModel:J,handleSaveCredential:(0,f.useCallback)(async b=>{if(!Q.current)try{R(!0);let c={};c=b.credential_id?await z(!!e)(b):await A(!!e)(b),"success"===c.result&&(w({type:"success",message:m("actionMsg.modifiedSuccessfully",{ns:"common"})}),D(a,void 0,!b.credential_id))}finally{R(!1)}},[w,m,R,z,A]),handleOpenModal:(0,f.useCallback)((d,f)=>{C(a,b,c,{isModelCredential:e,credential:d,model:f,onUpdate:j,mode:l})},[C,a,b,c,e,j,l])}};a.s(["useCredentialStatus",0,a=>{let{current_credential_id:b,current_credential_name:c,available_credentials:d}=a.custom_configuration,e=!!d?.length,g=b&&c,h=e&&!b&&!c,i=d?.find(a=>a.credential_id===b);return(0,f.useMemo)(()=>({hasCredential:e,authorized:g,authRemoved:h,current_credential_id:b,current_credential_name:c,available_credentials:d,notAllowedToUse:i?.not_allowed_to_use}),[e,g,h,b,c,d])}],704617),a.s(["useCanAddedModels",0,a=>{let{can_added_models:b}=a.custom_configuration;return b||[]},"useCustomModels",0,a=>{let{custom_models:b}=a.custom_configuration;return b||[]}],947518);var x=((b={}).textInput="text-input",b.textNumber="number-input",b.secretInput="secret-input",b.select="select",b.radio="radio",b.checkbox="checkbox",b.files="files",b.file="file",b.modelSelector="model-selector",b.toolSelector="tool-selector",b.multiToolSelector="array[tools]",b.appSelector="app-selector",b.dynamicSelect="dynamic-select",b.boolean="boolean",b),y=((c={}).Success="success",c.Warning="warning",c.Error="error",c.Validating="validating",c);a.s(["FormItemValidateStatusEnum",()=>y,"FormTypeEnum",()=>x],478801),a.i(9575);var z=((d={}).ANTHROPIC="langgenius/anthropic/anthropic",d.OPENAI="langgenius/openai/openai",d.GEMINI="langgenius/gemini/google",d.X="langgenius/x/x",d.DEEPSEEK="langgenius/deepseek/deepseek",d.TONGYI="langgenius/tongyi/tongyi",d);a.s(["ModelProviderQuotaGetPaid",()=>z],960736),(e={}).Success="success",e.Error="error",e.Exceed="exceed";var A=a.i(933988);let B=[z.OPENAI,z.ANTHROPIC,z.GEMINI,z.X,z.DEEPSEEK,z.TONGYI],C={[z.OPENAI]:"OpenAI",[z.ANTHROPIC]:"Anthropic",[z.GEMINI]:"Gemini",[z.X]:"xAI",[z.DEEPSEEK]:"DeepSeek",[z.TONGYI]:"Tongyi"};a.s(["MODEL_PROVIDER_QUOTA_GET_PAID",0,B,"genModelNameFormSchema",0,a=>({type:A.FormTypeEnum.textInput,label:a?.label||{zh_Hans:"模型名称",en_US:"Model Name"},variable:"__model_name",required:!0,show_on:[],placeholder:a?.placeholder||{zh_Hans:"请输入模型名称",en_US:"Please enter model name"}}),"genModelTypeFormSchema",0,a=>({type:A.FormTypeEnum.select,label:{zh_Hans:"模型类型",en_US:"Model Type"},variable:"__model_type",default:a[0],required:!0,show_on:[],options:a.map(a=>({value:a,label:{zh_Hans:A.MODEL_TYPE_TEXT[a],en_US:A.MODEL_TYPE_TEXT[a]},show_on:[]}))}),"isNullOrUndefined",0,a=>null==a,"modelNameMap",0,C,"modelTypeFormat",0,a=>a===A.ModelTypeEnum.textEmbedding?"TEXT EMBEDDING":a.toLocaleUpperCase(),"sizeFormat",0,a=>{let b=Math.floor(a/1e3);return b<1?`${a}`:`${b}K`}],299717);var D=a.i(608061),E=a.i(796807),F=(a.i(487941),a.i(962806));let G=({ref:a,...b})=>(0,D.jsx)(E.default,{...b,ref:a,data:F.default});G.displayName="AnthropicDark",a.s(["default",0,G],754545);var H=a.i(967904);let I=({ref:a,...b})=>(0,D.jsx)(E.default,{...b,ref:a,data:H.default});I.displayName="AnthropicLight",a.s(["default",0,I],637189);var J=a.i(851528);let K=({ref:a,...b})=>(0,D.jsx)(E.default,{...b,ref:a,data:J.default});K.displayName="AnthropicShortLight",a.s(["default",0,K],39066),a.i(970257),a.i(301810),a.i(874595),a.i(70859),a.i(866671),a.i(792607),a.i(437502),a.i(120427),a.i(86661),a.i(559790),a.i(512556);var L=a.i(543641);let M=({ref:a,...b})=>(0,D.jsx)(E.default,{...b,ref:a,data:L.default});M.displayName="Deepseek",a.s(["default",0,M],290612);var N=a.i(143093);let O=({ref:a,...b})=>(0,D.jsx)(E.default,{...b,ref:a,data:N.default});O.displayName="Gemini",a.s(["default",0,O],40160),a.i(380204),a.i(912660);var P=a.i(440193);let Q=({ref:a,...b})=>(0,D.jsx)(E.default,{...b,ref:a,data:P.default});Q.displayName="Grok",a.s(["default",0,Q],199117),a.i(289769),a.i(75962),a.i(478287),a.i(256871),a.i(474375),a.i(15579),a.i(320555),a.i(712372),a.i(816135),a.i(143565),a.i(244386),a.i(754836),a.i(550978),a.i(149709);var R=a.i(323088);let S=({ref:a,...b})=>(0,D.jsx)(E.default,{...b,ref:a,data:R.default});S.displayName="OpenaiSmall",a.s(["default",0,S],667601),a.i(763323),a.i(486654),a.i(449351),a.i(593732);var T=a.i(516252);let U=({ref:a,...b})=>(0,D.jsx)(E.default,{...b,ref:a,data:T.default});U.displayName="OpenaiYellow",a.i(678679),a.i(393086),a.i(397657),a.i(916711);var V=a.i(82535);let W=({ref:a,...b})=>(0,D.jsx)(E.default,{...b,ref:a,data:V.default});W.displayName="Tongyi",a.s(["default",0,W],279152),a.i(396332),a.i(975204),a.i(531577),a.i(675842),a.i(643659),a.s([],176156),a.s(["OpenaiYellow",0,U],527190)},912626,a=>{"use strict";a.s(["default",()=>j]);var b=a.i(608061);a.i(176156);var c=a.i(527190);a.i(10035);var d=a.i(423963),e=a.i(730357),f=a.i(366231),g=a.i(954200),h=a.i(527344),i=a.i(701458);let j=({provider:a,className:j,modelName:k,iconClassName:l,isDeprecated:m=!1})=>{let{theme:n}=(0,e.default)(),o=(0,i.useLanguage)();return a?.provider&&["openai","langgenius/openai/openai"].includes(a.provider)&&k?.startsWith("o")?(0,b.jsx)("div",{className:"flex items-center justify-center",children:(0,b.jsx)(c.OpenaiYellow,{className:(0,h.cn)("h-5 w-5",j)})}):a?.icon_small?(0,b.jsx)("div",{className:(0,h.cn)("flex h-5 w-5 items-center justify-center",m&&"opacity-50",j),children:(0,b.jsx)("img",{alt:"model-icon",src:(0,f.renderI18nObject)(n===g.Theme.dark&&a.icon_small_dark?a.icon_small_dark:a.icon_small,o),className:l})}):(0,b.jsx)("div",{className:(0,h.cn)("flex h-5 w-5 items-center justify-center rounded-md border-[0.5px] border-components-panel-border-subtle bg-background-default-subtle",j),children:(0,b.jsx)("div",{className:(0,h.cn)("flex h-5 w-5 items-center justify-center opacity-35",l),children:(0,b.jsx)(d.Group,{className:"h-3 w-3 text-text-tertiary"})})})}},218865,a=>{"use strict";var b=a.i(608061),c=a.i(57843),d=a.i(527344);let e=(0,c.memo)(({className:a,text:c,children:e,uppercase:f=!0,hasRedCornerMark:g})=>(0,b.jsxs)("div",{className:(0,d.cn)("relative inline-flex h-5 items-center whitespace-nowrap rounded-[5px] border border-divider-deep px-[5px] leading-3 text-text-tertiary",f?"system-2xs-medium-uppercase":"system-xs-medium",a),children:[g&&(0,b.jsx)("div",{className:"absolute right-[-2px] top-[-2px] h-1.5 w-1.5 rounded-[2px] border border-components-badge-status-light-error-border-inner bg-components-badge-status-light-error-bg shadow-sm"}),e||c]}));a.s(["default",0,e])},854867,a=>{"use strict";var b=a.i(608061),c=a.i(527344);let d={green:"bg-components-badge-status-light-success-bg",orange:"bg-components-badge-status-light-warning-bg",red:"bg-components-badge-status-light-error-bg",blue:"bg-components-badge-status-light-normal-bg",yellow:"bg-components-badge-status-light-warning-bg",gray:"bg-components-badge-status-light-disabled-bg"},e={green:"border-components-badge-status-light-success-border-inner",orange:"border-components-badge-status-light-warning-border-inner",red:"border-components-badge-status-light-error-border-inner",blue:"border-components-badge-status-light-normal-border-inner",yellow:"border-components-badge-status-light-warning-border-inner",gray:"border-components-badge-status-light-disabled-border-inner"},f={green:"shadow-status-indicator-green-shadow",orange:"shadow-status-indicator-warning-shadow",red:"shadow-status-indicator-red-shadow",blue:"shadow-status-indicator-blue-shadow",yellow:"shadow-status-indicator-warning-shadow",gray:"shadow-status-indicator-gray-shadow"};function g({color:a="green",className:g=""}){return(0,b.jsx)("div",{"data-testid":"status-indicator",className:(0,c.cn)("h-2 w-2 rounded-[3px] border border-solid",d[a],e[a],f[a],g)})}a.s(["default",()=>g])},173348,815531,876390,129317,570081,678314,278161,424293,234724,848761,834934,848850,604364,943046,590801,a=>{"use strict";let b,c;a.s([],173348);var d=a.i(608061),e=a.i(429150),f=a.i(57843);a.i(752298);var g=a.i(693025),h=a.i(933988),i=a.i(909795),j=a.i(42550),k=a.i(825319),l=a.i(527344);a.i(559317);var m=a.i(972650),n=a.i(912626),o=a.i(175809),p=a.i(218865),q=a.i(483664),r=a.i(854867);let s=(0,f.memo)(({credential:a,disabled:b,onDelete:c,onEdit:h,onItemClick:i,disableRename:j,disableEdit:k,disableDelete:m,disableDeleteButShowAction:n,disableDeleteTip:s,showSelectedIcon:t,selectedCredentialId:u})=>{let{t:v}=(0,g.useTranslation)(),w=(0,f.useMemo)(()=>!(j&&k&&m),[j,k,m]),x=(0,f.useMemo)(()=>n&&u===a.credential_id,[n,u,a.credential_id]),y=(0,d.jsxs)("div",{className:(0,l.cn)("group flex h-8 items-center rounded-lg p-1 hover:bg-state-base-hover",(b||a.not_allowed_to_use)&&"cursor-not-allowed opacity-50"),onClick:()=>{b||a.not_allowed_to_use||i?.(a)},children:[(0,d.jsxs)("div",{className:"flex w-0 grow items-center space-x-1.5",children:[t&&(0,d.jsx)("div",{className:"h-4 w-4",children:u===a.credential_id&&(0,d.jsx)(e.RiCheckLine,{className:"h-4 w-4 text-text-accent"})}),(0,d.jsx)(r.default,{className:"ml-2 mr-1.5 shrink-0"}),(0,d.jsx)("div",{className:"system-md-regular truncate text-text-secondary",title:a.credential_name,children:a.credential_name})]}),a.from_enterprise&&(0,d.jsx)(p.default,{className:"shrink-0",children:"Enterprise"}),w&&!a.from_enterprise&&(0,d.jsxs)("div",{className:"ml-2 hidden shrink-0 items-center group-hover:flex",children:[!k&&!a.not_allowed_to_use&&(0,d.jsx)(q.default,{popupContent:v("operation.edit",{ns:"common"}),children:(0,d.jsx)(o.default,{disabled:b,onClick:b=>{b.stopPropagation(),h?.(a)},children:(0,d.jsx)(e.RiEqualizer2Line,{className:"h-4 w-4 text-text-tertiary"})})}),!m&&(0,d.jsx)(q.default,{popupContent:x?s:v("operation.delete",{ns:"common"}),children:(0,d.jsx)(o.default,{className:"hover:bg-transparent",onClick:d=>{b||x||(d.stopPropagation(),c?.(a))},children:(0,d.jsx)(e.RiDeleteBinLine,{className:(0,l.cn)("h-4 w-4 text-text-tertiary",!x&&"hover:text-text-destructive",x&&"opacity-50")})})})]})]},a.credential_id);return a.not_allowed_to_use?(0,d.jsx)(q.default,{popupContent:v("auth.customCredentialUnavailable",{ns:"plugin"}),children:y}):y}),t=(0,f.memo)(({provider:a,model:b,title:c,credentials:e,disabled:g,onDelete:h,onEdit:i,showItemSelectedIcon:j,selectedCredentialId:k,onItemClick:l,showModelTitle:m,disableDeleteButShowAction:o,disableDeleteTip:p})=>{let q=(0,f.useCallback)(a=>{i?.(a,b)},[i,b]),r=(0,f.useCallback)(a=>{h?.(a,b)},[h,b]),t=(0,f.useCallback)(a=>{l?.(a,b)},[l,b]);return(0,d.jsxs)("div",{className:"p-1",children:[m&&(0,d.jsxs)("div",{className:"flex h-9 items-center px-2",children:[b?.model&&(0,d.jsx)(n.default,{className:"mr-1 h-5 w-5 shrink-0",provider:a,modelName:b.model}),(0,d.jsx)("div",{className:"system-md-medium mx-1 grow truncate text-text-primary",title:c??b?.model,children:c??b?.model})]}),e.map(a=>(0,d.jsx)(s,{credential:a,disabled:g,onDelete:r,onEdit:q,showSelectedIcon:j,selectedCredentialId:k,onItemClick:t,disableDeleteButShowAction:o,disableDeleteTip:p},a.credential_id))]})}),u=(0,f.memo)(({provider:a,configurationMethod:b,currentCustomConfigurationModelFixedFields:c,items:h,authParams:n,disabled:o,renderTrigger:p,isOpen:q,onOpenChange:r,offset:s=8,placement:u="bottom-end",triggerPopupSameWidth:v=!1,popupClassName:w,showItemSelectedIcon:x,onItemClick:y,triggerOnlyOpenModal:z,hideAddAction:A,disableItemClick:B,popupTitle:C,showModelTitle:D,disableDeleteButShowAction:E,disableDeleteTip:F})=>{let{t:G}=(0,g.useTranslation)(),[H,I]=(0,f.useState)(!1),J=q??H,K=(0,f.useCallback)(a=>{r&&r(a),I(a)},[r]),{isModelCredential:L,onUpdate:M,onRemove:N,mode:O}=n||{},{openConfirmDelete:P,closeConfirmDelete:Q,doingAction:R,handleActiveCredential:S,handleConfirmDelete:T,deleteCredentialId:U,handleOpenModal:V}=(0,m.useAuth)(a,b,c,{isModelCredential:L,onUpdate:M,onRemove:N,mode:O}),W=(0,f.useCallback)((a,b)=>{V(a,b),K(!1)},[V,K]),X=(0,f.useCallback)((a,b)=>{B||(y?y(a,b):S(a,b),K(!1))},[S,y,K,B]),Y=!1===a.allow_custom_token;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(k.PortalToFollowElem,{open:J,onOpenChange:K,placement:u,offset:s,triggerPopupSameWidth:v,children:[(0,d.jsx)(k.PortalToFollowElemTrigger,{onClick:()=>{z?V():K(!J)},asChild:!0,children:p(J)}),(0,d.jsx)(k.PortalToFollowElemContent,{className:"z-[100]",children:(0,d.jsxs)("div",{className:(0,l.cn)("w-[360px] rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg-blur shadow-lg backdrop-blur-[5px]",w),children:[C&&(0,d.jsx)("div",{className:"system-xs-medium px-3 pb-0.5 pt-[10px] text-text-tertiary",children:C}),(0,d.jsx)("div",{className:"max-h-[304px] overflow-y-auto",children:h.map((b,c)=>(0,d.jsxs)(f.Fragment,{children:[(0,d.jsx)(t,{provider:a,title:b.title,model:b.model,credentials:b.credentials,disabled:o,onDelete:P,disableDeleteButShowAction:E,disableDeleteTip:F,onEdit:W,showItemSelectedIcon:x,selectedCredentialId:b.selectedCredential?.credential_id,onItemClick:X,showModelTitle:D}),c!==h.length-1&&(0,d.jsx)("div",{className:"h-[1px] bg-divider-subtle"})]},c))}),(0,d.jsx)("div",{className:"h-[1px] bg-divider-subtle"}),L&&!Y&&!A&&(0,d.jsxs)("div",{onClick:()=>W(void 0,c?{model:c.__model_name,model_type:c.__model_type}:void 0),className:"system-xs-medium flex h-[40px] cursor-pointer items-center px-3 text-text-accent-light-mode-only",children:[(0,d.jsx)(e.RiAddLine,{className:"mr-1 h-4 w-4"}),G("modelProvider.auth.addModelCredential",{ns:"common"})]}),!L&&!Y&&!A&&(0,d.jsx)("div",{className:"p-2",children:(0,d.jsx)(i.default,{onClick:()=>W(),className:"w-full",children:G("modelProvider.auth.addApiKey",{ns:"common"})})})]})})]}),U&&(0,d.jsx)(j.default,{isShow:!0,title:G("modelProvider.confirmDelete",{ns:"common"}),isDisabled:R,onCancel:Q,onConfirm:T})]})});var v=a.i(947518);let w=(0,f.memo)(({provider:a,configurationMethod:b,currentCustomConfigurationModelFixedFields:c})=>{let{t:j}=(0,g.useTranslation)(),[o,p]=(0,f.useState)(!1),r=(0,v.useCanAddedModels)(a),s=!r.length,{handleOpenModal:t}=(0,m.useAuth)(a,b,c,{isModelCredential:!0,mode:h.ModelModalModeEnum.configCustomModel}),{handleOpenModal:u}=(0,m.useAuth)(a,b,c,{isModelCredential:!0,mode:h.ModelModalModeEnum.addCustomModelToModelList}),w=!1===a.allow_custom_token,x=(0,f.useCallback)(a=>{let b=(0,d.jsxs)(i.Button,{variant:"ghost",size:"small",className:(0,l.cn)("text-text-tertiary",a&&"bg-components-button-ghost-bg-hover",w&&!!s&&"cursor-not-allowed opacity-50"),children:[(0,d.jsx)(e.RiAddCircleFill,{className:"mr-1 h-3.5 w-3.5"}),j("modelProvider.addModel",{ns:"common"})]});return w&&s?(0,d.jsx)(q.default,{asChild:!0,popupContent:j("auth.credentialUnavailable",{ns:"plugin"}),children:b}):b},[j,w,s]);return(0,d.jsxs)(k.PortalToFollowElem,{open:o,onOpenChange:p,placement:"bottom-end",offset:{mainAxis:4,crossAxis:0},children:[(0,d.jsx)(k.PortalToFollowElemTrigger,{onClick:()=>{if(s){if(w)return;t();return}p(a=>!a)},children:x(o)}),(0,d.jsx)(k.PortalToFollowElemContent,{className:"z-[100]",children:(0,d.jsxs)("div",{className:"w-[320px] rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg-blur shadow-lg",children:[(0,d.jsx)("div",{className:"max-h-[304px] overflow-y-auto p-1",children:r.map(b=>(0,d.jsxs)("div",{className:"flex h-8 cursor-pointer items-center rounded-lg px-2 hover:bg-state-base-hover",onClick:()=>{u(void 0,b),p(!1)},children:[(0,d.jsx)(n.default,{className:"mr-1 h-5 w-5 shrink-0",iconClassName:"h-5 w-5",provider:a,modelName:b.model}),(0,d.jsx)("div",{className:"system-md-regular grow truncate text-text-primary",title:b.model,children:b.model})]},b.model))}),!w&&(0,d.jsxs)("div",{className:"system-xs-medium flex cursor-pointer items-center border-t border-t-divider-subtle p-3 text-text-accent-light-mode-only",onClick:()=>{t(),p(!1)},children:[(0,d.jsx)(e.RiAddLine,{className:"mr-1 h-4 w-4"}),j("modelProvider.auth.addNewModel",{ns:"common"})]})]})})]})}),x=(0,f.memo)(({onClick:a,loadBalancingEnabled:b,loadBalancingInvalid:c,credentialRemoved:f})=>{let{t:h}=(0,g.useTranslation)();return c?(0,d.jsxs)("div",{className:"system-2xs-medium-uppercase relative flex h-[18px] cursor-pointer items-center rounded-[5px] border border-text-warning bg-components-badge-bg-dimm px-1.5 text-text-warning",onClick:a,children:[(0,d.jsx)(e.RiScales3Line,{className:"mr-0.5 h-3 w-3"}),h("modelProvider.auth.authorizationError",{ns:"common"}),(0,d.jsx)(r.default,{color:"orange",className:"absolute right-[-1px] top-[-1px] h-1.5 w-1.5"})]}):(0,d.jsxs)(i.default,{variant:"secondary",size:"small",className:(0,l.cn)("hidden shrink-0 group-hover:flex",f&&"flex"),onClick:a,children:[f&&(0,d.jsxs)(d.Fragment,{children:[h("modelProvider.auth.credentialRemoved",{ns:"common"}),(0,d.jsx)(r.default,{color:"red",className:"ml-2"})]}),!b&&!f&&!c&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e.RiEqualizer2Line,{className:"mr-1 h-4 w-4"}),h("operation.config",{ns:"common"})]}),b&&!f&&!c&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e.RiScales3Line,{className:"mr-1 h-4 w-4"}),h("modelProvider.auth.configLoadBalancing",{ns:"common"})]})]})});a.s(["default",0,x],815531);var y=a.i(704617);let z=(0,f.memo)(({provider:a,currentCustomConfigurationModelFixedFields:b})=>{let{t:c}=(0,g.useTranslation)(),{hasCredential:j,authorized:k,current_credential_id:l,current_credential_name:m,available_credentials:n}=(0,y.useCredentialStatus)(a),o=!1===a.allow_custom_token,p=(0,f.useCallback)(()=>{let a=j?c("operation.config",{ns:"common"}):c("operation.setup",{ns:"common"}),b=(0,d.jsxs)(i.Button,{className:"flex grow",size:"small",variant:k?"secondary":"secondary-accent",title:a,children:[(0,d.jsx)(e.RiEqualizer2Line,{className:"mr-1 h-3.5 w-3.5 shrink-0"}),(0,d.jsx)("span",{className:"w-0 grow truncate text-left",children:a})]});return o&&!j?(0,d.jsx)(q.default,{asChild:!0,popupContent:c("auth.credentialUnavailable",{ns:"plugin"}),children:b}):b},[k,j,o,c]);return(0,d.jsx)(u,{provider:a,configurationMethod:h.ConfigurationMethodEnum.predefinedModel,currentCustomConfigurationModelFixedFields:b,items:[{title:c("modelProvider.auth.apiKeys",{ns:"common"}),credentials:n??[],selectedCredential:{credential_id:l??"",credential_name:m??""}}],showItemSelectedIcon:!0,showModelTitle:!0,renderTrigger:p,triggerOnlyOpenModal:!j&&!o})}),A=(0,f.memo)(({provider:a,currentCustomConfigurationModelFixedFields:b})=>{let{t:c}=(0,g.useTranslation)(),e=(0,v.useCustomModels)(a),j=!e.length,k=(0,f.useCallback)(a=>(0,d.jsx)(i.Button,{variant:"ghost",size:"small",className:(0,l.cn)("mr-0.5 text-text-tertiary",a&&"bg-components-button-ghost-bg-hover"),children:c("modelProvider.auth.manageCredentials",{ns:"common"})}),[c]);return j?null:(0,d.jsx)(u,{provider:a,configurationMethod:h.ConfigurationMethodEnum.customizableModel,currentCustomConfigurationModelFixedFields:b,items:e.map(a=>({model:a,credentials:a.available_model_credentials??[],selectedCredential:a.current_credential_id?{credential_id:a.current_credential_id,credential_name:a.current_credential_name}:void 0})),renderTrigger:k,authParams:{isModelCredential:!0,mode:h.ModelModalModeEnum.configModelCredential},hideAddAction:!0,disableItemClick:!0,popupTitle:c("modelProvider.auth.customModelCredentials",{ns:"common"}),showModelTitle:!0,disableDeleteButShowAction:!0,disableDeleteTip:c("modelProvider.auth.customModelCredentialsDeleteTip",{ns:"common"})})});a.s(["AddCustomModel",()=>w],876390),a.s(["ManageCustomModelCredentials",()=>A],129317),a.s(["default",0,({className:a,children:b})=>(0,d.jsx)("div",{className:(0,l.cn)("system-2xs-medium-uppercase flex h-[18px] cursor-default items-center rounded-[5px] border border-divider-deep px-1 text-text-tertiary",a),children:b})],570081),a.s(["default",()=>I],678314),a.i(176156);var B=a.i(754545),B=B,C=a.i(637189),C=C;a.i(10035);var D=a.i(236010),D=D,E=a.i(730357),F=a.i(366231),G=a.i(954200),H=a.i(701458);let I=({provider:a,className:b})=>{let{theme:c}=(0,E.default)(),e=(0,H.useLanguage)();return"langgenius/anthropic/anthropic"===a.provider?(0,d.jsxs)("div",{className:"mb-2 py-[7px]",children:[c===G.Theme.dark&&(0,d.jsx)(C.default,{className:"h-2.5 w-[90px]"}),c===G.Theme.light&&(0,d.jsx)(B.default,{className:"h-2.5 w-[90px]"})]}):"langgenius/openai/openai"===a.provider?(0,d.jsx)("div",{className:"mb-2",children:(0,d.jsx)(D.default,{className:"h-6 w-auto text-text-inverted-dimmed"})}):(0,d.jsxs)("div",{className:(0,l.cn)("inline-flex items-center gap-2",b),children:[(0,d.jsx)("img",{alt:"provider-icon",src:(0,F.renderI18nObject)(c===G.Theme.dark&&a.icon_small_dark?a.icon_small_dark:a.icon_small,e),className:"h-6 w-6"}),(0,d.jsx)("div",{className:"system-md-semibold text-text-primary",children:(0,F.renderI18nObject)(a.label,e)})]})};a.s(["default",()=>a$],590801);var J=a.i(114715),K=a.i(18039),L=a.i(124116),M=a.i(9575),N=a.i(569707),O=a.i(721582),P=a.i(331653),Q=a.i(926832),R=a.i(624692),S=a.i(244265),T=a.i(853421),U=a.i(365746),V=a.i(610481),W=a.i(454696),X=a.i(666278),Y=a.i(525314),Z=a.i(735968),$=a.i(381130),_=a.i(518010),aa=a.i(223278),ab=a.i(264880),ac=a.i(215794),ad=a.i(492678),ae=a.i(955498),af=a.i(239302),ag=a.i(618659),ah=a.i(376066),ai=a.i(823561),aj=a.i(627410),ak=a.i(72563),al=a.i(369114),am=a.i(68957),an=a.i(242195),ao=((b=ao||{})[b.Open=0]="Open",b[b.Closed=1]="Closed",b),ap=((c=ap||{})[c.TogglePopover=0]="TogglePopover",c[c.ClosePopover=1]="ClosePopover",c[c.SetButton=2]="SetButton",c[c.SetButtonId=3]="SetButtonId",c[c.SetPanel=4]="SetPanel",c[c.SetPanelId=5]="SetPanelId",c);let aq={0:a=>({...a,popoverState:(0,aj.match)(a.popoverState,{0:1,1:0}),__demoMode:!1}),1:a=>1===a.popoverState?a:{...a,popoverState:1,__demoMode:!1},2:(a,b)=>a.button===b.button?a:{...a,button:b.button},3:(a,b)=>a.buttonId===b.buttonId?a:{...a,buttonId:b.buttonId},4:(a,b)=>a.panel===b.panel?a:{...a,panel:b.panel},5:(a,b)=>a.panelId===b.panelId?a:{...a,panelId:b.panelId}},ar=(0,f.createContext)(null);function as(a){let b=(0,f.useContext)(ar);if(null===b){let b=Error(`<${a} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(b,as),b}return b}ar.displayName="PopoverContext";let at=(0,f.createContext)(null);function au(a){let b=(0,f.useContext)(at);if(null===b){let b=Error(`<${a} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(b,au),b}return b}at.displayName="PopoverAPIContext";let av=(0,f.createContext)(null);function aw(){return(0,f.useContext)(av)}av.displayName="PopoverGroupContext";let ax=(0,f.createContext)(null);function ay(a,b){return(0,aj.match)(b.type,aq,a,b)}ax.displayName="PopoverPanelContext";let az=al.RenderFeatures.RenderStrategy|al.RenderFeatures.Static;function aA(a,b){let c=(0,f.useId)(),{id:d=`headlessui-popover-backdrop-${c}`,transition:e=!1,...g}=a,[{popoverState:h},i]=as("Popover.Backdrop"),[j,k]=(0,f.useState)(null),l=(0,aa.useSyncRefs)(b,k),m=(0,ag.useOpenClosed)(),[n,o]=(0,ac.useTransition)(e,j,null!==m?(m&ag.State.Open)===ag.State.Open:0===h),p=(0,S.useEvent)(a=>{if((0,ah.isDisabledReactIssue7711)(a.currentTarget))return a.preventDefault();i({type:1})}),q=(0,f.useMemo)(()=>({open:0===h}),[h]),r={ref:l,id:d,"aria-hidden":!0,onClick:p,...(0,ac.transitionDataAttributes)(o)};return(0,al.useRender)()({ourProps:r,theirProps:g,slot:q,defaultTag:"div",features:az,visible:n,name:"Popover.Backdrop"})}let aB=al.RenderFeatures.RenderStrategy|al.RenderFeatures.Static,aC=(0,al.forwardRefWithAs)(function(a,b){var c;let{__demoMode:d=!1,...e}=a,g=(0,f.useRef)(null),h=(0,aa.useSyncRefs)(b,(0,aa.optionalRef)(a=>{g.current=a})),i=(0,f.useRef)([]),j=(0,f.useReducer)(ay,{__demoMode:d,popoverState:+!d,buttons:i,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:(0,f.createRef)(),afterPanelSentinel:(0,f.createRef)(),afterButtonSentinel:(0,f.createRef)()}),[{popoverState:k,button:l,buttonId:m,panel:n,panelId:o,beforePanelSentinel:p,afterPanelSentinel:q,afterButtonSentinel:r},s]=j,t=(0,Y.useOwnerDocument)(null!=(c=g.current)?c:l),u=(0,f.useMemo)(()=>{if(!l||!n)return!1;for(let a of document.querySelectorAll("body > *"))if(Number(null==a?void 0:a.contains(l))^Number(null==a?void 0:a.contains(n)))return!0;let a=(0,ai.getFocusableElements)(),b=a.indexOf(l),c=(b+a.length-1)%a.length,d=(b+1)%a.length,e=a[c],f=a[d];return!n.contains(e)&&!n.contains(f)},[l,n]),v=(0,V.useLatestValue)(m),w=(0,V.useLatestValue)(o),x=(0,f.useMemo)(()=>({buttonId:v,panelId:w,close:()=>s({type:1})}),[v,w,s]),y=aw(),z=null==y?void 0:y.registerPopover,A=(0,S.useEvent)(()=>{var a;return null!=(a=null==y?void 0:y.isFocusWithinPopoverGroup())?a:(null==t?void 0:t.activeElement)&&((null==l?void 0:l.contains(t.activeElement))||(null==n?void 0:n.contains(t.activeElement)))});(0,f.useEffect)(()=>null==z?void 0:z(x),[z,x]);let[B,C]=(0,an.useNestedPortals)(),D=(0,$.useMainTreeNode)(l),E=(0,$.useRootContainers)({mainTreeNode:D,portals:B,defaultContainers:[l,n]});(0,T.useEventListener)(null==t?void 0:t.defaultView,"focus",a=>{var b,c,d,e,f,g;a.target!==window&&a.target instanceof HTMLElement&&0===k&&(A()||l&&n&&(E.contains(a.target)||null!=(c=null==(b=p.current)?void 0:b.contains)&&c.call(b,a.target)||null!=(e=null==(d=q.current)?void 0:d.contains)&&e.call(d,a.target)||null!=(g=null==(f=r.current)?void 0:f.contains)&&g.call(f,a.target)||s({type:1})))},!0),(0,X.useOutsideClick)(0===k,E.resolveContainers,(a,b)=>{s({type:1}),(0,ai.isFocusableElement)(b,ai.FocusableMode.Loose)||(a.preventDefault(),null==l||l.focus())});let F=(0,S.useEvent)(a=>{s({type:1});let b=a?a instanceof HTMLElement?a:"current"in a&&a.current instanceof HTMLElement?a.current:l:l;null==b||b.focus()}),G=(0,f.useMemo)(()=>({close:F,isPortalled:u}),[F,u]),H=(0,f.useMemo)(()=>({open:0===k,close:F}),[k,F]),I=(0,al.useRender)();return f.default.createElement($.MainTreeProvider,{node:D},f.default.createElement(ae.FloatingProvider,null,f.default.createElement(ax.Provider,{value:null},f.default.createElement(ar.Provider,{value:j},f.default.createElement(at.Provider,{value:G},f.default.createElement(ad.CloseProvider,{value:F},f.default.createElement(ag.OpenClosedProvider,{value:(0,aj.match)(k,{0:ag.State.Open,1:ag.State.Closed})},f.default.createElement(C,null,I({ourProps:{ref:h},theirProps:e,slot:H,defaultTag:"div",name:"Popover"})))))))))}),aD=(0,al.forwardRefWithAs)(function(a,b){let c=(0,f.useId)(),{id:d=`headlessui-popover-button-${c}`,disabled:e=!1,autoFocus:g=!1,...h}=a,[i,j]=as("Popover.Button"),{isPortalled:k}=au("Popover.Button"),l=(0,f.useRef)(null),m=`headlessui-focus-sentinel-${(0,f.useId)()}`,n=aw(),o=null==n?void 0:n.closeOthers,p=null!==(0,f.useContext)(ax);(0,f.useEffect)(()=>{if(!p)return j({type:3,buttonId:d}),()=>{j({type:3,buttonId:null})}},[p,d,j]);let[q]=(0,f.useState)(()=>Symbol()),r=(0,aa.useSyncRefs)(l,b,(0,ae.useFloatingReference)(),(0,S.useEvent)(a=>{if(!p){if(a)i.buttons.current.push(q);else{let a=i.buttons.current.indexOf(q);-1!==a&&i.buttons.current.splice(a,1)}i.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),a&&j({type:2,button:a})}})),s=(0,aa.useSyncRefs)(l,b),t=(0,Y.useOwnerDocument)(l),u=(0,S.useEvent)(a=>{var b,c,d;if(p){if(1===i.popoverState)return;switch(a.key){case am.Keys.Space:case am.Keys.Enter:a.preventDefault(),null==(c=(b=a.target).click)||c.call(b),j({type:1}),null==(d=i.button)||d.focus()}}else switch(a.key){case am.Keys.Space:case am.Keys.Enter:a.preventDefault(),a.stopPropagation(),1===i.popoverState&&(null==o||o(i.buttonId)),j({type:0});break;case am.Keys.Escape:if(0!==i.popoverState)return null==o?void 0:o(i.buttonId);if(!l.current||null!=t&&t.activeElement&&!l.current.contains(t.activeElement))return;a.preventDefault(),a.stopPropagation(),j({type:1})}}),v=(0,S.useEvent)(a=>{p||a.key===am.Keys.Space&&a.preventDefault()}),w=(0,S.useEvent)(a=>{var b,c;(0,ah.isDisabledReactIssue7711)(a.currentTarget)||e||(p?(j({type:1}),null==(b=i.button)||b.focus()):(a.preventDefault(),a.stopPropagation(),1===i.popoverState&&(null==o||o(i.buttonId)),j({type:0}),null==(c=i.button)||c.focus()))}),x=(0,S.useEvent)(a=>{a.preventDefault(),a.stopPropagation()}),{isFocusVisible:y,focusProps:z}=(0,O.useFocusRing)({autoFocus:g}),{isHovered:A,hoverProps:B}=(0,P.useHover)({isDisabled:e}),{pressed:C,pressProps:D}=(0,Q.useActivePress)({disabled:e}),E=0===i.popoverState,F=(0,f.useMemo)(()=>({open:E,active:C||E,disabled:e,hover:A,focus:y,autofocus:g}),[E,A,y,C,e,g]),G=(0,Z.useResolveButtonType)(a,i.button),H=p?(0,al.mergeProps)({ref:s,type:G,onKeyDown:u,onClick:w,disabled:e||void 0,autoFocus:g},z,B,D):(0,al.mergeProps)({ref:r,id:i.buttonId,type:G,"aria-expanded":0===i.popoverState,"aria-controls":i.panel?i.panelId:void 0,disabled:e||void 0,autoFocus:g,onKeyDown:u,onKeyUp:v,onClick:w,onMouseDown:x},z,B,D),I=(0,ab.useTabDirection)(),J=(0,S.useEvent)(()=>{let a=i.panel;a&&(0,aj.match)(I.current,{[ab.Direction.Forwards]:()=>(0,ai.focusIn)(a,ai.Focus.First),[ab.Direction.Backwards]:()=>(0,ai.focusIn)(a,ai.Focus.Last)})===ai.FocusResult.Error&&(0,ai.focusIn)((0,ai.getFocusableElements)().filter(a=>"true"!==a.dataset.headlessuiFocusGuard),(0,aj.match)(I.current,{[ab.Direction.Forwards]:ai.Focus.Next,[ab.Direction.Backwards]:ai.Focus.Previous}),{relativeTo:i.button})}),K=(0,al.useRender)();return f.default.createElement(f.default.Fragment,null,K({ourProps:H,theirProps:h,slot:F,defaultTag:"button",name:"Popover.Button"}),E&&!p&&k&&f.default.createElement(af.Hidden,{id:m,ref:i.afterButtonSentinel,features:af.HiddenFeatures.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:J}))}),aE=(0,al.forwardRefWithAs)(aA),aF=(0,al.forwardRefWithAs)(aA),aG=(0,al.forwardRefWithAs)(function(a,b){let c=(0,f.useId)(),{id:d=`headlessui-popover-panel-${c}`,focus:e=!1,anchor:g,portal:h=!1,modal:i=!1,transition:j=!1,...k}=a,[l,m]=as("Popover.Panel"),{close:n,isPortalled:o}=au("Popover.Panel"),p=`headlessui-focus-sentinel-before-${c}`,q=`headlessui-focus-sentinel-after-${c}`,r=(0,f.useRef)(null),s=(0,ae.useResolvedAnchor)(g),[t,u]=(0,ae.useFloatingPanel)(s),v=(0,ae.useFloatingPanelProps)();s&&(h=!0);let[w,x]=(0,f.useState)(null),y=(0,aa.useSyncRefs)(r,b,s?t:null,(0,S.useEvent)(a=>m({type:4,panel:a})),x),z=(0,Y.useOwnerDocument)(l.button),A=(0,Y.useOwnerDocument)(r);(0,U.useIsoMorphicEffect)(()=>(m({type:5,panelId:d}),()=>{m({type:5,panelId:null})}),[d,m]);let B=(0,ag.useOpenClosed)(),[C,D]=(0,ac.useTransition)(j,w,null!==B?(B&ag.State.Open)===ag.State.Open:0===l.popoverState);(0,W.useOnDisappear)(C,l.button,()=>{m({type:1})});let E=!l.__demoMode&&i&&C;(0,_.useScrollLock)(E,A);let F=(0,S.useEvent)(a=>{var b;if(a.key===am.Keys.Escape){if(0!==l.popoverState||!r.current||null!=A&&A.activeElement&&!r.current.contains(A.activeElement))return;a.preventDefault(),a.stopPropagation(),m({type:1}),null==(b=l.button)||b.focus()}});(0,f.useEffect)(()=>{var b;a.static||1===l.popoverState&&(null==(b=a.unmount)||b)&&m({type:4,panel:null})},[l.popoverState,a.unmount,a.static,m]),(0,f.useEffect)(()=>{if(l.__demoMode||!e||0!==l.popoverState||!r.current)return;let a=null==A?void 0:A.activeElement;r.current.contains(a)||(0,ai.focusIn)(r.current,ai.Focus.First)},[l.__demoMode,e,r.current,l.popoverState]);let G=(0,f.useMemo)(()=>({open:0===l.popoverState,close:n}),[l.popoverState,n]),H=(0,al.mergeProps)(s?v():{},{ref:y,id:d,onKeyDown:F,onBlur:e&&0===l.popoverState?a=>{var b,c,d,e,f;let g=a.relatedTarget;g&&r.current&&(null!=(b=r.current)&&b.contains(g)||(m({type:1}),(null!=(d=null==(c=l.beforePanelSentinel.current)?void 0:c.contains)&&d.call(c,g)||null!=(f=null==(e=l.afterPanelSentinel.current)?void 0:e.contains)&&f.call(e,g))&&g.focus({preventScroll:!0})))}:void 0,tabIndex:-1,style:{...k.style,...u,"--button-width":(0,R.useElementSize)(l.button,!0).width},...(0,ac.transitionDataAttributes)(D)}),I=(0,ab.useTabDirection)(),J=(0,S.useEvent)(()=>{let a=r.current;a&&(0,aj.match)(I.current,{[ab.Direction.Forwards]:()=>{var b;(0,ai.focusIn)(a,ai.Focus.First)===ai.FocusResult.Error&&(null==(b=l.afterPanelSentinel.current)||b.focus())},[ab.Direction.Backwards]:()=>{var a;null==(a=l.button)||a.focus({preventScroll:!0})}})}),K=(0,S.useEvent)(()=>{let a=r.current;a&&(0,aj.match)(I.current,{[ab.Direction.Forwards]:()=>{if(!l.button)return;let a=(0,ai.getFocusableElements)(),b=a.indexOf(l.button),c=a.slice(0,b+1),d=[...a.slice(b+1),...c];for(let a of d.slice())if("true"===a.dataset.headlessuiFocusGuard||null!=w&&w.contains(a)){let b=d.indexOf(a);-1!==b&&d.splice(b,1)}(0,ai.focusIn)(d,ai.Focus.First,{sorted:!1})},[ab.Direction.Backwards]:()=>{var b;(0,ai.focusIn)(a,ai.Focus.Previous)===ai.FocusResult.Error&&(null==(b=l.button)||b.focus())}})}),L=(0,al.useRender)();return f.default.createElement(ag.ResetOpenClosedProvider,null,f.default.createElement(ax.Provider,{value:d},f.default.createElement(at.Provider,{value:{close:n,isPortalled:o}},f.default.createElement(an.Portal,{enabled:!!h&&(a.static||C),ownerDocument:z},C&&o&&f.default.createElement(af.Hidden,{id:p,ref:l.beforePanelSentinel,features:af.HiddenFeatures.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:J}),L({ourProps:H,theirProps:k,slot:G,defaultTag:"div",features:aB,visible:C,name:"Popover.Panel"}),C&&o&&f.default.createElement(af.Hidden,{id:q,ref:l.afterPanelSentinel,features:af.HiddenFeatures.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:K})))))}),aH=Object.assign(aC,{Button:aD,Backdrop:aF,Overlay:aE,Panel:aG,Group:(0,al.forwardRefWithAs)(function(a,b){let c=(0,f.useRef)(null),d=(0,aa.useSyncRefs)(c,b),[e,g]=(0,f.useState)([]),h=(0,S.useEvent)(a=>{g(b=>{let c=b.indexOf(a);if(-1!==c){let a=b.slice();return a.splice(c,1),a}return b})}),i=(0,S.useEvent)(a=>(g(b=>[...b,a]),()=>h(a))),j=(0,S.useEvent)(()=>{var a;let b=(0,ak.getOwnerDocument)(c);if(!b)return!1;let d=b.activeElement;return!!(null!=(a=c.current)&&a.contains(d))||e.some(a=>{var c,e;return(null==(c=b.getElementById(a.buttonId.current))?void 0:c.contains(d))||(null==(e=b.getElementById(a.panelId.current))?void 0:e.contains(d))})}),k=(0,S.useEvent)(a=>{for(let b of e)b.buttonId.current!==a&&b.close()}),l=(0,f.useMemo)(()=>({registerPopover:i,unregisterPopover:h,isFocusWithinPopoverGroup:j,closeOthers:k}),[i,h,j,k]),m=(0,f.useMemo)(()=>({}),[]),n=(0,al.useRender)();return f.default.createElement($.MainTreeProvider,null,f.default.createElement(av.Provider,{value:l},n({ourProps:{ref:d},theirProps:a,slot:m,defaultTag:"div",name:"Popover.Group"})))})});a.s(["Popover",()=>aH,"PopoverButton",()=>aD,"PopoverPanel",()=>aG],278161);var aI=a.i(941938);let aJ=({value:a,onSelect:b})=>{let{t:c}=(0,g.useTranslation)(),j=[{key:h.PreferredProviderTypeEnum.custom,text:c("modelProvider.apiKey",{ns:"common"})},{key:h.PreferredProviderTypeEnum.system,text:c("modelProvider.quota",{ns:"common"})}];return(0,d.jsxs)(aH,{className:"relative",children:[(0,d.jsx)(aD,{as:"div",children:({open:a})=>(0,d.jsx)(i.default,{className:(0,l.cn)("h-6 w-6 rounded-md px-0",a&&"bg-components-button-secondary-bg-hover"),children:(0,d.jsx)(e.RiMoreFill,{className:"h-3 w-3"})})}),(0,d.jsx)(aI.Transition,{as:f.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,d.jsx)(aG,{className:"absolute right-0 top-7 z-10 w-[144px] rounded-lg border-[0.5px] border-components-panel-border bg-components-panel-bg shadow-lg",children:(0,d.jsxs)("div",{className:"p-1",children:[(0,d.jsx)("div",{className:"px-3 pb-1 pt-2 text-sm font-medium text-text-secondary",children:c("modelProvider.card.priorityUse",{ns:"common"})}),j.map(c=>(0,d.jsx)(aD,{as:f.Fragment,children:(0,d.jsxs)("div",{className:"flex h-9 cursor-pointer items-center justify-between rounded-lg px-3 text-sm text-text-secondary hover:bg-components-panel-on-panel-item-bg-hover",onClick:()=>b(c.key),children:[(0,d.jsx)("div",{className:"grow",children:c.text}),a===c.key&&(0,d.jsx)(e.RiCheckLine,{className:"h-4 w-4 text-text-accent"})]})},c.key))]})})})]})};var aK=a.i(796807),aL=a.i(715565);let aM=({ref:a,...b})=>(0,d.jsx)(aK.default,{...b,ref:a,data:aL.default});aM.displayName="ArrowNarrowLeft",a.s(["default",0,aM],424293);var aN=a.i(64093);let aO=({ref:a,...b})=>(0,d.jsx)(aK.default,{...b,ref:a,data:aN.default});aO.displayName="ArrowUpRight",a.s(["default",0,aO],234724);var aP=a.i(258151);let aQ=({ref:a,...b})=>(0,d.jsx)(aK.default,{...b,ref:a,data:aP.default});aQ.displayName="ChevronDownDouble";var aR=a.i(940819);let aS=({ref:a,...b})=>(0,d.jsx)(aK.default,{...b,ref:a,data:aR.default});aS.displayName="ChevronRight",a.s(["default",0,aS],848761);var aT=a.i(354877);let aU=({ref:a,...b})=>(0,d.jsx)(aK.default,{...b,ref:a,data:aT.default});aU.displayName="ChevronSelectorVertical",a.s(["default",0,aU],834934);var aV=a.i(72876);let aW=({ref:a,...b})=>(0,d.jsx)(aK.default,{...b,ref:a,data:aV.default});aW.displayName="IconR",a.s(["default",0,aW],848850);var aX=a.i(630990);let aY=({ref:a,...b})=>(0,d.jsx)(aK.default,{...b,ref:a,data:aX.default});aY.displayName="RefreshCcw01",a.s(["default",0,aY],604364),a.i(693461),a.i(21079),a.s([],943046);let aZ=()=>{let{t:a}=(0,g.useTranslation)();return(0,d.jsx)(q.default,{popupContent:a("modelProvider.priorityUsing",{ns:"common"})||"",children:(0,d.jsx)("div",{className:"absolute -right-[5px] -top-[5px] cursor-pointer rounded-[5px] border-[0.5px] border-components-panel-border-subtle bg-util-colors-indigo-indigo-50 shadow-xs",children:(0,d.jsx)(aQ,{className:"h-3 w-3 rotate-180 text-util-colors-indigo-indigo-600"})})})},a$=({provider:a})=>{let{t:b}=(0,g.useTranslation)(),{notify:c}=(0,J.useToastContext)(),{eventEmitter:e}=(0,L.useEventEmitterContextContext)(),i=(0,H.useUpdateModelList)(),j=(0,H.useUpdateModelProviders)(),k=a.custom_configuration,m=a.system_configuration,n=a.preferred_provider_type,o=k.status===h.CustomConfigurationStatusEnum.active,p=a.configurate_methods,{hasCredential:q,authorized:s,authRemoved:t,current_credential_name:u,notAllowedToUse:v}=(0,y.useCredentialStatus)(a),w=m.enabled&&o&&K.IS_CLOUD_EDITION,x=async d=>{"success"===(await (0,M.changeModelProviderPriority)({url:`/workspaces/current/model-providers/${a.provider}/preferred-provider-type`,body:{preferred_provider_type:d}})).result&&(c({type:"success",message:b("actionMsg.modifiedSuccessfully",{ns:"common"})}),j(),p.forEach(b=>{b===h.ConfigurationMethodEnum.predefinedModel&&a.supported_model_types.forEach(a=>i(a))}),e?.emit({type:N.UPDATE_MODEL_PROVIDER_CUSTOM_MODEL_LIST,payload:a.provider}))},A=(0,f.useMemo)(()=>q?s?u:t?b("modelProvider.auth.authRemoved",{ns:"common"}):"":b("modelProvider.auth.unAuthorized",{ns:"common"}),[s,t,u,q]),B=(0,f.useMemo)(()=>t||!q?"red":v?"gray":"green",[t,v,q]);return(0,d.jsxs)(d.Fragment,{children:[a.provider_credential_schema&&(0,d.jsxs)("div",{className:(0,l.cn)("relative ml-1 w-[120px] shrink-0 rounded-lg border-[0.5px] border-components-panel-border bg-white/[0.18] p-1",t&&"border-state-destructive-border bg-state-destructive-hover"),children:[(0,d.jsxs)("div",{className:"system-xs-medium mb-1 flex h-5 items-center justify-between pl-2 pr-[7px] pt-1 text-text-tertiary",children:[(0,d.jsx)("div",{className:(0,l.cn)("grow truncate",t&&"text-text-destructive"),title:A,children:A}),(0,d.jsx)(r.default,{className:"shrink-0",color:B})]}),(0,d.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,d.jsx)(z,{provider:a}),w&&(0,d.jsx)(aJ,{value:n,onSelect:x})]}),n===h.PreferredProviderTypeEnum.custom&&m.enabled&&(0,d.jsx)(aZ,{})]}),w&&!a.provider_credential_schema&&(0,d.jsx)("div",{className:"ml-1",children:(0,d.jsx)(aJ,{value:n,onSelect:x})})]})}},284909,665845,999590,703335,a=>{"use strict";var b=a.i(608061),c=a.i(796807),d=a.i(562107);let e=({ref:a,...e})=>(0,b.jsx)(c.default,{...e,ref:a,data:d.default});e.displayName="Balance",a.s(["default",0,e],665845),a.i(826851),a.i(262899),a.i(30243);var f=a.i(492986);let g=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:f.default});g.displayName="Tag01",a.s(["default",0,g],999590);var h=a.i(695709);let i=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:h.default});i.displayName="Tag03",a.s(["default",0,i],703335),a.s([],284909)},367246,a=>{"use strict";var b=a.i(665845);a.s(["Balance",()=>b.default])},81492,a=>{"use strict";var b=a.i(608061),c=a.i(721582),d=a.i(331653),e=a.i(57843),f=a.i(926832),g=a.i(723857),h=a.i(842740),i=a.i(424278),j=a.i(244265),k=a.i(735968),l=a.i(223278),m=a.i(831549),n=a.i(794211),o=a.i(653367),p=a.i(376066),q=a.i(789920),r=a.i(369114),s=a.i(535236),t=a.i(68957),u=a.i(335645);let v=(0,e.createContext)(null);v.displayName="GroupContext";let w=e.Fragment,x=Object.assign((0,r.forwardRefWithAs)(function(a,b){var w;let x=(0,e.useId)(),y=(0,o.useProvidedId)(),z=(0,m.useDisabled)(),{id:A=y||`headlessui-switch-${x}`,disabled:B=z||!1,checked:C,defaultChecked:D,onChange:E,name:F,value:G,form:H,autoFocus:I=!1,...J}=a,K=(0,e.useContext)(v),[L,M]=(0,e.useState)(null),N=(0,e.useRef)(null),O=(0,l.useSyncRefs)(N,b,null===K?null:K.setSwitch,M),P=(0,h.useDefaultValue)(D),[Q,R]=(0,g.useControllable)(C,E,null!=P&&P),S=(0,i.useDisposables)(),[T,U]=(0,e.useState)(!1),V=(0,j.useEvent)(()=>{U(!0),null==R||R(!Q),S.nextFrame(()=>{U(!1)})}),W=(0,j.useEvent)(a=>{if((0,p.isDisabledReactIssue7711)(a.currentTarget))return a.preventDefault();a.preventDefault(),V()}),X=(0,j.useEvent)(a=>{a.key===t.Keys.Space?(a.preventDefault(),V()):a.key===t.Keys.Enter&&(0,q.attemptSubmit)(a.currentTarget)}),Y=(0,j.useEvent)(a=>a.preventDefault()),Z=(0,u.useLabelledBy)(),$=(0,s.useDescribedBy)(),{isFocusVisible:_,focusProps:aa}=(0,c.useFocusRing)({autoFocus:I}),{isHovered:ab,hoverProps:ac}=(0,d.useHover)({isDisabled:B}),{pressed:ad,pressProps:ae}=(0,f.useActivePress)({disabled:B}),af=(0,e.useMemo)(()=>({checked:Q,disabled:B,hover:ab,focus:_,active:ad,autofocus:I,changing:T}),[Q,ab,_,ad,B,T,I]),ag=(0,r.mergeProps)({id:A,ref:O,role:"switch",type:(0,k.useResolveButtonType)(a,L),tabIndex:-1===a.tabIndex?0:null!=(w=a.tabIndex)?w:0,"aria-checked":Q,"aria-labelledby":Z,"aria-describedby":$,disabled:B||void 0,autoFocus:I,onClick:W,onKeyUp:X,onKeyPress:Y},aa,ac,ae),ah=(0,e.useCallback)(()=>{if(void 0!==P)return null==R?void 0:R(P)},[R,P]),ai=(0,r.useRender)();return e.default.createElement(e.default.Fragment,null,null!=F&&e.default.createElement(n.FormFields,{disabled:B,data:{[F]:G||"on"},overrides:{type:"checkbox",checked:Q},form:H,onReset:ah}),ai({ourProps:ag,theirProps:J,slot:af,defaultTag:"button",name:"Switch"}))}),{Group:function(a){var b;let[c,d]=(0,e.useState)(null),[f,g]=(0,u.useLabels)(),[h,i]=(0,s.useDescriptions)(),j=(0,e.useMemo)(()=>({switch:c,setSwitch:d}),[c,d]),k=(0,r.useRender)();return e.default.createElement(i,{name:"Switch.Description",value:h},e.default.createElement(g,{name:"Switch.Label",value:f,props:{htmlFor:null==(b=j.switch)?void 0:b.id,onClick(a){c&&(a.currentTarget instanceof HTMLLabelElement&&a.preventDefault(),c.click(),c.focus({preventScroll:!0}))}}},e.default.createElement(v.Provider,{value:j},k({ourProps:{},theirProps:a,slot:{},defaultTag:w,name:"Switch.Group"}))))},Label:u.Label,Description:s.Description});var y=a.i(527344);let z=({ref:a,onChange:c,size:d="md",defaultValue:f=!1,disabled:g=!1,className:h})=>{let[i,j]=(0,e.useState)(f);return(0,e.useEffect)(()=>{j(f)},[f]),(0,b.jsx)(x,{ref:a,checked:i,onChange:a=>{g||(j(a),c?.(a))},className:(0,y.cn)({lg:"h-6 w-11",l:"h-5 w-9",md:"h-4 w-7",sm:"h-3 w-5",xs:"h-2.5 w-3.5"}[d],i?"bg-components-toggle-bg":"bg-components-toggle-bg-unchecked","relative inline-flex  shrink-0 cursor-pointer rounded-[5px] border-2 border-transparent transition-colors duration-200 ease-in-out",g?"!cursor-not-allowed !opacity-50":"","xs"===d&&"rounded-sm",h),children:(0,b.jsx)("span",{"aria-hidden":"true",className:(0,y.cn)({lg:"h-5 w-5",l:"h-4 w-4",md:"h-3 w-3",sm:"h-2 w-2",xs:"h-1.5 w-1"}[d],i?({lg:"translate-x-5",l:"translate-x-4",md:"translate-x-3",sm:"translate-x-2",xs:"translate-x-1.5"})[d]:"translate-x-0","xs"===d&&"rounded-[1px]","pointer-events-none inline-block rounded-[3px] bg-components-toggle-knob shadow ring-0 transition duration-200 ease-in-out")})})};z.displayName="Switch";let A=e.memo(z);a.s(["default",0,A],81492)},701458,998068,34976,569707,a=>{"use strict";a.s(["useCurrentProviderAndModel",()=>R,"useDefaultModel",()=>Q,"useLanguage",()=>O,"useMarketplaceAllPlugins",()=>X,"useModelList",()=>P,"useModelListAndDefaultModel",()=>T,"useModelListAndDefaultModelAndCurrentProviderAndModel",()=>U,"useModelModalHandler",()=>Z,"useRefreshModel",()=>Y,"useSystemDefaultModelAndModelList",()=>N,"useTextGenerationCurrentProviderAndModelAndModelList",()=>S,"useUpdateModelList",()=>V,"useUpdateModelProviders",()=>W],701458);var b=a.i(528698),c=a.i(749249),d=a.i(57843),e=a.i(239567),f=a.i(263636),g=a.i(124116),h=a.i(252813),i=a.i(29255),j=a.i(375616),k=a.i(9575),l=a.i(763539),m=a.i(933988);a.s(["UPDATE_MODEL_PROVIDER_CUSTOM_MODEL_LIST",()=>L,"default",()=>M],569707);var n=a.i(608061),o=a.i(429150);a.i(752298);var p=a.i(693025);a.i(173348);var q=a.i(876390),r=a.i(129317),s=a.i(18039),t=a.i(705134),u=a.i(527344),v=a.i(570081),w=a.i(678314),x=a.i(299717),y=a.i(590801),z=a.i(981133),A=a.i(218865);a.i(284909);var B=a.i(367246),C=a.i(81492),D=a.i(483664),E=a.i(931164),F=a.i(815531),F=F,G=a.i(912626);a.s(["default",()=>I],34976);let H=({className:a,feature:b,showFeaturesLabel:c})=>{let{t:d}=(0,p.useTranslation)();return b===m.ModelFeatureEnum.vision?c?(0,n.jsxs)(v.default,{className:(0,u.cn)("gap-x-0.5",a),children:[(0,n.jsx)(o.RiImageCircleAiLine,{className:"size-3"}),(0,n.jsx)("span",{children:m.ModelFeatureTextEnum.vision})]}):(0,n.jsx)(D.default,{popupContent:d("modelProvider.featureSupported",{ns:"common",feature:m.ModelFeatureTextEnum.vision}),children:(0,n.jsx)("div",{className:"inline-block cursor-help",children:(0,n.jsx)(v.default,{className:(0,u.cn)("w-[18px] justify-center !px-0",a),children:(0,n.jsx)(o.RiImageCircleAiLine,{className:"size-3"})})})}):b===m.ModelFeatureEnum.document?c?(0,n.jsxs)(v.default,{className:(0,u.cn)("gap-x-0.5",a),children:[(0,n.jsx)(o.RiFileTextLine,{className:"size-3"}),(0,n.jsx)("span",{children:m.ModelFeatureTextEnum.document})]}):(0,n.jsx)(D.default,{popupContent:d("modelProvider.featureSupported",{ns:"common",feature:m.ModelFeatureTextEnum.document}),children:(0,n.jsx)("div",{className:"inline-block cursor-help",children:(0,n.jsx)(v.default,{className:(0,u.cn)("w-[18px] justify-center !px-0",a),children:(0,n.jsx)(o.RiFileTextLine,{className:"size-3"})})})}):b===m.ModelFeatureEnum.audio?c?(0,n.jsxs)(v.default,{className:(0,u.cn)("gap-x-0.5",a),children:[(0,n.jsx)(o.RiVoiceAiFill,{className:"size-3"}),(0,n.jsx)("span",{children:m.ModelFeatureTextEnum.audio})]}):(0,n.jsx)(D.default,{popupContent:d("modelProvider.featureSupported",{ns:"common",feature:m.ModelFeatureTextEnum.audio}),children:(0,n.jsx)("div",{className:"inline-block cursor-help",children:(0,n.jsx)(v.default,{className:(0,u.cn)("w-[18px] justify-center !px-0",a),children:(0,n.jsx)(o.RiVoiceAiFill,{className:"size-3"})})})}):b===m.ModelFeatureEnum.video?c?(0,n.jsxs)(v.default,{className:(0,u.cn)("gap-x-0.5",a),children:[(0,n.jsx)(o.RiFilmAiLine,{className:"size-3"}),(0,n.jsx)("span",{children:m.ModelFeatureTextEnum.video})]}):(0,n.jsx)(D.default,{popupContent:d("modelProvider.featureSupported",{ns:"common",feature:m.ModelFeatureTextEnum.video}),children:(0,n.jsx)("div",{className:"inline-block cursor-help",children:(0,n.jsx)(v.default,{className:(0,u.cn)("w-[18px] justify-center !px-0",a),children:(0,n.jsx)(o.RiFilmAiLine,{className:"size-3"})})})}):null};a.s(["default",0,H],998068);let I=({modelItem:a,className:b,showModelType:c,modelTypeClassName:d,showMode:e,modeClassName:f,showFeatures:g,showFeaturesLabel:h,featuresClassName:i,showContextSize:j,children:k})=>{let l=O();return a?(0,n.jsxs)("div",{className:(0,u.cn)("system-sm-regular flex items-center gap-0.5 overflow-hidden truncate text-ellipsis text-components-input-text-filled",b),children:[(0,n.jsx)("div",{className:"truncate",title:a.label[l]||a.label.en_US,children:a.label[l]||a.label.en_US}),(0,n.jsxs)("div",{className:"flex items-center gap-0.5",children:[!!(c&&a.model_type)&&(0,n.jsx)(v.default,{className:d,children:(0,x.modelTypeFormat)(a.model_type)}),!!(a.model_properties.mode&&e)&&(0,n.jsx)(v.default,{className:f,children:a.model_properties.mode.toLocaleUpperCase()}),!!(j&&a.model_properties.context_size)&&(0,n.jsx)(v.default,{children:(0,x.sizeFormat)(a.model_properties.context_size)}),g&&a.features?.map(a=>(0,n.jsx)(H,{feature:a,className:i,showFeaturesLabel:h},a))]}),k]}):null},J=(0,d.memo)(({model:a,provider:b,isConfigurable:c,onChange:e,onModifyLoadBalancing:f})=>{let{t:g}=(0,p.useTranslation)(),{plan:h}=(0,j.useProviderContext)(),i=(0,j.useProviderContextSelector)(a=>a.modelLoadBalancingEnabled),{isCurrentWorkspaceManager:l}=(0,t.useAppContext)(),o=V(),q=(0,d.useCallback)(async c=>{c?await (0,k.enableModel)(`/workspaces/current/model-providers/${b.provider}/models/enable`,{model:a.model,model_type:a.model_type}):await (0,k.disableModel)(`/workspaces/current/model-providers/${b.provider}/models/disable`,{model:a.model,model_type:a.model_type}),o(a.model_type),e?.(b.provider)},[a.model,a.model_type,e,b.provider,o]),{run:r}=(0,z.useDebounceFn)(q,{wait:500}),s=(0,d.useCallback)(async a=>{r(a)},[r]);return(0,n.jsxs)("div",{className:(0,u.cn)("group flex h-8 items-center rounded-lg pl-2 pr-2.5",c&&"hover:bg-components-panel-on-panel-item-bg-hover",a.deprecated&&"opacity-60"),children:[(0,n.jsx)(G.default,{className:"mr-2 shrink-0",provider:b,modelName:a.model}),(0,n.jsx)(I,{className:"system-md-regular grow text-text-secondary",modelItem:a,showModelType:!0,showMode:!0,showContextSize:!0,showFeatures:!0,showFeaturesLabel:!0}),(0,n.jsxs)("div",{className:"flex shrink-0 items-center",children:[i&&!a.deprecated&&a.load_balancing_enabled&&!a.has_invalid_load_balancing_configs&&(0,n.jsx)(A.default,{className:"mr-1 h-[18px] w-[18px] items-center justify-center border-text-accent-secondary p-0",children:(0,n.jsx)(B.Balance,{className:"h-3 w-3 text-text-accent-secondary"})}),l&&(i||h.type===E.Plan.sandbox)&&!a.deprecated&&[m.ModelStatusEnum.active,m.ModelStatusEnum.disabled].includes(a.status)&&(0,n.jsx)(F.default,{onClick:()=>f?.(a),loadBalancingEnabled:a.load_balancing_enabled,loadBalancingInvalid:a.has_invalid_load_balancing_configs,credentialRemoved:a.status===m.ModelStatusEnum.credentialRemoved}),a.deprecated?(0,n.jsx)(D.default,{popupContent:(0,n.jsx)("span",{className:"font-semibold",children:g("modelProvider.modelHasBeenDeprecated",{ns:"common"})}),offset:{mainAxis:4},children:(0,n.jsx)(C.default,{defaultValue:!1,disabled:!0,size:"md"})}):l&&(0,n.jsx)(C.default,{className:"ml-2",defaultValue:a?.status===m.ModelStatusEnum.active,disabled:![m.ModelStatusEnum.active,m.ModelStatusEnum.disabled].includes(a.status),size:"md",onChange:s})]})]},`${a.model}-${a.fetch_from}`)}),K=({provider:a,models:b,onCollapse:c,onChange:e})=>{let{t:f}=(0,p.useTranslation)(),g=a.configurate_methods.filter(a=>a!==m.ConfigurationMethodEnum.fetchFromRemote),{isCurrentWorkspaceManager:h}=(0,t.useAppContext)(),j=g.includes(m.ConfigurationMethodEnum.customizableModel),k=(0,i.useModalContextSelector)(a=>a.setShowModelLoadBalancingModal),l=(0,d.useCallback)((b,c)=>{k({provider:a,credential:c,configurateMethod:b.fetch_from,model:b,open:!!b,onClose:()=>k(null),onSave:e})},[e,a,k]);return(0,n.jsx)("div",{className:"rounded-b-xl px-2 pb-2",children:(0,n.jsxs)("div",{className:"rounded-lg bg-components-panel-bg py-1",children:[(0,n.jsxs)("div",{className:"flex items-center pl-1 pr-[3px]",children:[(0,n.jsxs)("span",{className:"group mr-2 flex shrink-0 items-center",children:[(0,n.jsxs)("span",{className:"system-xs-medium inline-flex h-6 items-center pl-1 pr-1.5 text-text-tertiary group-hover:hidden",children:[f("modelProvider.modelsNum",{ns:"common",num:b.length}),(0,n.jsx)(o.RiArrowRightSLine,{className:"mr-0.5 h-4 w-4 rotate-90"})]}),(0,n.jsxs)("span",{className:"system-xs-medium hidden h-6 cursor-pointer items-center rounded-lg bg-state-base-hover pl-1 pr-1.5 text-text-tertiary group-hover:inline-flex",onClick:()=>c(),children:[f("modelProvider.modelsNum",{ns:"common",num:b.length}),(0,n.jsx)(o.RiArrowRightSLine,{className:"mr-0.5 h-4 w-4 rotate-90"})]})]}),j&&h&&(0,n.jsxs)("div",{className:"flex grow justify-end",children:[(0,n.jsx)(r.ManageCustomModelCredentials,{provider:a,currentCustomConfigurationModelFixedFields:void 0}),(0,n.jsx)(q.AddCustomModel,{provider:a,configurationMethod:m.ConfigurationMethodEnum.customizableModel,currentCustomConfigurationModelFixedFields:void 0})]})]}),b.map(b=>(0,n.jsx)(J,{model:b,provider:a,isConfigurable:j,onChange:e,onModifyLoadBalancing:l},`${b.model}-${b.model_type}-${b.fetch_from}`))]})})},L="UPDATE_MODEL_PROVIDER_CUSTOM_MODEL_LIST",M=({notConfigured:a,provider:b})=>{let{t:c}=(0,p.useTranslation)(),{eventEmitter:e}=(0,g.useEventEmitterContextContext)(),[f,h]=(0,d.useState)(!1),[i,j]=(0,d.useState)(!1),[l,z]=(0,d.useState)(!0),[A,B]=(0,d.useState)([]),C=b.configurate_methods.filter(a=>a!==m.ConfigurationMethodEnum.fetchFromRemote),D=b.system_configuration,E=f&&!!A.length,{isCurrentWorkspaceManager:F}=(0,t.useAppContext)(),G=D.enabled&&x.MODEL_PROVIDER_QUOTA_GET_PAID.includes(b.provider)&&!s.IS_CE_EDITION,H=C.includes(m.ConfigurationMethodEnum.predefinedModel)&&F,I=async a=>{if(!i)try{j(!0);let b=await (0,k.fetchModelProviderModelList)(`/workspaces/current/model-providers/${a}/models`);B(b.data),z(!1),h(!0)}finally{j(!1)}};return e?.useSubscription(a=>{a?.type===L&&a.payload===b.provider&&I(a.payload)}),(0,n.jsxs)("div",{className:(0,u.cn)("mb-2 rounded-xl border-[0.5px] border-divider-regular bg-third-party-model-bg-default shadow-xs","langgenius/openai/openai"===b.provider&&"bg-third-party-model-bg-openai","langgenius/anthropic/anthropic"===b.provider&&"bg-third-party-model-bg-anthropic"),children:[(0,n.jsxs)("div",{className:"flex rounded-t-xl py-2 pl-3 pr-2",children:[(0,n.jsxs)("div",{className:"grow px-1 pb-0.5 pt-1",children:[(0,n.jsx)(w.default,{className:"mb-2",provider:b}),(0,n.jsx)("div",{className:"flex gap-0.5",children:b.supported_model_types.map(a=>(0,n.jsx)(v.default,{children:(0,x.modelTypeFormat)(a)},a))})]}),H&&(0,n.jsx)(y.default,{provider:b})]}),l&&(0,n.jsxs)("div",{className:"system-xs-medium group flex items-center justify-between border-t border-t-divider-subtle py-1.5 pl-2 pr-[11px] text-text-tertiary",children:[(G||!a)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex h-6 items-center pl-1 pr-1.5 leading-6 group-hover:hidden",children:[E?c("modelProvider.modelsNum",{ns:"common",num:A.length}):c("modelProvider.showModels",{ns:"common"}),!i&&(0,n.jsx)(o.RiArrowRightSLine,{className:"h-4 w-4"})]}),(0,n.jsxs)("div",{className:"hidden h-6 cursor-pointer items-center rounded-lg pl-1 pr-1.5 hover:bg-components-button-ghost-bg-hover group-hover:flex",onClick:()=>{f?z(!1):I(b.provider)},children:[E?c("modelProvider.showModelsNum",{ns:"common",num:A.length}):c("modelProvider.showModels",{ns:"common"}),!i&&(0,n.jsx)(o.RiArrowRightSLine,{className:"h-4 w-4"}),i&&(0,n.jsx)(o.RiLoader2Line,{className:"ml-0.5 h-3 w-3 animate-spin"})]})]}),!G&&a&&(0,n.jsxs)("div",{className:"flex h-6 items-center pl-1 pr-1.5",children:[(0,n.jsx)(o.RiInformation2Fill,{className:"mr-1 h-4 w-4 text-text-accent"}),(0,n.jsx)("span",{className:"system-xs-medium text-text-secondary",children:c("modelProvider.configureTip",{ns:"common"})})]}),C.includes(m.ConfigurationMethodEnum.customizableModel)&&F&&(0,n.jsxs)("div",{className:"flex grow justify-end",children:[(0,n.jsx)(r.ManageCustomModelCredentials,{provider:b,currentCustomConfigurationModelFixedFields:void 0}),(0,n.jsx)(q.AddCustomModel,{provider:b,configurationMethod:m.ConfigurationMethodEnum.customizableModel,currentCustomConfigurationModelFixedFields:void 0})]})]}),!l&&(0,n.jsx)(K,{provider:b,models:A,onCollapse:()=>z(!0),onChange:a=>I(a)})]})},N=(a,b)=>{let c=(0,d.useMemo)(()=>{let c=b.find(b=>b.provider===a?.provider.provider),d=c?.models.find(b=>b.model===a?.model);return c&&d&&{model:d.model,provider:c.provider}},[a,b]),[e,f]=(0,d.useState)(c),g=(0,d.useCallback)(a=>{f(a)},[]);return(0,d.useEffect)(()=>{f(c)},[c]),[e,g]},O=()=>(0,h.useLocale)().replace("-","_"),P=a=>{let{data:c,refetch:d,isPending:e}=(0,b.useQuery)({queryKey:l.commonQueryKeys.modelList(a),queryFn:()=>(0,k.fetchModelList)(`/workspaces/current/models/model-types/${a}`)});return{data:c?.data||[],mutate:d,isLoading:e}},Q=a=>{let{data:c,refetch:d,isPending:e}=(0,b.useQuery)({queryKey:l.commonQueryKeys.defaultModel(a),queryFn:()=>(0,k.fetchDefaultModal)(`/workspaces/current/default-model?model_type=${a}`)});return{data:c?.data,mutate:d,isLoading:e}},R=(a,b)=>{let c=a.find(a=>a.provider===b?.provider),d=c?.models.find(a=>a.model===b?.model);return{currentProvider:c,currentModel:d}},S=a=>{let{textGenerationModelList:b}=(0,j.useProviderContext)(),c=b.filter(a=>a.status===m.ModelStatusEnum.active),{currentProvider:d,currentModel:e}=R(b,a);return{currentProvider:d,currentModel:e,textGenerationModelList:b,activeTextGenerationModelList:c}},T=a=>{let{data:b}=P(a),{data:c}=Q(a);return{modelList:b,defaultModel:c}},U=a=>{let{modelList:b,defaultModel:c}=T(a),{currentProvider:d,currentModel:e}=R(b,{provider:c?.provider.provider||"",model:c?.model||""});return{modelList:b,defaultModel:c,currentProvider:d,currentModel:e}},V=()=>{let a=(0,c.useQueryClient)();return(0,d.useCallback)(b=>{a.invalidateQueries({queryKey:l.commonQueryKeys.modelList(b)})},[a])},W=()=>{let a=(0,c.useQueryClient)();return(0,d.useCallback)(()=>{a.invalidateQueries({queryKey:l.commonQueryKeys.modelProviders})},[a])},X=(a,b)=>{let c=(0,d.useMemo)(()=>a.map(a=>a.provider.replace(/(.+)\/([^/]+)$/,"$1")),[a]),{plugins:g=[],isLoading:h}=(0,e.useMarketplacePluginsByCollectionId)("__model-settings-pinned-models"),{plugins:i,queryPlugins:j,queryPluginsWithDebounced:k,isLoading:l}=(0,e.useMarketplacePlugins)();return(0,d.useEffect)(()=>{b?k({query:b,category:f.PluginCategoryEnum.model,exclude:c,type:"plugin",sort_by:"install_count",sort_order:"DESC"}):j({query:"",category:f.PluginCategoryEnum.model,type:"plugin",page_size:1e3,exclude:c,sort_by:"install_count",sort_order:"DESC"})},[j,k,b,c]),{plugins:(0,d.useMemo)(()=>{let a=g.filter(a=>!c.includes(a.plugin_id));if(i?.length)for(let b=0;b<i.length;b++){let c=i[b];"bundle"===c.type||a.find(a=>a.plugin_id===c.plugin_id)||a.push(c)}return a},[i,g,c]),isLoading:h||l}},Y=()=>{let{eventEmitter:a}=(0,g.useEventEmitterContextContext)(),b=W(),c=V();return{handleRefreshModel:(0,d.useCallback)((d,e,f)=>{b(),d.supported_model_types.forEach(a=>{c(a)}),f&&d.custom_configuration.status===m.CustomConfigurationStatusEnum.active&&(a?.emit({type:L,payload:d.provider}),e?.__model_type&&c(e.__model_type))},[a,c,b])}},Z=()=>{let a=(0,i.useModalContextSelector)(a=>a.setShowModelModal);return(b,c,d,e={})=>{a({payload:{currentProvider:b,currentConfigurationMethod:c,currentCustomConfigurationModelFixedFields:d,isModelCredential:e.isModelCredential,credential:e.credential,model:e.model,mode:e.mode},onSaveCallback:(a,b)=>{e.onUpdate?.(a,b)}})}}}];

//# sourceMappingURL=_8f59e423._.js.map