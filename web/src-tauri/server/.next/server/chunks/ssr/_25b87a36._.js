module.exports=[627001,a=>{"use strict";var b=a.i(608061),c=a.i(680697),d=a.i(203510),e=a.i(527344);(0,d.init)({data:c.default}),a.s(["default",0,({iconType:a,icon:c,background:d,imageUrl:f})=>{let g=(0,e.cn)("flex","items-center","justify-center","w-full","h-full","rounded-full","border-[0.5px]","border-black/5","text-xl"),h="image"===a&&f;return(0,b.jsx)("div",{className:g,style:{background:d||"#D5F5F6"},children:h?(0,b.jsx)("img",{src:f,className:"h-full w-full rounded-full",alt:"answer icon"}):c&&""!==c?(0,b.jsx)("em-emoji",{id:c}):(0,b.jsx)("em-emoji",{id:"ðŸ¤–"})})}])},146993,a=>{"use strict";var b=a.i(608061),c=a.i(639378);let d=(0,c.createContext)({chatList:[],readonly:!1});a.s(["ChatContextProvider",0,({children:a,readonly:c=!1,config:e,isResponding:f,chatList:g,showPromptLog:h,questionIcon:i,answerIcon:j,onSend:k,onRegenerate:l,onAnnotationEdited:m,onAnnotationAdded:n,onAnnotationRemoved:o,disableFeedback:p,onFeedback:q})=>(0,b.jsx)(d.Provider,{value:{config:e,readonly:c,isResponding:f,chatList:g||[],showPromptLog:h,questionIcon:i,answerIcon:j,onSend:k,onRegenerate:l,onAnnotationEdited:m,onAnnotationAdded:n,onAnnotationRemoved:o,disableFeedback:p,onFeedback:q},children:a}),"useChatContext",0,()=>(0,c.useContext)(d)])},246378,a=>{"use strict";var b=a.i(608061),c=a.i(57843),d=a.i(527344),e=a.i(146993);let f=(0,c.memo)(({item:a})=>{let{onSend:c,readonly:f}=(0,e.useChatContext)(),{isOpeningStatement:g,suggestedQuestions:h}=a;return g&&h?.length?(0,b.jsx)("div",{className:"flex flex-wrap",children:h.filter(a=>!!a&&a.trim()).map((a,e)=>(0,b.jsx)("div",{className:(0,d.cn)("system-sm-medium mr-1 mt-1 inline-flex max-w-full shrink-0 cursor-pointer flex-wrap rounded-lg border-[0.5px] border-components-button-secondary-border bg-components-button-secondary-bg px-3.5 py-2 text-components-button-secondary-accent-text shadow-xs last:mr-0 hover:border-components-button-secondary-border-hover hover:bg-components-button-secondary-bg-hover",f&&"pointer-events-none opacity-50"),onClick:()=>!f&&c?.(a),children:a},e))}):null});a.s(["default",0,f])},31792,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(617633),e=a.i(57843);a.i(752298);var f=a.i(693025),g=a.i(527344),h=a.i(562168),i=a.i(454704),j=a.i(639378),k=a.i(243103),l=a.i(105249),m=a.i(114715),n=a.i(622191),o=a.i(373178),p=a.i(787405),q=a.i(785918),r=a.i(98654);let s=({elapsed_time:a,total_tokens:c,error:d,inputs:e,outputs:g,created_by:h,created_at:i,agentMode:j,tools:k,iterations:l})=>{let{t:m}=(0,f.useTranslation)(),{formatTime:n}=(0,r.default)();return(0,b.jsxs)("div",{className:"bg-components-panel-bg py-2",children:[(0,b.jsx)("div",{className:"px-4 py-2",children:(0,b.jsx)(q.default,{status:"succeeded",time:a,tokens:c,error:d})}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 px-4 py-2",children:[(0,b.jsx)(o.default,{readOnly:!0,title:(0,b.jsx)("div",{children:"INPUT"}),language:p.CodeLanguage.json,value:e,isJSONStringifyBeauty:!0}),(0,b.jsx)(o.default,{readOnly:!0,title:(0,b.jsx)("div",{children:"OUTPUT"}),language:p.CodeLanguage.json,value:g,isJSONStringifyBeauty:!0})]}),(0,b.jsx)("div",{className:"px-4 py-2",children:(0,b.jsx)("div",{className:"h-[0.5px] bg-divider-regular opacity-5"})}),(0,b.jsx)("div",{className:"px-4 py-2",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"h-6 text-xs font-medium leading-6 text-text-tertiary",children:m("meta.title",{ns:"runLog"})}),(0,b.jsxs)("div",{className:"py-1",children:[(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("div",{className:"w-[104px] shrink-0 truncate px-2 py-[5px] text-xs leading-[18px] text-text-tertiary",children:m("meta.status",{ns:"runLog"})}),(0,b.jsx)("div",{className:"grow px-2 py-[5px] text-xs leading-[18px] text-text-primary",children:(0,b.jsx)("span",{children:"SUCCESS"})})]}),(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("div",{className:"w-[104px] shrink-0 truncate px-2 py-[5px] text-xs leading-[18px] text-text-tertiary",children:m("meta.executor",{ns:"runLog"})}),(0,b.jsx)("div",{className:"grow px-2 py-[5px] text-xs leading-[18px] text-text-primary",children:(0,b.jsx)("span",{children:h||"N/A"})})]}),(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("div",{className:"w-[104px] shrink-0 truncate px-2 py-[5px] text-xs leading-[18px] text-text-tertiary",children:m("meta.startTime",{ns:"runLog"})}),(0,b.jsx)("div",{className:"grow px-2 py-[5px] text-xs leading-[18px] text-text-primary",children:(0,b.jsx)("span",{children:n(Date.parse(i)/1e3,m("dateTimeFormat",{ns:"appLog"}))})})]}),(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("div",{className:"w-[104px] shrink-0 truncate px-2 py-[5px] text-xs leading-[18px] text-text-tertiary",children:m("meta.time",{ns:"runLog"})}),(0,b.jsx)("div",{className:"grow px-2 py-[5px] text-xs leading-[18px] text-text-primary",children:(0,b.jsx)("span",{children:`${a?.toFixed(3)}s`})})]}),(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("div",{className:"w-[104px] shrink-0 truncate px-2 py-[5px] text-xs leading-[18px] text-text-tertiary",children:m("meta.tokens",{ns:"runLog"})}),(0,b.jsx)("div",{className:"grow px-2 py-[5px] text-xs leading-[18px] text-text-primary",children:(0,b.jsx)("span",{children:`${c||0} Tokens`})})]}),(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("div",{className:"w-[104px] shrink-0 truncate px-2 py-[5px] text-xs leading-[18px] text-text-tertiary",children:m("agentLogDetail.agentMode",{ns:"appLog"})}),(0,b.jsx)("div",{className:"grow px-2 py-[5px] text-xs leading-[18px] text-text-primary",children:(0,b.jsx)("span",{children:m("function_call"===j?"agent.agentModeType.functionCall":"agent.agentModeType.ReACT",{ns:"appDebug"})})})]}),(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("div",{className:"w-[104px] shrink-0 truncate px-2 py-[5px] text-xs leading-[18px] text-text-tertiary",children:m("agentLogDetail.toolUsed",{ns:"appLog"})}),(0,b.jsx)("div",{className:"grow px-2 py-[5px] text-xs leading-[18px] text-text-primary",children:(0,b.jsx)("span",{children:k?.length?k?.join(", "):"Null"})})]}),(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("div",{className:"w-[104px] shrink-0 truncate px-2 py-[5px] text-xs leading-[18px] text-text-tertiary",children:m("agentLogDetail.iterations",{ns:"appLog"})}),(0,b.jsx)("div",{className:"grow px-2 py-[5px] text-xs leading-[18px] text-text-primary",children:(0,b.jsx)("span",{children:l})})]})]})]})})]})};var t=a.i(757801);a.i(943046);var u=a.i(782465),v=a.i(438961),w=a.i(735310),x=a.i(252813);let y=({toolCall:a,isLLM:d=!1,isFinal:f,tokens:h,observation:i,finalAnswer:j})=>{var k,l;let[m,n]=(0,e.useState)(!0),q=(0,x.useLocale)(),r=d?"LLM":a.tool_label[q]||a.tool_label[q.replaceAll("-","_")];return(0,b.jsx)("div",{className:(0,g.cn)("py-1"),children:(0,b.jsxs)("div",{className:(0,g.cn)("group rounded-2xl border border-components-panel-border bg-background-default shadow-xs transition-all hover:shadow-md"),children:[(0,b.jsxs)("div",{className:(0,g.cn)("flex cursor-pointer items-center py-3 pl-[6px] pr-3",!m&&"!pb-2"),onClick:()=>n(!m),children:[(0,b.jsx)(u.ChevronRight,{className:(0,g.cn)("mr-1 h-3 w-3 shrink-0 text-text-quaternary transition-all group-hover:text-text-tertiary",!m&&"rotate-90")}),(0,b.jsx)(v.default,{className:(0,g.cn)("mr-2 shrink-0"),type:d?w.BlockEnum.LLM:w.BlockEnum.Tool,toolIcon:a.tool_icon}),(0,b.jsx)("div",{className:(0,g.cn)("grow truncate text-[13px] font-semibold leading-[16px] text-text-secondary"),title:r,children:r}),(0,b.jsxs)("div",{className:"shrink-0 text-xs leading-[18px] text-text-tertiary",children:[!!a.time_cost&&(0,b.jsx)("span",{children:(k=a.time_cost||0)<1?`${(1e3*k).toFixed(3)} ms`:k>60?`${Math.floor(k/60)} m ${(k%60).toFixed(3)} s`:`${k.toFixed(3)} s`}),d&&(0,b.jsx)("span",{children:`${(l=h||0)<1e3?l:l>=1e3&&l<1e6?`${Number.parseFloat((l/1e3).toFixed(3))}K`:l>=1e6?`${Number.parseFloat((l/1e6).toFixed(3))}M`:void 0} tokens`})]}),"success"===a.status&&(0,b.jsx)(c.RiCheckboxCircleLine,{className:"ml-2 h-3.5 w-3.5 shrink-0 text-[#12B76A]"}),"error"===a.status&&(0,b.jsx)(c.RiErrorWarningLine,{className:"ml-2 h-3.5 w-3.5 shrink-0 text-[#F04438]"})]}),!m&&(0,b.jsxs)("div",{className:"pb-2",children:[(0,b.jsx)("div",{className:(0,g.cn)("px-[10px] py-1"),children:"error"===a.status&&(0,b.jsx)("div",{className:"rounded-lg border-[0.5px] border-[rbga(0,0,0,0.05)] bg-[#fef3f2] px-3 py-[10px] text-xs leading-[18px] text-[#d92d20] shadow-xs",children:a.error})}),a.tool_input&&(0,b.jsx)("div",{className:(0,g.cn)("px-[10px] py-1"),children:(0,b.jsx)(o.default,{readOnly:!0,title:(0,b.jsx)("div",{children:"INPUT"}),language:p.CodeLanguage.json,value:a.tool_input,isJSONStringifyBeauty:!0})}),a.tool_output&&(0,b.jsx)("div",{className:(0,g.cn)("px-[10px] py-1"),children:(0,b.jsx)(o.default,{readOnly:!0,title:(0,b.jsx)("div",{children:"OUTPUT"}),language:p.CodeLanguage.json,value:a.tool_output,isJSONStringifyBeauty:!0})}),d&&(0,b.jsx)("div",{className:(0,g.cn)("px-[10px] py-1"),children:(0,b.jsx)(o.default,{readOnly:!0,title:(0,b.jsx)("div",{children:"OBSERVATION"}),language:p.CodeLanguage.json,value:i,isJSONStringifyBeauty:!0})}),d&&(0,b.jsx)("div",{className:(0,g.cn)("px-[10px] py-1"),children:(0,b.jsx)(o.default,{readOnly:!0,title:(0,b.jsx)("div",{children:f?"FINAL ANSWER":"THOUGHT"}),language:p.CodeLanguage.json,value:j,isJSONStringifyBeauty:!0})})]})]})})},z=({iterationInfo:a,isFinal:c,index:d})=>{let{t:e}=(0,f.useTranslation)();return(0,b.jsxs)("div",{className:(0,g.cn)("px-4 py-2"),children:[(0,b.jsxs)("div",{className:"flex items-center",children:[c&&(0,b.jsx)("div",{className:"mr-3 shrink-0 text-xs font-semibold leading-[18px] text-text-tertiary",children:e("agentLogDetail.finalProcessing",{ns:"appLog"})}),!c&&(0,b.jsx)("div",{className:"mr-3 shrink-0 text-xs font-semibold leading-[18px] text-text-tertiary",children:`${e("agentLogDetail.iteration",{ns:"appLog"}).toUpperCase()} ${d}`}),(0,b.jsx)(t.default,{bgStyle:"gradient",className:"mx-0 h-px grow"})]}),(0,b.jsx)(y,{isLLM:!0,isFinal:c,tokens:a.tokens,observation:a.tool_raw.outputs,finalAnswer:a.thought,toolCall:{status:"success",tool_icon:null}}),a.tool_calls.map((a,c)=>(0,b.jsx)(y,{isLLM:!1,toolCall:a},c))]})},A=({list:a})=>(0,b.jsx)("div",{className:"bg-background-section",children:a.map((c,d)=>(0,b.jsx)(z,{index:d+1,isFinal:d+1===a.length,iterationInfo:c},d))}),B=({activeTab:a="DETAIL",conversationID:c,messageID:d,log:o})=>{let{t:p}=(0,f.useTranslation)(),{notify:q}=(0,j.useContext)(m.ToastContext),[r,t]=(0,e.useState)(a),u=(0,k.useStore)(a=>a.appDetail),[v,w]=(0,e.useState)(!0),[x,y]=(0,e.useState)(),[z,B]=(0,e.useState)([]),C=(0,e.useMemo)(()=>(0,h.uniq)((0,i.flatten)(x?.iterations.map(a=>a.tool_calls.map(a=>a.tool_name).filter(Boolean))).filter(Boolean)),[x]),D=(0,e.useCallback)(async(a,b,c)=>{try{let d=await (0,n.fetchAgentLogDetail)({appID:a,params:{conversation_id:b,message_id:c}});y(d),B(d.iterations)}catch(a){q({type:"error",message:`${a}`})}},[q]),E=async(a,b,c)=>{w(!0),await D(a,b,c),w(!1)},F=async a=>{t(a)};return(0,e.useEffect)(()=>{u&&E(u.id,c,d)},[u,c,d]),(0,b.jsxs)("div",{className:"relative flex grow flex-col",children:[(0,b.jsxs)("div",{className:"flex shrink-0 items-center border-b-[0.5px] border-divider-regular px-4",children:[(0,b.jsx)("div",{className:(0,g.cn)("mr-6 cursor-pointer border-b-2 border-transparent py-3 text-[13px] font-semibold leading-[18px] text-text-tertiary","DETAIL"===r&&"!border-[rgb(21,94,239)] text-text-secondary"),onClick:()=>F("DETAIL"),children:p("detail",{ns:"runLog"})}),(0,b.jsx)("div",{className:(0,g.cn)("mr-6 cursor-pointer border-b-2 border-transparent py-3 text-[13px] font-semibold leading-[18px] text-text-tertiary","TRACING"===r&&"!border-[rgb(21,94,239)] text-text-secondary"),onClick:()=>F("TRACING"),children:p("tracing",{ns:"runLog"})})]}),(0,b.jsxs)("div",{className:(0,g.cn)("h-0 grow overflow-y-auto rounded-b-2xl bg-components-panel-bg","DETAIL"!==r&&"!bg-background-section"),children:[v&&(0,b.jsx)("div",{className:"flex h-full items-center justify-center bg-components-panel-bg",children:(0,b.jsx)(l.default,{})}),!v&&"DETAIL"===r&&x&&(0,b.jsx)(s,{inputs:o.input,outputs:o.content,status:x.meta.status,error:x.meta.error,elapsed_time:x.meta.elapsed_time,total_tokens:x.meta.total_tokens,created_at:x.meta.start_time,created_by:x.meta.executor,agentMode:x.meta.agent_mode,tools:C,iterations:x.iterations.length}),!v&&"TRACING"===r&&(0,b.jsx)(A,{list:z})]})]})};a.s(["default",0,({currentLogItem:a,width:h,onCancel:i})=>{let{t:j}=(0,f.useTranslation)(),k=(0,e.useRef)(null),[l,m]=(0,e.useState)(!1);return((0,d.useClickAway)(()=>{l&&i()},k),(0,e.useEffect)(()=>{m(!0)},[]),a&&a.conversationId)?(0,b.jsxs)("div",{className:(0,g.cn)("relative z-10 flex flex-col rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg py-3 shadow-xl"),style:{width:480,position:"fixed",top:64,left:8+(h-480),bottom:16},ref:k,children:[(0,b.jsx)("h1",{className:"text-md shrink-0 px-4 py-1 font-semibold text-text-primary",children:j("runDetail.workflowTitle",{ns:"appLog"})}),(0,b.jsx)("span",{className:"absolute right-3 top-4 z-20 cursor-pointer p-1",onClick:i,children:(0,b.jsx)(c.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})}),(0,b.jsx)(B,{conversationID:a.conversationId,messageID:a.id,log:a})]}):null}],31792)},709531,a=>{"use strict";var b=a.i(15867);a.s(["StopCircle",()=>b.default])},183107,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(617633),e=a.i(57843),f=a.i(748240);let g=({log:a})=>(0,b.jsxs)(b.Fragment,{children:[1===a.length&&(0,b.jsx)("div",{className:"px-4 py-2",children:(0,b.jsx)("div",{className:"whitespace-pre-line text-text-secondary",children:a[0].text})}),a.length>1&&(0,b.jsx)("div",{children:a.map((a,c)=>(0,b.jsxs)("div",{className:"group/card mb-2 rounded-xl px-4 pb-4 pt-2 last-of-type:mb-0 hover:bg-state-base-hover",children:[(0,b.jsxs)("div",{className:"flex h-8 items-center justify-between",children:[(0,b.jsx)("div",{className:"font-semibold text-[#2D31A6]",children:a.role.toUpperCase()}),(0,b.jsx)(f.CopyFeedbackNew,{className:"hidden h-6 w-6 group-hover/card:block",content:a.text})]}),(0,b.jsx)("div",{className:"whitespace-pre-line text-text-secondary",children:a.text})]},c))})]});a.s(["default",0,({currentLogItem:a,width:h,onCancel:i})=>{let j=(0,e.useRef)(null),[k,l]=(0,e.useState)(!1);return((0,d.useClickAway)(()=>{k&&i()},j),(0,e.useEffect)(()=>{l(!0)},[]),a&&a.log)?(0,b.jsxs)("div",{className:"relative z-10 flex flex-col rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg shadow-xl",style:{width:480,position:"fixed",top:64,left:8+(h-480),bottom:16},ref:j,children:[(0,b.jsxs)("div",{className:"flex h-14 shrink-0 items-center justify-between border-b border-divider-regular pl-6 pr-5",children:[(0,b.jsx)("div",{className:"text-base font-semibold text-text-primary",children:"PROMPT LOG"}),(0,b.jsxs)("div",{className:"flex items-center",children:[a.log?.length===1&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.CopyFeedbackNew,{className:"h-6 w-6",content:a.log[0].text}),(0,b.jsx)("div",{className:"mx-2.5 h-[14px] w-[1px] bg-divider-regular"})]}),(0,b.jsx)("div",{onClick:i,className:"flex h-6 w-6 cursor-pointer items-center justify-center",children:(0,b.jsx)(c.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})})]})]}),(0,b.jsx)("div",{className:"grow overflow-y-auto p-2",children:(0,b.jsx)(g,{log:a.log})})]}):null}],183107)},637422,425846,973888,a=>{"use strict";var b=a.i(608061),c=a.i(796807),d=a.i(148379);let e=({ref:a,...e})=>(0,b.jsx)(c.default,{...e,ref:a,data:d.default});e.displayName="Robot";var f=a.i(712706);let g=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:f.default});g.displayName="User",a.s([],637422),a.s(["Robot",0,e],425846),a.s(["User",0,g],973888)},55045,a=>{"use strict";var b,c=a.i(608061),d=a.i(429150),e=a.i(57843);a.i(752298);var f=a.i(693025),g=a.i(909795);a.i(637422);var h=a.i(425846),i=a.i(973888),j=a.i(146172),k=a.i(527344),l=((b={}).Query="query",b.Answer="answer",b);let m=({className:a,title:b})=>(0,c.jsxs)("div",{className:(0,k.cn)(a,"system-xs-medium flex h-[18px] items-center text-text-tertiary"),children:[(0,c.jsx)(d.RiEditFill,{className:"mr-1 h-3.5 w-3.5"}),(0,c.jsx)("div",{children:b}),(0,c.jsx)("div",{className:"ml-2 h-px grow",style:{background:"linear-gradient(90deg, rgba(0, 0, 0, 0.05) -1.65%, rgba(0, 0, 0, 0.00) 100%)"}})]}),n=e.memo(({type:a,readonly:b,content:k,onSave:l})=>{let{t:n}=(0,f.useTranslation)(),[o,p]=(0,e.useState)(""),q=o&&o!==k,r="query"===a?(0,c.jsx)(i.User,{className:"h-6 w-6"}):(0,c.jsx)(h.Robot,{className:"h-6 w-6"}),s=n("query"===a?"editModal.queryName":"editModal.answerName",{ns:"appAnnotation"}),t=n("query"===a?"editModal.yourQuery":"editModal.yourAnswer",{ns:"appAnnotation"}),u=n("query"===a?"editModal.queryPlaceholder":"editModal.answerPlaceholder",{ns:"appAnnotation"}),[v,w]=(0,e.useState)(!1);(0,e.useEffect)(()=>{p("")},[k]);let x=async()=>{try{await l(o),w(!1)}catch{}};return(0,c.jsxs)("div",{className:"flex",onClick:a=>a.stopPropagation(),children:[(0,c.jsx)("div",{className:"mr-3 shrink-0",children:r}),(0,c.jsxs)("div",{className:"grow",children:[(0,c.jsx)("div",{className:"system-xs-semibold mb-1 text-text-primary",children:s}),(0,c.jsx)("div",{className:"system-sm-regular text-text-primary",children:k}),v?(0,c.jsxs)("div",{className:"mt-3",children:[(0,c.jsx)(m,{title:t}),(0,c.jsx)(j.default,{value:o,onChange:a=>p(a.target.value),placeholder:u,autoFocus:!0}),(0,c.jsxs)("div",{className:"mt-2 flex space-x-2",children:[(0,c.jsx)(g.default,{size:"small",variant:"primary",onClick:x,children:n("operation.save",{ns:"common"})}),(0,c.jsx)(g.default,{size:"small",onClick:()=>{p(""),w(!1)},children:n("operation.cancel",{ns:"common"})})]})]}):(0,c.jsxs)("div",{children:[q&&(0,c.jsxs)("div",{className:"mt-3",children:[(0,c.jsx)(m,{title:t}),(0,c.jsx)("div",{className:"system-sm-regular mt-1 text-text-primary",children:o})]}),(0,c.jsxs)("div",{className:"mt-2 flex items-center",children:[!b&&(0,c.jsxs)("div",{className:"system-xs-medium flex cursor-pointer items-center space-x-1 text-text-accent",onClick:()=>{w(!0)},children:[(0,c.jsx)(d.RiEditLine,{className:"mr-1 h-3.5 w-3.5"}),(0,c.jsx)("div",{children:n("operation.edit",{ns:"common"})})]}),q&&(0,c.jsxs)("div",{className:"system-xs-medium ml-2 flex items-center text-text-tertiary",children:[(0,c.jsx)("div",{className:"mr-2",children:"Â·"}),(0,c.jsxs)("div",{className:"flex cursor-pointer items-center space-x-1",onClick:async()=>{try{await l(k),p(k)}catch{}},children:[(0,c.jsx)("div",{className:"h-3.5 w-3.5",children:(0,c.jsx)(d.RiDeleteBinLine,{className:"h-3.5 w-3.5"})}),(0,c.jsx)("div",{children:n("operation.delete",{ns:"common"})})]})]})]})]})]})]})});a.s(["EditItemType",()=>l,"EditTitle",0,m,"default",0,n])},25482,a=>{a.v({avatar:"style-module__12l82a__avatar","dot-flashing":"style-module__12l82a__dot-flashing","dot-flashing-avatar":"style-module__12l82a__dot-flashing-avatar",text:"style-module__12l82a__text"})},837422,267915,670916,223821,315739,832879,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(57843);a.i(752298);var e=a.i(693025),f=a.i(413192);a.i(916818);var g=a.i(260403);a.i(836482);var h=a.i(979492),i=a.i(80077),i=i,j=a.i(837235),j=j,k=a.i(427890),k=k,l=a.i(356385),l=l,m=a.i(389261),m=m,n=a.i(456393),n=n,o=a.i(656837),o=o,p=a.i(530628),p=p,q=a.i(548181),q=q;let r=({type:a,className:c})=>{switch(a){case"csv":return(0,b.jsx)(h.Csv,{className:c});case"doc":return(0,b.jsx)(i.default,{className:c});case"docx":return(0,b.jsx)(j.default,{className:c});case"htm":case"html":return(0,b.jsx)(k.default,{className:c});case"json":return(0,b.jsx)(l.default,{className:c});case"md":case"markdown":case"mdx":return(0,b.jsx)(m.default,{className:c});case"pdf":return(0,b.jsx)(n.default,{className:c});case"txt":return(0,b.jsx)(o.default,{className:c});case"xls":case"xlsx":return(0,b.jsx)(q.default,{className:c});case"notion":return(0,b.jsx)(g.Notion,{className:c});default:return(0,b.jsx)(p.default,{className:c})}};a.i(943046);var s=a.i(565932),t=a.i(796807);a.i(311691);var u=a.i(22334);let v=({ref:a,...c})=>(0,b.jsx)(t.default,{...c,ref:a,data:u.default});v.displayName="BezierCurve03",a.i(690011),a.i(629031),a.i(998334),a.i(82197),a.i(453673);var w=a.i(818781);let x=({ref:a,...c})=>(0,b.jsx)(t.default,{...c,ref:a,data:w.default});x.displayName="TypeSquare",a.i(622666);var y=a.i(95010),y=y,z=a.i(812232),z=z,A=a.i(825319),B=a.i(820051),C=a.i(760327);let D=({data:a})=>{let{t:c}=(0,e.useTranslation)(),[f,g]=(0,d.useState)(!1);return(0,b.jsxs)(A.PortalToFollowElem,{open:f,onOpenChange:g,placement:"top-start",children:[(0,b.jsx)(A.PortalToFollowElemTrigger,{onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:(0,b.jsxs)("div",{className:"flex grow items-center",children:[(0,b.jsx)("div",{className:"mr-1 h-1.5 w-16 overflow-hidden rounded-[3px] border border-components-progress-gray-border",children:(0,b.jsx)("div",{className:"h-full bg-components-progress-gray-progress",style:{width:`${100*a}%`}})}),a]})}),(0,b.jsx)(A.PortalToFollowElemContent,{style:{zIndex:1001},children:(0,b.jsxs)("div",{className:"system-xs-medium rounded-lg bg-components-tooltip-bg p-3 text-text-quaternary shadow-lg",children:[c("chat.citation.hitScore",{ns:"common"})," ",a]})})]})},E=({data:a,text:c,icon:e})=>{let[f,g]=(0,d.useState)(!1);return(0,b.jsxs)(A.PortalToFollowElem,{open:f,onOpenChange:g,placement:"top-start",children:[(0,b.jsx)(A.PortalToFollowElemTrigger,{onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:(0,b.jsxs)("div",{className:"mr-6 flex items-center",children:[e,a]})}),(0,b.jsx)(A.PortalToFollowElemContent,{style:{zIndex:1001},children:(0,b.jsxs)("div",{className:"system-xs-medium rounded-lg bg-components-tooltip-bg p-3 text-text-quaternary shadow-lg",children:[c," ",a]})})]})},F=({data:a,showHitInfo:c=!1})=>{let{t:g}=(0,e.useTranslation)(),[h,i]=(0,d.useState)(!1),j="notion"!==a.dataSourceType?/\.([^.]*)$/.exec(a.documentName)?.[1]||"":"notion",{mutateAsync:k,isPending:l}=(0,B.useDocumentDownload)(),m=async b=>{b.preventDefault(),b.stopPropagation();let c="upload_file"===a.dataSourceType||"file"===a.dataSourceType,d=a.sources?.[0]?.dataset_id,e=a.documentId||a.sources?.[0]?.document_id;if(!c||!d||!e||l)return;let f=await k({datasetId:d,documentId:e});f?.url&&(0,C.downloadUrl)({url:f.url,fileName:a.documentName})};return(0,b.jsxs)(A.PortalToFollowElem,{open:h,onOpenChange:i,placement:"top-start",offset:{mainAxis:8,crossAxis:-2},children:[(0,b.jsx)(A.PortalToFollowElemTrigger,{onClick:()=>i(a=>!a),children:(0,b.jsxs)("div",{className:"flex h-7 max-w-[240px] items-center rounded-lg bg-components-button-secondary-bg px-2",children:[(0,b.jsx)(r,{type:j,className:"mr-1 h-4 w-4 shrink-0"}),(0,b.jsx)("div",{className:"truncate text-xs text-text-tertiary",children:a.documentName})]})}),(0,b.jsx)(A.PortalToFollowElemContent,{style:{zIndex:1e3},children:(0,b.jsxs)("div",{className:"max-w-[360px] rounded-xl bg-background-section-burn shadow-lg backdrop-blur-[5px]",children:[(0,b.jsx)("div",{className:"px-4 pb-2 pt-3",children:(0,b.jsxs)("div",{className:"flex h-[18px] items-center",children:[(0,b.jsx)(r,{type:j,className:"mr-1 h-4 w-4 shrink-0"}),(0,b.jsx)("div",{className:"system-xs-medium truncate text-text-tertiary",children:("upload_file"===a.dataSourceType||"file"===a.dataSourceType)&&a.sources?.[0]?.dataset_id?(0,b.jsx)("button",{type:"button",className:"cursor-pointer truncate text-text-tertiary hover:underline",onClick:m,disabled:l,children:a.documentName}):a.documentName})]})}),(0,b.jsx)("div",{className:"max-h-[450px] overflow-y-auto rounded-lg bg-components-panel-bg px-4 py-0.5",children:(0,b.jsx)("div",{className:"w-full",children:a.sources.map((e,h)=>(0,b.jsxs)(d.Fragment,{children:[(0,b.jsxs)("div",{className:"group py-3",children:[(0,b.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex h-5 items-center rounded-md border border-divider-subtle px-1.5",children:[(0,b.jsx)(y.default,{className:"mr-0.5 h-3 w-3 text-text-quaternary"}),(0,b.jsx)("div",{className:"text-[11px] font-medium text-text-tertiary",children:e.segment_position||h+1})]}),c&&(0,b.jsxs)(f.default,{href:`/datasets/${e.dataset_id}/documents/${e.document_id}`,className:"hidden h-[18px] items-center text-xs text-text-accent group-hover:flex",children:[g("chat.citation.linkToDataset",{ns:"common"}),(0,b.jsx)(s.ArrowUpRight,{className:"ml-1 h-3 w-3"})]})]}),(0,b.jsx)("div",{className:"break-words text-[13px] text-text-secondary",children:e.content}),c&&(0,b.jsxs)("div",{className:"system-xs-medium mt-2 flex flex-wrap items-center text-text-quaternary",children:[(0,b.jsx)(E,{text:g("chat.citation.characters",{ns:"common"}),data:e.word_count,icon:(0,b.jsx)(x,{className:"mr-1 h-3 w-3"})}),(0,b.jsx)(E,{text:g("chat.citation.hitCount",{ns:"common"}),data:e.hit_count,icon:(0,b.jsx)(z.default,{className:"mr-1 h-3 w-3"})}),(0,b.jsx)(E,{text:g("chat.citation.vectorHash",{ns:"common"}),data:e.index_node_hash?.substring(0,7),icon:(0,b.jsx)(v,{className:"mr-1 h-3 w-3"})}),!!e.score&&(0,b.jsx)(D,{data:Number(e.score.toFixed(2))})]})]}),h!==a.sources.length-1&&(0,b.jsx)("div",{className:"my-1 h-px bg-divider-regular"})]},h))})})]})})]})};a.s(["default",0,({data:a,showHitInfo:f,containerClassName:g="chat-answer-container"})=>{let{t:h}=(0,e.useTranslation)(),i=(0,d.useRef)([]),[j,k]=(0,d.useState)(0),[l,m]=(0,d.useState)(!1),n=(0,d.useMemo)(()=>a.reduce((a,b)=>{let c=b.document_id,d=b.document_name,e=b.data_source_type,f=a.findIndex(a=>a.documentId===c);return f>-1?a[f].sources.push(b):a.push({documentId:c,documentName:d,dataSourceType:e,sources:[b]}),a},[]),[a]);(0,d.useEffect)(()=>{let a=document.querySelector(`.${g}`).clientWidth-40,b=0;for(let c=0;c<n.length;c++){if((b+=i.current[c].clientWidth)+4*c>a){(b-=i.current[c].clientWidth)+34>a?k(c-1):k(c);break}k(c+1)}},[]);let o=n.length;return(0,b.jsxs)("div",{className:"-mb-1 mt-3",children:[(0,b.jsxs)("div",{className:"system-xs-medium mb-2 flex items-center text-text-tertiary",children:[h("chat.citation.title",{ns:"common"}),(0,b.jsx)("div",{className:"ml-2 h-px grow bg-divider-regular"})]}),(0,b.jsxs)("div",{className:"relative flex flex-wrap",children:[n.map((a,c)=>(0,b.jsx)("div",{className:"absolute left-0 top-0 -z-10 mb-1 mr-1 h-7 w-auto max-w-[240px] whitespace-nowrap pl-7 pr-2 text-xs opacity-0",ref:a=>i.current[c]=a,children:a.documentName},c)),n.slice(0,l?o:j).map((a,c)=>(0,b.jsx)("div",{className:"mb-1 mr-1 cursor-pointer",children:(0,b.jsx)(F,{data:a,showHitInfo:f})},c)),j<o&&(0,b.jsx)("div",{className:"system-xs-medium flex h-7 cursor-pointer items-center rounded-lg bg-components-panel-bg px-2 text-text-tertiary",onClick:()=>m(a=>!a),children:l?(0,b.jsx)(c.RiArrowDownSLine,{className:"h-4 w-4 rotate-180 text-text-tertiary"}):`+ ${o-j}`})]})]})}],837422);var G=a.i(527344),H=a.i(25482);let I=d.memo(({type:a})=>(0,b.jsx)("div",{className:(0,G.cn)(H.default["dot-flashing"],H.default[a])}));a.s(["default",0,I],267915);var J=a.i(782465);function K({count:a,currentIndex:c,prevDisabled:d,nextDisabled:e,switchSibling:f}){return a&&a>1&&void 0!==c&&(0,b.jsxs)("div",{className:"flex items-center justify-center pt-3.5 text-sm",children:[(0,b.jsx)("button",{type:"button",className:`${d?"opacity-30":"opacity-100"}`,disabled:d,onClick:()=>!d&&f("prev"),children:(0,b.jsx)(J.ChevronRight,{className:"h-[14px] w-[14px] rotate-180 text-text-primary"})}),(0,b.jsxs)("span",{className:"px-2 text-xs text-text-primary",children:[c+1," ","/",a]}),(0,b.jsx)("button",{type:"button",className:`${e?"opacity-30":"opacity-100"}`,disabled:e,onClick:()=>!e&&f("next"),children:(0,b.jsx)(J.ChevronRight,{className:"h-[14px] w-[14px] text-text-primary"})})]})}a.s(["default",()=>K],670916);let L=({payload:a})=>{let{t:f}=(0,e.useTranslation)(),{name:g,label:h,input:i,isFinished:j,output:k}=a,l=g.startsWith("dataset_")?f("knowledge",{ns:"dataset"}):h,[m,n]=(0,d.useState)(!1);return(0,b.jsxs)("div",{className:(0,G.cn)("rounded-xl",!m&&"border-l-[0.25px] border-components-panel-border bg-workflow-process-bg",m&&"border-[0.5px] border-components-panel-border-subtle bg-background-section-burn"),children:[(0,b.jsxs)("div",{className:(0,G.cn)("system-xs-medium flex cursor-pointer items-center px-2.5 py-2 text-text-tertiary",m&&"pb-1.5"),onClick:()=>n(!m),children:[j&&(0,b.jsx)(c.RiHammerFill,{className:"mr-1 h-3.5 w-3.5"}),!j&&(0,b.jsx)(c.RiLoader2Line,{className:"mr-1 h-3.5 w-3.5 animate-spin"}),f(`thought.${j?"used":"using"}`,{ns:"tools"}),(0,b.jsx)("div",{className:"mx-1 text-text-secondary",children:l}),!m&&(0,b.jsx)(c.RiArrowRightSLine,{className:"h-4 w-4"}),m&&(0,b.jsx)(c.RiArrowDownSLine,{className:"ml-auto h-4 w-4"})]}),m&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mx-1 mb-0.5 rounded-[10px] bg-components-panel-on-panel-item-bg text-text-secondary",children:[(0,b.jsx)("div",{className:"system-xs-semibold-uppercase flex h-7 items-center justify-between px-2 pt-1",children:f("thought.requestTitle",{ns:"tools"})}),(0,b.jsx)("div",{className:"code-xs-regular break-words px-3 pb-2 pt-1",children:i})]}),(0,b.jsxs)("div",{className:"mx-1 mb-1 rounded-[10px] bg-components-panel-on-panel-item-bg text-text-secondary",children:[(0,b.jsx)("div",{className:"system-xs-semibold-uppercase flex h-7 items-center justify-between px-2 pt-1",children:f("thought.responseTitle",{ns:"tools"})}),(0,b.jsx)("div",{className:"code-xs-regular break-words px-3 pb-2 pt-1",children:k})]})]})]})};function M(a,b,c){if(b)try{return JSON.parse(a)[c]}catch{}return a}let N=d.memo(({thought:a,isFinished:c})=>{let[d,e]=(()=>{try{if(Array.isArray(JSON.parse(a.tool)))return[JSON.parse(a.tool),!0]}catch{}return[[a.tool],!1]})(),f=d.map((b,d)=>({name:b,label:a.tool_labels?.toolName?.language??b,input:M(a.tool_input,e,d),output:M(a.observation,e,d),isFinished:c}));return(0,b.jsx)("div",{className:"my-2 space-y-2",children:f.map((a,c)=>(0,b.jsx)(L,{payload:a},c))})});a.i(3626);var O=a.i(236431),P=a.i(818386),Q=a.i(189583);let R=(0,d.memo)(({item:a,responding:c,content:d})=>{let{annotation:e,agent_thoughts:f}=a;return e?.logAnnotation?(0,b.jsx)(Q.Markdown,{content:e?.logAnnotation.content||""}):(0,b.jsx)("div",{children:d?(0,b.jsx)(Q.Markdown,{content:d}):f?.map((a,d)=>(0,b.jsxs)("div",{className:"px-2 py-1",children:[a.thought&&(0,b.jsx)(Q.Markdown,{content:a.thought}),!!a.tool&&(0,b.jsx)(N,{thought:a,isFinished:!!a.observation||!c}),!!a.message_files?.length&&(0,b.jsx)(O.FileList,{files:(0,P.getProcessedFilesFromResponse)(a.message_files.map(a=>({...a,related_id:a.id}))),showDeleteAction:!1,showDownloadAction:!0,canPreview:!0})]},d))})});a.s(["default",0,R],223821);let S=(0,d.memo)(({item:a})=>{let{annotation:c,content:d}=a;if(c?.logAnnotation)return(0,b.jsx)(Q.Markdown,{content:c?.logAnnotation.content||""});let e=d;return"string"==typeof d&&/^\\\\\S.*/.test(d)&&!/^`.*`$/.test(d)&&(e=`\`${d}\``),(0,b.jsx)(Q.Markdown,{className:(0,G.cn)(a.isError&&"!text-[#F04438]"),content:e})});a.s(["default",0,S],315739);var T=a.i(573912);let U=(0,d.memo)(({more:a})=>{let{t:c}=(0,e.useTranslation)();return(0,b.jsx)("div",{className:"system-xs-regular mt-1 flex items-center text-text-quaternary opacity-0 group-hover:opacity-100",children:a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"mr-2 max-w-[25%] shrink-0 truncate",title:`${c("detail.timeConsuming",{ns:"appLog"})} ${a.latency}${c("detail.second",{ns:"appLog"})}`,children:`${c("detail.timeConsuming",{ns:"appLog"})} ${a.latency}${c("detail.second",{ns:"appLog"})}`}),(0,b.jsx)("div",{className:"mr-2 max-w-[25%] shrink-0 truncate",title:`${c("detail.tokenCost",{ns:"appLog"})} ${(0,T.formatNumber)(a.tokens)}`,children:`${c("detail.tokenCost",{ns:"appLog"})} ${(0,T.formatNumber)(a.tokens)}`}),!!a.tokens_per_second&&(0,b.jsx)("div",{className:"mr-2 max-w-[25%] shrink-0 truncate",title:`${a.tokens_per_second} tokens/s`,children:`${a.tokens_per_second} tokens/s`}),(0,b.jsx)("div",{className:"mx-2 shrink-0",children:"Â·"}),(0,b.jsx)("div",{className:"max-w-[25%] shrink-0 truncate",title:a.time,children:a.time})]})})});a.s(["default",0,U],832879)},121321,251899,372425,a=>{"use strict";var b=a.i(608061),c=a.i(796807);a.i(570262),a.i(559670),a.i(552918),a.i(289950);var d=a.i(158116);let e=({ref:a,...e})=>(0,b.jsx)(c.default,{...e,ref:a,data:d.default});e.displayName="MessageCheckRemove",a.s(["default",0,e],251899);var f=a.i(297082);let g=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:f.default});g.displayName="MessageFastPlus",a.s(["default",0,g],372425),a.s([],121321)},645693,a=>{"use strict";var b=a.i(251899);a.s(["MessageCheckRemove",()=>b.default])},613816,a=>{a.v({textGradient:"style-module__26SqPa__textGradient"})},289795,208232,a=>{"use strict";var b=a.i(608061),c=a.i(57843);a.i(752298);var d=a.i(693025),e=a.i(236125),f=a.i(527344),g=a.i(747104),h=a.i(613816),i=a.i(375616);a.i(121321);var j=a.i(372425),j=j,k=a.i(83967);let l=c.memo(({className:a})=>{let{t:c}=(0,d.useTranslation)(),{plan:e}=(0,i.useProviderContext)(),{usage:f,total:g}=e;return(0,b.jsx)(k.default,{className:a,Icon:j.default,name:c("annotatedResponse.quotaTitle",{ns:"billing"}),usage:f.annotatedResponse,total:g.annotatedResponse})});a.s(["default",0,l],208232);let m=c.memo(()=>{let{t:a}=(0,d.useTranslation)();return(0,b.jsx)(e.default,{wrapperClassName:"rounded-lg",canvasClassName:"rounded-lg",gradientClassName:"rounded-lg",children:(0,b.jsxs)("div",{className:"mt-6 flex cursor-pointer flex-col rounded-lg border-2 border-solid border-transparent px-3.5 py-4 shadow-md transition-all duration-200 ease-in-out",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:(0,f.cn)(h.default.textGradient,"text-base font-semibold leading-[24px]"),children:[(0,b.jsx)("div",{children:a("annotatedResponse.fullTipLine1",{ns:"billing"})}),(0,b.jsx)("div",{children:a("annotatedResponse.fullTipLine2",{ns:"billing"})})]}),(0,b.jsx)("div",{className:"flex",children:(0,b.jsx)(g.default,{loc:"annotation-create"})})]}),(0,b.jsx)(l,{className:"mt-4"})]})})});a.s(["default",0,m],289795)},599237,744435,419812,a=>{"use strict";var b=a.i(608061),c=a.i(57843);a.i(752298);var d=a.i(693025),e=a.i(42550),f=a.i(504612);a.i(121321);var g=a.i(645693),h=a.i(114715),i=a.i(289795),j=a.i(375616),k=a.i(98654),l=a.i(202738),m=a.i(55045);let n=c.memo(({isShow:a,onHide:n,query:o,answer:p,onEdited:q,onAdded:r,appId:s,messageId:t,annotationId:u,createdAt:v,onRemove:w,onlyEditResponse:x})=>{let{t:y}=(0,d.useTranslation)(),{formatTime:z}=(0,k.default)(),{plan:A,enableBilling:B}=(0,j.useProviderContext)(),C=!u,D=B&&A.usage.annotatedResponse>=A.total.annotatedResponse,E=async(a,b)=>{let c=o,d=p;a===m.EditItemType.Query?c=b:d=b;try{if(C){let a=await (0,l.addAnnotation)(s,{question:c,answer:d,message_id:t});r(a.id,a.account?.name??"",c,d)}else await (0,l.editAnnotation)(s,u,{message_id:t,question:c,answer:d}),q(c,d);h.default.notify({message:y("api.actionSuccess",{ns:"common"}),type:"success"})}catch(c){let a=y("api.actionFailed",{ns:"common"}),b=c instanceof Error&&c.message?c.message:a;throw h.default.notify({message:b,type:"error"}),c}},[F,G]=(0,c.useState)(!1);return(0,b.jsx)("div",{children:(0,b.jsx)(f.default,{isShow:a,onHide:n,maxWidthClassName:"!max-w-[480px]",title:y("editModal.title",{ns:"appAnnotation"}),body:(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"space-y-6 p-6 pb-4",children:[(0,b.jsx)(m.default,{type:m.EditItemType.Query,content:o,readonly:C&&D||x,onSave:a=>E(m.EditItemType.Query,a)}),(0,b.jsx)(m.default,{type:m.EditItemType.Answer,content:p,readonly:C&&D,onSave:a=>E(m.EditItemType.Answer,a)}),(0,b.jsx)(e.default,{isShow:F,onCancel:()=>G(!1),onConfirm:()=>{w(),G(!1),n()},title:y("feature.annotation.removeConfirm",{ns:"appDebug"})})]})}),foot:(0,b.jsxs)("div",{children:[D&&(0,b.jsx)("div",{className:"mb-4 mt-6 px-6",children:(0,b.jsx)(i.default,{})}),u?(0,b.jsxs)("div",{className:"system-sm-medium flex h-16 items-center justify-between rounded-bl-xl rounded-br-xl border-t border-divider-subtle bg-background-section-burn px-4 text-text-tertiary",children:[(0,b.jsxs)("div",{className:"flex cursor-pointer items-center space-x-2 pl-3",onClick:()=>G(!0),children:[(0,b.jsx)(g.MessageCheckRemove,{}),(0,b.jsx)("div",{children:y("editModal.removeThisCache",{ns:"appAnnotation"})})]}),!!v&&(0,b.jsxs)("div",{children:[y("editModal.createdAt",{ns:"appAnnotation"}),"Â ",z(v,y("dateTimeFormat",{ns:"appLog"}))]})]}):void 0]})})})});a.s(["default",0,n],599237);var o=a.i(429150),p=a.i(243103),q=a.i(175809);a.s(["default",0,({logItem:a})=>{let c=(0,p.useStore)(a=>a.setCurrentLogItem),d=(0,p.useStore)(a=>a.setShowPromptLogModal),e=(0,p.useStore)(a=>a.setShowAgentLogModal),f=(0,p.useStore)(a=>a.setShowMessageLogModal),{workflow_run_id:g,agent_thoughts:h}=a,i=h&&h.length>0;return(0,b.jsx)("div",{className:"ml-1 flex items-center gap-0.5 rounded-[10px] border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg p-0.5 shadow-md backdrop-blur-sm",onClick:b=>{b.stopPropagation(),b.nativeEvent.stopImmediatePropagation(),c(a),g?f(!0):i?e(!0):d(!0)},children:(0,b.jsx)(q.default,{children:(0,b.jsx)(o.RiFileList3Line,{className:"h-4 w-4"})})})}],744435);var r=a.i(483664),s=a.i(29255);let t=c.memo(({cached:a,query:c,answer:e,appId:f,messageId:g,onAdded:i,onEdit:k})=>{let{t:m}=(0,d.useTranslation)(),{plan:n,enableBilling:p}=(0,j.useProviderContext)(),t=p&&n.usage.annotatedResponse>=n.total.annotatedResponse,{setShowAnnotationFullModal:u}=(0,s.useModalContext)(),v=async()=>{if(t)return void u();let a=await (0,l.addAnnotation)(f,{message_id:g,question:c,answer:e});h.default.notify({message:m("api.actionSuccess",{ns:"common"}),type:"success"}),i(a.id,a.account?.name??"")};return(0,b.jsxs)(b.Fragment,{children:[a&&(0,b.jsx)(r.default,{popupContent:m("feature.annotation.edit",{ns:"appDebug"}),children:(0,b.jsx)(q.default,{onClick:k,children:(0,b.jsx)(o.RiEditLine,{className:"h-4 w-4"})})}),!a&&e&&(0,b.jsx)(r.default,{popupContent:m("feature.annotation.add",{ns:"appDebug"}),children:(0,b.jsx)(q.default,{onClick:v,children:(0,b.jsx)(o.RiFileEditLine,{className:"h-4 w-4"})})})]})});a.s(["default",0,t],419812)},34830,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(934402),e=a.i(533306),f=a.i(57843),g=a.i(175809),h=a.i(41548),i=a.i(483664);a.s(["default",0,({id:a,voice:j,value:k})=>{let[l,m]=(0,f.useState)("initial"),n=(0,e.useParams)(),o=(0,e.usePathname)(),p=a=>{switch(a){case"ended":case"paused":case"error":m("ended");break;case"loaded":m("loading");break;case"play":m("playing")}},q="",r=!1;n.token?(q="/text-to-audio",r=!0):n.appId&&(q=o.search("explore/installed")>-1?`/installed-apps/${n.appId}/text-to-audio`:`/apps/${n.appId}/text-to-audio`);let s=async()=>{"playing"===l||"loading"===l?(setTimeout(()=>m("paused"),1),h.AudioPlayerManager.getInstance().getAudioPlayer(q,r,a,k,j,p).pauseAudio()):(setTimeout(()=>m("loading"),1),h.AudioPlayerManager.getInstance().getAudioPlayer(q,r,a,k,j,p).playAudio())},t={initial:(0,d.t)("play",{ns:"appApi"}),ended:(0,d.t)("play",{ns:"appApi"}),paused:(0,d.t)("pause",{ns:"appApi"}),playing:(0,d.t)("playing",{ns:"appApi"}),loading:(0,d.t)("loading",{ns:"appApi"})}[l];return(0,b.jsx)(i.default,{popupContent:t,children:(0,b.jsx)(g.default,{state:"loading"===l||"playing"===l?g.ActionButtonState.Active:g.ActionButtonState.Default,onClick:s,disabled:"loading"===l,children:(0,b.jsx)(c.RiVolumeUpLine,{className:"h-4 w-4"})})})}])},46434,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(875067),e=a.i(57843);a.i(752298);var f=a.i(693025),g=a.i(599237),h=a.i(175809),i=a.i(744435),j=a.i(419812),k=a.i(314109),l=a.i(34830),m=a.i(146172),n=a.i(114715),o=a.i(483664),p=a.i(527344),q=a.i(146993);let r=(0,e.memo)(({item:a,question:r,index:s,showPromptLog:t,maxSize:u,contentWidth:v,hasWorkflowProcess:w,noChatInput:x})=>{let{t:y}=(0,f.useTranslation)(),{config:z,onAnnotationAdded:A,onAnnotationEdited:B,onAnnotationRemoved:C,onFeedback:D,onRegenerate:E}=(0,q.useChatContext)(),[F,G]=(0,e.useState)(!1),[H,I]=(0,e.useState)(!1),[J,K]=(0,e.useState)(""),{id:L,isOpeningStatement:M,content:N,annotation:O,feedback:P,adminFeedback:Q,agent_thoughts:R}=a,[S,T]=(0,e.useState)(P),[U,V]=(0,e.useState)(Q),[W,X]=(0,e.useState)("user"),Y=(0,e.useMemo)(()=>R?.length?R.reduce((a,b)=>a+b.thought,""):N,[R,N]),Z=S??P,$=!!Z?.rating,_=!!U?.rating,aa=!M&&z?.supportFeedback&&!!D&&!z?.supportAnnotation,ab=!M&&z?.supportFeedback&&!!D&&!!z?.supportAnnotation,ac=y("table.header.userRate",{ns:"appLog"})||"User feedback",ad=y("table.header.adminRate",{ns:"appLog"})||"Admin feedback",ae="max-w-[260px]",af=(a,b=ac)=>{if(!a?.rating)return b;let c="like"===a.rating?y("detail.operation.like",{ns:"appLog"})||"like":y("detail.operation.dislike",{ns:"appLog"})||"dislike",d=a.content?.trim();return d?`${b}: ${c} - ${d}`:`${b}: ${c}`},ag=async(a,b,c="user")=>{if(!z?.supportFeedback||!D)return;await D?.(L,{rating:a,content:b});let d=null===a?{rating:null}:{rating:a,content:b};"admin"===c?V(d):T(d)},ah=a=>{"like"===("admin"===a?U?.rating:Z?.rating)?ag(null,void 0,a):ag("like",void 0,a)},ai=a=>{"dislike"===("admin"===a?U?.rating:Z?.rating)?ag(null,void 0,a):(X(a),I(!0))},aj=async()=>{await ag("dislike",J,W),K(""),I(!1)},ak=()=>{K(""),I(!1)},al=(0,e.useMemo)(()=>{let a=0;return M||(a+=26),!M&&t&&(a+=36),!M&&z?.text_to_speech?.enabled&&(a+=26),!M&&z?.supportAnnotation&&z?.annotation_reply?.enabled&&(a+=26),aa&&(a+=$?36:68),ab&&(a+=(_?28:60)+8+28*!!$),a},[z?.annotation_reply?.enabled,z?.supportAnnotation,z?.text_to_speech?.enabled,_,$,M,ab,aa,t]),am=(0,e.useMemo)(()=>al<u,[al,u]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:(0,p.cn)("absolute flex justify-end gap-1",w&&"-bottom-4 right-2",!am&&"-bottom-4 right-2",!w&&am&&"!top-[9px]"),style:!w&&am?{left:v+8}:{},children:[aa&&(0,b.jsx)("div",{className:(0,p.cn)("ml-1 items-center gap-0.5 rounded-[10px] border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg p-0.5 shadow-md backdrop-blur-sm",$?"flex":"hidden group-hover:flex"),children:$?(0,b.jsx)(o.default,{popupContent:af(Z,ac),popupClassName:ae,children:(0,b.jsx)(h.default,{state:Z?.rating==="like"?h.ActionButtonState.Active:h.ActionButtonState.Destructive,onClick:()=>ag(null,void 0,"user"),children:Z?.rating==="like"?(0,b.jsx)(c.RiThumbUpLine,{className:"h-4 w-4"}):(0,b.jsx)(c.RiThumbDownLine,{className:"h-4 w-4"})})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.default,{state:Z?.rating==="like"?h.ActionButtonState.Active:h.ActionButtonState.Default,onClick:()=>ah("user"),children:(0,b.jsx)(c.RiThumbUpLine,{className:"h-4 w-4"})}),(0,b.jsx)(h.default,{state:Z?.rating==="dislike"?h.ActionButtonState.Destructive:h.ActionButtonState.Default,onClick:()=>ai("user"),children:(0,b.jsx)(c.RiThumbDownLine,{className:"h-4 w-4"})})]})}),ab&&(0,b.jsxs)("div",{className:(0,p.cn)("ml-1 items-center gap-0.5 rounded-[10px] border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg p-0.5 shadow-md backdrop-blur-sm",_||$?"flex":"hidden group-hover:flex"),children:[Z?.rating&&(0,b.jsx)(o.default,{popupContent:af(Z,ac),popupClassName:ae,children:"like"===Z.rating?(0,b.jsx)(h.default,{state:h.ActionButtonState.Active,children:(0,b.jsx)(c.RiThumbUpLine,{className:"h-4 w-4"})}):(0,b.jsx)(h.default,{state:h.ActionButtonState.Destructive,children:(0,b.jsx)(c.RiThumbDownLine,{className:"h-4 w-4"})})}),Z?.rating&&(0,b.jsx)("div",{className:"mx-1 h-3 w-[0.5px] bg-components-actionbar-border"}),_?(0,b.jsx)(o.default,{popupContent:af(U,ad),popupClassName:ae,children:(0,b.jsx)(h.default,{state:U?.rating==="like"?h.ActionButtonState.Active:h.ActionButtonState.Destructive,onClick:()=>ag(null,void 0,"admin"),children:U?.rating==="like"?(0,b.jsx)(c.RiThumbUpLine,{className:"h-4 w-4"}):(0,b.jsx)(c.RiThumbDownLine,{className:"h-4 w-4"})})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.default,{popupContent:af(U,ad),popupClassName:ae,children:(0,b.jsx)(h.default,{state:U?.rating==="like"?h.ActionButtonState.Active:h.ActionButtonState.Default,onClick:()=>ah("admin"),children:(0,b.jsx)(c.RiThumbUpLine,{className:"h-4 w-4"})})}),(0,b.jsx)(o.default,{popupContent:af(U,ad),popupClassName:ae,children:(0,b.jsx)(h.default,{state:U?.rating==="dislike"?h.ActionButtonState.Destructive:h.ActionButtonState.Default,onClick:()=>ai("admin"),children:(0,b.jsx)(c.RiThumbDownLine,{className:"h-4 w-4"})})})]})]}),t&&!M&&(0,b.jsx)("div",{className:"hidden group-hover:block",children:(0,b.jsx)(i.default,{logItem:a})}),!M&&(0,b.jsxs)("div",{className:"ml-1 hidden items-center gap-0.5 rounded-[10px] border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg p-0.5 shadow-md backdrop-blur-sm group-hover:flex",children:[z?.text_to_speech?.enabled&&(0,b.jsx)(l.default,{id:L,value:Y,voice:z?.text_to_speech?.voice}),(0,b.jsx)(h.default,{onClick:()=>{(0,d.default)(Y),n.default.notify({type:"success",message:y("actionMsg.copySuccessfully",{ns:"common"})})},children:(0,b.jsx)(c.RiClipboardLine,{className:"h-4 w-4"})}),!x&&(0,b.jsx)(h.default,{onClick:()=>E?.(a),children:(0,b.jsx)(c.RiResetLeftLine,{className:"h-4 w-4"})}),z?.supportAnnotation&&z.annotation_reply?.enabled&&(0,b.jsx)(j.default,{appId:z?.appId||"",messageId:L,cached:!!O?.id,query:r,answer:Y,onAdded:(a,b)=>A?.(a,b,r,Y,s),onEdit:()=>G(!0)})]})]}),(0,b.jsx)(g.default,{isShow:F,onHide:()=>G(!1),query:r,answer:Y,onEdited:(a,b)=>B?.(a,b,s),onAdded:(a,b,c,d)=>A?.(a,b,c,d,s),appId:z?.appId||"",messageId:L,annotationId:O?.id||"",createdAt:O?.created_at,onRemove:()=>C?.(s)}),H&&(0,b.jsx)(k.default,{title:y("feedback.title",{ns:"common"})||"Provide Feedback",subTitle:y("feedback.subtitle",{ns:"common"})||"Please tell us what went wrong with this response",onClose:ak,onConfirm:aj,onCancel:ak,confirmButtonText:y("operation.submit",{ns:"common"})||"Submit",cancelButtonText:y("operation.cancel",{ns:"common"})||"Cancel",children:(0,b.jsx)("div",{className:"space-y-3",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"system-sm-semibold mb-2 block text-text-secondary",children:y("feedback.content",{ns:"common"})||"Feedback Content"}),(0,b.jsx)(m.default,{value:J,onChange:a=>K(a.target.value),placeholder:y("feedback.placeholder",{ns:"common"})||"Please describe what went wrong or how we can improve...",rows:4,className:"w-full"})]})})})]})});a.s(["default",0,r])},838079,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(57843);a.i(752298);var e=a.i(693025);a.i(658335);var f=a.i(205628),g=a.i(813027),h=a.i(735310),i=a.i(527344);a.s(["default",0,({data:a,expand:j=!1,hideInfo:k=!1,hideProcessDetail:l=!1,readonly:m=!1})=>{let{t:n}=(0,e.useTranslation)(),[o,p]=(0,d.useState)(!j),q=a.status===h.WorkflowRunningStatus.Running,r=a.status===h.WorkflowRunningStatus.Succeeded,s=a.status===h.WorkflowRunningStatus.Failed||a.status===h.WorkflowRunningStatus.Stopped;return((0,d.useEffect)(()=>{p(!j)},[j]),m)?null:(0,b.jsxs)("div",{className:(0,i.cn)("-mx-1 rounded-xl px-2.5",o?"border-l-[0.25px] border-components-panel-border py-[7px]":"border-[0.5px] border-components-panel-border-subtle px-1 pb-1 pt-[7px]",q&&!o&&"bg-background-section-burn",r&&!o&&"bg-state-success-hover",s&&!o&&"bg-state-destructive-hover",o&&"bg-workflow-process-bg"),children:[(0,b.jsxs)("div",{className:(0,i.cn)("flex cursor-pointer items-center",!o&&"px-1.5"),onClick:()=>p(!o),children:[q&&(0,b.jsx)(c.RiLoader2Line,{className:"mr-1 h-3.5 w-3.5 shrink-0 animate-spin text-text-tertiary"}),r&&(0,b.jsx)(f.CheckCircle,{className:"mr-1 h-3.5 w-3.5 shrink-0 text-text-success"}),s&&(0,b.jsx)(c.RiErrorWarningFill,{className:"mr-1 h-3.5 w-3.5 shrink-0 text-text-destructive"}),(0,b.jsx)("div",{className:(0,i.cn)("system-xs-medium text-text-secondary",!o&&"grow"),children:n("common.workflowProcess",{ns:"workflow"})}),(0,b.jsx)(c.RiArrowRightSLine,{className:(0,i.cn)("ml-1 h-4 w-4 text-text-tertiary",!o&&"rotate-90")})]}),!o&&(0,b.jsx)("div",{className:"mt-1.5",children:(0,b.jsx)(g.default,{list:a.tracing,hideNodeInfo:k,hideNodeProcessDetail:l})})]})}])},260360,a=>{"use strict";var b=a.i(608061),c=a.i(57843);a.i(752298);var d=a.i(693025),e=a.i(55045),f=a.i(627001),g=a.i(837422),h=a.i(267915);a.i(3626);var i=a.i(236431),j=a.i(527344),k=a.i(670916),l=a.i(223821),m=a.i(315739),n=a.i(832879),o=a.i(46434),p=a.i(246378),q=a.i(838079);let r=(0,c.memo)(({item:a,question:r,index:s,config:t,answerIcon:u,responding:v,showPromptLog:w,chatAnswerContainerInner:x,hideProcessDetail:y,appData:z,noChatInput:A,switchSibling:B})=>{let{t:C}=(0,d.useTranslation)(),{content:D,citation:E,agent_thoughts:F,more:G,annotation:H,workflowProcess:I,allFiles:J,message_files:K}=a,L=!!F?.length,[M,N]=(0,c.useState)(0),[O,P]=(0,c.useState)(0),Q=(0,c.useRef)(null),R=(0,c.useRef)(null);(0,c.useEffect)(()=>{Q.current&&N(Q.current?.clientWidth+16)},[]);let S=()=>{R.current&&P(R.current?.clientWidth)};(0,c.useEffect)(()=>{v||S()},[v]),(0,c.useEffect)(()=>{if(!Q.current)return;let a=new ResizeObserver(()=>{S()});return a.observe(Q.current),()=>{a.disconnect()}},[]);let T=(0,c.useCallback)(b=>{"prev"===b?a.prevSibling&&B?.(a.prevSibling):a.nextSibling&&B?.(a.nextSibling)},[B,a.prevSibling,a.nextSibling]),U="string"==typeof D&&""===D.trim();return(0,b.jsxs)("div",{className:"mb-2 flex last:mb-0",children:[(0,b.jsxs)("div",{className:"relative h-10 w-10 shrink-0",children:[u||(0,b.jsx)(f.default,{}),v&&(0,b.jsx)("div",{className:"absolute left-[-3px] top-[-3px] flex h-4 w-4 items-center rounded-full border-[0.5px] border-divider-subtle bg-background-section-burn pl-[6px] shadow-xs",children:(0,b.jsx)(h.default,{type:"avatar"})})]}),(0,b.jsxs)("div",{className:"chat-answer-container group ml-4 w-0 grow pb-4",ref:Q,children:[(0,b.jsx)("div",{className:(0,j.cn)("group relative pr-10",x),children:(0,b.jsxs)("div",{ref:R,className:(0,j.cn)("body-lg-regular relative inline-block max-w-full rounded-2xl bg-chat-bubble-bg px-4 py-3 text-text-primary",I&&"w-full"),children:[!v&&(0,b.jsx)(o.default,{hasWorkflowProcess:!!I,maxSize:M-O-4,contentWidth:O,item:a,question:r,index:s,showPromptLog:w,noChatInput:A}),I&&(0,b.jsx)(q.default,{data:I,item:a,hideProcessDetail:y,readonly:y&&z?!z.site?.show_workflow_steps:void 0}),v&&U&&!L&&(0,b.jsx)("div",{className:"flex h-5 w-6 items-center justify-center",children:(0,b.jsx)(h.default,{type:"text"})}),!U&&!L&&(0,b.jsx)(m.default,{item:a}),L&&(0,b.jsx)(l.default,{item:a,responding:v,content:D}),!!J?.length&&(0,b.jsx)(i.FileList,{className:"my-1",files:J,showDeleteAction:!1,showDownloadAction:!0,canPreview:!0}),!!K?.length&&(0,b.jsx)(i.FileList,{className:"my-1",files:K,showDeleteAction:!1,showDownloadAction:!0,canPreview:!0}),H?.id&&H.authorName&&(0,b.jsx)(e.EditTitle,{className:"mt-1",title:C("editBy",{ns:"appAnnotation",author:H.authorName})}),(0,b.jsx)(p.default,{item:a}),!!E?.length&&!v&&(0,b.jsx)(g.default,{data:E,showHitInfo:t?.supportCitationHitInfo}),!!(a.siblingCount&&a.siblingCount>1&&void 0!==a.siblingIndex)&&(0,b.jsx)(k.default,{count:a.siblingCount,currentIndex:a.siblingIndex,prevDisabled:!a.prevSibling,nextDisabled:!a.nextSibling,switchSibling:T})]})}),(0,b.jsx)(n.default,{more:G})]})]})});a.s(["default",0,r])},470814,a=>{"use strict";var b=function(){return(b=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function c(a,c){for(var d={},e={},f=a.split("~~"),g=!1,h=0;f.length>h;h++){for(var i=f[h].split("~"),j=0;j<i.length;j+=2){var k=i[j],l=i[j+1],m="&"+k+";";d[m]=l,g&&(d["&"+k]=l),e[l]=m}g=!0}return c?{entities:b(b({},d),c.entities),characters:b(b({},e),c.characters)}:{entities:d,characters:e}}var d={};d.xml=c("lt~<~gt~>~quot~\"~apos~'~amp~&"),d.html4=c("apos~'~OElig~Å’~oelig~Å“~Scaron~Å ~scaron~Å¡~Yuml~Å¸~circ~Ë†~tilde~Ëœ~ensp~â€‚~emsp~â€ƒ~thinsp~â€‰~zwnj~â€Œ~zwj~â€~lrm~â€Ž~rlm~â€~ndash~â€“~mdash~â€”~lsquo~â€˜~rsquo~â€™~sbquo~â€š~ldquo~â€œ~rdquo~â€~bdquo~â€ž~dagger~â€ ~Dagger~â€¡~permil~â€°~lsaquo~â€¹~rsaquo~â€º~euro~â‚¬~fnof~Æ’~Alpha~Î‘~Beta~Î’~Gamma~Î“~Delta~Î”~Epsilon~Î•~Zeta~Î–~Eta~Î—~Theta~Î˜~Iota~Î™~Kappa~Îš~Lambda~Î›~Mu~Îœ~Nu~Î~Xi~Îž~Omicron~ÎŸ~Pi~Î ~Rho~Î¡~Sigma~Î£~Tau~Î¤~Upsilon~Î¥~Phi~Î¦~Chi~Î§~Psi~Î¨~Omega~Î©~alpha~Î±~beta~Î²~gamma~Î³~delta~Î´~epsilon~Îµ~zeta~Î¶~eta~Î·~theta~Î¸~iota~Î¹~kappa~Îº~lambda~Î»~mu~Î¼~nu~Î½~xi~Î¾~omicron~Î¿~pi~Ï€~rho~Ï~sigmaf~Ï‚~sigma~Ïƒ~tau~Ï„~upsilon~Ï…~phi~Ï†~chi~Ï‡~psi~Ïˆ~omega~Ï‰~thetasym~Ï‘~upsih~Ï’~piv~Ï–~bull~â€¢~hellip~â€¦~prime~â€²~Prime~â€³~oline~â€¾~frasl~â„~weierp~â„˜~image~â„‘~real~â„œ~trade~â„¢~alefsym~â„µ~larr~â†~uarr~â†‘~rarr~â†’~darr~â†“~harr~â†”~crarr~â†µ~lArr~â‡~uArr~â‡‘~rArr~â‡’~dArr~â‡“~hArr~â‡”~forall~âˆ€~part~âˆ‚~exist~âˆƒ~empty~âˆ…~nabla~âˆ‡~isin~âˆˆ~notin~âˆ‰~ni~âˆ‹~prod~âˆ~sum~âˆ‘~minus~âˆ’~lowast~âˆ—~radic~âˆš~prop~âˆ~infin~âˆž~ang~âˆ ~and~âˆ§~or~âˆ¨~cap~âˆ©~cup~âˆª~int~âˆ«~there4~âˆ´~sim~âˆ¼~cong~â‰…~asymp~â‰ˆ~ne~â‰ ~equiv~â‰¡~le~â‰¤~ge~â‰¥~sub~âŠ‚~sup~âŠƒ~nsub~âŠ„~sube~âŠ†~supe~âŠ‡~oplus~âŠ•~otimes~âŠ—~perp~âŠ¥~sdot~â‹…~lceil~âŒˆ~rceil~âŒ‰~lfloor~âŒŠ~rfloor~âŒ‹~lang~âŒ©~rang~âŒª~loz~â—Š~spades~â™ ~clubs~â™£~hearts~â™¥~diams~â™¦~~nbsp~Â ~iexcl~Â¡~cent~Â¢~pound~Â£~curren~Â¤~yen~Â¥~brvbar~Â¦~sect~Â§~uml~Â¨~copy~Â©~ordf~Âª~laquo~Â«~not~Â¬~shy~Â­~reg~Â®~macr~Â¯~deg~Â°~plusmn~Â±~sup2~Â²~sup3~Â³~acute~Â´~micro~Âµ~para~Â¶~middot~Â·~cedil~Â¸~sup1~Â¹~ordm~Âº~raquo~Â»~frac14~Â¼~frac12~Â½~frac34~Â¾~iquest~Â¿~Agrave~Ã€~Aacute~Ã~Acirc~Ã‚~Atilde~Ãƒ~Auml~Ã„~Aring~Ã…~AElig~Ã†~Ccedil~Ã‡~Egrave~Ãˆ~Eacute~Ã‰~Ecirc~ÃŠ~Euml~Ã‹~Igrave~ÃŒ~Iacute~Ã~Icirc~ÃŽ~Iuml~Ã~ETH~Ã~Ntilde~Ã‘~Ograve~Ã’~Oacute~Ã“~Ocirc~Ã”~Otilde~Ã•~Ouml~Ã–~times~Ã—~Oslash~Ã˜~Ugrave~Ã™~Uacute~Ãš~Ucirc~Ã›~Uuml~Ãœ~Yacute~Ã~THORN~Ãž~szlig~ÃŸ~agrave~Ã ~aacute~Ã¡~acirc~Ã¢~atilde~Ã£~auml~Ã¤~aring~Ã¥~aelig~Ã¦~ccedil~Ã§~egrave~Ã¨~eacute~Ã©~ecirc~Ãª~euml~Ã«~igrave~Ã¬~iacute~Ã­~icirc~Ã®~iuml~Ã¯~eth~Ã°~ntilde~Ã±~ograve~Ã²~oacute~Ã³~ocirc~Ã´~otilde~Ãµ~ouml~Ã¶~divide~Ã·~oslash~Ã¸~ugrave~Ã¹~uacute~Ãº~ucirc~Ã»~uuml~Ã¼~yacute~Ã½~thorn~Ã¾~yuml~Ã¿~quot~\"~amp~&~lt~<~gt~>"),d.html5=c('Abreve~Ä‚~Acy~Ð~Afr~ð”„~Amacr~Ä€~And~â©“~Aogon~Ä„~Aopf~ð”¸~ApplyFunction~â¡~Ascr~ð’œ~Assign~â‰”~Backslash~âˆ–~Barv~â«§~Barwed~âŒ†~Bcy~Ð‘~Because~âˆµ~Bernoullis~â„¬~Bfr~ð”…~Bopf~ð”¹~Breve~Ë˜~Bscr~â„¬~Bumpeq~â‰Ž~CHcy~Ð§~Cacute~Ä†~Cap~â‹’~CapitalDifferentialD~â……~Cayleys~â„­~Ccaron~ÄŒ~Ccirc~Äˆ~Cconint~âˆ°~Cdot~ÄŠ~Cedilla~Â¸~CenterDot~Â·~Cfr~â„­~CircleDot~âŠ™~CircleMinus~âŠ–~CirclePlus~âŠ•~CircleTimes~âŠ—~ClockwiseContourIntegral~âˆ²~CloseCurlyDoubleQuote~â€~CloseCurlyQuote~â€™~Colon~âˆ·~Colone~â©´~Congruent~â‰¡~Conint~âˆ¯~ContourIntegral~âˆ®~Copf~â„‚~Coproduct~âˆ~CounterClockwiseContourIntegral~âˆ³~Cross~â¨¯~Cscr~ð’ž~Cup~â‹“~CupCap~â‰~DD~â……~DDotrahd~â¤‘~DJcy~Ð‚~DScy~Ð…~DZcy~Ð~Darr~â†¡~Dashv~â«¤~Dcaron~ÄŽ~Dcy~Ð”~Del~âˆ‡~Dfr~ð”‡~DiacriticalAcute~Â´~DiacriticalDot~Ë™~DiacriticalDoubleAcute~Ë~DiacriticalGrave~`~DiacriticalTilde~Ëœ~Diamond~â‹„~DifferentialD~â…†~Dopf~ð”»~Dot~Â¨~DotDot~âƒœ~DotEqual~â‰~DoubleContourIntegral~âˆ¯~DoubleDot~Â¨~DoubleDownArrow~â‡“~DoubleLeftArrow~â‡~DoubleLeftRightArrow~â‡”~DoubleLeftTee~â«¤~DoubleLongLeftArrow~âŸ¸~DoubleLongLeftRightArrow~âŸº~DoubleLongRightArrow~âŸ¹~DoubleRightArrow~â‡’~DoubleRightTee~âŠ¨~DoubleUpArrow~â‡‘~DoubleUpDownArrow~â‡•~DoubleVerticalBar~âˆ¥~DownArrow~â†“~DownArrowBar~â¤“~DownArrowUpArrow~â‡µ~DownBreve~Ì‘~DownLeftRightVector~â¥~DownLeftTeeVector~â¥ž~DownLeftVector~â†½~DownLeftVectorBar~â¥–~DownRightTeeVector~â¥Ÿ~DownRightVector~â‡~DownRightVectorBar~â¥—~DownTee~âŠ¤~DownTeeArrow~â†§~Downarrow~â‡“~Dscr~ð’Ÿ~Dstrok~Ä~ENG~ÅŠ~Ecaron~Äš~Ecy~Ð­~Edot~Ä–~Efr~ð”ˆ~Element~âˆˆ~Emacr~Ä’~EmptySmallSquare~â—»~EmptyVerySmallSquare~â–«~Eogon~Ä˜~Eopf~ð”¼~Equal~â©µ~EqualTilde~â‰‚~Equilibrium~â‡Œ~Escr~â„°~Esim~â©³~Exists~âˆƒ~ExponentialE~â…‡~Fcy~Ð¤~Ffr~ð”‰~FilledSmallSquare~â—¼~FilledVerySmallSquare~â–ª~Fopf~ð”½~ForAll~âˆ€~Fouriertrf~â„±~Fscr~â„±~GJcy~Ðƒ~Gammad~Ïœ~Gbreve~Äž~Gcedil~Ä¢~Gcirc~Äœ~Gcy~Ð“~Gdot~Ä ~Gfr~ð”Š~Gg~â‹™~Gopf~ð”¾~GreaterEqual~â‰¥~GreaterEqualLess~â‹›~GreaterFullEqual~â‰§~GreaterGreater~âª¢~GreaterLess~â‰·~GreaterSlantEqual~â©¾~GreaterTilde~â‰³~Gscr~ð’¢~Gt~â‰«~HARDcy~Ðª~Hacek~Ë‡~Hat~^~Hcirc~Ä¤~Hfr~â„Œ~HilbertSpace~â„‹~Hopf~â„~HorizontalLine~â”€~Hscr~â„‹~Hstrok~Ä¦~HumpDownHump~â‰Ž~HumpEqual~â‰~IEcy~Ð•~IJlig~Ä²~IOcy~Ð~Icy~Ð˜~Idot~Ä°~Ifr~â„‘~Im~â„‘~Imacr~Äª~ImaginaryI~â…ˆ~Implies~â‡’~Int~âˆ¬~Integral~âˆ«~Intersection~â‹‚~InvisibleComma~â£~InvisibleTimes~â¢~Iogon~Ä®~Iopf~ð•€~Iscr~â„~Itilde~Ä¨~Iukcy~Ð†~Jcirc~Ä´~Jcy~Ð™~Jfr~ð”~Jopf~ð•~Jscr~ð’¥~Jsercy~Ðˆ~Jukcy~Ð„~KHcy~Ð¥~KJcy~ÐŒ~Kcedil~Ä¶~Kcy~Ðš~Kfr~ð”Ž~Kopf~ð•‚~Kscr~ð’¦~LJcy~Ð‰~Lacute~Ä¹~Lang~âŸª~Laplacetrf~â„’~Larr~â†ž~Lcaron~Ä½~Lcedil~Ä»~Lcy~Ð›~LeftAngleBracket~âŸ¨~LeftArrow~â†~LeftArrowBar~â‡¤~LeftArrowRightArrow~â‡†~LeftCeiling~âŒˆ~LeftDoubleBracket~âŸ¦~LeftDownTeeVector~â¥¡~LeftDownVector~â‡ƒ~LeftDownVectorBar~â¥™~LeftFloor~âŒŠ~LeftRightArrow~â†”~LeftRightVector~â¥Ž~LeftTee~âŠ£~LeftTeeArrow~â†¤~LeftTeeVector~â¥š~LeftTriangle~âŠ²~LeftTriangleBar~â§~LeftTriangleEqual~âŠ´~LeftUpDownVector~â¥‘~LeftUpTeeVector~â¥ ~LeftUpVector~â†¿~LeftUpVectorBar~â¥˜~LeftVector~â†¼~LeftVectorBar~â¥’~Leftarrow~â‡~Leftrightarrow~â‡”~LessEqualGreater~â‹š~LessFullEqual~â‰¦~LessGreater~â‰¶~LessLess~âª¡~LessSlantEqual~â©½~LessTilde~â‰²~Lfr~ð”~Ll~â‹˜~Lleftarrow~â‡š~Lmidot~Ä¿~LongLeftArrow~âŸµ~LongLeftRightArrow~âŸ·~LongRightArrow~âŸ¶~Longleftarrow~âŸ¸~Longleftrightarrow~âŸº~Longrightarrow~âŸ¹~Lopf~ð•ƒ~LowerLeftArrow~â†™~LowerRightArrow~â†˜~Lscr~â„’~Lsh~â†°~Lstrok~Å~Lt~â‰ª~Map~â¤…~Mcy~Ðœ~MediumSpace~âŸ~Mellintrf~â„³~Mfr~ð”~MinusPlus~âˆ“~Mopf~ð•„~Mscr~â„³~NJcy~ÐŠ~Nacute~Åƒ~Ncaron~Å‡~Ncedil~Å…~Ncy~Ð~NegativeMediumSpace~â€‹~NegativeThickSpace~â€‹~NegativeThinSpace~â€‹~NegativeVeryThinSpace~â€‹~NestedGreaterGreater~â‰«~NestedLessLess~â‰ª~NewLine~\n~Nfr~ð”‘~NoBreak~â ~NonBreakingSpace~Â ~Nopf~â„•~Not~â«¬~NotCongruent~â‰¢~NotCupCap~â‰­~NotDoubleVerticalBar~âˆ¦~NotElement~âˆ‰~NotEqual~â‰ ~NotEqualTilde~â‰‚Ì¸~NotExists~âˆ„~NotGreater~â‰¯~NotGreaterEqual~â‰±~NotGreaterFullEqual~â‰§Ì¸~NotGreaterGreater~â‰«Ì¸~NotGreaterLess~â‰¹~NotGreaterSlantEqual~â©¾Ì¸~NotGreaterTilde~â‰µ~NotHumpDownHump~â‰ŽÌ¸~NotHumpEqual~â‰Ì¸~NotLeftTriangle~â‹ª~NotLeftTriangleBar~â§Ì¸~NotLeftTriangleEqual~â‹¬~NotLess~â‰®~NotLessEqual~â‰°~NotLessGreater~â‰¸~NotLessLess~â‰ªÌ¸~NotLessSlantEqual~â©½Ì¸~NotLessTilde~â‰´~NotNestedGreaterGreater~âª¢Ì¸~NotNestedLessLess~âª¡Ì¸~NotPrecedes~âŠ€~NotPrecedesEqual~âª¯Ì¸~NotPrecedesSlantEqual~â‹ ~NotReverseElement~âˆŒ~NotRightTriangle~â‹«~NotRightTriangleBar~â§Ì¸~NotRightTriangleEqual~â‹­~NotSquareSubset~âŠÌ¸~NotSquareSubsetEqual~â‹¢~NotSquareSuperset~âŠÌ¸~NotSquareSupersetEqual~â‹£~NotSubset~âŠ‚âƒ’~NotSubsetEqual~âŠˆ~NotSucceeds~âŠ~NotSucceedsEqual~âª°Ì¸~NotSucceedsSlantEqual~â‹¡~NotSucceedsTilde~â‰¿Ì¸~NotSuperset~âŠƒâƒ’~NotSupersetEqual~âŠ‰~NotTilde~â‰~NotTildeEqual~â‰„~NotTildeFullEqual~â‰‡~NotTildeTilde~â‰‰~NotVerticalBar~âˆ¤~Nscr~ð’©~Ocy~Ðž~Odblac~Å~Ofr~ð”’~Omacr~ÅŒ~Oopf~ð•†~OpenCurlyDoubleQuote~â€œ~OpenCurlyQuote~â€˜~Or~â©”~Oscr~ð’ª~Otimes~â¨·~OverBar~â€¾~OverBrace~âž~OverBracket~âŽ´~OverParenthesis~âœ~PartialD~âˆ‚~Pcy~ÐŸ~Pfr~ð”“~PlusMinus~Â±~Poincareplane~â„Œ~Popf~â„™~Pr~âª»~Precedes~â‰º~PrecedesEqual~âª¯~PrecedesSlantEqual~â‰¼~PrecedesTilde~â‰¾~Product~âˆ~Proportion~âˆ·~Proportional~âˆ~Pscr~ð’«~Qfr~ð””~Qopf~â„š~Qscr~ð’¬~RBarr~â¤~Racute~Å”~Rang~âŸ«~Rarr~â† ~Rarrtl~â¤–~Rcaron~Å˜~Rcedil~Å–~Rcy~Ð ~Re~â„œ~ReverseElement~âˆ‹~ReverseEquilibrium~â‡‹~ReverseUpEquilibrium~â¥¯~Rfr~â„œ~RightAngleBracket~âŸ©~RightArrow~â†’~RightArrowBar~â‡¥~RightArrowLeftArrow~â‡„~RightCeiling~âŒ‰~RightDoubleBracket~âŸ§~RightDownTeeVector~â¥~RightDownVector~â‡‚~RightDownVectorBar~â¥•~RightFloor~âŒ‹~RightTee~âŠ¢~RightTeeArrow~â†¦~RightTeeVector~â¥›~RightTriangle~âŠ³~RightTriangleBar~â§~RightTriangleEqual~âŠµ~RightUpDownVector~â¥~RightUpTeeVector~â¥œ~RightUpVector~â†¾~RightUpVectorBar~â¥”~RightVector~â‡€~RightVectorBar~â¥“~Rightarrow~â‡’~Ropf~â„~RoundImplies~â¥°~Rrightarrow~â‡›~Rscr~â„›~Rsh~â†±~RuleDelayed~â§´~SHCHcy~Ð©~SHcy~Ð¨~SOFTcy~Ð¬~Sacute~Åš~Sc~âª¼~Scedil~Åž~Scirc~Åœ~Scy~Ð¡~Sfr~ð”–~ShortDownArrow~â†“~ShortLeftArrow~â†~ShortRightArrow~â†’~ShortUpArrow~â†‘~SmallCircle~âˆ˜~Sopf~ð•Š~Sqrt~âˆš~Square~â–¡~SquareIntersection~âŠ“~SquareSubset~âŠ~SquareSubsetEqual~âŠ‘~SquareSuperset~âŠ~SquareSupersetEqual~âŠ’~SquareUnion~âŠ”~Sscr~ð’®~Star~â‹†~Sub~â‹~Subset~â‹~SubsetEqual~âŠ†~Succeeds~â‰»~SucceedsEqual~âª°~SucceedsSlantEqual~â‰½~SucceedsTilde~â‰¿~SuchThat~âˆ‹~Sum~âˆ‘~Sup~â‹‘~Superset~âŠƒ~SupersetEqual~âŠ‡~Supset~â‹‘~TRADE~â„¢~TSHcy~Ð‹~TScy~Ð¦~Tab~	~Tcaron~Å¤~Tcedil~Å¢~Tcy~Ð¢~Tfr~ð”—~Therefore~âˆ´~ThickSpace~âŸâ€Š~ThinSpace~â€‰~Tilde~âˆ¼~TildeEqual~â‰ƒ~TildeFullEqual~â‰…~TildeTilde~â‰ˆ~Topf~ð•‹~TripleDot~âƒ›~Tscr~ð’¯~Tstrok~Å¦~Uarr~â†Ÿ~Uarrocir~â¥‰~Ubrcy~ÐŽ~Ubreve~Å¬~Ucy~Ð£~Udblac~Å°~Ufr~ð”˜~Umacr~Åª~UnderBar~_~UnderBrace~âŸ~UnderBracket~âŽµ~UnderParenthesis~â~Union~â‹ƒ~UnionPlus~âŠŽ~Uogon~Å²~Uopf~ð•Œ~UpArrow~â†‘~UpArrowBar~â¤’~UpArrowDownArrow~â‡…~UpDownArrow~â†•~UpEquilibrium~â¥®~UpTee~âŠ¥~UpTeeArrow~â†¥~Uparrow~â‡‘~Updownarrow~â‡•~UpperLeftArrow~â†–~UpperRightArrow~â†—~Upsi~Ï’~Uring~Å®~Uscr~ð’°~Utilde~Å¨~VDash~âŠ«~Vbar~â««~Vcy~Ð’~Vdash~âŠ©~Vdashl~â«¦~Vee~â‹~Verbar~â€–~Vert~â€–~VerticalBar~âˆ£~VerticalLine~|~VerticalSeparator~â˜~VerticalTilde~â‰€~VeryThinSpace~â€Š~Vfr~ð”™~Vopf~ð•~Vscr~ð’±~Vvdash~âŠª~Wcirc~Å´~Wedge~â‹€~Wfr~ð”š~Wopf~ð•Ž~Wscr~ð’²~Xfr~ð”›~Xopf~ð•~Xscr~ð’³~YAcy~Ð¯~YIcy~Ð‡~YUcy~Ð®~Ycirc~Å¶~Ycy~Ð«~Yfr~ð”œ~Yopf~ð•~Yscr~ð’´~ZHcy~Ð–~Zacute~Å¹~Zcaron~Å½~Zcy~Ð—~Zdot~Å»~ZeroWidthSpace~â€‹~Zfr~â„¨~Zopf~â„¤~Zscr~ð’µ~abreve~Äƒ~ac~âˆ¾~acE~âˆ¾Ì³~acd~âˆ¿~acy~Ð°~af~â¡~afr~ð”ž~aleph~â„µ~amacr~Ä~amalg~â¨¿~andand~â©•~andd~â©œ~andslope~â©˜~andv~â©š~ange~â¦¤~angle~âˆ ~angmsd~âˆ¡~angmsdaa~â¦¨~angmsdab~â¦©~angmsdac~â¦ª~angmsdad~â¦«~angmsdae~â¦¬~angmsdaf~â¦­~angmsdag~â¦®~angmsdah~â¦¯~angrt~âˆŸ~angrtvb~âŠ¾~angrtvbd~â¦~angsph~âˆ¢~angst~Ã…~angzarr~â¼~aogon~Ä…~aopf~ð•’~ap~â‰ˆ~apE~â©°~apacir~â©¯~ape~â‰Š~apid~â‰‹~approx~â‰ˆ~approxeq~â‰Š~ascr~ð’¶~ast~*~asympeq~â‰~awconint~âˆ³~awint~â¨‘~bNot~â«­~backcong~â‰Œ~backepsilon~Ï¶~backprime~â€µ~backsim~âˆ½~backsimeq~â‹~barvee~âŠ½~barwed~âŒ…~barwedge~âŒ…~bbrk~âŽµ~bbrktbrk~âŽ¶~bcong~â‰Œ~bcy~Ð±~becaus~âˆµ~because~âˆµ~bemptyv~â¦°~bepsi~Ï¶~bernou~â„¬~beth~â„¶~between~â‰¬~bfr~ð”Ÿ~bigcap~â‹‚~bigcirc~â—¯~bigcup~â‹ƒ~bigodot~â¨€~bigoplus~â¨~bigotimes~â¨‚~bigsqcup~â¨†~bigstar~â˜…~bigtriangledown~â–½~bigtriangleup~â–³~biguplus~â¨„~bigvee~â‹~bigwedge~â‹€~bkarow~â¤~blacklozenge~â§«~blacksquare~â–ª~blacktriangle~â–´~blacktriangledown~â–¾~blacktriangleleft~â—‚~blacktriangleright~â–¸~blank~â£~blk12~â–’~blk14~â–‘~blk34~â–“~block~â–ˆ~bne~=âƒ¥~bnequiv~â‰¡âƒ¥~bnot~âŒ~bopf~ð•“~bot~âŠ¥~bottom~âŠ¥~bowtie~â‹ˆ~boxDL~â•—~boxDR~â•”~boxDl~â•–~boxDr~â•“~boxH~â•~boxHD~â•¦~boxHU~â•©~boxHd~â•¤~boxHu~â•§~boxUL~â•~boxUR~â•š~boxUl~â•œ~boxUr~â•™~boxV~â•‘~boxVH~â•¬~boxVL~â•£~boxVR~â• ~boxVh~â•«~boxVl~â•¢~boxVr~â•Ÿ~boxbox~â§‰~boxdL~â••~boxdR~â•’~boxdl~â”~boxdr~â”Œ~boxh~â”€~boxhD~â•¥~boxhU~â•¨~boxhd~â”¬~boxhu~â”´~boxminus~âŠŸ~boxplus~âŠž~boxtimes~âŠ ~boxuL~â•›~boxuR~â•˜~boxul~â”˜~boxur~â””~boxv~â”‚~boxvH~â•ª~boxvL~â•¡~boxvR~â•ž~boxvh~â”¼~boxvl~â”¤~boxvr~â”œ~bprime~â€µ~breve~Ë˜~bscr~ð’·~bsemi~â~bsim~âˆ½~bsime~â‹~bsol~\\~bsolb~â§…~bsolhsub~âŸˆ~bullet~â€¢~bump~â‰Ž~bumpE~âª®~bumpe~â‰~bumpeq~â‰~cacute~Ä‡~capand~â©„~capbrcup~â©‰~capcap~â©‹~capcup~â©‡~capdot~â©€~caps~âˆ©ï¸€~caret~â~caron~Ë‡~ccaps~â©~ccaron~Ä~ccirc~Ä‰~ccups~â©Œ~ccupssm~â©~cdot~Ä‹~cemptyv~â¦²~centerdot~Â·~cfr~ð” ~chcy~Ñ‡~check~âœ“~checkmark~âœ“~cir~â—‹~cirE~â§ƒ~circeq~â‰—~circlearrowleft~â†º~circlearrowright~â†»~circledR~Â®~circledS~â“ˆ~circledast~âŠ›~circledcirc~âŠš~circleddash~âŠ~cire~â‰—~cirfnint~â¨~cirmid~â«¯~cirscir~â§‚~clubsuit~â™£~colon~:~colone~â‰”~coloneq~â‰”~comma~,~commat~@~comp~âˆ~compfn~âˆ˜~complement~âˆ~complexes~â„‚~congdot~â©­~conint~âˆ®~copf~ð•”~coprod~âˆ~copysr~â„—~cross~âœ—~cscr~ð’¸~csub~â«~csube~â«‘~csup~â«~csupe~â«’~ctdot~â‹¯~cudarrl~â¤¸~cudarrr~â¤µ~cuepr~â‹ž~cuesc~â‹Ÿ~cularr~â†¶~cularrp~â¤½~cupbrcap~â©ˆ~cupcap~â©†~cupcup~â©Š~cupdot~âŠ~cupor~â©…~cups~âˆªï¸€~curarr~â†·~curarrm~â¤¼~curlyeqprec~â‹ž~curlyeqsucc~â‹Ÿ~curlyvee~â‹Ž~curlywedge~â‹~curvearrowleft~â†¶~curvearrowright~â†·~cuvee~â‹Ž~cuwed~â‹~cwconint~âˆ²~cwint~âˆ±~cylcty~âŒ­~dHar~â¥¥~daleth~â„¸~dash~â€~dashv~âŠ£~dbkarow~â¤~dblac~Ë~dcaron~Ä~dcy~Ð´~dd~â…†~ddagger~â€¡~ddarr~â‡Š~ddotseq~â©·~demptyv~â¦±~dfisht~â¥¿~dfr~ð”¡~dharl~â‡ƒ~dharr~â‡‚~diam~â‹„~diamond~â‹„~diamondsuit~â™¦~die~Â¨~digamma~Ï~disin~â‹²~div~Ã·~divideontimes~â‹‡~divonx~â‹‡~djcy~Ñ’~dlcorn~âŒž~dlcrop~âŒ~dollar~$~dopf~ð••~dot~Ë™~doteq~â‰~doteqdot~â‰‘~dotminus~âˆ¸~dotplus~âˆ”~dotsquare~âŠ¡~doublebarwedge~âŒ†~downarrow~â†“~downdownarrows~â‡Š~downharpoonleft~â‡ƒ~downharpoonright~â‡‚~drbkarow~â¤~drcorn~âŒŸ~drcrop~âŒŒ~dscr~ð’¹~dscy~Ñ•~dsol~â§¶~dstrok~Ä‘~dtdot~â‹±~dtri~â–¿~dtrif~â–¾~duarr~â‡µ~duhar~â¥¯~dwangle~â¦¦~dzcy~ÑŸ~dzigrarr~âŸ¿~eDDot~â©·~eDot~â‰‘~easter~â©®~ecaron~Ä›~ecir~â‰–~ecolon~â‰•~ecy~Ñ~edot~Ä—~ee~â…‡~efDot~â‰’~efr~ð”¢~eg~âªš~egs~âª–~egsdot~âª˜~el~âª™~elinters~â§~ell~â„“~els~âª•~elsdot~âª—~emacr~Ä“~emptyset~âˆ…~emptyv~âˆ…~emsp13~â€„~emsp14~â€…~eng~Å‹~eogon~Ä™~eopf~ð•–~epar~â‹•~eparsl~â§£~eplus~â©±~epsi~Îµ~epsiv~Ïµ~eqcirc~â‰–~eqcolon~â‰•~eqsim~â‰‚~eqslantgtr~âª–~eqslantless~âª•~equals~=~equest~â‰Ÿ~equivDD~â©¸~eqvparsl~â§¥~erDot~â‰“~erarr~â¥±~escr~â„¯~esdot~â‰~esim~â‰‚~excl~!~expectation~â„°~exponentiale~â…‡~fallingdotseq~â‰’~fcy~Ñ„~female~â™€~ffilig~ï¬ƒ~fflig~ï¬€~ffllig~ï¬„~ffr~ð”£~filig~ï¬~fjlig~fj~flat~â™­~fllig~ï¬‚~fltns~â–±~fopf~ð•—~fork~â‹”~forkv~â«™~fpartint~â¨~frac13~â…“~frac15~â…•~frac16~â…™~frac18~â…›~frac23~â…”~frac25~â…–~frac35~â…—~frac38~â…œ~frac45~â…˜~frac56~â…š~frac58~â…~frac78~â…ž~frown~âŒ¢~fscr~ð’»~gE~â‰§~gEl~âªŒ~gacute~Çµ~gammad~Ï~gap~âª†~gbreve~ÄŸ~gcirc~Ä~gcy~Ð³~gdot~Ä¡~gel~â‹›~geq~â‰¥~geqq~â‰§~geqslant~â©¾~ges~â©¾~gescc~âª©~gesdot~âª€~gesdoto~âª‚~gesdotol~âª„~gesl~â‹›ï¸€~gesles~âª”~gfr~ð”¤~gg~â‰«~ggg~â‹™~gimel~â„·~gjcy~Ñ“~gl~â‰·~glE~âª’~gla~âª¥~glj~âª¤~gnE~â‰©~gnap~âªŠ~gnapprox~âªŠ~gne~âªˆ~gneq~âªˆ~gneqq~â‰©~gnsim~â‹§~gopf~ð•˜~grave~`~gscr~â„Š~gsim~â‰³~gsime~âªŽ~gsiml~âª~gtcc~âª§~gtcir~â©º~gtdot~â‹—~gtlPar~â¦•~gtquest~â©¼~gtrapprox~âª†~gtrarr~â¥¸~gtrdot~â‹—~gtreqless~â‹›~gtreqqless~âªŒ~gtrless~â‰·~gtrsim~â‰³~gvertneqq~â‰©ï¸€~gvnE~â‰©ï¸€~hairsp~â€Š~half~Â½~hamilt~â„‹~hardcy~ÑŠ~harrcir~â¥ˆ~harrw~â†­~hbar~â„~hcirc~Ä¥~heartsuit~â™¥~hercon~âŠ¹~hfr~ð”¥~hksearow~â¤¥~hkswarow~â¤¦~hoarr~â‡¿~homtht~âˆ»~hookleftarrow~â†©~hookrightarrow~â†ª~hopf~ð•™~horbar~â€•~hscr~ð’½~hslash~â„~hstrok~Ä§~hybull~âƒ~hyphen~â€~ic~â£~icy~Ð¸~iecy~Ðµ~iff~â‡”~ifr~ð”¦~ii~â…ˆ~iiiint~â¨Œ~iiint~âˆ­~iinfin~â§œ~iiota~â„©~ijlig~Ä³~imacr~Ä«~imagline~â„~imagpart~â„‘~imath~Ä±~imof~âŠ·~imped~Æµ~in~âˆˆ~incare~â„…~infintie~â§~inodot~Ä±~intcal~âŠº~integers~â„¤~intercal~âŠº~intlarhk~â¨—~intprod~â¨¼~iocy~Ñ‘~iogon~Ä¯~iopf~ð•š~iprod~â¨¼~iscr~ð’¾~isinE~â‹¹~isindot~â‹µ~isins~â‹´~isinsv~â‹³~isinv~âˆˆ~it~â¢~itilde~Ä©~iukcy~Ñ–~jcirc~Äµ~jcy~Ð¹~jfr~ð”§~jmath~È·~jopf~ð•›~jscr~ð’¿~jsercy~Ñ˜~jukcy~Ñ”~kappav~Ï°~kcedil~Ä·~kcy~Ðº~kfr~ð”¨~kgreen~Ä¸~khcy~Ñ…~kjcy~Ñœ~kopf~ð•œ~kscr~ð“€~lAarr~â‡š~lAtail~â¤›~lBarr~â¤Ž~lE~â‰¦~lEg~âª‹~lHar~â¥¢~lacute~Äº~laemptyv~â¦´~lagran~â„’~langd~â¦‘~langle~âŸ¨~lap~âª…~larrb~â‡¤~larrbfs~â¤Ÿ~larrfs~â¤~larrhk~â†©~larrlp~â†«~larrpl~â¤¹~larrsim~â¥³~larrtl~â†¢~lat~âª«~latail~â¤™~late~âª­~lates~âª­ï¸€~lbarr~â¤Œ~lbbrk~â²~lbrace~{~lbrack~[~lbrke~â¦‹~lbrksld~â¦~lbrkslu~â¦~lcaron~Ä¾~lcedil~Ä¼~lcub~{~lcy~Ð»~ldca~â¤¶~ldquor~â€ž~ldrdhar~â¥§~ldrushar~â¥‹~ldsh~â†²~leftarrow~â†~leftarrowtail~â†¢~leftharpoondown~â†½~leftharpoonup~â†¼~leftleftarrows~â‡‡~leftrightarrow~â†”~leftrightarrows~â‡†~leftrightharpoons~â‡‹~leftrightsquigarrow~â†­~leftthreetimes~â‹‹~leg~â‹š~leq~â‰¤~leqq~â‰¦~leqslant~â©½~les~â©½~lescc~âª¨~lesdot~â©¿~lesdoto~âª~lesdotor~âªƒ~lesg~â‹šï¸€~lesges~âª“~lessapprox~âª…~lessdot~â‹–~lesseqgtr~â‹š~lesseqqgtr~âª‹~lessgtr~â‰¶~lesssim~â‰²~lfisht~â¥¼~lfr~ð”©~lg~â‰¶~lgE~âª‘~lhard~â†½~lharu~â†¼~lharul~â¥ª~lhblk~â–„~ljcy~Ñ™~ll~â‰ª~llarr~â‡‡~llcorner~âŒž~llhard~â¥«~lltri~â—º~lmidot~Å€~lmoust~âŽ°~lmoustache~âŽ°~lnE~â‰¨~lnap~âª‰~lnapprox~âª‰~lne~âª‡~lneq~âª‡~lneqq~â‰¨~lnsim~â‹¦~loang~âŸ¬~loarr~â‡½~lobrk~âŸ¦~longleftarrow~âŸµ~longleftrightarrow~âŸ·~longmapsto~âŸ¼~longrightarrow~âŸ¶~looparrowleft~â†«~looparrowright~â†¬~lopar~â¦…~lopf~ð•~loplus~â¨­~lotimes~â¨´~lowbar~_~lozenge~â—Š~lozf~â§«~lpar~(~lparlt~â¦“~lrarr~â‡†~lrcorner~âŒŸ~lrhar~â‡‹~lrhard~â¥­~lrtri~âŠ¿~lscr~ð“~lsh~â†°~lsim~â‰²~lsime~âª~lsimg~âª~lsqb~[~lsquor~â€š~lstrok~Å‚~ltcc~âª¦~ltcir~â©¹~ltdot~â‹–~lthree~â‹‹~ltimes~â‹‰~ltlarr~â¥¶~ltquest~â©»~ltrPar~â¦–~ltri~â—ƒ~ltrie~âŠ´~ltrif~â—‚~lurdshar~â¥Š~luruhar~â¥¦~lvertneqq~â‰¨ï¸€~lvnE~â‰¨ï¸€~mDDot~âˆº~male~â™‚~malt~âœ ~maltese~âœ ~map~â†¦~mapsto~â†¦~mapstodown~â†§~mapstoleft~â†¤~mapstoup~â†¥~marker~â–®~mcomma~â¨©~mcy~Ð¼~measuredangle~âˆ¡~mfr~ð”ª~mho~â„§~mid~âˆ£~midast~*~midcir~â«°~minusb~âŠŸ~minusd~âˆ¸~minusdu~â¨ª~mlcp~â«›~mldr~â€¦~mnplus~âˆ“~models~âŠ§~mopf~ð•ž~mp~âˆ“~mscr~ð“‚~mstpos~âˆ¾~multimap~âŠ¸~mumap~âŠ¸~nGg~â‹™Ì¸~nGt~â‰«âƒ’~nGtv~â‰«Ì¸~nLeftarrow~â‡~nLeftrightarrow~â‡Ž~nLl~â‹˜Ì¸~nLt~â‰ªâƒ’~nLtv~â‰ªÌ¸~nRightarrow~â‡~nVDash~âŠ¯~nVdash~âŠ®~nacute~Å„~nang~âˆ âƒ’~nap~â‰‰~napE~â©°Ì¸~napid~â‰‹Ì¸~napos~Å‰~napprox~â‰‰~natur~â™®~natural~â™®~naturals~â„•~nbump~â‰ŽÌ¸~nbumpe~â‰Ì¸~ncap~â©ƒ~ncaron~Åˆ~ncedil~Å†~ncong~â‰‡~ncongdot~â©­Ì¸~ncup~â©‚~ncy~Ð½~neArr~â‡—~nearhk~â¤¤~nearr~â†—~nearrow~â†—~nedot~â‰Ì¸~nequiv~â‰¢~nesear~â¤¨~nesim~â‰‚Ì¸~nexist~âˆ„~nexists~âˆ„~nfr~ð”«~ngE~â‰§Ì¸~nge~â‰±~ngeq~â‰±~ngeqq~â‰§Ì¸~ngeqslant~â©¾Ì¸~nges~â©¾Ì¸~ngsim~â‰µ~ngt~â‰¯~ngtr~â‰¯~nhArr~â‡Ž~nharr~â†®~nhpar~â«²~nis~â‹¼~nisd~â‹º~niv~âˆ‹~njcy~Ñš~nlArr~â‡~nlE~â‰¦Ì¸~nlarr~â†š~nldr~â€¥~nle~â‰°~nleftarrow~â†š~nleftrightarrow~â†®~nleq~â‰°~nleqq~â‰¦Ì¸~nleqslant~â©½Ì¸~nles~â©½Ì¸~nless~â‰®~nlsim~â‰´~nlt~â‰®~nltri~â‹ª~nltrie~â‹¬~nmid~âˆ¤~nopf~ð•Ÿ~notinE~â‹¹Ì¸~notindot~â‹µÌ¸~notinva~âˆ‰~notinvb~â‹·~notinvc~â‹¶~notni~âˆŒ~notniva~âˆŒ~notnivb~â‹¾~notnivc~â‹½~npar~âˆ¦~nparallel~âˆ¦~nparsl~â«½âƒ¥~npart~âˆ‚Ì¸~npolint~â¨”~npr~âŠ€~nprcue~â‹ ~npre~âª¯Ì¸~nprec~âŠ€~npreceq~âª¯Ì¸~nrArr~â‡~nrarr~â†›~nrarrc~â¤³Ì¸~nrarrw~â†Ì¸~nrightarrow~â†›~nrtri~â‹«~nrtrie~â‹­~nsc~âŠ~nsccue~â‹¡~nsce~âª°Ì¸~nscr~ð“ƒ~nshortmid~âˆ¤~nshortparallel~âˆ¦~nsim~â‰~nsime~â‰„~nsimeq~â‰„~nsmid~âˆ¤~nspar~âˆ¦~nsqsube~â‹¢~nsqsupe~â‹£~nsubE~â«…Ì¸~nsube~âŠˆ~nsubset~âŠ‚âƒ’~nsubseteq~âŠˆ~nsubseteqq~â«…Ì¸~nsucc~âŠ~nsucceq~âª°Ì¸~nsup~âŠ…~nsupE~â«†Ì¸~nsupe~âŠ‰~nsupset~âŠƒâƒ’~nsupseteq~âŠ‰~nsupseteqq~â«†Ì¸~ntgl~â‰¹~ntlg~â‰¸~ntriangleleft~â‹ª~ntrianglelefteq~â‹¬~ntriangleright~â‹«~ntrianglerighteq~â‹­~num~#~numero~â„–~numsp~â€‡~nvDash~âŠ­~nvHarr~â¤„~nvap~â‰âƒ’~nvdash~âŠ¬~nvge~â‰¥âƒ’~nvgt~>âƒ’~nvinfin~â§ž~nvlArr~â¤‚~nvle~â‰¤âƒ’~nvlt~<âƒ’~nvltrie~âŠ´âƒ’~nvrArr~â¤ƒ~nvrtrie~âŠµâƒ’~nvsim~âˆ¼âƒ’~nwArr~â‡–~nwarhk~â¤£~nwarr~â†–~nwarrow~â†–~nwnear~â¤§~oS~â“ˆ~oast~âŠ›~ocir~âŠš~ocy~Ð¾~odash~âŠ~odblac~Å‘~odiv~â¨¸~odot~âŠ™~odsold~â¦¼~ofcir~â¦¿~ofr~ð”¬~ogon~Ë›~ogt~â§~ohbar~â¦µ~ohm~Î©~oint~âˆ®~olarr~â†º~olcir~â¦¾~olcross~â¦»~olt~â§€~omacr~Å~omid~â¦¶~ominus~âŠ–~oopf~ð• ~opar~â¦·~operp~â¦¹~orarr~â†»~ord~â©~order~â„´~orderof~â„´~origof~âŠ¶~oror~â©–~orslope~â©—~orv~â©›~oscr~â„´~osol~âŠ˜~otimesas~â¨¶~ovbar~âŒ½~par~âˆ¥~parallel~âˆ¥~parsim~â«³~parsl~â«½~pcy~Ð¿~percnt~%~period~.~pertenk~â€±~pfr~ð”­~phiv~Ï•~phmmat~â„³~phone~â˜Ž~pitchfork~â‹”~planck~â„~planckh~â„Ž~plankv~â„~plus~+~plusacir~â¨£~plusb~âŠž~pluscir~â¨¢~plusdo~âˆ”~plusdu~â¨¥~pluse~â©²~plussim~â¨¦~plustwo~â¨§~pm~Â±~pointint~â¨•~popf~ð•¡~pr~â‰º~prE~âª³~prap~âª·~prcue~â‰¼~pre~âª¯~prec~â‰º~precapprox~âª·~preccurlyeq~â‰¼~preceq~âª¯~precnapprox~âª¹~precneqq~âªµ~precnsim~â‹¨~precsim~â‰¾~primes~â„™~prnE~âªµ~prnap~âª¹~prnsim~â‹¨~profalar~âŒ®~profline~âŒ’~profsurf~âŒ“~propto~âˆ~prsim~â‰¾~prurel~âŠ°~pscr~ð“…~puncsp~â€ˆ~qfr~ð”®~qint~â¨Œ~qopf~ð•¢~qprime~â—~qscr~ð“†~quaternions~â„~quatint~â¨–~quest~?~questeq~â‰Ÿ~rAarr~â‡›~rAtail~â¤œ~rBarr~â¤~rHar~â¥¤~race~âˆ½Ì±~racute~Å•~raemptyv~â¦³~rangd~â¦’~range~â¦¥~rangle~âŸ©~rarrap~â¥µ~rarrb~â‡¥~rarrbfs~â¤ ~rarrc~â¤³~rarrfs~â¤ž~rarrhk~â†ª~rarrlp~â†¬~rarrpl~â¥…~rarrsim~â¥´~rarrtl~â†£~rarrw~â†~ratail~â¤š~ratio~âˆ¶~rationals~â„š~rbarr~â¤~rbbrk~â³~rbrace~}~rbrack~]~rbrke~â¦Œ~rbrksld~â¦Ž~rbrkslu~â¦~rcaron~Å™~rcedil~Å—~rcub~}~rcy~Ñ€~rdca~â¤·~rdldhar~â¥©~rdquor~â€~rdsh~â†³~realine~â„›~realpart~â„œ~reals~â„~rect~â–­~rfisht~â¥½~rfr~ð”¯~rhard~â‡~rharu~â‡€~rharul~â¥¬~rhov~Ï±~rightarrow~â†’~rightarrowtail~â†£~rightharpoondown~â‡~rightharpoonup~â‡€~rightleftarrows~â‡„~rightleftharpoons~â‡Œ~rightrightarrows~â‡‰~rightsquigarrow~â†~rightthreetimes~â‹Œ~ring~Ëš~risingdotseq~â‰“~rlarr~â‡„~rlhar~â‡Œ~rmoust~âŽ±~rmoustache~âŽ±~rnmid~â«®~roang~âŸ­~roarr~â‡¾~robrk~âŸ§~ropar~â¦†~ropf~ð•£~roplus~â¨®~rotimes~â¨µ~rpar~)~rpargt~â¦”~rppolint~â¨’~rrarr~â‡‰~rscr~ð“‡~rsh~â†±~rsqb~]~rsquor~â€™~rthree~â‹Œ~rtimes~â‹Š~rtri~â–¹~rtrie~âŠµ~rtrif~â–¸~rtriltri~â§Ž~ruluhar~â¥¨~rx~â„ž~sacute~Å›~sc~â‰»~scE~âª´~scap~âª¸~sccue~â‰½~sce~âª°~scedil~ÅŸ~scirc~Å~scnE~âª¶~scnap~âªº~scnsim~â‹©~scpolint~â¨“~scsim~â‰¿~scy~Ñ~sdotb~âŠ¡~sdote~â©¦~seArr~â‡˜~searhk~â¤¥~searr~â†˜~searrow~â†˜~semi~;~seswar~â¤©~setminus~âˆ–~setmn~âˆ–~sext~âœ¶~sfr~ð”°~sfrown~âŒ¢~sharp~â™¯~shchcy~Ñ‰~shcy~Ñˆ~shortmid~âˆ£~shortparallel~âˆ¥~sigmav~Ï‚~simdot~â©ª~sime~â‰ƒ~simeq~â‰ƒ~simg~âªž~simgE~âª ~siml~âª~simlE~âªŸ~simne~â‰†~simplus~â¨¤~simrarr~â¥²~slarr~â†~smallsetminus~âˆ–~smashp~â¨³~smeparsl~â§¤~smid~âˆ£~smile~âŒ£~smt~âªª~smte~âª¬~smtes~âª¬ï¸€~softcy~ÑŒ~sol~/~solb~â§„~solbar~âŒ¿~sopf~ð•¤~spadesuit~â™ ~spar~âˆ¥~sqcap~âŠ“~sqcaps~âŠ“ï¸€~sqcup~âŠ”~sqcups~âŠ”ï¸€~sqsub~âŠ~sqsube~âŠ‘~sqsubset~âŠ~sqsubseteq~âŠ‘~sqsup~âŠ~sqsupe~âŠ’~sqsupset~âŠ~sqsupseteq~âŠ’~squ~â–¡~square~â–¡~squarf~â–ª~squf~â–ª~srarr~â†’~sscr~ð“ˆ~ssetmn~âˆ–~ssmile~âŒ£~sstarf~â‹†~star~â˜†~starf~â˜…~straightepsilon~Ïµ~straightphi~Ï•~strns~Â¯~subE~â«…~subdot~âª½~subedot~â«ƒ~submult~â«~subnE~â«‹~subne~âŠŠ~subplus~âª¿~subrarr~â¥¹~subset~âŠ‚~subseteq~âŠ†~subseteqq~â«…~subsetneq~âŠŠ~subsetneqq~â«‹~subsim~â«‡~subsub~â«•~subsup~â«“~succ~â‰»~succapprox~âª¸~succcurlyeq~â‰½~succeq~âª°~succnapprox~âªº~succneqq~âª¶~succnsim~â‹©~succsim~â‰¿~sung~â™ª~supE~â«†~supdot~âª¾~supdsub~â«˜~supedot~â«„~suphsol~âŸ‰~suphsub~â«—~suplarr~â¥»~supmult~â«‚~supnE~â«Œ~supne~âŠ‹~supplus~â«€~supset~âŠƒ~supseteq~âŠ‡~supseteqq~â«†~supsetneq~âŠ‹~supsetneqq~â«Œ~supsim~â«ˆ~supsub~â«”~supsup~â«–~swArr~â‡™~swarhk~â¤¦~swarr~â†™~swarrow~â†™~swnwar~â¤ª~target~âŒ–~tbrk~âŽ´~tcaron~Å¥~tcedil~Å£~tcy~Ñ‚~tdot~âƒ›~telrec~âŒ•~tfr~ð”±~therefore~âˆ´~thetav~Ï‘~thickapprox~â‰ˆ~thicksim~âˆ¼~thkap~â‰ˆ~thksim~âˆ¼~timesb~âŠ ~timesbar~â¨±~timesd~â¨°~tint~âˆ­~toea~â¤¨~top~âŠ¤~topbot~âŒ¶~topcir~â«±~topf~ð•¥~topfork~â«š~tosa~â¤©~tprime~â€´~triangle~â–µ~triangledown~â–¿~triangleleft~â—ƒ~trianglelefteq~âŠ´~triangleq~â‰œ~triangleright~â–¹~trianglerighteq~âŠµ~tridot~â—¬~trie~â‰œ~triminus~â¨º~triplus~â¨¹~trisb~â§~tritime~â¨»~trpezium~â¢~tscr~ð“‰~tscy~Ñ†~tshcy~Ñ›~tstrok~Å§~twixt~â‰¬~twoheadleftarrow~â†ž~twoheadrightarrow~â† ~uHar~â¥£~ubrcy~Ñž~ubreve~Å­~ucy~Ñƒ~udarr~â‡…~udblac~Å±~udhar~â¥®~ufisht~â¥¾~ufr~ð”²~uharl~â†¿~uharr~â†¾~uhblk~â–€~ulcorn~âŒœ~ulcorner~âŒœ~ulcrop~âŒ~ultri~â—¸~umacr~Å«~uogon~Å³~uopf~ð•¦~uparrow~â†‘~updownarrow~â†•~upharpoonleft~â†¿~upharpoonright~â†¾~uplus~âŠŽ~upsi~Ï…~upuparrows~â‡ˆ~urcorn~âŒ~urcorner~âŒ~urcrop~âŒŽ~uring~Å¯~urtri~â—¹~uscr~ð“Š~utdot~â‹°~utilde~Å©~utri~â–µ~utrif~â–´~uuarr~â‡ˆ~uwangle~â¦§~vArr~â‡•~vBar~â«¨~vBarv~â«©~vDash~âŠ¨~vangrt~â¦œ~varepsilon~Ïµ~varkappa~Ï°~varnothing~âˆ…~varphi~Ï•~varpi~Ï–~varpropto~âˆ~varr~â†•~varrho~Ï±~varsigma~Ï‚~varsubsetneq~âŠŠï¸€~varsubsetneqq~â«‹ï¸€~varsupsetneq~âŠ‹ï¸€~varsupsetneqq~â«Œï¸€~vartheta~Ï‘~vartriangleleft~âŠ²~vartriangleright~âŠ³~vcy~Ð²~vdash~âŠ¢~vee~âˆ¨~veebar~âŠ»~veeeq~â‰š~vellip~â‹®~verbar~|~vert~|~vfr~ð”³~vltri~âŠ²~vnsub~âŠ‚âƒ’~vnsup~âŠƒâƒ’~vopf~ð•§~vprop~âˆ~vrtri~âŠ³~vscr~ð“‹~vsubnE~â«‹ï¸€~vsubne~âŠŠï¸€~vsupnE~â«Œï¸€~vsupne~âŠ‹ï¸€~vzigzag~â¦š~wcirc~Åµ~wedbar~â©Ÿ~wedge~âˆ§~wedgeq~â‰™~wfr~ð”´~wopf~ð•¨~wp~â„˜~wr~â‰€~wreath~â‰€~wscr~ð“Œ~xcap~â‹‚~xcirc~â—¯~xcup~â‹ƒ~xdtri~â–½~xfr~ð”µ~xhArr~âŸº~xharr~âŸ·~xlArr~âŸ¸~xlarr~âŸµ~xmap~âŸ¼~xnis~â‹»~xodot~â¨€~xopf~ð•©~xoplus~â¨~xotime~â¨‚~xrArr~âŸ¹~xrarr~âŸ¶~xscr~ð“~xsqcup~â¨†~xuplus~â¨„~xutri~â–³~xvee~â‹~xwedge~â‹€~yacy~Ñ~ycirc~Å·~ycy~Ñ‹~yfr~ð”¶~yicy~Ñ—~yopf~ð•ª~yscr~ð“Ž~yucy~ÑŽ~zacute~Åº~zcaron~Å¾~zcy~Ð·~zdot~Å¼~zeetrf~â„¨~zfr~ð”·~zhcy~Ð¶~zigrarr~â‡~zopf~ð•«~zscr~ð“~~AMP~&~COPY~Â©~GT~>~LT~<~QUOT~"~REG~Â®',d.html4);var e={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},f=String.fromCodePoint||function(a){return String.fromCharCode(Math.floor((a-65536)/1024)+55296,(a-65536)%1024+56320)};String.prototype.codePointAt;var g=function(){return(g=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},h=g(g({},d),{all:d.html5}),i={scope:"body",level:"all"},j=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);/g,k=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+)[;=]?/g,l={xml:{strict:j,attribute:k,body:/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g},html4:{strict:j,attribute:k,body:/&notin;|&(?:nbsp|iexcl|cent|pound|curren|yen|brvbar|sect|uml|copy|ordf|laquo|not|shy|reg|macr|deg|plusmn|sup2|sup3|acute|micro|para|middot|cedil|sup1|ordm|raquo|frac14|frac12|frac34|iquest|Agrave|Aacute|Acirc|Atilde|Auml|Aring|AElig|Ccedil|Egrave|Eacute|Ecirc|Euml|Igrave|Iacute|Icirc|Iuml|ETH|Ntilde|Ograve|Oacute|Ocirc|Otilde|Ouml|times|Oslash|Ugrave|Uacute|Ucirc|Uuml|Yacute|THORN|szlig|agrave|aacute|acirc|atilde|auml|aring|aelig|ccedil|egrave|eacute|ecirc|euml|igrave|iacute|icirc|iuml|eth|ntilde|ograve|oacute|ocirc|otilde|ouml|divide|oslash|ugrave|uacute|ucirc|uuml|yacute|thorn|yuml|quot|amp|lt|gt|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g},html5:{strict:j,attribute:k,body:/&centerdot;|&copysr;|&divideontimes;|&gtcc;|&gtcir;|&gtdot;|&gtlPar;|&gtquest;|&gtrapprox;|&gtrarr;|&gtrdot;|&gtreqless;|&gtreqqless;|&gtrless;|&gtrsim;|&ltcc;|&ltcir;|&ltdot;|&lthree;|&ltimes;|&ltlarr;|&ltquest;|&ltrPar;|&ltri;|&ltrie;|&ltrif;|&notin;|&notinE;|&notindot;|&notinva;|&notinvb;|&notinvc;|&notni;|&notniva;|&notnivb;|&notnivc;|&parallel;|&timesb;|&timesbar;|&timesd;|&(?:AElig|AMP|Aacute|Acirc|Agrave|Aring|Atilde|Auml|COPY|Ccedil|ETH|Eacute|Ecirc|Egrave|Euml|GT|Iacute|Icirc|Igrave|Iuml|LT|Ntilde|Oacute|Ocirc|Ograve|Oslash|Otilde|Ouml|QUOT|REG|THORN|Uacute|Ucirc|Ugrave|Uuml|Yacute|aacute|acirc|acute|aelig|agrave|amp|aring|atilde|auml|brvbar|ccedil|cedil|cent|copy|curren|deg|divide|eacute|ecirc|egrave|eth|euml|frac12|frac14|frac34|gt|iacute|icirc|iexcl|igrave|iquest|iuml|laquo|lt|macr|micro|middot|nbsp|not|ntilde|oacute|ocirc|ograve|ordf|ordm|oslash|otilde|ouml|para|plusmn|pound|quot|raquo|reg|sect|shy|sup1|sup2|sup3|szlig|thorn|times|uacute|ucirc|ugrave|uml|uuml|yacute|yen|yuml|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g}},m=g(g({},l),{all:l.html5}),n=String.fromCharCode,o=n(65533);function p(a,b){var c=void 0===b?i:b,d=c.level,g=void 0===d?"all":d,j=c.scope,k=void 0===j?"xml"===g?"strict":"body":j;if(!a)return"";var l=m[g][k],p=h[g].entities,q="attribute"===k,r="strict"===k;return a.replace(l,function(a){return function(a,b,c,d){var g=a,h=a[a.length-1];if(c&&"="===h)g=a;else if(d&&";"!==h)g=a;else{var i=b[a];if(i)g=i;else if("&"===a[0]&&"#"===a[1]){var j=a[2],k="x"==j||"X"==j?parseInt(a.substr(3),16):parseInt(a.substr(2));g=k>=1114111?o:k>65535?f(k):n(e[k]||k)}}return g}(a,p,q,r)})}a.s(["decode",()=>p],470814)},629938,(a,b,c)=>{a.e,b.exports=function(a){var b={};function c(d){if(b[d])return b[d].exports;var e=b[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,c),e.l=!0,e.exports}return c.m=a,c.c=b,c.d=function(a,b,d){c.o(a,b)||Object.defineProperty(a,b,{enumerable:!0,get:d})},c.r=function(a){"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},c.t=function(a,b){if(1&b&&(a=c(a)),8&b||4&b&&"object"==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(c.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&b&&"string"!=typeof a)for(var e in a)c.d(d,e,(function(b){return a[b]}).bind(null,e));return d},c.n=function(a){var b=a&&a.__esModule?function(){return a.default}:function(){return a};return c.d(b,"a",b),b},c.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},c.p="",c(c.s=1)}([function(a,b,c){"use strict";function d(a,b,c){for(var d=0;d<c.length;d++)a.setUint8(b+d,c.charCodeAt(d))}Object.defineProperty(b,"__esModule",{value:!0}),b.compress=function(a,b,c){for(var d=b/c,e=Math.max(d,1),f=a.left,g=a.right,h=Math.floor((f.length+g.length)/d),i=new Float32Array(h),j=0,k=0;j<h;){var l=Math.floor(k);i[j]=f[l],j++,g.length&&(i[j]=g[l],j++),k+=e}return i},b.encodePCM=function(a,b,c){void 0===c&&(c=!0);var d=0,e=new DataView(new ArrayBuffer(a.length*(b/8)));if(8===b)for(var f=0;f<a.length;f++,d++){var g=(h=Math.max(-1,Math.min(1,a[f])))<0?128*h:127*h;g=+g+128,e.setInt8(d,g)}else for(f=0;f<a.length;f++,d+=2){var h=Math.max(-1,Math.min(1,a[f]));e.setInt16(d,h<0?32768*h:32767*h,c)}return e},b.encodeWAV=function(a,b,c,e,f,g){void 0===g&&(g=!0);var h=c>b?b:c,i=new DataView(new ArrayBuffer(44+a.byteLength)),j=0;d(i,0,"RIFF"),j+=4,i.setUint32(j,36+a.byteLength,g),d(i,j+=4,"WAVE"),d(i,j+=4,"fmt "),j+=4,i.setUint32(j,16,g),j+=4,i.setUint16(j,1,g),j+=2,i.setUint16(j,e,g),j+=2,i.setUint32(j,h,g),j+=4,i.setUint32(j,e*h*(f/8),g),j+=4,i.setUint16(j,f/8*e,g),j+=2,i.setUint16(j,f,g),d(i,j+=2,"data"),j+=4,i.setUint32(j,a.byteLength,g),j+=4;for(var k=0;k<a.byteLength;)i.setUint8(j,a.getUint8(k)),j++,k++;return i}},function(a,b,c){"use strict";var d,e=this&&this.__extends||(d=function(a,b){return(d=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)},function(a,b){function c(){this.constructor=a}d(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)});Object.defineProperty(b,"__esModule",{value:!0});var f=c(2),g=c(0),h=c(3);b.default=function(a){function b(b){void 0===b&&(b={});var c=a.call(this,b)||this;return c.isrecording=!1,c.ispause=!1,c.isplaying=!1,c}return e(b,a),b.prototype.setOption=function(a){void 0===a&&(a={}),this.setNewOption(a)},b.prototype.start=function(){return this.isrecording?Promise.reject():(this.isrecording=!0,this.startRecord())},b.prototype.pause=function(){this.isrecording&&!this.ispause&&(this.ispause=!0,this.pauseRecord())},b.prototype.resume=function(){this.isrecording&&this.ispause&&(this.ispause=!1,this.resumeRecord())},b.prototype.stop=function(){this.isrecording&&(this.isrecording=!1,this.ispause=!1,this.stopRecord())},b.prototype.play=function(){this.stop(),this.isplaying=!0,this.onplay&&this.onplay(),h.default.addPlayEnd(this.onplayend);var a=this.getWAV();a.byteLength>44&&h.default.play(a.buffer)},b.prototype.getPlayTime=function(){return h.default.getPlayTime()},b.prototype.pausePlay=function(){!this.isrecording&&this.isplaying&&(this.isplaying=!1,this.onpauseplay&&this.onpauseplay(),h.default.pausePlay())},b.prototype.resumePlay=function(){this.isrecording||this.isplaying||(this.isplaying=!0,this.onresumeplay&&this.onresumeplay(),h.default.resumePlay())},b.prototype.stopPlay=function(){this.isrecording||(this.isplaying=!1,this.onstopplay&&this.onstopplay(),h.default.stopPlay())},b.prototype.destroy=function(){return h.default.destroyPlay(),this.destroyRecord()},b.prototype.getRecordAnalyseData=function(){return this.getAnalyseData()},b.prototype.getPlayAnalyseData=function(){return h.default.getAnalyseData()},b.prototype.getPCM=function(){this.stop();var a=this.getData();return a=g.compress(a,this.inputSampleRate,this.outputSampleRate),g.encodePCM(a,this.oututSampleBits,this.littleEdian)},b.prototype.getPCMBlob=function(){return new Blob([this.getPCM()])},b.prototype.downloadPCM=function(a){void 0===a&&(a="recorder");var b=this.getPCMBlob();f.downloadPCM(b,a)},b.prototype.getWAV=function(){var a=this.getPCM();return g.encodeWAV(a,this.inputSampleRate,this.outputSampleRate,this.config.numChannels,this.oututSampleBits,this.littleEdian)},b.prototype.getWAVBlob=function(){return new Blob([this.getWAV()],{type:"audio/wav"})},b.prototype.downloadWAV=function(a){void 0===a&&(a="recorder");var b=this.getWAVBlob();f.downloadWAV(b,a)},b.prototype.download=function(a,b,c){f.download(a,b,c)},b.prototype.getChannelData=function(){var a=this.getPCM(),b=a.byteLength,c=this.littleEdian,d={left:null,right:null};if(2===this.config.numChannels){var e=new DataView(new ArrayBuffer(b/2)),f=new DataView(new ArrayBuffer(b/2));if(16===this.config.sampleBits)for(var g=0;g<b/2;g+=2)e.setInt16(g,a.getInt16(2*g,c),c),f.setInt16(g,a.getInt16(2*g+2,c),c);else for(g=0;g<b/2;g+=2)e.setInt8(g,a.getInt8(2*g)),f.setInt8(g,a.getInt8(2*g+1));d.left=e,d.right=f}else d.left=a;return d},b}(c(5).default)},function(a,b,c){"use strict";function d(a,b,c){var d=document.createElement("a");d.href=window.URL.createObjectURL(a),d.download=b+"."+c,d.click()}Object.defineProperty(b,"__esModule",{value:!0}),b.downloadWAV=function(a,b){void 0===b&&(b="recorder"),d(a,b,"wav")},b.downloadPCM=function(a,b){void 0===b&&(b="recorder"),d(a,b,"pcm")},b.download=function(a,b,c){return d(a,b,c)}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(4),e=null,f=0,g=0,h=null,i=null,j=null,k=!1,l=0,m=function(){};function n(){return k=!1,h.decodeAudioData(j.slice(0),function(a){(e=h.createBufferSource()).onended=function(){k||(l=h.currentTime-g+f,m())},e.buffer=a,e.connect(i),i.connect(h.destination),e.start(0,f),g=h.currentTime},function(a){d.throwError(a)})}function o(){e&&(e.stop(),e=null)}b.default=function(){function a(){}return a.play=function(a){return h||((i=(h=new(window.AudioContext||window.webkitAudioContext)).createAnalyser()).fftSize=2048),this.stopPlay(),j=a,l=0,n()},a.pausePlay=function(){o(),f+=h.currentTime-g,k=!0},a.resumePlay=function(){return n()},a.stopPlay=function(){f=0,j=null,o()},a.destroyPlay=function(){this.stopPlay()},a.getAnalyseData=function(){var a=new Uint8Array(i.frequencyBinCount);return i.getByteTimeDomainData(a),a},a.addPlayEnd=function(a){void 0===a&&(a=function(){}),m=a},a.getPlayTime=function(){var a=k?f:h.currentTime-g+f;return l||a},a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.throwError=function(a){throw Error(a)}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(0);b.default=function(){function a(b){void 0===b&&(b={}),this.size=0,this.lBuffer=[],this.rBuffer=[],this.tempPCM=[],this.inputSampleBits=16,this.fileSize=0,this.duration=0,this.needRecord=!0;var c,d=new(window.AudioContext||window.webkitAudioContext);this.inputSampleRate=d.sampleRate,this.setNewOption(b),this.littleEdian=(new DataView(c=new ArrayBuffer(2)).setInt16(0,256,!0),256===new Int16Array(c)[0]),a.initUserMedia()}return a.prototype.setNewOption=function(a){void 0===a&&(a={}),this.config={sampleBits:~[8,16].indexOf(a.sampleBits)?a.sampleBits:16,sampleRate:~[8e3,11025,16e3,22050,24e3,44100,48e3].indexOf(a.sampleRate)?a.sampleRate:this.inputSampleRate,numChannels:~[1,2].indexOf(a.numChannels)?a.numChannels:1},this.outputSampleRate=this.config.sampleRate,this.oututSampleBits=this.config.sampleBits},a.prototype.startRecord=function(){var a=this;return this.context&&this.destroyRecord(),this.initRecorder(),navigator.mediaDevices.getUserMedia({audio:!0}).then(function(b){a.audioInput=a.context.createMediaStreamSource(b),a.stream=b}).then(function(){a.audioInput.connect(a.analyser),a.analyser.connect(a.recorder),a.recorder.connect(a.context.destination)})},a.prototype.pauseRecord=function(){this.needRecord=!1},a.prototype.resumeRecord=function(){this.needRecord=!0},a.prototype.stopRecord=function(){this.audioInput&&this.audioInput.disconnect(),this.source&&this.source.stop(),this.recorder.disconnect(),this.analyser.disconnect(),this.needRecord=!0},a.prototype.destroyRecord=function(){return this.clearRecordStatus(),this.stopStream(),this.closeAudioContext()},a.prototype.getAnalyseData=function(){var a=new Uint8Array(this.analyser.frequencyBinCount);return this.analyser.getByteTimeDomainData(a),a},a.prototype.getData=function(){return this.flat()},a.prototype.clearRecordStatus=function(){this.lBuffer.length=0,this.rBuffer.length=0,this.size=0,this.fileSize=0,this.PCM=null,this.audioInput=null,this.duration=0},a.prototype.flat=function(){var a=null,b=new Float32Array(0);1===this.config.numChannels?a=new Float32Array(this.size):(a=new Float32Array(this.size/2),b=new Float32Array(this.size/2));for(var c=0,d=0;d<this.lBuffer.length;d++)a.set(this.lBuffer[d],c),c+=this.lBuffer[d].length;for(d=0,c=0;d<this.rBuffer.length;d++)b.set(this.rBuffer[d],c),c+=this.rBuffer[d].length;return{left:a,right:b}},a.prototype.initRecorder=function(){var a=this;this.clearRecordStatus(),this.context=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.context.createAnalyser(),this.analyser.fftSize=2048;var b=this.context.createScriptProcessor||this.context.createJavaScriptNode;this.recorder=b.apply(this.context,[4096,this.config.numChannels,this.config.numChannels]),this.recorder.onaudioprocess=function(b){if(a.needRecord){var c,d=b.inputBuffer.getChannelData(0),e=null;a.lBuffer.push(new Float32Array(d)),a.size+=d.length,2===a.config.numChannels&&(e=b.inputBuffer.getChannelData(1),a.rBuffer.push(new Float32Array(e)),a.size+=e.length),a.fileSize=Math.floor(a.size/Math.max(a.inputSampleRate/a.outputSampleRate,1))*(a.oututSampleBits/8),c=100*Math.max.apply(Math,d),a.duration+=4096/a.inputSampleRate,a.onprocess&&a.onprocess(a.duration),a.onprogress&&a.onprogress({duration:a.duration,fileSize:a.fileSize,vol:c})}}},a.prototype.stopStream=function(){this.stream&&this.stream.getTracks&&(this.stream.getTracks().forEach(function(a){return a.stop()}),this.stream=null)},a.prototype.closeAudioContext=function(){return this.context&&this.context.close&&"closed"!==this.context.state?this.context.close():new Promise(function(a){a()})},a.initUserMedia=function(){void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(a){var b=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return b?new Promise(function(c,d){b.call(navigator,a,c,d)}):Promise.reject(Error("æµè§ˆå™¨ä¸æ”¯æŒ getUserMedia !"))})},a.prototype.transformIntoPCM=function(a,b){var c=new Float32Array(a),e=new Float32Array(b),f=d.compress({left:c,right:e},this.inputSampleRate,this.outputSampleRate);return d.encodePCM(f,this.oututSampleBits,this.littleEdian)},a.getPermission=function(){return this.initUserMedia(),navigator.mediaDevices.getUserMedia({audio:!0}).then(function(a){a&&a.getTracks().forEach(function(a){return a.stop()})})},a}()}]).default},855521,(a,b,c)=>{b.exports=a.r(629938)},2788,a=>{a.v({pauseIcon:"style-module__NualRa__pauseIcon",playIcon:"style-module__NualRa__playIcon"})},106896,a=>{"use strict";var b=a.i(608061),c=a.i(57843),d=a.i(644130),e=a.i(941938);let f=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z",clipRule:"evenodd"}))});var g=a.i(121434),h=a.i(429150),i=a.i(494261),j=a.i(533306);a.i(752298);var k=a.i(693025);function l(a,b,c=""){return a.replace(b,c)}var m=["[","]","{","}","(",")","|","/","-","\\"],n=[...m," ","_","."];RegExp(`[${n.map(function(a){return m.includes(a)?`\\${a}`:a}).join("")}]`,"g");var o=a.i(934402),p=a.i(41548),q=a.i(105249),r=a.i(483664),s=a.i(2788);let t=({id:a,voice:d,value:e,className:f,isAudition:g})=>{let[h,i]=(0,c.useState)("initial"),k=(0,j.useParams)(),l=(0,j.usePathname)(),m=a=>{switch(a){case"ended":case"paused":case"error":i("ended");break;case"loaded":i("loading");break;case"play":i("playing")}},n="",t=!1;k.token?(n="/text-to-audio",t=!0):k.appId&&(n=l.search("explore/installed")>-1?`/installed-apps/${k.appId}/text-to-audio`:`/apps/${k.appId}/text-to-audio`);let u=async()=>{"playing"===h||"loading"===h?(setTimeout(()=>i("paused"),1),p.AudioPlayerManager.getInstance().getAudioPlayer(n,t,a,e,d,m).pauseAudio()):(setTimeout(()=>i("loading"),1),p.AudioPlayerManager.getInstance().getAudioPlayer(n,t,a,e,d,m).playAudio())},v={initial:(0,o.t)("play",{ns:"appApi"}),ended:(0,o.t)("play",{ns:"appApi"}),paused:(0,o.t)("pause",{ns:"appApi"}),playing:(0,o.t)("playing",{ns:"appApi"}),loading:(0,o.t)("loading",{ns:"appApi"})}[h];return(0,b.jsx)("div",{className:`inline-flex items-center justify-center ${"loading"===h||"playing"===h?"mr-1":f}`,children:(0,b.jsx)(r.default,{popupContent:v,children:(0,b.jsx)("button",{type:"button",disabled:"loading"===h,className:`box-border flex h-6 w-6 cursor-pointer items-center justify-center ${g?"p-0.5":"rounded-md bg-white p-0"}`,onClick:u,children:"loading"===h?(0,b.jsx)("div",{className:"flex h-full w-full items-center justify-center rounded-md",children:(0,b.jsx)(q.default,{})}):(0,b.jsx)("div",{className:"flex h-full w-full items-center justify-center rounded-md hover:bg-gray-50",children:(0,b.jsx)("div",{className:`h-4 w-4 ${"playing"===h?s.default.pauseIcon:s.default.playIcon}`})})})})})};var u=a.i(133824),v=a.i(81492),w=a.i(136403),x=a.i(926261),y=a.i(954200),z=a.i(527344);let A=c.memo(({onClose:a,onChange:m})=>{let{t:n}=(0,k.useTranslation)(),o=(0,j.usePathname)().match(/\/app\/([^/]+)/),p=o?.length&&o[1]?o[1]:"",q=(0,u.useFeatures)(a=>a.features.text2speech),s=(0,u.useFeaturesStore)(),A=w.languages.find(a=>a.value===q?.language);w.languages&&!A&&(A=w.languages[0]);let B=A?.name||n("placeholder.select",{ns:"common"}),C=A?.value,{data:D}=(0,x.useAppVoices)(p,C),E=D?.find(a=>a.value===q?.voice);D&&!E&&(E=D[0]);let F=E?.name||n("placeholder.select",{ns:"common"}),G=a=>{let{features:b,setFeatures:c}=s.getState();c((0,i.produce)(b,b=>{b.text2speech={...b.text2speech,...a}})),m&&m()};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,b.jsx)("div",{className:"system-xl-semibold text-text-primary",children:n("voice.voiceSettings.title",{ns:"appDebug"})}),(0,b.jsx)("div",{className:"cursor-pointer p-1",onClick:a,children:(0,b.jsx)(h.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})})]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsxs)("div",{className:"system-sm-semibold mb-1 flex items-center py-1 text-text-secondary",children:[n("voice.voiceSettings.language",{ns:"appDebug"}),(0,b.jsx)(r.default,{popupContent:(0,b.jsx)("div",{className:"w-[180px]",children:n("voice.voiceSettings.resolutionTooltip",{ns:"appDebug"}).split("\n").map(a=>(0,b.jsx)("div",{children:a},a))})})]}),(0,b.jsx)(d.Listbox,{value:A,onChange:a=>{G({language:String(a.value)})},children:(0,b.jsxs)("div",{className:"relative h-8",children:[(0,b.jsxs)(d.ListboxButton,{className:"h-full w-full cursor-pointer rounded-lg border-0 bg-components-input-bg-normal py-1.5 pl-3 pr-10 focus-visible:bg-state-base-hover focus-visible:outline-none group-hover:bg-state-base-hover sm:text-sm sm:leading-6",children:[(0,b.jsx)("span",{className:(0,z.cn)("block truncate text-left text-text-secondary",!A?.name&&"text-text-tertiary"),children:A?.name?n(`voice.language.${l(A?.value,"-","")}`,{ns:"common"}):B}),(0,b.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,b.jsx)(g.ChevronDownIcon,{className:"h-4 w-4 text-text-tertiary","aria-hidden":"true"})})]}),(0,b.jsx)(e.Transition,{as:c.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,b.jsx)(d.ListboxOptions,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md border-[0.5px] border-components-panel-border bg-components-panel-bg px-1 py-1 text-base shadow-lg focus:outline-none sm:text-sm",children:w.languages.map(a=>(0,b.jsx)(d.ListboxOption,{className:"relative cursor-pointer select-none rounded-lg py-2 pl-3 pr-9 text-text-secondary hover:bg-state-base-hover data-[active]:bg-state-base-active",value:a,disabled:!1,children:({selected:c})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:(0,z.cn)("block",c&&"font-normal"),children:n(`voice.language.${l(a.value,"-","")}`,{ns:"common"})}),(c||a.value===q?.language)&&(0,b.jsx)("span",{className:(0,z.cn)("absolute inset-y-0 right-0 flex items-center pr-4 text-text-secondary"),children:(0,b.jsx)(f,{className:"h-4 w-4","aria-hidden":"true"})})]})},a.value))})})]})})]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("div",{className:"system-sm-semibold mb-1 py-1 text-text-secondary",children:n("voice.voiceSettings.voice",{ns:"appDebug"})}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(d.Listbox,{value:E??{},disabled:!A,onChange:a=>{G({voice:String(a.value)})},children:(0,b.jsxs)("div",{className:"relative h-8 grow",children:[(0,b.jsxs)(d.ListboxButton,{className:"h-full w-full cursor-pointer rounded-lg border-0 bg-components-input-bg-normal py-1.5 pl-3 pr-10 focus-visible:bg-state-base-hover focus-visible:outline-none group-hover:bg-state-base-hover sm:text-sm sm:leading-6",children:[(0,b.jsx)("span",{className:(0,z.cn)("block truncate text-left text-text-secondary",!E?.name&&"text-text-tertiary"),children:E?.name??F}),(0,b.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,b.jsx)(g.ChevronDownIcon,{className:"h-4 w-4 text-text-tertiary","aria-hidden":"true"})})]}),(0,b.jsx)(e.Transition,{as:c.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,b.jsx)(d.ListboxOptions,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md border-[0.5px] border-components-panel-border bg-components-panel-bg px-1 py-1 text-base shadow-lg focus:outline-none sm:text-sm",children:D?.map(a=>(0,b.jsx)(d.ListboxOption,{className:"relative cursor-pointer select-none rounded-lg py-2 pl-3 pr-9 text-text-secondary hover:bg-state-base-hover data-[active]:bg-state-base-active",value:a,disabled:!1,children:({selected:c})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:(0,z.cn)("block",c&&"font-normal"),children:a.name}),(c||a.value===q?.voice)&&(0,b.jsx)("span",{className:(0,z.cn)("absolute inset-y-0 right-0 flex items-center pr-4 text-text-secondary"),children:(0,b.jsx)(f,{className:"h-4 w-4","aria-hidden":"true"})})]})},a.value))})})]})}),A?.example&&(0,b.jsx)("div",{className:"h-8 shrink-0 rounded-lg bg-components-button-tertiary-bg p-1",children:(0,b.jsx)(t,{value:A?.example,isAudition:!0,voice:q?.voice,noCache:!0})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"system-sm-semibold mb-1 py-1 text-text-secondary",children:n("voice.voiceSettings.autoPlay",{ns:"appDebug"})}),(0,b.jsx)(v.default,{className:"shrink-0",defaultValue:q?.autoPlay===y.TtsAutoPlay.enabled,onChange:a=>{G({autoPlay:a?y.TtsAutoPlay.enabled:y.TtsAutoPlay.disabled})}})]})]})});var B=a.i(825319);let C=(0,c.memo)(({open:a,onOpen:c,onChange:d,disabled:e,children:f,placementLeft:g=!0})=>(0,b.jsxs)(B.PortalToFollowElem,{open:a,onOpenChange:c,placement:g?"left":"top",offset:{mainAxis:g?32:4},children:[(0,b.jsx)(B.PortalToFollowElemTrigger,{className:"flex",onClick:()=>!e&&c(a=>!a),children:f}),(0,b.jsx)(B.PortalToFollowElemContent,{style:{zIndex:50},children:(0,b.jsx)("div",{className:"w-[360px] rounded-2xl border-[0.5px] border-components-panel-border bg-components-panel-bg p-4 shadow-2xl",children:(0,b.jsx)(A,{onClose:()=>c(!1),onChange:d})})})]}));a.s(["default",0,C],106896)},23019,617258,348448,102281,199660,844430,114244,209548,382895,579772,684420,a=>{"use strict";var b=a.i(608061),c=a.i(796807),d=a.i(981223);let e=({ref:a,...e})=>(0,b.jsx)(c.default,{...e,ref:a,data:d.default});e.displayName="Citations",a.s(["default",0,e],617258);var f=a.i(724524);let g=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:f.default});g.displayName="ContentModeration",a.s(["default",0,g],348448);var h=a.i(893742);let i=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:h.default});i.displayName="Document",a.s(["default",0,i],102281);var j=a.i(793080);let k=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:j.default});k.displayName="FolderUpload",a.s(["default",0,k],199660);var l=a.i(751534);let m=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:l.default});m.displayName="LoveMessage",a.s(["default",0,m],844430);var n=a.i(869072);let o=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:n.default});o.displayName="MessageFast",a.s(["default",0,o],114244);var p=a.i(857137);let q=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:p.default});q.displayName="Microphone01",a.s(["default",0,q],209548);var r=a.i(950261);let s=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:r.default});s.displayName="TextToAudio",a.s(["default",0,s],382895);var t=a.i(217185);let u=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:t.default});u.displayName="VirtualAssistant",a.s(["default",0,u],579772);var v=a.i(189137);let w=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:v.default});w.displayName="Vision",a.s(["default",0,w],684420),a.s([],23019)},447361,193498,32139,935904,161572,a=>{"use strict";var b=a.i(617258);a.s(["Citations",()=>b.default],447361);var c=a.i(348448);a.s(["ContentModeration",()=>c.default],193498);var d=a.i(199660);a.s(["FolderUpload",()=>d.default],32139);var e=a.i(844430);a.s(["LoveMessage",()=>e.default],935904);var f=a.i(114244);a.s(["MessageFast",()=>f.default],161572)},718194,a=>{"use strict";var b=a.i(209548);a.s(["Microphone01",()=>b.default])},30231,773910,383973,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(57843);a.i(752298);var e=a.i(693025),f=a.i(909795),g=a.i(133824),h=a.i(106896);a.i(23019);var i=a.i(447361),j=a.i(193498),k=a.i(32139),l=a.i(935904),m=a.i(161572),n=a.i(718194),o=a.i(382895);a.s(["TextToAudio",()=>o.default],773910);var o=o,p=a.i(579772);a.s(["VirtualAssistant",()=>p.default],383973);var p=p,q=a.i(483664),r=a.i(527344);a.s(["default",0,({isChatMode:a=!0,showFileUpload:s=!0,disabled:t,onFeatureBarClick:u,hideEditEntrance:v=!1})=>{let{t:w}=(0,e.useTranslation)(),x=(0,g.useFeatures)(a=>a.features),[y,z]=(0,d.useState)(!1),A=(0,d.useMemo)(()=>!Object.values({...x,citation:{enabled:!!a&&x.citation?.enabled},file:s?x.file:{enabled:!1}}).some(a=>a.enabled),[x,a,s]);return(0,b.jsxs)("div",{className:"m-1 mt-0 -translate-y-2 rounded-b-[10px] border-b border-l border-r border-components-panel-border-subtle bg-util-colors-indigo-indigo-50 px-2.5 py-2 pt-4",children:[A&&(0,b.jsxs)("div",{className:"flex cursor-pointer items-end gap-1",onClick:()=>u?.(!0),children:[(0,b.jsx)(c.RiApps2AddLine,{className:"h-3.5 w-3.5 text-text-accent"}),(0,b.jsx)("div",{className:"body-xs-medium text-text-accent",children:w("feature.bar.empty",{ns:"appDebug"})}),(0,b.jsx)(c.RiArrowRightLine,{className:"h-3.5 w-3.5 text-text-accent"})]}),!A&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("div",{className:"flex shrink-0 items-center gap-0.5",children:[!!x.moreLikeThis?.enabled&&(0,b.jsx)(q.default,{popupContent:w("feature.moreLikeThis.title",{ns:"appDebug"}),children:(0,b.jsx)("div",{className:"shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-blue-light-blue-light-500 p-1 shadow-xs",children:(0,b.jsx)(c.RiSparklingFill,{className:"h-3.5 w-3.5 text-text-primary-on-surface"})})}),!!x.opening?.enabled&&(0,b.jsx)(q.default,{popupContent:w("feature.conversationOpener.title",{ns:"appDebug"}),children:(0,b.jsx)("div",{className:"shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-blue-light-blue-light-500 p-1 shadow-xs",children:(0,b.jsx)(l.LoveMessage,{className:"h-3.5 w-3.5 text-text-primary-on-surface"})})}),!!x.moderation?.enabled&&(0,b.jsx)(q.default,{popupContent:w("feature.moderation.title",{ns:"appDebug"}),children:(0,b.jsx)("div",{className:"shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-text-success p-1 shadow-xs",children:(0,b.jsx)(j.ContentModeration,{className:"h-3.5 w-3.5 text-text-primary-on-surface"})})}),!!x.speech2text?.enabled&&(0,b.jsx)(q.default,{popupContent:w("feature.speechToText.title",{ns:"appDebug"}),children:(0,b.jsx)("div",{className:"shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-violet-violet-600 p-1 shadow-xs",children:(0,b.jsx)(n.Microphone01,{className:"h-3.5 w-3.5 text-text-primary-on-surface"})})}),!!x.text2speech?.enabled&&(0,b.jsx)(h.default,{placementLeft:!1,open:y&&!t,onOpen:z,children:(0,b.jsx)(q.default,{popupContent:w("feature.textToSpeech.title",{ns:"appDebug"}),children:(0,b.jsx)("div",{className:(0,r.cn)("shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-violet-violet-600 p-1 shadow-xs",!t&&"cursor-pointer"),children:(0,b.jsx)(o.default,{className:"h-3.5 w-3.5 text-text-primary-on-surface"})})})}),s&&!!x.file?.enabled&&(0,b.jsx)(q.default,{popupContent:w("feature.fileUpload.title",{ns:"appDebug"}),children:(0,b.jsx)("div",{className:"shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-blue-blue-600 p-1 shadow-xs",children:(0,b.jsx)(k.FolderUpload,{className:"h-3.5 w-3.5 text-text-primary-on-surface"})})}),!!x.suggested?.enabled&&(0,b.jsx)(q.default,{popupContent:w("feature.suggestedQuestionsAfterAnswer.title",{ns:"appDebug"}),children:(0,b.jsx)("div",{className:"shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-blue-light-blue-light-500 p-1 shadow-xs",children:(0,b.jsx)(p.default,{className:"h-3.5 w-3.5 text-text-primary-on-surface"})})}),a&&!!x.citation?.enabled&&(0,b.jsx)(q.default,{popupContent:w("feature.citation.title",{ns:"appDebug"}),children:(0,b.jsx)("div",{className:"shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-warning-warning-500 p-1 shadow-xs",children:(0,b.jsx)(i.Citations,{className:"h-4 w-4 text-text-primary-on-surface"})})}),a&&!!x.annotationReply?.enabled&&(0,b.jsx)(q.default,{popupContent:w("feature.annotation.title",{ns:"appDebug"}),children:(0,b.jsx)("div",{className:"shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-indigo-indigo-600 p-1 shadow-xs",children:(0,b.jsx)(m.MessageFast,{className:"h-3.5 w-3.5 text-text-primary-on-surface"})})})]}),(0,b.jsx)("div",{className:"body-xs-regular grow text-text-tertiary",children:w("feature.bar.enableText",{ns:"appDebug"})}),!v&&(0,b.jsxs)(f.default,{className:"shrink-0",variant:"ghost-accent",size:"small",onClick:()=>u?.(!0),children:[(0,b.jsx)("div",{className:"mx-1",children:w("feature.bar.manage",{ns:"appDebug"})}),(0,b.jsx)(c.RiArrowRightLine,{className:"h-3.5 w-3.5 text-text-accent"})]})]})]})}],30231)},280819,a=>{"use strict";var b=a.i(57843),c=a.i(288e3),d=a.i(429264),e=function(a,b){if(void 0===b&&(b=0),"u"<typeof requestAnimationFrame)return{id:setInterval(a,b)};var c=Date.now(),d={id:0},e=function(){Date.now()-c>=b&&(a(),c=Date.now()),d.id=requestAnimationFrame(e)};return d.id=requestAnimationFrame(e),d},f=function(a){if(a.id,"u"<typeof cancelAnimationFrame)return clearInterval(a.id);cancelAnimationFrame(a.id)};a.s(["useRafInterval",0,function(a,g,h){var i=null==h?void 0:h.immediate,j=(0,c.default)(a),k=(0,b.useRef)(void 0),l=(0,b.useCallback)(function(){k.current&&f(k.current)},[]);return(0,b.useEffect)(function(){if((0,d.isNumber)(g)&&!(g<0))return i&&j.current(),k.current=e(function(){j.current()},g),l},[g]),l}],280819)},74240,a=>{a.v({convert:"index-module__6c4iMa__convert",wrapper:"index-module__6c4iMa__wrapper"})},921088,(a,b,c)=>{function d(a){return new Int16Array(a)}function e(a){return new Int32Array(a)}function f(a){return new Float32Array(a)}var g={};g.fill=function(a,b,c,d){if(2==arguments.length)for(var e=0;e<a.length;e++)a[e]=arguments[1];else for(var e=b;e<c;e++)a[e]=d};var h={};h.arraycopy=function(a,b,c,d,e){for(var f=b+e;b<f;)c[d++]=a[b++]},h.out={},h.out.println=function(a){console.log(a)},h.out.printf=function(){console.log.apply(console,arguments)};var i={};function j(a){this.ordinal=a}i.SQRT2=1.4142135623730951,i.FAST_LOG10=function(a){return Math.log10(a)},i.FAST_LOG10_X=function(a,b){return Math.log10(a)*b},j.short_block_allowed=new j(0),j.short_block_coupled=new j(1),j.short_block_dispensed=new j(2),j.short_block_forced=new j(3);var k={};function l(a){this.ordinal=a}k.MAX_VALUE=34028235e31,l.vbr_off=new l(0),l.vbr_mt=new l(1),l.vbr_rh=new l(2),l.vbr_abr=new l(3),l.vbr_mtrh=new l(4),l.vbr_default=l.vbr_mtrh,b.exports={System:h,VbrMode:l,Float:k,ShortBlock:j,Util:i,Arrays:g,new_array_n:function a(b){if(1==b.length)return Array(b[0]);var c=b[0];b=b.slice(1);for(var d=[],e=0;e<c;e++)d.push(a(b));return d},new_byte:function(a){return new Int8Array(a)},new_double:function(a){return new Float64Array(a)},new_float:f,new_float_n:function a(b){if(1==b.length)return f(b[0]);var c=b[0];b=b.slice(1);for(var d=[],e=0;e<c;e++)d.push(a(b));return d},new_int:e,new_int_n:function a(b){if(1==b.length)return e(b[0]);var c=b[0];b=b.slice(1);for(var d=[],f=0;f<c;f++)d.push(a(b));return d},new_short:d,new_short_n:function a(b){if(1==b.length)return d(b[0]);var c=b[0];b=b.slice(1);for(var e=[],f=0;f<c;f++)e.push(a(b));return e},assert:function(a){}}},814386,(a,b,c)=>{var d=a.r(921088),e=d.System;d.VbrMode,d.Float,d.ShortBlock;var f=d.Util,g=d.Arrays;d.new_array_n,d.new_byte,d.new_double;var h=d.new_float;d.new_float_n,d.new_int,d.new_int_n,d.assert;var i=a.r(340862);b.exports=function(){var a=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*f.SQRT2*.5/2384e-9,.017876148*f.SQRT2*.5/2384e-9,.003134727*f.SQRT2*.5/2384e-9,.002457142*f.SQRT2*.5/2384e-9,971317e-9*f.SQRT2*.5/2384e-9,218868e-9*f.SQRT2*.5/2384e-9,101566e-9*f.SQRT2*.5/2384e-9,13828e-9*f.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],b=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],c=b[i.SHORT_TYPE],d=b[i.SHORT_TYPE],j=b[i.SHORT_TYPE],k=b[i.SHORT_TYPE],l=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function m(b,c,d){for(var e,g,h,i,j,k,l=10,m=c+238-14-286,n=-15;n<0;n++)e=a[l+-10],g=b[m+-224]*e,h=b[c+224]*e,e=a[l+-9],g+=b[m+-160]*e,h+=b[c+160]*e,e=a[l+-8],g+=b[m+-96]*e,h+=b[c+96]*e,e=a[l+-7],g+=b[m+-32]*e,h+=b[c+32]*e,e=a[l+-6],g+=b[m+32]*e,h+=b[c+-32]*e,e=a[l+-5],g+=b[m+96]*e,h+=b[c+-96]*e,e=a[l+-4],g+=b[m+160]*e,h+=b[c+-160]*e,e=a[l+-3],g+=b[m+224]*e,h+=b[c+-224]*e,e=a[l+-2],g+=b[c+-256]*e,h-=b[m+256]*e,e=a[l+-1],g+=b[c+-192]*e,h-=b[m+192]*e,e=a[l+0],g+=b[c+-128]*e,h-=b[m+128]*e,e=a[l+1],g+=b[c+-64]*e,h-=b[m+64]*e,e=a[l+2],g+=b[c+0]*e,h-=b[m+0]*e,e=a[l+3],g+=b[c+64]*e,h-=b[m+-64]*e,e=a[l+4],g+=b[c+128]*e,h-=b[m+-128]*e,e=a[l+5],g+=b[c+192]*e,h-=b[m+-192]*e,g*=a[l+6],e=h-g,d[30+2*n]=h+g,d[31+2*n]=a[l+7]*e,l+=18,c--,m++;h=b[c+-16]*a[l+-10],g=b[c+-32]*a[l+-2],h+=(b[c+-48]-b[c+16])*a[l+-9],g+=b[c+-96]*a[l+-1],h+=(b[c+-80]+b[c+48])*a[l+-8],g+=b[c+-160]*a[l+0],h+=(b[c+-112]-b[c+80])*a[l+-7],g+=b[c+-224]*a[l+1],h+=(b[c+-144]+b[c+112])*a[l+-6],g-=b[c+32]*a[l+2],h+=(b[c+-176]-b[c+144])*a[l+-5],g-=b[c+96]*a[l+3],h+=(b[c+-208]+b[c+176])*a[l+-4],g-=b[c+160]*a[l+4],h+=(b[c+-240]-b[c+208])*a[l+-3],g-=b[c+224],i=g-h,j=g+h,h=d[14],g=d[15]-h,d[31]=j+h,d[30]=i+g,d[15]=i-g,d[14]=j-h,k=d[28]-d[0],d[0]+=d[28],d[28]=k*a[l+-36+7],k=d[29]-d[1],d[1]+=d[29],d[29]=k*a[l+-36+7],k=d[26]-d[2],d[2]+=d[26],d[26]=k*a[l+-72+7],k=d[27]-d[3],d[3]+=d[27],d[27]=k*a[l+-72+7],k=d[24]-d[4],d[4]+=d[24],d[24]=k*a[l+-108+7],k=d[25]-d[5],d[5]+=d[25],d[25]=k*a[l+-108+7],k=d[22]-d[6],d[6]+=d[22],d[22]=k*f.SQRT2,k=d[23]-d[7],d[7]+=d[23],d[23]=k*f.SQRT2-d[7],d[7]-=d[6],d[22]-=d[7],d[23]-=d[22],k=d[6],d[6]=d[31]-k,d[31]=d[31]+k,k=d[7],d[7]=d[30]-k,d[30]=d[30]+k,k=d[22],d[22]=d[15]-k,d[15]=d[15]+k,k=d[23],d[23]=d[14]-k,d[14]=d[14]+k,k=d[20]-d[8],d[8]+=d[20],d[20]=k*a[l+-180+7],k=d[21]-d[9],d[9]+=d[21],d[21]=k*a[l+-180+7],k=d[18]-d[10],d[10]+=d[18],d[18]=k*a[l+-216+7],k=d[19]-d[11],d[11]+=d[19],d[19]=k*a[l+-216+7],k=d[16]-d[12],d[12]+=d[16],d[16]=k*a[l+-252+7],k=d[17]-d[13],d[13]+=d[17],d[17]=k*a[l+-252+7],k=-d[20]+d[24],d[20]+=d[24],d[24]=k*a[l+-216+7],k=-d[21]+d[25],d[21]+=d[25],d[25]=k*a[l+-216+7],k=d[4]-d[8],d[4]+=d[8],d[8]=k*a[l+-216+7],k=d[5]-d[9],d[5]+=d[9],d[9]=k*a[l+-216+7],k=d[0]-d[12],d[0]+=d[12],d[12]=k*a[l+-72+7],k=d[1]-d[13],d[1]+=d[13],d[13]=k*a[l+-72+7],k=d[16]-d[28],d[16]+=d[28],d[28]=k*a[l+-72+7],k=-d[17]+d[29],d[17]+=d[29],d[29]=k*a[l+-72+7],k=f.SQRT2*(d[2]-d[10]),d[2]+=d[10],d[10]=k,k=f.SQRT2*(d[3]-d[11]),d[3]+=d[11],d[11]=k,k=f.SQRT2*(-d[18]+d[26]),d[18]+=d[26],d[26]=k-d[18],k=f.SQRT2*(-d[19]+d[27]),d[19]+=d[27],d[27]=k-d[19],k=d[2],d[19]-=d[3],d[3]-=k,d[2]=d[31]-k,d[31]+=k,k=d[3],d[11]-=d[19],d[18]-=k,d[3]=d[30]-k,d[30]+=k,k=d[18],d[27]-=d[11],d[19]-=k,d[18]=d[15]-k,d[15]+=k,k=d[19],d[10]-=k,d[19]=d[14]-k,d[14]+=k,k=d[10],d[11]-=k,d[10]=d[23]-k,d[23]+=k,k=d[11],d[26]-=k,d[11]=d[22]-k,d[22]+=k,k=d[26],d[27]-=k,d[26]=d[7]-k,d[7]+=k,k=d[27],d[27]=d[6]-k,d[6]+=k,k=f.SQRT2*(d[0]-d[4]),d[0]+=d[4],d[4]=k,k=f.SQRT2*(d[1]-d[5]),d[1]+=d[5],d[5]=k,k=f.SQRT2*(d[16]-d[20]),d[16]+=d[20],d[20]=k,k=f.SQRT2*(d[17]-d[21]),d[17]+=d[21],d[21]=k,k=-f.SQRT2*(d[8]-d[12]),d[8]+=d[12],d[12]=k-d[8],k=-f.SQRT2*(d[9]-d[13]),d[9]+=d[13],d[13]=k-d[9],k=-f.SQRT2*(d[25]-d[29]),d[25]+=d[29],d[29]=k-d[25],k=-f.SQRT2*(d[24]+d[28]),d[24]-=d[28],d[28]=k-d[24],k=d[24]-d[16],d[24]=k,k=d[20]-k,d[20]=k,k=d[28]-k,d[28]=k,k=d[25]-d[17],d[25]=k,k=d[21]-k,d[21]=k,k=d[29]-k,d[29]=k,k=d[17]-d[1],d[17]=k,k=d[9]-k,d[9]=k,k=d[25]-k,d[25]=k,k=d[5]-k,d[5]=k,k=d[21]-k,d[21]=k,k=d[13]-k,d[13]=k,k=d[29]-k,d[29]=k,k=d[1]-d[0],d[1]=k,k=d[16]-k,d[16]=k,k=d[17]-k,d[17]=k,k=d[8]-k,d[8]=k,k=d[9]-k,d[9]=k,k=d[24]-k,d[24]=k,k=d[25]-k,d[25]=k,k=d[4]-k,d[4]=k,k=d[5]-k,d[5]=k,k=d[20]-k,d[20]=k,k=d[21]-k,d[21]=k,k=d[12]-k,d[12]=k,k=d[13]-k,d[13]=k,k=d[28]-k,d[28]=k,k=d[29]-k,d[29]=k,k=d[0],d[0]+=d[31],d[31]-=k,k=d[1],d[1]+=d[30],d[30]-=k,k=d[16],d[16]+=d[15],d[15]-=k,k=d[17],d[17]+=d[14],d[14]-=k,k=d[8],d[8]+=d[23],d[23]-=k,k=d[9],d[9]+=d[22],d[22]-=k,k=d[24],d[24]+=d[7],d[7]-=k,k=d[25],d[25]+=d[6],d[6]-=k,k=d[4],d[4]+=d[27],d[27]-=k,k=d[5],d[5]+=d[26],d[26]-=k,k=d[20],d[20]+=d[11],d[11]-=k,k=d[21],d[21]+=d[10],d[10]-=k,k=d[12],d[12]+=d[19],d[19]-=k,k=d[13],d[13]+=d[18],d[18]-=k,k=d[28],d[28]+=d[3],d[3]-=k,k=d[29],d[29]+=d[2],d[2]-=k}this.mdct_sub48=function(a,f,n){for(var o=f,p=286,q=0;q<a.channels_out;q++){for(var r=0;r<a.mode_gr;r++){for(var s=a.l3_side.tt[r][q],t=s.xr,u=0,v=a.sb_sample[q][1-r],w=0,x=0;x<9;x++)for(m(o,p,v[w]),m(o,p+32,v[w+1]),w+=2,p+=64,C=1;C<32;C+=2)v[w-1][C]*=-1;for(C=0;C<32;C++,u+=18){var y=s.block_type,z=a.sb_sample[q][r],A=a.sb_sample[q][1-r];if(0!=s.mixed_block_flag&&C<2&&(y=0),a.amp_filter[C]<1e-12)g.fill(t,u+0,u+18,0);else{if(a.amp_filter[C]<1)for(var x=0;x<18;x++)A[x][l[C]]*=a.amp_filter[C];if(y==i.SHORT_TYPE){for(var x=-3;x<0;x++){var B=b[i.SHORT_TYPE][x+3];t[u+3*x+9]=z[9+x][l[C]]*B-z[8-x][l[C]],t[u+3*x+18]=z[14-x][l[C]]*B+z[15+x][l[C]],t[u+3*x+10]=z[15+x][l[C]]*B-z[14-x][l[C]],t[u+3*x+19]=A[2-x][l[C]]*B+A[3+x][l[C]],t[u+3*x+11]=A[3+x][l[C]]*B-A[2-x][l[C]],t[u+3*x+20]=A[8-x][l[C]]*B+A[9+x][l[C]]}!function(a,c){for(var d,e,f,g,h,j,k=0;k<3;k++)e=(g=a[c+6]*b[i.SHORT_TYPE][0]-a[c+15])+(d=a[c+0]*b[i.SHORT_TYPE][2]-a[c+9]),f=g-d,h=(g=a[c+15]*b[i.SHORT_TYPE][0]+a[c+6])+(d=a[c+9]*b[i.SHORT_TYPE][2]+a[c+0]),j=-g+d,d=(a[c+3]*b[i.SHORT_TYPE][1]-a[c+12])*2069978111953089e-26,g=(a[c+12]*b[i.SHORT_TYPE][1]+a[c+3])*2069978111953089e-26,a[c+0]=190752519173728e-25*e+d,a[c+15]=-(190752519173728e-25*h)+g,f=.8660254037844387*f*1907525191737281e-26,h=.5*h*1907525191737281e-26+g,a[c+3]=f-h,a[c+6]=f+h,e=.5*e*1907525191737281e-26-d,j=.8660254037844387*j*1907525191737281e-26,a[c+9]=e+j,a[c+12]=e-j,c++}(t,u)}else{for(var C,D,E,F=h(18),x=-9;x<0;x++)D=b[y][x+27]*A[x+9][l[C]]+b[y][x+36]*A[8-x][l[C]],E=b[y][x+9]*z[x+9][l[C]]-b[y][x+18]*z[8-x][l[C]],F[x+9]=D-E*c[3+x+9],F[x+18]=D*c[3+x+9]+E;!function(a,b,c){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;g=c[17]-c[9],i=c[15]-c[11],j=c[14]-c[12],k=c[0]+c[8],l=c[1]+c[7],m=c[2]+c[6],n=c[3]+c[5],a[b+17]=k+m-n-(l-c[4]),f=(k+m-n)*d[19]+(l-c[4]),e=(g-i-j)*d[18],a[b+5]=e+f,a[b+6]=e-f,h=(c[16]-c[10])*d[18],l=l*d[19]+c[4],e=g*d[12]+h+i*d[13]+j*d[14],f=-k*d[16]+l-m*d[17]+n*d[15],a[b+1]=e+f,a[b+2]=e-f,e=g*d[13]-h-i*d[14]+j*d[12],f=-k*d[17]+l-m*d[15]+n*d[16],a[b+9]=e+f,a[b+10]=e-f,e=g*d[14]-h+i*d[12]-j*d[13],f=k*d[15]-l+m*d[16]-n*d[17],a[b+13]=e+f,a[b+14]=e-f,o=c[8]-c[0],q=c[6]-c[2],r=c[5]-c[3],s=c[17]+c[9],t=c[16]+c[10],u=c[15]+c[11],v=c[14]+c[12],a[b+0]=s+u+v+(t+c[13]),e=(s+u+v)*d[19]-(t+c[13]),f=(o-q+r)*d[18],a[b+11]=e+f,a[b+12]=e-f,p=(c[7]-c[1])*d[18],t=c[13]-t*d[19],e=s*d[15]-t+u*d[16]+v*d[17],f=o*d[14]+p+q*d[12]+r*d[13],a[b+3]=e+f,a[b+4]=e-f,e=-s*d[17]+t-u*d[15]-v*d[16],f=o*d[13]+p-q*d[14]-r*d[12],a[b+7]=e+f,a[b+8]=e-f,e=-s*d[16]+t-u*d[17]-v*d[15],f=o*d[12]-p+q*d[13]-r*d[14],a[b+15]=e+f,a[b+16]=e-f}(t,u,F)}}if(y!=i.SHORT_TYPE&&0!=C)for(var G,H,x=7;x>=0;--x)G=t[u+x]*j[20+x]+t[u+-1-x]*k[28+x],H=t[u+x]*k[28+x]-t[u+-1-x]*j[20+x],t[u+-1-x]=G,t[u+x]=H}}if(o=n,p=286,1==a.mode_gr)for(var I=0;I<18;I++)e.arraycopy(a.sb_sample[q][1][I],0,a.sb_sample[q][0][I],0,32)}}}},820491,(a,b,c)=>{var d=a.r(340862),e=a.r(921088),f=e.System;e.VbrMode,e.Float,e.ShortBlock,e.Util,e.Arrays,e.new_array_n,e.new_byte,e.new_double;var g=e.new_float,h=e.new_float_n;e.new_int,e.new_int_n,e.assert,b.exports=function(){this.l=g(d.SBMAX_l),this.s=h([d.SBMAX_s,3]);var a=this;this.assign=function(b){f.arraycopy(b.l,0,a.l,0,d.SBMAX_l);for(var c=0;c<d.SBMAX_s;c++)for(var e=0;e<3;e++)a.s[c][e]=b.s[c][e]}}},290120,(a,b,c)=>{var d=a.r(820491);b.exports=function(){this.thm=new d,this.en=new d}},340862,(a,b,c)=>{var d=a.r(921088),e=d.System,f=d.VbrMode;d.Float,d.ShortBlock,d.Util,d.Arrays;var g=d.new_array_n;d.new_byte,d.new_double;var h=d.new_float,i=d.new_float_n,j=d.new_int;d.new_int_n;var k=d.assert;function l(){var b=a.r(814386),c=a.r(290120),d=l.FFTOFFSET,m=l.MPG_MD_MS_LR,n=null;this.psy=null;var o=null,p=null,q=null;this.setModules=function(a,b,c,d){n=a,this.psy=b,o=b,p=d,q=c};var r=new b;this.lame_encode_mp3_frame=function(a,b,s,t,u,v){var w,x,y,z,A,B=g([2,2]);B[0][0]=new c,B[0][1]=new c,B[1][0]=new c,B[1][1]=new c;var C=g([2,2]);C[0][0]=new c,C[0][1]=new c,C[1][0]=new c,C[1][1]=new c;var D=[null,null],E=a.internal_flags,F=i([2,4]),G=[.5,.5],H=[[0,0],[0,0]],I=[[0,0],[0,0]];if(D[0]=b,D[1]=s,0==E.lame_encode_frame_init&&function(a,b){var c=a.internal_flags;if(0==c.lame_encode_frame_init){var d,e,f,g,i=h(2014),j=h(2014);for(f=0,c.lame_encode_frame_init=1,g=0;f<286+576*(1+c.mode_gr);++f)f<576*c.mode_gr?(i[f]=0,2==c.channels_out&&(j[f]=0)):(i[f]=b[0][g],2==c.channels_out&&(j[f]=b[1][g]),++g);for(e=0;e<c.mode_gr;e++)for(d=0;d<c.channels_out;d++)c.l3_side.tt[e][d].block_type=l.SHORT_TYPE;r.mdct_sub48(c,i,j),k(576>=l.FFTOFFSET),k(c.mf_size>=l.BLKSIZE+a.framesize-l.FFTOFFSET),k(c.mf_size>=512+a.framesize-32)}}(a,D),E.padding=0,(E.slot_lag-=E.frac_SpF)<0&&(E.slot_lag+=a.out_samplerate,E.padding=1),0!=E.psymodel){var J,K,L,M,N,O=[null,null],P=0,Q=j(2);for(N=0;N<E.mode_gr;N++){for(M=0;M<E.channels_out;M++)O[M]=D[M],P=576+576*N-l.FFTOFFSET;if(0!=(a.VBR==f.vbr_mtrh||a.VBR==f.vbr_mt?o.L3psycho_anal_vbr(a,O,P,N,B,C,H[N],I[N],F[N],Q):o.L3psycho_anal_ns(a,O,P,N,B,C,H[N],I[N],F[N],Q)))return -4;for(a.mode==MPEGMode.JOINT_STEREO&&(G[N]=F[N][2]+F[N][3],G[N]>0&&(G[N]=F[N][3]/G[N])),M=0;M<E.channels_out;M++){var R=E.l3_side.tt[N][M];R.block_type=Q[M],R.mixed_block_flag=0}}}else for(N=0;N<E.mode_gr;N++)for(M=0;M<E.channels_out;M++)E.l3_side.tt[N][M].block_type=l.NORM_TYPE,E.l3_side.tt[N][M].mixed_block_flag=0,I[N][M]=H[N][M]=700;if(!function(a){var b,c;if(0==a.ATH.useAdjust){a.ATH.adjust=1;return}if(c=a.loudness_sq[0][0],b=a.loudness_sq[1][0],2==a.channels_out?(c+=a.loudness_sq[0][1],b+=a.loudness_sq[1][1]):(c+=c,b+=b),2==a.mode_gr&&(c=Math.max(c,b)),(c*=.5*a.ATH.aaSensitivityP)>.03125)a.ATH.adjust>=1?a.ATH.adjust=1:a.ATH.adjust<a.ATH.adjustLimit&&(a.ATH.adjust=a.ATH.adjustLimit),a.ATH.adjustLimit=1;else{var d=31.98*c+625e-6;a.ATH.adjust>=d?(a.ATH.adjust*=.075*d+.925,a.ATH.adjust<d&&(a.ATH.adjust=d)):a.ATH.adjustLimit>=d?a.ATH.adjust=d:a.ATH.adjust<a.ATH.adjustLimit&&(a.ATH.adjust=a.ATH.adjustLimit),a.ATH.adjustLimit=d}}(E),r.mdct_sub48(E,D[0],D[1]),E.mode_ext=l.MPG_MD_LR_LR,a.force_ms)E.mode_ext=l.MPG_MD_MS_LR;else if(a.mode==MPEGMode.JOINT_STEREO){var S=0,T=0;for(N=0;N<E.mode_gr;N++)for(M=0;M<E.channels_out;M++)S+=I[N][M],T+=H[N][M];if(S<=+T){var U=E.l3_side.tt[0],V=E.l3_side.tt[E.mode_gr-1];U[0].block_type==U[1].block_type&&V[0].block_type==V[1].block_type&&(E.mode_ext=l.MPG_MD_MS_LR)}}if(E.mode_ext==m?(K=C,L=I):(K=B,L=H),a.analysis&&null!=E.pinfo)for(N=0;N<E.mode_gr;N++)for(M=0;M<E.channels_out;M++)E.pinfo.ms_ratio[N]=E.ms_ratio[N],E.pinfo.ms_ener_ratio[N]=G[N],E.pinfo.blocktype[N][M]=E.l3_side.tt[N][M].block_type,E.pinfo.pe[N][M]=L[N][M],e.arraycopy(E.l3_side.tt[N][M].xr,0,E.pinfo.xr[N][M],0,576),E.mode_ext==m&&(E.pinfo.ers[N][M]=E.pinfo.ers[N][M+2],e.arraycopy(E.pinfo.energy[N][M+2],0,E.pinfo.energy[N][M],0,E.pinfo.energy[N][M].length));if(a.VBR==f.vbr_off||a.VBR==f.vbr_abr){for(y=0;y<18;y++)E.nsPsy.pefirbuf[y]=E.nsPsy.pefirbuf[y+1];for(N=0,z=0;N<E.mode_gr;N++)for(M=0;M<E.channels_out;M++)z+=L[N][M];for(y=0,E.nsPsy.pefirbuf[18]=z,z=E.nsPsy.pefirbuf[9];y<9;y++)z+=(E.nsPsy.pefirbuf[y]+E.nsPsy.pefirbuf[18-y])*l.fircoef[y];for(N=0,z=3350*E.mode_gr*E.channels_out/z;N<E.mode_gr;N++)for(M=0;M<E.channels_out;M++)L[N][M]*=z}if(E.iteration_loop.iteration_loop(a,L,G,K),n.format_bitstream(a),J=n.copy_buffer(E,t,u,v,1),a.bWriteVbrTag&&p.addVbrFrame(a),a.analysis&&null!=E.pinfo){for(M=0;M<E.channels_out;M++){for(A=0;A<d;A++)E.pinfo.pcmdata[M][A]=E.pinfo.pcmdata[M][A+a.framesize];for(A=d;A<1600;A++)E.pinfo.pcmdata[M][A]=D[M][A-d]}q.set_frame_pinfo(a,K)}for(k(0<=E.bitrate_index&&E.bitrate_index<16),k(0<=E.mode_ext&&E.mode_ext<4),E.bitrate_stereoMode_Hist[E.bitrate_index][4]++,E.bitrate_stereoMode_Hist[15][4]++,2==E.channels_out&&(E.bitrate_stereoMode_Hist[E.bitrate_index][E.mode_ext]++,E.bitrate_stereoMode_Hist[15][E.mode_ext]++),w=0;w<E.mode_gr;++w)for(x=0;x<E.channels_out;++x){var W=0|E.l3_side.tt[w][x].block_type;0!=E.l3_side.tt[w][x].mixed_block_flag&&(W=4),E.bitrate_blockType_Hist[E.bitrate_index][W]++,E.bitrate_blockType_Hist[E.bitrate_index][5]++,E.bitrate_blockType_Hist[15][W]++,E.bitrate_blockType_Hist[15][5]++}return J}}l.ENCDELAY=576,l.POSTDELAY=1152,l.MDCTDELAY=48,l.FFTOFFSET=224+l.MDCTDELAY,l.DECDELAY=528,l.SBLIMIT=32,l.CBANDS=64,l.SBPSY_l=21,l.SBPSY_s=12,l.SBMAX_l=22,l.SBMAX_s=13,l.PSFB21=6,l.PSFB12=6,l.BLKSIZE=1024,l.HBLKSIZE=l.BLKSIZE/2+1,l.BLKSIZE_s=256,l.HBLKSIZE_s=l.BLKSIZE_s/2+1,l.NORM_TYPE=0,l.START_TYPE=1,l.SHORT_TYPE=2,l.STOP_TYPE=3,l.MPG_MD_LR_LR=0,l.MPG_MD_LR_I=1,l.MPG_MD_MS_LR=2,l.MPG_MD_MS_I=3,l.fircoef=[-.1039435,-.1892065,-.0432472*5,-.155915,779609e-23*5,.0467745*5,.50455,.756825,.187098*5],b.exports=l},333529,(a,b,c)=>{var d=a.r(921088);d.System,d.VbrMode,d.Float,d.ShortBlock;var e=d.Util;d.Arrays,d.new_array_n,d.new_byte,d.new_double;var f=d.new_float;d.new_float_n,d.new_int,d.new_int_n,d.assert;var g=a.r(340862);b.exports=function(){var a=f(g.BLKSIZE),b=f(g.BLKSIZE_s/2),c=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function d(a,b,d){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=0,C=b+(d<<=1);f=4;do{o=f>>1,l=f,n=(m=f<<1)+l,f=m<<1,h=(g=b)+o;do v=a[g+0]-a[g+l],u=a[g+0]+a[g+l],z=a[g+m]-a[g+n],x=a[g+m]+a[g+n],a[g+m]=u-x,a[g+0]=u+x,a[g+n]=v-z,a[g+l]=v+z,v=a[h+0]-a[h+l],u=a[h+0]+a[h+l],z=e.SQRT2*a[h+n],x=e.SQRT2*a[h+m],a[h+m]=u-x,a[h+0]=u+x,a[h+n]=v-z,a[h+l]=v+z,h+=f,g+=f;while(g<C)for(k=1,j=c[B+0],i=c[B+1];k<o;k++){p=1-2*i*i,q=2*i*j,g=b+k,h=b+l-k;do s=q*a[g+l]-p*a[h+l],r=p*a[g+l]+q*a[h+l],v=a[g+0]-r,u=a[g+0]+r,w=a[h+0]-s,t=a[h+0]+s,s=q*a[g+n]-p*a[h+n],r=p*a[g+n]+q*a[h+n],z=a[g+m]-r,x=a[g+m]+r,A=a[h+m]-s,y=a[h+m]+s,s=i*x-j*A,r=j*x+i*A,a[g+m]=u-r,a[g+0]=u+r,a[h+n]=w-s,a[h+l]=w+s,s=j*y-i*z,r=i*y+j*z,a[h+m]=t-r,a[h+0]=t+r,a[g+n]=v-s,a[g+l]=v+s,h+=f,g+=f;while(g<C)j=(p=j)*c[B+0]-i*c[B+1],i=p*c[B+1]+i*c[B+0]}B+=2}while(f<d)}var h=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(a,c,e,f,i){for(var j=0;j<3;j++){var k=g.BLKSIZE_s/2,l=65535&192*(j+1),m=g.BLKSIZE_s/8-1;do{var n,o,p,q,r,s=255&h[m<<2];o=(n=b[s]*f[e][i+s+l])-(r=b[127-s]*f[e][i+s+l+128]),n+=r,q=(p=b[s+64]*f[e][i+s+l+64])-(r=b[63-s]*f[e][i+s+l+192]),p+=r,k-=4,c[j][k+0]=n+p,c[j][k+2]=n-p,c[j][k+1]=o+q,c[j][k+3]=o-q,o=(n=b[s+1]*f[e][i+s+l+1])-(r=b[126-s]*f[e][i+s+l+129]),n+=r,q=(p=b[s+65]*f[e][i+s+l+65])-(r=b[62-s]*f[e][i+s+l+193]),p+=r,c[j][k+g.BLKSIZE_s/2+0]=n+p,c[j][k+g.BLKSIZE_s/2+2]=n-p,c[j][k+g.BLKSIZE_s/2+1]=o+q,c[j][k+g.BLKSIZE_s/2+3]=o-q}while(--m>=0)d(c[j],k,g.BLKSIZE_s/2)}},this.fft_long=function(b,c,e,f,i){var j=g.BLKSIZE/8-1,k=g.BLKSIZE/2;do{var l,m,n,o,p,q=255&h[j];m=(l=a[q]*f[e][i+q])-(p=a[q+512]*f[e][i+q+512]),l+=p,o=(n=a[q+256]*f[e][i+q+256])-(p=a[q+768]*f[e][i+q+768]),n+=p,c[(k-=4)+0]=l+n,c[k+2]=l-n,c[k+1]=m+o,c[k+3]=m-o,m=(l=a[q+1]*f[e][i+q+1])-(p=a[q+513]*f[e][i+q+513]),l+=p,o=(n=a[q+257]*f[e][i+q+257])-(p=a[q+769]*f[e][i+q+769]),n+=p,c[k+g.BLKSIZE/2+0]=l+n,c[k+g.BLKSIZE/2+2]=l-n,c[k+g.BLKSIZE/2+1]=m+o,c[k+g.BLKSIZE/2+3]=m-o}while(--j>=0)d(c,k,g.BLKSIZE/2)},this.init_fft=function(c){for(var d=0;d<g.BLKSIZE;d++)a[d]=.42-.5*Math.cos(2*Math.PI*(d+.5)/g.BLKSIZE)+.08*Math.cos(4*Math.PI*(d+.5)/g.BLKSIZE);for(var d=0;d<g.BLKSIZE_s/2;d++)b[d]=.5*(1-Math.cos(2*Math.PI*(d+.5)/g.BLKSIZE_s))}}},575844,(a,b,c)=>{var d=a.r(921088);d.System;var e=d.VbrMode,f=d.Float,g=d.ShortBlock,h=d.Util,i=d.Arrays;d.new_array_n,d.new_byte,d.new_double;var j=d.new_float,k=d.new_float_n,l=d.new_int;d.new_int_n;var m=d.assert,n=a.r(333529),o=a.r(340862);b.exports=function(){var a,b,c,d=new n,p=1/0xcf8a400/(o.BLKSIZE/2);function q(a,b){for(var c=0,d=0;d<o.BLKSIZE/2;++d)c+=a[d]*b.ATH.eql_w[d];return c*p}var r=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749],s=[3.3246*3.3246,3.23837*3.23837,9.9500500969,9.0247369744,8.1854926609,7.0440875649,2.46209*2.46209,2.284*2.284,4.4892710641,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,2.4621061921,2.1508568964,1.37074*1.37074,1.31036*1.31036,1.5691069696,1.4555939904,1.16203*1.16203,1.2715945225,1.09428*1.09428,1.0659*1.0659,1.0779838276,1.0382591025,1],t=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],u=[5.5396212496,2.29259*2.29259,4.9868695969,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,2.2499700001,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.2339655056,1.0779838276],v=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1];function w(c,d,e){var f;if(c<0&&(c=0),d<0&&(d=0),c<=0)return d;if(d<=0)return c;if(f=d>c?d/c:c/d,-2<=e&&e<=2)if(f>=a)return c+d;else return(c+d)*v[0|h.FAST_LOG10_X(f,16)];return f<b?c+d:(c<d&&(c=d),c)}function x(a,b,c,d,e){var f,g,h=0,i=0;for(f=g=0;f<o.SBMAX_s;++g,++f){for(var j=a.bo_s[f],k=a.npart_s,l=j<k?j:k;g<l;)m(b[g]>=0),m(c[g]>=0),h+=b[g],i+=c[g],g++;if(a.en[d].s[f][e]=h,a.thm[d].s[f][e]=i,g>=k){++f;break}m(b[g]>=0),m(c[g]>=0);var n=a.PSY.bo_s_weight[f],p=1-n;h=n*b[g],i=n*c[g],a.en[d].s[f][e]+=h,a.thm[d].s[f][e]+=i,h=p*b[g],i=p*c[g]}for(;f<o.SBMAX_s;++f)a.en[d].s[f][e]=0,a.thm[d].s[f][e]=0}function y(a,b,c,d){var e,f,g=0,h=0;for(e=f=0;e<o.SBMAX_l;++f,++e){for(var i=a.bo_l[e],j=a.npart_l,k=i<j?i:j;f<k;)m(b[f]>=0),m(c[f]>=0),g+=b[f],h+=c[f],f++;if(a.en[d].l[e]=g,a.thm[d].l[e]=h,f>=j){++e;break}m(b[f]>=0),m(c[f]>=0);var l=a.PSY.bo_l_weight[e],n=1-l;g=l*b[f],h=l*c[f],a.en[d].l[e]+=g,a.thm[d].l[e]+=h,g=n*b[f],h=n*c[f]}for(;e<o.SBMAX_l;++e)a.en[d].l[e]=0,a.thm[d].l[e]=0}function z(a,b,c){return c>=1?a:c<=0?b:b>0?Math.pow(a/b,c)*b:0}var A=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function B(a,b){for(var c=309.07,d=0;d<o.SBMAX_s-1;d++)for(var e=0;e<3;e++){var f=a.thm.s[d][e];if(m(d<A.length),f>0){var g=f*b,i=a.en.s[d][e];i>g&&(i>1e10*g?c+=23.02585092994046*A[d]:(m(g>0),c+=A[d]*h.FAST_LOG10(i/g)))}}return c}var C=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function D(a,b){for(var c=281.0575,d=0;d<o.SBMAX_l-1;d++){var e=a.thm.l[d];if(m(d<C.length),e>0){var f=e*b,g=a.en.l[d];g>f&&(g>1e10*f?c+=23.02585092994046*C[d]:(m(f>0),c+=C[d]*h.FAST_LOG10(g/f)))}}return c}function E(a,b,c,d,e){var f,g;for(f=g=0;f<a.npart_l;++f){var h,i=0,j=0;for(h=0;h<a.numlines_l[f];++h,++g){var k=b[g];m(k>=0),i+=k,j<k&&(j=k)}c[f]=i,d[f]=j,e[f]=i*a.rnumlines_l[f],m(a.rnumlines_l[f]>=0),m(i>=0),m(c[f]>=0),m(d[f]>=0),m(e[f]>=0)}}function F(a,b,c,d){var e=r.length-1,f=0,g=c[0]+c[f+1];if(m(g>=0),g>0){var h=b[f];h<b[f+1]&&(h=b[f+1]),m(a.numlines_l[f]+a.numlines_l[f+1]-1>0);var i=0|(g=20*(2*h-g)/(g*(a.numlines_l[f]+a.numlines_l[f+1]-1)));i>e&&(i=e),d[f]=i}else d[f]=0;for(f=1;f<a.npart_l-1;f++)if(m((g=c[f-1]+c[f]+c[f+1])>=0),g>0){var h=b[f-1];h<b[f]&&(h=b[f]),h<b[f+1]&&(h=b[f+1]),m(a.numlines_l[f-1]+a.numlines_l[f]+a.numlines_l[f+1]-1>0);var i=0|(g=20*(3*h-g)/(g*(a.numlines_l[f-1]+a.numlines_l[f]+a.numlines_l[f+1]-1)));i>e&&(i=e),d[f]=i}else d[f]=0;if(m(f>0),m(f==a.npart_l-1),m((g=c[f-1]+c[f])>=0),g>0){var h=b[f-1];h<b[f]&&(h=b[f]),m(a.numlines_l[f-1]+a.numlines_l[f]-1>0);var i=0|(g=20*(2*h-g)/(g*(a.numlines_l[f-1]+a.numlines_l[f]-1)));i>e&&(i=e),d[f]=i}else d[f]=0;m(f==a.npart_l-1)}var G=[-865163e-23*2,-.01703172,-674764e-23*2,.0418072,-336639e-22*2,-.0876324,-154175e-22*2,.1863476,-552212e-22*2,-.627638];this.L3psycho_anal_ns=function(f,n,p,v,w,A,C,H,I,J){var K=f.internal_flags,L=k([2,o.BLKSIZE]),M=k([2,3,o.BLKSIZE_s]),N=j(o.CBANDS+1),O=j(o.CBANDS+1),P=j(o.CBANDS+2),Q=l(2),R=l(2),S=k([2,576]),T=l(o.CBANDS+2),U=l(o.CBANDS+2);for(i.fill(U,0),V=K.channels_out,f.mode==MPEGMode.JOINT_STEREO&&(V=4),ab=f.VBR==e.vbr_off?0==K.ResvMax?0:K.ResvSize/K.ResvMax*.5:f.VBR==e.vbr_rh||f.VBR==e.vbr_mtrh||f.VBR==e.vbr_mt?.6:1,W=0;W<K.channels_out;W++){var V,W,X,Y,Z,$,_,aa,ab,ac,ad,ae=n[W],af=p+576-350-21+192;for(m(10==G.length),Y=0;Y<576;Y++){for(Z=0,ac=ae[af+Y+10],ad=0;Z<9;Z+=2)ac+=G[Z]*(ae[af+Y+Z]+ae[af+Y+21-Z]),ad+=G[Z+1]*(ae[af+Y+Z+1]+ae[af+Y+21-Z-1]);S[W][Y]=ac+ad}w[v][W].en.assign(K.en[W]),w[v][W].thm.assign(K.thm[W]),V>2&&(A[v][W].en.assign(K.en[W+2]),A[v][W].thm.assign(K.thm[W+2]))}for(W=0;W<V;W++){var ag,ah,ai,aj,ak,al,am=j(12),an=[0,0,0,0],ao=j(12),ap=1,aq=j(o.CBANDS),ar=j(o.CBANDS),as=[0,0,0,0],at=j(o.HBLKSIZE),au=k([3,o.HBLKSIZE_s]);for(m(K.npart_s<=o.CBANDS),m(K.npart_l<=o.CBANDS),Y=0;Y<3;Y++)am[Y]=K.nsPsy.last_en_subshort[W][Y+6],m(K.nsPsy.last_en_subshort[W][Y+4]>0),ao[Y]=am[Y]/K.nsPsy.last_en_subshort[W][Y+4],an[0]+=am[Y];if(2==W)for(Y=0;Y<576;Y++)ah=S[0][Y],ai=S[1][Y],S[0][Y]=ah+ai,S[1][Y]=ah-ai;var av=S[1&W],aw=0;for(Y=0;Y<9;Y++){for(var ax=aw+64,ay=1;aw<ax;aw++)ay<Math.abs(av[aw])&&(ay=Math.abs(av[aw]));K.nsPsy.last_en_subshort[W][Y]=am[Y+3]=ay,an[1+Y/3]+=ay,ay>am[Y+3-2]?(m(am[Y+3-2]>0),ay/=am[Y+3-2]):am[Y+3-2]>10*ay?(m(ay>0),ay=am[Y+3-2]/(10*ay)):ay=0,ao[Y+3]=ay}if(f.analysis){var az=ao[0];for(Y=1;Y<12;Y++)az<ao[Y]&&(az=ao[Y]);K.pinfo.ers[v][W]=K.pinfo.ers_save[W],K.pinfo.ers_save[W]=az}for(Y=0,ag=3==W?K.nsPsy.attackthre_s:K.nsPsy.attackthre;Y<12;Y++)0==as[Y/3]&&ao[Y]>ag&&(as[Y/3]=Y%3+1);for(Y=1;Y<4;Y++)an[Y-1]>an[Y]?(m(an[Y]>0),aj=an[Y-1]/an[Y]):(m(an[Y-1]>0),aj=an[Y]/an[Y-1]),aj<1.7&&(as[Y]=0,1==Y&&(as[0]=0));for(0!=as[0]&&0!=K.nsPsy.lastAttacks[W]&&(as[0]=0),(3==K.nsPsy.lastAttacks[W]||as[0]+as[1]+as[2]+as[3]!=0)&&(ap=0,0!=as[1]&&0!=as[0]&&(as[1]=0),0!=as[2]&&0!=as[1]&&(as[2]=0),0!=as[3]&&0!=as[2]&&(as[3]=0)),W<2?R[W]=ap:0==ap&&(R[0]=R[1]=0),I[W]=K.tot_ener[W],!function(a,b,c,e,f,g,i,j,k,l,m){var n=a.internal_flags;if(k<2)d.fft_long(n,e[f],k,l,m),d.fft_short(n,g[i],k,l,m);else if(2==k){for(var p=o.BLKSIZE-1;p>=0;--p){var r=e[f+0][p],s=e[f+1][p];e[f+0][p]=(r+s)*h.SQRT2*.5,e[f+1][p]=(r-s)*h.SQRT2*.5}for(var t=2;t>=0;--t)for(var p=o.BLKSIZE_s-1;p>=0;--p){var r=g[i+0][t][p],s=g[i+1][t][p];g[i+0][t][p]=(r+s)*h.SQRT2*.5,g[i+1][t][p]=(r-s)*h.SQRT2*.5}}b[0]=e[f+0][0],b[0]*=b[0];for(var p=o.BLKSIZE/2-1;p>=0;--p){var u=e[f+0][o.BLKSIZE/2-p],v=e[f+0][o.BLKSIZE/2+p];b[o.BLKSIZE/2-p]=(u*u+v*v)*.5}for(var t=2;t>=0;--t){c[t][0]=g[i+0][t][0],c[t][0]*=c[t][0];for(var p=o.BLKSIZE_s/2-1;p>=0;--p){var u=g[i+0][t][o.BLKSIZE_s/2-p],v=g[i+0][t][o.BLKSIZE_s/2+p];c[t][o.BLKSIZE_s/2-p]=(u*u+v*v)*.5}}for(var w=0,p=11;p<o.HBLKSIZE;p++)w+=b[p];if(n.tot_ener[k]=w,a.analysis){for(var p=0;p<o.HBLKSIZE;p++)n.pinfo.energy[j][k][p]=n.pinfo.energy_save[k][p],n.pinfo.energy_save[k][p]=b[p];n.pinfo.pe[j][k]=n.pe[k]}2==a.athaa_loudapprox&&k<2&&(n.loudness_sq[j][k]=n.loudness_sq_save[k],n.loudness_sq_save[k]=q(b,n))}(f,at,au,L,1&W,M,1&W,v,W,n,p),E(K,at,N,aq,ar),F(K,aq,ar,T),aa=0;aa<3;aa++)for(!function(a,b,c,d,e,f){var g,h,i=a.internal_flags;for(h=g=0;h<i.npart_s;++h){for(var j=0,k=0,l=i.numlines_s[h],n=0;n<l;++n,++g){var p=b[f][g];j+=p,k<p&&(k=p)}c[h]=j}for(m(h==i.npart_s),m(129==g),g=h=0;h<i.npart_s;h++){var q=i.s3ind_s[h][0],r=i.s3_ss[g++]*c[q];for(++q;q<=i.s3ind_s[h][1];)r+=i.s3_ss[g]*c[q],++g,++q;var s=2*i.nb_s1[e][h];if(d[h]=Math.min(r,s),i.blocktype_old[1&e]==o.SHORT_TYPE){var s=16*i.nb_s2[e][h],t=d[h];d[h]=Math.min(s,t)}i.nb_s2[e][h]=i.nb_s1[e][h],i.nb_s1[e][h]=r,m(d[h]>=0)}for(;h<=o.CBANDS;++h)c[h]=0,d[h]=0}(f,au,O,P,W,aa),x(K,O,P,W,aa),_=0;_<o.SBMAX_s;_++){if(al=.8*K.thm[W].s[_][aa],as[aa]>=2||1==as[aa+1]){var aA=0!=aa?aa-1:2,ay=z(K.thm[W].s[_][aA],al,.6*ab);al=Math.min(al,ay)}if(1==as[aa]){var aA=0!=aa?aa-1:2,ay=z(K.thm[W].s[_][aA],al,.3*ab);al=Math.min(al,ay)}else if(0!=aa&&3==as[aa-1]||0==aa&&3==K.nsPsy.lastAttacks[W]){var aA=2!=aa?aa+1:0,ay=z(K.thm[W].s[_][aA],al,.3*ab);al=Math.min(al,ay)}ak=am[3*aa+3]+am[3*aa+4]+am[3*aa+5],6*am[3*aa+5]<ak&&(al*=.5,6*am[3*aa+4]<ak&&(al*=.5)),K.thm[W].s[_][aa]=al}for(X=0,K.nsPsy.lastAttacks[W]=as[2],$=0;X<K.npart_l;X++){for(var aB=K.s3ind[X][0],aC=N[aB]*r[T[aB]],aD=K.s3_ll[$++]*aC;++aB<=K.s3ind[X][1];)aC=N[aB]*r[T[aB]],aD=function(d,e,f,g,i,j){if(e>d)if(!(e<d*b))return d+e;else k=e/d;else{if(d>=e*b)return d+e;k=d/e}if(m(d>=0),m(e>=0),d+=e,g+3<=6){if(k>=a)return d;var k,l,n,o=0|h.FAST_LOG10_X(k,16);return d*t[o]}var o=0|h.FAST_LOG10_X(k,16);return(m((e=i.ATH.cb_l[f]*i.ATH.adjust)>=0),d<c*e)?d>e?(l=1,o<=13&&(l=u[o]),n=h.FAST_LOG10_X(d/e,10/15),d*((s[o]-l)*n+l)):o>13?d:d*u[o]:d*s[o]}(aD,K.s3_ll[$++]*aC,aB,aB-X,K,0);aD*=.158489319246111,K.blocktype_old[1&W]==o.SHORT_TYPE?P[X]=aD:P[X]=z(Math.min(aD,Math.min(2*K.nb_1[W][X],16*K.nb_2[W][X])),aD,ab),K.nb_2[W][X]=K.nb_1[W][X],K.nb_1[W][X]=aD}for(;X<=o.CBANDS;++X)N[X]=0,P[X]=0;y(K,N,P,W)}(f.mode==MPEGMode.STEREO||f.mode==MPEGMode.JOINT_STEREO)&&f.interChRatio>0&&function(a,b){var c=a.internal_flags;if(c.channels_out>1){for(var d=0;d<o.SBMAX_l;d++){var e=c.thm[0].l[d],f=c.thm[1].l[d];c.thm[0].l[d]+=f*b,c.thm[1].l[d]+=e*b}for(var d=0;d<o.SBMAX_s;d++)for(var g=0;g<3;g++){var e=c.thm[0].s[d][g],f=c.thm[1].s[d][g];c.thm[0].s[d][g]+=f*b,c.thm[1].s[d][g]+=e*b}}}(f,f.interChRatio),f.mode==MPEGMode.JOINT_STEREO&&(!function(a){for(var b=0;b<o.SBMAX_l;b++)if(!(a.thm[0].l[b]>1.58*a.thm[1].l[b])&&!(a.thm[1].l[b]>1.58*a.thm[0].l[b])){var c=a.mld_l[b]*a.en[3].l[b],d=Math.max(a.thm[2].l[b],Math.min(a.thm[3].l[b],c));c=a.mld_l[b]*a.en[2].l[b];var e=Math.max(a.thm[3].l[b],Math.min(a.thm[2].l[b],c));a.thm[2].l[b]=d,a.thm[3].l[b]=e}for(var b=0;b<o.SBMAX_s;b++)for(var f=0;f<3;f++)if(!(a.thm[0].s[b][f]>1.58*a.thm[1].s[b][f])&&!(a.thm[1].s[b][f]>1.58*a.thm[0].s[b][f])){var c=a.mld_s[b]*a.en[3].s[b][f],d=Math.max(a.thm[2].s[b][f],Math.min(a.thm[3].s[b][f],c));c=a.mld_s[b]*a.en[2].s[b][f];var e=Math.max(a.thm[3].s[b][f],Math.min(a.thm[2].s[b][f],c));a.thm[2].s[b][f]=d,a.thm[3].s[b][f]=e}}(K),Math.abs(aG=f.msfix)>0&&function(a,b,c){var d=b,e=Math.pow(10,c);b*=2,d*=2;for(var f=0;f<o.SBMAX_l;f++){if(k=a.ATH.cb_l[a.bm_l[f]]*e,h=Math.min(Math.max(a.thm[0].l[f],k),Math.max(a.thm[1].l[f],k)),h*b<(i=Math.max(a.thm[2].l[f],k))+(j=Math.max(a.thm[3].l[f],k))){var g=h*d/(i+j);m((i*=g)+(j*=g)>0)}a.thm[2].l[f]=Math.min(i,a.thm[2].l[f]),a.thm[3].l[f]=Math.min(j,a.thm[3].l[f])}e*=o.BLKSIZE_s/o.BLKSIZE;for(var f=0;f<o.SBMAX_s;f++)for(var h,i,j,k,l=0;l<3;l++){if(k=a.ATH.cb_s[a.bm_s[f]]*e,h=Math.min(Math.max(a.thm[0].s[f][l],k),Math.max(a.thm[1].s[f][l],k)),h*b<(i=Math.max(a.thm[2].s[f][l],k))+(j=Math.max(a.thm[3].s[f][l],k))){var g=h*b/(i+j);m((i*=g)+(j*=g)>0)}a.thm[2].s[f][l]=Math.min(a.thm[2].s[f][l],i),a.thm[3].s[f][l]=Math.min(a.thm[3].s[f][l],j)}}(K,aG,f.ATHlower*K.ATH.adjust));var aE=f.internal_flags;f.short_blocks==g.short_block_coupled&&(0==R[0]||0==R[1])&&(R[0]=R[1]=0);for(var aF=0;aF<aE.channels_out;aF++)Q[aF]=o.NORM_TYPE,f.short_blocks==g.short_block_dispensed&&(R[aF]=1),f.short_blocks==g.short_block_forced&&(R[aF]=0),0!=R[aF]?(m(aE.blocktype_old[aF]!=o.START_TYPE),aE.blocktype_old[aF]==o.SHORT_TYPE&&(Q[aF]=o.STOP_TYPE)):(Q[aF]=o.SHORT_TYPE,aE.blocktype_old[aF]==o.NORM_TYPE&&(aE.blocktype_old[aF]=o.START_TYPE),aE.blocktype_old[aF]==o.STOP_TYPE&&(aE.blocktype_old[aF]=o.SHORT_TYPE)),J[aF]=aE.blocktype_old[aF],aE.blocktype_old[aF]=Q[aF];for(W=0;W<V;W++){var aG,aH,aI,aJ,aK=0;W>1?(aH=H,aK=-2,aI=o.NORM_TYPE,(J[0]==o.SHORT_TYPE||J[1]==o.SHORT_TYPE)&&(aI=o.SHORT_TYPE),aJ=A[v][W-2]):(aH=C,aK=0,aI=J[W],aJ=w[v][W]),aI==o.SHORT_TYPE?aH[aK+W]=B(aJ,K.masking_lower):aH[aK+W]=D(aJ,K.masking_lower),f.analysis&&(K.pinfo.pe[v][W]=aH[aK+W])}return 0};var H=[-865163e-23*2,-.01703172,-674764e-23*2,.0418072,-336639e-22*2,-.0876324,-154175e-22*2,.1863476,-552212e-22*2,-.627638];function I(a,b,c,d,e,f,g){for(var h=2*f,i=f>0?Math.pow(10,e):1,j=0;j<g;++j){var k=a[2][j],l=a[3][j],n=b[0][j],o=b[1][j],p=b[2][j],q=b[3][j];if(n<=1.58*o&&o<=1.58*n){var r=c[j]*l,s=c[j]*k;u=Math.max(p,Math.min(q,r)),t=Math.max(q,Math.min(p,s))}else u=p,t=q;if(f>0){var t,u,v,w,x=d[j]*i;if(v=Math.min(Math.max(n,x),Math.max(o,x)),(w=(p=Math.max(u,x))+(q=Math.max(t,x)))>0&&v*h<w){var y=v*h/w;p*=y,q*=y,m(w>0)}u=Math.min(p,u),t=Math.min(q,t)}u>k&&(u=k),t>l&&(t=l),b[2][j]=u,b[3][j]=t}}function J(a,b){var c;return(c=a>=0?-(27*a):a*b)<=-72?0:Math.exp(.2302585093*c)}function K(a){return a<0&&(a=0),13*Math.atan(.76*(a*=.001))+3.5*Math.atan(a*a/56.25)}function L(a,b,c,d,e,f,g,h,i,k,n,p){var q=j(o.CBANDS+1),r=h/(p>15?1152:384),s=l(o.HBLKSIZE);h/=i;var t=0,u=0;for(w=0;w<o.CBANDS;w++){for(x=K(h*t),q[w]=h*t,y=t;K(h*y)-x<.34&&y<=i/2;y++);for(a[w]=y-t,u=w+1;t<y;)m(t<o.HBLKSIZE),s[t++]=w;if(t>i/2){t=i/2,++w;break}}m(w<o.CBANDS),q[w]=h*t;for(var v=0;v<p;v++){B=k[v],C=k[v+1],(z=0|Math.floor(.5+n*(B-.5)))<0&&(z=0),(A=0|Math.floor(.5+n*(C-.5)))>i/2&&(A=i/2),c[v]=(s[z]+s[A])/2,b[v]=s[A];var w,x,y,z,A,B,C,D,E=r*C;g[v]=(E-q[b[v]])/(q[b[v]+1]-q[b[v]]),g[v]<0?g[v]=0:g[v]>1&&(g[v]=1),D=Math.min(D=K(h*k[v]*n),15.5)/15.5,f[v]=Math.pow(10,1.25*(1-Math.cos(Math.PI*D))-2.5)}t=0;for(var F=0;F<u;F++){var x,G,H=a[F];x=K(h*t),G=K(h*(t+H-1)),d[F]=.5*(x+G),x=K(h*(t-.5)),G=K(h*(t+H-.5)),e[F]=G-x,t+=H}return u}function M(a,b,c,d,e,f){var g,h=k([o.CBANDS,o.CBANDS]),i=0;if(f)for(var l=0;l<b;l++)for(g=0;g<b;g++){var m=function(a){var b,c,d,e;return((b=a)>=0?b*=3:b*=1.5,c=b>=.5&&b<=2.5?8*((e=b-.5)*e-2*e):0,b+=.474,(d=15.811389+7.5*b-17.5*Math.sqrt(1+b*b))<=-60)?0:b=Math.exp((c+d)*.2302585093)/.6609193}(c[l]-c[g])*d[g];h[l][g]=m*e[l]}else for(g=0;g<b;g++)for(var n=15+Math.min(21/c[g],12),p=function(a){var b,c,d=0,e=0,f=0;for(f=0;J(f,a)>1e-20;f-=1);for(b=f,c=0;Math.abs(c-b)>1e-12;)J(f=(c+b)/2,a)>0?c=f:b=f;d=b;var b,c,f=0;for(f=0;J(f,a)>1e-20;f+=1);for(b=0,c=f;Math.abs(c-b)>1e-12;)J(f=(c+b)/2,a)>0?b=f:c=f;e=c;var g,h=0;for(g=0;g<=1e3;++g){var f=d+g*(e-d)/1e3;h+=J(f,a)}return 1001/(h*(e-d))}(n),l=0;l<b;l++){var m=p*J(c[l]-c[g],n)*d[g];h[l][g]=m*e[l]}for(var l=0;l<b;l++){for(g=0;g<b&&!(h[l][g]>0);g++);for(a[l][0]=g,g=b-1;g>0&&!(h[l][g]>0);g--);a[l][1]=g,i+=a[l][1]-a[l][0]+1}for(var q=j(i),r=0,l=0;l<b;l++)for(g=a[l][0];g<=a[l][1];g++)q[r++]=h[l][g];return q}function N(a){var b=K(a);return Math.pow(10,1.25*(1-Math.cos(Math.PI*(b=Math.min(b,15.5)/15.5)))-2.5)}function O(a,b){return a<-.3&&(a=3410),a/=1e3,3.64*Math.pow(a=Math.max(.1,a),-.8)-6.8*Math.exp(-.6*Math.pow(a-3.4,2))+6*Math.exp(-.15*Math.pow(a-8.7,2))+(.6+.04*b)*.001*Math.pow(a,4)}this.L3psycho_anal_vbr=function(a,b,c,e,f,i,n,p,s,t){var u,v,A,C,G=a.internal_flags,J=j(o.HBLKSIZE),K=k([3,o.HBLKSIZE_s]),L=k([2,o.BLKSIZE]),M=k([2,3,o.BLKSIZE_s]),N=k([4,o.CBANDS]),O=k([4,o.CBANDS]),P=k([4,3]),Q=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],R=l(2),S=a.mode==MPEGMode.JOINT_STEREO?4:G.channels_out;!function(a,b,c,d,e,f,g,h,i,l){for(var n=k([2,576]),o=a.internal_flags,p=o.channels_out,q=a.mode==MPEGMode.JOINT_STEREO?4:p,r=0;r<p;r++){firbuf=b[r];var s,t,u=c+576-350-21+192;m(10==H.length);for(var v=0;v<576;v++){s=firbuf[u+v+10],t=0;for(var w=0;w<9;w+=2)s+=H[w]*(firbuf[u+v+w]+firbuf[u+v+21-w]),t+=H[w+1]*(firbuf[u+v+w+1]+firbuf[u+v+21-w-1]);n[r][v]=s+t}e[d][r].en.assign(o.en[r]),e[d][r].thm.assign(o.thm[r]),q>2&&(f[d][r].en.assign(o.en[r+2]),f[d][r].thm.assign(o.thm[r+2]))}for(var r=0;r<q;r++){var x=j(12),y=j(12),z=[0,0,0,0],A=n[1&r],B=0,C=3==r?o.nsPsy.attackthre_s:o.nsPsy.attackthre,D=1;if(2==r)for(var v=0,w=576;w>0;++v,--w){var E=n[0][v],F=n[1][v];n[0][v]=E+F,n[1][v]=E-F}for(var v=0;v<3;v++)y[v]=o.nsPsy.last_en_subshort[r][v+6],m(o.nsPsy.last_en_subshort[r][v+4]>0),x[v]=y[v]/o.nsPsy.last_en_subshort[r][v+4],z[0]+=y[v];for(var v=0;v<9;v++){for(var G=B+64,I=1;B<G;B++)I<Math.abs(A[B])&&(I=Math.abs(A[B]));o.nsPsy.last_en_subshort[r][v]=y[v+3]=I,z[1+v/3]+=I,I>y[v+3-2]?(m(y[v+3-2]>0),I/=y[v+3-2]):y[v+3-2]>10*I?(m(I>0),I=y[v+3-2]/(10*I)):I=0,x[v+3]=I}for(var v=0;v<3;++v){var J=y[3*v+3]+y[3*v+4]+y[3*v+5],K=1;6*y[3*v+5]<J&&(K*=.5,6*y[3*v+4]<J&&(K*=.5)),h[r][v]=K}if(a.analysis){for(var L=x[0],v=1;v<12;v++)L<x[v]&&(L=x[v]);o.pinfo.ers[d][r]=o.pinfo.ers_save[r],o.pinfo.ers_save[r]=L}for(var v=0;v<12;v++)0==i[r][v/3]&&x[v]>C&&(i[r][v/3]=v%3+1);for(var v=1;v<4;v++){var M=z[v-1],N=z[v];4e4>Math.max(M,N)&&M<1.7*N&&N<1.7*M&&(1==v&&i[r][0]<=i[r][v]&&(i[r][0]=0),i[r][v]=0)}i[r][0]<=o.nsPsy.lastAttacks[r]&&(i[r][0]=0),(3==o.nsPsy.lastAttacks[r]||i[r][0]+i[r][1]+i[r][2]+i[r][3]!=0)&&(D=0,0!=i[r][1]&&0!=i[r][0]&&(i[r][1]=0),0!=i[r][2]&&0!=i[r][1]&&(i[r][2]=0),0!=i[r][3]&&0!=i[r][2]&&(i[r][3]=0)),r<2?l[r]=D:0==D&&(l[0]=l[1]=0),g[r]=o.tot_ener[r]}}(a,b,c,e,f,i,s,P,Q,R);var T=a.internal_flags;a.short_blocks==g.short_block_coupled&&(0==R[0]||0==R[1])&&(R[0]=R[1]=0);for(var U=0;U<T.channels_out;U++)a.short_blocks==g.short_block_dispensed&&(R[U]=1),a.short_blocks==g.short_block_forced&&(R[U]=0);for(var V=0;V<S;V++){var W=1&V;if(!function(a,b,c,e,f,g,i,j){var k=a.internal_flags;if(e<2)d.fft_long(k,i[j],e,b,c);else if(2==e)for(var l=o.BLKSIZE-1;l>=0;--l){var m=i[j+0][l],n=i[j+1][l];i[j+0][l]=(m+n)*h.SQRT2*.5,i[j+1][l]=(m-n)*h.SQRT2*.5}g[0]=i[j+0][0],g[0]*=g[0];for(var l=o.BLKSIZE/2-1;l>=0;--l){var p=i[j+0][o.BLKSIZE/2-l],q=i[j+0][o.BLKSIZE/2+l];g[o.BLKSIZE/2-l]=(p*p+q*q)*.5}for(var r=0,l=11;l<o.HBLKSIZE;l++)r+=g[l];if(k.tot_ener[e]=r,a.analysis){for(var l=0;l<o.HBLKSIZE;l++)k.pinfo.energy[f][e][l]=k.pinfo.energy_save[e][l],k.pinfo.energy_save[e][l]=g[l];k.pinfo.pe[f][e]=k.pe[e]}}(a,b,c,V,e,J,L,W),!function(a,b,c,d){var e=a.internal_flags;2==a.athaa_loudapprox&&c<2&&(e.loudness_sq[b][c]=e.loudness_sq_save[c],e.loudness_sq_save[c]=q(d,e))}(a,e,V,J),0!=R[W])!function(a,b,c,d,e){var f=j(o.CBANDS),g=j(o.CBANDS),h=l(o.CBANDS+2);E(a,b,c,f,g),F(a,f,g,h);var i=0;for(t=0;t<a.npart_l;t++){var k=a.s3ind[t][0],n=a.s3ind[t][1],p=0,q=0;for(p=h[k],q+=1,v=a.s3_ll[i]*c[k]*r[h[k]],++i,++k;k<=n;)p+=h[k],q+=1,v=y=w(v,u=a.s3_ll[i]*c[k]*r[h[k]],k-t),++i,++k;if(v*=x=.5*r[p=(1+2*p)/(2*q)],a.blocktype_old[1&e]==o.SHORT_TYPE){var s=2*a.nb_1[e][t];s>0?d[t]=Math.min(v,s):d[t]=Math.min(v,.3*c[t])}else{var t,u,v,x,y,s,z=16*a.nb_2[e][t],A=2*a.nb_1[e][t];z<=0&&(z=v),A<=0&&(A=v),s=a.blocktype_old[1&e]==o.NORM_TYPE?Math.min(A,z):A,d[t]=Math.min(v,s)}a.nb_2[e][t]=a.nb_1[e][t],a.nb_1[e][t]=v,u=f[t]*a.minval_l[t]*x,d[t]>u&&(d[t]=u),a.masking_lower>1&&(d[t]*=a.masking_lower),d[t]>c[t]&&(d[t]=c[t]),a.masking_lower<1&&(d[t]*=a.masking_lower),m(d[t]>=0)}for(;t<o.CBANDS;++t)c[t]=0,d[t]=0}(G,J,N[V],O[V],V);else for(var X=V,Y=0;Y<G.npart_l;Y++)G.nb_2[X][Y]=G.nb_1[X][Y],G.nb_1[X][Y]=0}R[0]+R[1]==2&&a.mode==MPEGMode.JOINT_STEREO&&I(N,O,G.mld_cb_l,G.ATH.cb_l,a.ATHlower*G.ATH.adjust,a.msfix,G.npart_l);for(var V=0;V<S;V++){var W=1&V;0!=R[W]&&y(G,N[V],O[V],V)}for(var Z=0;Z<3;Z++){for(var V=0;V<S;++V){var W=1&V;if(0!=R[W]){var $=V;if(0==Z)for(var _=0;_<G.npart_s;_++)G.nb_s2[$][_]=G.nb_s1[$][_],G.nb_s1[$][_]=0}else!function(a,b,c,e,f,g,i,j){var k=a.internal_flags;if(0==f&&e<2&&d.fft_short(k,i[j],e,b,c),2==e)for(var l=o.BLKSIZE_s-1;l>=0;--l){var m=i[j+0][f][l],n=i[j+1][f][l];i[j+0][f][l]=(m+n)*h.SQRT2*.5,i[j+1][f][l]=(m-n)*h.SQRT2*.5}g[f][0]=i[j+0][f][0],g[f][0]*=g[f][0];for(var l=o.BLKSIZE_s/2-1;l>=0;--l){var p=i[j+0][f][o.BLKSIZE_s/2-l],q=i[j+0][f][o.BLKSIZE_s/2+l];g[f][o.BLKSIZE_s/2-l]=(p*p+q*q)*.5}}(a,b,c,V,Z,K,M,W),function(a,b,c,d,e,f){var g=a.internal_flags,h=new float[o.CBANDS],i=j(o.CBANDS),k=new int[o.CBANDS];for(u=t=0;u<g.npart_s;++u){var l=0,n=0,p=g.numlines_s[u];for(s=0;s<p;++s,++t){var q=b[f][t];l+=q,n<q&&(n=q)}c[u]=l,m(l>=0),h[u]=n,m(p>0),i[u]=l/p,m(i[u]>=0)}for(m(u==g.npart_s),m(129==t);u<o.CBANDS;++u)h[u]=0,i[u]=0;for(!function(a,b,c,d){var e=r.length-1,f=0,g=c[0]+c[f+1];if(m(g>=0),g>0){var h=b[f];h<b[f+1]&&(h=b[f+1]),m(a.numlines_s[f]+a.numlines_s[f+1]-1>0);var i=0|(g=20*(2*h-g)/(g*(a.numlines_s[f]+a.numlines_s[f+1]-1)));i>e&&(i=e),d[f]=i}else d[f]=0;for(f=1;f<a.npart_s-1;f++)if(g=c[f-1]+c[f]+c[f+1],m(f+1<a.npart_s),m(g>=0),g>0){var h=b[f-1];h<b[f]&&(h=b[f]),h<b[f+1]&&(h=b[f+1]),m(a.numlines_s[f-1]+a.numlines_s[f]+a.numlines_s[f+1]-1>0);var i=0|(g=20*(3*h-g)/(g*(a.numlines_s[f-1]+a.numlines_s[f]+a.numlines_s[f+1]-1)));i>e&&(i=e),d[f]=i}else d[f]=0;if(m(f>0),m(f==a.npart_s-1),m((g=c[f-1]+c[f])>=0),g>0){var h=b[f-1];h<b[f]&&(h=b[f]),m(a.numlines_s[f-1]+a.numlines_s[f]-1>0);var i=0|(g=20*(2*h-g)/(g*(a.numlines_s[f-1]+a.numlines_s[f]-1)));i>e&&(i=e),d[f]=i}else d[f]=0;m(f==a.npart_s-1)}(g,h,i,k),t=u=0;u<g.npart_s;u++){var s,t,u,v,x,y,z,A,B=g.s3ind_s[u][0],C=g.s3ind_s[u][1];for(v=k[B],x=1,z=g.s3_ss[t]*c[B]*r[k[B]],++t,++B;B<=C;)v+=k[B],x+=1,z=w(z,y=g.s3_ss[t]*c[B]*r[k[B]],B-u),++t,++B;z*=A=.5*r[v=(1+2*v)/(2*x)],d[u]=z,g.nb_s2[e][u]=g.nb_s1[e][u],g.nb_s1[e][u]=z,y=h[u]*g.minval_s[u]*A,d[u]>y&&(d[u]=y),g.masking_lower>1&&(d[u]*=g.masking_lower),d[u]>c[u]&&(d[u]=c[u]),g.masking_lower<1&&(d[u]*=g.masking_lower),m(d[u]>=0)}for(;u<o.CBANDS;++u)c[u]=0,d[u]=0}(a,K,N[V],O[V],V,Z)}R[0]+R[1]==0&&a.mode==MPEGMode.JOINT_STEREO&&I(N,O,G.mld_cb_s,G.ATH.cb_s,a.ATHlower*G.ATH.adjust,a.msfix,G.npart_s);for(var V=0;V<S;++V){var W=1&V;0==R[W]&&x(G,N[V],O[V],V,Z)}}for(var V=0;V<S;V++){var W=1&V;if(0==R[W])for(var aa=0;aa<o.SBMAX_s;aa++){for(var ab=j(3),Z=0;Z<3;Z++){var ac=G.thm[V].s[aa][Z];if(ac*=.8,Q[V][Z]>=2||1==Q[V][Z+1]){var ad=0!=Z?Z-1:2,ae=z(G.thm[V].s[aa][ad],ac,.36);ac=Math.min(ac,ae)}else if(1==Q[V][Z]){var ad=0!=Z?Z-1:2,ae=z(G.thm[V].s[aa][ad],ac,.18);ac=Math.min(ac,ae)}else if(0!=Z&&3==Q[V][Z-1]||0==Z&&3==G.nsPsy.lastAttacks[V]){var ad=2!=Z?Z+1:0,ae=z(G.thm[V].s[aa][ad],ac,.18);ac=Math.min(ac,ae)}ac*=P[V][Z],ab[Z]=ac}for(var Z=0;Z<3;Z++)G.thm[V].s[aa][Z]=ab[Z]}}for(var V=0;V<S;V++)G.nsPsy.lastAttacks[V]=Q[V][2];for(var af=a.internal_flags,ag=0;ag<af.channels_out;ag++){var ah=o.NORM_TYPE;0!=R[ag]?(m(af.blocktype_old[ag]!=o.START_TYPE),af.blocktype_old[ag]==o.SHORT_TYPE&&(ah=o.STOP_TYPE)):(ah=o.SHORT_TYPE,af.blocktype_old[ag]==o.NORM_TYPE&&(af.blocktype_old[ag]=o.START_TYPE),af.blocktype_old[ag]==o.STOP_TYPE&&(af.blocktype_old[ag]=o.SHORT_TYPE)),t[ag]=af.blocktype_old[ag],af.blocktype_old[ag]=ah}for(var V=0;V<S;V++)V>1?(u=p,v=-2,A=o.NORM_TYPE,(t[0]==o.SHORT_TYPE||t[1]==o.SHORT_TYPE)&&(A=o.SHORT_TYPE),C=i[e][V-2]):(u=n,v=0,A=t[V],C=f[e][V]),A==o.SHORT_TYPE?u[v+V]=B(C,G.masking_lower):u[v+V]=D(C,G.masking_lower),a.analysis&&(G.pinfo.pe[e][V]=u[v+V]);return 0},this.psymodel_init=function(g){var h=g.internal_flags,i=!0,k=13,l=0,n=0,p=-8.25,q=-4.5,r=j(o.CBANDS),s=j(o.CBANDS),t=j(o.CBANDS),u=g.out_samplerate;switch(g.experimentalZ){default:case 0:i=!0;break;case 1:i=g.VBR!=e.vbr_mtrh&&g.VBR!=e.vbr_mt;break;case 2:i=!1;break;case 3:k=8,l=-1.75,n=-.0125,p=-8.25,q=-2.25}for(z=0,h.ms_ener_ratio_old=.25,h.blocktype_old[0]=h.blocktype_old[1]=o.NORM_TYPE;z<4;++z){for(var v=0;v<o.CBANDS;++v)h.nb_1[z][v]=1e20,h.nb_2[z][v]=1e20,h.nb_s1[z][v]=h.nb_s2[z][v]=1;for(var w=0;w<o.SBMAX_l;w++)h.en[z].l[w]=1e20,h.thm[z].l[w]=1e20;for(var v=0;v<3;++v){for(var w=0;w<o.SBMAX_s;w++)h.en[z].s[w][v]=1e20,h.thm[z].s[w][v]=1e20;h.nsPsy.lastAttacks[z]=0}for(var v=0;v<9;v++)h.nsPsy.last_en_subshort[z][v]=10}for(h.loudness_sq_save[0]=h.loudness_sq_save[1]=0,h.npart_l=L(h.numlines_l,h.bo_l,h.bm_l,r,s,h.mld_l,h.PSY.bo_l_weight,u,o.BLKSIZE,h.scalefac_band.l,o.BLKSIZE/1152,o.SBMAX_l),m(h.npart_l<o.CBANDS),z=0;z<h.npart_l;z++){var x=l;r[z]>=k&&(x=n*(r[z]-k)/(24-k)+l*(24-r[z])/(24-k)),t[z]=Math.pow(10,x/10),h.numlines_l[z]>0?h.rnumlines_l[z]=1/h.numlines_l[z]:h.rnumlines_l[z]=0}h.s3_ll=M(h.s3ind,h.npart_l,r,s,t,i);var v=0;for(z=0;z<h.npart_l;z++){A=f.MAX_VALUE;for(var y=0;y<h.numlines_l[z];y++,v++){var z,A,B,C=u*v/(1e3*o.BLKSIZE);A>(B=Math.pow(10,.1*(B=this.ATHformula(1e3*C,g)-20))*h.numlines_l[z])&&(A=B)}h.ATH.cb_l[z]=A,(A=-20+20*r[z]/10)>6&&(A=100),A<-15&&(A=-15),A-=8,h.minval_l[z]=Math.pow(10,A/10)*h.numlines_l[z]}for(h.npart_s=L(h.numlines_s,h.bo_s,h.bm_s,r,s,h.mld_s,h.PSY.bo_s_weight,u,o.BLKSIZE_s,h.scalefac_band.s,o.BLKSIZE_s/384,o.SBMAX_s),m(h.npart_s<o.CBANDS),v=0,z=0;z<h.npart_s;z++){var x=p;r[z]>=k&&(x=q*(r[z]-k)/(24-k)+p*(24-r[z])/(24-k)),t[z]=Math.pow(10,x/10),A=f.MAX_VALUE;for(var y=0;y<h.numlines_s[z];y++,v++){var A,B,C=u*v/(1e3*o.BLKSIZE_s);A>(B=Math.pow(10,.1*(B=this.ATHformula(1e3*C,g)-20))*h.numlines_s[z])&&(A=B)}h.ATH.cb_s[z]=A,A=-7+7*r[z]/12,r[z]>12&&(A*=1+3.1*Math.log(1+A)),r[z]<12&&(A*=1+2.3*Math.log(1-A)),A<-15&&(A=-15),A-=8,h.minval_s[z]=Math.pow(10,A/10)*h.numlines_s[z]}h.s3_ss=M(h.s3ind_s,h.npart_s,r,s,t,i),a=3.651741272548377,b=31.622776601683793,c=31.622776601683793,d.init_fft(h),h.decay=Math.exp(-2.302585092994046/(.01*u/192)),F=3.5,(2&g.exp_nspsytune)!=0&&(F=1),Math.abs(g.msfix)>0&&(F=g.msfix),g.msfix=F;for(var D=0;D<h.npart_l;D++)h.s3ind[D][1]>h.npart_l-1&&(h.s3ind[D][1]=h.npart_l-1);var E=576*h.mode_gr/u;if(h.ATH.decay=Math.pow(10,-1.2*E),h.ATH.adjust=.01,h.ATH.adjustLimit=1,m(h.bo_l[o.SBMAX_l-1]<=h.npart_l),m(h.bo_s[o.SBMAX_s-1]<=h.npart_s),-1!=g.ATHtype){var F,C,G=g.out_samplerate/o.BLKSIZE,H=0;for(z=0,C=0;z<o.BLKSIZE/2;++z)C+=G,h.ATH.eql_w[z]=1/Math.pow(10,this.ATHformula(C,g)/10),H+=h.ATH.eql_w[z];for(H=1/H,z=o.BLKSIZE/2;--z>=0;)h.ATH.eql_w[z]*=H}for(var D=v=0;D<h.npart_s;++D)for(z=0;z<h.numlines_s[D];++z)++v;m(129==v);for(var D=v=0;D<h.npart_l;++D)for(z=0;z<h.numlines_l[D];++z)++v;for(m(513==v),v=0,z=0;z<h.npart_l;z++){var C=u*(v+h.numlines_l[z]/2)/o.BLKSIZE;h.mld_cb_l[z]=N(C),v+=h.numlines_l[z]}for(;z<o.CBANDS;++z)h.mld_cb_l[z]=1;for(z=0,v=0;z<h.npart_s;z++){var C=u*(v+h.numlines_s[z]/2)/o.BLKSIZE_s;h.mld_cb_s[z]=N(C),v+=h.numlines_s[z]}for(;z<o.CBANDS;++z)h.mld_cb_s[z]=1;return 0},this.ATHformula=function(a,b){var c;switch(b.ATHtype){case 0:c=O(a,9);break;case 1:c=O(a,-1);break;case 2:default:c=O(a,0);break;case 3:c=O(a,1)+6;break;case 4:c=O(a,b.ATHcurve)}return c}}},23013,(a,b,c)=>{function d(a){this.ordinal=function(){return a}}d.STEREO=new d(0),d.JOINT_STEREO=new d(1),d.DUAL_CHANNEL=new d(2),d.MONO=new d(3),d.NOT_SET=new d(4),b.exports=d},860877,(a,b,c)=>{var d=a.r(23013);b.exports=function(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=d.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}},374427,(a,b,c)=>{var d=a.r(340862),e={};e.SFBMAX=3*d.SBMAX_s,b.exports=e},758511,(a,b,c)=>{var d=a.r(921088);d.System,d.VbrMode,d.Float,d.ShortBlock,d.Util,d.Arrays,d.new_array_n,d.new_byte,d.new_double;var e=d.new_float;d.new_float_n;var f=d.new_int;d.new_int_n,d.assert;var g=a.r(374427);b.exports=function(){this.xr=e(576),this.l3_enc=f(576),this.scalefac=f(g.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=f(3),this.subblock_gain=f(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=f(g.SFBMAX),this.window=f(g.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=f(4),this.max_nonzero_coeff=0;var a=this;function b(a){return new Int32Array(a)}this.assign=function(c){a.xr=new Float32Array(c.xr),a.l3_enc=b(c.l3_enc),a.scalefac=b(c.scalefac),a.xrpow_max=c.xrpow_max,a.part2_3_length=c.part2_3_length,a.big_values=c.big_values,a.count1=c.count1,a.global_gain=c.global_gain,a.scalefac_compress=c.scalefac_compress,a.block_type=c.block_type,a.mixed_block_flag=c.mixed_block_flag,a.table_select=b(c.table_select),a.subblock_gain=b(c.subblock_gain),a.region0_count=c.region0_count,a.region1_count=c.region1_count,a.preflag=c.preflag,a.scalefac_scale=c.scalefac_scale,a.count1table_select=c.count1table_select,a.part2_length=c.part2_length,a.sfb_lmax=c.sfb_lmax,a.sfb_smin=c.sfb_smin,a.psy_lmax=c.psy_lmax,a.sfbmax=c.sfbmax,a.psymax=c.psymax,a.sfbdivide=c.sfbdivide,a.width=b(c.width),a.window=b(c.window),a.count1bits=c.count1bits,a.sfb_partition_table=c.sfb_partition_table.slice(0),a.slen=b(c.slen),a.max_nonzero_coeff=c.max_nonzero_coeff}}},245084,(a,b,c)=>{var d=a.r(921088);d.System,d.VbrMode,d.Float,d.ShortBlock,d.Util,d.Arrays,d.new_array_n,d.new_byte,d.new_double,d.new_float,d.new_float_n;var e=d.new_int;d.new_int_n,d.assert;var f=a.r(758511);b.exports=function(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[e(4),e(4)];for(var a=0;a<2;a++)for(var b=0;b<2;b++)this.tt[a][b]=new f}},277325,(a,b,c)=>{var d=a.r(921088),e=d.System;d.VbrMode,d.Float,d.ShortBlock,d.Util,d.Arrays,d.new_array_n,d.new_byte,d.new_double,d.new_float,d.new_float_n;var f=d.new_int;d.new_int_n,d.assert;var g=a.r(340862);b.exports=function(a,b,c,d){this.l=f(1+g.SBMAX_l),this.s=f(1+g.SBMAX_s),this.psfb21=f(1+g.PSFB21),this.psfb12=f(1+g.PSFB12);var h=this.l,i=this.s;4==arguments.length&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],e.arraycopy(this.arrL,0,h,0,Math.min(this.arrL.length,this.l.length)),e.arraycopy(this.arrS,0,i,0,Math.min(this.arrS.length,this.s.length)),e.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),e.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}},464110,(a,b,c)=>{var d=a.r(921088);d.System,d.VbrMode,d.Float,d.ShortBlock,d.Util,d.Arrays,d.new_array_n,d.new_byte,d.new_double;var e=d.new_float,f=d.new_float_n,g=d.new_int;d.new_int_n,d.assert;var h=a.r(340862);b.exports=function(){this.last_en_subshort=f([4,9]),this.lastAttacks=g(4),this.pefirbuf=e(19),this.longfact=e(h.SBMAX_l),this.shortfact=e(h.SBMAX_s),this.attackthre=0,this.attackthre_s=0}},578057,(a,b,c)=>{b.exports=function(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}},27181,(a,b,c)=>{var d=a.r(921088);d.System,d.VbrMode,d.Float,d.ShortBlock,d.Util,d.Arrays,d.new_array_n;var e=d.new_byte,f=d.new_double,g=d.new_float,h=d.new_float_n,i=d.new_int,j=d.new_int_n;d.assert;var k=a.r(245084),l=a.r(277325),m=a.r(464110),n=a.r(578057),o=a.r(820491),p=a.r(340862),q=a.r(374427);function r(){function a(){this.write_timing=0,this.ptr=0,this.buf=e(40)}this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=h([2,r.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new k,this.ms_ratio=g(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=i(2),this.CurrentStep=i(2),this.masking_lower=0,this.bv_scf=i(576),this.pseudohalf=i(q.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=[,,],this.blackfilt=Array(2*r.BPC+1),this.itime=f(2),this.sideinfo_len=0,this.sb_sample=h([2,2,18,p.SBLIMIT]),this.amp_filter=g(32),this.header=Array(r.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new l,this.minval_l=g(p.CBANDS),this.minval_s=g(p.CBANDS),this.nb_1=h([4,p.CBANDS]),this.nb_2=h([4,p.CBANDS]),this.nb_s1=h([4,p.CBANDS]),this.nb_s2=h([4,p.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=[,,,,],this.en=[,,,,],this.tot_ener=g(4),this.loudness_sq=h([2,2]),this.loudness_sq_save=g(2),this.mld_l=g(p.SBMAX_l),this.mld_s=g(p.SBMAX_s),this.bm_l=i(p.SBMAX_l),this.bo_l=i(p.SBMAX_l),this.bm_s=i(p.SBMAX_s),this.bo_s=i(p.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=j([p.CBANDS,2]),this.s3ind_s=j([p.CBANDS,2]),this.numlines_s=i(p.CBANDS),this.numlines_l=i(p.CBANDS),this.rnumlines_l=g(p.CBANDS),this.mld_cb_l=g(p.CBANDS),this.mld_cb_s=g(p.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=g(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=i(2),this.nsPsy=new m,this.VBR_seek_table=new n,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=j([16,5]),this.bitrate_blockType_Hist=j([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var b=0;b<this.en.length;b++)this.en[b]=new o;for(var b=0;b<this.thm.length;b++)this.thm[b]=new o;for(var b=0;b<this.header.length;b++)this.header[b]=new a}r.MFSIZE=3456+p.ENCDELAY-p.MDCTDELAY,r.MAX_HEADER_BUF=256,r.MAX_BITS_PER_CHANNEL=4095,r.MAX_BITS_PER_GRANULE=7680,r.BPC=320,b.exports=r},521896,(a,b,c)=>{var d=a.r(921088);d.System,d.VbrMode,d.Float,d.ShortBlock,d.Util,d.Arrays,d.new_array_n,d.new_byte,d.new_double;var e=d.new_float;d.new_float_n,d.new_int,d.new_int_n,d.assert;var f=a.r(340862);b.exports=function(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=e(f.SBMAX_l),this.s=e(f.SBMAX_s),this.psfb21=e(f.PSFB21),this.psfb12=e(f.PSFB12),this.cb_l=e(f.CBANDS),this.cb_s=e(f.CBANDS),this.eql_w=e(f.BLKSIZE/2)}},694109,(a,b,c)=>{var d=a.r(921088),e=d.System;d.VbrMode,d.Float,d.ShortBlock,d.Util;var f=d.Arrays;function g(){g.YULE_ORDER,g.MAX_SAMP_FREQ;var a=g.RMS_WINDOW_TIME_NUMERATOR,b=g.RMS_WINDOW_TIME_DENOMINATOR;g.MAX_SAMPLES_PER_WINDOW;var c=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,12025322027e-14,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],d=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function h(a,b,c,d,e,f){for(;0!=e--;)c[d]=1e-10+a[b+0]*f[0]-c[d-1]*f[1]+a[b-1]*f[2]-c[d-2]*f[3]+a[b-2]*f[4]-c[d-3]*f[5]+a[b-3]*f[6]-c[d-4]*f[7]+a[b-4]*f[8]-c[d-5]*f[9]+a[b-5]*f[10]-c[d-6]*f[11]+a[b-6]*f[12]-c[d-7]*f[13]+a[b-7]*f[14]-c[d-8]*f[15]+a[b-8]*f[16]-c[d-9]*f[17]+a[b-9]*f[18]-c[d-10]*f[19]+a[b-10]*f[20],++d,++b}function i(a,b,c,d,e,f){for(;0!=e--;)c[d]=a[b+0]*f[0]-c[d-1]*f[1]+a[b-1]*f[2]-c[d-2]*f[3]+a[b-2]*f[4],++d,++b}this.InitGainAnalysis=function(c,d){return function(c,d){for(var e=0;e<MAX_ORDER;e++)c.linprebuf[e]=c.lstepbuf[e]=c.loutbuf[e]=c.rinprebuf[e]=c.rstepbuf[e]=c.routbuf[e]=0;switch(0|d){case 48e3:c.reqindex=0;break;case 44100:c.reqindex=1;break;case 32e3:c.reqindex=2;break;case 24e3:c.reqindex=3;break;case 22050:c.reqindex=4;break;case 16e3:c.reqindex=5;break;case 12e3:c.reqindex=6;break;case 11025:c.reqindex=7;break;case 8e3:c.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return c.sampleWindow=0|(d*a+b-1)/b,c.lsum=0,c.rsum=0,c.totsamp=0,f.ill(c.A,0),INIT_GAIN_ANALYSIS_OK}(c,d)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(c.linpre=MAX_ORDER,c.rinpre=MAX_ORDER,c.lstep=MAX_ORDER,c.rstep=MAX_ORDER,c.lout=MAX_ORDER,c.rout=MAX_ORDER,f.fill(c.B,0),INIT_GAIN_ANALYSIS_OK)},this.AnalyzeSamples=function(a,b,f,j,k,l,m){if(0==l)return GAIN_ANALYSIS_OK;switch(K=0,I=l,m){case 1:j=b,k=f;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(l<MAX_ORDER?(e.arraycopy(b,f,a.linprebuf,MAX_ORDER,l),e.arraycopy(j,k,a.rinprebuf,MAX_ORDER,l)):(e.arraycopy(b,f,a.linprebuf,MAX_ORDER,MAX_ORDER),e.arraycopy(j,k,a.rinprebuf,MAX_ORDER,MAX_ORDER));I>0;){J=I>a.sampleWindow-a.totsamp?a.sampleWindow-a.totsamp:I,K<MAX_ORDER?(F=a.linpre+K,G=a.linprebuf,H=a.rinpre+K,L=a.rinprebuf,J>MAX_ORDER-K&&(J=MAX_ORDER-K)):(F=f+K,G=b,H=k+K,L=j),h(G,F,a.lstepbuf,a.lstep+a.totsamp,J,c[a.reqindex]),h(L,H,a.rstepbuf,a.rstep+a.totsamp,J,c[a.reqindex]),i(a.lstepbuf,a.lstep+a.totsamp,a.loutbuf,a.lout+a.totsamp,J,d[a.reqindex]),i(a.rstepbuf,a.rstep+a.totsamp,a.routbuf,a.rout+a.totsamp,J,d[a.reqindex]),F=a.lout+a.totsamp,G=a.loutbuf,H=a.rout+a.totsamp;for(var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L=a.routbuf,M=J%8;0!=M--;)a.lsum+=(n=G[F++])*n,a.rsum+=(o=L[H++])*o;for(M=J/8;0!=M--;)a.lsum+=(p=G[F+0])*p+(q=G[F+1])*q+(r=G[F+2])*r+(s=G[F+3])*s+(t=G[F+4])*t+(u=G[F+5])*u+(v=G[F+6])*v+(w=G[F+7])*w,F+=8,a.rsum+=(x=L[H+0])*x+(y=L[H+1])*y+(z=L[H+2])*z+(A=L[H+3])*A+(B=L[H+4])*B+(C=L[H+5])*C+(D=L[H+6])*D+(E=L[H+7])*E,H+=8;if(I-=J,K+=J,a.totsamp+=J,a.totsamp==a.sampleWindow){var N=10*g.STEPS_per_dB*Math.log10((a.lsum+a.rsum)/a.totsamp*.5+1e-37),O=N<=0?0:0|N;O>=a.A.length&&(O=a.A.length-1),a.A[O]++,a.lsum=a.rsum=0,e.arraycopy(a.loutbuf,a.totsamp,a.loutbuf,0,MAX_ORDER),e.arraycopy(a.routbuf,a.totsamp,a.routbuf,0,MAX_ORDER),e.arraycopy(a.lstepbuf,a.totsamp,a.lstepbuf,0,MAX_ORDER),e.arraycopy(a.rstepbuf,a.totsamp,a.rstepbuf,0,MAX_ORDER),a.totsamp=0}if(a.totsamp>a.sampleWindow)return GAIN_ANALYSIS_ERROR}return l<MAX_ORDER?(e.arraycopy(a.linprebuf,l,a.linprebuf,0,MAX_ORDER-l),e.arraycopy(a.rinprebuf,l,a.rinprebuf,0,MAX_ORDER-l),e.arraycopy(b,f,a.linprebuf,MAX_ORDER-l,l),e.arraycopy(j,k,a.rinprebuf,MAX_ORDER-l,l)):(e.arraycopy(b,f+l-MAX_ORDER,a.linprebuf,0,MAX_ORDER),e.arraycopy(j,k+l-MAX_ORDER,a.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK},this.GetTitleGain=function(a){for(var b=function(a,b){var c,d=0;for(c=0;c<b;c++)d+=a[c];if(0==d)return GAIN_NOT_ENOUGH_SAMPLES;var e=0|Math.ceil(.050000000000000044*d);for(c=b;c-- >0&&!((e-=a[c])<=0););return 64.82-c/g.STEPS_per_dB}(a.A,a.A.length),c=0;c<a.A.length;c++)a.B[c]+=a.A[c],a.A[c]=0;for(var c=0;c<MAX_ORDER;c++)a.linprebuf[c]=a.lstepbuf[c]=a.loutbuf[c]=a.rinprebuf[c]=a.rstepbuf[c]=a.routbuf[c]=0;return a.totsamp=0,a.lsum=a.rsum=0,b}}d.new_array_n,d.new_byte,d.new_double,d.new_float,d.new_float_n,d.new_int,d.new_int_n,d.assert,g.STEPS_per_dB=100,g.MAX_dB=120,g.GAIN_NOT_ENOUGH_SAMPLES=-24601,g.GAIN_ANALYSIS_ERROR=0,g.GAIN_ANALYSIS_OK=1,g.INIT_GAIN_ANALYSIS_ERROR=0,g.INIT_GAIN_ANALYSIS_OK=1,g.YULE_ORDER=10,g.MAX_ORDER=g.YULE_ORDER,g.MAX_SAMP_FREQ=48e3,g.RMS_WINDOW_TIME_NUMERATOR=1,g.RMS_WINDOW_TIME_DENOMINATOR=20,g.MAX_SAMPLES_PER_WINDOW=g.MAX_SAMP_FREQ*g.RMS_WINDOW_TIME_NUMERATOR/g.RMS_WINDOW_TIME_DENOMINATOR+1,b.exports=g},719450,(a,b,c)=>{var d=a.r(921088);d.System,d.VbrMode,d.Float,d.ShortBlock,d.Util,d.Arrays,d.new_array_n,d.new_byte,d.new_double;var e=d.new_float;d.new_float_n;var f=d.new_int;d.new_int_n,d.assert;var g=a.r(694109);b.exports=function(){this.linprebuf=e(2*g.MAX_ORDER),this.linpre=0,this.lstepbuf=e(g.MAX_SAMPLES_PER_WINDOW+g.MAX_ORDER),this.lstep=0,this.loutbuf=e(g.MAX_SAMPLES_PER_WINDOW+g.MAX_ORDER),this.lout=0,this.rinprebuf=e(2*g.MAX_ORDER),this.rinpre=0,this.rstepbuf=e(g.MAX_SAMPLES_PER_WINDOW+g.MAX_ORDER),this.rstep=0,this.routbuf=e(g.MAX_SAMPLES_PER_WINDOW+g.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=f(0|g.STEPS_per_dB*g.MAX_dB),this.B=f(0|g.STEPS_per_dB*g.MAX_dB)}},308406,(a,b,c)=>{b.exports=function(a){this.bits=a}},285235,(a,b,c)=>{var d=a.r(921088);d.System,d.VbrMode,d.Float,d.ShortBlock,d.Util,d.Arrays,d.new_array_n,d.new_byte,d.new_double;var e=d.new_float;d.new_float_n;var f=d.new_int;d.new_int_n;var g=d.assert,h=a.r(308406),i=a.r(340862),j=a.r(374427),k=a.r(27181);b.exports=function(a){this.quantize=a,this.iteration_loop=function(a,b,c,d){var l,m=a.internal_flags,n=e(j.SFBMAX),o=e(576),p=f(2),q=0,r=m.l3_side,s=new h(q);this.quantize.rv.ResvFrameBegin(a,s),q=s.bits;for(var t=0;t<m.mode_gr;t++){l=this.quantize.qupvt.on_pe(a,b,p,q,t,t),m.mode_ext==i.MPG_MD_MS_LR&&(this.quantize.ms_convert(m.l3_side,t),this.quantize.qupvt.reduce_side(p,c[t],q,l));for(var u=0;u<m.channels_out;u++){var v,w,x=r.tt[t][u];x.block_type!=i.SHORT_TYPE?(v=0,w=m.PSY.mask_adjust-v):(v=0,w=m.PSY.mask_adjust_short-v),m.masking_lower=Math.pow(10,.1*w),this.quantize.init_outer_loop(m,x),this.quantize.init_xrpow(m,x,o)&&(this.quantize.qupvt.calc_xmin(a,d[t][u],x,n),this.quantize.outer_loop(a,x,n,o,u,p[u])),this.quantize.iteration_finish_one(m,t,u),g(x.part2_3_length<=k.MAX_BITS_PER_CHANNEL),g(x.part2_3_length<=p[u])}}this.quantize.rv.ResvFrameEnd(m,q)}}},869375,(a,b,c)=>{function d(a,b,c,d){this.xlen=a,this.linmax=b,this.table=c,this.hlen=d}var e={};e.t1HB=[1,1,1,0],e.t2HB=[1,2,1,3,1,1,3,2,0],e.t3HB=[3,2,1,1,1,1,3,2,0],e.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],e.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],e.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],e.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],e.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],e.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],e.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],e.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],e.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],e.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],e.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],e.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],e.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],e.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],e.t1l=[1,4,3,5],e.t2l=[1,4,7,4,5,7,6,7,8],e.t3l=[2,3,7,4,4,7,6,7,8],e.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],e.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],e.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],e.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],e.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],e.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],e.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],e.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],e.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],e.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],e.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],e.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],e.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],e.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],e.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],e.ht=[new d(0,0,null,null),new d(2,0,e.t1HB,e.t1l),new d(3,0,e.t2HB,e.t2l),new d(3,0,e.t3HB,e.t3l),new d(0,0,null,null),new d(4,0,e.t5HB,e.t5l),new d(4,0,e.t6HB,e.t6l),new d(6,0,e.t7HB,e.t7l),new d(6,0,e.t8HB,e.t8l),new d(6,0,e.t9HB,e.t9l),new d(8,0,e.t10HB,e.t10l),new d(8,0,e.t11HB,e.t11l),new d(8,0,e.t12HB,e.t12l),new d(16,0,e.t13HB,e.t13l),new d(0,0,null,e.t16_5l),new d(16,0,e.t15HB,e.t15l),new d(1,1,e.t16HB,e.t16l),new d(2,3,e.t16HB,e.t16l),new d(3,7,e.t16HB,e.t16l),new d(4,15,e.t16HB,e.t16l),new d(6,63,e.t16HB,e.t16l),new d(8,255,e.t16HB,e.t16l),new d(10,1023,e.t16HB,e.t16l),new d(13,8191,e.t16HB,e.t16l),new d(4,15,e.t24HB,e.t24l),new d(5,31,e.t24HB,e.t24l),new d(6,63,e.t24HB,e.t24l),new d(7,127,e.t24HB,e.t24l),new d(8,255,e.t24HB,e.t24l),new d(9,511,e.t24HB,e.t24l),new d(11,2047,e.t24HB,e.t24l),new d(13,8191,e.t24HB,e.t24l),new d(0,0,e.t32HB,e.t32l),new d(0,0,e.t33HB,e.t33l)],e.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],e.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],e.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],e.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],e.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],e.scfsi_band=[0,6,11,16,21],b.exports=e},508835,(a,b,c)=>{var d=a.r(277325),e=a.r(921088);e.System;var f=e.VbrMode,g=e.Float;e.ShortBlock;var h=e.Util;e.Arrays,e.new_array_n,e.new_byte,e.new_double;var i=e.new_float;e.new_float_n;var j=e.new_int;e.new_int_n;var k=e.assert,l=a.r(340862),m=a.r(308406),n=a.r(27181);function o(){var a=null,b=null,c=null;this.setModules=function(d,e,f){a=d,b=e,c=f},this.IPOW20=function(a){return k(0<=a&&a<o.Q_MAX),t[a]};var e=o.IXMAX_VAL+2,p=o.Q_MAX,q=o.Q_MAX2;o.LARGE_BITS,this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var r=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=r,this.sfBandIndex=[new d([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new d([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new d([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new d([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new d([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new d([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new d([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new d([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new d([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var s=i(p+q+1),t=i(p),u=i(e),v=i(e);function w(a,b){var d=c.ATHformula(b,a);return d-=100,d=Math.pow(10,d/10+a.ATHlower)}function x(a){this.s=a}this.adj43=v,this.iteration_init=function(b){var c,d,f,h,i,j,k=b.internal_flags,m=k.l3_side;if(0==k.iteration_init_init){for(k.iteration_init_init=1,m.main_data_begin=0,!function(a){for(var b=a.internal_flags.ATH.l,c=a.internal_flags.ATH.psfb21,d=a.internal_flags.ATH.s,e=a.internal_flags.ATH.psfb12,f=a.internal_flags,h=a.out_samplerate,i=0;i<l.SBMAX_l;i++){var j=f.scalefac_band.l[i],k=f.scalefac_band.l[i+1];b[i]=g.MAX_VALUE;for(var m=j;m<k;m++){var n=m*h/1152,o=w(a,n);b[i]=Math.min(b[i],o)}}for(var i=0;i<l.PSFB21;i++){var j=f.scalefac_band.psfb21[i],k=f.scalefac_band.psfb21[i+1];c[i]=g.MAX_VALUE;for(var m=j;m<k;m++){var n=m*h/1152,o=w(a,n);c[i]=Math.min(c[i],o)}}for(var i=0;i<l.SBMAX_s;i++){var j=f.scalefac_band.s[i],k=f.scalefac_band.s[i+1];d[i]=g.MAX_VALUE;for(var m=j;m<k;m++){var n=m*h/384,o=w(a,n);d[i]=Math.min(d[i],o)}d[i]*=f.scalefac_band.s[i+1]-f.scalefac_band.s[i]}for(var i=0;i<l.PSFB12;i++){var j=f.scalefac_band.psfb12[i],k=f.scalefac_band.psfb12[i+1];e[i]=g.MAX_VALUE;for(var m=j;m<k;m++){var n=m*h/384,o=w(a,n);e[i]=Math.min(e[i],o)}e[i]*=f.scalefac_band.s[13]-f.scalefac_band.s[12]}if(a.noATH){for(var i=0;i<l.SBMAX_l;i++)b[i]=1e-20;for(var i=0;i<l.PSFB21;i++)c[i]=1e-20;for(var i=0;i<l.SBMAX_s;i++)d[i]=1e-20;for(var i=0;i<l.PSFB12;i++)e[i]=1e-20}f.ATH.floor=10*Math.log10(w(a,-1))}(b),u[0]=0,c=1;c<e;c++)u[c]=Math.pow(c,4/3);for(c=0;c<e-1;c++)v[c]=c+1-Math.pow(.5*(u[c]+u[c+1]),.75);for(v[c]=.5,c=0;c<p;c++)t[c]=Math.pow(2,-((c-210)*.1875));for(c=0;c<=p+q;c++)s[c]=Math.pow(2,(c-210-q)*.25);for(a.huffman_init(k),(c=b.exp_nspsytune>>2&63)>=32&&(c-=64),d=Math.pow(10,c/4/10),(c=b.exp_nspsytune>>8&63)>=32&&(c-=64),f=Math.pow(10,c/4/10),(c=b.exp_nspsytune>>14&63)>=32&&(c-=64),h=Math.pow(10,c/4/10),(c=b.exp_nspsytune>>20&63)>=32&&(c-=64),i=h*Math.pow(10,c/4/10),c=0;c<l.SBMAX_l;c++)j=c<=6?d:c<=13?f:c<=20?h:i,k.nsPsy.longfact[c]=j;for(c=0;c<l.SBMAX_s;c++)j=c<=5?d:c<=10?f:c<=11?h:i,k.nsPsy.shortfact[c]=j}},this.on_pe=function(a,c,d,e,f,g){var h,i,l=a.internal_flags,o=0,p=j(2),q=new m(o),r=b.ResvMaxBits(a,e,q,g),s=(o=q.bits)+r;for(s>n.MAX_BITS_PER_GRANULE&&(s=n.MAX_BITS_PER_GRANULE),i=0,h=0;h<l.channels_out;++h)d[h]=Math.min(n.MAX_BITS_PER_CHANNEL,o/l.channels_out),p[h]=0|d[h]*c[f][h]/700-d[h],p[h]>3*e/4&&(p[h]=3*e/4),p[h]<0&&(p[h]=0),p[h]+d[h]>n.MAX_BITS_PER_CHANNEL&&(p[h]=Math.max(0,n.MAX_BITS_PER_CHANNEL-d[h])),i+=p[h];if(i>r)for(h=0;h<l.channels_out;++h)p[h]=r*p[h]/i;for(h=0;h<l.channels_out;++h)d[h]+=p[h],r-=p[h];for(i=0,h=0;h<l.channels_out;++h)i+=d[h];if(i>n.MAX_BITS_PER_GRANULE){var t=0;for(h=0;h<l.channels_out;++h)d[h]*=n.MAX_BITS_PER_GRANULE,d[h]/=i,t+=d[h];k(t<=n.MAX_BITS_PER_GRANULE)}return s},this.reduce_side=function(a,b,c,d){k(d<=n.MAX_BITS_PER_GRANULE),k(a[0]+a[1]<=n.MAX_BITS_PER_GRANULE);var e=.33*(.5-b)/.5;e<0&&(e=0),e>.5&&(e=.5);var f=0|.5*e*(a[0]+a[1]);f>n.MAX_BITS_PER_CHANNEL-a[0]&&(f=n.MAX_BITS_PER_CHANNEL-a[0]),f<0&&(f=0),a[1]>=125&&(a[1]-f>125?(a[0]<c&&(a[0]+=f),a[1]-=f):(a[0]+=a[1]-125,a[1]=125)),(f=a[0]+a[1])>d&&(a[0]=d*a[0]/f,a[1]=d*a[1]/f),k(a[0]<=n.MAX_BITS_PER_CHANNEL),k(a[1]<=n.MAX_BITS_PER_CHANNEL),k(a[0]+a[1]<=n.MAX_BITS_PER_GRANULE)},this.athAdjust=function(a,b,c){var d=h.FAST_LOG10_X(b,10),e=a*a,f=0;return d-=c,e>1e-20&&(f=1+h.FAST_LOG10_X(e,.11073126151982021)),f<0&&(f=0),d*=f,Math.pow(10,.1*(d+=c+90.30873362-94.82444863))},this.calc_xmin=function(a,b,c,d){var e,g=0,h=a.internal_flags,i=0,j=0,k=h.ATH,m=c.xr,n=+(a.VBR==f.vbr_mtrh),o=h.masking_lower;for((a.VBR==f.vbr_mtrh||a.VBR==f.vbr_mt)&&(o=1),e=0;e<c.psy_lmax;e++){s=(r=a.VBR==f.vbr_rh||a.VBR==f.vbr_mtrh?athAdjust(k.adjust,k.l[e],k.floor):k.adjust*k.l[e])/(u=c.width[e]),t=2220446049250313e-31,v=u>>1,q=0;do q+=w=m[i]*m[i],t+=w<s?w:s,q+=x=m[++i]*m[i],t+=x<s?x:s,i++;while(--v>0)if(q>r&&j++,e==l.SBPSY_l){var p=r*h.nsPsy.longfact[e];t<p&&(t=p)}if(0!=n&&(r=t),!a.ATHonly){var q,r,s,t,u,v,w,x,p,y=b.en.l[e];y>0&&(p=q*b.thm.l[e]*o/y,0!=n&&(p*=h.nsPsy.longfact[e]),r<p&&(r=p))}0!=n?d[g++]=r:d[g++]=r*h.nsPsy.longfact[e]}var z=575;if(c.block_type!=l.SHORT_TYPE)for(var A=576;0!=A--&&BitStream.EQ(m[A],0);)z=A;c.max_nonzero_coeff=z;for(var B=c.sfb_smin;e<c.psymax;B++,e+=3){for(C=0,D=a.VBR==f.vbr_rh||a.VBR==f.vbr_mtrh?athAdjust(k.adjust,k.s[B],k.floor):k.adjust*k.s[B],u=c.width[e];C<3;C++){var u,C,D,r,q=0,v=u>>1;s=D/u,t=2220446049250313e-31;do q+=w=m[i]*m[i],t+=w<s?w:s,q+=x=m[++i]*m[i],t+=x<s?x:s,i++;while(--v>0)if(q>D&&j++,B==l.SBPSY_s){var p=D*h.nsPsy.shortfact[B];t<p&&(t=p)}if(r=0!=n?t:D,!a.ATHonly&&!a.ATHshort){var s,t,w,x,p,y=b.en.s[B][C];y>0&&(p=q*b.thm.s[B][C]*o/y,0!=n&&(p*=h.nsPsy.shortfact[B]),r<p&&(r=p))}0!=n?d[g++]=r:d[g++]=r*h.nsPsy.shortfact[B]}a.useTemporal&&(d[g-3]>d[g-3+1]&&(d[g-3+1]+=(d[g-3]-d[g-3+1])*h.decay),d[g-3+1]>d[g-3+2]&&(d[g-3+2]+=(d[g-3+1]-d[g-3+2])*h.decay))}return j},this.calc_noise_core=function(a,b,c,d){var e,f=0,g=b.s,h=a.l3_enc;if(g>a.count1)for(;0!=c--;)e=a.xr[g],g++,f+=e*e,e=a.xr[g],g++,f+=e*e;else if(g>a.big_values){var e,j=i(2);for(j[0]=0,j[1]=d;0!=c--;)e=Math.abs(a.xr[g])-j[h[g]],g++,f+=e*e,e=Math.abs(a.xr[g])-j[h[g]],g++,f+=e*e}else for(;0!=c--;)e=Math.abs(a.xr[g])-u[h[g]]*d,g++,f+=e*e,e=Math.abs(a.xr[g])-u[h[g]]*d,g++,f+=e*e;return b.s=g,f},this.calc_noise=function(a,b,c,d,e){var f,g,i=0,j=0,l=0,m=0,n=0,p=-20,q=0,t=a.scalefac,u=0;for(f=0,d.over_SSD=0;f<a.psymax;f++){var v,w=a.global_gain-(t[u++]+(0!=a.preflag?r[f]:0)<<a.scalefac_scale+1)-8*a.subblock_gain[a.window[f]],y=0;if(null!=e&&e.step[f]==w)y=e.noise[f],q+=a.width[f],c[i++]=y/b[j++],y=e.noise_log[f];else{var z,A=(k(0<=w+o.Q_MAX2&&w<o.Q_MAX),s[w+o.Q_MAX2]);g=a.width[f]>>1,q+a.width[f]>a.max_nonzero_coeff&&(g=(z=a.max_nonzero_coeff-q+1)>0?z>>1:0);var B=new x(q);y=this.calc_noise_core(a,B,g,A),q=B.s,null!=e&&(e.step[f]=w,e.noise[f]=y),y=c[i++]=y/b[j++],y=h.FAST_LOG10(Math.max(y,1e-20)),null!=e&&(e.noise_log[f]=y)}null!=e&&(e.global_gain=a.global_gain),n+=y,y>0&&(v=Math.max(0|10*y+.5,1),d.over_SSD+=v*v,l++,m+=y),p=Math.max(p,y)}return d.over_count=l,d.tot_noise=n,d.over_noise=m,d.max_noise=p,l},this.set_pinfo=function(a,b,c,d,e){var f,g,h,j,m,n=a.internal_flags,o=0==b.scalefac_scale?.5:1,p=b.scalefac,q=i(L3Side.SFBMAX),s=i(L3Side.SFBMAX),t=new CalcNoiseResult;calc_xmin(a,c,b,q),calc_noise(b,q,s,t,null);var u=0;for(g=b.sfb_lmax,b.block_type!=l.SHORT_TYPE&&0==b.mixed_block_flag&&(g=22),f=0;f<g;f++){var v=n.scalefac_band.l[f],w=n.scalefac_band.l[f+1],x=w-v;for(j=0;u<w;u++)j+=b.xr[u]*b.xr[u];j/=x,m=1e15,n.pinfo.en[d][e][f]=m*j,n.pinfo.xfsf[d][e][f]=m*q[f]*s[f]/x,c.en.l[f]>0&&!a.ATHonly?j/=c.en.l[f]:j=0,n.pinfo.thr[d][e][f]=m*Math.max(j*c.thm.l[f],n.ATH.l[f]),n.pinfo.LAMEsfb[d][e][f]=0,0!=b.preflag&&f>=11&&(n.pinfo.LAMEsfb[d][e][f]=-o*r[f]),f<l.SBPSY_l&&(k(p[f]>=0),n.pinfo.LAMEsfb[d][e][f]-=o*p[f])}if(b.block_type==l.SHORT_TYPE)for(g=f,f=b.sfb_smin;f<l.SBMAX_s;f++)for(var v=n.scalefac_band.s[f],w=n.scalefac_band.s[f+1],x=w-v,y=0;y<3;y++){for(j=0,h=v;h<w;h++)j+=b.xr[u]*b.xr[u],u++;j=Math.max(j/x,1e-20),m=1e15,n.pinfo.en_s[d][e][3*f+y]=m*j,n.pinfo.xfsf_s[d][e][3*f+y]=m*q[g]*s[g]/x,c.en.s[f][y]>0?j/=c.en.s[f][y]:j=0,(a.ATHonly||a.ATHshort)&&(j=0),n.pinfo.thr_s[d][e][3*f+y]=m*Math.max(j*c.thm.s[f][y],n.ATH.s[f]),n.pinfo.LAMEsfb_s[d][e][3*f+y]=-2*b.subblock_gain[y],f<l.SBPSY_s&&(n.pinfo.LAMEsfb_s[d][e][3*f+y]-=o*p[g]),g++}n.pinfo.LAMEqss[d][e]=b.global_gain,n.pinfo.LAMEmainbits[d][e]=b.part2_3_length+b.part2_length,n.pinfo.LAMEsfbits[d][e]=b.part2_length,n.pinfo.over[d][e]=t.over_count,n.pinfo.max_noise[d][e]=10*t.max_noise,n.pinfo.over_noise[d][e]=10*t.over_noise,n.pinfo.tot_noise[d][e]=10*t.tot_noise,n.pinfo.over_SSD[d][e]=t.over_SSD}}o.Q_MAX=257,o.Q_MAX2=116,o.LARGE_BITS=1e5,o.IXMAX_VAL=8206,b.exports=o},75038,(a,b,c)=>{var d=a.r(921088),e=d.System;d.VbrMode,d.Float,d.ShortBlock,d.Util;var f=d.Arrays;d.new_array_n,d.new_byte,d.new_double,d.new_float,d.new_float_n;var g=d.new_int;d.new_int_n;var h=d.assert,i=a.r(340862),j=a.r(869375),k=a.r(758511),l=a.r(508835);function m(){var a=null;function b(a){this.bits=0|a}this.qupvt=null,this.setModules=function(b){this.qupvt=b,a=b};var c=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function d(a,b,c,d,e,f){var g=.5946/b;for(h(a>0),a>>=1;0!=a--;)e[f++]=g>c[d++]?0:1,e[f++]=g>c[d++]?0:1}function n(b,c,d,e,f,g){h(b>0);var i,j,k,l,m,n,o,p,q=(b>>=1)%2;for(b>>=1;0!=b--;)m=d[e++]*c,n=d[e++]*c,o=0|m,i=d[e++]*c,p=0|n,j=d[e++]*c,k=0|i,m+=a.adj43[o],l=0|j,n+=a.adj43[p],f[g++]=0|m,i+=a.adj43[k],f[g++]=0|n,j+=a.adj43[l],f[g++]=0|i,f[g++]=0|j;0!=q&&(m=d[e++]*c,n=d[e++]*c,o=0|m,p=0|n,m+=a.adj43[o],n+=a.adj43[p],f[g++]=0|m,f[g++]=0|n)}var o=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function p(a,b,c,d){var e,f,g=function(a,b,c){var d=0,e=0;do{var f=a[b++],g=a[b++];d<f&&(d=f),e<g&&(e=g)}while(b<c)return d<e&&(d=e),d}(a,b,c);switch(g){case 0:return g;case 1:var h=b,i=0,k=j.ht[1].hlen;do{var m=2*a[h+0]+a[h+1];h+=2,i+=k[m]}while(h<c)return d.bits+=i,1;case 2:case 3:return function(a,b,c,d,e){var f,g,h=0,i=j.ht[d].xlen;f=2==d?j.table23:j.table56;do{var k=a[b+0]*i+a[b+1];b+=2,h+=f[k]}while(b<c)return g=65535&h,(h>>=16)>g&&(h=g,d++),e.bits+=h,d}(a,b,c,o[g-1],d);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return function(a,b,c,d,e){var f=0,g=0,h=0,i=j.ht[d].xlen,k=j.ht[d].hlen,l=j.ht[d+1].hlen,m=j.ht[d+2].hlen;do{var n=a[b+0]*i+a[b+1];b+=2,f+=k[n],g+=l[n],h+=m[n]}while(b<c)var o=d;return f>g&&(f=g,o++),f>h&&(f=h,o=d+2),e.bits+=f,o}(a,b,c,o[g-1],d);default:if(g>l.IXMAX_VAL)return d.bits=l.LARGE_BITS,-1;for(g-=15,e=24;e<32&&!(j.ht[e].linmax>=g);e++);for(f=e-8;f<24&&!(j.ht[f].linmax>=g);f++);return function(a,b,c,d,e,f){var g,h=65536*j.ht[d].xlen+j.ht[e].xlen,i=0;do{var k=a[b++],l=a[b++];0!=k&&(k>14&&(k=15,i+=h),k*=16),0!=l&&(l>14&&(l=15,i+=h),k+=l),i+=j.largetbl[k]}while(b<c)return g=65535&i,(i>>=16)>g&&(i=g,d=e),f.bits+=i,d}(a,b,c,f,e,d)}}function q(a,c,d,e,f,g,h,j){for(var k=c.big_values,l=2;l<i.SBMAX_l+1;l++){var m=a.scalefac_band.l[l];if(m>=k)break;var n=f[l-2]+c.count1bits;if(d.part2_3_length<=n)break;var o=new b(n),q=p(e,m,k,o);n=o.bits,d.part2_3_length<=n||(d.assign(c),d.part2_3_length=n,d.region0_count=g[l-2],d.region1_count=l-2-g[l-2],d.table_select[0]=h[l-2],d.table_select[1]=j[l-2],d.table_select[2]=q)}}this.noquant_count_bits=function(a,c,d){var e,f=c.l3_enc,g=Math.min(576,c.max_nonzero_coeff+2>>1<<1);for(null!=d&&(d.sfb_count1=0);g>1&&(f[g-1]|f[g-2])==0;g-=2);c.count1=g;for(var k=0,l=0;g>3&&!(((f[g-1]|f[g-2]|f[g-3]|f[g-4])&0x7fffffff)>1);g-=4)e=((2*f[g-4]+f[g-3])*2+f[g-2])*2+f[g-1],k+=j.t32l[e],l+=j.t33l[e];var m=k;if(c.count1table_select=0,k>l&&(m=l,c.count1table_select=1),c.count1bits=m,c.big_values=g,0==g)return m;if(c.block_type==i.SHORT_TYPE)(k=3*a.scalefac_band.s[3])>c.big_values&&(k=c.big_values),l=c.big_values;else if(c.block_type==i.NORM_TYPE){if(h(g<=576),h((k=c.region0_count=a.bv_scf[g-2])+(l=c.region1_count=a.bv_scf[g-1])+2<i.SBPSY_l),l=a.scalefac_band.l[k+l+2],k=a.scalefac_band.l[k+1],l<g){var n=new b(m);c.table_select[2]=p(f,l,g,n),m=n.bits}}else c.region0_count=7,c.region1_count=i.SBMAX_l-1-7-1,(k=a.scalefac_band.l[8])>(l=g)&&(k=l);if(k=Math.min(k,g),l=Math.min(l,g),h(k>=0),h(l>=0),0<k){var n=new b(m);c.table_select[0]=p(f,0,k,n),m=n.bits}if(k<l){var n=new b(m);c.table_select[1]=p(f,k,l,n),m=n.bits}if(2==a.use_best_huffman&&(c.part2_3_length=m,best_huffman_divide(a,c),m=c.part2_3_length),null!=d&&c.block_type==i.NORM_TYPE){for(var o=0;a.scalefac_band.l[o]<c.big_values;)o++;d.sfb_count1=o}return m},this.count_bits=function(b,c,e,g){var j=e.l3_enc,k=l.IXMAX_VAL/a.IPOW20(e.global_gain);if(e.xrpow_max>k)return l.LARGE_BITS;if(!function(b,c,e,g,j){var k=0,l=0,m=0,o=0,p=0,q=c,r=0,s=b,t=0;for(v=0,x=null!=j&&g.global_gain==j.global_gain,w=g.block_type==i.SHORT_TYPE?38:21;v<=w;v++){var u=-1;if((x||g.block_type==i.NORM_TYPE)&&(u=g.global_gain-(g.scalefac[v]+(0!=g.preflag?a.pretab[v]:0)<<g.scalefac_scale+1)-8*g.subblock_gain[g.window[v]]),h(g.width[v]>=0),x&&j.step[v]==u)0!=l&&(n(l,e,s,t,q,r),l=0),0!=m&&(d(m,e,s,t,q,r),m=0);else{var v,w,x,y,z=g.width[v];if(k+g.width[v]>g.max_nonzero_coeff&&(y=g.max_nonzero_coeff-k+1,f.fill(c,g.max_nonzero_coeff,576,0),(z=y)<0&&(z=0),v=w+1),0==l&&0==m&&(q=c,r=p,s=b,t=o),null!=j&&j.sfb_count1>0&&v>=j.sfb_count1&&j.step[v]>0&&u>=j.step[v]?(0!=l&&(n(l,e,s,t,q,r),l=0,q=c,r=p,s=b,t=o),m+=z):(0!=m&&(d(m,e,s,t,q,r),m=0,q=c,r=p,s=b,t=o),l+=z),z<=0){0!=m&&(d(m,e,s,t,q,r),m=0),0!=l&&(n(l,e,s,t,q,r),l=0);break}}v<=w&&(p+=g.width[v],o+=g.width[v],k+=g.width[v])}0!=l&&(n(l,e,s,t,q,r),l=0),0!=m&&(d(m,e,s,t,q,r),m=0)}(c,j,a.IPOW20(e.global_gain),e,g),(2&b.substep_shaping)!=0)for(var m=0,o=e.global_gain+e.scalefac_scale,p=.634521682242439/a.IPOW20(o),q=0;q<e.sfbmax;q++){var r,s=e.width[q];if(h(s>=0),0==b.pseudohalf[q])m+=s;else for(r=m,m+=s;r<m;++r)j[r]=c[r]>=p?j[r]:0}return this.noquant_count_bits(b,e,g)},this.best_huffman_divide=function(a,c){var d=new k,e=c.l3_enc,f=g(23),m=g(23),n=g(23),o=g(23);if(c.block_type!=i.SHORT_TYPE||1!=a.mode_gr){d.assign(c),c.block_type==i.NORM_TYPE&&(!function(a,c,d,e,f,g,h){for(var i=c.big_values,j=0;j<=22;j++)e[j]=l.LARGE_BITS;for(var j=0;j<16;j++){var k=a.scalefac_band.l[j+1];if(k>=i)break;var m=0,n=new b(0),o=p(d,0,k,n);m=n.bits;for(var q=0;q<8;q++){var r=a.scalefac_band.l[j+q+2];if(r>=i)break;var s=m,t=p(d,k,r,n=new b(s));s=n.bits,e[j+q]>s&&(e[j+q]=s,f[j+q]=j,g[j+q]=o,h[j+q]=t)}}}(a,c,e,f,m,n,o),q(a,d,c,e,f,m,n,o));var r=d.big_values;if(0!=r&&!((e[r-2]|e[r-1])>1)&&!((r=c.count1+2)>576)){d.assign(c),d.count1=r;var s=0,t=0;for(h(r<=576);r>d.big_values;r-=4){var u=((2*e[r-4]+e[r-3])*2+e[r-2])*2+e[r-1];s+=j.t32l[u],t+=j.t33l[u]}if(d.big_values=r,d.count1table_select=0,s>t&&(s=t,d.count1table_select=1),d.count1bits=s,d.block_type==i.NORM_TYPE)q(a,d,c,e,f,m,n,o);else{if(d.part2_3_length=s,(s=a.scalefac_band.l[8])>r&&(s=r),s>0){var v=new b(d.part2_3_length);d.table_select[0]=p(e,0,s,v),d.part2_3_length=v.bits}if(r>s){var v=new b(d.part2_3_length);d.table_select[1]=p(e,s,r,v),d.part2_3_length=v.bits}c.part2_3_length>d.part2_3_length&&c.assign(d)}}}};var r=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],s=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],t=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],u=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];m.slen1_tab=t,m.slen2_tab=u,this.best_scalefac_store=function(b,c,d,e){var f,g,k,l,m=e.tt[c][d],n=0;for(f=0,k=0;f<m.sfbmax;f++){var o=m.width[f];for(h(o>=0),k+=o,l=-o;l<0&&0==m.l3_enc[l+k];l++);0==l&&(m.scalefac[f]=n=-2)}if(0==m.scalefac_scale&&0==m.preflag){var p=0;for(f=0;f<m.sfbmax;f++)m.scalefac[f]>0&&(p|=m.scalefac[f]);if(0==(1&p)&&0!=p){for(f=0;f<m.sfbmax;f++)m.scalefac[f]>0&&(m.scalefac[f]>>=1);m.scalefac_scale=n=1}}if(0==m.preflag&&m.block_type!=i.SHORT_TYPE&&2==b.mode_gr){for(f=11;f<i.SBPSY_l&&(!(m.scalefac[f]<a.pretab[f])||-2==m.scalefac[f]);f++);if(f==i.SBPSY_l){for(f=11;f<i.SBPSY_l;f++)m.scalefac[f]>0&&(m.scalefac[f]-=a.pretab[f]);m.preflag=n=1}}for(g=0;g<4;g++)e.scfsi[d][g]=0;for(2==b.mode_gr&&1==c&&e.tt[0][d].block_type!=i.SHORT_TYPE&&e.tt[1][d].block_type!=i.SHORT_TYPE&&(!function(a,b){for(var c,d=b.tt[1][a],e=b.tt[0][a],f=0;f<j.scfsi_band.length-1;f++){for(c=j.scfsi_band[f];c<j.scfsi_band[f+1]&&(e.scalefac[c]==d.scalefac[c]||!(d.scalefac[c]>=0));c++);if(c==j.scfsi_band[f+1]){for(c=j.scfsi_band[f];c<j.scfsi_band[f+1];c++)d.scalefac[c]=-1;b.scfsi[a][f]=1}}var g=0,h=0;for(c=0;c<11;c++)-1!=d.scalefac[c]&&(h++,g<d.scalefac[c]&&(g=d.scalefac[c]));for(var k=0,l=0;c<i.SBPSY_l;c++)-1!=d.scalefac[c]&&(l++,k<d.scalefac[c]&&(k=d.scalefac[c]));for(var f=0;f<16;f++)if(g<r[f]&&k<s[f]){var m=t[f]*h+u[f]*l;d.part2_length>m&&(d.part2_length=m,d.scalefac_compress=f)}}(d,e),n=0),f=0;f<m.sfbmax;f++)-2==m.scalefac[f]&&(m.scalefac[f]=0);0!=n&&(2==b.mode_gr?this.scale_bitcount(m):this.scale_bitcount_lsf(b,m))};var v=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],w=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],x=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(b){var c,d,e,f=0,g=0,j=b.scalefac;if(h(function(a,b){for(var c=0;c<b;++c)if(a[c]<0)return!1;return!0}(j,b.sfbmax)),b.block_type==i.SHORT_TYPE)c=v,0!=b.mixed_block_flag&&(c=w);else if(c=x,0==b.preflag){for(e=11;e<i.SBPSY_l&&!(j[e]<a.pretab[e]);e++);if(e==i.SBPSY_l)for(e=11,b.preflag=1;e<i.SBPSY_l;e++)j[e]-=a.pretab[e]}for(e=0;e<b.sfbdivide;e++)f<j[e]&&(f=j[e]);for(;e<b.sfbmax;e++)g<j[e]&&(g=j[e]);for(d=0,b.part2_length=l.LARGE_BITS;d<16;d++)f<r[d]&&g<s[d]&&b.part2_length>c[d]&&(b.part2_length=c[d],b.scalefac_compress=d);return b.part2_length==l.LARGE_BITS};var y=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(b,c){var d,f,j,k,l,m,n,o,p,q,r,s,t=g(4),u=c.scalefac;for(n=0,d=2*(0!=c.preflag);n<4;n++)t[n]=0;if(c.block_type==i.SHORT_TYPE){f=1;var v=a.nr_of_sfb_block[d][f];for(o=0,j=0;j<4;j++)for(n=0,k=v[j]/3;n<k;n++,o++)for(l=0;l<3;l++)u[3*o+l]>t[j]&&(t[j]=u[3*o+l])}else{f=0;var v=a.nr_of_sfb_block[d][f];for(o=0,j=0;j<4;j++)for(n=0,k=v[j];n<k;n++,o++)u[o]>t[j]&&(t[j]=u[o])}for(m=!1,j=0;j<4;j++)t[j]>y[d][j]&&(m=!0);if(!m){for(j=0,c.sfb_partition_table=a.nr_of_sfb_block[d][f];j<4;j++)c.slen[j]=z[t[j]];switch(p=c.slen[0],q=c.slen[1],r=c.slen[2],s=c.slen[3],d){case 0:c.scalefac_compress=(5*p+q<<4)+(r<<2)+s;break;case 1:c.scalefac_compress=400+(5*p+q<<2)+r;break;case 2:c.scalefac_compress=500+3*p+q;break;default:e.err.printf("intensity stereo not implemented yet\n")}}if(!m)for(h(null!=c.sfb_partition_table),c.part2_length=0,j=0;j<4;j++)c.part2_length+=c.slen[j]*c.sfb_partition_table[j];return m};var z=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(a){for(var b=2;b<=576;b+=2){for(var d,e=0;a.scalefac_band.l[++e]<b;);for(d=c[e][0];a.scalefac_band.l[d+1]>b;)d--;for(d<0&&(d=c[e][0]),a.bv_scf[b-2]=d,d=c[e][1];a.scalefac_band.l[d+a.bv_scf[b-2]+2]>b;)d--;d<0&&(d=c[e][1]),a.bv_scf[b-1]=d}}}b.exports=m},548178,(a,b,c)=>{var d=a.r(921088),e=d.System;d.VbrMode,d.Float,d.ShortBlock,d.Util;var f=d.Arrays;d.new_array_n;var g=d.new_byte;d.new_double,d.new_float;var h=d.new_float_n,i=d.new_int;d.new_int_n;var j=d.assert,k=a.r(75038),l=a.r(869375),m=a.r(340862),n=a.r(27181);function o(){var a=this,b=null,c=null,d=null,o=null;this.setModules=function(a,e,f,g){b=a,c=e,d=f,o=g};var p=null,q=0,r=0,s=0;function t(a,b,c){for(j(c<30);c>0;){var d;0==s&&(s=8,j(++r<Lame.LAME_MAXMP3BUFFER),j(a.header[a.w_ptr].write_timing>=q),a.header[a.w_ptr].write_timing==q&&(e.arraycopy(a.header[a.w_ptr].buf,0,p,r,a.sideinfo_len),r+=a.sideinfo_len,q+=8*a.sideinfo_len,a.w_ptr=a.w_ptr+1&n.MAX_HEADER_BUF-1),p[r]=0),d=Math.min(c,s),c-=d,s-=d,j(c<32),j(s<32),p[r]|=b>>c<<s,q+=d}}function u(a,b){var c,e=a.internal_flags;if(j(b>=0),b>=8&&(t(e,76,8),b-=8),b>=8&&(t(e,65,8),b-=8),b>=8&&(t(e,77,8),b-=8),b>=8&&(t(e,69,8),b-=8),b>=32){var f=d.getLameShortVersion();if(b>=32)for(c=0;c<f.length&&b>=8;++c)b-=8,t(e,f.charAt(c),8)}for(;b>=1;b-=1)t(e,e.ancillary_flag,1),e.ancillary_flag^=!a.disable_reservoir;j(0==b)}function v(a,b,c){for(var d=a.header[a.h_ptr].ptr;c>0;){var e=Math.min(c,8-(7&d));j((c-=e)<32),a.header[a.h_ptr].buf[d>>3]|=b>>c<<8-(7&d)-e,d+=e}a.header[a.h_ptr].ptr=d}function w(a,b){a<<=8;for(var c=0;c<8;c++)(((b<<=1)^(a<<=1))&65536)!=0&&(b^=32773);return b}function x(a,b){var c,d=l.ht[b.count1table_select+32],e=0,f=b.big_values,g=b.big_values;for(j(b.count1table_select<2),c=(b.count1-b.big_values)/4;c>0;--c){var h,i=0,k=0;0!=(h=b.l3_enc[f+0])&&(k+=8,b.xr[g+0]<0&&i++,j(h<=1)),0!=(h=b.l3_enc[f+1])&&(k+=4,i*=2,b.xr[g+1]<0&&i++,j(h<=1)),0!=(h=b.l3_enc[f+2])&&(k+=2,i*=2,b.xr[g+2]<0&&i++,j(h<=1)),0!=(h=b.l3_enc[f+3])&&(k++,i*=2,b.xr[g+3]<0&&i++,j(h<=1)),f+=4,g+=4,t(a,i+d.table[k],d.hlen[k]),e+=d.hlen[k]}return e}function y(a,b,c,d,e){var f=l.ht[b],g=0;if(j(b<32),0==b)return g;for(var h=c;h<d;h+=2){var i=0,k=0,m=f.xlen,n=f.xlen,o=0,p=e.l3_enc[h],q=e.l3_enc[h+1];if(0!=p&&(e.xr[h]<0&&o++,i--),b>15){if(p>14){var r=p-15;j(r<=f.linmax),o|=r<<1,k=m,p=15}if(q>14){var s=q-15;j(s<=f.linmax),o<<=m,o|=s,k+=m,q=15}n=16}0!=q&&(o<<=1,e.xr[h+1]<0&&o++,i--),j((p|q)<16),p=p*n+q,k-=i,j((i+=f.hlen[p])<=32),j(k<=32),t(a,f.table[p],i),t(a,o,k),g+=i+k}return g}function z(a,b){var c=3*a.scalefac_band.s[3];c>b.big_values&&(c=b.big_values);var d=y(a,b.table_select[0],0,c,b);return d+y(a,b.table_select[1],c,b.big_values,b)}function A(a,b){j(0<=(c=b.big_values)&&c<=576);var c,d,e,f=b.region0_count+1;return j(0<=f),j(f<a.scalefac_band.l.length),d=a.scalefac_band.l[f],j(0<=(f+=b.region1_count+1)),j(f<a.scalefac_band.l.length),e=a.scalefac_band.l[f],d>c&&(d=c),e>c&&(e=c),y(a,b.table_select[0],0,d,b)+y(a,b.table_select[1],d,e,b)+y(a,b.table_select[2],e,c,b)}function B(){this.total=0}function C(b,c){var d,f,g,h,i,j=b.internal_flags;return i=j.w_ptr,-1==(h=j.h_ptr-1)&&(h=n.MAX_HEADER_BUF-1),c.total=d=j.header[h].write_timing-q,d>=0&&(f=1+h-i,h<i&&(f=1+h-i+n.MAX_HEADER_BUF),d-=8*f*j.sideinfo_len),d+=g=a.getframebits(b),c.total+=g,c.total%8!=0?c.total=1+c.total/8:c.total=c.total/8,c.total+=r+1,d<0&&e.err.println("strange error flushing buffer ... \n"),d}this.getframebits=function(a){var b,c=a.internal_flags;return j(8<=(b=0!=c.bitrate_index?l.bitrate_table[a.version][c.bitrate_index]:a.brate)&&b<=640),8*(0|(a.version+1)*72e3*b/a.out_samplerate+c.padding)},this.CRC_writeheader=function(a,b){var c=65535;c=w(255&b[2],c),c=w(255&b[3],c);for(var d=6;d<a.sideinfo_len;d++)c=w(255&b[d],c);b[4]=byte(c>>8),b[5]=byte(255&c)},this.flush_bitstream=function(a){var c,d,e=a.internal_flags,f=e.h_ptr-1;if(-1==f&&(f=n.MAX_HEADER_BUF-1),c=e.l3_side,!((d=C(a,new B))<0)){if(u(a,d),j(e.header[f].write_timing+this.getframebits(a)==q),e.ResvSize=0,c.main_data_begin=0,e.findReplayGain){var g=b.GetTitleGain(e.rgdata);j(NEQ(g,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),e.RadioGain=0|Math.floor(10*g+.5)}e.findPeakSample&&(e.noclipGainChange=0|Math.ceil(20*Math.log10(e.PeakSample/32767)*10),e.noclipGainChange>0&&(EQ(a.scale,1)||EQ(a.scale,0))?e.noclipScale=Math.floor(32767/e.PeakSample*100)/100:e.noclipScale=-1)}},this.add_dummy_byte=function(a,b,c){for(var d,e=a.internal_flags;c-- >0;){var f,g=8;for(j(!0);g>0;)0==s&&(s=8,j(++r<Lame.LAME_MAXMP3BUFFER),p[r]=0),f=Math.min(g,s),g-=f,s-=f,j(g<32),j(s<32),p[r]|=b>>g<<s,q+=f;for(d=0;d<n.MAX_HEADER_BUF;++d)e.header[d].write_timing+=8}},this.format_bitstream=function(a){var b,c,d=a.internal_flags;b=d.l3_side;var g=this.getframebits(a);u(a,b.resvDrain_pre),function(a,b){var c,d,g,h,i=a.internal_flags;if(c=i.l3_side,i.header[i.h_ptr].ptr=0,f.fill(i.header[i.h_ptr].buf,0,i.sideinfo_len,0),a.out_samplerate<16e3?v(i,4094,12):v(i,4095,12),v(i,a.version,1),v(i,1,2),v(i,+!a.error_protection,1),v(i,i.bitrate_index,4),v(i,i.samplerate_index,2),v(i,i.padding,1),v(i,a.extension,1),v(i,a.mode.ordinal(),2),v(i,i.mode_ext,2),v(i,a.copyright,1),v(i,a.original,1),v(i,a.emphasis,2),a.error_protection&&v(i,0,16),1==a.version){for(j(c.main_data_begin>=0),v(i,c.main_data_begin,9),2==i.channels_out?v(i,c.private_bits,3):v(i,c.private_bits,5),g=0;g<i.channels_out;g++)for(h=0;h<4;h++)v(i,c.scfsi[g][h],1);for(d=0;d<2;d++)for(g=0;g<i.channels_out;g++){var k=c.tt[d][g];v(i,k.part2_3_length+k.part2_length,12),v(i,k.big_values/2,9),v(i,k.global_gain,8),v(i,k.scalefac_compress,4),k.block_type!=m.NORM_TYPE?(v(i,1,1),v(i,k.block_type,2),v(i,k.mixed_block_flag,1),14==k.table_select[0]&&(k.table_select[0]=16),v(i,k.table_select[0],5),14==k.table_select[1]&&(k.table_select[1]=16),v(i,k.table_select[1],5),v(i,k.subblock_gain[0],3),v(i,k.subblock_gain[1],3),v(i,k.subblock_gain[2],3)):(v(i,0,1),14==k.table_select[0]&&(k.table_select[0]=16),v(i,k.table_select[0],5),14==k.table_select[1]&&(k.table_select[1]=16),v(i,k.table_select[1],5),14==k.table_select[2]&&(k.table_select[2]=16),v(i,k.table_select[2],5),j(0<=k.region0_count&&k.region0_count<16),j(0<=k.region1_count&&k.region1_count<8),v(i,k.region0_count,4),v(i,k.region1_count,3)),v(i,k.preflag,1),v(i,k.scalefac_scale,1),v(i,k.count1table_select,1)}}else for(j(c.main_data_begin>=0),v(i,c.main_data_begin,8),v(i,c.private_bits,i.channels_out),d=0,g=0;g<i.channels_out;g++){var k=c.tt[d][g];v(i,k.part2_3_length+k.part2_length,12),v(i,k.big_values/2,9),v(i,k.global_gain,8),v(i,k.scalefac_compress,9),k.block_type!=m.NORM_TYPE?(v(i,1,1),v(i,k.block_type,2),v(i,k.mixed_block_flag,1),14==k.table_select[0]&&(k.table_select[0]=16),v(i,k.table_select[0],5),14==k.table_select[1]&&(k.table_select[1]=16),v(i,k.table_select[1],5),v(i,k.subblock_gain[0],3),v(i,k.subblock_gain[1],3),v(i,k.subblock_gain[2],3)):(v(i,0,1),14==k.table_select[0]&&(k.table_select[0]=16),v(i,k.table_select[0],5),14==k.table_select[1]&&(k.table_select[1]=16),v(i,k.table_select[1],5),14==k.table_select[2]&&(k.table_select[2]=16),v(i,k.table_select[2],5),j(0<=k.region0_count&&k.region0_count<16),j(0<=k.region1_count&&k.region1_count<8),v(i,k.region0_count,4),v(i,k.region1_count,3)),v(i,k.scalefac_scale,1),v(i,k.count1table_select,1)}a.error_protection&&CRC_writeheader(i,i.header[i.h_ptr].buf);var l=i.h_ptr;j(i.header[l].ptr==8*i.sideinfo_len),i.h_ptr=l+1&n.MAX_HEADER_BUF-1,i.header[i.h_ptr].write_timing=i.header[l].write_timing+b,i.h_ptr==i.w_ptr&&e.err.println("Error: MAX_HEADER_BUF too small in bitstream.c \n")}(a,g);var h=8*d.sideinfo_len;if(h+=function(a){var b,c,d,e,f=0,g=a.internal_flags,h=g.l3_side;if(1==a.version)for(b=0;b<2;b++)for(c=0;c<g.channels_out;c++){var i=h.tt[b][c],l=k.slen1_tab[i.scalefac_compress],n=k.slen2_tab[i.scalefac_compress];for(d=0,e=0;d<i.sfbdivide;d++)-1!=i.scalefac[d]&&(t(g,i.scalefac[d],l),e+=l);for(;d<i.sfbmax;d++)-1!=i.scalefac[d]&&(t(g,i.scalefac[d],n),e+=n);j(e==i.part2_length),i.block_type==m.SHORT_TYPE?e+=z(g,i):e+=A(g,i),j((e+=x(g,i))==i.part2_3_length+i.part2_length),f+=e}else for(c=0,b=0;c<g.channels_out;c++){var o,p,i=h.tt[b][c],q=0;if(j(null!=i.sfb_partition_table),e=0,d=0,p=0,i.block_type==m.SHORT_TYPE){for(;p<4;p++){var r=i.sfb_partition_table[p]/3,s=i.slen[p];for(o=0;o<r;o++,d++)t(g,Math.max(i.scalefac[3*d+0],0),s),t(g,Math.max(i.scalefac[3*d+1],0),s),t(g,Math.max(i.scalefac[3*d+2],0),s),q+=3*s}e+=z(g,i)}else{for(;p<4;p++){var r=i.sfb_partition_table[p],s=i.slen[p];for(o=0;o<r;o++,d++)t(g,Math.max(i.scalefac[d],0),s),q+=s}e+=A(g,i)}j((e+=x(g,i))==i.part2_3_length),j(q==i.part2_length),f+=q+e}return f}(a),u(a,b.resvDrain_post),h+=b.resvDrain_post,b.main_data_begin+=(g-h)/8,C(a,new B)!=d.ResvSize&&e.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),8*b.main_data_begin!=d.ResvSize&&(e.err.printf("bit reservoir error: \nl3_side.main_data_begin: %d \nResvoir size:             %d \nresv drain (post)         %d \nresv drain (pre)          %d \nheader and sideinfo:      %d \ndata bits:                %d \ntotal bits:               %d (remainder: %d) \nbitsperframe:             %d \n",8*b.main_data_begin,d.ResvSize,b.resvDrain_post,b.resvDrain_pre,8*d.sideinfo_len,h-b.resvDrain_post-8*d.sideinfo_len,h,h%8,g),e.err.println("This is a fatal error.  It has several possible causes:"),e.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),e.err.println(" 9%%  Your system is overclocked"),e.err.println(" 1%%  bug in LAME encoding library"),d.ResvSize=8*b.main_data_begin),j(q%8==0),q>1e9){for(c=0;c<n.MAX_HEADER_BUF;++c)d.header[c].write_timing-=q;q=0}return 0},this.copy_buffer=function(a,d,f,g,k){var l=r+1;if(l<=0)return 0;if(0!=g&&l>g)return -1;if(e.arraycopy(p,0,d,f,l),r=-1,s=0,0!=k){var m=i(1);if(m[0]=a.nMusicCRC,o.updateMusicCRC(m,d,f,l),a.nMusicCRC=m[0],l>0&&(a.VBR_seek_table.nBytesWritten+=l),a.decode_on_the_fly){for(var n,q=h([2,1152]),t=l,u=-1;0!=u;)if(u=c.hip_decode1_unclipped(a.hip,d,f,t,q[0],q[1]),t=0,-1==u&&(u=0),u>0){if(j(u<=1152),a.findPeakSample){for(n=0;n<u;n++)q[0][n]>a.PeakSample?a.PeakSample=q[0][n]:-q[0][n]>a.PeakSample&&(a.PeakSample=-q[0][n]);if(a.channels_out>1)for(n=0;n<u;n++)q[1][n]>a.PeakSample?a.PeakSample=q[1][n]:-q[1][n]>a.PeakSample&&(a.PeakSample=-q[1][n])}if(a.findReplayGain&&b.AnalyzeSamples(a.rgdata,q[0],0,q[1],0,u,a.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return -6}}}return l},this.init_bit_stream_w=function(a){p=g(Lame.LAME_MAXMP3BUFFER),a.h_ptr=a.w_ptr=0,a.header[a.h_ptr].write_timing=0,r=-1,s=0,q=0}}o.EQ=function(a,b){return Math.abs(a)>Math.abs(b)?Math.abs(a-b)<=1e-6*Math.abs(a):Math.abs(a-b)<=1e-6*Math.abs(b)},o.NEQ=function(a,b){return!o.EQ(a,b)},b.exports=o},170739,(a,b,c)=>{var d=a.r(921088),e=d.System,f=d.VbrMode;d.Float;var g=d.ShortBlock;d.Util,d.Arrays,d.new_array_n,d.new_byte,d.new_double;var h=d.new_float;d.new_float_n,d.new_int;var i=d.new_int_n,j=d.new_short_n,k=d.assert,l=a.r(575844),m=a.r(860877),n=a.r(27181),o=a.r(521896),p=a.r(719450),q=a.r(285235),r=a.r(548178),s=a.r(869375),t=a.r(340862);function u(){var a,b,c,d,v,w,x,y,z=this;u.V9=410,u.V8=420,u.V7=430,u.V6=440,u.V5=450,u.V4=460,u.V3=470,u.V2=480,u.V1=490,u.V0=500,u.R3MIX=1e3,u.STANDARD=1001,u.EXTREME=1002,u.INSANE=1003,u.STANDARD_FAST=1004,u.EXTREME_FAST=1005,u.MEDIUM=1006,u.MEDIUM_FAST=1007,u.LAME_MAXMP3BUFFER=147456;var A=new l;function B(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=h(t.SBMAX_l),this.bo_s_weight=h(t.SBMAX_s)}function C(){this.lowerlimit=0}function D(a,b){this.lowpass=b}function E(a){return a>1?0:a<=0?1:Math.cos(Math.PI/2*a)}function F(a,b){switch(a){case 44100:return b.version=1,0;case 48e3:return b.version=1,1;case 32e3:return b.version=1,2;case 22050:case 11025:return b.version=0,0;case 24e3:case 12e3:return b.version=0,1;case 16e3:case 8e3:return b.version=0,2;default:return b.version=0,-1}}function G(a,b,c){c<16e3&&(b=2);for(var d=s.bitrate_table[b][1],e=2;e<=14;e++)s.bitrate_table[b][e]>0&&Math.abs(s.bitrate_table[b][e]-a)<Math.abs(d-a)&&(d=s.bitrate_table[b][e]);return d}function H(a,b,c){c<16e3&&(b=2);for(var d=0;d<=14;d++)if(s.bitrate_table[b][d]>0&&s.bitrate_table[b][d]==a)return d;return -1}function I(a,b){a.lowerlimit=[new D(8,2e3),new D(16,3700),new D(24,3900),new D(32,5500),new D(40,7e3),new D(48,7500),new D(56,1e4),new D(64,11e3),new D(80,13500),new D(96,15100),new D(112,15600),new D(128,17e3),new D(160,17500),new D(192,18600),new D(224,19400),new D(256,19700),new D(320,20500)][z.nearestBitrateFullIndex(b)].lowpass}function J(a){var b=t.BLKSIZE+a.framesize-t.FFTOFFSET;return b=Math.max(b,512+a.framesize-32),k(n.MFSIZE>=b),b}function K(){this.n_in=0,this.n_out=0}function L(){this.num_used=0}this.enc=new t,this.setModules=function(e,f,g,h,i,j,k,l,m){a=e,b=f,c=g,d=h,v=i,w=j,x=l,y=m,this.enc.setModules(b,A,d,w)},this.lame_init=function(){var a,b=new m;return b.class_id=0xfff88e3b,a=b.internal_flags=new n,b.mode=MPEGMode.NOT_SET,b.original=1,b.in_samplerate=44100,b.num_channels=2,b.num_samples=-1,b.bWriteVbrTag=!0,b.quality=-1,b.short_blocks=null,a.subblock_gain=-1,b.lowpassfreq=0,b.highpassfreq=0,b.lowpasswidth=-1,b.highpasswidth=-1,b.VBR=f.vbr_off,b.VBR_q=4,b.ATHcurve=-1,b.VBR_mean_bitrate_kbps=128,b.VBR_min_bitrate_kbps=0,b.VBR_max_bitrate_kbps=0,b.VBR_hard_min=0,a.VBR_min_bitrate=1,a.VBR_max_bitrate=13,b.quant_comp=-1,b.quant_comp_short=-1,b.msfix=-1,a.resample_ratio=1,a.OldValue[0]=180,a.OldValue[1]=180,a.CurrentStep[0]=4,a.CurrentStep[1]=4,a.masking_lower=1,a.nsPsy.attackthre=-1,a.nsPsy.attackthre_s=-1,b.scale=-1,b.athaa_type=-1,b.ATHtype=-1,b.athaa_loudapprox=-1,b.athaa_sensitivity=0,b.useTemporal=null,b.interChRatio=-1,a.mf_samples_to_encode=t.ENCDELAY+t.POSTDELAY,b.encoder_padding=0,a.mf_size=t.ENCDELAY-t.MDCTDELAY,b.findReplayGain=!1,b.decode_on_the_fly=!1,a.decode_on_the_fly=!1,a.findReplayGain=!1,a.findPeakSample=!1,a.RadioGain=0,a.AudiophileGain=0,a.noclipGainChange=0,a.noclipScale=-1,b.preset=0,b.write_id3tag_automatic=!0,b.lame_allocated_gfp=1,b},this.nearestBitrateFullIndex=function(a){var b=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],c=0,d=0,e=0,f=0;f=b[16],e=16,d=b[16],c=16;for(var g=0;g<16;g++)if(Math.max(a,b[g+1])!=a){f=b[g+1],e=g+1,d=b[g],c=g;break}return f-a>a-d?c:e},this.lame_init_params=function(h){var j,m,n,u,z,D,J=h.internal_flags;if(J.Class_ID=0,null==J.ATH&&(J.ATH=new o),null==J.PSY&&(J.PSY=new B),null==J.rgdata&&(J.rgdata=new p),J.channels_in=h.num_channels,1==J.channels_in&&(h.mode=MPEGMode.MONO),J.channels_out=h.mode==MPEGMode.MONO?1:2,J.mode_ext=t.MPG_MD_MS_LR,h.mode==MPEGMode.MONO&&(h.force_ms=!1),h.VBR==f.vbr_off&&128!=h.VBR_mean_bitrate_kbps&&0==h.brate&&(h.brate=h.VBR_mean_bitrate_kbps),h.VBR==f.vbr_off||h.VBR==f.vbr_mtrh||h.VBR==f.vbr_mt||(h.free_format=!1),h.VBR==f.vbr_off&&0==h.brate&&r.EQ(h.compression_ratio,0)&&(h.compression_ratio=11.025),h.VBR==f.vbr_off&&h.compression_ratio>0&&(0==h.out_samplerate&&(h.out_samplerate=map2MP3Frequency(int(.97*h.in_samplerate))),h.brate=0|16*h.out_samplerate*J.channels_out/(1e3*h.compression_ratio),J.samplerate_index=F(h.out_samplerate,h),h.free_format||(h.brate=G(h.brate,h.version,h.out_samplerate))),0!=h.out_samplerate&&(h.out_samplerate<16e3?(h.VBR_mean_bitrate_kbps=Math.max(h.VBR_mean_bitrate_kbps,8),h.VBR_mean_bitrate_kbps=Math.min(h.VBR_mean_bitrate_kbps,64)):h.out_samplerate<32e3?(h.VBR_mean_bitrate_kbps=Math.max(h.VBR_mean_bitrate_kbps,8),h.VBR_mean_bitrate_kbps=Math.min(h.VBR_mean_bitrate_kbps,160)):(h.VBR_mean_bitrate_kbps=Math.max(h.VBR_mean_bitrate_kbps,32),h.VBR_mean_bitrate_kbps=Math.min(h.VBR_mean_bitrate_kbps,320))),0==h.lowpassfreq){var K=16e3;switch(h.VBR){case f.vbr_off:var L=new C;I(L,h.brate),K=L.lowerlimit;break;case f.vbr_abr:var L=new C;I(L,h.VBR_mean_bitrate_kbps),K=L.lowerlimit;break;case f.vbr_rh:var M=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=h.VBR_q&&h.VBR_q<=9){var N=M[h.VBR_q],O=M[h.VBR_q+1],P=h.VBR_q_frac;K=linear_int(N,O,P)}else K=19500;break;default:var M=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=h.VBR_q&&h.VBR_q<=9){var N=M[h.VBR_q],O=M[h.VBR_q+1],P=h.VBR_q_frac;K=linear_int(N,O,P)}else K=19500}h.mode==MPEGMode.MONO&&(h.VBR==f.vbr_off||h.VBR==f.vbr_abr)&&(K*=1.5),h.lowpassfreq=0|K}if(0==h.out_samplerate&&(2*h.lowpassfreq>h.in_samplerate&&(h.lowpassfreq=h.in_samplerate/2),j=0|h.lowpassfreq,m=h.in_samplerate,n=44100,m>=48e3?n=48e3:m>=44100?n=44100:m>=32e3?n=32e3:m>=24e3?n=24e3:m>=22050?n=22050:m>=16e3?n=16e3:m>=12e3?n=12e3:m>=11025?n=11025:m>=8e3&&(n=8e3),h.out_samplerate=-1==j?n:(j<=15960&&(n=44100),j<=15250&&(n=32e3),j<=11220&&(n=24e3),j<=9970&&(n=22050),j<=7230&&(n=16e3),j<=5420&&(n=12e3),j<=4510&&(n=11025),j<=3970&&(n=8e3),m<n)?m>44100?48e3:m>32e3?44100:m>24e3?32e3:m>22050?24e3:m>16e3?22050:m>12e3?16e3:m>11025?12e3:m>8e3?11025:8e3:n),h.lowpassfreq=Math.min(20500,h.lowpassfreq),h.lowpassfreq=Math.min(h.out_samplerate/2,h.lowpassfreq),h.VBR==f.vbr_off&&(h.compression_ratio=16*h.out_samplerate*J.channels_out/(1e3*h.brate)),h.VBR==f.vbr_abr&&(h.compression_ratio=16*h.out_samplerate*J.channels_out/(1e3*h.VBR_mean_bitrate_kbps)),h.bWriteVbrTag||(h.findReplayGain=!1,h.decode_on_the_fly=!1,J.findPeakSample=!1),J.findReplayGain=h.findReplayGain,J.decode_on_the_fly=h.decode_on_the_fly,J.decode_on_the_fly&&(J.findPeakSample=!0),J.findReplayGain&&a.InitGainAnalysis(J.rgdata,h.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return h.internal_flags=null,-6;switch(J.decode_on_the_fly&&!h.decode_only&&(null!=J.hip&&y.hip_decode_exit(J.hip),J.hip=y.hip_decode_init()),J.mode_gr=h.out_samplerate<=24e3?1:2,h.framesize=576*J.mode_gr,h.encoder_delay=t.ENCDELAY,J.resample_ratio=h.in_samplerate/h.out_samplerate,h.VBR){case f.vbr_mt:case f.vbr_rh:case f.vbr_mtrh:h.compression_ratio=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5][h.VBR_q];break;case f.vbr_abr:h.compression_ratio=16*h.out_samplerate*J.channels_out/(1e3*h.VBR_mean_bitrate_kbps);break;default:h.compression_ratio=16*h.out_samplerate*J.channels_out/(1e3*h.brate)}if(h.mode==MPEGMode.NOT_SET&&(h.mode=MPEGMode.JOINT_STEREO),h.highpassfreq>0?(J.highpass1=2*h.highpassfreq,h.highpasswidth>=0?J.highpass2=2*(h.highpassfreq+h.highpasswidth):J.highpass2=2*h.highpassfreq,J.highpass1/=h.out_samplerate,J.highpass2/=h.out_samplerate):(J.highpass1=0,J.highpass2=0),h.lowpassfreq>0?(J.lowpass2=2*h.lowpassfreq,h.lowpasswidth>=0?(J.lowpass1=2*(h.lowpassfreq-h.lowpasswidth),J.lowpass1<0&&(J.lowpass1=0)):J.lowpass1=2*h.lowpassfreq,J.lowpass1/=h.out_samplerate,J.lowpass2/=h.out_samplerate):(J.lowpass1=0,J.lowpass2=0),!function(a){var b=a.internal_flags,c=32,d=-1;if(b.lowpass1>0){for(var f=999,g=0;g<=31;g++){var h=g/31;h>=b.lowpass2&&(c=Math.min(c,g)),b.lowpass1<h&&h<b.lowpass2&&(f=Math.min(f,g))}999==f?b.lowpass1=(c-.75)/31:b.lowpass1=(f-.75)/31,b.lowpass2=c/31}if(b.highpass2>0&&b.highpass2<.75/31*.9&&(b.highpass1=0,b.highpass2=0,e.err.println("Warning: highpass filter disabled.  highpass frequency too small\n")),b.highpass2>0){for(var i=-1,g=0;g<=31;g++){var h=g/31;h<=b.highpass1&&(d=Math.max(d,g)),b.highpass1<h&&h<b.highpass2&&(i=Math.max(i,g))}b.highpass1=d/31,-1==i?b.highpass2=(d+.75)/31:b.highpass2=(i+.75)/31}for(var g=0;g<32;g++){var j,k,h=g/31;j=b.highpass2>b.highpass1?E((b.highpass2-h)/(b.highpass2-b.highpass1+1e-20)):1,k=b.lowpass2>b.lowpass1?E((h-b.lowpass1)/(b.lowpass2-b.lowpass1+1e-20)):1,b.amp_filter[g]=j*k}}(h),J.samplerate_index=F(h.out_samplerate,h),J.samplerate_index<0)return h.internal_flags=null,-1;if(h.VBR==f.vbr_off){if(h.free_format)J.bitrate_index=0;else if(h.brate=G(h.brate,h.version,h.out_samplerate),J.bitrate_index=H(h.brate,h.version,h.out_samplerate),J.bitrate_index<=0)return h.internal_flags=null,-1}else J.bitrate_index=1;h.analysis&&(h.bWriteVbrTag=!1),null!=J.pinfo&&(h.bWriteVbrTag=!1),b.init_bit_stream_w(J);for(var Q=J.samplerate_index+3*h.version+6*(h.out_samplerate<16e3),R=0;R<t.SBMAX_l+1;R++)J.scalefac_band.l[R]=d.sfBandIndex[Q].l[R];for(var R=0;R<t.PSFB21+1;R++){var S=(J.scalefac_band.l[22]-J.scalefac_band.l[21])/t.PSFB21,T=J.scalefac_band.l[21]+R*S;J.scalefac_band.psfb21[R]=T}J.scalefac_band.psfb21[t.PSFB21]=576;for(var R=0;R<t.SBMAX_s+1;R++)J.scalefac_band.s[R]=d.sfBandIndex[Q].s[R];for(var R=0;R<t.PSFB12+1;R++){var S=(J.scalefac_band.s[13]-J.scalefac_band.s[12])/t.PSFB12,T=J.scalefac_band.s[12]+R*S;J.scalefac_band.psfb12[R]=T}for(J.scalefac_band.psfb12[t.PSFB12]=192,1==h.version?J.sideinfo_len=1==J.channels_out?21:36:J.sideinfo_len=1==J.channels_out?13:21,h.error_protection&&(J.sideinfo_len+=2),u=h.internal_flags,h.frameNum=0,h.write_id3tag_automatic&&x.id3tag_write_v2(h),u.bitrate_stereoMode_Hist=i([16,5]),u.bitrate_blockType_Hist=i([16,6]),u.PeakSample=0,h.bWriteVbrTag&&w.InitVbrTag(h),J.Class_ID=0xfff88e3b,z=0;z<19;z++)J.nsPsy.pefirbuf[z]=700*J.mode_gr*J.channels_out;switch(-1==h.ATHtype&&(h.ATHtype=4),k(h.VBR_q<=9),k(h.VBR_q>=0),h.VBR){case f.vbr_mt:h.VBR=f.vbr_mtrh;case f.vbr_mtrh:null==h.useTemporal&&(h.useTemporal=!1),c.apply_preset(h,500-10*h.VBR_q,0),h.quality<0&&(h.quality=LAME_DEFAULT_QUALITY),h.quality<5&&(h.quality=0),h.quality>5&&(h.quality=5),J.PSY.mask_adjust=h.maskingadjust,J.PSY.mask_adjust_short=h.maskingadjust_short,h.experimentalY?J.sfb21_extra=!1:J.sfb21_extra=h.out_samplerate>44e3,J.iteration_loop=new VBRNewIterationLoop(v);break;case f.vbr_rh:c.apply_preset(h,500-10*h.VBR_q,0),J.PSY.mask_adjust=h.maskingadjust,J.PSY.mask_adjust_short=h.maskingadjust_short,h.experimentalY?J.sfb21_extra=!1:J.sfb21_extra=h.out_samplerate>44e3,h.quality>6&&(h.quality=6),h.quality<0&&(h.quality=LAME_DEFAULT_QUALITY),J.iteration_loop=new VBROldIterationLoop(v);break;default:J.sfb21_extra=!1,h.quality<0&&(h.quality=LAME_DEFAULT_QUALITY),(D=h.VBR)==f.vbr_off&&(h.VBR_mean_bitrate_kbps=h.brate),c.apply_preset(h,h.VBR_mean_bitrate_kbps,0),h.VBR=D,J.PSY.mask_adjust=h.maskingadjust,J.PSY.mask_adjust_short=h.maskingadjust_short,D==f.vbr_off?J.iteration_loop=new q(v):J.iteration_loop=new ABRIterationLoop(v)}if(k(h.scale>=0),h.VBR!=f.vbr_off){if(J.VBR_min_bitrate=1,J.VBR_max_bitrate=14,h.out_samplerate<16e3&&(J.VBR_max_bitrate=8),0!=h.VBR_min_bitrate_kbps&&(h.VBR_min_bitrate_kbps=G(h.VBR_min_bitrate_kbps,h.version,h.out_samplerate),J.VBR_min_bitrate=H(h.VBR_min_bitrate_kbps,h.version,h.out_samplerate),J.VBR_min_bitrate<0)||0!=h.VBR_max_bitrate_kbps&&(h.VBR_max_bitrate_kbps=G(h.VBR_max_bitrate_kbps,h.version,h.out_samplerate),J.VBR_max_bitrate=H(h.VBR_max_bitrate_kbps,h.version,h.out_samplerate),J.VBR_max_bitrate<0))return -1;h.VBR_min_bitrate_kbps=s.bitrate_table[h.version][J.VBR_min_bitrate],h.VBR_max_bitrate_kbps=s.bitrate_table[h.version][J.VBR_max_bitrate],h.VBR_mean_bitrate_kbps=Math.min(s.bitrate_table[h.version][J.VBR_max_bitrate],h.VBR_mean_bitrate_kbps),h.VBR_mean_bitrate_kbps=Math.max(s.bitrate_table[h.version][J.VBR_min_bitrate],h.VBR_mean_bitrate_kbps)}h.tune&&(J.PSY.mask_adjust+=h.tune_value_a,J.PSY.mask_adjust_short+=h.tune_value_a);var U=h.internal_flags;switch(h.quality){default:case 9:U.psymodel=0,U.noise_shaping=0,U.noise_shaping_amp=0,U.noise_shaping_stop=0,U.use_best_huffman=0,U.full_outer_loop=0;break;case 8:h.quality=7;case 7:U.psymodel=1,U.noise_shaping=0,U.noise_shaping_amp=0,U.noise_shaping_stop=0,U.use_best_huffman=0,U.full_outer_loop=0;break;case 6:case 5:U.psymodel=1,0==U.noise_shaping&&(U.noise_shaping=1),U.noise_shaping_amp=0,U.noise_shaping_stop=0,-1==U.subblock_gain&&(U.subblock_gain=1),U.use_best_huffman=0,U.full_outer_loop=0;break;case 4:U.psymodel=1,0==U.noise_shaping&&(U.noise_shaping=1),U.noise_shaping_amp=0,U.noise_shaping_stop=0,-1==U.subblock_gain&&(U.subblock_gain=1),U.use_best_huffman=1,U.full_outer_loop=0;break;case 3:U.psymodel=1,0==U.noise_shaping&&(U.noise_shaping=1),U.noise_shaping_amp=1,U.noise_shaping_stop=1,-1==U.subblock_gain&&(U.subblock_gain=1),U.use_best_huffman=1,U.full_outer_loop=0;break;case 2:U.psymodel=1,0==U.noise_shaping&&(U.noise_shaping=1),0==U.substep_shaping&&(U.substep_shaping=2),U.noise_shaping_amp=1,U.noise_shaping_stop=1,-1==U.subblock_gain&&(U.subblock_gain=1),U.use_best_huffman=1,U.full_outer_loop=0;break;case 1:case 0:U.psymodel=1,0==U.noise_shaping&&(U.noise_shaping=1),0==U.substep_shaping&&(U.substep_shaping=2),U.noise_shaping_amp=2,U.noise_shaping_stop=1,-1==U.subblock_gain&&(U.subblock_gain=1),U.use_best_huffman=1,U.full_outer_loop=0}return k(h.scale>=0),h.athaa_type<0?J.ATH.useAdjust=3:J.ATH.useAdjust=h.athaa_type,J.ATH.aaSensitivityP=Math.pow(10,-(h.athaa_sensitivity/10)),null==h.short_blocks&&(h.short_blocks=g.short_block_allowed),h.short_blocks==g.short_block_allowed&&(h.mode==MPEGMode.JOINT_STEREO||h.mode==MPEGMode.STEREO)&&(h.short_blocks=g.short_block_coupled),h.quant_comp<0&&(h.quant_comp=1),h.quant_comp_short<0&&(h.quant_comp_short=0),h.msfix<0&&(h.msfix=0),h.exp_nspsytune=1|h.exp_nspsytune,h.internal_flags.nsPsy.attackthre<0&&(h.internal_flags.nsPsy.attackthre=l.NSATTACKTHRE),h.internal_flags.nsPsy.attackthre_s<0&&(h.internal_flags.nsPsy.attackthre_s=l.NSATTACKTHRE_S),k(h.scale>=0),h.scale<0&&(h.scale=1),h.ATHtype<0&&(h.ATHtype=4),h.ATHcurve<0&&(h.ATHcurve=4),h.athaa_loudapprox<0&&(h.athaa_loudapprox=2),h.interChRatio<0&&(h.interChRatio=0),null==h.useTemporal&&(h.useTemporal=!0),J.slot_lag=J.frac_SpF=0,h.VBR==f.vbr_off&&(J.slot_lag=J.frac_SpF=(h.version+1)*72e3*h.brate%h.out_samplerate|0),d.iteration_init(h),A.psymodel_init(h),k(h.scale>=0),0},this.lame_encode_flush=function(a,c,d,e){var f,g,h,i,k=a.internal_flags,l=j([2,1152]),m=0,n=k.mf_samples_to_encode-t.POSTDELAY,o=J(a);if(k.mf_samples_to_encode<1)return 0;for(h=0,a.in_samplerate!=a.out_samplerate&&(n+=16*a.out_samplerate/a.in_samplerate),(f=a.framesize-n%a.framesize)<576&&(f+=a.framesize),a.encoder_padding=f,g=(n+f)/a.framesize;g>0&&m>=0;){var p=o-k.mf_size,q=a.frameNum;p*=a.in_samplerate,(p/=a.out_samplerate)>1152&&(p=1152),p<1&&(p=1),i=e-h,0==e&&(i=0),m=this.lame_encode_buffer(a,l[0],l[1],p,c,d,i),d+=m,h+=m,g-=q!=a.frameNum}if(k.mf_samples_to_encode=0,m<0||(i=e-h,0==e&&(i=0),b.flush_bitstream(a),(m=b.copy_buffer(k,c,d,i,1))<0))return m;if(d+=m,h+=m,i=e-h,0==e&&(i=0),a.write_id3tag_automatic){if(x.id3tag_write_v1(a),(m=b.copy_buffer(k,c,d,i,0))<0)return m;h+=m}return h},this.lame_encode_buffer=function(c,d,e,f,g,i,j){var l=c.internal_flags,m=[null,null];if(0xfff88e3b!=l.Class_ID)return -3;if(0==f)return 0;(null==l.in_buffer_0||l.in_buffer_nsamples<f)&&(l.in_buffer_0=h(f),l.in_buffer_1=h(f),l.in_buffer_nsamples=f),m[0]=l.in_buffer_0,m[1]=l.in_buffer_1;for(var o=0;o<f;o++)m[0][o]=d[o],l.channels_in>1&&(m[1][o]=e[o]);return function(c,d,e,f,g,i,j){var l,m,o,p,q,s=c.internal_flags,u=0,v=[null,null],w=[null,null];if(0xfff88e3b!=s.Class_ID)return -3;if(0==f)return 0;if((l=b.copy_buffer(s,g,i,j,0))<0)return l;if(i+=l,u+=l,w[0]=d,w[1]=e,r.NEQ(c.scale,0)&&r.NEQ(c.scale,1))for(o=0;o<f;++o)w[0][o]*=c.scale,2==s.channels_out&&(w[1][o]*=c.scale);if(r.NEQ(c.scale_left,0)&&r.NEQ(c.scale_left,1))for(o=0;o<f;++o)w[0][o]*=c.scale_left;if(r.NEQ(c.scale_right,0)&&r.NEQ(c.scale_right,1))for(o=0;o<f;++o)w[1][o]*=c.scale_right;if(2==c.num_channels&&1==s.channels_out)for(o=0;o<f;++o)w[0][o]=.5*(w[0][o]+w[1][o]),w[1][o]=0;q=J(c),v[0]=s.mfbuf[0],v[1]=s.mfbuf[1];for(var x=0;f>0;){var y=[null,null],A=0,B=0;y[0]=w[0],y[1]=w[1];var C=new K;if(function(a,b,c,d,e,f){var g=a.internal_flags;if(g.resample_ratio<.9999||g.resample_ratio>1.0001)for(var i=0;i<g.channels_out;i++){var j=new L;f.n_out=function(a,b,c,d,e,f,g,i,j){var l,m,o=a.internal_flags,p=0,q=a.out_samplerate/function a(b,c){return 0!=c?a(c,b%c):b}(a.out_samplerate,a.in_samplerate);q>n.BPC&&(q=n.BPC);var r=+(1e-4>Math.abs(o.resample_ratio-Math.floor(.5+o.resample_ratio))),s=1/o.resample_ratio;s>1&&(s=1);var t=(y=31+r)+1;if(0==o.fill_buffer_resample_init){for(l=0,o.inbuf_old[0]=h(t),o.inbuf_old[1]=h(t);l<=2*q;++l)o.blackfilt[l]=h(t);for(p=0,o.itime[0]=0,o.itime[1]=0;p<=2*q;p++){var u=0,v=(p-q)/(2*q);for(l=0;l<=y;l++)u+=o.blackfilt[p][l]=function(a,b,c){var d=Math.PI*b;(a/=c)<0&&(a=0),a>1&&(a=1);var e=a-.5,f=.42-.5*Math.cos(2*a*Math.PI)+.08*Math.cos(4*a*Math.PI);return 1e-9>Math.abs(e)?d/Math.PI:f*Math.sin(c*d*e)/(Math.PI*c*e)}(l-v,s,y);for(l=0;l<=y;l++)o.blackfilt[p][l]/=u}o.fill_buffer_resample_init=1}var w=o.inbuf_old[j];for(m=0;m<d&&!(y+(p=0|Math.floor((z=m*o.resample_ratio)-o.itime[j]))-y/2>=g);m++){var v=z-o.itime[j]-(p+y%2*.5);k(.501>=Math.abs(v)),A=0|Math.floor(2*v*q+q+.5);var x=0;for(l=0;l<=y;++l){var y,z,A,B=0|l+p-y/2;k(B<g),k(B+t>=0),x+=(B<0?w[t+B]:e[f+B])*o.blackfilt[A][l]}b[c+m]=x}if(i.num_used=Math.min(g,y+p-y/2),o.itime[j]+=i.num_used-m*o.resample_ratio,i.num_used>=t)for(l=0;l<t;l++)w[l]=e[f+i.num_used+l-t];else{var C=t-i.num_used;for(l=0;l<C;++l)w[l]=w[l+i.num_used];for(p=0;l<t;++l,++p)w[l]=e[f+p];k(p==i.num_used)}return m}(a,b[i],g.mf_size,a.framesize,c[i],d,e,j,i),f.n_in=j.num_used}else{f.n_out=Math.min(a.framesize,e),f.n_in=f.n_out;for(var l=0;l<f.n_out;++l)b[0][g.mf_size+l]=c[0][d+l],2==g.channels_out&&(b[1][g.mf_size+l]=c[1][d+l])}}(c,v,y,x,f,C),A=C.n_in,B=C.n_out,s.findReplayGain&&!s.decode_on_the_fly&&a.AnalyzeSamples(s.rgdata,v[0],s.mf_size,v[1],s.mf_size,B,s.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return -6;if(f-=A,x+=A,s.channels_out,s.mf_size+=B,k(s.mf_size<=n.MFSIZE),s.mf_samples_to_encode<1&&(s.mf_samples_to_encode=t.ENCDELAY+t.POSTDELAY),s.mf_samples_to_encode+=B,s.mf_size>=q){var D=j-u;if(0==j&&(D=0),(m=function(a,b,c,d,e,f){var g=z.enc.lame_encode_mp3_frame(a,b,c,d,e,f);return a.frameNum++,g}(c,v[0],v[1],g,i,D))<0)return m;for(i+=m,u+=m,s.mf_size-=c.framesize,s.mf_samples_to_encode-=c.framesize,p=0;p<s.channels_out;p++)for(o=0;o<s.mf_size;o++)v[p][o]=v[p][o+c.framesize]}}return k(0==f),u}(c,m[0],m[1],f,g,i,j)}}b.exports=u},942810,(a,b,c)=>{var d=a.r(921088);d.System;var e=d.VbrMode;d.Float,d.ShortBlock,d.Util,d.Arrays,d.new_array_n,d.new_byte,d.new_double,d.new_float,d.new_float_n,d.new_int,d.new_int_n,d.assert,b.exports=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){this.vbr_q=a,this.quant_comp=b,this.quant_comp_s=c,this.expY=d,this.st_lrm=e,this.st_s=f,this.masking_adj=g,this.masking_adj_short=h,this.ath_lower=i,this.ath_curve=j,this.ath_sensitivity=k,this.interch=l,this.safejoint=m,this.sfb21mod=n,this.msfix=o}function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n){this.quant_comp=b,this.quant_comp_s=c,this.safejoint=d,this.nsmsfix=e,this.st_lrm=f,this.st_s=g,this.nsbass=h,this.scale=i,this.masking_adj=j,this.ath_lower=k,this.ath_curve=l,this.interch=m,this.sfscale=n}this.setModules=function(a){c=a};var c,d=[new a(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new a(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new a(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new a(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new a(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new a(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new a(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new a(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new a(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new a(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new a(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],f=[new a(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new a(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new a(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new a(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new a(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new a(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new a(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new a(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new a(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new a(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new a(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function g(a,b,c){var g,h,i=a.VBR==e.vbr_rh?d:f,j=a.VBR_q_frac,k=i[b],l=i[b+1];k.st_lrm=k.st_lrm+j*(l.st_lrm-k.st_lrm),k.st_s=k.st_s+j*(l.st_s-k.st_s),k.masking_adj=k.masking_adj+j*(l.masking_adj-k.masking_adj),k.masking_adj_short=k.masking_adj_short+j*(l.masking_adj_short-k.masking_adj_short),k.ath_lower=k.ath_lower+j*(l.ath_lower-k.ath_lower),k.ath_curve=k.ath_curve+j*(l.ath_curve-k.ath_curve),k.ath_sensitivity=k.ath_sensitivity+j*(l.ath_sensitivity-k.ath_sensitivity),k.interch=k.interch+j*(l.interch-k.interch),k.msfix=k.msfix+j*(l.msfix-k.msfix),g=a,h=k.vbr_q,0>h&&(h=0),9<h&&(h=9),g.VBR_q=h,g.VBR_q_frac=0,0!=c?a.quant_comp=k.quant_comp:Math.abs(a.quant_comp- -1)>0||(a.quant_comp=k.quant_comp),0!=c?a.quant_comp_short=k.quant_comp_s:Math.abs(a.quant_comp_short- -1)>0||(a.quant_comp_short=k.quant_comp_s),0!=k.expY&&(a.experimentalY=0!=k.expY),0!=c?a.internal_flags.nsPsy.attackthre=k.st_lrm:Math.abs(a.internal_flags.nsPsy.attackthre- -1)>0||(a.internal_flags.nsPsy.attackthre=k.st_lrm),0!=c?a.internal_flags.nsPsy.attackthre_s=k.st_s:Math.abs(a.internal_flags.nsPsy.attackthre_s- -1)>0||(a.internal_flags.nsPsy.attackthre_s=k.st_s),0!=c?a.maskingadjust=k.masking_adj:Math.abs(a.maskingadjust-0)>0||(a.maskingadjust=k.masking_adj),0!=c?a.maskingadjust_short=k.masking_adj_short:Math.abs(a.maskingadjust_short-0)>0||(a.maskingadjust_short=k.masking_adj_short),0!=c?a.ATHlower=-k.ath_lower/10:Math.abs(-(10*a.ATHlower)-0)>0||(a.ATHlower=-k.ath_lower/10),0!=c?a.ATHcurve=k.ath_curve:Math.abs(a.ATHcurve- -1)>0||(a.ATHcurve=k.ath_curve),0!=c?a.athaa_sensitivity=k.ath_sensitivity:Math.abs(a.athaa_sensitivity- -1)>0||(a.athaa_sensitivity=k.ath_sensitivity),k.interch>0&&(0!=c?a.interChRatio=k.interch:Math.abs(a.interChRatio- -1)>0||(a.interChRatio=k.interch)),k.safejoint>0&&(a.exp_nspsytune=a.exp_nspsytune|k.safejoint),k.sfb21mod>0&&(a.exp_nspsytune=a.exp_nspsytune|k.sfb21mod<<20),0!=c?a.msfix=k.msfix:Math.abs(a.msfix- -1)>0||(a.msfix=k.msfix),0==c&&(a.VBR_q=b,a.VBR_q_frac=j)}var h=[new b(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new b(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new b(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new b(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new b(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new b(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new b(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new b(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new b(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new b(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new b(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new b(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new b(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new b(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new b(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new b(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new b(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function i(a,b,d){var f=c.nearestBitrateFullIndex(b);if(a.VBR=e.vbr_abr,a.VBR_mean_bitrate_kbps=b,a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,320),a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.brate=a.VBR_mean_bitrate_kbps,a.VBR_mean_bitrate_kbps>320&&(a.disable_reservoir=!0),h[f].safejoint>0&&(a.exp_nspsytune=2|a.exp_nspsytune),h[f].sfscale>0&&(a.internal_flags.noise_shaping=2),Math.abs(h[f].nsbass)>0){var g=int(4*h[f].nsbass);g<0&&(g+=64),a.exp_nspsytune=a.exp_nspsytune|g<<2}return 0!=d?a.quant_comp=h[f].quant_comp:Math.abs(a.quant_comp- -1)>0||(a.quant_comp=h[f].quant_comp),0!=d?a.quant_comp_short=h[f].quant_comp_s:Math.abs(a.quant_comp_short- -1)>0||(a.quant_comp_short=h[f].quant_comp_s),0!=d?a.msfix=h[f].nsmsfix:Math.abs(a.msfix- -1)>0||(a.msfix=h[f].nsmsfix),0!=d?a.internal_flags.nsPsy.attackthre=h[f].st_lrm:Math.abs(a.internal_flags.nsPsy.attackthre- -1)>0||(a.internal_flags.nsPsy.attackthre=h[f].st_lrm),0!=d?a.internal_flags.nsPsy.attackthre_s=h[f].st_s:Math.abs(a.internal_flags.nsPsy.attackthre_s- -1)>0||(a.internal_flags.nsPsy.attackthre_s=h[f].st_s),0!=d?a.scale=h[f].scale:Math.abs(a.scale- -1)>0||(a.scale=h[f].scale),0!=d?a.maskingadjust=h[f].masking_adj:Math.abs(a.maskingadjust-0)>0||(a.maskingadjust=h[f].masking_adj),h[f].masking_adj>0?0!=d?a.maskingadjust_short=.9*h[f].masking_adj:Math.abs(a.maskingadjust_short-0)>0||(a.maskingadjust_short=.9*h[f].masking_adj):0!=d?a.maskingadjust_short=1.1*h[f].masking_adj:Math.abs(a.maskingadjust_short-0)>0||(a.maskingadjust_short=1.1*h[f].masking_adj),0!=d?a.ATHlower=-h[f].ath_lower/10:Math.abs(-(10*a.ATHlower)-0)>0||(a.ATHlower=-h[f].ath_lower/10),0!=d?a.ATHcurve=h[f].ath_curve:Math.abs(a.ATHcurve- -1)>0||(a.ATHcurve=h[f].ath_curve),0!=d?a.interChRatio=h[f].interch:Math.abs(a.interChRatio- -1)>0||(a.interChRatio=h[f].interch),b}this.apply_preset=function(a,b,c){switch(b){case Lame.R3MIX:b=Lame.V3,a.VBR=e.vbr_mtrh;break;case Lame.MEDIUM:b=Lame.V4,a.VBR=e.vbr_rh;break;case Lame.MEDIUM_FAST:b=Lame.V4,a.VBR=e.vbr_mtrh;break;case Lame.STANDARD:b=Lame.V2,a.VBR=e.vbr_rh;break;case Lame.STANDARD_FAST:b=Lame.V2,a.VBR=e.vbr_mtrh;break;case Lame.EXTREME:b=Lame.V0,a.VBR=e.vbr_rh;break;case Lame.EXTREME_FAST:b=Lame.V0,a.VBR=e.vbr_mtrh;break;case Lame.INSANE:return a.preset=b=320,i(a,b,c),a.VBR=e.vbr_off,b}switch(a.preset=b,b){case Lame.V9:return g(a,9,c),b;case Lame.V8:return g(a,8,c),b;case Lame.V7:return g(a,7,c),b;case Lame.V6:return g(a,6,c),b;case Lame.V5:return g(a,5,c),b;case Lame.V4:return g(a,4,c),b;case Lame.V3:return g(a,3,c),b;case Lame.V2:return g(a,2,c),b;case Lame.V1:return g(a,1,c),b;case Lame.V0:return g(a,0,c),b}return 8<=b&&b<=320?i(a,b,c):(a.preset=0,b)}}},521411,(a,b,c)=>{b.exports=function(){this.setModules=function(a,b){}}},783491,(a,b,c)=>{b.exports=function(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}},594244,(a,b,c)=>{var d=a.r(921088),e=d.new_float,f=d.new_int;d.assert,b.exports=function(){this.global_gain=0,this.sfb_count1=0,this.step=f(39),this.noise=e(39),this.noise_log=e(39)}},791765,(a,b,c)=>{var d=a.r(921088),e=d.System,f=d.VbrMode;d.Float,d.ShortBlock;var g=d.Util,h=d.Arrays;d.new_array_n,d.new_byte,d.new_double;var i=d.new_float;d.new_float_n,d.new_int,d.new_int_n;var j=d.assert,k=a.r(521411),l=a.r(783491),m=a.r(594244),n=a.r(340862),o=a.r(758511),p=a.r(374427);b.exports=function(){this.rv=null,this.qupvt=null;var a,b,c,d,q=new k;function r(a){this.ordinal=a}function s(a){for(var b=0;b<a.sfbmax;b++)if(a.scalefac[b]+a.subblock_gain[a.window[b]]==0)return!1;return!0}this.setModules=function(e,f,g,h){a=e,b=f,this.rv=f,c=g,this.qupvt=g,d=h,q.setModules(c,d)},this.ms_convert=function(a,b){for(var c=0;c<576;++c){var d=a.tt[b][0].xr[c],e=a.tt[b][1].xr[c];a.tt[b][0].xr[c]=(d+e)*(.5*g.SQRT2),a.tt[b][1].xr[c]=(d-e)*(.5*g.SQRT2)}},this.init_xrpow=function(a,b,c){var d=0,e=0|b.max_nonzero_coeff;if(j(null!=c),b.xrpow_max=0,j(0<=e&&e<=575),h.fill(c,e,576,0),(d=function(a,b,c,d){d=0;for(var e=0;e<=c;++e){var f=Math.abs(a.xr[e]);d+=f,b[e]=Math.sqrt(f*Math.sqrt(f)),b[e]>a.xrpow_max&&(a.xrpow_max=b[e])}return d}(b,c,e,d))>1e-20){var f=0;(2&a.substep_shaping)!=0&&(f=1);for(var g=0;g<b.psymax;g++)a.pseudohalf[g]=f;return!0}return h.fill(b.l3_enc,0,576,0),!1},this.init_outer_loop=function(a,b){b.part2_3_length=0,b.big_values=0,b.count1=0,b.global_gain=210,b.scalefac_compress=0,b.table_select[0]=0,b.table_select[1]=0,b.table_select[2]=0,b.subblock_gain[0]=0,b.subblock_gain[1]=0,b.subblock_gain[2]=0,b.subblock_gain[3]=0,b.region0_count=0,b.region1_count=0,b.preflag=0,b.scalefac_scale=0,b.count1table_select=0,b.part2_length=0,b.sfb_lmax=n.SBPSY_l,b.sfb_smin=n.SBPSY_s,b.psy_lmax=a.sfb21_extra?n.SBMAX_l:n.SBPSY_l,b.psymax=b.psy_lmax,b.sfbmax=b.sfb_lmax,b.sfbdivide=11;for(var d=0;d<n.SBMAX_l;d++)b.width[d]=a.scalefac_band.l[d+1]-a.scalefac_band.l[d],b.window[d]=3;if(b.block_type==n.SHORT_TYPE){var f=i(576);b.sfb_smin=0,b.sfb_lmax=0,0!=b.mixed_block_flag&&(b.sfb_smin=3,b.sfb_lmax=2*a.mode_gr+4),b.psymax=b.sfb_lmax+3*((a.sfb21_extra?n.SBMAX_s:n.SBPSY_s)-b.sfb_smin),b.sfbmax=b.sfb_lmax+3*(n.SBPSY_s-b.sfb_smin),b.sfbdivide=b.sfbmax-18,b.psy_lmax=b.sfb_lmax;var g=a.scalefac_band.l[b.sfb_lmax];e.arraycopy(b.xr,0,f,0,576);for(var d=b.sfb_smin;d<n.SBMAX_s;d++)for(var j=a.scalefac_band.s[d],k=a.scalefac_band.s[d+1],l=0;l<3;l++)for(var m=j;m<k;m++)b.xr[g++]=f[3*m+l];for(var o=b.sfb_lmax,d=b.sfb_smin;d<n.SBMAX_s;d++)b.width[o]=b.width[o+1]=b.width[o+2]=a.scalefac_band.s[d+1]-a.scalefac_band.s[d],b.window[o]=0,b.window[o+1]=1,b.window[o+2]=2,o+=3}b.count1bits=0,b.sfb_partition_table=c.nr_of_sfb_block[0][0],b.slen[0]=0,b.slen[1]=0,b.slen[2]=0,b.slen[3]=0,b.max_nonzero_coeff=575,h.fill(b.scalefac,0),function(a,b){var d=a.ATH,e=b.xr;if(b.block_type!=n.SHORT_TYPE)for(var f=!1,g=n.PSFB21-1;g>=0&&!f;g--){var h=a.scalefac_band.psfb21[g],i=a.scalefac_band.psfb21[g+1],j=c.athAdjust(d.adjust,d.psfb21[g],d.floor);a.nsPsy.longfact[21]>1e-12&&(j*=a.nsPsy.longfact[21]);for(var k=i-1;k>=h;k--)if(Math.abs(e[k])<j)e[k]=0;else{f=!0;break}}else for(var l=0;l<3;l++)for(var f=!1,g=n.PSFB12-1;g>=0&&!f;g--){var h=3*a.scalefac_band.s[12]+(a.scalefac_band.s[13]-a.scalefac_band.s[12])*l+(a.scalefac_band.psfb12[g]-a.scalefac_band.psfb12[0]),i=h+(a.scalefac_band.psfb12[g+1]-a.scalefac_band.psfb12[g]),m=c.athAdjust(d.adjust,d.psfb12[g],d.floor);a.nsPsy.shortfact[12]>1e-12&&(m*=a.nsPsy.shortfact[12]);for(var k=i-1;k>=h;k--)if(Math.abs(e[k])<m)e[k]=0;else{f=!0;break}}}(a,b)},r.BINSEARCH_NONE=new r(0),r.BINSEARCH_UP=new r(1),r.BINSEARCH_DOWN=new r(2),this.trancate_smallspectrums=function(a,b,e,f){var g=i(p.SFBMAX);if((0!=(4&a.substep_shaping)||b.block_type!=n.SHORT_TYPE)&&(128&a.substep_shaping)==0){c.calc_noise(b,e,g,new l,null);for(var j=0;j<576;j++){var k=0;0!=b.l3_enc[j]&&(k=Math.abs(b.xr[j])),f[j]=k}var j=0,m=8;b.block_type==n.SHORT_TYPE&&(m=6);do{var o,q,r,s,t,u=b.width[m];if(j+=u,g[m]>=1||(h.sort(f,j-u,u),BitStream.EQ(f[j-1],0)))continue;o=(1-g[m])*e[m],q=0,s=0;do{for(r=1;s+r<u&&!BitStream.NEQ(f[s+j-u],f[s+j+r-u]);r++);if(o<(t=f[s+j-u]*f[s+j-u]*r)){0!=s&&(q=f[s+j-u-1]);break}o-=t,s+=r}while(s<u)if(BitStream.EQ(q,0))continue;do Math.abs(b.xr[j-u])<=q&&(b.l3_enc[j-u]=0);while(--u>0)}while(++m<b.psymax)b.part2_3_length=d.noquant_count_bits(a,b,null)}},this.outer_loop=function(a,b,k,q,t,u){var v=a.internal_flags,w=new o,x=i(576),y=i(p.SFBMAX),z=new l,A=new m,B=9999999,C=!1,D=!1,E=0;if(!function(a,b,c,e,f){var g,h,i=a.CurrentStep[e],k=!1,l=a.OldValue[e],m=r.BINSEARCH_NONE;for(b.global_gain=l,c-=b.part2_length,j(0!=i);g=d.count_bits(a,f,b,null),1!=i&&g!=c;)g>c?(m==r.BINSEARCH_DOWN&&(k=!0),k&&(i/=2),m=r.BINSEARCH_UP,h=i):(m==r.BINSEARCH_UP&&(k=!0),k&&(i/=2),m=r.BINSEARCH_DOWN,h=-i),b.global_gain+=h,b.global_gain<0&&(b.global_gain=0,k=!0),b.global_gain>255&&(b.global_gain=255,k=!0);for(j(b.global_gain>=0),j(b.global_gain<256);g>c&&b.global_gain<255;)b.global_gain++,g=d.count_bits(a,f,b,null);a.CurrentStep[e]=l-b.global_gain>=4?4:2,a.OldValue[e]=b.global_gain,b.part2_3_length=g}(v,b,u,t,q),0==v.noise_shaping)return 100;c.calc_noise(b,k,y,z,A),z.bits=b.part2_3_length,w.assign(b);var F=0;for(e.arraycopy(q,0,x,0,576);!C;){do{var G,H=new l,I=255;if(G=(2&v.substep_shaping)!=0?20:3,v.sfb21_extra&&(y[w.sfbmax]>1||w.block_type==n.SHORT_TYPE&&(y[w.sfbmax+1]>1||y[w.sfbmax+2]>1))||!function(a,b,e,f,g){var i=a.internal_flags;!function(a,b,c,d,e){var f=a.internal_flags;k=0==b.scalefac_scale?1.2968395546510096:1.6817928305074292;for(var g=0,h=0;h<b.sfbmax;h++)g<c[h]&&(g=c[h]);var i=f.noise_shaping_amp;switch(3==i&&(i=e?2:1),i){case 2:break;case 1:g>1?g=Math.pow(g,.5):g*=.95;break;default:g>1?g=1:g*=.95}for(var j=0,h=0;h<b.sfbmax;h++){var k,l,m=b.width[h];if(j+=m,!(c[h]<g)){if((2&f.substep_shaping)!=0&&(f.pseudohalf[h]=+(0==f.pseudohalf[h]),0==f.pseudohalf[h]&&2==f.noise_shaping_amp))return;for(b.scalefac[h]++,l=-m;l<0;l++)d[j+l]*=k,d[j+l]>b.xrpow_max&&(b.xrpow_max=d[j+l]);if(2==f.noise_shaping_amp)return}}}(a,b,e,f,g);var k=s(b);return!k&&(!(k=2==i.mode_gr?d.scale_bitcount(b):d.scale_bitcount_lsf(i,b))||(i.noise_shaping>1&&(h.fill(i.pseudohalf,0),0==b.scalefac_scale?(!function(a,b){for(var d=0,e=0;e<a.sfbmax;e++){var f=a.width[e],g=a.scalefac[e];if(0!=a.preflag&&(g+=c.pretab[e]),d+=f,(1&g)!=0){g++;for(var h=-f;h<0;h++)b[d+h]*=1.2968395546510096,b[d+h]>a.xrpow_max&&(a.xrpow_max=b[d+h])}a.scalefac[e]=g>>1}a.preflag=0,a.scalefac_scale=1}(b,f),k=!1):b.block_type==n.SHORT_TYPE&&i.subblock_gain>0&&(k=function(a,b,d){var e=b.scalefac;for(k=0;k<b.sfb_lmax;k++)if(e[k]>=16)return!0;for(var f=0;f<3;f++){var g=0,h=0;for(k=b.sfb_lmax+f;k<b.sfbdivide;k+=3)g<e[k]&&(g=e[k]);for(;k<b.sfbmax;k+=3)h<e[k]&&(h=e[k]);if(!(g<16)||!(h<8)){if(b.subblock_gain[f]>=7)return!0;b.subblock_gain[f]++;var i=a.scalefac_band.l[b.sfb_lmax];for(k=b.sfb_lmax+f;k<b.sfbmax;k+=3){var k,l,m=b.width[k],n=e[k];if(j(n>=0),(n-=4>>b.scalefac_scale)>=0){e[k]=n,i+=3*m;continue}e[k]=0;var o=210+(n<<b.scalefac_scale+1);l=c.IPOW20(o),i+=m*(f+1);for(var p=-m;p<0;p++)d[i+p]*=l,d[i+p]>b.xrpow_max&&(b.xrpow_max=d[i+p]);i+=m*(3-f-1)}var l=c.IPOW20(202);i+=b.width[k]*(f+1);for(var p=-b.width[k];p<0;p++)d[i+p]*=l,d[i+p]>b.xrpow_max&&(b.xrpow_max=d[i+p])}}return!1}(i,b,f)||s(b))),k||(k=2==i.mode_gr?d.scale_bitcount(b):d.scale_bitcount_lsf(i,b)),!k))}(a,w,y,q,D))break;0!=w.scalefac_scale&&(I=254);var J=u-w.part2_length;if(J<=0)break;for(;(w.part2_3_length=d.count_bits(v,q,w,A))>J&&w.global_gain<=I;)w.global_gain++;if(w.global_gain>I)break;if(0==z.over_count){for(;(w.part2_3_length=d.count_bits(v,q,w,A))>B&&w.global_gain<=I;)w.global_gain++;if(w.global_gain>I)break}if(c.calc_noise(w,k,y,H,A),H.bits=w.part2_3_length,0!=+!!function(a,b,c,d,e){var f;switch(a){default:case 9:b.over_count>0?(f=c.over_SSD<=b.over_SSD,c.over_SSD==b.over_SSD&&(f=c.bits<b.bits)):f=c.max_noise<0&&10*c.max_noise+c.bits<=10*b.max_noise+b.bits;break;case 0:f=c.over_count<b.over_count||c.over_count==b.over_count&&c.over_noise<b.over_noise||c.over_count==b.over_count&&BitStream.EQ(c.over_noise,b.over_noise)&&c.tot_noise<b.tot_noise;break;case 8:c.max_noise=function(a,b){for(var c,d=1e-37,e=0;e<b.psymax;e++)d+=(c=a[e],g.FAST_LOG10(.368+.632*c*c*c));return Math.max(1e-20,d)}(e,d);case 1:f=c.max_noise<b.max_noise;break;case 2:f=c.tot_noise<b.tot_noise;break;case 3:f=c.tot_noise<b.tot_noise&&c.max_noise<b.max_noise;break;case 4:f=c.max_noise<=0&&b.max_noise>.2||c.max_noise<=0&&b.max_noise<0&&b.max_noise>c.max_noise-.2&&c.tot_noise<b.tot_noise||c.max_noise<=0&&b.max_noise>0&&b.max_noise>c.max_noise-.2&&c.tot_noise<b.tot_noise+b.over_noise||c.max_noise>0&&b.max_noise>-.05&&b.max_noise>c.max_noise-.1&&c.tot_noise+c.over_noise<b.tot_noise+b.over_noise||c.max_noise>0&&b.max_noise>-.1&&b.max_noise>c.max_noise-.15&&c.tot_noise+c.over_noise+c.over_noise<b.tot_noise+b.over_noise+b.over_noise;break;case 5:f=c.over_noise<b.over_noise||BitStream.EQ(c.over_noise,b.over_noise)&&c.tot_noise<b.tot_noise;break;case 6:f=c.over_noise<b.over_noise||BitStream.EQ(c.over_noise,b.over_noise)&&(c.max_noise<b.max_noise||BitStream.EQ(c.max_noise,b.max_noise)&&c.tot_noise<=b.tot_noise);break;case 7:f=c.over_count<b.over_count||c.over_noise<b.over_noise}return 0==b.over_count&&(f=f&&c.bits<b.bits),f}(b.block_type!=n.SHORT_TYPE?a.quant_comp:a.quant_comp_short,z,H,w,y))B=b.part2_3_length,z=H,b.assign(w),F=0,e.arraycopy(q,0,x,0,576);else if(0==v.full_outer_loop&&(++F>G&&0==z.over_count||3==v.noise_shaping_amp&&D&&F>30||3==v.noise_shaping_amp&&D&&w.global_gain-E>15))break}while(w.global_gain+w.scalefac_scale<255)3==v.noise_shaping_amp?D?C=!0:(w.assign(b),e.arraycopy(x,0,q,0,576),F=0,E=w.global_gain,D=!0):C=!0}return j(b.global_gain+b.scalefac_scale<=255),a.VBR==f.vbr_rh||a.VBR==f.vbr_mtrh?e.arraycopy(x,0,q,0,576):(1&v.substep_shaping)!=0&&trancate_smallspectrums(v,b,k,q),z.over_count},this.iteration_finish_one=function(a,c,e){var f=a.l3_side,g=f.tt[c][e];d.best_scalefac_store(a,c,e,f),1==a.use_best_huffman&&d.best_huffman_divide(a,g),b.ResvAdjust(a,g)},this.VBR_encode_granule=function(a,b,c,d,f,g,k){var l,m=a.internal_flags,n=new o,p=i(576),q=k,r=k+1,s=(k+g)/2,t=0,u=m.sfb21_extra;j(q<=LameInternalFlags.MAX_BITS_PER_CHANNEL),h.fill(n.l3_enc,0);do j(s>=g),j(s<=k),j(g<=k),s>q-42?m.sfb21_extra=!1:m.sfb21_extra=u,0>=outer_loop(a,b,c,d,f,s)?(t=1,r=b.part2_3_length,n.assign(b),e.arraycopy(d,0,p,0,576),l=(k=r-32)-g,s=(k+g)/2):(l=k-(g=s+32),s=(k+g)/2,0!=t&&(t=2,b.assign(n),e.arraycopy(p,0,d,0,576)));while(l>12)m.sfb21_extra=u,2==t&&e.arraycopy(n.l3_enc,0,b.l3_enc,0,576),j(b.part2_3_length<=q)},this.get_framebits=function(c,d){var e=c.internal_flags;e.bitrate_index=e.VBR_min_bitrate;var f=a.getframebits(c);e.bitrate_index=1,f=a.getframebits(c);for(var g=1;g<=e.VBR_max_bitrate;g++){e.bitrate_index=g;var h=new MeanBits(f);d[g]=b.ResvFrameBegin(c,h),f=h.bits}},this.VBR_old_prepare=function(a,d,e,f,g,h,i,j,k){var l,m=a.internal_flags,o=0,p=1,q=0;m.bitrate_index=m.VBR_max_bitrate;var r=b.ResvFrameBegin(a,new MeanBits(0))/m.mode_gr;get_framebits(a,h);for(var s=0;s<m.mode_gr;s++){var t=c.on_pe(a,d,j[s],r,s,0);m.mode_ext==n.MPG_MD_MS_LR&&(ms_convert(m.l3_side,s),c.reduce_side(j[s],e[s],r,t));for(var u=0;u<m.channels_out;++u){var v=m.l3_side.tt[s][u];v.block_type!=n.SHORT_TYPE?(o=1.28/(1+Math.exp(3.5-d[s][u]/300))-.05,l=m.PSY.mask_adjust-o):(o=2.56/(1+Math.exp(3.5-d[s][u]/300))-.14,l=m.PSY.mask_adjust_short-o),m.masking_lower=Math.pow(10,.1*l),init_outer_loop(m,v),k[s][u]=c.calc_xmin(a,f[s][u],v,g[s][u]),0!=k[s][u]&&(p=0),i[s][u]=126,q+=j[s][u]}}for(var s=0;s<m.mode_gr;s++)for(var u=0;u<m.channels_out;u++)q>h[m.VBR_max_bitrate]&&(j[s][u]*=h[m.VBR_max_bitrate],j[s][u]/=q),i[s][u]>j[s][u]&&(i[s][u]=j[s][u]);return p},this.bitpressure_strategy=function(a,b,c,d){for(var e=0;e<a.mode_gr;e++)for(var f=0;f<a.channels_out;f++){for(var g=a.l3_side.tt[e][f],h=b[e][f],i=0,j=0;j<g.psy_lmax;j++)h[i++]*=1+.029*j*j/n.SBMAX_l/n.SBMAX_l;if(g.block_type==n.SHORT_TYPE)for(var j=g.sfb_smin;j<n.SBMAX_s;j++)h[i++]*=1+.029*j*j/n.SBMAX_s/n.SBMAX_s,h[i++]*=1+.029*j*j/n.SBMAX_s/n.SBMAX_s,h[i++]*=1+.029*j*j/n.SBMAX_s/n.SBMAX_s;d[e][f]=0|Math.max(c[e][f],.9*d[e][f])}},this.VBR_new_prepare=function(a,d,e,f,g,h){var i,j=a.internal_flags,k=1,l=0,m=0;if(a.free_format){j.bitrate_index=0;var o=new MeanBits(l);i=b.ResvFrameBegin(a,o),l=o.bits,g[0]=i}else{j.bitrate_index=j.VBR_max_bitrate;var o=new MeanBits(l);b.ResvFrameBegin(a,o),l=o.bits,get_framebits(a,g),i=g[j.VBR_max_bitrate]}for(var p=0;p<j.mode_gr;p++){c.on_pe(a,d,h[p],l,p,0),j.mode_ext==n.MPG_MD_MS_LR&&ms_convert(j.l3_side,p);for(var q=0;q<j.channels_out;++q){var r=j.l3_side.tt[p][q];j.masking_lower=Math.pow(10,.1*j.PSY.mask_adjust),init_outer_loop(j,r),0!=c.calc_xmin(a,e[p][q],r,f[p][q])&&(k=0),m+=h[p][q]}}for(var p=0;p<j.mode_gr;p++)for(var q=0;q<j.channels_out;q++)m>i&&(h[p][q]*=i,h[p][q]/=m);return k},this.calc_target_bits=function(d,e,f,g,h,i){var j,k,l,m,o=d.internal_flags,p=o.l3_side,q=0;o.bitrate_index=o.VBR_max_bitrate;var r=new MeanBits(q);for(i[0]=b.ResvFrameBegin(d,r),q=r.bits,o.bitrate_index=1,q=a.getframebits(d)-8*o.sideinfo_len,h[0]=q/(o.mode_gr*o.channels_out),q=d.VBR_mean_bitrate_kbps*d.framesize*1e3,(1&o.substep_shaping)!=0&&(q*=1.09),q/=d.out_samplerate,q-=8*o.sideinfo_len,q/=o.mode_gr*o.channels_out,(j=.93+.07*(11-d.compression_ratio)/5.5)<.9&&(j=.9),j>1&&(j=1),k=0;k<o.mode_gr;k++){var s=0;for(l=0;l<o.channels_out;l++){if(g[k][l]=int(j*q),e[k][l]>700){var t=int((e[k][l]-700)/1.4),u=p.tt[k][l];g[k][l]=int(j*q),u.block_type==n.SHORT_TYPE&&t<q/2&&(t=q/2),t>3*q/2?t=3*q/2:t<0&&(t=0),g[k][l]+=t}g[k][l]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(g[k][l]=LameInternalFlags.MAX_BITS_PER_CHANNEL),s+=g[k][l]}if(s>LameInternalFlags.MAX_BITS_PER_GRANULE)for(l=0;l<o.channels_out;++l)g[k][l]*=LameInternalFlags.MAX_BITS_PER_GRANULE,g[k][l]/=s}if(o.mode_ext==n.MPG_MD_MS_LR)for(k=0;k<o.mode_gr;k++)c.reduce_side(g[k],f[k],q*o.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(k=0,m=0;k<o.mode_gr;k++)for(l=0;l<o.channels_out;l++)g[k][l]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(g[k][l]=LameInternalFlags.MAX_BITS_PER_CHANNEL),m+=g[k][l];if(m>i[0])for(k=0;k<o.mode_gr;k++)for(l=0;l<o.channels_out;l++)g[k][l]*=i[0],g[k][l]/=m}}},308672,(a,b,c)=>{var d=a.r(921088).assert;b.exports=function(){var a;this.setModules=function(b){a=b},this.ResvFrameBegin=function(b,c){var e,f=b.internal_flags,g=f.l3_side,h=a.getframebits(b);c.bits=(h-8*f.sideinfo_len)/f.mode_gr;var i=2048*f.mode_gr-8;b.brate>320?e=8*int(1e3*b.brate/(b.out_samplerate/1152)/8+.5):(e=11520,b.strict_ISO&&(e=8*int(32e4/(b.out_samplerate/1152)/8+.5))),f.ResvMax=e-h,f.ResvMax>i&&(f.ResvMax=i),(f.ResvMax<0||b.disable_reservoir)&&(f.ResvMax=0);var j=c.bits*f.mode_gr+Math.min(f.ResvSize,f.ResvMax);return j>e&&(j=e),d(0==f.ResvMax%8),d(f.ResvMax>=0),g.resvDrain_pre=0,null!=f.pinfo&&(f.pinfo.mean_bits=c.bits/2,f.pinfo.resvsize=f.ResvSize),j},this.ResvMaxBits=function(a,b,c,d){var e,f=a.internal_flags,g=f.ResvSize,h=f.ResvMax;0!=d&&(g+=b),(1&f.substep_shaping)!=0&&(h*=.9),c.bits=b,10*g>9*h?(e=g-9*h/10,c.bits+=e,f.substep_shaping|=128):(e=0,f.substep_shaping&=127,a.disable_reservoir||0!=(1&f.substep_shaping)||(c.bits-=.1*b));var i=g<6*f.ResvMax/10?g:6*f.ResvMax/10;return(i-=e)<0&&(i=0),i},this.ResvAdjust=function(a,b){a.ResvSize-=b.part2_3_length+b.part2_length},this.ResvFrameEnd=function(a,b){var c,e=a.l3_side;a.ResvSize+=b*a.mode_gr;var f=0;e.resvDrain_post=0,e.resvDrain_pre=0,0!=(c=a.ResvSize%8)&&(f+=c),(c=a.ResvSize-f-a.ResvMax)>0&&(d(0==c%8),d(c>=0),f+=c);var g=Math.min(8*e.main_data_begin,f)/8;e.resvDrain_pre+=8*g,f-=8*g,a.ResvSize-=8*g,e.main_data_begin-=g,e.resvDrain_post+=f,a.ResvSize-=f}}},876449,(a,b,c)=>{b.exports=function(){this.getLameVersion=function(){return"3.98.4"},this.getLameShortVersion=function(){return"3.98.4"},this.getLameVeryShortVersion=function(){return"LAME3.98r"},this.getPsyVersion=function(){return"0.93"},this.getLameUrl=function(){return"http://www.mp3dev.org/"},this.getLameOsBitness=function(){return"32bits"}}},740550,(a,b,c)=>{var d=a.r(921088),e=d.System,f=d.VbrMode;d.Float;var g=d.ShortBlock;d.Util;var h=d.Arrays;d.new_array_n;var i=d.new_byte;d.new_double,d.new_float,d.new_float_n,d.new_int,d.new_int_n;var j=d.assert;function k(){this.setModules=function(d,e,f){a=d,b=e,c=f};var a,b,c,d=k.NUMTOCENTRIES,l=k.MAXFRAMESIZE,m=d+4+4+4+4+4+9+1+1+8+1+1+3+1+1+2+4+2+2,n="Xing",o="Info",p=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function q(a,b){var c=255&a[b+0];return c<<=8,c|=255&a[b+1],c<<=8,c|=255&a[b+2],c<<=8,c|=255&a[b+3]}function r(a,b,c){a[b+0]=c>>24&255,a[b+1]=c>>16&255,a[b+2]=c>>8&255,a[b+3]=255&c&255}function s(a,b,c){a[b+0]=c>>8&255,a[b+1]=255&c&255}function t(a,b,c){return 255&(a<<b|c&~(-1<<b))}function u(b,c){var d,e,g=b.internal_flags;c[0]=t(c[0],8,255),c[1]=t(c[1],3,7),c[1]=t(c[1],1,b.out_samplerate<16e3?0:1),c[1]=t(c[1],1,b.version),c[1]=t(c[1],2,1),c[1]=t(c[1],1,+!b.error_protection),c[2]=t(c[2],4,g.bitrate_index),c[2]=t(c[2],2,g.samplerate_index),c[2]=t(c[2],1,0),c[2]=t(c[2],1,b.extension),c[3]=t(c[3],2,b.mode.ordinal()),c[3]=t(c[3],2,g.mode_ext),c[3]=t(c[3],1,b.copyright),c[3]=t(c[3],1,b.original),c[3]=t(c[3],2,b.emphasis),c[0]=255;var h=255&(241&c[1]);d=1==b.version?128:b.out_samplerate<16e3?32:64,b.VBR==f.vbr_off&&(d=b.brate),e=b.free_format?0:255&16*a.BitrateIndex(d,b.version,b.out_samplerate),1==b.version?c[1]=255&(10|h):c[1]=255&(2|h),h=255&(13&c[2]),c[2]=255&(e|h)}function v(a,b){var c=b^a;return b>>8^p[255&c]}this.addVbrFrame=function(a){var b=a.internal_flags,c=Tables.bitrate_table[a.version][b.bitrate_index];j(null!=b.VBR_seek_table.bag);var d=b.VBR_seek_table;if(d.nVbrNumFrames++,d.sum+=c,d.seen++,!(d.seen<d.want)&&(d.pos<d.size&&(d.bag[d.pos]=d.sum,d.pos++,d.seen=0),d.pos==d.size)){for(var e=1;e<d.size;e+=2)d.bag[e/2]=d.bag[e];d.want*=2,d.pos/=2}},this.getVbrTag=function(a){var b,c=new VBRTagData,e=0;c.flags=0;var f=a[e+1]>>3&1,g=a[e+2]>>2&3,h=a[e+3]>>6&3,i=a[e+2]>>4&15;if(i=Tables.bitrate_table[f][i],a[e+1]>>4==14?c.samprate=Tables.samplerate_table[2][g]:c.samprate=Tables.samplerate_table[f][g],0!=f?3!=h?e+=36:e+=21:3!=h?e+=21:e+=13,!(new String(a,b=e,n.length(),null).equals(n)||new String(a,b,o.length(),null).equals(o)))return null;e+=4,c.hId=f;var j=c.flags=q(a,e);if(e+=4,(1&j)!=0&&(c.frames=q(a,e),e+=4),(2&j)!=0&&(c.bytes=q(a,e),e+=4),(4&j)!=0){if(null!=c.toc)for(var k=0;k<d;k++)c.toc[k]=a[e+k];e+=d}c.vbrScale=-1,(8&j)!=0&&(c.vbrScale=q(a,e),e+=4),c.headersize=(f+1)*72e3*i/c.samprate;var l=a[(e+=21)+0]<<4;l+=a[e+1]>>4;var m=(15&a[e+1])<<8;return m+=255&a[e+2],(l<0||l>3e3)&&(l=-1),(m<0||m>3e3)&&(m=-1),c.encDelay=l,c.encPadding=m,c},this.InitVbrTag=function(a){var c,d=a.internal_flags;c=1==a.version?128:a.out_samplerate<16e3?32:64,a.VBR==f.vbr_off&&(c=a.brate);var e=(a.version+1)*72e3*c/a.out_samplerate,g=d.sideinfo_len+m;if(d.VBR_seek_table.TotalFrameSize=e,e<g||e>l){a.bWriteVbrTag=!1;return}d.VBR_seek_table.nVbrNumFrames=0,d.VBR_seek_table.nBytesWritten=0,d.VBR_seek_table.sum=0,d.VBR_seek_table.seen=0,d.VBR_seek_table.want=1,d.VBR_seek_table.pos=0,null==d.VBR_seek_table.bag&&(d.VBR_seek_table.bag=new int[400],d.VBR_seek_table.size=400);var h=i(l);u(a,h);for(var j=d.VBR_seek_table.TotalFrameSize,k=0;k<j;++k)b.add_dummy_byte(a,255&h[k],1)},this.updateMusicCRC=function(a,b,c,d){for(var e=0;e<d;++e)a[0]=v(b[c+e],a[0])},this.getLameTagFrame=function(a,j){var k=a.internal_flags;if(!a.bWriteVbrTag||k.Class_ID!=Lame.LAME_ID||k.VBR_seek_table.pos<=0)return 0;if(j.length<k.VBR_seek_table.TotalFrameSize)return k.VBR_seek_table.TotalFrameSize;h.fill(j,0,k.VBR_seek_table.TotalFrameSize,0),u(a,j);var l=i(d);if(a.free_format)for(var m=1;m<d;++m)l[m]=255&255*m/100;else!function(a,b){if(!(a.pos<=0))for(var c=1;c<d;++c){var e=0|Math.floor(c/d*a.pos);e>a.pos-1&&(e=a.pos-1);var f=0|256*a.bag[e]/a.sum;f>255&&(f=255),b[c]=255&f}}(k.VBR_seek_table,l);var p=k.sideinfo_len;a.error_protection&&(p-=2),a.VBR==f.vbr_off?(j[p++]=255&o.charAt(0),j[p++]=255&o.charAt(1),j[p++]=255&o.charAt(2),j[p++]=255&o.charAt(3)):(j[p++]=255&n.charAt(0),j[p++]=255&n.charAt(1),j[p++]=255&n.charAt(2),j[p++]=255&n.charAt(3)),r(j,p,15),r(j,p+=4,k.VBR_seek_table.nVbrNumFrames),p+=4;var q=k.VBR_seek_table.nBytesWritten+k.VBR_seek_table.TotalFrameSize;r(j,p,0|q),p+=4,e.arraycopy(l,0,j,p,l.length),p+=l.length,a.error_protection&&b.CRC_writeheader(k,j);for(var t=0,m=0;m<p;m++)t=v(j[m],t);return p+=function(a,b,d,e,f){var h,i,j=a.internal_flags,k=0,l=a.encoder_delay,m=a.encoder_padding,n=100-10*a.VBR_q-a.quality,o=c.getLameVeryShortVersion(),p=[1,5,3,2,4,0,3],q=0|(a.lowpassfreq/100+.5>255?255:a.lowpassfreq/100+.5),t=0,u=0,w=a.internal_flags.noise_shaping,x=0,y=0,z=0,A=0,B=0,C=(1&a.exp_nspsytune)!=0,D=(2&a.exp_nspsytune)!=0,E=!1,F=!1,G=a.internal_flags.nogap_total,H=a.internal_flags.nogap_current,I=a.ATHtype,J=0;switch(a.VBR){case vbr_abr:i=a.VBR_mean_bitrate_kbps;break;case vbr_off:i=a.brate;break;default:i=a.VBR_min_bitrate_kbps}switch(h=0+(a.VBR.ordinal()<p.length?p[a.VBR.ordinal()]:0),j.findReplayGain&&(j.RadioGain>510&&(j.RadioGain=510),j.RadioGain<-510&&(j.RadioGain=-510),u=11264,j.RadioGain>=0?u|=j.RadioGain:(u|=512,u|=-j.RadioGain)),j.findPeakSample&&(t=Math.abs(0|j.PeakSample/32767*8388608+.5)),-1!=G&&(H>0&&(F=!0),H<G-1&&(E=!0)),J=I+(!!C<<4)+(!!D<<5)+(!!E<<6)+(!!F<<7),n<0&&(n=0),a.mode){case MONO:x=0;break;case STEREO:x=1;break;case DUAL_CHANNEL:x=2;break;case JOINT_STEREO:x=a.force_ms?4:3;break;case NOT_SET:default:x=7}z=a.in_samplerate<=32e3?0:48e3==a.in_samplerate?2:a.in_samplerate>48e3?3:1,(a.short_blocks==g.short_block_forced||a.short_blocks==g.short_block_dispensed||-1==a.lowpassfreq&&-1==a.highpassfreq||a.scale_left<a.scale_right||a.scale_left>a.scale_right||a.disable_reservoir&&a.brate<320||a.noATH||a.ATHonly||0==I||a.in_samplerate<=32e3)&&(y=1),A=w+(x<<2)+(y<<5)+(z<<6),B=j.nMusicCRC,r(d,e+k,n),k+=4;for(var K=0;K<9;K++)d[e+k+K]=255&o.charAt(K);d[e+(k+=9)]=255&h,d[e+ ++k]=255&q,r(d,e+ ++k,t),s(d,e+(k+=4),u),s(d,e+(k+=2),0),d[e+(k+=2)]=255&J,k++,i>=255?d[e+k]=255:d[e+k]=255&i,d[e+ ++k]=255&l>>4,d[e+k+1]=255&(l<<4)+(m>>8),d[e+k+2]=255&m,d[e+(k+=3)]=255&A,k++,d[e+k++]=0,s(d,e+k,a.preset),r(d,e+(k+=2),b),s(d,e+(k+=4),B),k+=2;for(var L=0;L<k;L++)f=v(d[e+L],f);return s(d,e+k,f),k+=2}(a,q,j,p,t),k.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(a,b){if(a.internal_flags.VBR_seek_table.pos<=0||(b.seek(b.length()),0==b.length()))return -1;var c,d=(b.seek(0),c=i(10),b.readFully(c),new String(c,"ISO-8859-1").startsWith("ID3")?0:((127&c[6])<<21|(127&c[7])<<14|(127&c[8])<<7|127&c[9])+c.length);b.seek(d);var e=i(l),f=getLameTagFrame(a,e);return f>e.length?-1:(f<1||b.write(e,0,f),0)}}k.NUMTOCENTRIES=100,k.MAXFRAMESIZE=2880,b.exports=k},207450,(a,b,c)=>{var d=a.r(921088);d.System,d.VbrMode,d.Float,d.ShortBlock,d.Util,d.Arrays,d.new_array_n;var e=d.new_byte;d.new_double,d.new_float,d.new_float_n,d.new_int,d.new_int_n;var f=d.assert,g=a.r(170739),h=a.r(942810),i=a.r(694109),j=a.r(508835),k=a.r(791765),l=a.r(75038),m=a.r(308672),n=a.r(23013),o=a.r(548178);a.r(340862);var p=a.r(876449),q=a.r(740550);function r(){this.setModules=function(a,b){}}function s(){this.setModules=function(a,b,c){}}function t(){}function u(){this.setModules=function(a,b){}}function v(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function w(a){return a.charCodeAt(0)<<24|a.charCodeAt(1)<<16|a.charCodeAt(2)<<8|a.charCodeAt(3)}v.RIFF=w("RIFF"),v.WAVE=w("WAVE"),v.fmt_=w("fmt "),v.data=w("data"),v.readHeader=function(a){var b=new v,c=a.getUint32(0,!1);if(v.RIFF==c){if((a.getUint32(4,!0),v.WAVE==a.getUint32(8,!1))&&v.fmt_==a.getUint32(12,!1)){var d=a.getUint32(16,!0),e=20;switch(d){case 16:case 18:b.channels=a.getUint16(e+2,!0),b.sampleRate=a.getUint32(e+4,!0);break;default:throw"extended fmt chunk not implemented"}e+=d;for(var f=v.data,g=0;f!=c&&(c=a.getUint32(e,!1),g=a.getUint32(e+4,!0),f!=c);)e+=g+8;return b.dataLen=g,b.dataOffset=e+8,b}}},b.exports.Mp3Encoder=function(a,b,c){3!=arguments.length&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),a=1,b=44100,c=128);var d=new g,v=new r,w=new i,x=new o,y=new h,z=new j,A=new k,B=new q,C=new p,D=new u,E=new m,F=new l,G=new s,H=new t;d.setModules(w,x,y,z,A,B,C,D,H),x.setModules(w,H,C,B),D.setModules(x,C),y.setModules(d),A.setModules(x,E,z,F),z.setModules(F,E,d.enc.psy),E.setModules(x),F.setModules(z),B.setModules(d,x,C),v.setModules(G,H),G.setModules(C,D,y);var I=d.lame_init();I.num_channels=a,I.in_samplerate=b,I.brate=c,I.mode=n.STEREO,I.quality=3,I.bWriteVbrTag=!1,I.disable_reservoir=!0,I.write_id3tag_automatic=!1,f(0==d.lame_init_params(I));var J=1152,K=8640,L=e(8640);this.encodeBuffer=function(b,c){1==a&&(c=b),f(b.length==c.length),b.length>J&&(L=e(K=0|1.25*(J=b.length)+7200));var g=d.lame_encode_buffer(I,b,c,b.length,L,0,K);return new Int8Array(L.subarray(0,g))},this.flush=function(){var a=d.lame_encode_flush(I,L,0,K);return new Int8Array(L.subarray(0,a))}},b.exports.WavHeader=v},9876,a=>{"use strict";var b=a.i(608061),c=a.i(111089),d=a.i(470814),e=a.i(855521),f=a.i(57843);a.i(752298);var g=a.i(693025),h=a.i(714580),i=a.i(30231);a.i(3626);var j=a.i(236431),k=a.i(220583),l=a.i(312224),m=a.i(114715),n=a.i(429150),o=a.i(280819),p=a.i(533306);a.i(574469);var q=a.i(709531),r=a.i(692520),s=a.i(527344),t=a.i(74240),u=a.i(207450),v=a.i(548178),w=a.i(170739),x=a.i(23013);globalThis&&(globalThis.MPEGMode=x.default,globalThis.Lame=w.default,globalThis.BitStream=v.default);let y=({onCancel:a,onConverted:c,wordTimestamps:d})=>{let{t:h}=(0,g.useTranslation)(),i=(0,f.useRef)(new e.default({sampleBits:16,sampleRate:16e3,numChannels:1,compiling:!1})),j=(0,f.useRef)(null),k=(0,f.useRef)(null),l=(0,f.useRef)(null),[m,v]=(0,f.useState)(0),[w,x]=(0,f.useState)(!1),[y,z]=(0,f.useState)(!1),A=(0,p.usePathname)(),B=(0,p.useParams)(),C=(0,o.useRafInterval)(()=>{v(m+1)},1e3),D=(0,f.useCallback)(()=>{l.current=requestAnimationFrame(D);let a=j.current,b=k.current,c=i.current.getRecordAnalyseData(),d=[].slice.call(c),e=Number.parseInt(`${a.width/3}`),f=Number.parseInt(`${1024/e}`);b.clearRect(0,0,a.width,a.height),b.beginPath();let g=0;for(let c=0;c<e;c++){let e=d.slice(c*f,c*f+f).reduce((a,b)=>a+b,0)/f;e<128&&(e=128),e>178&&(e=178);let h=(e-128)/50*a.height;b.moveTo(g,16),b.roundRect?b.roundRect(g,16-h,2,h,[1,1,0,0]):b.rect(g,16-h,2,h),b.fill(),g+=3}b.closePath()},[]),E=(0,f.useCallback)(async()=>{C(),x(!1),z(!0),i.current.stop(),l.current&&cancelAnimationFrame(l.current),l.current=null;let b=j.current;k.current.clearRect(0,0,b.width,b.height);let e=new File([(a=>{let{channels:b,sampleRate:c}=u.default.WavHeader.readHeader(a.getWAV()),d=new u.default.Mp3Encoder(b,c,128),e=a.getChannelData(),f=[],g=e.left&&new Int16Array(e.left.buffer,0,e.left.byteLength/2),h=e.right&&new Int16Array(e.right.buffer,0,e.right.byteLength/2),i=g.length+(h?h.length:0),j=a=>{let b=new ArrayBuffer(a.length);return new Uint8Array(b).set(a),b};for(let a=0;a<i;a+=1152){let c=g.subarray(a,a+1152),e=null,i=null;2===b?(e=h.subarray(a,a+1152),i=d.encodeBuffer(c,e)):i=d.encodeBuffer(c),i.length>0&&f.push(j(i))}let k=d.flush();return k.length>0&&f.push(j(k)),new Blob(f,{type:"audio/mp3"})})(i.current)],"temp.mp3",{type:"audio/mp3"}),f=new FormData;f.append("file",e),f.append("word_timestamps",d||"disabled");let g="",h=!1;B.token?(g="/audio-to-text",h=!0):B.appId&&(g=A.search("explore/installed")>-1?`/installed-apps/${B.appId}/audio-to-text`:`/apps/${B.appId}/audio-to-text`);try{let b=await (0,r.audioToText)(g,h?r.AppSourceType.webApp:r.AppSourceType.installedApp,f);c(b.text),a()}catch{c(""),a()}},[C,a,c,B.appId,B.token,A,d]),F=async()=>{try{await i.current.start(),x(!0),z(!1),j.current&&k.current&&D()}catch{a()}};m>=600&&w&&E(),(0,f.useEffect)(()=>{(()=>{let a=window.devicePixelRatio||1,b=document.getElementById("voice-input-record");if(b){let{width:c,height:d}=b.getBoundingClientRect();b.width=a*c,b.height=a*d,j.current=b;let e=b.getContext("2d");e&&(e.scale(a,a),e.fillStyle="rgba(209, 224, 255, 1)",k.current=e)}})(),F();let a=i?.current;return()=>{a?.stop()}},[]);let G=Number.parseInt(`${Number.parseInt(`${m}`)/60}`),H=Number.parseInt(`${m}`)%60;return(0,b.jsx)("div",{className:(0,s.cn)(t.default.wrapper,"absolute inset-0 rounded-xl"),children:(0,b.jsxs)("div",{className:"absolute inset-[1.5px] flex items-center overflow-hidden rounded-[10.5px] bg-primary-25 py-[14px] pl-[14.5px] pr-[6.5px]",children:[(0,b.jsx)("canvas",{id:"voice-input-record",className:"absolute bottom-0 left-0 h-4 w-full"}),y&&(0,b.jsx)(n.RiLoader2Line,{className:"mr-2 h-4 w-4 animate-spin text-primary-700"}),(0,b.jsxs)("div",{className:"grow",children:[w&&(0,b.jsx)("div",{className:"text-sm text-gray-500",children:h("voiceInput.speaking",{ns:"common"})}),y&&(0,b.jsx)("div",{className:(0,s.cn)(t.default.convert,"text-sm"),children:h("voiceInput.converting",{ns:"common"})})]}),w&&(0,b.jsx)("div",{className:"mr-1 flex h-8 w-8 cursor-pointer items-center justify-center rounded-lg  hover:bg-primary-100",onClick:E,children:(0,b.jsx)(q.StopCircle,{className:"h-5 w-5 text-primary-600"})}),y&&(0,b.jsx)("div",{className:"mr-1 flex h-8 w-8 cursor-pointer items-center justify-center rounded-lg  hover:bg-gray-200",onClick:a,children:(0,b.jsx)(n.RiCloseLine,{className:"h-4 w-4 text-gray-500"})}),(0,b.jsx)("div",{className:`w-[45px] pl-1 text-xs font-medium ${m>500?"text-[#F04438]":"text-gray-700"}`,children:`0${G.toFixed(0)}:${H>=10?H:`0${H}`}`})]})})};var z=a.i(954200),A=a.i(735310),B=a.i(175809),C=a.i(909795),D=a.i(183841),D=D;let E=({readonly:a,ref:d,fileConfig:e,speechToTextConfig:f,onShowVoiceInput:g,onSend:h,theme:i})=>(0,b.jsx)("div",{className:(0,s.cn)("flex shrink-0 items-center justify-end"),children:(0,b.jsxs)("div",{className:"flex items-center pl-1",ref:d,children:[(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[e?.enabled&&(0,b.jsx)(D.default,{readonly:a,fileConfig:e}),f?.enabled&&(0,b.jsx)(B.default,{size:"l",disabled:a,onClick:g,children:(0,b.jsx)(n.RiMicLine,{className:"h-5 w-5"})})]}),(0,b.jsx)(C.default,{className:"ml-3 w-8 px-0",variant:"primary",onClick:a?c.noop:h,style:i?{backgroundColor:i.primaryColor}:{},children:(0,b.jsx)(n.RiSendPlane2Fill,{className:"h-4 w-4"})})]})});E.displayName="Operation";let F=(0,f.memo)(E),G=({readonly:a,botName:n,showFeatureBar:o,showFileUpload:p,featureBarDisabled:q,onFeatureBarClick:r,visionConfig:t,speechToTextConfig:u={enabled:!0},onSend:v,inputs:w={},inputsForm:x=[],theme:B,isResponding:C,disabled:D})=>{let{t:E}=(0,g.useTranslation)(),{notify:G}=(0,m.useToastContext)(),{wrapperRef:H,textareaRef:I,textValueRef:J,holdSpaceRef:K,handleTextareaResize:L,isMultipleLine:M}=(()=>{let a=(0,f.useRef)(null),b=(0,f.useRef)(void 0),c=(0,f.useRef)(null),d=(0,f.useRef)(null),[e,g]=(0,f.useState)(!1),h=(0,f.useCallback)(()=>{let e=b.current;if(a.current&&e&&c.current&&d.current){let{width:b}=a.current.getBoundingClientRect(),{height:f}=e.getBoundingClientRect(),{width:h}=c.current.getBoundingClientRect(),{width:i}=d.current.getBoundingClientRect();f>32||h+i>=b?g(!0):g(!1)}},[]);return{wrapperRef:a,textareaRef:b,textValueRef:c,holdSpaceRef:d,handleTextareaResize:(0,f.useCallback)(()=>{h()},[h]),isMultipleLine:e}})(),[N,O]=(0,f.useState)(""),[P,Q]=(0,f.useState)(!1),R=(0,l.useFileStore)(),{handleDragFileEnter:S,handleDragFileLeave:T,handleDragFileOver:U,handleDropFile:V,handleClipboardPasteFile:W,isDragActive:X}=(0,k.useFile)(t,!1),{checkInputsForm:Y}=(()=>{let{t:a}=(0,g.useTranslation)(),{notify:b}=(0,m.useToastContext)();return{checkInputsForm:(0,f.useCallback)((c,d)=>{let e="",f=!1,g=d.filter(({required:a,type:b})=>a&&b!==A.InputVarType.checkbox);return(g?.length&&g.forEach(({variable:a,label:b,type:d})=>{if(!e&&!f&&(c[a]||(e=b),(d===A.InputVarType.singleFile||d===A.InputVarType.multiFiles)&&c[a])){let b=c[a];f=Array.isArray(b)?b.find(a=>a.transferMethod===z.TransferMethod.local_file&&!a.uploadedId):b.transferMethod===z.TransferMethod.local_file&&!b.uploadedId}}),e)?(b({type:"error",message:a("errorMessage.valueOfVarRequired",{ns:"appDebug",key:e})}),!1):!f||void b({type:"info",message:a("errorMessage.waitForFileUpload",{ns:"appDebug"})})},[b,a])}})(),Z=(0,f.useRef)([""]),[$,_]=(0,f.useState)(-1),aa=(0,f.useRef)(!1),ab=(0,f.useCallback)(a=>{O(a),setTimeout(L,0)},[L]),ac=()=>{if(C)return void G({type:"info",message:E("errorMessage.waitForResponse",{ns:"appDebug"})});if(v){let{files:a,setFiles:b}=R.getState();if(a.find(a=>a.transferMethod===z.TransferMethod.local_file&&!a.uploadedId))return void G({type:"info",message:E("errorMessage.waitForFileUpload",{ns:"appDebug"})});if(!N||!N.trim())return void G({type:"info",message:E("errorMessage.queryRequired",{ns:"appAnnotation"})});Y(w,x)&&(v(N,a),ab(""),b([]))}},ad=(0,f.useCallback)(()=>{e.default.getPermission().then(()=>{Q(!0)},()=>{G({type:"error",message:E("voiceInput.notAllow",{ns:"common"})})})},[E,G]),ae=(0,b.jsx)(F,{ref:K,readonly:a,fileConfig:t,speechToTextConfig:u,onShowVoiceInput:ad,onSend:ac,theme:B});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:(0,s.cn)("relative z-10 overflow-hidden rounded-xl border border-components-chat-input-border bg-components-panel-bg-blur pb-[9px] shadow-md",X&&"border border-dashed border-components-option-card-option-selected-border",D&&"pointer-events-none border-components-panel-border opacity-50 shadow-none"),children:[(0,b.jsxs)("div",{className:"relative max-h-[158px] overflow-y-auto overflow-x-hidden px-[9px] pt-[9px]",children:[(0,b.jsx)(j.FileListInChatInput,{fileConfig:t}),(0,b.jsxs)("div",{ref:H,className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"relative flex w-full grow items-center",children:[(0,b.jsx)("div",{ref:J,className:"body-lg-regular pointer-events-none invisible absolute h-auto w-auto whitespace-pre p-1 leading-6",children:N}),(0,b.jsx)(h.default,{ref:a=>I.current=a,className:(0,s.cn)("body-lg-regular w-full resize-none bg-transparent p-1 leading-6 text-text-primary outline-none"),placeholder:(0,d.decode)(E(a?"chat.inputDisabledPlaceholder":"chat.inputPlaceholder",{ns:"common",botName:n})||""),autoFocus:!0,minRows:1,value:N,onChange:a=>ab(a.target.value),onKeyDown:a=>{"Enter"!==a.key||a.shiftKey||a.nativeEvent.isComposing?"ArrowUp"!==a.key||a.shiftKey||a.nativeEvent.isComposing||!a.metaKey?"ArrowDown"!==a.key||a.shiftKey||a.nativeEvent.isComposing||!a.metaKey||($<Z.current.length-1?(_($+1),ab(Z.current[$+1])):$===Z.current.length-1&&(_(Z.current.length),ab(""))):$>0&&(_($-1),ab(Z.current[$-1])):aa.current||(a.preventDefault(),O(N.replace(/\n$/,"")),Z.current.push(N),_(Z.current.length),ac())},onCompositionStart:()=>{aa.current=!0},onCompositionEnd:()=>{setTimeout(()=>{aa.current=!1},50)},onPaste:W,onDragEnter:S,onDragLeave:T,onDragOver:U,onDrop:V,readOnly:a})]}),!M&&ae]}),P&&(0,b.jsx)(y,{onCancel:()=>Q(!1),onConverted:a=>ab(a)})]}),M&&(0,b.jsx)("div",{className:"px-[9px]",children:ae})]}),o&&(0,b.jsx)(i.default,{showFileUpload:p,disabled:q,onFeatureBarClick:a?c.noop:r,hideEditEntrance:a})]})};a.s(["default",0,a=>(0,b.jsx)(l.FileContextProvider,{children:(0,b.jsx)(G,{...a})})],9876)},992602,788022,546107,a=>{"use strict";var b=a.i(608061),c=a.i(924270),d=a.i(57843);a.i(752298);var e=a.i(693025),f=a.i(388206),g=a.i(243103),h=a.i(31792),i=a.i(909795);a.i(574469);var j=a.i(709531),k=a.i(183107),l=a.i(527344),m=a.i(260360),n=a.i(9876),o=a.i(146993),p=a.i(429150),q=a.i(875067),r=a.i(714580);a.i(3626);var s=a.i(236431);a.i(637422);var t=a.i(973888),u=a.i(189583),v=a.i(175809),w=a.i(114715),x=a.i(878590),y=a.i(670916);let z=(0,d.memo)(({item:a,questionIcon:c,theme:f,enableEdit:g=!0,switchSibling:h})=>{let{t:j}=(0,e.useTranslation)(),{content:k,message_files:m}=a,{onRegenerate:n}=(0,o.useChatContext)(),[z,A]=(0,d.useState)(!1),[B,C]=(0,d.useState)(k),[D,E]=(0,d.useState)(0),F=(0,d.useRef)(null),G=(0,d.useCallback)(()=>{A(!0),C(k)},[k]),H=(0,d.useCallback)(()=>{A(!1),n?.(a,{message:B,files:m})},[B,m,a,n]),I=(0,d.useCallback)(()=>{A(!1),C(k)},[k]),J=(0,d.useCallback)(b=>{"prev"===b?a.prevSibling&&h?.(a.prevSibling):a.nextSibling&&h?.(a.nextSibling)},[h,a.prevSibling,a.nextSibling]);return(0,d.useEffect)(()=>{if(!F.current)return;let a=new ResizeObserver(()=>{F.current&&E(F.current?.clientWidth)});return a.observe(F.current),()=>{a.disconnect()}},[]),(0,b.jsxs)("div",{className:"mb-2 flex justify-end last:mb-0",children:[(0,b.jsxs)("div",{className:(0,l.cn)("group relative mr-4 flex max-w-full items-start overflow-x-hidden pl-14",z&&"flex-1"),children:[(0,b.jsx)("div",{className:(0,l.cn)("mr-2 gap-1",z?"hidden":"flex"),children:(0,b.jsxs)("div",{className:"absolute hidden gap-0.5 rounded-[10px] border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg p-0.5 shadow-md backdrop-blur-sm group-hover:flex",style:{right:D+8},children:[(0,b.jsx)(v.default,{onClick:()=>{(0,q.default)(k),w.default.notify({type:"success",message:j("actionMsg.copySuccessfully",{ns:"common"})})},children:(0,b.jsx)(p.RiClipboardLine,{className:"h-4 w-4"})}),g&&(0,b.jsx)(v.default,{onClick:G,children:(0,b.jsx)(p.RiEditLine,{className:"h-4 w-4"})})]})}),(0,b.jsxs)("div",{ref:F,className:"w-full rounded-2xl bg-background-gradient-bg-fill-chat-bubble-bg-3 px-4 py-3 text-sm text-text-primary",style:f?.chatBubbleColorStyle?(0,x.CssTransform)(f.chatBubbleColorStyle):{},children:[!!m?.length&&(0,b.jsx)(s.FileList,{className:"mb-2",files:m,showDeleteAction:!1,showDownloadAction:!0}),z?(0,b.jsxs)("div",{className:" flex flex-col gap-2 rounded-xl border border-components-chat-input-border bg-components-panel-bg-blur p-[9px] shadow-md ",children:[(0,b.jsx)("div",{className:"max-h-[158px] overflow-y-auto overflow-x-hidden",children:(0,b.jsx)(r.default,{className:(0,l.cn)("body-lg-regular w-full p-1 leading-6 text-text-tertiary outline-none"),autoFocus:!0,minRows:1,value:B,onChange:a=>C(a.target.value)})}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(i.default,{variant:"ghost",onClick:I,children:j("operation.cancel",{ns:"common"})}),(0,b.jsx)(i.default,{variant:"primary",onClick:H,children:j("chat.resend",{ns:"common"})})]})]}):(0,b.jsx)(u.Markdown,{content:k}),!z&&(0,b.jsx)(y.default,{count:a.siblingCount,currentIndex:a.siblingIndex,prevDisabled:!a.prevSibling,nextDisabled:!a.nextSibling,switchSibling:J})]}),(0,b.jsx)("div",{className:"mt-1 h-[18px]"})]}),(0,b.jsx)("div",{className:"h-10 w-10 shrink-0",children:c||(0,b.jsx)("div",{className:"h-full w-full rounded-full border-[0.5px] border-black/5",children:(0,b.jsx)(t.User,{className:"h-full w-full"})})})]})});var A=a.i(757801);let B=(0,d.memo)(({suggestedQuestions:a,onSend:c})=>{let{t:d}=(0,e.useTranslation)();return(0,b.jsxs)("div",{className:"mb-2 py-2",children:[(0,b.jsxs)("div",{className:"mb-2.5 flex items-center justify-between gap-2",children:[(0,b.jsx)(A.default,{bgStyle:"gradient",className:"h-px !w-auto grow rotate-180"}),(0,b.jsx)("div",{className:"system-xs-medium-uppercase shrink-0 text-text-tertiary",children:d("feature.suggestedQuestionsAfterAnswer.tryToAsk",{ns:"appDebug"})}),(0,b.jsx)(A.default,{bgStyle:"gradient",className:"h-px !w-auto grow"})]}),(0,b.jsx)("div",{className:"flex flex-wrap justify-center",children:a.map((a,d)=>(0,b.jsx)(i.default,{size:"small",variant:"secondary-accent",className:"mb-1 mr-1 last:mr-0",onClick:()=>c(a),children:a},d))})]})}),C=(0,d.memo)(({isTryApp:a,readonly:p=!1,appData:q,config:r,onSend:s,inputs:t,inputsForm:u,onRegenerate:v,chatList:w,isResponding:x,noStopResponding:y,onStopResponding:A,noChatInput:C,chatContainerClassName:D,chatContainerInnerClassName:E,chatFooterClassName:F,chatFooterInnerClassName:G,suggestedQuestions:H,showPromptLog:I,questionIcon:J,answerIcon:K,onAnnotationAdded:L,onAnnotationEdited:M,onAnnotationRemoved:N,chatNode:O,disableFeedback:P,onFeedback:Q,chatAnswerContainerInner:R,hideProcessDetail:S,hideLogModal:T,themeBuilder:U,switchSibling:V,showFeatureBar:W,showFileUpload:X,onFeatureBarClick:Y,noSpacing:Z,inputDisabled:$,sidebarCollapseState:_})=>{let{t:aa}=(0,e.useTranslation)(),{currentLogItem:ab,setCurrentLogItem:ac,showPromptLogModal:ad,setShowPromptLogModal:ae,showAgentLogModal:af,setShowAgentLogModal:ag}=(0,g.useStore)((0,f.useShallow)(a=>({currentLogItem:a.currentLogItem,setCurrentLogItem:a.setCurrentLogItem,showPromptLogModal:a.showPromptLogModal,setShowPromptLogModal:a.setShowPromptLogModal,showAgentLogModal:a.showAgentLogModal,setShowAgentLogModal:a.setShowAgentLogModal}))),[ah,ai]=(0,d.useState)(0),aj=(0,d.useRef)(null),ak=(0,d.useRef)(null),al=(0,d.useRef)(null),am=(0,d.useRef)(null),an=(0,d.useRef)(!1),ao=(0,d.useRef)(!1),ap=(0,d.useCallback)(()=>{w.length>1&&aj.current&&!an.current&&(ao.current=!0,aj.current.scrollTop=aj.current.scrollHeight,requestAnimationFrame(()=>{ao.current=!1}))},[w.length]),aq=(0,d.useCallback)(()=>{aj.current&&ai(document.body.clientWidth-(aj.current?.clientWidth+16)-8),aj.current&&al.current&&(al.current.style.width=`${aj.current.clientWidth}px`),ak.current&&am.current&&(am.current.style.width=`${ak.current.clientWidth}px`)},[]);(0,d.useEffect)(()=>{ap(),aq()},[ap,aq]),(0,d.useEffect)(()=>{aj.current&&requestAnimationFrame(()=>{ap(),aq()})}),(0,d.useEffect)(()=>{let a=(0,c.debounce)(aq,200);return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a),a.cancel()}},[aq]),(0,d.useEffect)(()=>{if(al.current&&aj.current){let a=new ResizeObserver(a=>{for(let b of a){let{blockSize:a}=b.borderBoxSize[0];aj.current.style.paddingBottom=`${a}px`,ap()}});a.observe(al.current);let b=new ResizeObserver(a=>{for(let b of a){let{inlineSize:a}=b.borderBoxSize[0];al.current.style.width=`${a}px`}});return b.observe(aj.current),()=>{a.disconnect(),b.disconnect()}}},[ap]),(0,d.useEffect)(()=>{let a=()=>{let a=aj.current;!a||ao.current||(an.current=a.scrollHeight-a.clientHeight-a.scrollTop>100)},b=aj.current;if(b)return b.addEventListener("scroll",a),()=>b.removeEventListener("scroll",a)},[]);let ar=(0,d.useRef)(void 0);(0,d.useEffect)(()=>{let a=w[0]?.id;(w.length<=1||a&&ar.current!==a)&&(an.current=!1),ar.current=a},[w]),(0,d.useEffect)(()=>{_||setTimeout(()=>aq(),200)},[aq,_]);let as=r?.suggested_questions_after_answer?.enabled&&!!H?.length&&s;return(0,b.jsx)(o.ChatContextProvider,{readonly:p,config:r,chatList:w,isResponding:x,showPromptLog:I,questionIcon:J,answerIcon:K,onSend:s,onRegenerate:v,onAnnotationAdded:L,onAnnotationEdited:M,onAnnotationRemoved:N,disableFeedback:P,onFeedback:Q,children:(0,b.jsxs)("div",{className:(0,l.cn)("relative h-full",a&&"flex flex-col"),children:[(0,b.jsxs)("div",{ref:aj,className:(0,l.cn)("relative h-full overflow-y-auto overflow-x-hidden",a&&"h-0 grow",D),children:[O,(0,b.jsx)("div",{ref:ak,className:(0,l.cn)("w-full",!Z&&"px-8",E,a&&"px-0"),children:w.map((a,c)=>{if(a.isAnswer){let d=a.id===w[w.length-1]?.id;return(0,b.jsx)(m.default,{appData:q,item:a,question:w[c-1]?.content,index:c,config:r,answerIcon:K,responding:d&&x,showPromptLog:I,chatAnswerContainerInner:R,hideProcessDetail:S,noChatInput:C,switchSibling:V},a.id)}return(0,b.jsx)(z,{item:a,questionIcon:J,theme:U?.theme,enableEdit:r?.questionEditEnable,switchSibling:V},a.id)})})]}),(0,b.jsx)("div",{className:`absolute bottom-0 z-10 flex justify-center bg-chat-input-mask ${(as||!C||!y)&&F}`,ref:al,children:(0,b.jsxs)("div",{ref:am,className:(0,l.cn)("relative",G,a&&"px-0"),children:[!y&&x&&(0,b.jsx)("div",{className:"mb-2 flex justify-center",children:(0,b.jsxs)(i.default,{className:"border-components-panel-border bg-components-panel-bg text-components-button-secondary-text",onClick:A,children:[(0,b.jsx)(j.StopCircle,{className:"mr-[5px] h-3.5 w-3.5"}),(0,b.jsx)("span",{className:"text-xs font-normal",children:aa("operation.stopResponding",{ns:"appDebug"})})]})}),as&&(0,b.jsx)(B,{suggestedQuestions:H,onSend:s}),!C&&(0,b.jsx)(n.default,{botName:q?.site?.title||"Bot",disabled:$,showFeatureBar:W,showFileUpload:X,featureBarDisabled:x,onFeatureBarClick:Y,visionConfig:r?.file_upload,speechToTextConfig:r?.speech_to_text,onSend:s,inputs:t,inputsForm:u,theme:U?.theme,isResponding:x,readonly:p})]})}),ad&&!T&&(0,b.jsx)(k.default,{width:ah,currentLogItem:ab,onCancel:()=>{ac(),ae(!1)}}),af&&!T&&(0,b.jsx)(h.default,{width:ah,currentLogItem:ab,onCancel:()=>{ac(),ag(!1)}})]})})});a.s(["default",0,C],992602);let D="00000000-0000-0000-0000-000000000000";async function E(a){try{let b=atob(a),c=Uint8Array.from(b,a=>a.charCodeAt(0)),d=new Response(c).body?.pipeThrough(new DecompressionStream("gzip")),e=await new Response(d).arrayBuffer();return new TextDecoder().decode(e)}catch{return}}async function F(){let a=new URLSearchParams(window.location.search),b={};return Array.from(a.entries()).forEach(([a,c])=>{["sys.","user."].some(b=>a.startsWith(b))||(b[a]=decodeURIComponent(c))}),b}async function G(){let a=new URLSearchParams(window.location.search),b={},c=Array.from(a.entries());return await Promise.all(c.map(async([a,c])=>{["sys.","user."].some(b=>a.startsWith(b))||(b[a]=await E(decodeURIComponent(c)))})),b}async function H(){let a=new URLSearchParams(window.location.search),b=a.get("redirect_url");if(b){let c=decodeURIComponent(b).split("?")[1];if(c)for(let[b,d]of new URLSearchParams(c).entries())a.set(b,d)}let c={},d=Array.from(a.entries());return await Promise.all(d.map(async([a,b])=>{a.startsWith("sys.")&&(c[a.slice(4)]=await E(decodeURIComponent(b)))})),c}async function I(){let a=new URLSearchParams(window.location.search),b={},c=Array.from(a.entries());return await Promise.all(c.map(async([a,c])=>{a.startsWith("user.")&&(b[a.slice(5)]=await E(decodeURIComponent(c)))})),b}async function J(){let a=new URLSearchParams(window.location.search),b={};return Array.from(a.entries()).forEach(([a,c])=>{a.startsWith("user.")&&(b[a.slice(5)]=decodeURIComponent(c))}),b}function K(a){return!!a&&a.isAnswer&&!a.id.startsWith("answer-placeholder-")&&!a.isOpeningStatement}function L(a){for(let b=a.length-1;b>=0;b--){let c=a[b];if(K(c))return c}return null}function M(a){let b={},c=[],d={},e=null;for(let f=0;f<a.length;f+=2){let g=a[f],h=a[f+1],i=g.parentMessageId===D,j=i?e?.id||"":g.parentMessageId||"";d[j]=(d[j]||0)+1;let k={...g,children:[]};b[g.id]=k,d[g.id]=1;let l={...h,children:[],siblingIndex:i?0:d[j]-1};b[h.id]=l,k.children.push(l),i?(e?e.children.push(k):c.push(k),e=l):j&&a.some(a=>a.id===j)?b[j]?.children.push(k):c.push(k)}return c}function N(a,b){let c,d=[],e=a.slice().reverse().map(a=>({node:a,path:[a]}));for(;e.length>0;){let{node:f,path:g}=e.pop();if(f.id===b||!b&&!f.children?.length&&!e.length){c=f,d=g.map((b,c)=>{if(!b.isAnswer)return b;let d=g[c-2],e=d?d.children.length:a.length,f=d?d.children[b.siblingIndex-1]?.children?.[0].id:a[b.siblingIndex-1]?.children?.[0]?.id,h=d?d.children[b.siblingIndex+1]?.children?.[0].id:a[b.siblingIndex+1]?.children?.[0]?.id;return{...b,siblingCount:e,prevSibling:f,nextSibling:h}});break}if(f.children)for(let a=f.children.length-1;a>=0;a--)e.push({node:f.children[a],path:[...g,f.children[a]]})}if(c){let a=[c];for(;a.length>0;){let b=a.pop();if(b!==c&&d.push(b),b.children?.length){let c=b.children.at(-1);if(!c.isAnswer){a.push(c);continue}let e=d.at(-2),f=e?.children?.length,g=e?.children?.at(-2)?.children?.[0]?.id;a.push({...c,siblingCount:f,prevSibling:g})}}}return d}a.s(["CONVERSATION_ID_INFO",0,"conversationIdInfo","UUID_NIL",0,D],788022),a.s(["buildChatItemTree",()=>M,"getLastAnswer",()=>L,"getProcessedInputsFromUrlParams",()=>G,"getProcessedSystemVariablesFromUrlParams",()=>H,"getProcessedUserVariablesFromUrlParams",()=>I,"getRawInputsFromUrlParams",()=>F,"getRawUserVariablesFromUrlParams",()=>J,"getThreadMessages",()=>N,"isValidGeneratedAnswer",()=>K],546107)},460171,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(497746),e=a.i(875067),f=a.i(533306),g=a.i(57843);a.i(752298);var h=a.i(693025),i=a.i(243103),j=a.i(175809),k=a.i(838079),l=a.i(146993),m=a.i(105249),n=a.i(189583),o=a.i(34830),p=a.i(114715),q=a.i(721647),r=a.i(692520),s=a.i(527344);a.i(3626);var t=a.i(236431),u=a.i(373178),v=a.i(787405);let w=(0,g.memo)(({data:a,content:c,currentTab:d})=>(0,b.jsxs)(b.Fragment,{children:["RESULT"===d&&(0,b.jsxs)("div",{className:"space-y-3 p-4",children:[a?.resultText&&(0,b.jsx)(n.Markdown,{content:a?.resultText||""}),!!a?.files?.length&&(0,b.jsx)("div",{className:"flex flex-col gap-2",children:a?.files.map(a=>(0,b.jsxs)("div",{className:"system-xs-regular flex flex-col gap-1",children:[(0,b.jsx)("div",{className:"py-1 text-text-tertiary ",children:a.varName}),(0,b.jsx)(t.FileList,{files:a.list,showDeleteAction:!1,showDownloadAction:!0,canPreview:!0})]},a.varName))})]}),"DETAIL"===d&&c&&(0,b.jsx)("div",{className:"p-4",children:(0,b.jsx)(u.default,{readOnly:!0,title:(0,b.jsx)("div",{children:"JSON OUTPUT"}),language:v.CodeLanguage.json,value:c,isJSONStringifyBeauty:!0})})]})),x=({isWorkflow:a,workflowProcessData:t,className:u,isError:v,onRetry:y,content:z,messageId:A,isLoading:B,isResponding:C,moreLikeThis:D,isInWebApp:E=!1,feedback:F,onFeedback:G,onSave:H,depth:I=1,isMobile:J,appSourceType:K,installedAppId:L,taskId:M,controlClearMoreLikeThis:N,supportFeedback:O,isShowTextToSpeech:P,hideProcessDetail:Q,siteInfo:R,inSidePanel:S})=>{let{t:T}=(0,h.useTranslation)(),U=(0,f.useParams)(),V=1===I,W=K===r.AppSourceType.tryApp,[X,Y]=(0,g.useState)(""),[Z,$]=(0,g.useState)(null),[_,aa]=(0,g.useState)({rating:null}),{config:ab}=(0,l.useChatContext)(),ac=(0,i.useStore)(a=>a.setCurrentLogItem),ad=(0,i.useStore)(a=>a.setShowPromptLogModal),ae=async a=>{await (0,r.updateFeedback)({url:`/messages/${Z}/feedbacks`,body:{rating:a.rating}},K,L),aa(a)},[af,{setTrue:ag,setFalse:ah}]=(0,d.useBoolean)(!1),ai=async()=>{if(af||!A)return void p.default.notify({type:"warning",message:T("errorMessage.waitForResponse",{ns:"appDebug"})});ag();let a=await (0,r.fetchMoreLikeThis)(A,K,L);Y(a.answer),aa({rating:null}),$(a.id),ah()};(0,g.useEffect)(()=>{N&&($(null),Y(""))},[N]),(0,g.useEffect)(()=>{B&&$(null)},[B]);let aj=async()=>{let a=await (0,q.fetchTextGenerationMessage)({appId:U.appId,messageId:A});ac(Array.isArray(a.message)?{...a,log:[...a.message,..."assistant"!==a.message[a.message.length-1].role?[{role:"assistant",text:a.answer,files:a.message_files?.filter(a=>"assistant"===a.belongs_to)||[]}]:[]]}:{...a,log:["string"==typeof a.message?{text:a.message}:a.message]}),ad(!0)},[ak,al]=(0,g.useState)("DETAIL"),am=!!t?.resultText||!!t?.files?.length,an=async a=>{al(a)};return(0,g.useEffect)(()=>{t?.resultText||t?.files?.length?an("RESULT"):an("DETAIL")},[t?.files?.length,t?.resultText]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:(0,s.cn)("relative",!V&&"mt-3",u),children:[B&&(0,b.jsx)("div",{className:(0,s.cn)("flex h-10 items-center",!S&&"rounded-2xl border-t border-divider-subtle bg-chat-bubble-bg"),children:(0,b.jsx)(m.default,{type:"area"})}),!B&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:(0,s.cn)("relative",!S&&"rounded-2xl border-t border-divider-subtle bg-chat-bubble-bg"),children:[t&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:(0,s.cn)("p-3",am&&"border-b border-divider-subtle"),children:[M&&(0,b.jsxs)("div",{className:(0,s.cn)("system-2xs-medium-uppercase mb-2 flex items-center text-text-accent-secondary",v&&"text-text-destructive"),children:[(0,b.jsx)(c.RiPlayList2Line,{className:"mr-1 h-3 w-3"}),(0,b.jsx)("span",{children:T("generation.execution",{ns:"share"})}),(0,b.jsx)("span",{className:"px-1",children:"Â·"}),(0,b.jsx)("span",{children:M})]}),R&&t&&(0,b.jsx)(k.default,{data:t,expand:t.expand,hideProcessDetail:Q,hideInfo:Q,readonly:!R.show_workflow_steps}),am&&(0,b.jsxs)("div",{className:"flex items-center space-x-6 px-1",children:[(0,b.jsx)("div",{className:(0,s.cn)("system-sm-semibold-uppercase cursor-pointer border-b-2 border-transparent py-3 text-text-tertiary","RESULT"===ak&&"border-util-colors-blue-brand-blue-brand-600 text-text-primary"),onClick:()=>an("RESULT"),children:T("result",{ns:"runLog"})}),(0,b.jsx)("div",{className:(0,s.cn)("system-sm-semibold-uppercase cursor-pointer border-b-2 border-transparent py-3 text-text-tertiary","DETAIL"===ak&&"border-util-colors-blue-brand-blue-brand-600 text-text-primary"),onClick:()=>an("DETAIL"),children:T("detail",{ns:"runLog"})})]})]}),!v&&(0,b.jsx)(w,{data:t,content:z,currentTab:ak})]}),!t&&M&&(0,b.jsxs)("div",{className:(0,s.cn)("system-2xs-medium-uppercase sticky left-0 top-0 flex w-full items-center rounded-t-2xl bg-components-actionbar-bg p-4 pb-3 text-text-accent-secondary",v&&"text-text-destructive"),children:[(0,b.jsx)(c.RiPlayList2Line,{className:"mr-1 h-3 w-3"}),(0,b.jsx)("span",{children:T("generation.execution",{ns:"share"})}),(0,b.jsx)("span",{className:"px-1",children:"Â·"}),(0,b.jsx)("span",{children:`${M}${I>1?`-${I-1}`:""}`})]}),v&&(0,b.jsx)("div",{className:"body-lg-regular p-4 pt-0 text-text-quaternary",children:T("generation.batchFailed.outputPlaceholder",{ns:"share"})}),!t&&!v&&"string"==typeof z&&(0,b.jsx)("div",{className:(0,s.cn)("p-4",M&&"pt-0"),children:(0,b.jsx)(n.Markdown,{content:z})})]}),(0,b.jsxs)("div",{className:(0,s.cn)("system-xs-regular relative mt-1 h-4 px-4 text-text-quaternary",J&&(Z||af)&&I<3&&"pl-10"),children:[!a&&(0,b.jsxs)("span",{children:[z?.length," ",T("unit.char",{ns:"common"})]}),(0,b.jsxs)("div",{className:"absolute bottom-1 right-2 flex items-center",children:[!E&&K!==r.AppSourceType.installedApp&&!C&&(0,b.jsx)("div",{className:"ml-1 flex items-center gap-0.5 rounded-[10px] border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg p-0.5 shadow-md backdrop-blur-sm",children:(0,b.jsx)(j.default,{disabled:v||!A,onClick:aj,children:(0,b.jsx)(c.RiFileList3Line,{className:"h-4 w-4"})})}),(0,b.jsxs)("div",{className:"ml-1 flex items-center gap-0.5 rounded-[10px] border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg p-0.5 shadow-md backdrop-blur-sm",children:[D&&!W&&(0,b.jsx)(j.default,{state:3===I?j.ActionButtonState.Disabled:j.ActionButtonState.Default,disabled:3===I,onClick:ai,children:(0,b.jsx)(c.RiSparklingLine,{className:"h-4 w-4"})}),P&&!W&&(0,b.jsx)(o.default,{id:A,voice:ab?.text_to_speech?.voice}),("RESULT"===ak&&t?.resultText||!a)&&(0,b.jsx)(j.default,{disabled:v||!A,onClick:()=>{let b=a?t?.resultText:z;"string"==typeof b?(0,e.default)(b):(0,e.default)(JSON.stringify(b)),p.default.notify({type:"success",message:T("actionMsg.copySuccessfully",{ns:"common"})})},children:(0,b.jsx)(c.RiClipboardLine,{className:"h-4 w-4"})}),E&&v&&(0,b.jsx)(j.default,{onClick:y,children:(0,b.jsx)(c.RiReplay15Line,{className:"h-4 w-4"})}),E&&!a&&!W&&(0,b.jsx)(j.default,{disabled:v||!A,onClick:()=>{H?.(A)},children:(0,b.jsx)(c.RiBookmark3Line,{className:"h-4 w-4"})})]}),(O||E)&&!a&&!W&&!v&&A&&(0,b.jsxs)("div",{className:"ml-1 flex items-center gap-0.5 rounded-[10px] border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg p-0.5 shadow-md backdrop-blur-sm",children:[!F?.rating&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.default,{onClick:()=>G?.({rating:"like"}),children:(0,b.jsx)(c.RiThumbUpLine,{className:"h-4 w-4"})}),(0,b.jsx)(j.default,{onClick:()=>G?.({rating:"dislike"}),children:(0,b.jsx)(c.RiThumbDownLine,{className:"h-4 w-4"})})]}),F?.rating==="like"&&(0,b.jsx)(j.default,{state:j.ActionButtonState.Active,onClick:()=>G?.({rating:null}),children:(0,b.jsx)(c.RiThumbUpLine,{className:"h-4 w-4"})}),F?.rating==="dislike"&&(0,b.jsx)(j.default,{state:j.ActionButtonState.Destructive,onClick:()=>G?.({rating:null}),children:(0,b.jsx)(c.RiThumbDownLine,{className:"h-4 w-4"})})]})]})]}),!V&&(0,b.jsxs)("div",{className:(0,s.cn)("absolute top-[-32px] flex h-[33px] w-4 justify-center",J?"left-[17px]":"left-[50%] translate-x-[-50%]"),children:[(0,b.jsx)("div",{className:"h-full w-0.5 bg-divider-regular"}),(0,b.jsx)("div",{className:(0,s.cn)("absolute left-0 flex h-4 w-4 items-center justify-center rounded-2xl border-[0.5px] border-divider-subtle bg-util-colors-blue-blue-500 shadow-xs",J?"top-[3.5px]":"top-2"),children:(0,b.jsx)(c.RiSparklingFill,{className:"h-3 w-3 text-text-primary-on-surface"})})]})]})]}),(Z||af)&&I<3&&(0,b.jsx)(x,{isInWebApp:!0,content:X,messageId:Z,depth:I+1,moreLikeThis:!0,onFeedback:ae,isLoading:af,feedback:_,onSave:H,isShowTextToSpeech:P,isMobile:J,appSourceType:K,installedAppId:L,controlClearMoreLikeThis:N,isWorkflow:a,siteInfo:R,taskId:M})]})},y=g.memo(x);a.s(["default",0,y],460171)}];

//# sourceMappingURL=_25b87a36._.js.map