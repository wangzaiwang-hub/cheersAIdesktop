module.exports=[100596,a=>{"use strict";var b,c=a.i(608061);a.i(752298);var d=a.i(693025),e=a.i(280342),f=a.i(429150),g=a.i(57843),h=a.i(639378),i=a.i(355968),j=a.i(909795),k=a.i(816134),l=a.i(940272),m=a.i(608348),n=a.i(114715),o=a.i(948482);let p=g.forwardRef(function({title:a,titleId:b,...c},d){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":b},c),a?g.createElement("title",{id:b},a):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))});var q=a.i(527344);let r=({title:a,items:b,renderItem:d,onSelect:e,wrapperClassName:f})=>{let[h,i]=(0,g.useState)(!1);return(0,c.jsxs)("div",{className:(0,q.cn)("overflow-hidden rounded-xl bg-background-section-burn",f),children:[(0,c.jsxs)("div",{className:"flex cursor-pointer items-center justify-between px-3 py-2 text-xs font-medium leading-[18px] text-text-secondary",onClick:()=>i(!h),children:[a,h?(0,c.jsx)(o.ChevronDownIcon,{className:"h-3 w-3 text-components-button-tertiary-text"}):(0,c.jsx)(p,{className:"h-3 w-3 text-components-button-tertiary-text"})]}),h&&(0,c.jsx)("div",{className:"mx-1 mb-1 rounded-lg border-t border-divider-subtle bg-components-panel-on-panel-item-bg py-1",children:b.map(a=>(0,c.jsx)("div",{onClick:()=>e?.(a),children:d(a)},a.key))})]})};var s=a.i(18039),t=a.i(705134),u=a.i(724423),v=a.i(375616),w=a.i(9575),x=a.i(926261),y=a.i(16476),z=a.i(684460),A=a.i(413192),B=a.i(848636);let C=(0,a.i(282791).create)(a=>({sendEmailToken:"",setSendEmailToken:b=>a({sendEmailToken:b})}));function D(){let a=C(a=>a.setSendEmailToken);return(0,B.useMutation)({mutationKey:["delete-account"],mutationFn:w.sendDeleteAccountCode,onSuccess:b=>{"success"===b.result&&a(b.data)}})}function E(a){let{t:b}=(0,d.useTranslation)(),{userProfile:e}=(0,t.useAppContext)(),[f,h]=(0,g.useState)(""),{isPending:i,mutateAsync:l}=D(),m=(0,g.useCallback)(async()=>{try{let b=await l();"success"===b.result&&a.onConfirm()}catch(a){console.error(a)}},[l,a]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"body-md-medium py-1 text-text-destructive",children:b("account.deleteTip",{ns:"common"})}),(0,c.jsxs)("div",{className:"body-md-regular pb-2 pt-1 text-text-secondary",children:[b("account.deletePrivacyLinkTip",{ns:"common"}),(0,c.jsx)(A.default,{href:"https://dify.ai/privacy",className:"text-text-accent",children:b("account.deletePrivacyLink",{ns:"common"})})]}),(0,c.jsx)("label",{className:"system-sm-semibold mb-1 mt-3 flex h-6 items-center text-text-secondary",children:b("account.deleteLabel",{ns:"common"})}),(0,c.jsx)(k.default,{placeholder:b("account.deletePlaceholder",{ns:"common"}),onChange:a=>{h(a.target.value)}}),(0,c.jsxs)("div",{className:"mt-3 flex w-full flex-col gap-2",children:[(0,c.jsx)(j.default,{className:"w-full",disabled:f!==e.email||i,loading:i,variant:"primary",onClick:m,children:b("account.sendVerificationButton",{ns:"common"})}),(0,c.jsx)(j.default,{className:"w-full",onClick:a.onCancel,children:b("operation.cancel",{ns:"common"})})]})]})}var F=a.i(533306),G=a.i(146172),H=a.i(763539);function I(a){let{t:b}=(0,d.useTranslation)(),{userProfile:e}=(0,t.useAppContext)(),f=(0,F.useRouter)(),[h,i]=(0,g.useState)(""),{isPending:k,mutateAsync:l}=(0,B.useMutation)({mutationKey:["delete-account-feedback"],mutationFn:w.submitDeleteAccountFeedback}),{mutateAsync:m}=(0,H.useLogout)(),o=(0,g.useCallback)(async()=>{try{await m(),f.push("/signin"),n.default.notify({type:"info",message:b("account.deleteSuccessTip",{ns:"common"})})}catch(a){console.error(a)}},[f,b]),p=(0,g.useCallback)(async()=>{try{await l({feedback:h,email:e.email}),a.onConfirm(),await o()}catch(a){console.error(a)}},[o,h,l,e,a]),q=(0,g.useCallback)(()=>{a.onCancel(),o()},[o,a]);return(0,c.jsxs)(y.default,{show:!0,onClose:a.onCancel,title:b("account.feedbackTitle",{ns:"common"}),className:"max-w-[480px]",footer:!1,children:[(0,c.jsx)("label",{className:"system-sm-semibold mb-1 mt-3 flex items-center text-text-secondary",children:b("account.feedbackLabel",{ns:"common"})}),(0,c.jsx)(G.default,{rows:6,value:h,placeholder:b("account.feedbackPlaceholder",{ns:"common"}),onChange:a=>{i(a.target.value)}}),(0,c.jsxs)("div",{className:"mt-3 flex w-full flex-col gap-2",children:[(0,c.jsx)(j.default,{className:"w-full",loading:k,variant:"primary",onClick:p,children:b("operation.submit",{ns:"common"})}),(0,c.jsx)(j.default,{className:"w-full",onClick:q,children:b("operation.skip",{ns:"common"})})]})]})}let J=/[A-Z\d]{6}/gi;function K(a){let{t:b}=(0,d.useTranslation)(),e=C(a=>a.sendEmailToken),[f,h]=(0,g.useState)(),[i,l]=(0,g.useState)(!0),{mutate:m}=D(),{isPending:n,mutateAsync:o}=(0,B.useMutation)({mutationKey:["confirm-delete-account"],mutationFn:w.verifyDeleteAccountCode});(0,g.useEffect)(()=>{l(!(f&&J.test(f))||n)},[f,n]);let p=(0,g.useCallback)(async()=>{try{let b=await o({code:f,token:e});"success"===b.result&&a.onConfirm()}catch(a){console.error(a)}},[e,f,o,a]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"body-md-medium pt-1 text-text-destructive",children:b("account.deleteTip",{ns:"common"})}),(0,c.jsxs)("div",{className:"body-md-regular pb-2 pt-1 text-text-secondary",children:[b("account.deletePrivacyLinkTip",{ns:"common"}),(0,c.jsx)(A.default,{href:"https://dify.ai/privacy",className:"text-text-accent",children:b("account.deletePrivacyLink",{ns:"common"})})]}),(0,c.jsx)("label",{className:"system-sm-semibold mb-1 mt-3 flex h-6 items-center text-text-secondary",children:b("account.verificationLabel",{ns:"common"})}),(0,c.jsx)(k.default,{minLength:6,maxLength:6,placeholder:b("account.verificationPlaceholder",{ns:"common"}),onChange:a=>{h(a.target.value)}}),(0,c.jsxs)("div",{className:"mt-3 flex w-full flex-col gap-2",children:[(0,c.jsx)(j.default,{className:"w-full",disabled:i,loading:n,variant:"warning",onClick:p,children:b("account.permanentlyDeleteButton",{ns:"common"})}),(0,c.jsx)(j.default,{className:"w-full",onClick:a.onCancel,children:b("operation.cancel",{ns:"common"})}),(0,c.jsx)(z.default,{onResend:m})]})]})}function L(a){let{t:b}=(0,d.useTranslation)(),[e,f]=(0,g.useState)(!1),[h,i]=(0,g.useState)(!1),j=(0,g.useCallback)(async()=>{try{f(!0),localStorage.setItem(z.COUNT_DOWN_KEY,`${z.COUNT_DOWN_TIME_MS}`)}catch(a){console.error(a)}},[]);return h?(0,c.jsx)(I,{onCancel:a.onCancel,onConfirm:a.onConfirm}):(0,c.jsxs)(y.default,{show:!0,onClose:a.onCancel,title:b("account.delete",{ns:"common"}),className:"max-w-[480px]",footer:!1,children:[!e&&(0,c.jsx)(E,{onCancel:a.onCancel,onConfirm:j}),e&&(0,c.jsx)(K,{onCancel:a.onCancel,onConfirm:()=>{i(!0)}})]})}var M=a.i(237005),N=a.i(787570),O=a.i(892839),P=a.i(757801),Q=a.i(305381);let R=({onSave:a,...b})=>{let{t:e}=(0,d.useTranslation)(),{notify:i}=(0,h.useContext)(n.ToastContext),[k,m]=(0,g.useState)(),[o,p]=(0,g.useState)(!1),[q,r]=(0,g.useState)(!1),[t,u]=(0,g.useState)(!1),[v,x]=(0,g.useState)("left"),[y,z]=(0,g.useState)(!1),A=(0,g.useCallback)(async(a,b,c,d)=>{m(a?{tempUrl:b,croppedAreaPixels:c,fileName:d}:{file:b})},[m]),B=(0,g.useCallback)(async b=>{try{await (0,w.updateUserProfile)({url:"account/avatar",body:{avatar:b}}),p(!1),a?.(),i({type:"success",message:e("actionMsg.modifiedSuccessfully",{ns:"common"})})}catch(a){i({type:"error",message:a.message})}},[i,a,e]),C=(0,g.useCallback)(async()=>{try{await (0,w.updateUserProfile)({url:"account/avatar",body:{avatar:""}}),i({type:"success",message:e("actionMsg.modifiedSuccessfully",{ns:"common"})}),u(!1),a?.()}catch(a){i({type:"error",message:a.message})}},[i,a,e]),{handleLocalFileUpload:D}=(0,Q.useLocalFileUploader)({limit:3,disabled:!1,onUpload:a=>{100===a.progress&&(r(!1),m(void 0),B(a.fileId)),-1===a.progress&&r(!1)}}),E=(0,g.useCallback)(async()=>{if(!k)return;if(r(!0),"file"in k)return void D(k.file);let a=await (0,N.default)(k.tempUrl,k.croppedAreaPixels,k.fileName);D(new File([a],k.fileName,{type:a.type}))},[D,k]);return s.DISABLE_UPLOAD_IMAGE_AS_ICON?(0,c.jsx)(O.default,{...b}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"group relative",children:[(0,c.jsx)(O.default,{...b,onError:a=>z(a)}),(0,c.jsx)("div",{className:"absolute inset-0 flex cursor-pointer items-center justify-center rounded-full bg-black/50 opacity-0 transition-opacity group-hover:opacity-100",onClick:()=>{"right"!==v||y?p(!0):u(!0)},onMouseMove:a=>{let b=a.currentTarget.getBoundingClientRect();x(a.clientX-b.left>b.width/2?"right":"left")},children:"right"!==v||y?(0,c.jsx)("span",{className:"text-xs text-white",children:(0,c.jsx)(f.RiPencilLine,{})}):(0,c.jsx)("span",{className:"text-xs text-white",children:(0,c.jsx)(f.RiDeleteBin5Line,{})})})]})}),(0,c.jsxs)(l.default,{closable:!0,className:"!w-[362px] !p-0",isShow:o,onClose:()=>p(!1),children:[(0,c.jsx)(M.default,{onImageInput:A,cropShape:"round"}),(0,c.jsx)(P.default,{className:"m-0"}),(0,c.jsxs)("div",{className:"flex w-full items-center justify-center gap-2 p-3",children:[(0,c.jsx)(j.default,{className:"w-full",onClick:()=>p(!1),children:e("iconPicker.cancel",{ns:"app"})}),(0,c.jsx)(j.default,{variant:"primary",className:"w-full",disabled:q||!k,loading:q,onClick:E,children:e("iconPicker.ok",{ns:"app"})})]})]}),(0,c.jsxs)(l.default,{closable:!0,className:"!w-[362px] !p-6",isShow:t,onClose:()=>u(!1),children:[(0,c.jsx)("div",{className:"title-2xl-semi-bold mb-3 text-text-primary",children:e("avatar.deleteTitle",{ns:"common"})}),(0,c.jsx)("p",{className:"mb-8 text-text-secondary",children:e("avatar.deleteDescription",{ns:"common"})}),(0,c.jsxs)("div",{className:"flex w-full items-center justify-center gap-2",children:[(0,c.jsx)(j.default,{className:"w-full",onClick:()=>u(!1),children:e("operation.cancel",{ns:"common"})}),(0,c.jsx)(j.default,{variant:"warning",className:"w-full",onClick:C,children:e("operation.delete",{ns:"common"})})]})]})]})};var S=a.i(111089),T=a.i(578652),U=a.i(459858),V=((b=V||{}).start="start",b.verifyOrigin="verifyOrigin",b.newEmail="newEmail",b.verifyNew="verifyNew",b);let W=({onClose:a,email:b,show:e})=>{let{t:i}=(0,d.useTranslation)(),{notify:m}=(0,h.useContext)(n.ToastContext),o=(0,F.useRouter)(),[p,q]=(0,g.useState)("start"),[r,s]=(0,g.useState)(""),[t,u]=(0,g.useState)(""),[v,x]=(0,g.useState)(0),[y,z]=(0,g.useState)(""),[A,B]=(0,g.useState)(!1),[C,D]=(0,g.useState)(!1),[E,G]=(0,g.useState)(!1),I=async(a,b,c)=>{try{let d,e=await (0,w.sendVerifyCode)({email:a,phase:b?"old_email":"new_email",token:c});x(60),d=setInterval(()=>{x(a=>a<=0?(clearInterval(d),0):a-1)},1e3),e.data&&z(e.data)}catch(a){m({type:"error",message:`Error sending verification code: ${a?a.message:""}`})}},J=async(a,b,c,d)=>{try{let e=await (0,w.verifyEmail)({email:a,code:b,token:c});e.is_valid?(z(e.token),d?.(e.token)):m({type:"error",message:"Verifying email failed"})}catch(a){m({type:"error",message:`Error verifying email: ${a?a.message:""}`})}},K=async()=>{await I(b,!0),q("verifyOrigin")},L=async()=>{await J(b,r,y,()=>q("newEmail")),s("")},M=a=>/^[\w.!#$%&'*+/=?^`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i.test(a)&&a.length<=254,N=async a=>{G(!0);try{await (0,w.checkEmailExisted)({email:a}),B(!1),D(!1)}catch(a){if(400===a.status){let[,b]=await (0,U.asyncRunSafe)(a.json()),{code:c}=b||{};"email_already_in_use"===c&&B(!0),"account_in_freeze"===c&&D(!0)}}finally{G(!1)}},O=async()=>{M(t)?(await I(t,!1,y),q("verifyNew")):m({type:"error",message:"Invalid email format"})},{mutateAsync:P}=(0,H.useLogout)(),Q=async()=>{await P(),localStorage.removeItem("setup_status"),o.push("/signin")},R=async a=>{try{await (0,w.resetEmail)({new_email:t,token:a}),Q()}catch(a){m({type:"error",message:`Error changing email: ${a?a.message:""}`})}},V=async()=>{await J(t,r,y,R)};return(0,c.jsxs)(l.default,{isShow:e,onClose:S.noop,className:"!w-[420px] !p-6",children:[(0,c.jsx)("div",{className:"absolute right-5 top-5 cursor-pointer p-1.5",onClick:a,children:(0,c.jsx)(f.RiCloseLine,{className:"h-5 w-5 text-text-tertiary"})}),"start"===p&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"title-2xl-semi-bold pb-3 text-text-primary",children:i("account.changeEmail.title",{ns:"common"})}),(0,c.jsxs)("div",{className:"space-y-0.5 pb-2 pt-1",children:[(0,c.jsx)("div",{className:"body-md-medium text-text-warning",children:i("account.changeEmail.authTip",{ns:"common"})}),(0,c.jsx)("div",{className:"body-md-regular text-text-secondary",children:(0,c.jsx)(T.Trans,{i18nKey:"account.changeEmail.content1",ns:"common",components:{email:(0,c.jsx)("span",{className:"body-md-medium text-text-primary"})},values:{email:b}})})]}),(0,c.jsx)("div",{className:"pt-3"}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(j.default,{className:"!w-full",variant:"primary",onClick:K,children:i("account.changeEmail.sendVerifyCode",{ns:"common"})}),(0,c.jsx)(j.default,{className:"!w-full",onClick:a,children:i("operation.cancel",{ns:"common"})})]})]}),"verifyOrigin"===p&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"title-2xl-semi-bold pb-3 text-text-primary",children:i("account.changeEmail.verifyEmail",{ns:"common"})}),(0,c.jsx)("div",{className:"space-y-0.5 pb-2 pt-1",children:(0,c.jsx)("div",{className:"body-md-regular text-text-secondary",children:(0,c.jsx)(T.Trans,{i18nKey:"account.changeEmail.content2",ns:"common",components:{email:(0,c.jsx)("span",{className:"body-md-medium text-text-primary"})},values:{email:b}})})}),(0,c.jsxs)("div",{className:"pt-3",children:[(0,c.jsx)("div",{className:"system-sm-medium mb-1 flex h-6 items-center text-text-secondary",children:i("account.changeEmail.codeLabel",{ns:"common"})}),(0,c.jsx)(k.default,{className:"!w-full",placeholder:i("account.changeEmail.codePlaceholder",{ns:"common"}),value:r,onChange:a=>s(a.target.value),maxLength:6})]}),(0,c.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,c.jsx)(j.default,{disabled:6!==r.length,className:"!w-full",variant:"primary",onClick:L,children:i("account.changeEmail.continue",{ns:"common"})}),(0,c.jsx)(j.default,{className:"!w-full",onClick:a,children:i("operation.cancel",{ns:"common"})})]}),(0,c.jsxs)("div",{className:"system-xs-regular mt-3 flex items-center gap-1 text-text-tertiary",children:[(0,c.jsx)("span",{children:i("account.changeEmail.resendTip",{ns:"common"})}),v>0&&(0,c.jsx)("span",{children:i("account.changeEmail.resendCount",{ns:"common",count:v})}),!v&&(0,c.jsx)("span",{onClick:K,className:"system-xs-medium cursor-pointer text-text-accent-secondary",children:i("account.changeEmail.resend",{ns:"common"})})]})]}),"newEmail"===p&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"title-2xl-semi-bold pb-3 text-text-primary",children:i("account.changeEmail.newEmail",{ns:"common"})}),(0,c.jsx)("div",{className:"space-y-0.5 pb-2 pt-1",children:(0,c.jsx)("div",{className:"body-md-regular text-text-secondary",children:i("account.changeEmail.content3",{ns:"common"})})}),(0,c.jsxs)("div",{className:"pt-3",children:[(0,c.jsx)("div",{className:"system-sm-medium mb-1 flex h-6 items-center text-text-secondary",children:i("account.changeEmail.emailLabel",{ns:"common"})}),(0,c.jsx)(k.default,{className:"!w-full",placeholder:i("account.changeEmail.emailPlaceholder",{ns:"common"}),value:t,onChange:a=>{var b;u(b=a.target.value),B(!1),M(b)&&N(b)},destructive:A||C}),A&&(0,c.jsx)("div",{className:"body-xs-regular mt-1 py-0.5 text-text-destructive",children:i("account.changeEmail.existingEmail",{ns:"common"})}),C&&(0,c.jsx)("div",{className:"body-xs-regular mt-1 py-0.5 text-text-destructive",children:i("account.changeEmail.unAvailableEmail",{ns:"common"})})]}),(0,c.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,c.jsx)(j.default,{disabled:!t||A||C||E||!M(t),className:"!w-full",variant:"primary",onClick:O,children:i("account.changeEmail.sendVerifyCode",{ns:"common"})}),(0,c.jsx)(j.default,{className:"!w-full",onClick:a,children:i("operation.cancel",{ns:"common"})})]})]}),"verifyNew"===p&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"title-2xl-semi-bold pb-3 text-text-primary",children:i("account.changeEmail.verifyNew",{ns:"common"})}),(0,c.jsx)("div",{className:"space-y-0.5 pb-2 pt-1",children:(0,c.jsx)("div",{className:"body-md-regular text-text-secondary",children:(0,c.jsx)(T.Trans,{i18nKey:"account.changeEmail.content4",ns:"common",components:{email:(0,c.jsx)("span",{className:"body-md-medium text-text-primary"})},values:{email:t}})})}),(0,c.jsxs)("div",{className:"pt-3",children:[(0,c.jsx)("div",{className:"system-sm-medium mb-1 flex h-6 items-center text-text-secondary",children:i("account.changeEmail.codeLabel",{ns:"common"})}),(0,c.jsx)(k.default,{className:"!w-full",placeholder:i("account.changeEmail.codePlaceholder",{ns:"common"}),value:r,onChange:a=>s(a.target.value),maxLength:6})]}),(0,c.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,c.jsx)(j.default,{disabled:6!==r.length,className:"!w-full",variant:"primary",onClick:V,children:i("account.changeEmail.changeTo",{ns:"common",email:t})}),(0,c.jsx)(j.default,{className:"!w-full",onClick:a,children:i("operation.cancel",{ns:"common"})})]}),(0,c.jsxs)("div",{className:"system-xs-regular mt-3 flex items-center gap-1 text-text-tertiary",children:[(0,c.jsx)("span",{children:i("account.changeEmail.resendTip",{ns:"common"})}),v>0&&(0,c.jsx)("span",{children:i("account.changeEmail.resendCount",{ns:"common",count:v})}),!v&&(0,c.jsx)("span",{onClick:O,className:"system-xs-medium cursor-pointer text-text-accent-secondary",children:i("account.changeEmail.resend",{ns:"common"})})]})]})]})},X=`
  system-sm-semibold text-text-secondary
`,Y=`
  mt-1 body-xs-regular text-text-tertiary
`;function Z(){let{t:a}=(0,d.useTranslation)(),{systemFeatures:b}=(0,u.useGlobalPublicStore)(),{data:e}=(0,x.useAppList)({page:1,limit:100,name:""}),o=e?.data||[],{mutateUserProfile:p,userProfile:q}=(0,t.useAppContext)(),{isEducationAccount:y}=(0,v.useProviderContext)(),{notify:z}=(0,h.useContext)(n.ToastContext),[A,B]=(0,g.useState)(!1),[C,D]=(0,g.useState)(""),[E,F]=(0,g.useState)(!1),[G,H]=(0,g.useState)(!1),[I,J]=(0,g.useState)(""),[K,M]=(0,g.useState)(""),[N,O]=(0,g.useState)(""),[P,Q]=(0,g.useState)(!1),[S,T]=(0,g.useState)(!1),[U,V]=(0,g.useState)(!1),[Z,$]=(0,g.useState)(!1),[_,aa]=(0,g.useState)(!1),ab=async()=>{try{F(!0),await (0,w.updateUserProfile)({url:"account/name",body:{name:C}}),z({type:"success",message:a("actionMsg.modifiedSuccessfully",{ns:"common"})}),p(),B(!1),F(!1)}catch(a){z({type:"error",message:a.message}),F(!1)}},ac=a=>{z({type:"error",message:a})},ad=()=>{J(""),M(""),O("")},ae=async()=>{if(K.trim()?s.validPassword.test(K)?K===N||(ac(a("account.notEqual",{ns:"common"})),!1):(ac(a("error.passwordInvalid",{ns:"login"})),!1):(ac(a("error.passwordEmpty",{ns:"login"})),!1))try{F(!0),await (0,w.updateUserProfile)({url:"account/password",body:{password:I,new_password:K,repeat_new_password:N}}),z({type:"success",message:a("actionMsg.modifiedSuccessfully",{ns:"common"})}),p(),H(!1),ad(),F(!1)}catch(a){z({type:"error",message:a.message}),H(!1),F(!1)}};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"pb-3 pt-2",children:(0,c.jsx)("h4",{className:"title-2xl-semi-bold text-text-primary",children:a("account.myAccount",{ns:"common"})})}),(0,c.jsxs)("div",{className:"mb-8 flex items-center rounded-xl bg-gradient-to-r from-background-gradient-bg-fill-chat-bg-2 to-background-gradient-bg-fill-chat-bg-1 p-6",children:[(0,c.jsx)(R,{avatar:q.avatar_url,name:q.name,onSave:p,size:64}),(0,c.jsxs)("div",{className:"ml-4",children:[(0,c.jsxs)("p",{className:"system-xl-semibold text-text-primary",children:[q.name,y&&(0,c.jsxs)(m.default,{size:"s",color:"blue",className:"ml-1 !px-2",children:[(0,c.jsx)(f.RiGraduationCapFill,{className:"mr-1 h-3 w-3"}),(0,c.jsx)("span",{className:"system-2xs-medium",children:"EDU"})]})]}),(0,c.jsx)("p",{className:"system-xs-regular text-text-tertiary",children:q.email})]})]}),(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsx)("div",{className:X,children:a("account.name",{ns:"common"})}),(0,c.jsxs)("div",{className:"mt-2 flex w-full items-center justify-between gap-2",children:[(0,c.jsx)("div",{className:"system-sm-regular flex-1 rounded-lg bg-components-input-bg-normal p-2 text-components-input-text-filled ",children:(0,c.jsx)("span",{className:"pl-1",children:q.name})}),(0,c.jsx)("div",{className:"system-sm-medium cursor-pointer rounded-lg bg-components-button-tertiary-bg px-3 py-2 text-components-button-tertiary-text",onClick:()=>{B(!0),D(q.name)},children:a("operation.edit",{ns:"common"})})]})]}),(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsx)("div",{className:X,children:a("account.email",{ns:"common"})}),(0,c.jsxs)("div",{className:"mt-2 flex w-full items-center justify-between gap-2",children:[(0,c.jsx)("div",{className:"system-sm-regular flex-1 rounded-lg bg-components-input-bg-normal p-2 text-components-input-text-filled ",children:(0,c.jsx)("span",{className:"pl-1",children:q.email})}),b.enable_change_email&&(0,c.jsx)("div",{className:"system-sm-medium cursor-pointer rounded-lg bg-components-button-tertiary-bg px-3 py-2 text-components-button-tertiary-text",onClick:()=>aa(!0),children:a("operation.change",{ns:"common"})})]})]}),b.enable_email_password_login&&(0,c.jsxs)("div",{className:"mb-8 flex justify-between gap-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"system-sm-semibold mb-1 text-text-secondary",children:a("account.password",{ns:"common"})}),(0,c.jsx)("div",{className:"body-xs-regular mb-2 text-text-tertiary",children:a("account.passwordTip",{ns:"common"})})]}),(0,c.jsx)(j.default,{onClick:()=>H(!0),children:q.is_password_set?a("account.resetPassword",{ns:"common"}):a("account.setPassword",{ns:"common"})})]}),(0,c.jsx)("div",{className:"mb-6 border-[1px] border-divider-subtle"}),(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsx)("div",{className:X,children:a("account.langGeniusAccount",{ns:"common"})}),(0,c.jsx)("div",{className:Y,children:a("account.langGeniusAccountTip",{ns:"common"})}),!!o.length&&(0,c.jsx)(r,{title:`${a("account.showAppLength",{ns:"common",length:o.length})}`,items:o.map(a=>({...a,key:a.id,name:a.name})),renderItem:a=>{let{icon:b,icon_background:d,icon_type:e,icon_url:f}=a;return(0,c.jsxs)("div",{className:"flex px-3 py-1",children:[(0,c.jsx)("div",{className:"mr-3",children:(0,c.jsx)(i.default,{size:"tiny",iconType:e,icon:b,background:d,imageUrl:f})}),(0,c.jsx)("div",{className:"system-sm-medium mt-[3px] text-text-secondary",children:a.name})]})},wrapperClassName:"mt-2"}),!s.IS_CE_EDITION&&(0,c.jsx)(j.default,{className:"mt-2 text-components-button-destructive-secondary-text",onClick:()=>Q(!0),children:a("account.delete",{ns:"common"})})]}),A&&(0,c.jsxs)(l.default,{isShow:!0,onClose:()=>B(!1),className:"!w-[420px] !p-6",children:[(0,c.jsx)("div",{className:"title-2xl-semi-bold mb-6 text-text-primary",children:a("account.editName",{ns:"common"})}),(0,c.jsx)("div",{className:X,children:a("account.name",{ns:"common"})}),(0,c.jsx)(k.default,{className:"mt-2",value:C,onChange:a=>D(a.target.value)}),(0,c.jsxs)("div",{className:"mt-10 flex justify-end",children:[(0,c.jsx)(j.default,{className:"mr-2",onClick:()=>B(!1),children:a("operation.cancel",{ns:"common"})}),(0,c.jsx)(j.default,{disabled:E||!C,variant:"primary",onClick:ab,children:a("operation.save",{ns:"common"})})]})]}),G&&(0,c.jsxs)(l.default,{isShow:!0,onClose:()=>{H(!1),ad()},className:"!w-[420px] !p-6",children:[(0,c.jsx)("div",{className:"title-2xl-semi-bold mb-6 text-text-primary",children:q.is_password_set?a("account.resetPassword",{ns:"common"}):a("account.setPassword",{ns:"common"})}),q.is_password_set&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:X,children:a("account.currentPassword",{ns:"common"})}),(0,c.jsxs)("div",{className:"relative mt-2",children:[(0,c.jsx)(k.default,{type:S?"text":"password",value:I,onChange:a=>J(a.target.value)}),(0,c.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center",children:(0,c.jsx)(j.default,{type:"button",variant:"ghost",onClick:()=>T(!S),children:S?"ðŸ‘€":"ðŸ˜"})})]})]}),(0,c.jsx)("div",{className:"system-sm-semibold mt-8 text-text-secondary",children:q.is_password_set?a("account.newPassword",{ns:"common"}):a("account.password",{ns:"common"})}),(0,c.jsxs)("div",{className:"relative mt-2",children:[(0,c.jsx)(k.default,{type:U?"text":"password",value:K,onChange:a=>M(a.target.value)}),(0,c.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center",children:(0,c.jsx)(j.default,{type:"button",variant:"ghost",onClick:()=>V(!U),children:U?"ðŸ‘€":"ðŸ˜"})})]}),(0,c.jsx)("div",{className:"system-sm-semibold mt-8 text-text-secondary",children:a("account.confirmPassword",{ns:"common"})}),(0,c.jsxs)("div",{className:"relative mt-2",children:[(0,c.jsx)(k.default,{type:Z?"text":"password",value:N,onChange:a=>O(a.target.value)}),(0,c.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center",children:(0,c.jsx)(j.default,{type:"button",variant:"ghost",onClick:()=>$(!Z),children:Z?"ðŸ‘€":"ðŸ˜"})})]}),(0,c.jsxs)("div",{className:"mt-10 flex justify-end",children:[(0,c.jsx)(j.default,{className:"mr-2",onClick:()=>{H(!1),ad()},children:a("operation.cancel",{ns:"common"})}),(0,c.jsx)(j.default,{disabled:E,variant:"primary",onClick:ae,children:q.is_password_set?a("operation.reset",{ns:"common"}):a("operation.save",{ns:"common"})})]})]}),P&&(0,c.jsx)(L,{onCancel:()=>Q(!1),onConfirm:()=>Q(!1)}),_&&(0,c.jsx)(W,{show:_,onClose:()=>aa(!1),email:q.email})]})}function $(){let{t:a}=(0,d.useTranslation)();return(0,e.default)(a("menus.account",{ns:"common"})),(0,c.jsx)("div",{className:"mx-auto w-full max-w-[640px] px-6 pt-12",children:(0,c.jsx)(Z,{})})}a.s(["default",()=>$],100596)}];

//# sourceMappingURL=app_account_%28commonLayout%29_page_tsx_8a67d3be._.js.map