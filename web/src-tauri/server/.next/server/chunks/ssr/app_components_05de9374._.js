module.exports=[362368,a=>{a.v({codeBrowserIcon:"style-module__vuZ-gq__codeBrowserIcon",generateLogo:"style-module__vuZ-gq__generateLogo",refreshIcon:"style-module__vuZ-gq__refreshIcon",rotate:"style-module__vuZ-gq__rotate"})},45272,624863,a=>{"use strict";let b,c;var d,e,f,g,h,i=a.i(608061),j=a.i(292458),k=a.i(261574),l=a.i(533306),m=a.i(57843),n=a.i(388206),o=a.i(243103),p=a.i(124116),q=a.i(585124),r=a.i(527344),s=a.i(757801);a.i(713310);var t=a.i(128972),u=a.i(429150),v=a.i(860653);a.i(752298);var w=a.i(693025),x=a.i(639378),y=a.i(182769),z=a.i(909795),A=a.i(42550),B=a.i(748240),C=Object.defineProperty,D=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,G=(a,b,c)=>b in a?C(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c,H=(a,b)=>{for(var c in b||(b={}))E.call(b,c)&&G(a,c,b[c]);if(D)for(var c of D(b))F.call(b,c)&&G(a,c,b[c]);return a},I=(a,b)=>{var c={};for(var d in a)E.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&D)for(var d of D(a))0>b.indexOf(d)&&F.call(a,d)&&(c[d]=a[d]);return c};(a=>{let b=class b{constructor(a,c,d,f){if(this.version=a,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],a<b.MIN_VERSION||a>b.MAX_VERSION)throw RangeError("Version value out of range");if(f<-1||f>7)throw RangeError("Mask value out of range");this.size=4*a+17;let g=[];for(let a=0;a<this.size;a++)g.push(!1);for(let a=0;a<this.size;a++)this.modules.push(g.slice()),this.isFunction.push(g.slice());this.drawFunctionPatterns();const h=this.addEccAndInterleave(d);if(this.drawCodewords(h),-1==f){let a=1e9;for(let b=0;b<8;b++){this.applyMask(b),this.drawFormatBits(b);const c=this.getPenaltyScore();c<a&&(f=b,a=c),this.applyMask(b)}}e(0<=f&&f<=7),this.mask=f,this.applyMask(f),this.drawFormatBits(f),this.isFunction=[]}static encodeText(c,d){let e=a.QrSegment.makeSegments(c);return b.encodeSegments(e,d)}static encodeBinary(c,d){let e=a.QrSegment.makeBytes(c);return b.encodeSegments([e],d)}static encodeSegments(a,d,f=1,h=40,i=-1,j=!0){let k,l;if(!(b.MIN_VERSION<=f&&f<=h&&h<=b.MAX_VERSION)||i<-1||i>7)throw RangeError("Invalid value");for(k=f;;k++){let c=8*b.getNumDataCodewords(k,d),e=g.getTotalBits(a,k);if(e<=c){l=e;break}if(k>=h)throw RangeError("Data too long")}for(let a of[b.Ecc.MEDIUM,b.Ecc.QUARTILE,b.Ecc.HIGH])j&&l<=8*b.getNumDataCodewords(k,a)&&(d=a);let m=[];for(let b of a)for(let a of(c(b.mode.modeBits,4,m),c(b.numChars,b.mode.numCharCountBits(k),m),b.getData()))m.push(a);e(m.length==l);let n=8*b.getNumDataCodewords(k,d);e(m.length<=n),c(0,Math.min(4,n-m.length),m),c(0,(8-m.length%8)%8,m),e(m.length%8==0);for(let a=236;m.length<n;a^=253)c(a,8,m);let o=[];for(;8*o.length<m.length;)o.push(0);return m.forEach((a,b)=>o[b>>>3]|=a<<7-(7&b)),new b(k,d,o,i)}getModule(a,b){return 0<=a&&a<this.size&&0<=b&&b<this.size&&this.modules[b][a]}getModules(){return this.modules}drawFunctionPatterns(){for(let a=0;a<this.size;a++)this.setFunctionModule(6,a,a%2==0),this.setFunctionModule(a,6,a%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let a=this.getAlignmentPatternPositions(),b=a.length;for(let c=0;c<b;c++)for(let d=0;d<b;d++)(0!=c||0!=d)&&(0!=c||d!=b-1)&&(c!=b-1||0!=d)&&this.drawAlignmentPattern(a[c],a[d]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(a){let b=this.errorCorrectionLevel.formatBits<<3|a,c=b;for(let a=0;a<10;a++)c=c<<1^(c>>>9)*1335;let f=(b<<10|c)^21522;e(f>>>15==0);for(let a=0;a<=5;a++)this.setFunctionModule(8,a,d(f,a));this.setFunctionModule(8,7,d(f,6)),this.setFunctionModule(8,8,d(f,7)),this.setFunctionModule(7,8,d(f,8));for(let a=9;a<15;a++)this.setFunctionModule(14-a,8,d(f,a));for(let a=0;a<8;a++)this.setFunctionModule(this.size-1-a,8,d(f,a));for(let a=8;a<15;a++)this.setFunctionModule(8,this.size-15+a,d(f,a));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let a=this.version;for(let b=0;b<12;b++)a=a<<1^(a>>>11)*7973;let b=this.version<<12|a;e(b>>>18==0);for(let a=0;a<18;a++){let c=d(b,a),e=this.size-11+a%3,f=Math.floor(a/3);this.setFunctionModule(e,f,c),this.setFunctionModule(f,e,c)}}drawFinderPattern(a,b){for(let c=-4;c<=4;c++)for(let d=-4;d<=4;d++){let e=Math.max(Math.abs(d),Math.abs(c)),f=a+d,g=b+c;0<=f&&f<this.size&&0<=g&&g<this.size&&this.setFunctionModule(f,g,2!=e&&4!=e)}}drawAlignmentPattern(a,b){for(let c=-2;c<=2;c++)for(let d=-2;d<=2;d++)this.setFunctionModule(a+d,b+c,1!=Math.max(Math.abs(d),Math.abs(c)))}setFunctionModule(a,b,c){this.modules[b][a]=c,this.isFunction[b][a]=!0}addEccAndInterleave(a){let c=this.version,d=this.errorCorrectionLevel;if(a.length!=b.getNumDataCodewords(c,d))throw RangeError("Invalid argument");let f=b.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],g=b.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],h=Math.floor(b.getNumRawDataModules(c)/8),i=f-h%f,j=Math.floor(h/f),k=[],l=b.reedSolomonComputeDivisor(g);for(let c=0,d=0;c<f;c++){let e=a.slice(d,d+j-g+(c<i?0:1));d+=e.length;let f=b.reedSolomonComputeRemainder(e,l);c<i&&e.push(0),k.push(e.concat(f))}let m=[];for(let a=0;a<k[0].length;a++)k.forEach((b,c)=>{(a!=j-g||c>=i)&&m.push(b[a])});return e(m.length==h),m}drawCodewords(a){if(a.length!=Math.floor(b.getNumRawDataModules(this.version)/8))throw RangeError("Invalid argument");let c=0;for(let b=this.size-1;b>=1;b-=2){6==b&&(b=5);for(let e=0;e<this.size;e++)for(let f=0;f<2;f++){let g=b-f,h=(b+1&2)==0?this.size-1-e:e;!this.isFunction[h][g]&&c<8*a.length&&(this.modules[h][g]=d(a[c>>>3],7-(7&c)),c++)}}e(c==8*a.length)}applyMask(a){if(a<0||a>7)throw RangeError("Mask value out of range");for(let b=0;b<this.size;b++)for(let c=0;c<this.size;c++){let d;switch(a){case 0:d=(c+b)%2==0;break;case 1:d=b%2==0;break;case 2:d=c%3==0;break;case 3:d=(c+b)%3==0;break;case 4:d=(Math.floor(c/3)+Math.floor(b/2))%2==0;break;case 5:d=c*b%2+c*b%3==0;break;case 6:d=(c*b%2+c*b%3)%2==0;break;case 7:d=((c+b)%2+c*b%3)%2==0;break;default:throw Error("Unreachable")}!this.isFunction[b][c]&&d&&(this.modules[b][c]=!this.modules[b][c])}}getPenaltyScore(){let a=0;for(let c=0;c<this.size;c++){let d=!1,e=0,f=[0,0,0,0,0,0,0];for(let g=0;g<this.size;g++)this.modules[c][g]==d?5==++e?a+=b.PENALTY_N1:e>5&&a++:(this.finderPenaltyAddHistory(e,f),d||(a+=this.finderPenaltyCountPatterns(f)*b.PENALTY_N3),d=this.modules[c][g],e=1);a+=this.finderPenaltyTerminateAndCount(d,e,f)*b.PENALTY_N3}for(let c=0;c<this.size;c++){let d=!1,e=0,f=[0,0,0,0,0,0,0];for(let g=0;g<this.size;g++)this.modules[g][c]==d?5==++e?a+=b.PENALTY_N1:e>5&&a++:(this.finderPenaltyAddHistory(e,f),d||(a+=this.finderPenaltyCountPatterns(f)*b.PENALTY_N3),d=this.modules[g][c],e=1);a+=this.finderPenaltyTerminateAndCount(d,e,f)*b.PENALTY_N3}for(let c=0;c<this.size-1;c++)for(let d=0;d<this.size-1;d++){let e=this.modules[c][d];e==this.modules[c][d+1]&&e==this.modules[c+1][d]&&e==this.modules[c+1][d+1]&&(a+=b.PENALTY_N2)}let c=0;for(let a of this.modules)c=a.reduce((a,b)=>a+ +!!b,c);let d=this.size*this.size,f=Math.ceil(Math.abs(20*c-10*d)/d)-1;return e(0<=f&&f<=9),e(0<=(a+=f*b.PENALTY_N4)&&a<=2568888),a}getAlignmentPatternPositions(){if(1==this.version)return[];{let a=Math.floor(this.version/7)+2,b=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*a-2)),c=[6];for(let d=this.size-7;c.length<a;d-=b)c.splice(1,0,d);return c}}static getNumRawDataModules(a){if(a<b.MIN_VERSION||a>b.MAX_VERSION)throw RangeError("Version number out of range");let c=(16*a+128)*a+64;if(a>=2){let b=Math.floor(a/7)+2;c-=(25*b-10)*b-55,a>=7&&(c-=36)}return e(208<=c&&c<=29648),c}static getNumDataCodewords(a,c){return Math.floor(b.getNumRawDataModules(a)/8)-b.ECC_CODEWORDS_PER_BLOCK[c.ordinal][a]*b.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][a]}static reedSolomonComputeDivisor(a){if(a<1||a>255)throw RangeError("Degree out of range");let c=[];for(let b=0;b<a-1;b++)c.push(0);c.push(1);let d=1;for(let e=0;e<a;e++){for(let a=0;a<c.length;a++)c[a]=b.reedSolomonMultiply(c[a],d),a+1<c.length&&(c[a]^=c[a+1]);d=b.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(a,c){let d=c.map(a=>0);for(let e of a){let a=e^d.shift();d.push(0),c.forEach((c,e)=>d[e]^=b.reedSolomonMultiply(c,a))}return d}static reedSolomonMultiply(a,b){if(a>>>8!=0||b>>>8!=0)throw RangeError("Byte out of range");let c=0;for(let d=7;d>=0;d--)c=c<<1^(c>>>7)*285^(b>>>d&1)*a;return e(c>>>8==0),c}finderPenaltyCountPatterns(a){let b=a[1];e(b<=3*this.size);let c=b>0&&a[2]==b&&a[3]==3*b&&a[4]==b&&a[5]==b;return(c&&a[0]>=4*b&&a[6]>=b?1:0)+(c&&a[6]>=4*b&&a[0]>=b?1:0)}finderPenaltyTerminateAndCount(a,b,c){return a&&(this.finderPenaltyAddHistory(b,c),b=0),b+=this.size,this.finderPenaltyAddHistory(b,c),this.finderPenaltyCountPatterns(c)}finderPenaltyAddHistory(a,b){0==b[0]&&(a+=this.size),b.pop(),b.unshift(a)}};function c(a,b,c){if(b<0||b>31||a>>>b!=0)throw RangeError("Value out of range");for(let d=b-1;d>=0;d--)c.push(a>>>d&1)}function d(a,b){return(a>>>b&1)!=0}function e(a){if(!a)throw Error("Assertion error")}b.MIN_VERSION=1,b.MAX_VERSION=40,b.PENALTY_N1=3,b.PENALTY_N2=3,b.PENALTY_N3=40,b.PENALTY_N4=10,b.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],b.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],a.QrCode=b;let f=class a{constructor(a,b,c){if(this.mode=a,this.numChars=b,this.bitData=c,b<0)throw RangeError("Invalid argument");this.bitData=c.slice()}static makeBytes(b){let d=[];for(let a of b)c(a,8,d);return new a(a.Mode.BYTE,b.length,d)}static makeNumeric(b){if(!a.isNumeric(b))throw RangeError("String contains non-numeric characters");let d=[];for(let a=0;a<b.length;){let e=Math.min(b.length-a,3);c(parseInt(b.substring(a,a+e),10),3*e+1,d),a+=e}return new a(a.Mode.NUMERIC,b.length,d)}static makeAlphanumeric(b){let d;if(!a.isAlphanumeric(b))throw RangeError("String contains unencodable characters in alphanumeric mode");let e=[];for(d=0;d+2<=b.length;d+=2){let f=45*a.ALPHANUMERIC_CHARSET.indexOf(b.charAt(d));c(f+=a.ALPHANUMERIC_CHARSET.indexOf(b.charAt(d+1)),11,e)}return d<b.length&&c(a.ALPHANUMERIC_CHARSET.indexOf(b.charAt(d)),6,e),new a(a.Mode.ALPHANUMERIC,b.length,e)}static makeSegments(b){return""==b?[]:a.isNumeric(b)?[a.makeNumeric(b)]:a.isAlphanumeric(b)?[a.makeAlphanumeric(b)]:[a.makeBytes(a.toUtf8ByteArray(b))]}static makeEci(b){let d=[];if(b<0)throw RangeError("ECI assignment value out of range");if(b<128)c(b,8,d);else if(b<16384)c(2,2,d),c(b,14,d);else if(b<1e6)c(6,3,d),c(b,21,d);else throw RangeError("ECI assignment value out of range");return new a(a.Mode.ECI,0,d)}static isNumeric(b){return a.NUMERIC_REGEX.test(b)}static isAlphanumeric(b){return a.ALPHANUMERIC_REGEX.test(b)}getData(){return this.bitData.slice()}static getTotalBits(a,b){let c=0;for(let d of a){let a=d.mode.numCharCountBits(b);if(d.numChars>=1<<a)return 1/0;c+=4+a+d.bitData.length}return c}static toUtf8ByteArray(a){a=encodeURI(a);let b=[];for(let c=0;c<a.length;c++)"%"!=a.charAt(c)?b.push(a.charCodeAt(c)):(b.push(parseInt(a.substring(c+1,c+3),16)),c+=2);return b}};f.NUMERIC_REGEX=/^[0-9]*$/,f.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,f.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let g=f;a.QrSegment=f})(h||(h={})),e=(d=h||(h={})).QrCode||(d.QrCode={}),(b=class{constructor(a,b){this.ordinal=a,this.formatBits=b}}).LOW=new b(0,1),b.MEDIUM=new b(1,0),b.QUARTILE=new b(2,3),b.HIGH=new b(3,2),e.Ecc=b,g=(f=h||(h={})).QrSegment||(f.QrSegment={}),(c=class{constructor(a,b){this.modeBits=a,this.numBitsCharCount=b}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}}).NUMERIC=new c(1,[10,12,14]),c.ALPHANUMERIC=new c(2,[9,11,13]),c.BYTE=new c(4,[8,16,16]),c.KANJI=new c(8,[8,10,12]),c.ECI=new c(7,[0,0,0]),g.Mode=c;var J=h,K={L:J.QrCode.Ecc.LOW,M:J.QrCode.Ecc.MEDIUM,Q:J.QrCode.Ecc.QUARTILE,H:J.QrCode.Ecc.HIGH},L="#FFFFFF",M="#000000";function N(a,b=0){let c=[];return a.forEach(function(a,d){let e=null;a.forEach(function(f,g){if(!f&&null!==e){c.push(`M${e+b} ${d+b}h${g-e}v1H${e+b}z`),e=null;return}if(g===a.length-1){if(!f)return;null===e?c.push(`M${g+b},${d+b} h1v1H${g+b}z`):c.push(`M${e+b},${d+b} h${g+1-e}v1H${e+b}z`);return}f&&null===e&&(e=g)})}),c.join("")}function O(a,b){return a.slice().map((a,c)=>c<b.y||c>=b.y+b.h?a:a.map((a,c)=>(c<b.x||c>=b.x+b.w)&&a))}function P({value:a,level:b,minVersion:c,includeMargin:d,marginSize:e,imageSettings:f,size:g,boostLevel:h}){let i=m.default.useMemo(()=>{let d=(Array.isArray(a)?a:[a]).reduce((a,b)=>(a.push(...J.QrSegment.makeSegments(b)),a),[]);return J.QrCode.encodeSegments(d,K[b],c,void 0,void 0,h)},[a,b,c,h]),{cells:j,margin:k,numCells:l,calculatedImageSettings:n}=m.default.useMemo(()=>{let a=i.getModules(),b=null!=e?Math.max(Math.floor(e),0):4*!!d,c=a.length+2*b,h=function(a,b,c,d){if(null==d)return null;let e=a.length+2*c,f=Math.floor(.1*b),g=e/b,h=(d.width||f)*g,i=(d.height||f)*g,j=null==d.x?a.length/2-h/2:d.x*g,k=null==d.y?a.length/2-i/2:d.y*g,l=null==d.opacity?1:d.opacity,m=null;if(d.excavate){let a=Math.floor(j),b=Math.floor(k),c=Math.ceil(h+j-a),d=Math.ceil(i+k-b);m={x:a,y:b,w:c,h:d}}return{x:j,y:k,h:i,w:h,excavation:m,opacity:l,crossOrigin:d.crossOrigin}}(a,g,b,f);return{cells:a,margin:b,numCells:c,calculatedImageSettings:h}},[i,g,f,d,e]);return{qrcode:i,margin:k,cells:j,numCells:l,calculatedImageSettings:n}}var Q=function(){try{new Path2D().addPath(new Path2D)}catch(a){return!1}return!0}(),R=m.default.forwardRef(function(a,b){let{value:c,size:d=128,level:e="L",bgColor:f=L,fgColor:g=M,includeMargin:h=!1,minVersion:i=1,boostLevel:j,marginSize:k,imageSettings:l}=a,n=I(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:o}=n,p=I(n,["style"]),q=null==l?void 0:l.src,r=m.default.useRef(null),s=m.default.useRef(null),t=m.default.useCallback(a=>{r.current=a,"function"==typeof b?b(a):b&&(b.current=a)},[b]),[u,v]=m.default.useState(!1),{margin:w,cells:x,numCells:y,calculatedImageSettings:z}=P({value:c,level:e,minVersion:i,boostLevel:j,includeMargin:h,marginSize:k,imageSettings:l,size:d});m.default.useEffect(()=>{if(null!=r.current){let a=r.current,b=a.getContext("2d");if(!b)return;let c=x,e=s.current,h=null!=z&&null!==e&&e.complete&&0!==e.naturalHeight&&0!==e.naturalWidth;h&&null!=z.excavation&&(c=O(x,z.excavation));let i=window.devicePixelRatio||1;a.height=a.width=d*i;let j=d/y*i;b.scale(j,j),b.fillStyle=f,b.fillRect(0,0,y,y),b.fillStyle=g,Q?b.fill(new Path2D(N(c,w))):x.forEach(function(a,c){a.forEach(function(a,d){a&&b.fillRect(d+w,c+w,1,1)})}),z&&(b.globalAlpha=z.opacity),h&&b.drawImage(e,z.x+w,z.y+w,z.w,z.h)}}),m.default.useEffect(()=>{v(!1)},[q]);let A=H({height:d,width:d},o),B=null;return null!=q&&(B=m.default.createElement("img",{src:q,key:q,style:{display:"none"},onLoad:()=>{v(!0)},ref:s,crossOrigin:null==z?void 0:z.crossOrigin})),m.default.createElement(m.default.Fragment,null,m.default.createElement("canvas",H({style:A,height:d,width:d,ref:t,role:"img"},p)),B)});R.displayName="QRCodeCanvas",m.default.forwardRef(function(a,b){let{value:c,size:d=128,level:e="L",bgColor:f=L,fgColor:g=M,includeMargin:h=!1,minVersion:i=1,boostLevel:j,title:k,marginSize:l,imageSettings:n}=a,o=I(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:p,cells:q,numCells:r,calculatedImageSettings:s}=P({value:c,level:e,minVersion:i,boostLevel:j,includeMargin:h,marginSize:l,imageSettings:n,size:d}),t=q,u=null;null!=n&&null!=s&&(null!=s.excavation&&(t=O(q,s.excavation)),u=m.default.createElement("image",{href:n.src,height:s.h,width:s.w,x:s.x+p,y:s.y+p,preserveAspectRatio:"none",opacity:s.opacity,crossOrigin:s.crossOrigin}));let v=N(t,p);return m.default.createElement("svg",H({height:d,width:d,viewBox:`0 0 ${r} ${r}`,ref:b,role:"img"},o),!!k&&m.default.createElement("title",null,k),m.default.createElement("path",{fill:f,d:`M0,0 h${r}v${r}H0z`,shapeRendering:"crispEdges"}),m.default.createElement("path",{fill:g,d:v,shapeRendering:"crispEdges"}),u)}).displayName="QRCodeSVG";var S=a.i(175809),T=a.i(483664),U=a.i(760327);let V=({content:a})=>{let{t:b}=(0,w.useTranslation)(),[c,d]=(0,m.useState)(!1),e=(0,m.useRef)(null);return(0,m.useEffect)(()=>{let a=a=>{e.current&&!e.current.contains(a.target)&&d(!1)};return c&&document.addEventListener("click",a),()=>{document.removeEventListener("click",a)}},[c]),(0,i.jsx)(T.default,{popupContent:b("overview.appInfo.qrcode.title",{ns:"appOverview"})||"",children:(0,i.jsxs)("div",{className:"relative h-6 w-6",onClick:a=>{a.stopPropagation(),d(a=>!a)},children:[(0,i.jsx)(S.default,{children:(0,i.jsx)(u.RiQrCodeLine,{className:"h-4 w-4"})}),c&&(0,i.jsxs)("div",{ref:e,className:"absolute -right-8 top-8 z-10 flex w-[232px] flex-col items-center rounded-lg bg-components-panel-bg p-4 shadow-xs",onClick:a=>{a.stopPropagation()},children:[(0,i.jsx)(R,{size:160,value:a,className:"mb-2"}),(0,i.jsxs)("div",{className:"system-xs-regular flex items-center",children:[(0,i.jsx)("div",{className:"text-text-tertiary",children:b("overview.appInfo.qrcode.scan",{ns:"appOverview"})}),(0,i.jsx)("div",{className:"text-text-tertiary",children:"Â·"}),(0,i.jsx)("div",{className:"cursor-pointer text-text-accent-secondary",onClick:()=>{let a=e.current?.querySelector("canvas");a instanceof HTMLCanvasElement&&(0,U.downloadUrl)({url:a.toDataURL(),fileName:"qrcode.png"})},children:b("overview.appInfo.qrcode.download",{ns:"appOverview"})})]})]})]})})};var W=a.i(81492),X=a.i(234416),Y=a.i(854867),Z=a.i(735310),$=a.i(705134),_=a.i(724423),aa=a.i(252813),ab=a.i(179062),ac=a.i(190124),ad=a.i(802066),ae=a.i(374715),af=a.i(954200),ag=a.i(459858),ah=a.i(499257),ai=a.i(959595);let aj=m.forwardRef(function({title:a,titleId:b,...c},d){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":b},c),a?m.createElement("title",{id:b},a):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"}))});var ak=a.i(940272);let al={green:{text:"text-green-800",bg:"bg-green-100"},yellow:{text:"text-yellow-800",bg:"bg-yellow-100"},red:{text:"text-red-800",bg:"bg-red-100"},gray:{text:"text-gray-800",bg:"bg-gray-100"}};function am({children:a,color:b="green",className:c="",bordered:d=!1,hideBg:e=!1}){return(0,i.jsx)("div",{className:(0,r.cn)("inline-flex shrink-0 items-center rounded-md px-2.5 py-px text-xs leading-5",al[b]?`${al[b].text} ${al[b].bg}`:"",d?"border-[1px]":"",e?"bg-transparent":"",c),children:a})}let an=({children:a})=>(0,i.jsx)("div",{className:"mr-3 flex h-7 w-7 shrink-0 items-center justify-center rounded-2xl bg-util-colors-blue-blue-50 text-text-accent",children:a}),ao=({className:a})=>(0,i.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:a,children:(0,i.jsx)("path",{d:"M5.80078 13.7109C5.80078 13.6406 5.73047 13.5703 5.625 13.5703C5.51953 13.5703 5.44922 13.6406 5.44922 13.7109C5.44922 13.7812 5.51953 13.8516 5.625 13.8164C5.73047 13.8164 5.80078 13.7812 5.80078 13.7109ZM4.71094 13.5352C4.71094 13.6055 4.78125 13.7109 4.88672 13.7109C4.95703 13.7461 5.0625 13.7109 5.09766 13.6406C5.09766 13.5703 5.0625 13.5 4.95703 13.4648C4.85156 13.4297 4.74609 13.4648 4.71094 13.5352ZM6.29297 13.5C6.1875 13.5 6.11719 13.5703 6.11719 13.6758C6.11719 13.7461 6.22266 13.7812 6.32812 13.7461C6.43359 13.7109 6.50391 13.6758 6.46875 13.6055C6.46875 13.5352 6.36328 13.4648 6.29297 13.5ZM8.57812 0C3.72656 0 0 3.72656 0 8.57812C0 12.4805 2.42578 15.8203 5.94141 17.0156C6.39844 17.0859 6.53906 16.8047 6.53906 16.5938C6.53906 16.3477 6.53906 15.1523 6.53906 14.4141C6.53906 14.4141 4.07812 14.9414 3.55078 13.3594C3.55078 13.3594 3.16406 12.3398 2.60156 12.0938C2.60156 12.0938 1.79297 11.5312 2.63672 11.5312C2.63672 11.5312 3.51562 11.6016 4.00781 12.4453C4.78125 13.8164 6.04688 13.4297 6.57422 13.1836C6.64453 12.6211 6.85547 12.2344 7.13672 11.9883C5.16797 11.7773 3.16406 11.4961 3.16406 8.12109C3.16406 7.13672 3.44531 6.67969 4.00781 6.04688C3.90234 5.80078 3.62109 4.88672 4.11328 3.65625C4.81641 3.44531 6.53906 4.60547 6.53906 4.60547C7.24219 4.39453 7.98047 4.32422 8.71875 4.32422C9.49219 4.32422 10.2305 4.39453 10.9336 4.60547C10.9336 4.60547 12.6211 3.41016 13.3594 3.65625C13.8516 4.88672 13.5352 5.80078 13.4648 6.04688C14.0273 6.67969 14.3789 7.13672 14.3789 8.12109C14.3789 11.4961 12.3047 11.7773 10.3359 11.9883C10.6523 12.2695 10.9336 12.7969 10.9336 13.6406C10.9336 14.8008 10.8984 16.2773 10.8984 16.5586C10.8984 16.8047 11.0742 17.0859 11.5312 16.9805C15.0469 15.8203 17.4375 12.4805 17.4375 8.57812C17.4375 3.72656 13.4648 0 8.57812 0ZM3.41016 12.1289C3.33984 12.1641 3.375 12.2695 3.41016 12.3398C3.48047 12.375 3.55078 12.4102 3.62109 12.375C3.65625 12.3398 3.65625 12.2344 3.58594 12.1641C3.51562 12.1289 3.44531 12.0938 3.41016 12.1289ZM3.02344 11.8477C2.98828 11.918 3.02344 11.9531 3.09375 11.9883C3.16406 12.0234 3.23438 12.0234 3.26953 11.9531C3.26953 11.918 3.23438 11.8828 3.16406 11.8477C3.09375 11.8125 3.05859 11.8125 3.02344 11.8477ZM4.14844 13.1133C4.11328 13.1484 4.11328 13.2539 4.21875 13.3242C4.28906 13.3945 4.39453 13.4297 4.42969 13.3594C4.46484 13.3242 4.46484 13.2188 4.39453 13.1484C4.32422 13.0781 4.21875 13.043 4.14844 13.1133ZM3.76172 12.5859C3.69141 12.6211 3.69141 12.7266 3.76172 12.7969C3.83203 12.8672 3.90234 12.9023 3.97266 12.8672C4.00781 12.832 4.00781 12.7266 3.97266 12.6562C3.90234 12.5859 3.83203 12.5508 3.76172 12.5859Z",fill:"#1F2A37"})}),ap="overview.appInfo.customize",aq=({isShow:a,onClose:b,appId:c,api_base_url:d,mode:e})=>{let{t:f}=(0,w.useTranslation)(),g=(0,aa.useDocLink)(),h=e===af.AppModeEnum.CHAT||e===af.AppModeEnum.ADVANCED_CHAT;return(0,i.jsxs)(ak.default,{title:f(`${ap}.title`,{ns:"appOverview"}),description:f(`${ap}.explanation`,{ns:"appOverview"}),isShow:a,onClose:b,className:"w-[640px] !max-w-2xl",closable:!0,children:[(0,i.jsxs)("div",{className:"mt-4 w-full rounded-lg border-[0.5px] border-components-panel-border px-6 py-5",children:[(0,i.jsxs)(am,{bordered:!0,hideBg:!0,className:"border-text-accent-secondary uppercase text-text-accent-secondary",children:[f(`${ap}.way`,{ns:"appOverview"})," ","1"]}),(0,i.jsx)("p",{className:"system-sm-medium my-2 text-text-secondary",children:f(`${ap}.way1.name`,{ns:"appOverview"})}),(0,i.jsxs)("div",{className:"flex py-4",children:[(0,i.jsx)(an,{children:"1"}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("div",{className:"text-text-primary",children:f(`${ap}.way1.step1`,{ns:"appOverview"})}),(0,i.jsx)("div",{className:"mb-2 mt-1 text-xs text-text-tertiary",children:f(`${ap}.way1.step1Tip`,{ns:"appOverview"})}),(0,i.jsx)("a",{href:`https://github.com/langgenius/${h?"webapp-conversation":"webapp-text-generator"}`,target:"_blank",rel:"noopener noreferrer",children:(0,i.jsxs)(z.default,{children:[(0,i.jsx)(ao,{className:"mr-2 text-text-secondary"}),f(`${ap}.way1.step1Operation`,{ns:"appOverview"})]})})]})]}),(0,i.jsxs)("div",{className:"flex pt-4",children:[(0,i.jsx)(an,{children:"2"}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("div",{className:"text-text-primary",children:f(`${ap}.way1.step2`,{ns:"appOverview"})}),(0,i.jsx)("div",{className:"mb-2 mt-1 text-xs text-text-tertiary",children:f(`${ap}.way1.step2Tip`,{ns:"appOverview"})}),(0,i.jsx)("a",{href:"https://vercel.com/docs/concepts/deployments/git/vercel-for-github",target:"_blank",rel:"noopener noreferrer",children:(0,i.jsxs)(z.default,{children:[(0,i.jsx)("div",{className:"mr-1.5 border-b-[12px] border-l-[7px] border-r-[7px] border-t-0 border-solid border-text-primary border-l-transparent border-r-transparent border-t-transparent"}),(0,i.jsx)("span",{children:f(`${ap}.way1.step2Operation`,{ns:"appOverview"})})]})})]})]}),(0,i.jsxs)("div",{className:"flex py-4",children:[(0,i.jsx)(an,{children:"3"}),(0,i.jsxs)("div",{className:"flex w-full flex-col overflow-hidden",children:[(0,i.jsx)("div",{className:"text-text-primary",children:f(`${ap}.way1.step3`,{ns:"appOverview"})}),(0,i.jsx)("div",{className:"mb-2 mt-1 text-xs text-text-tertiary",children:f(`${ap}.way1.step3Tip`,{ns:"appOverview"})}),(0,i.jsxs)("pre",{className:"box-border select-text overflow-x-scroll rounded-lg border-[0.5px] border-components-panel-border bg-background-section px-4 py-3 text-xs font-medium text-text-secondary",children:["NEXT_PUBLIC_APP_ID=",`'${c}'`," ",(0,i.jsx)("br",{}),"NEXT_PUBLIC_APP_KEY=","'<Web API Key From Dify>'"," ",(0,i.jsx)("br",{}),"NEXT_PUBLIC_API_URL=",`'${d}'`]})]})]})]}),(0,i.jsxs)("div",{className:"mt-4 w-full rounded-lg border-[0.5px] border-components-panel-border px-6 py-5",children:[(0,i.jsxs)(am,{bordered:!0,hideBg:!0,className:"border-text-accent-secondary uppercase text-text-accent-secondary",children:[f(`${ap}.way`,{ns:"appOverview"})," ","2"]}),(0,i.jsx)("p",{className:"system-sm-medium my-2 text-text-secondary",children:f(`${ap}.way2.name`,{ns:"appOverview"})}),(0,i.jsxs)(z.default,{className:"mt-2",onClick:()=>window.open(g("/use-dify/publish/developing-with-apis"),"_blank"),children:[(0,i.jsx)("span",{className:"text-sm text-text-secondary",children:f(`${ap}.way2.operation`,{ns:"appOverview"})}),(0,i.jsx)(aj,{className:"ml-1 h-4 w-4 shrink-0 text-text-secondary"})]})]})]})};var ar=a.i(605575),as=a.i(413192),at=a.i(578652),au=a.i(355968),av=a.i(429178);a.i(916818);var aw=a.i(529335),ax=a.i(816134),ay=a.i(608348),az=a.i(805611),aA=a.i(146172),aB=a.i(114715),aC=a.i(933887),aD=a.i(29255),aE=a.i(375616),aF=a.i(136403);let aG="overview.appInfo.settings",aH=m.memo(({isChat:a,appInfo:b,isShow:c=!1,onClose:d,onSave:e})=>{let{notify:f}=(0,aB.useToastContext)(),[g,h]=(0,m.useState)(!1),{title:j,icon_type:k,icon:l,icon_background:n,icon_url:o,description:p,chat_color_theme:q,chat_color_theme_inverted:t,copyright:v,privacy_policy:x,custom_disclaimer:y,default_language:A,show_workflow_steps:B,use_icon_as_answer_icon:C}=b.site,[D,E]=(0,m.useState)({title:j,desc:p,chatColorTheme:q,chatColorThemeInverted:t,copyright:v,copyrightSwitchValue:!!v,privacyPolicy:x,customDisclaimer:y,show_workflow_steps:B,use_icon_as_answer_icon:C,enable_sso:b.enable_sso}),[F,G]=(0,m.useState)(A),[H,I]=(0,m.useState)(!1),{t:J}=(0,w.useTranslation)(),[K,L]=(0,m.useState)(!1),[M,N]=(0,m.useState)("image"===k?{type:"image",url:o,fileId:l}:{type:"emoji",icon:l,background:n}),{enableBilling:O,plan:P,webappCopyrightEnabled:Q}=(0,aE.useProviderContext)(),{setShowPricingModal:R,setShowAccountSettingModal:U}=(0,aD.useModalContext)(),V="sandbox"===P.type,X=(0,m.useCallback)(()=>{V?R():U({payload:aC.ACCOUNT_SETTING_TAB.BILLING})},[V,U,R]);(0,m.useEffect)(()=>{E({title:j,desc:p,chatColorTheme:q,chatColorThemeInverted:t,copyright:v,copyrightSwitchValue:!!v,privacyPolicy:x,customDisclaimer:y,show_workflow_steps:B,use_icon_as_answer_icon:C,enable_sso:b.enable_sso}),G(A),N("image"===k?{type:"image",url:o,fileId:l}:{type:"emoji",icon:l,background:n})},[b,q,t,v,y,A,p,l,n,k,o,x,B,j,C]);let Y=()=>{d(),setTimeout(()=>{h(!1)},200)},Z=async()=>{if(!D.title)return void f({type:"error",message:J("newApp.nameNotEmpty",{ns:"app"})});if(null!==D){var a,b;if(!(null===(a=D.chatColorTheme)||a?.length===0||/#([A-F0-9]{6})/i.test(a)))return void f({type:"error",message:J(`${aG}.invalidHexMessage`,{ns:"appOverview"})});if(!(null===(b=D.privacyPolicy)||b?.length===0||b.startsWith("http://")||b.startsWith("https://")))return void f({type:"error",message:J(`${aG}.invalidPrivacyPolicy`,{ns:"appOverview"})})}I(!0);let c={title:D.title,description:D.desc,default_language:F,chat_color_theme:D.chatColorTheme,chat_color_theme_inverted:D.chatColorThemeInverted,prompt_public:!1,copyright:Q&&D.copyrightSwitchValue?D.copyright:"",privacy_policy:D.privacyPolicy,custom_disclaimer:D.customDisclaimer,icon_type:M.type,icon:"emoji"===M.type?M.icon:M.fileId,icon_background:"emoji"===M.type?M.background:void 0,show_workflow_steps:D.show_workflow_steps,use_icon_as_answer_icon:D.use_icon_as_answer_icon,enable_sso:D.enable_sso};await e?.(c),I(!1),Y()},$=a=>b=>{let c;c="checkbox"===b.target.type?b.target.checked:b.target.value,E(b=>({...b,[a]:c}))};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(ak.default,{isShow:c,closable:!1,onClose:Y,className:"max-w-[520px] p-0",children:[(0,i.jsxs)("div",{className:"pb-3 pl-6 pr-5 pt-5",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("div",{className:"title-2xl-semi-bold grow text-text-primary",children:J(`${aG}.title`,{ns:"appOverview"})}),(0,i.jsx)(S.default,{className:"shrink-0",onClick:Y,children:(0,i.jsx)(u.RiCloseLine,{className:"h-4 w-4"})})]}),(0,i.jsx)("div",{className:"system-xs-regular mt-0.5 text-text-tertiary",children:(0,i.jsx)("span",{children:J(`${aG}.modalTip`,{ns:"appOverview"})})})]}),(0,i.jsxs)("div",{className:"space-y-5 px-6 py-3",children:[(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsxs)("div",{className:"grow",children:[(0,i.jsx)("div",{className:(0,r.cn)("system-sm-semibold mb-1 py-1 text-text-secondary"),children:J(`${aG}.webName`,{ns:"appOverview"})}),(0,i.jsx)(ax.default,{className:"w-full",value:D.title,onChange:$("title"),placeholder:J("appNamePlaceholder",{ns:"app"})||""})]}),(0,i.jsx)(au.default,{size:"xxl",onClick:()=>{L(!0)},className:"mt-2 cursor-pointer",iconType:M.type,icon:"image"===M.type?M.fileId:M.icon,background:"image"===M.type?void 0:M.background,imageUrl:"image"===M.type?M.url:void 0})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:(0,r.cn)("system-sm-semibold py-1 text-text-secondary"),children:J(`${aG}.webDesc`,{ns:"appOverview"})}),(0,i.jsx)(aA.default,{className:"mt-1",value:D.desc,onChange:a=>{var b;return b=a.target.value,void E(a=>({...a,desc:b}))},placeholder:J(`${aG}.webDescPlaceholder`,{ns:"appOverview"})}),(0,i.jsx)("p",{className:(0,r.cn)("body-xs-regular pb-0.5 text-text-tertiary"),children:J(`${aG}.webDescTip`,{ns:"appOverview"})})]}),(0,i.jsx)(s.default,{className:"my-0 h-px"}),a&&(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("div",{className:(0,r.cn)("system-sm-semibold py-1 text-text-secondary"),children:J("answerIcon.title",{ns:"app"})}),(0,i.jsx)(W.default,{defaultValue:D.use_icon_as_answer_icon,onChange:a=>E({...D,use_icon_as_answer_icon:a})})]}),(0,i.jsx)("p",{className:"body-xs-regular pb-0.5 text-text-tertiary",children:J("answerIcon.description",{ns:"app"})})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:(0,r.cn)("system-sm-semibold grow py-1 text-text-secondary"),children:J(`${aG}.language`,{ns:"appOverview"})}),(0,i.jsx)(az.SimpleSelect,{wrapperClassName:"w-[200px]",items:aF.languages.filter(a=>a.supported),defaultValue:F,onSelect:a=>G(a.value),notClearable:!0})]}),a&&(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsxs)("div",{className:"grow",children:[(0,i.jsx)("div",{className:(0,r.cn)("system-sm-semibold py-1 text-text-secondary"),children:J(`${aG}.chatColorTheme`,{ns:"appOverview"})}),(0,i.jsx)("div",{className:"body-xs-regular pb-0.5 text-text-tertiary",children:J(`${aG}.chatColorThemeDesc`,{ns:"appOverview"})})]}),(0,i.jsxs)("div",{className:"shrink-0",children:[(0,i.jsx)(ax.default,{className:"mb-1 w-[200px]",value:D.chatColorTheme??"",onChange:$("chatColorTheme"),placeholder:"E.g #A020F0"}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("p",{className:(0,r.cn)("body-xs-regular text-text-tertiary"),children:J(`${aG}.chatColorThemeInverted`,{ns:"appOverview"})}),(0,i.jsx)(W.default,{defaultValue:D.chatColorThemeInverted,onChange:a=>E({...D,chatColorThemeInverted:a})})]})]})]}),(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("div",{className:(0,r.cn)("system-sm-semibold py-1 text-text-secondary"),children:J(`${aG}.workflow.subTitle`,{ns:"appOverview"})}),(0,i.jsx)(W.default,{disabled:b.mode!==af.AppModeEnum.WORKFLOW&&b.mode!==af.AppModeEnum.ADVANCED_CHAT,defaultValue:D.show_workflow_steps,onChange:a=>E({...D,show_workflow_steps:a})})]}),(0,i.jsx)("p",{className:"body-xs-regular pb-0.5 text-text-tertiary",children:J(`${aG}.workflow.showDesc`,{ns:"appOverview"})})]}),(0,i.jsx)(s.default,{className:"my-0 h-px"}),!g&&(0,i.jsxs)("div",{className:"flex cursor-pointer items-center",onClick:()=>h(!0),children:[(0,i.jsxs)("div",{className:"grow",children:[(0,i.jsx)("div",{className:(0,r.cn)("system-sm-semibold py-1 text-text-secondary"),children:J(`${aG}.more.entry`,{ns:"appOverview"})}),(0,i.jsxs)("p",{className:(0,r.cn)("body-xs-regular pb-0.5 text-text-tertiary"),children:[J(`${aG}.more.copyRightPlaceholder`,{ns:"appOverview"})," ","&"," ",J(`${aG}.more.privacyPolicyPlaceholder`,{ns:"appOverview"})]})]}),(0,i.jsx)(u.RiArrowRightSLine,{className:"ml-1 h-4 w-4 shrink-0 text-text-secondary"})]}),g&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsxs)("div",{className:"flex grow items-center",children:[(0,i.jsx)("div",{className:(0,r.cn)("system-sm-semibold mr-1 py-1 text-text-secondary"),children:J(`${aG}.more.copyright`,{ns:"appOverview"})}),O&&V&&(0,i.jsx)("div",{className:"h-[18px] select-none",children:(0,i.jsxs)(ay.default,{size:"s",color:"blue",allowHover:!0,onClick:X,children:[(0,i.jsx)(aw.SparklesSoft,{className:"flex h-3.5 w-3.5 items-center py-[1px] pl-[3px] text-components-premium-badge-indigo-text-stop-0"}),(0,i.jsx)("div",{className:"system-xs-medium",children:(0,i.jsx)("span",{className:"p-1",children:J("upgradeBtn.encourageShort",{ns:"billing"})})})]})})]}),(0,i.jsx)(T.default,{disabled:Q,popupContent:(0,i.jsx)("div",{className:"w-[180px]",children:J(`${aG}.more.copyrightTooltip`,{ns:"appOverview"})}),asChild:!1,children:(0,i.jsx)(W.default,{disabled:!Q,defaultValue:D.copyrightSwitchValue,onChange:a=>E({...D,copyrightSwitchValue:a})})})]}),(0,i.jsx)("p",{className:"body-xs-regular pb-0.5 text-text-tertiary",children:J(`${aG}.more.copyrightTip`,{ns:"appOverview"})}),D.copyrightSwitchValue&&(0,i.jsx)(ax.default,{className:"mt-2 h-10",value:D.copyright,onChange:$("copyright"),placeholder:J(`${aG}.more.copyRightPlaceholder`,{ns:"appOverview"})})]}),(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)("div",{className:(0,r.cn)("system-sm-semibold py-1 text-text-secondary"),children:J(`${aG}.more.privacyPolicy`,{ns:"appOverview"})}),(0,i.jsx)("p",{className:(0,r.cn)("body-xs-regular pb-0.5 text-text-tertiary"),children:(0,i.jsx)(at.Trans,{i18nKey:`${aG}.more.privacyPolicyTip`,ns:"appOverview",components:{privacyPolicyLink:(0,i.jsx)(as.default,{href:"https://dify.ai/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-text-accent"})}})}),(0,i.jsx)(ax.default,{className:"mt-1",value:D.privacyPolicy,onChange:$("privacyPolicy"),placeholder:J(`${aG}.more.privacyPolicyPlaceholder`,{ns:"appOverview"})})]}),(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)("div",{className:(0,r.cn)("system-sm-semibold py-1 text-text-secondary"),children:J(`${aG}.more.customDisclaimer`,{ns:"appOverview"})}),(0,i.jsx)("p",{className:(0,r.cn)("body-xs-regular pb-0.5 text-text-tertiary"),children:J(`${aG}.more.customDisclaimerTip`,{ns:"appOverview"})}),(0,i.jsx)(aA.default,{className:"mt-1",value:D.customDisclaimer,onChange:$("customDisclaimer"),placeholder:J(`${aG}.more.customDisclaimerPlaceholder`,{ns:"appOverview"})})]})]})]}),(0,i.jsxs)("div",{className:"flex justify-end p-6 pt-5",children:[(0,i.jsx)(z.default,{className:"mr-2",onClick:Y,children:J("operation.cancel",{ns:"common"})}),(0,i.jsx)(z.default,{variant:"primary",onClick:Z,loading:H,children:J("operation.save",{ns:"common"})})]}),K&&(0,i.jsx)("div",{onClick:a=>a.stopPropagation(),children:(0,i.jsx)(av.default,{onSelect:a=>{N(a),L(!1)},onClose:()=>{N("image"===k?{type:"image",url:o,fileId:l}:{type:"emoji",icon:l,background:n}),L(!1)}})})]})})});var aI=a.i(362368);let aJ=function({appInfo:a,isInPanel:b,cardType:c="webapp",customBgColor:d,triggerModeDisabled:e=!1,triggerModeMessage:f="",onChangeStatus:g,onSaveSiteConfig:h,onGenerateCode:j,className:k}){let n=(0,l.useRouter)(),p=(0,l.usePathname)(),{isCurrentWorkspaceManager:q,isCurrentWorkspaceEditor:r}=(0,$.useAppContext)(),{data:t}=(0,ae.useAppWorkflow)(a.mode===af.AppModeEnum.WORKFLOW?a.id:""),v=(0,aa.useDocLink)(),x=(0,o.useStore)(a=>a.appDetail),C=(0,o.useStore)(a=>a.setAppDetail),[D,E]=(0,m.useState)(!1),[F,G]=(0,m.useState)(!1),[H,I]=(0,m.useState)(!1),[J,K]=(0,m.useState)(!1),[L,M]=(0,m.useState)(!1),[N,O]=(0,m.useState)(!1),{t:P}=(0,w.useTranslation)(),Q=(0,_.useGlobalPublicStore)(a=>a.systemFeatures),{data:R}=(0,ac.useAppWhiteListSubjects)(x?.id,Q.webapp_auth.enabled&&x?.access_mode===ab.AccessMode.SPECIFIC_GROUPS_MEMBERS),S=(0,m.useMemo)(()=>{let b={webapp:[{opName:P("overview.appInfo.launch",{ns:"appOverview"}),opIcon:u.RiExternalLinkLine}],api:[{opName:P("overview.apiInfo.doc",{ns:"appOverview"}),opIcon:u.RiBookOpenLine}],app:[]};return a.mode!==af.AppModeEnum.COMPLETION&&a.mode!==af.AppModeEnum.WORKFLOW&&b.webapp.push({opName:P("overview.appInfo.embedded.entry",{ns:"appOverview"}),opIcon:u.RiWindowLine}),b.webapp.push({opName:P("overview.appInfo.customize.entry",{ns:"appOverview"}),opIcon:u.RiPaintBrushLine}),r&&b.webapp.push({opName:P("overview.appInfo.settings.entry",{ns:"appOverview"}),opIcon:u.RiEqualizer2Line}),b},[r,a,P]),U="webapp"===c,aj=U?P("overview.appInfo.title",{ns:"appOverview"}):P("overview.apiInfo.title",{ns:"appOverview"}),ak=a.mode===af.AppModeEnum.WORKFLOW,al=ak&&!t?.graph,am=t?.graph?.nodes?.some(a=>a.data.type===Z.BlockEnum.Start),an=ak&&!am,ao=(U?!r:!q)||al||an||e,ap=!al&&!an&&(U?a.enable_site:a.enable_api),as=al||an,{app_base_url:at,access_token:au}=a.site??{},av=a.mode!==af.AppModeEnum.COMPLETION&&a.mode!==af.AppModeEnum.WORKFLOW?af.AppModeEnum.CHAT:a.mode,aw=`${at}${ah.basePath}/${av}/${au}`,ax=a?.api_base_url,ay=async()=>{j&&(K(!0),await (0,ag.asyncRunSafe)(j()),K(!1))},[az,aA]=(0,m.useState)(!0);(0,m.useEffect)(()=>{x&&R&&x.access_mode===ab.AccessMode.SPECIFIC_GROUPS_MEMBERS&&R.groups?.length===0&&R.members?.length===0?aA(!1):aA(!0)},[R,x]);let aB=(0,m.useCallback)(()=>{x&&O(!0)},[x]),aC=(0,m.useCallback)(async()=>{try{let a=await (0,ad.fetchAppDetailDirect)({url:"/apps",id:x.id});C(a),O(!1)}catch(a){console.error("Failed to fetch app detail:",a)}},[x,C]);return(0,i.jsxs)("div",{className:`${b?"border-l-[0.5px] border-t":"border-[0.5px] shadow-xs"} w-full max-w-full rounded-xl border-effects-highlight ${k??""} ${as?"h-12":""}`,children:[(0,i.jsxs)("div",{className:`${d??"bg-background-default"} relative rounded-xl ${e?"opacity-60":""}`,children:[e&&(f?(0,i.jsx)(T.default,{popupContent:f,popupClassName:"max-w-64 rounded-xl bg-components-panel-bg px-3 py-2 text-xs text-text-secondary shadow-lg",position:"right",children:(0,i.jsx)("div",{className:"absolute inset-0 z-10 cursor-not-allowed rounded-xl","aria-hidden":"true"})}):(0,i.jsx)("div",{className:"absolute inset-0 z-10 cursor-not-allowed rounded-xl","aria-hidden":"true"})),(0,i.jsxs)("div",{className:`flex w-full flex-col items-start justify-center gap-3 self-stretch p-3 ${as?"border-0":"border-b-[0.5px] border-divider-subtle"}`,children:[(0,i.jsxs)("div",{className:"flex w-full items-center gap-3 self-stretch",children:[(0,i.jsx)(y.default,{iconType:c,icon:a.icon,icon_background:a.icon_background,name:aj,hideType:!0,type:U?P("overview.appInfo.explanation",{ns:"appOverview"}):P("overview.apiInfo.explanation",{ns:"appOverview"})}),(0,i.jsxs)("div",{className:"flex shrink-0 items-center gap-1",children:[(0,i.jsx)(Y.default,{color:ap?"green":"yellow"}),(0,i.jsx)("div",{className:`${ap?"text-text-success":"text-text-warning"} system-xs-semibold-uppercase`,children:ap?P("overview.status.running",{ns:"appOverview"}):P("overview.status.disable",{ns:"appOverview"})})]}),(0,i.jsx)(T.default,{popupContent:ao?e&&f?f:al||an?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"mb-1 text-xs font-normal text-text-secondary",children:P("overview.appInfo.enableTooltip.description",{ns:"appOverview"})}),(0,i.jsx)("div",{className:"cursor-pointer text-xs font-normal text-text-accent hover:underline",onClick:()=>window.open(v("/use-dify/nodes/user-input"),"_blank"),children:P("overview.appInfo.enableTooltip.learnMore",{ns:"appOverview"})})]}):"":"",position:"right",popupClassName:"w-58 max-w-60 rounded-xl bg-components-panel-bg px-3.5 py-3 shadow-lg",offset:24,children:(0,i.jsx)("div",{children:(0,i.jsx)(W.default,{defaultValue:ap,onChange:g,disabled:ao})})})]}),!as&&(0,i.jsxs)("div",{className:"flex flex-col items-start justify-center self-stretch",children:[(0,i.jsx)("div",{className:"system-xs-medium pb-1 text-text-tertiary",children:U?P("overview.appInfo.accessibleAddress",{ns:"appOverview"}):P("overview.apiInfo.accessibleAddress",{ns:"appOverview"})}),(0,i.jsxs)("div",{className:"inline-flex h-9 w-full items-center gap-0.5 rounded-lg bg-components-input-bg-normal p-1 pl-2",children:[(0,i.jsx)("div",{className:"flex h-4 min-w-0 flex-1 items-start justify-start gap-2 px-1",children:(0,i.jsx)("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap text-xs font-medium text-text-secondary",children:U?aw:ax})}),(0,i.jsx)(B.default,{content:U?aw:ax,className:"!size-6"}),U&&(0,i.jsx)(V,{content:U?aw:ax}),U&&(0,i.jsx)(s.default,{type:"vertical",className:"!mx-0.5 !h-3.5 shrink-0"}),L&&(0,i.jsx)(A.default,{type:"warning",title:P("overview.appInfo.regenerate",{ns:"appOverview"}),content:P("overview.appInfo.regenerateNotice",{ns:"appOverview"}),isShow:L,onConfirm:()=>{ay(),M(!1)},onCancel:()=>M(!1)}),U&&q&&(0,i.jsx)(T.default,{popupContent:P("overview.appInfo.regenerate",{ns:"appOverview"})||"",children:(0,i.jsx)("div",{className:"h-6 w-6 cursor-pointer rounded-md hover:bg-state-base-hover",onClick:()=>M(!0),children:(0,i.jsx)("div",{className:`h-full w-full ${aI.default.refreshIcon} ${J?aI.default.generateLogo:""}`})})})]})]}),!as&&U&&Q.webapp_auth.enabled&&x&&(0,i.jsxs)("div",{className:"flex flex-col items-start justify-center self-stretch",children:[(0,i.jsx)("div",{className:"system-xs-medium pb-1 text-text-tertiary",children:P("publishApp.title",{ns:"app"})}),(0,i.jsxs)("div",{className:"flex h-9 w-full cursor-pointer items-center gap-x-0.5  rounded-lg bg-components-input-bg-normal py-1 pl-2.5 pr-2",onClick:aB,children:[(0,i.jsxs)("div",{className:"flex grow items-center gap-x-1.5 pr-1",children:[x?.access_mode===ab.AccessMode.ORGANIZATION&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.RiBuildingLine,{className:"h-4 w-4 shrink-0 text-text-secondary"}),(0,i.jsx)("p",{className:"system-sm-medium text-text-secondary",children:P("accessControlDialog.accessItems.organization",{ns:"app"})})]}),x?.access_mode===ab.AccessMode.SPECIFIC_GROUPS_MEMBERS&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.RiLockLine,{className:"h-4 w-4 shrink-0 text-text-secondary"}),(0,i.jsx)("p",{className:"system-sm-medium text-text-secondary",children:P("accessControlDialog.accessItems.specific",{ns:"app"})})]}),x?.access_mode===ab.AccessMode.PUBLIC&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.RiGlobalLine,{className:"h-4 w-4 shrink-0 text-text-secondary"}),(0,i.jsx)("p",{className:"system-sm-medium text-text-secondary",children:P("accessControlDialog.accessItems.anyone",{ns:"app"})})]}),x?.access_mode===ab.AccessMode.EXTERNAL_MEMBERS&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.RiVerifiedBadgeLine,{className:"h-4 w-4 shrink-0 text-text-secondary"}),(0,i.jsx)("p",{className:"system-sm-medium text-text-secondary",children:P("accessControlDialog.accessItems.external",{ns:"app"})})]})]}),!az&&(0,i.jsx)("p",{className:"system-xs-regular shrink-0 text-text-tertiary",children:P("publishApp.notSet",{ns:"app"})}),(0,i.jsx)("div",{className:"flex h-4 w-4 shrink-0 items-center justify-center",children:(0,i.jsx)(u.RiArrowRightSLine,{className:"h-4 w-4 text-text-quaternary"})})]})]})]}),!as&&(0,i.jsxs)("div",{className:"flex items-center gap-1 self-stretch p-3",children:[!U&&(0,i.jsx)(X.default,{appId:a.id}),S[c].map(a=>{let b=!!e||a.opName!==P("overview.appInfo.settings.entry",{ns:"appOverview"})&&!ap;return(0,i.jsx)(z.default,{className:"mr-1 min-w-[88px]",size:"small",variant:"ghost",onClick:(a=>{switch(a){case P("overview.appInfo.launch",{ns:"appOverview"}):return()=>{window.open(aw,"_blank")};case P("overview.appInfo.customize.entry",{ns:"appOverview"}):return()=>{I(!0)};case P("overview.appInfo.settings.entry",{ns:"appOverview"}):return()=>{E(!0)};case P("overview.appInfo.embedded.entry",{ns:"appOverview"}):return()=>{G(!0)};default:return()=>{let a=p.split("/");a.pop(),n.push(`${a.join("/")}/develop`)}}})(a.opName),disabled:b,children:(0,i.jsx)(T.default,{popupContent:P("overview.appInfo.preUseReminder",{ns:"appOverview"})??"",popupClassName:b?"mt-[-8px]":"!hidden",children:(0,i.jsxs)("div",{className:"flex items-center justify-center gap-[1px]",children:[(0,i.jsx)(a.opIcon,{className:"h-3.5 w-3.5"}),(0,i.jsx)("div",{className:`${ap||!b?"text-text-tertiary":"text-components-button-ghost-text-disabled"} system-xs-medium px-[3px]`,children:a.opName})]})})},a.opName)})]})]}),U?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(aH,{isChat:av===af.AppModeEnum.CHAT,appInfo:a,isShow:D,onClose:()=>E(!1),onSave:h}),(0,i.jsx)(ar.default,{siteInfo:a.site,isShow:F,onClose:()=>G(!1),appBaseUrl:at,accessToken:au}),(0,i.jsx)(aq,{isShow:H,onClose:()=>I(!1),appId:a.id,api_base_url:a.api_base_url,mode:a.mode}),N&&(0,i.jsx)(ai.default,{app:x,onConfirm:aC,onClose:()=>{O(!1)}})]}):null]})};a.i(275560);var aK=a.i(102569),aL=a.i(438961),aM=a.i(438890),aN=a.i(844137),aO=a.i(970854);let aP=function({appInfo:a,onToggleResult:b}){let{t:c}=(0,w.useTranslation)(),d=(0,aa.useDocLink)(),e=a.id,{isCurrentWorkspaceEditor:f}=(0,$.useAppContext)(),{data:g,isLoading:h}=(0,aN.useAppTriggers)(e),{mutateAsync:j}=(0,aN.useUpdateTriggerStatus)(),k=(0,aN.useInvalidateAppTriggers)(),{data:l}=(0,aO.useAllTriggerPlugins)(),{setTriggerStatus:n,setTriggerStatuses:o}=(0,aM.useTriggerStatusStore)(),p=g?.data||[],q=p.length;m.useEffect(()=>{p.length>0&&o(p.reduce((a,b)=>(a[b.node_id]="enabled"===b.status?"enabled":"disabled",a),{}))},[p,o]);let r=async(a,c)=>{try{n(a.node_id,c?"enabled":"disabled"),await j({appId:e,triggerId:a.id,enableTrigger:c}),k(e),b?.(null)}catch(d){n(a.node_id,c?"disabled":"enabled"),b?.(d)}};return h?(0,i.jsx)("div",{className:"w-full max-w-full rounded-xl border-l-[0.5px] border-t border-effects-highlight",children:(0,i.jsx)("div",{className:"rounded-xl bg-background-default",children:(0,i.jsx)("div",{className:"flex w-full flex-col items-start justify-center gap-3 self-stretch border-b-[0.5px] border-divider-subtle p-3",children:(0,i.jsx)("div",{className:"h-6 w-full animate-pulse rounded bg-components-input-bg-normal"})})})}):(0,i.jsx)("div",{className:"w-full max-w-full rounded-xl border-l-[0.5px] border-t border-effects-highlight",children:(0,i.jsxs)("div",{className:"rounded-xl bg-background-default",children:[(0,i.jsx)("div",{className:"flex w-full flex-col items-start justify-center gap-3 self-stretch border-b-[0.5px] border-divider-subtle p-3",children:(0,i.jsx)("div",{className:"flex w-full items-center gap-3 self-stretch",children:(0,i.jsxs)("div",{className:"flex grow items-center",children:[(0,i.jsx)("div",{className:"mr-2 shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-purple-purple-500 p-1 shadow-md",children:(0,i.jsx)(aK.TriggerAll,{className:"h-4 w-4 text-text-primary-on-surface"})}),(0,i.jsx)("div",{className:"group w-full",children:(0,i.jsx)("div",{className:"system-md-semibold min-w-0 overflow-hidden text-ellipsis break-normal text-text-secondary group-hover:text-text-primary",children:q>0?c("overview.triggerInfo.triggersAdded",{ns:"appOverview",count:q}):c("overview.triggerInfo.noTriggerAdded",{ns:"appOverview"})})})]})})}),q>0&&(0,i.jsx)("div",{className:"flex flex-col gap-2 p-3",children:p.map(a=>(0,i.jsxs)("div",{className:"flex w-full items-center gap-3",children:[(0,i.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[(0,i.jsx)("div",{className:"shrink-0",children:((a,b)=>{let c,d,{trigger_type:e,status:f,provider_name:g}=a;switch(e){case"trigger-webhook":default:c=Z.BlockEnum.TriggerWebhook;break;case"trigger-schedule":c=Z.BlockEnum.TriggerSchedule;break;case"trigger-plugin":c=Z.BlockEnum.TriggerPlugin}if("trigger-plugin"===e&&g){let a=(b||[]).find(a=>(0,ag.canFindTool)(a.id,g)||a.id.includes(g)||a.name===g);d=a?.icon}return(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(aL.default,{type:c,size:"md",toolIcon:d}),"enabled"===f?(0,i.jsx)("div",{className:"absolute -left-0.5 -top-0.5 h-1.5 w-1.5 rounded-sm border border-black/15 bg-green-500"}):(0,i.jsx)("div",{className:"absolute -left-0.5 -top-0.5 h-1.5 w-1.5 rounded-sm border border-components-badge-status-light-disabled-border-inner bg-components-badge-status-light-disabled-bg shadow-status-indicator-gray-shadow"})]})})(a,l||[])}),(0,i.jsx)("div",{className:"system-sm-medium min-w-0 flex-1 truncate text-text-secondary",children:a.title})]}),(0,i.jsx)("div",{className:"flex shrink-0 items-center",children:(0,i.jsx)("div",{className:`${"enabled"===a.status?"text-text-success":"text-text-warning"} system-xs-semibold-uppercase whitespace-nowrap`,children:"enabled"===a.status?c("overview.status.running",{ns:"appOverview"}):c("overview.status.disable",{ns:"appOverview"})})}),(0,i.jsx)("div",{className:"shrink-0",children:(0,i.jsx)(W.default,{defaultValue:"enabled"===a.status,onChange:b=>r(a,b),disabled:!f})})]},a.id))}),0===q&&(0,i.jsx)("div",{className:"p-3",children:(0,i.jsxs)("div",{className:"system-xs-regular leading-4 text-text-tertiary",children:[c("overview.triggerInfo.triggerStatusDescription",{ns:"appOverview"})," ",(0,i.jsx)(as.default,{href:d("/use-dify/nodes/trigger/overview"),target:"_blank",rel:"noopener noreferrer",className:"text-text-accent hover:underline",children:c("overview.triggerInfo.learnAboutTriggers",{ns:"appOverview"})})]})})]})})};var aQ=a.i(105249);a.i(10035);var aR=a.i(2373);let aS=({data:a,value:b,onChange:c})=>{let{t:d}=(0,w.useTranslation)();return(0,i.jsxs)("div",{className:"space-y-0.5",children:[(0,i.jsxs)("div",{className:"flex h-6 items-center gap-2",children:[(0,i.jsx)("div",{className:"system-xs-medium text-text-secondary",children:a.label}),(0,i.jsx)("div",{className:"system-xs-medium text-text-quaternary",children:"Â·"}),(0,i.jsx)("div",{className:"system-xs-medium text-text-secondary",children:a.variable}),(0,i.jsx)("div",{className:"system-xs-medium text-text-tertiary",children:a.type})]}),(0,i.jsx)(aA.default,{className:"h-8 resize-none",value:b,placeholder:d("mcp.server.modal.parametersPlaceholder",{ns:"tools"}),onChange:a=>c(a.target.value)})]})},aT=({appID:a,latestParams:b=[],data:c,show:d,onHide:e,appInfo:f})=>{let{t:g}=(0,w.useTranslation)(),{mutateAsync:h,isPending:j}=(0,aN.useCreateMCPServer)(),{mutateAsync:k,isPending:l}=(0,aN.useUpdateMCPServer)(),n=(0,aN.useInvalidateMCPServerDetail)(),o=c?.description||f?.description||"",[p,q]=m.useState(o),[t,v]=m.useState(c?.parameters||{}),x=()=>{let a={};return b.map(b=>(a[b.variable]=t[b.variable],b)),a},y=async()=>{if(c){let b={appID:a,id:c.id,parameters:x()};b.description=p,await k(b),n(a),e()}else{let b={appID:a,parameters:x()};p.trim()&&(b.description=p),await h(b),n(a),e()}};return(0,i.jsxs)(ak.default,{isShow:d,onClose:e,className:(0,r.cn)("relative !max-w-[520px] !p-0"),children:[(0,i.jsx)("div",{className:"absolute right-5 top-5 z-10 cursor-pointer p-1.5",onClick:e,children:(0,i.jsx)(u.RiCloseLine,{className:"h-5 w-5 text-text-tertiary"})}),(0,i.jsx)("div",{className:"title-2xl-semi-bold relative p-6 pb-3 text-xl text-text-primary",children:g(c?"mcp.server.modal.editTitle":"mcp.server.modal.addTitle",{ns:"tools"})}),(0,i.jsxs)("div",{className:"space-y-5 px-6 py-3",children:[(0,i.jsxs)("div",{className:"space-y-0.5",children:[(0,i.jsxs)("div",{className:"flex h-6 items-center gap-1",children:[(0,i.jsx)("div",{className:"system-sm-medium text-text-secondary",children:g("mcp.server.modal.description",{ns:"tools"})}),(0,i.jsx)("div",{className:"system-xs-regular text-text-destructive-secondary",children:"*"})]}),(0,i.jsx)(aA.default,{className:"h-[96px] resize-none",value:p,placeholder:g("mcp.server.modal.descriptionPlaceholder",{ns:"tools"}),onChange:a=>q(a.target.value)})]}),b.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"mb-1 flex items-center gap-2",children:[(0,i.jsx)("div",{className:"system-xs-medium-uppercase shrink-0 text-text-primary",children:g("mcp.server.modal.parameters",{ns:"tools"})}),(0,i.jsx)(s.default,{type:"horizontal",className:"!m-0 !h-px grow bg-divider-subtle"})]}),(0,i.jsx)("div",{className:"body-xs-regular mb-2 text-text-tertiary",children:g("mcp.server.modal.parametersTip",{ns:"tools"})}),(0,i.jsx)("div",{className:"space-y-3",children:b.map(a=>(0,i.jsx)(aS,{data:a,value:t[a.variable]||"",onChange:b=>{var c;return c=a.variable,void v(a=>({...a,[c]:b}))}},a.variable))})]})]}),(0,i.jsxs)("div",{className:"flex flex-row-reverse p-6 pt-5",children:[(0,i.jsx)(z.default,{disabled:!p||j||l,className:"ml-2",variant:"primary",onClick:y,children:g(c?"mcp.modal.save":"mcp.server.modal.confirm",{ns:"tools"})}),(0,i.jsx)(z.default,{onClick:e,children:g("mcp.modal.cancel",{ns:"tools"})})]})]})};var aU=a.i(528698),aV=a.i(749249);let aW="basicAppConfig",aX=({serverActivated:a})=>{let{t:b}=(0,w.useTranslation)();return(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)(Y.default,{color:a?"green":"yellow"}),(0,i.jsx)("div",{className:(0,r.cn)("system-xs-semibold-uppercase",a?"text-text-success":"text-text-warning"),children:b(a?"overview.status.running":"overview.status.disable",{ns:"appOverview"})})]})},aY=({serverURL:a,serverPublished:b,isCurrentWorkspaceManager:c,genLoading:d,onRegenerate:e})=>{let{t:f}=(0,w.useTranslation)();return(0,i.jsxs)("div",{className:"flex flex-col items-start justify-center self-stretch",children:[(0,i.jsx)("div",{className:"system-xs-medium pb-1 text-text-tertiary",children:f("mcp.server.url",{ns:"tools"})}),(0,i.jsxs)("div",{className:"inline-flex h-9 w-full items-center gap-0.5 rounded-lg bg-components-input-bg-normal p-1 pl-2",children:[(0,i.jsx)("div",{className:"flex h-4 min-w-0 flex-1 items-start justify-start gap-2 px-1",children:(0,i.jsx)("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap text-xs font-medium text-text-secondary",children:a})}),b&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(B.default,{content:a,className:"!size-6"}),(0,i.jsx)(s.default,{type:"vertical",className:"!mx-0.5 !h-3.5 shrink-0"}),c&&(0,i.jsx)(T.default,{popupContent:f("overview.appInfo.regenerate",{ns:"appOverview"})||"",children:(0,i.jsx)("div",{className:"cursor-pointer rounded-md p-1 hover:bg-state-base-hover",onClick:e,children:(0,i.jsx)(u.RiLoopLeftLine,{className:(0,r.cn)("h-4 w-4 text-text-tertiary hover:text-text-secondary",d&&"animate-spin")})})})]})]})]})},aZ=({triggerModeMessage:a})=>a?(0,i.jsx)(T.default,{popupContent:a,popupClassName:"max-w-64 rounded-xl bg-components-panel-bg px-3 py-2 text-xs text-text-secondary shadow-lg",position:"right",children:(0,i.jsx)("div",{className:"absolute inset-0 z-10 cursor-not-allowed rounded-xl","aria-hidden":"true"})}):(0,i.jsx)("div",{className:"absolute inset-0 z-10 cursor-not-allowed rounded-xl","aria-hidden":"true"}),a$=({appInfo:a,triggerModeDisabled:b=!1,triggerModeMessage:c=""})=>{let{t:d}=(0,w.useTranslation)(),e=(0,aa.useDocLink)(),f=a.id,{genLoading:g,isLoading:h,serverPublished:j,serverActivated:k,serverURL:l,detail:n,isCurrentWorkspaceManager:o,toggleDisabled:p,isMinimalState:q,appUnpublished:s,missingStartNode:t,showConfirmDelete:v,showMCPServerModal:x,latestParams:y,handleGenCode:B,handleStatusChange:C,handleServerModalHide:D,openConfirmDelete:E,closeConfirmDelete:F,openServerModal:G}=((a,b)=>{let c=a.id,d=(0,aV.useQueryClient)(),{mutateAsync:e}=(0,aN.useUpdateMCPServer)(),{mutateAsync:f,isPending:g}=(0,aN.useRefreshMCPServerCode)(),h=(0,aN.useInvalidateMCPServerDetail)(),{isCurrentWorkspaceManager:i,isCurrentWorkspaceEditor:j}=(0,$.useAppContext)(),[k,l]=(0,m.useState)(!1),[n,o]=(0,m.useState)(!1),p=a?.mode===af.AppModeEnum.ADVANCED_CHAT||a?.mode===af.AppModeEnum.WORKFLOW,q=!p,r=a.mode===af.AppModeEnum.WORKFLOW,{data:s}=(0,ae.useAppWorkflow)(p?c:""),{data:t={}}=(0,aU.useQuery)({queryKey:[aW,c],queryFn:async()=>{let a=await (0,ad.fetchAppDetail)({url:"/apps",id:c});return a?.model_config||{}},enabled:q&&!!c}),{data:u}=(0,aN.useMCPServerDetail)(c),{id:v,status:w,server_code:x}=u??{},y=!!v,z=y?`${a.api_base_url.replace("/v1","")}/mcp/server/${x}/mcp`:"***********",A=p?!s?.graph:!t.updated_at,B=s?.graph?.nodes?.some(a=>a.data.type===Z.BlockEnum.Start),C=r&&!B,D=(0,m.useMemo)(()=>q&&t?.user_input_form?t.user_input_form.map(a=>{let b=Object.keys(a)[0];return{...a[b],type:b||"text-input"}}):[],[t?.user_input_form,q]),E=(0,m.useMemo)(()=>{if(p){if(!s?.graph)return[];let a=s?.graph.nodes.find(a=>a.data.type===Z.BlockEnum.Start);return a?.data.variables||[]}return D},[s,D,p]),F=(0,m.useCallback)(async()=>{await f(u?.id||""),h(c)},[f,u?.id,h,c]),G=(0,m.useCallback)(async a=>a&&!y?(o(!0),{activated:!1}):(await e({appID:c,id:v||"",description:u?.description||"",parameters:u?.parameters||{},status:a?"active":"inactive"}),h(c),{activated:a}),[y,e,c,v,u,h]),H=(0,m.useCallback)(a=>(o(!1),{shouldDeactivate:!a}),[]),I=(0,m.useCallback)(()=>l(!0),[]),J=(0,m.useCallback)(()=>l(!1),[]);return{genLoading:g,isLoading:!!p&&!s,serverPublished:y,serverActivated:"active"===w,serverURL:z,detail:u,isCurrentWorkspaceManager:i,toggleDisabled:!j||A||C||b,isMinimalState:A||C,appUnpublished:A,missingStartNode:C,showConfirmDelete:k,showMCPServerModal:n,latestParams:E,handleGenCode:F,handleStatusChange:G,handleServerModalHide:H,openConfirmDelete:I,closeConfirmDelete:J,openServerModal:(0,m.useCallback)(()=>o(!0),[]),invalidateBasicAppConfig:(0,m.useCallback)(()=>{d.invalidateQueries({queryKey:[aW,c]})},[d,c])}})(a,b),[H,I]=(0,m.useState)(null),J=H??k,K=async a=>{I(a),!(await C(a)).activated&&a&&I(null)};if(h)return null;let L=function({toggleDisabled:a,appUnpublished:b,missingStartNode:c,triggerModeMessage:d,t:e,docLink:f}){return a?b?e("mcp.server.publishTip",{ns:"tools"}):c?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"mb-1 text-xs font-normal text-text-secondary",children:e("overview.appInfo.enableTooltip.description",{ns:"appOverview"})}),(0,i.jsx)("div",{className:"cursor-pointer text-xs font-normal text-text-accent hover:underline",onClick:()=>window.open(f("/use-dify/nodes/user-input"),"_blank"),children:e("overview.appInfo.enableTooltip.learnMore",{ns:"appOverview"})})]}):d||"":""}({toggleDisabled:p,appUnpublished:s,missingStartNode:t,triggerModeMessage:c,t:d,docLink:e});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:(0,r.cn)("w-full max-w-full rounded-xl border-l-[0.5px] border-t border-effects-highlight",q&&"h-12"),children:(0,i.jsxs)("div",{className:(0,r.cn)("relative rounded-xl bg-background-default",b&&"opacity-60"),children:[b&&(0,i.jsx)(aZ,{triggerModeMessage:c}),(0,i.jsxs)("div",{className:(0,r.cn)("flex w-full flex-col items-start justify-center gap-3 self-stretch p-3",q?"border-0":"border-b-[0.5px] border-divider-subtle"),children:[(0,i.jsxs)("div",{className:"flex w-full items-center gap-3 self-stretch",children:[(0,i.jsxs)("div",{className:"flex grow items-center",children:[(0,i.jsx)("div",{className:"mr-2 shrink-0 rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-blue-brand-blue-brand-500 p-1 shadow-md",children:(0,i.jsx)(aR.Mcp,{className:"h-4 w-4 text-text-primary-on-surface"})}),(0,i.jsx)("div",{className:"group w-full",children:(0,i.jsx)("div",{className:"system-md-semibold min-w-0 overflow-hidden text-ellipsis break-normal text-text-secondary group-hover:text-text-primary",children:d("mcp.server.title",{ns:"tools"})})})]}),(0,i.jsx)(aX,{serverActivated:k}),(0,i.jsx)(T.default,{popupContent:L,position:"right",popupClassName:"w-58 max-w-60 rounded-xl bg-components-panel-bg px-3.5 py-3 shadow-lg",offset:24,children:(0,i.jsx)("div",{children:(0,i.jsx)(W.default,{defaultValue:J,onChange:K,disabled:p})})})]}),!q&&(0,i.jsx)(aY,{serverURL:l,serverPublished:j,isCurrentWorkspaceManager:o,genLoading:g,onRegenerate:E})]}),!q&&(0,i.jsx)("div",{className:"flex items-center gap-1 self-stretch p-3",children:(0,i.jsx)(z.default,{disabled:p,size:"small",variant:"ghost",onClick:G,children:(0,i.jsxs)("div",{className:"flex items-center justify-center gap-[1px]",children:[(0,i.jsx)(u.RiEditLine,{className:"h-3.5 w-3.5"}),(0,i.jsx)("div",{className:"system-xs-medium px-[3px] text-text-tertiary",children:d(j?"mcp.server.edit":"mcp.server.addDescription",{ns:"tools"})})]})})})]})}),x&&(0,i.jsx)(aT,{show:x,appID:f,data:j?n:void 0,latestParams:y,onHide:()=>{D(k),I(null)},appInfo:a}),v&&(0,i.jsx)(A.default,{type:"warning",title:d("overview.appInfo.regenerate",{ns:"appOverview"}),content:d("mcp.server.reGen",{ns:"tools"}),isShow:v,onConfirm:()=>{B(),F()},onCancel:F})]})};var a_=a.i(18039);let a0=({appId:a,isInPanel:b,className:c})=>{let{t:d}=(0,w.useTranslation)(),{notify:e}=(0,x.useContext)(aB.ToastContext),f=(0,o.useStore)(a=>a.appDetail),g=(0,o.useStore)(a=>a.setAppDetail),h=f?.mode===af.AppModeEnum.WORKFLOW,j=b&&h,{data:k}=(0,ae.useAppWorkflow)(h?f.id:""),l=(0,m.useMemo)(()=>!!h&&(k?(k.graph?.nodes||[]).some(a=>{let b=a.data?.type;return!!b&&(0,Z.isTriggerNode)(b)}):null),[h,k]),n=!(!h||!1===l),p=(0,m.useCallback)(a=>(0,i.jsx)("div",{className:"flex flex-col gap-1",children:(0,i.jsx)("div",{className:"text-xs text-text-secondary",children:d("overview.disableTooltip.triggerMode",{ns:"appOverview",feature:a})})}),[d]),q=n?p(d("overview.appInfo.title",{ns:"appOverview"})):null,r=n?p(d("overview.apiInfo.title",{ns:"appOverview"})):null,s=n?p(d("mcp.server.title",{ns:"tools"})):null,t=async()=>{try{let b=await (0,ad.fetchAppDetail)({url:"/apps",id:a});g({...b})}catch(a){console.error(a)}},u=(a,b)=>{let c=a?"error":"success";b||="success"===c?"modifiedSuccessfully":"modifiedUnsuccessfully","success"===c&&t(),e({type:c,message:d(`actionMsg.${b}`,{ns:"common"})})},v=async b=>{let[c]=await (0,ag.asyncRunSafe)((0,ad.updateAppSiteStatus)({url:`/apps/${a}/site-enable`,body:{enable_site:b}}));u(c)},y=async b=>{let[c]=await (0,ag.asyncRunSafe)((0,ad.updateAppSiteStatus)({url:`/apps/${a}/api-enable`,body:{enable_api:b}}));u(c)},z=async b=>{let[c]=await (0,ag.asyncRunSafe)((0,ad.updateAppSiteConfig)({url:`/apps/${a}/site`,body:b}));c||localStorage.setItem(a_.NEED_REFRESH_APP_LIST_KEY,"1"),u(c)},A=async()=>{let[b]=await (0,ag.asyncRunSafe)((0,ad.updateAppSiteAccessToken)({url:`/apps/${a}/site/access-token-reset`}));u(b,b?"generatedUnsuccessfully":"generatedSuccessfully")};if(!f)return(0,i.jsx)(aQ.default,{});let B=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(aJ,{appInfo:f,cardType:"webapp",isInPanel:b,triggerModeDisabled:n,triggerModeMessage:q,onChangeStatus:v,onGenerateCode:A,onSaveSiteConfig:z}),(0,i.jsx)(aJ,{cardType:"api",appInfo:f,isInPanel:b,triggerModeDisabled:n,triggerModeMessage:r,onChangeStatus:y}),b&&(0,i.jsx)(a$,{appInfo:f,triggerModeDisabled:n,triggerModeMessage:s})]}),C=j?(0,i.jsx)(aP,{appInfo:f,onToggleResult:u}):null;return(0,i.jsxs)("div",{className:c||"mb-6 grid w-full grid-cols-1 gap-6 xl:grid-cols-2",children:[n&&C,B,!n&&C]})};var a1=a.i(941938);let a2=({className:a,show:b,onClose:c,children:d})=>(0,i.jsxs)(a1.Transition,{show:b,as:"div",className:"absolute left-0 top-0 z-30 box-border h-full w-full p-2",children:[(0,i.jsx)(a1.TransitionChild,{children:(0,i.jsx)("div",{className:(0,r.cn)("absolute inset-0 left-0 w-full bg-app-detail-overlay-bg","duration-300 ease-in data-[closed]:opacity-0","data-[enter]:opacity-100","data-[leave]:opacity-0"),onClick:c})}),(0,i.jsx)(a1.TransitionChild,{children:(0,i.jsx)("div",{className:(0,r.cn)("absolute left-0 w-full border-r border-divider-burn bg-app-detail-bg","duration-100 ease-in data-[closed]:-translate-x-full","data-[enter]:translate-x-0 data-[enter]:duration-300 data-[enter]:ease-out","data-[leave]:-translate-x-full data-[leave]:duration-200 data-[leave]:ease-in",a),children:d})})]});var a3=a.i(926261),a4=a.i(24561),a5=a.i(297392),a6=a.i(825319);let a7=[],a8=({operations:a,primaryOperations:b,secondaryOperations:c,gap:d})=>{let{t:e}=(0,w.useTranslation)(),[f,g]=(0,m.useState)([]),[h,j]=(0,m.useState)([]),[k,l]=(0,m.useState)(!1),n=(0,m.useRef)(null),o=(0,m.useCallback)(()=>{l(!0)},[l]),p=(0,m.useMemo)(()=>a||b||a7,[a,b]),q=(0,m.useMemo)(()=>a?a7:c||a7,[a,c]),r=p.filter(a=>"divider"!==a.type);(0,m.useEffect)(()=>{let a=(a,b)=>{let c=[...b,...q];b.length||c[0]?.type!=="divider"||c.shift(),g(a),j(c)},b=p.filter(a=>"divider"!==a.type);if(!b.length)return void a([],[]);let c=n.current,e=document.getElementById("more-measure");if(!c||!e)return;let f=0,h=c.clientWidth,i=e.clientWidth;if(0===h||0===i)return;let k=b.reduce((a,b)=>(a[b.id]=!1,a),{}),l=Array.from(c.children).slice(0,-1);for(let a=0;a<l.length;a++){let b=l[a],c=b.dataset.targetid;if(!c)break;let e=b.clientWidth;if(f+d+e+i<=h)k[c]=!0,f+=d+e;else{a===l.length-1&&f+e<=h?k[c]=!0:k[c]=!1;break}}a(b.filter(a=>k[a.id]),b.filter(a=>!k[a.id]))},[d,p,q]);let s=h.length>0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{"aria-hidden":"true",ref:n,className:"pointer-events-none flex h-0 items-center self-stretch overflow-hidden",style:{gap:d},children:[r.map(a=>(0,i.jsxs)(z.default,{"data-targetid":a.id,size:"small",variant:"secondary",className:"gap-[1px]",tabIndex:-1,children:[(0,m.cloneElement)(a.icon,{className:"h-3.5 w-3.5 text-components-button-secondary-text"}),(0,i.jsx)("span",{className:"system-xs-medium text-components-button-secondary-text",children:a.title})]},a.id)),(0,i.jsxs)(z.default,{id:"more-measure",size:"small",variant:"secondary",className:"gap-[1px]",tabIndex:-1,children:[(0,i.jsx)(u.RiMoreLine,{className:"h-3.5 w-3.5 text-components-button-secondary-text"}),(0,i.jsx)("span",{className:"system-xs-medium text-components-button-secondary-text",children:e("operation.more",{ns:"common"})})]})]}),(0,i.jsxs)("div",{className:"flex items-center self-stretch overflow-hidden",style:{gap:d},children:[f.map(a=>(0,i.jsxs)(z.default,{"data-targetid":a.id,size:"small",variant:"secondary",className:"gap-[1px]",onClick:a.onClick,children:[(0,m.cloneElement)(a.icon,{className:"h-3.5 w-3.5 text-components-button-secondary-text"}),(0,i.jsx)("span",{className:"system-xs-medium text-components-button-secondary-text",children:a.title})]},a.id)),s&&(0,i.jsxs)(a6.PortalToFollowElem,{open:k,onOpenChange:l,placement:"bottom-end",offset:{mainAxis:4},children:[(0,i.jsx)(a6.PortalToFollowElemTrigger,{onClick:o,children:(0,i.jsxs)(z.default,{size:"small",variant:"secondary",className:"gap-[1px]",children:[(0,i.jsx)(u.RiMoreLine,{className:"h-3.5 w-3.5 text-components-button-secondary-text"}),(0,i.jsx)("span",{className:"system-xs-medium text-components-button-secondary-text",children:e("operation.more",{ns:"common"})})]})}),(0,i.jsx)(a6.PortalToFollowElemContent,{className:"z-[30]",children:(0,i.jsx)("div",{className:"flex min-w-[264px] flex-col rounded-[12px] border-[0.5px] border-components-panel-border bg-components-panel-bg-blur p-1 shadow-lg backdrop-blur-[5px]",children:h.map(a=>"divider"===a.type?(0,i.jsx)("div",{className:"my-1 h-px bg-divider-subtle"},a.id):(0,i.jsxs)("div",{className:"flex h-8 cursor-pointer items-center gap-x-1 rounded-lg p-1.5 hover:bg-state-base-hover",onClick:a.onClick,children:[(0,m.cloneElement)(a.icon,{className:"h-4 w-4 text-text-tertiary"}),(0,i.jsx)("span",{className:"system-md-regular text-text-secondary",children:a.title})]},a.id))})})]})]})]})},a9=(0,v.default)(async()=>{},{loadableGenerated:{modules:[339556]},ssr:!1}),ba=(0,v.default)(async()=>{},{loadableGenerated:{modules:[23120]},ssr:!1}),bb=(0,v.default)(async()=>{},{loadableGenerated:{modules:[823278]},ssr:!1}),bc=(0,v.default)(async()=>{},{loadableGenerated:{modules:[920226]},ssr:!1}),bd=(0,v.default)(async()=>{},{loadableGenerated:{modules:[868879]},ssr:!1}),be=(0,v.default)(async()=>{},{loadableGenerated:{modules:[356881]},ssr:!1}),bf=m.memo(({expand:a,onlyShowDetail:b=!1,openState:c=!1,onDetailExpand:d})=>{let{t:e}=(0,w.useTranslation)(),{notify:f}=(0,x.useContext)(aB.ToastContext),{replace:g}=(0,l.useRouter)(),{onPlanInfoChanged:h}=(0,aE.useProviderContext)(),j=(0,o.useStore)(a=>a.appDetail),k=(0,o.useStore)(a=>a.setAppDetail),n=(0,a3.useInvalidateAppList)(),[p,q]=(0,m.useState)(c),[s,t]=(0,m.useState)(!1),[v,y]=(0,m.useState)(!1),[A,B]=(0,m.useState)(!1),[C,D]=(0,m.useState)(!1),[E,F]=(0,m.useState)(!1),[G,H]=(0,m.useState)([]),[I,J]=(0,m.useState)(!1),K=(0,m.useCallback)(async({name:a,icon_type:b,icon:c,icon_background:d,description:g,use_icon_as_answer_icon:h,max_active_requests:i})=>{if(j)try{let l=await (0,ad.updateAppInfo)({appID:j.id,name:a,icon_type:b,icon:c,icon_background:d,description:g,use_icon_as_answer_icon:h,max_active_requests:i});t(!1),f({type:"success",message:e("editDone",{ns:"app"})}),k(l)}catch{f({type:"error",message:e("editFailed",{ns:"app"})})}},[j,f,k,e]),L=async({name:a,icon_type:b,icon:c,icon_background:d})=>{if(j)try{let i=await (0,ad.copyApp)({appID:j.id,name:a,icon_type:b,icon:c,icon_background:d,mode:j.mode});y(!1),f({type:"success",message:e("newApp.appCreated",{ns:"app"})}),localStorage.setItem(a_.NEED_REFRESH_APP_LIST_KEY,"1"),h(),(0,a5.getRedirection)(!0,i,g)}catch{f({type:"error",message:e("newApp.appCreateFailed",{ns:"app"})})}},M=async(a=!1)=>{if(j)try{let{data:b}=await (0,ad.exportAppConfig)({appID:j.id,include:a}),c=new Blob([b],{type:"application/yaml"});(0,U.downloadBlob)({data:c,fileName:`${j.name}.yml`})}catch{f({type:"error",message:e("exportFailed",{ns:"app"})})}},N=async()=>{if(j){if(j.mode!==af.AppModeEnum.WORKFLOW&&j.mode!==af.AppModeEnum.ADVANCED_CHAT)return void M();J(!0)}},O=async()=>{if(j){J(!1);try{let a=((await (0,a4.fetchWorkflowDraft)(`/apps/${j.id}/workflows/draft`)).environment_variables||[]).filter(a=>"secret"===a.value_type);if(0===a.length)return void M();H(a)}catch{f({type:"error",message:e("exportFailed",{ns:"app"})})}}},P=(0,m.useCallback)(async()=>{if(j){try{await (0,ad.deleteApp)(j.id),f({type:"success",message:e("appDeleted",{ns:"app"})}),n(),h(),k(),g("/apps")}catch(a){f({type:"error",message:`${e("appDeleteFailed",{ns:"app"})}${"message"in a?`: ${a.message}`:""}`})}B(!1)}},[j,n,f,h,g,k,e]),{isCurrentWorkspaceEditor:Q}=(0,$.useAppContext)();if(!j)return null;let R=[{id:"edit",title:e("editApp",{ns:"app"}),icon:(0,i.jsx)(u.RiEditLine,{}),onClick:()=>{q(!1),d?.(!1),t(!0)}},{id:"duplicate",title:e("duplicate",{ns:"app"}),icon:(0,i.jsx)(u.RiFileCopy2Line,{}),onClick:()=>{q(!1),d?.(!1),y(!0)}},{id:"export",title:e("export",{ns:"app"}),icon:(0,i.jsx)(u.RiFileDownloadLine,{}),onClick:N}],S=[...j.mode===af.AppModeEnum.ADVANCED_CHAT||j.mode===af.AppModeEnum.WORKFLOW?[{id:"import",title:e("common.importDSL",{ns:"workflow"}),icon:(0,i.jsx)(u.RiFileUploadLine,{}),onClick:()=>{q(!1),d?.(!1),F(!0)}}]:[],{id:"divider-1",title:"",icon:(0,i.jsx)(i.Fragment,{}),onClick:()=>{},type:"divider"},{id:"delete",title:e("operation.delete",{ns:"common"}),icon:(0,i.jsx)(u.RiDeleteBinLine,{}),onClick:()=>{q(!1),d?.(!1),B(!0)}}],T=j.mode===af.AppModeEnum.COMPLETION||j.mode===af.AppModeEnum.CHAT?{id:"switch",title:e("switch",{ns:"app"}),icon:(0,i.jsx)(u.RiExchange2Line,{}),onClick:()=>{q(!1),d?.(!1),D(!0)}}:null;return(0,i.jsxs)("div",{children:[!b&&(0,i.jsx)("button",{type:"button",onClick:()=>{Q&&q(a=>!a)},className:"block w-full",children:(0,i.jsxs)("div",{className:"flex flex-col gap-2 rounded-lg p-1 hover:bg-state-base-hover",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("div",{className:(0,r.cn)(!a&&"ml-1"),children:(0,i.jsx)(au.default,{size:a?"large":"small",iconType:j.icon_type,icon:j.icon,background:j.icon_background,imageUrl:j.icon_url})}),a&&(0,i.jsx)("div",{className:"ml-auto flex items-center justify-center rounded-md p-0.5",children:(0,i.jsx)("div",{className:"flex h-5 w-5 items-center justify-center",children:(0,i.jsx)(u.RiEqualizer2Line,{className:"h-4 w-4 text-text-tertiary"})})})]}),!a&&(0,i.jsx)("div",{className:"flex items-center justify-center",children:(0,i.jsx)("div",{className:"flex h-5 w-5 items-center justify-center rounded-md p-0.5",children:(0,i.jsx)(u.RiEqualizer2Line,{className:"h-4 w-4 text-text-tertiary"})})}),a&&(0,i.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,i.jsx)("div",{className:"flex w-full",children:(0,i.jsx)("div",{className:"system-md-semibold truncate whitespace-nowrap text-text-secondary",children:j.name})}),(0,i.jsx)("div",{className:"system-2xs-medium-uppercase whitespace-nowrap text-text-tertiary",children:j.mode===af.AppModeEnum.ADVANCED_CHAT?e("types.advanced",{ns:"app"}):j.mode===af.AppModeEnum.AGENT_CHAT?e("types.agent",{ns:"app"}):j.mode===af.AppModeEnum.CHAT?e("types.chatbot",{ns:"app"}):j.mode===af.AppModeEnum.COMPLETION?e("types.completion",{ns:"app"}):e("types.workflow",{ns:"app"})})]})]})}),(0,i.jsxs)(a2,{show:b?c:p,onClose:()=>{q(!1),d?.(!1)},className:"absolute bottom-2 left-2 top-2 flex w-[420px] flex-col rounded-2xl !p-0",children:[(0,i.jsxs)("div",{className:"flex shrink-0 flex-col items-start justify-center gap-3 self-stretch p-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 self-stretch",children:[(0,i.jsx)(au.default,{size:"large",iconType:j.icon_type,icon:j.icon,background:j.icon_background,imageUrl:j.icon_url}),(0,i.jsxs)("div",{className:"flex flex-1 flex-col items-start justify-center overflow-hidden",children:[(0,i.jsx)("div",{className:"system-md-semibold w-full truncate text-text-secondary",children:j.name}),(0,i.jsx)("div",{className:"system-2xs-medium-uppercase text-text-tertiary",children:j.mode===af.AppModeEnum.ADVANCED_CHAT?e("types.advanced",{ns:"app"}):j.mode===af.AppModeEnum.AGENT_CHAT?e("types.agent",{ns:"app"}):j.mode===af.AppModeEnum.CHAT?e("types.chatbot",{ns:"app"}):j.mode===af.AppModeEnum.COMPLETION?e("types.completion",{ns:"app"}):e("types.workflow",{ns:"app"})})]})]}),j.description&&(0,i.jsx)("div",{className:"system-xs-regular overflow-wrap-anywhere max-h-[105px] w-full max-w-full overflow-y-auto whitespace-normal break-words text-text-tertiary",children:j.description}),(0,i.jsx)(a8,{gap:4,primaryOperations:R,secondaryOperations:S})]}),(0,i.jsx)(a0,{appId:j.id,isInPanel:!0,className:"flex flex-1 flex-col gap-2 overflow-auto px-2 py-1"}),T&&(0,i.jsx)("div",{className:"flex min-h-fit shrink-0 flex-col items-start justify-center gap-3 self-stretch pb-2",children:(0,i.jsxs)(z.default,{size:"medium",variant:"ghost",className:"gap-0.5",onClick:T.onClick,children:[T.icon,(0,i.jsx)("span",{className:"system-sm-medium text-text-tertiary",children:T.title})]})})]}),C&&(0,i.jsx)(a9,{inAppDetail:!0,show:C,appDetail:j,onClose:()=>D(!1),onSuccess:()=>D(!1)}),s&&(0,i.jsx)(ba,{isEditModal:!0,appName:j.name,appIconType:j.icon_type,appIcon:j.icon,appIconBackground:j.icon_background,appIconUrl:j.icon_url,appDescription:j.description,appMode:j.mode,appUseIconAsAnswerIcon:j.use_icon_as_answer_icon,max_active_requests:j.max_active_requests??null,show:s,onConfirm:K,onHide:()=>t(!1)}),v&&(0,i.jsx)(bb,{appName:j.name,icon_type:j.icon_type,icon:j.icon,icon_background:j.icon_background,icon_url:j.icon_url,show:v,onConfirm:L,onHide:()=>y(!1)}),A&&(0,i.jsx)(bc,{title:e("deleteAppConfirmTitle",{ns:"app"}),content:e("deleteAppConfirmContent",{ns:"app"}),isShow:A,onConfirm:P,onCancel:()=>B(!1)}),E&&(0,i.jsx)(bd,{onCancel:()=>F(!1),onBackup:N}),G.length>0&&(0,i.jsx)(be,{envList:G,onConfirm:M,onClose:()=>H([])}),I&&(0,i.jsx)(bc,{type:"info",isShow:I,title:e("sidebar.exportWarning",{ns:"workflow"}),content:e("sidebar.exportWarningDesc",{ns:"workflow"}),onConfirm:O,onCancel:()=>J(!1)})]})}),bg=m.memo(({name:a,href:b,iconMap:c,mode:d="expand",disabled:e=!1})=>{let f,g=(0,l.useSelectedLayoutSegment)(),h=("annotations"===(f=g?.toLowerCase())&&(f="logs"),f),j=b.toLowerCase().split("/")?.pop()===h,k=j?c.selected:c.normal,m=()=>(0,i.jsx)("div",{className:(0,r.cn)("expand"!==d&&"-ml-1"),children:(0,i.jsx)(k,{className:"h-4 w-4 shrink-0","aria-hidden":"true"})});return e?(0,i.jsxs)("button",{type:"button",disabled:!0,className:(0,r.cn)("system-sm-medium flex h-8 cursor-not-allowed items-center rounded-lg text-components-menu-item-text opacity-30 hover:bg-components-menu-item-bg-hover","pl-3 pr-1"),title:"collapse"===d?a:"","aria-disabled":!0,children:[m(),(0,i.jsx)("span",{className:(0,r.cn)("overflow-hidden whitespace-nowrap transition-all duration-200 ease-in-out","expand"===d?"ml-2 max-w-none opacity-100":"ml-0 max-w-0 opacity-0"),children:a})]},a):(0,i.jsxs)(as.default,{href:b,className:(0,r.cn)(j?"system-sm-semibold border-b-[0.25px] border-l-[0.75px] border-r-[0.25px] border-t-[0.75px] border-effects-highlight-lightmode-off bg-components-menu-item-bg-active text-text-accent-light-mode-only":"system-sm-medium text-components-menu-item-text hover:bg-components-menu-item-bg-hover hover:text-components-menu-item-text-hover","flex h-8 items-center rounded-lg pl-3 pr-1"),title:"collapse"===d?a:"",children:[m(),(0,i.jsx)("span",{className:(0,r.cn)("overflow-hidden whitespace-nowrap transition-all duration-200 ease-in-out","expand"===d?"ml-2 max-w-none opacity-100":"ml-0 max-w-0 opacity-0"),children:a})]},a)}),bh=({navigation:a})=>{let{t:b}=(0,w.useTranslation)(),{isCurrentWorkspaceEditor:c}=(0,$.useAppContext)(),d=(0,o.useStore)(a=>a.appDetail),[e,f]=(0,m.useState)(!1),[g,h]=(0,m.useState)(!1),j=(0,m.useRef)(g),k=(0,m.useCallback)(a=>{h(a),j.current=a},[h]),l=(0,m.useCallback)(()=>{k(!j.current)},[k]);return d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"fixed left-2 top-2 z-20",children:(0,i.jsxs)(a6.PortalToFollowElem,{open:g,onOpenChange:k,placement:"bottom-start",offset:{mainAxis:-41},children:[(0,i.jsx)(a6.PortalToFollowElemTrigger,{onClick:l,children:(0,i.jsxs)("div",{className:(0,r.cn)("flex cursor-pointer items-center rounded-[10px] border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg p-1 shadow-lg backdrop-blur-sm hover:bg-background-default-hover",g&&"bg-background-default-hover"),children:[(0,i.jsx)(au.default,{size:"small",iconType:d.icon_type,icon:d.icon,background:d.icon_background,imageUrl:d.icon_url}),(0,i.jsx)(u.RiMenuLine,{className:"h-4 w-4 text-text-tertiary"})]})}),(0,i.jsx)(a6.PortalToFollowElemContent,{className:"z-[1000]",children:(0,i.jsxs)("div",{className:(0,r.cn)("w-[305px] rounded-xl border-[0.5px] border-components-panel-border bg-background-default-subtle shadow-lg"),children:[(0,i.jsx)("div",{className:"p-2",children:(0,i.jsxs)("div",{className:(0,r.cn)("flex flex-col gap-2 rounded-lg p-2 pb-2.5",c&&"cursor-pointer hover:bg-state-base-hover"),onClick:()=>{f(!0),k(!1)},children:[(0,i.jsxs)("div",{className:"flex items-center justify-between self-stretch",children:[(0,i.jsx)(au.default,{size:"large",iconType:d.icon_type,icon:d.icon,background:d.icon_background,imageUrl:d.icon_url}),(0,i.jsx)("div",{className:"flex items-center justify-center rounded-md p-0.5",children:(0,i.jsx)("div",{className:"flex h-5 w-5 items-center justify-center",children:(0,i.jsx)(u.RiEqualizer2Line,{className:"h-4 w-4 text-text-tertiary"})})})]}),(0,i.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,i.jsx)("div",{className:"flex w-full",children:(0,i.jsx)("div",{className:"system-md-semibold truncate text-text-secondary",children:d.name})}),(0,i.jsx)("div",{className:"system-2xs-medium-uppercase text-text-tertiary",children:b(d.mode===af.AppModeEnum.ADVANCED_CHAT?"types.advanced":d.mode===af.AppModeEnum.AGENT_CHAT?"types.agent":d.mode===af.AppModeEnum.CHAT?"types.chatbot":d.mode===af.AppModeEnum.COMPLETION?"types.completion":"types.workflow",{ns:"app"})})]})]})}),(0,i.jsx)("div",{className:"px-4",children:(0,i.jsx)(s.default,{bgStyle:"gradient"})}),(0,i.jsx)("nav",{className:"space-y-0.5 px-3 pb-6 pt-4",children:a.map((a,b)=>(0,i.jsx)(bg,{mode:"expand",iconMap:{selected:a.selectedIcon,normal:a.icon},name:a.name,href:a.href},b))})]})})]})}),(0,i.jsx)("div",{className:"z-20",children:(0,i.jsx)(bf,{expand:!0,onlyShowDetail:!0,openState:e,onDetailExpand:f})})]}):null};var bi=a.i(698636),bj=a.i(70854),bk=a.i(986431),bl=a.i(22761),bm=a.i(218257),bn=a.i(847733),bo=a.i(425282),bp=a.i(599656),bq=a.i(556476);let br=m.memo(({Icon:a,name:b,handleClick:c})=>(0,i.jsxs)("div",{className:"flex items-center gap-x-1 rounded-lg px-2 py-1.5 hover:bg-state-base-hover",onClick:a=>{a.preventDefault(),a.stopPropagation(),c?.()},children:[(0,i.jsx)(a,{className:"size-4 text-text-tertiary"}),(0,i.jsx)("span",{className:"system-md-regular px-1 text-text-secondary",children:b})]})),bs=m.memo(({showDelete:a,openRenameModal:b,handleExportPipeline:c,detectIsUsedByApp:d})=>{let{t:e}=(0,w.useTranslation)(),f=(0,bi.useDatasetDetailContextWithSelector)(a=>a.dataset?.runtime_mode);return(0,i.jsxs)("div",{className:"flex w-[200px] flex-col rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg-blur shadow-lg shadow-shadow-shadow-5 backdrop-blur-[5px]",children:[(0,i.jsxs)("div",{className:"flex flex-col p-1",children:[(0,i.jsx)(br,{Icon:u.RiEditLine,name:e("operation.edit",{ns:"common"}),handleClick:b}),"rag_pipeline"===f&&(0,i.jsx)(br,{Icon:u.RiFileDownloadLine,name:e("operations.exportPipeline",{ns:"datasetPipeline"}),handleClick:c})]}),a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.default,{type:"horizontal",className:"my-0 bg-divider-subtle"}),(0,i.jsx)("div",{className:"flex flex-col p-1",children:(0,i.jsx)(br,{Icon:u.RiDeleteBinLine,name:e("operation.delete",{ns:"common"}),handleClick:d})})]})]})}),bt=m.memo(({expand:a})=>{let{t:b}=(0,w.useTranslation)(),{replace:c}=(0,l.useRouter)(),[d,e]=(0,m.useState)(!1),[f,g]=(0,m.useState)(!1),[h,j]=(0,m.useState)(""),[k,n]=(0,m.useState)(!1),o=(0,$.useSelector)(a=>a.isCurrentWorkspaceDatasetOperator),p=(0,bi.useDatasetDetailContextWithSelector)(a=>a.dataset),q=(0,m.useCallback)(()=>{e(a=>!a)},[]),s=(0,bn.useInvalidDatasetList)(),t=(0,bo.useInvalid)([...bn.datasetDetailQueryKeyPrefix,p.id]),v=(0,m.useCallback)(()=>{s(),t()},[t,s]),x=(0,m.useCallback)(()=>{g(!0),q()},[q]),{mutateAsync:y}=(0,bp.useExportPipelineDSL)(),z=(0,m.useCallback)(async(a=!1)=>{let{pipeline_id:c,name:d}=p;if(c){q();try{let{data:b}=await y({pipelineId:c,include:a}),e=new Blob([b],{type:"application/yaml"});(0,U.downloadBlob)({data:e,fileName:`${d}.pipeline`})}catch{aB.default.notify({type:"error",message:b("exportFailed",{ns:"app"})})}}},[p,y,q,b]),B=(0,m.useCallback)(async()=>{try{let{is_using:a}=await (0,bm.checkIsUsedInApp)(p.id);j(a?b("datasetUsedByApp",{ns:"dataset"}):b("deleteDatasetConfirmContent",{ns:"dataset"})),n(!0)}catch(b){let a=await b.json();aB.default.notify({type:"error",message:a?.message||"Unknown error"})}finally{q()}},[p.id,q,b]),C=(0,m.useCallback)(async()=>{try{await (0,bm.deleteDataset)(p.id),aB.default.notify({type:"success",message:b("datasetDeleted",{ns:"dataset"})}),s(),c("/datasets")}finally{n(!1)}},[p.id,c,s,b]);return(0,i.jsxs)(a6.PortalToFollowElem,{open:d,onOpenChange:e,placement:a?"bottom-end":"right",offset:a?{mainAxis:4,crossAxis:10}:{mainAxis:4},children:[(0,i.jsx)(a6.PortalToFollowElemTrigger,{onClick:q,children:(0,i.jsx)(S.default,{className:(0,r.cn)(a?"size-8 rounded-lg":"size-6 rounded-md"),children:(0,i.jsx)(u.RiMoreFill,{className:"size-4"})})}),(0,i.jsx)(a6.PortalToFollowElemContent,{className:"z-[60]",children:(0,i.jsx)(bs,{showDelete:!o,openRenameModal:x,handleExportPipeline:z,detectIsUsedByApp:B})}),f&&(0,i.jsx)(bq.default,{show:f,dataset:p,onClose:()=>g(!1),onSuccess:v}),k&&(0,i.jsx)(A.default,{title:b("deleteDatasetConfirmTitle",{ns:"dataset"}),content:h,isShow:k,onConfirm:C,onCancel:()=>n(!1)})]})}),bu=m.memo(({expand:a})=>{let{t:b}=(0,w.useTranslation)(),c=(0,bi.useDatasetDetailContextWithSelector)(a=>a.dataset),d=c.icon_info||{icon:"ð",icon_type:"emoji",icon_background:"#FFF4ED",icon_url:""},e="external"===c.provider,f=(0,m.useMemo)(()=>"rag_pipeline"===c.runtime_mode&&c.is_published,[c.runtime_mode,c.is_published]),{formatIndexingTechniqueAndMethod:g}=(0,bj.useKnowledge)();return(0,i.jsxs)("div",{className:(0,r.cn)("relative flex flex-col",a?"":"p-1"),children:[a&&(0,i.jsx)(bl.default,{className:"-left-5 top-[-22px] opacity-15"}),(0,i.jsxs)("div",{className:"flex flex-col gap-2 p-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("div",{className:(0,r.cn)(!a&&"-ml-1"),children:(0,i.jsx)(au.default,{size:a?"large":"small",iconType:d.icon_type,icon:d.icon,background:d.icon_background,imageUrl:d.icon_url})}),a&&(0,i.jsx)("div",{className:"ml-auto",children:(0,i.jsx)(bt,{expand:!0})})]}),!a&&(0,i.jsx)("div",{className:"-mb-2 -mt-1 flex items-center justify-center",children:(0,i.jsx)(bt,{expand:!1})}),a&&(0,i.jsxs)("div",{className:"flex flex-col gap-y-1 pb-0.5",children:[(0,i.jsx)("div",{className:"system-md-semibold truncate text-text-secondary",title:c.name,children:c.name}),(0,i.jsxs)("div",{className:"system-2xs-medium-uppercase text-text-tertiary",children:[e&&b("externalTag",{ns:"dataset"}),!!(!e&&f&&c.doc_form&&c.indexing_technique)&&(0,i.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,i.jsx)("span",{children:b(`chunkingMode.${bk.DOC_FORM_TEXT[c.doc_form]}`,{ns:"dataset"})}),(0,i.jsx)("span",{children:g(c.indexing_technique,c.retrieval_model_dict?.search_method)})]})]}),!!c.description&&(0,i.jsx)("p",{className:"system-xs-regular line-clamp-3 text-text-tertiary first-letter:capitalize",children:c.description})]})]})]})});a.i(224256);var bv=a.i(340527),bw=a.i(61500);let bx=m.memo(({apiEnabled:a})=>{let{t:b}=(0,w.useTranslation)(),c=(0,bi.useDatasetDetailContextWithSelector)(a=>a.dataset?.id),d=(0,bi.useDatasetDetailContextWithSelector)(a=>a.mutateDatasetRes),{mutateAsync:e}=(0,bn.useEnableDatasetServiceApi)(),{mutateAsync:f}=(0,bn.useDisableDatasetServiceApi)(),g=(0,$.useSelector)(a=>a.isCurrentWorkspaceManager),h=(0,bw.useDatasetApiAccessUrl)(),j=(0,m.useCallback)(async a=>{"success"===(a?(await e(c??"")).result:(await f(c??"")).result)&&d?.()},[c,e,d,f]);return(0,i.jsxs)("div",{className:"w-[208px] rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg-blur shadow-lg",children:[(0,i.jsx)("div",{className:"p-1",children:(0,i.jsxs)("div",{className:"p-2",children:[(0,i.jsxs)("div",{className:"mb-1.5 flex justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)(Y.default,{className:"shrink-0",color:a?"green":"yellow"}),(0,i.jsx)("div",{className:(0,r.cn)("system-xs-semibold-uppercase",a?"text-text-success":"text-text-warning"),children:b(a?"serviceApi.enabled":"serviceApi.disabled",{ns:"dataset"})})]}),(0,i.jsx)(W.default,{defaultValue:a,onChange:j,disabled:!g})]}),(0,i.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:b("appMenus.apiAccessTip",{ns:"common"})})]})}),(0,i.jsx)("div",{className:"h-px bg-divider-subtle"}),(0,i.jsx)("div",{className:"p-1",children:(0,i.jsxs)(as.default,{href:h,target:"_blank",rel:"noopener noreferrer",className:"flex h-8 items-center space-x-[7px] rounded-lg px-2 text-text-tertiary hover:bg-state-base-hover",children:[(0,i.jsx)(u.RiBookOpenLine,{className:"size-3.5 shrink-0"}),(0,i.jsx)("div",{className:"system-sm-regular grow truncate",children:b("overview.apiInfo.doc",{ns:"appOverview"})}),(0,i.jsx)(u.RiArrowRightUpLine,{className:"size-3.5 shrink-0"})]})})]})}),by=m.memo(({expand:a,apiEnabled:b})=>{let{t:c}=(0,w.useTranslation)(),[d,e]=(0,m.useState)(!1);return(0,i.jsx)("div",{className:"p-3 pt-2",children:(0,i.jsxs)(a6.PortalToFollowElem,{open:d,onOpenChange:e,placement:"top-start",offset:{mainAxis:4,crossAxis:-4},children:[(0,i.jsx)(a6.PortalToFollowElemTrigger,{className:"w-full",onClick:()=>{e(!d)},children:(0,i.jsxs)("div",{className:(0,r.cn)("relative flex h-8 cursor-pointer items-center gap-2 rounded-lg border border-components-panel-border px-3",!a&&"w-8 justify-center",d?"bg-state-base-hover":"hover:bg-state-base-hover"),children:[(0,i.jsx)(bv.ApiAggregate,{className:"size-4 shrink-0 text-text-secondary"}),a&&(0,i.jsx)("div",{className:"system-sm-medium grow text-text-secondary",children:c("appMenus.apiAccess",{ns:"common"})}),(0,i.jsx)(Y.default,{className:(0,r.cn)("shrink-0",!a&&"absolute -right-px -top-px"),color:b?"green":"yellow"})]})}),(0,i.jsx)(a6.PortalToFollowElemContent,{className:"z-[10]",children:(0,i.jsx)(bx,{apiEnabled:b})})]})})}),bz={[af.AppModeEnum.CHAT]:"Chatbot",[af.AppModeEnum.COMPLETION]:"Completion",[af.AppModeEnum.AGENT_CHAT]:"Agent",[af.AppModeEnum.ADVANCED_CHAT]:"Chatflow",[af.AppModeEnum.WORKFLOW]:"Workflow"},bA=({detail:a,isMobile:b})=>(0,i.jsxs)(as.default,{className:(0,r.cn)("group/link-item flex h-8 w-full cursor-pointer items-center justify-between rounded-lg px-2 hover:bg-state-base-hover",b&&"justify-center"),href:`/app/${a?.id}/overview`,children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:(0,r.cn)("relative h-6 w-6 rounded-md"),children:(0,i.jsx)(au.default,{size:"tiny",iconType:a.icon_type,icon:a.icon,background:a.icon_background,imageUrl:a.icon_url})}),!b&&(0,i.jsx)("div",{className:(0,r.cn)(" system-sm-medium ml-2 truncate text-text-primary"),children:a?.name||"--"})]}),(0,i.jsx)("div",{className:"system-2xs-medium-uppercase shrink-0 text-text-tertiary group-hover/link-item:hidden",children:bz[a.mode]}),(0,i.jsx)(u.RiArrowRightUpLine,{className:"hidden h-4 w-4 text-text-tertiary group-hover/link-item:block"})]}),bB=m.memo(({relatedApps:a,isMobile:b})=>(0,i.jsx)("div",{className:"w-[320px] rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg-blur p-1 shadow-lg backdrop-blur-[5px]",children:a.map((a,c)=>(0,i.jsx)(bA,{detail:a,isMobile:b},c))})),bC=m.memo(()=>{let{t:a}=(0,w.useTranslation)(),b=(0,aa.useDocLink)();return(0,i.jsxs)("div",{className:"w-[240px] rounded-xl border-[0.5px] border-components-panel-border bg-components-panel-bg-blur p-4",children:[(0,i.jsx)("div",{className:"inline-flex rounded-lg border-[0.5px] border-components-panel-border-subtle bg-background-default-subtle p-2",children:(0,i.jsx)(u.RiApps2AddLine,{className:"size-4 text-text-tertiary"})}),(0,i.jsx)("div",{className:"my-2 text-xs text-text-tertiary",children:a("datasetMenus.emptyTip",{ns:"common"})}),(0,i.jsxs)("a",{className:"mt-2 inline-flex cursor-pointer items-center text-xs text-text-accent",href:b("/use-dify/knowledge/integrate-knowledge-within-application"),target:"_blank",rel:"noopener noreferrer",children:[(0,i.jsx)(u.RiBookOpenLine,{className:"mr-1 size-4 text-text-accent"}),a("datasetMenus.viewDoc",{ns:"common"})]})]})}),bD=m.memo(({expand:a,documentCount:b,relatedApps:c})=>{let{t:d}=(0,w.useTranslation)(),e=c?.total,f=c?.data&&c.data.length>0;return(0,i.jsxs)("div",{className:"flex items-center gap-x-0.5 p-2 pb-0",children:[(0,i.jsxs)("div",{className:"flex grow flex-col px-2 pb-1.5 pt-1",children:[(0,i.jsx)("div",{className:"system-md-semibold-uppercase text-text-secondary",children:b??"--"}),(0,i.jsx)("div",{className:"system-2xs-medium-uppercase text-text-tertiary",children:d("datasetMenus.documents",{ns:"common"})})]}),(0,i.jsx)("div",{className:"py-2 pl-0.5 pr-1.5",children:(0,i.jsx)(s.default,{className:"text-test-divider-regular h-full w-fit"})}),(0,i.jsxs)("div",{className:"flex grow flex-col px-2 pb-1.5 pt-1",children:[(0,i.jsx)("div",{className:"system-md-semibold-uppercase text-text-secondary",children:e??"--"}),(0,i.jsx)(T.default,{position:"top-start",noDecoration:!0,needsDelay:!0,popupContent:f?(0,i.jsx)(bB,{relatedApps:c.data,isMobile:!a}):(0,i.jsx)(bC,{}),children:(0,i.jsxs)("div",{className:"system-2xs-medium-uppercase flex cursor-pointer items-center gap-x-0.5 text-text-tertiary",children:[(0,i.jsx)("span",{children:d("datasetMenus.relatedApp",{ns:"common"})}),(0,i.jsx)(u.RiInformation2Line,{className:"size-3"})]})})]})]})}),bE=m.memo(({relatedApps:a,documentCount:b,expand:c})=>{let d=(0,bi.useDatasetDetailContextWithSelector)(a=>a.dataset?.enable_api);return(0,i.jsxs)(i.Fragment,{children:[c&&(0,i.jsx)(bD,{expand:c,documentCount:b,relatedApps:a}),(0,i.jsx)(by,{expand:c,apiEnabled:d??!1})]})});a.s(["default",0,bE],624863);let bF=({navigation:a})=>{let{t:b}=(0,w.useTranslation)(),c=(0,bi.useDatasetDetailContextWithSelector)(a=>a.dataset),{data:d}=(0,bn.useDatasetRelatedApps)(c.id),[e,f]=(0,m.useState)(!1),g=(0,m.useRef)(e),h=(0,m.useCallback)(a=>{f(a),g.current=a},[f]),j=(0,m.useCallback)(()=>{h(!g.current)},[h]),k=c.icon_info||{icon:"ð",icon_type:"emoji",icon_background:"#FFF4ED",icon_url:""},l="external"===c.provider,{formatIndexingTechniqueAndMethod:n}=(0,bj.useKnowledge)();return c?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"fixed left-2 top-2 z-20",children:(0,i.jsxs)(a6.PortalToFollowElem,{open:e,onOpenChange:h,placement:"bottom-start",offset:{mainAxis:-41},children:[(0,i.jsx)(a6.PortalToFollowElemTrigger,{onClick:j,children:(0,i.jsxs)("div",{className:(0,r.cn)("flex cursor-pointer items-center rounded-[10px] border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg p-1 shadow-lg backdrop-blur-sm hover:bg-background-default-hover",e&&"bg-background-default-hover"),children:[(0,i.jsx)(au.default,{size:"small",iconType:k.icon_type,icon:k.icon,background:k.icon_background,imageUrl:k.icon_url}),(0,i.jsx)(u.RiMenuLine,{className:"size-4 text-text-tertiary"})]})}),(0,i.jsx)(a6.PortalToFollowElemContent,{className:"z-50",children:(0,i.jsxs)("div",{className:"relative w-[216px] rounded-xl border-[0.5px] border-components-panel-border bg-background-default-subtle shadow-lg",children:[(0,i.jsx)(bl.default,{className:"-left-5 top-[-22px] opacity-15"}),(0,i.jsxs)("div",{className:"flex flex-col gap-y-2 p-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)(au.default,{size:"medium",iconType:k.icon_type,icon:k.icon,background:k.icon_background,imageUrl:k.icon_url}),(0,i.jsx)(bt,{expand:!0})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-y-1 pb-0.5",children:[(0,i.jsx)("div",{className:"system-md-semibold truncate text-text-secondary",title:c.name,children:c.name}),(0,i.jsxs)("div",{className:"system-2xs-medium-uppercase text-text-tertiary",children:[l&&b("externalTag",{ns:"dataset"}),!!(!l&&c.doc_form&&c.indexing_technique)&&(0,i.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,i.jsx)("span",{children:b(`chunkingMode.${bk.DOC_FORM_TEXT[c.doc_form]}`,{ns:"dataset"})}),(0,i.jsx)("span",{children:n(c.indexing_technique,c.retrieval_model_dict?.search_method)})]})]})]}),!!c.description&&(0,i.jsx)("p",{className:"system-xs-regular line-clamp-3 text-text-tertiary first-letter:capitalize",children:c.description})]}),(0,i.jsx)("div",{className:"px-4 py-2",children:(0,i.jsx)(s.default,{type:"horizontal",bgStyle:"gradient",className:"my-0 h-px bg-gradient-to-r from-divider-subtle to-background-gradient-mask-transparent"})}),(0,i.jsx)("nav",{className:"flex min-h-[200px] grow flex-col gap-y-0.5 px-3 py-2",children:a.map((a,b)=>(0,i.jsx)(bg,{mode:"expand",iconMap:{selected:a.selectedIcon,normal:a.icon},name:a.name,href:a.href,disabled:!!a.disabled},b))}),(0,i.jsx)(bE,{relatedApps:d,expand:!0,documentCount:c.document_count})]})})]})})}):null};var bG=a.i(56328);let bH=["ctrl","B"],bI=({expand:a})=>{let{t:b}=(0,w.useTranslation)();return(0,i.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,i.jsx)("span",{className:"system-xs-medium px-0.5 text-text-secondary",children:b(a?"sidebar.collapseSidebar":"sidebar.expandSidebar",{ns:"layout"})}),(0,i.jsx)(bG.default,{keys:bH,textColor:"secondary"})]})},bJ=m.memo(({expand:a,handleToggle:b,className:c})=>(0,i.jsx)(T.default,{popupContent:(0,i.jsx)(bI,{expand:a}),popupClassName:"p-1.5 rounded-lg",position:"right",children:(0,i.jsx)(z.default,{size:"small",onClick:b,className:(0,r.cn)("rounded-full px-1",c),children:a?(0,i.jsx)(u.RiArrowLeftSLine,{className:"size-4"}):(0,i.jsx)(u.RiArrowRightSLine,{className:"size-4"})})})),bK=m.memo(({navigation:a,extraInfo:b,iconType:c="app"})=>{let{appSidebarExpand:d,setAppSidebarExpand:e}=(0,o.useStore)((0,n.useShallow)(a=>({appSidebarExpand:a.appSidebarExpand,setAppSidebarExpand:a.setAppSidebarExpand}))),f=m.useRef(null),g=(0,q.default)()===q.MediaType.mobile,h="expand"===d,u=(0,m.useCallback)(()=>{e("expand"===d?"collapse":"expand")},[d,e]),v=(0,j.useHover)(f),w=(0,l.usePathname)(),x=w.endsWith("/workflow"),y=w.endsWith("/pipeline"),z="true"===localStorage.getItem("workflow-canvas-maximize"),[A,B]=(0,m.useState)(z),{eventEmitter:C}=(0,p.useEventEmitterContextContext)();return(C?.useSubscription(a=>{a?.type==="workflow-canvas-maximize"&&B(a.payload)}),(0,m.useEffect)(()=>{d&&(localStorage.setItem("app-detail-collapse-or-expand",d),e(d))},[d,e]),(0,k.useKeyPress)(`${(0,t.getKeyboardKeyCodeBySystem)("ctrl")}.b`,a=>{a.preventDefault(),u()},{exactMatch:!0,useCapture:!0}),x&&A)?(0,i.jsx)("div",{className:"flex w-0 shrink-0",children:(0,i.jsx)(bh,{navigation:a})}):y&&A?(0,i.jsx)("div",{className:"flex w-0 shrink-0",children:(0,i.jsx)(bF,{navigation:a})}):(0,i.jsxs)("div",{ref:f,className:(0,r.cn)("flex shrink-0 flex-col border-r border-divider-burn bg-background-default-subtle transition-all",h?"w-[216px]":"w-14"),children:[(0,i.jsxs)("div",{className:(0,r.cn)("shrink-0",h?"p-2":"p-1"),children:["app"===c&&(0,i.jsx)(bf,{expand:h}),"app"!==c&&(0,i.jsx)(bu,{expand:h})]}),(0,i.jsxs)("div",{className:"relative px-4 py-2",children:[(0,i.jsx)(s.default,{type:"horizontal",bgStyle:h?"gradient":"solid",className:(0,r.cn)("my-0 h-px",h?"bg-gradient-to-r from-divider-subtle to-background-gradient-mask-transparent":"bg-divider-subtle")}),!g&&v&&(0,i.jsx)(bJ,{className:"absolute -right-3 top-[-3.5px] z-20",expand:h,handleToggle:u})]}),(0,i.jsx)("nav",{className:(0,r.cn)("flex grow flex-col gap-y-0.5",h?"px-3 py-2":"p-3"),children:a.map((a,b)=>(0,i.jsx)(bg,{mode:d,iconMap:{selected:a.selectedIcon,normal:a.icon},name:a.name,href:a.href,disabled:!!a.disabled},b))}),"app"!==c&&b&&b(d)]})});a.s(["default",0,bK],45272)}];

//# sourceMappingURL=app_components_05de9374._.js.map