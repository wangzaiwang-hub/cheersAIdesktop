module.exports=[931413,257692,a=>{"use strict";var b=a.i(608061),c=a.i(57843),d=a.i(632789),e=a.i(263636),f=a.i(527344),g=a.i(481366);a.i(752298);var h=a.i(693025),i=a.i(365866),j=a.i(252813),k=a.i(136403);let l=({disabled:a,collection:d,tool:e,isBuiltIn:g,isModel:h})=>{let l=(0,j.useLocale)(),m=(0,k.getLanguage)(l),[n,o]=(0,c.useState)(!1);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:(0,f.cn)("bg-components-panel-item-bg cursor-pointer rounded-xl border-[0.5px] border-components-panel-border-subtle px-4 py-3 shadow-xs hover:bg-components-panel-on-panel-item-bg-hover",a&&"!cursor-not-allowed opacity-50"),onClick:()=>!a&&o(!0),children:[(0,b.jsx)("div",{className:"system-md-semibold pb-0.5 text-text-secondary",children:e.label[m]}),(0,b.jsx)("div",{className:"system-xs-regular line-clamp-2 text-text-tertiary",title:e.description[m],children:e.description[m]})]}),n&&(0,b.jsx)(i.default,{showBackButton:!0,collection:d,toolName:e.name,readonly:!0,onHide:()=>{o(!1)},isBuiltIn:g,isModel:h})]})};a.s(["default",0,l],257692);var m=a.i(844137);let n=({detail:a})=>{let{t:d}=(0,h.useTranslation)(),e=a.declaration?.tool?.identity,f=e?`${a.plugin_id}/${e.name}`:"",{data:g=[]}=(0,m.useAllToolProviders)(),i=(0,c.useMemo)(()=>g.find(a=>a.name===f),[g,f]),{data:j}=(0,m.useBuiltinTools)(f);return f&&j&&i?(0,b.jsxs)("div",{className:"px-4 pb-4 pt-2",children:[(0,b.jsx)("div",{className:"mb-1 py-1",children:(0,b.jsx)("div",{className:"system-sm-semibold-uppercase mb-1 flex h-6 items-center justify-between text-text-secondary",children:d("detailPanel.actionNum",{ns:"plugin",num:j.length,action:j.length>1?"actions":"action"})})}),(0,b.jsx)("div",{className:"flex flex-col gap-2",children:j.map(c=>(0,b.jsx)(l,{disabled:!1,collection:i,tool:c,isBuiltIn:!0,isModel:!1},`${a.plugin_id}${c.name}`))})]}):null};var o=a.i(162807),p=a.i(429150),q=a.i(175809),r=a.i(757801),s=a.i(970039),t=a.i(843990),u=a.i(18039);let v=({provider:a,detail:e,onHide:g})=>{let i=(0,o.useRenderI18nObject)(),{t:j}=(0,h.useTranslation)(),k=(0,c.useMemo)(()=>{let a=[];return e.output_schema&&e.output_schema.properties?(Object.keys(e.output_schema.properties).forEach(b=>{let c=e.output_schema.properties[b];a.push({name:b,type:"array"===c.type?`Array[${c.items?.type?c.items.type.slice(0,1).toLocaleUpperCase()+c.items.type.slice(1):"Unknown"}]`:`${c.type?c.type.slice(0,1).toLocaleUpperCase()+c.type.slice(1):"Unknown"}`,description:c.description})}),a):[]},[e.output_schema]);return(0,b.jsx)(d.default,{isOpen:!0,clickOutsideNotOpen:!1,onClose:g,footer:null,mask:!1,positionCenter:!1,panelClassName:(0,f.cn)("mb-2 mr-2 mt-[64px] !w-[420px] !max-w-[420px] justify-start rounded-2xl border-[0.5px] border-components-panel-border !bg-components-panel-bg !p-0 shadow-xl"),children:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"relative border-b border-divider-subtle p-4 pb-3",children:[(0,b.jsx)("div",{className:"absolute right-3 top-3",children:(0,b.jsx)(q.default,{onClick:g,children:(0,b.jsx)(p.RiCloseLine,{className:"h-4 w-4"})})}),(0,b.jsxs)("div",{className:"system-xs-semibold-uppercase mb-2 flex cursor-pointer items-center gap-1 text-text-accent-secondary",onClick:g,children:[(0,b.jsx)(p.RiArrowLeftLine,{className:"h-4 w-4"}),"BACK"]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(s.default,{size:"tiny",className:"h-6 w-6",src:`${u.API_PREFIX}/workspaces/current/plugin/icon?tenant_id=${a.tenant_id}&filename=${a.icon}`}),(0,b.jsx)("div",{className:"",children:i(a.label)})]}),(0,b.jsx)("div",{className:"system-md-semibold mt-1 text-text-primary",children:i(e.identity.label)}),(0,b.jsx)(t.default,{className:"mt-3",text:i(e.description),descriptionLineRows:2})]}),(0,b.jsx)("div",{className:"h-full",children:(0,b.jsxs)("div",{className:"flex h-full flex-col overflow-y-auto",children:[(0,b.jsx)("div",{className:"system-sm-semibold-uppercase p-4 pb-1 text-text-primary",children:j("setBuiltInTools.parameters",{ns:"tools"})}),(0,b.jsx)("div",{className:"px-4",children:e.parameters.length>0&&(0,b.jsx)("div",{className:"space-y-1 py-2",children:e.parameters.map((a,c)=>{var d;return(0,b.jsxs)("div",{className:"py-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"code-sm-semibold text-text-secondary",children:i(a.label)}),(0,b.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:"number-input"===(d=a.type)?j("setBuiltInTools.number",{ns:"tools"}):"text-input"===d?j("setBuiltInTools.string",{ns:"tools"}):"checkbox"===d?"boolean":"file"===d?j("setBuiltInTools.file",{ns:"tools"}):"array[tools]"===d?"multiple-tool-select":d}),a.required&&(0,b.jsx)("div",{className:"system-xs-medium text-text-warning-secondary",children:j("setBuiltInTools.required",{ns:"tools"})})]}),a.human_description&&(0,b.jsx)("div",{className:"system-xs-regular mt-0.5 text-text-tertiary",children:i(a.human_description)})]},c)})})}),e.output_schema&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"px-4",children:(0,b.jsx)(r.default,{className:"!mt-2"})}),(0,b.jsx)("div",{className:"system-sm-semibold-uppercase p-4 pb-1 text-text-primary",children:"OUTPUT"}),k.length>0&&(0,b.jsx)("div",{className:"space-y-1 px-4 py-2",children:k.map((a,c)=>(0,b.jsxs)("div",{className:"py-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"code-sm-semibold text-text-secondary",children:a.name}),(0,b.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:a.type})]}),a.description&&(0,b.jsx)("div",{className:"system-xs-regular mt-0.5 text-text-tertiary",children:a.description})]},c))})]})]})})]})})},w=({provider:a,detail:d})=>{let e=(0,o.useRenderI18nObject)(),[g,h]=(0,c.useState)(!1);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:(0,f.cn)("bg-components-panel-item-bg mb-2 cursor-pointer rounded-xl border-[0.5px] border-components-panel-border-subtle px-4 py-3 shadow-xs hover:bg-components-panel-on-panel-item-bg-hover"),onClick:()=>h(!0),children:[(0,b.jsx)("div",{className:"system-md-semibold pb-0.5 text-text-secondary",children:e(d.identity.label)}),(0,b.jsx)("div",{className:"system-xs-regular line-clamp-2 text-text-tertiary",title:e(d.description),children:e(d.description)})]}),g&&(0,b.jsx)(v,{provider:a,detail:d,onHide:()=>h(!1)})]})};var x=a.i(746077);let y=({detail:a})=>{let{t:d}=(0,h.useTranslation)(),e=a.declaration.agent_strategy.identity,f=`${a.plugin_id}/${e.name}`,{data:g}=(0,x.useStrategyProviderDetail)(f),i=(0,c.useMemo)(()=>({...g?.declaration.identity,tenant_id:a.tenant_id}),[a.tenant_id,g?.declaration.identity]),j=(0,c.useMemo)(()=>g?g.declaration.strategies:[],[g]);return g?(0,b.jsxs)("div",{className:"px-4 pb-4 pt-2",children:[(0,b.jsx)("div",{className:"mb-1 py-1",children:(0,b.jsx)("div",{className:"system-sm-semibold-uppercase mb-1 flex h-6 items-center justify-between text-text-secondary",children:d("detailPanel.strategyNum",{ns:"plugin",num:j.length,strategy:j.length>1?"strategies":"strategy"})})}),(0,b.jsx)("div",{className:"flex flex-col gap-2",children:j.map(a=>(0,b.jsx)(w,{provider:i,detail:a},`${a.identity.provider}${a.identity.name}`))})]}):null};var z=a.i(674766),A=a.i(599656);let B=({detail:a})=>{let{t:d}=(0,h.useTranslation)(),{data:e}=(0,A.useDataSourceList)(!0),f=(0,c.useMemo)(()=>{let b=e?.find(b=>b.plugin_id===a.plugin_id);if(b)return(0,z.transformDataSourceToTool)(b)},[a.plugin_id,e]),g=[];return g&&f?(0,b.jsx)("div",{className:"px-4 pb-4 pt-2",children:(0,b.jsx)("div",{className:"mb-1 py-1",children:(0,b.jsx)("div",{className:"system-sm-semibold-uppercase mb-1 flex h-6 items-center justify-between text-text-secondary",children:d("detailPanel.actionNum",{ns:"plugin",num:g.length,action:g.length>1?"actions":"action"})})})}):null};var C=a.i(477069),D=a.i(497746),E=a.i(114715),F=a.i(483664),G=a.i(997472),H=a.i(848636),I=a.i(528698),J=a.i(749249),K=a.i(41511);let L="endpoints";var M=a.i(875067),N=a.i(42550);a.i(849888);var O=a.i(547252),P=a.i(81492),Q=a.i(854867),R=a.i(909795),S=a.i(524526);let T=c.memo(({formSchemas:a,defaultValues:e={},onCancel:i,onSaved:j,pluginDetail:k})=>{let l=(0,o.useRenderI18nObject)(),{t:m}=(0,h.useTranslation)(),n=Object.keys(e).length>0?e:(a=>{let b={};for(let c of a)void 0!==c.default&&(b[c.name]=c.default);return b})(a),[r,s]=c.useState(n);return(0,b.jsx)(d.default,{isOpen:!0,clickOutsideNotOpen:!1,onClose:i,footer:null,mask:!0,positionCenter:!1,panelClassName:(0,f.cn)("mb-2 mr-2 mt-[64px] !w-[420px] !max-w-[420px] justify-start rounded-2xl border-[0.5px] border-components-panel-border !bg-components-panel-bg !p-0 shadow-xl"),children:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"p-4 pb-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"system-xl-semibold text-text-primary",children:m("detailPanel.endpointModalTitle",{ns:"plugin"})}),(0,b.jsx)(q.default,{onClick:i,children:(0,b.jsx)(p.RiCloseLine,{className:"h-4 w-4"})})]}),(0,b.jsx)("div",{className:"system-xs-regular mt-0.5 text-text-tertiary",children:m("detailPanel.endpointModalDesc",{ns:"plugin"})}),(0,b.jsx)(g.ReadmeEntrance,{pluginDetail:k,className:"px-0 pt-3"})]}),(0,b.jsxs)("div",{className:"grow overflow-y-auto",children:[(0,b.jsx)("div",{className:"px-4 py-2",children:(0,b.jsx)(S.default,{value:r,onChange:a=>{s(a)},formSchemas:a,isEditMode:!0,showOnVariableMap:{},validating:!1,inputClassName:"bg-components-input-bg-normal hover:bg-components-input-bg-hover",fieldMoreInfo:a=>a.url?(0,b.jsxs)("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"body-xs-regular inline-flex items-center text-text-accent-secondary",children:[m("howToGet",{ns:"tools"}),(0,b.jsx)(p.RiArrowRightUpLine,{className:"ml-1 h-3 w-3"})]}):null})}),(0,b.jsx)("div",{className:(0,f.cn)("flex justify-end p-4 pt-0"),children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(R.default,{onClick:i,children:m("operation.cancel",{ns:"common"})}),(0,b.jsx)(R.default,{variant:"primary",onClick:()=>{for(let b of a)if(b.required&&!r[b.name])return void E.default.notify({type:"error",message:m("errorMsg.fieldRequired",{ns:"common",field:"string"==typeof b.label?b.label:l(b.label)})});let b={...r};a.forEach(a=>{if("boolean"===a.type&&void 0!==b[a.name]){let c=b[a.name];"string"==typeof c?b[a.name]="true"===c||"1"===c||"True"===c:"number"==typeof c?b[a.name]=1===c:"boolean"==typeof c&&(b[a.name]=c)}}),j(b)},children:m("operation.save",{ns:"common"})})]})})]})]})})}),U={type:a.i(933988).FormTypeEnum.textInput,name:"name",label:{en_US:"Endpoint Name",zh_Hans:"端点名称",ja_JP:"エンドポイント名",pt_BR:"Nome do ponto final"},placeholder:{en_US:"Endpoint Name",zh_Hans:"端点名称",ja_JP:"エンドポイント名",pt_BR:"Nome do ponto final"},required:!0,default:"",help:null},V=({pluginDetail:a,data:d,handleChange:e})=>{let{t:f}=(0,h.useTranslation)(),[g,i]=(0,c.useState)(d.enabled),j=d.id,[k,{setTrue:l,setFalse:m}]=(0,D.useBoolean)(!1),{mutate:n}=(({onSuccess:a,onError:b})=>(0,H.useMutation)({mutationKey:[L,"enable"],mutationFn:a=>(0,K.post)("/workspaces/current/endpoints/enable",{body:{endpoint_id:a}}),onSuccess:a,onError:b}))({onSuccess:async()=>{await e()},onError:()=>{E.default.notify({type:"error",message:f("actionMsg.modifiedUnsuccessfully",{ns:"common"})}),i(!1)}}),{mutate:o}=(({onSuccess:a,onError:b})=>(0,H.useMutation)({mutationKey:[L,"disable"],mutationFn:a=>(0,K.post)("/workspaces/current/endpoints/disable",{body:{endpoint_id:a}}),onSuccess:a,onError:b}))({onSuccess:async()=>{await e(),m()},onError:()=>{E.default.notify({type:"error",message:f("actionMsg.modifiedUnsuccessfully",{ns:"common"})}),i(!1)}}),[r,{setTrue:s,setFalse:t}]=(0,D.useBoolean)(!1),{mutate:u}=(({onSuccess:a,onError:b})=>(0,H.useMutation)({mutationKey:[L,"delete"],mutationFn:a=>(0,K.post)("/workspaces/current/endpoints/delete",{body:{endpoint_id:a}}),onSuccess:a,onError:b}))({onSuccess:async()=>{await e(),t()},onError:()=>{E.default.notify({type:"error",message:f("actionMsg.modifiedUnsuccessfully",{ns:"common"})})}}),[v,{setTrue:w,setFalse:x}]=(0,D.useBoolean)(!1),y=(0,c.useMemo)(()=>(0,G.toolCredentialToFormSchemas)([U,...d.declaration.settings]),[d.declaration.settings]),z=(0,c.useMemo)(()=>{let a={name:d.name,...d.settings};return(0,G.addDefaultValue)(a,y)},[d.name,d.settings,y]),{mutate:A}=(({onSuccess:a,onError:b})=>(0,H.useMutation)({mutationKey:[L,"update"],mutationFn:a=>{let{endpointID:b,state:c}=a,d=c.name;return delete c.name,(0,K.post)("/workspaces/current/endpoints/update",{body:{endpoint_id:b,settings:c,name:d}})},onSuccess:a,onError:b}))({onSuccess:async()=>{await e(),x()},onError:()=>{E.default.notify({type:"error",message:f("actionMsg.modifiedUnsuccessfully",{ns:"common"})})}}),[B,C]=(0,c.useState)(!1);(0,c.useEffect)(()=>{if(B){let a=setTimeout(()=>{C(!1)},2e3);return()=>{clearTimeout(a)}}},[B]);let I=B?O.CopyCheck:p.RiClipboardLine;return(0,b.jsxs)("div",{className:"rounded-xl bg-background-section-burn p-0.5",children:[(0,b.jsxs)("div",{className:"group rounded-[10px] border-[0.5px] border-components-panel-border bg-components-panel-on-panel-item-bg p-2.5 pl-3",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsxs)("div",{className:"system-md-semibold mb-1 flex h-6 grow items-center gap-1 text-text-secondary",children:[(0,b.jsx)(p.RiLoginCircleLine,{className:"h-4 w-4"}),(0,b.jsx)("div",{children:d.name})]}),(0,b.jsxs)("div",{className:"hidden items-center group-hover:flex",children:[(0,b.jsx)(q.default,{onClick:w,children:(0,b.jsx)(p.RiEditLine,{className:"h-4 w-4"})}),(0,b.jsx)(q.default,{onClick:s,className:"text-text-tertiary hover:bg-state-destructive-hover hover:text-text-destructive",children:(0,b.jsx)(p.RiDeleteBinLine,{className:"h-4 w-4"})})]})]}),d.declaration.endpoints.filter(a=>!a.hidden).map((a,c)=>(0,b.jsxs)("div",{className:"flex h-6 items-center",children:[(0,b.jsx)("div",{className:"system-xs-regular w-12 shrink-0 text-text-tertiary",children:a.method}),(0,b.jsxs)("div",{className:"group/item system-xs-regular flex grow items-center truncate text-text-secondary",children:[(0,b.jsx)("div",{title:`${d.url}${a.path}`,className:"truncate",children:`${d.url}${a.path}`}),(0,b.jsx)(F.default,{popupContent:f(`operation.${B?"copied":"copy"}`,{ns:"common"}),position:"top",children:(0,b.jsx)(q.default,{className:"ml-2 hidden shrink-0 group-hover/item:flex",onClick:()=>{var b;return b=`${d.url}${a.path}`,void((0,M.default)(b),C(!0))},children:(0,b.jsx)(I,{className:"h-3.5 w-3.5 text-text-tertiary"})})})]})]},c))]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 pl-3",children:[g&&(0,b.jsxs)("div",{className:"system-xs-semibold-uppercase flex items-center gap-1 text-util-colors-green-green-600",children:[(0,b.jsx)(Q.default,{color:"green"}),f("detailPanel.serviceOk",{ns:"plugin"})]}),!g&&(0,b.jsxs)("div",{className:"system-xs-semibold-uppercase flex items-center gap-1 text-text-tertiary",children:[(0,b.jsx)(Q.default,{color:"gray"}),f("detailPanel.disabled",{ns:"plugin"})]}),(0,b.jsx)(P.default,{className:"ml-3",defaultValue:g,onChange:a=>{a?(i(!0),n(j)):(i(!1),l())},size:"sm"})]}),k&&(0,b.jsx)(N.default,{isShow:!0,title:f("detailPanel.endpointDisableTip",{ns:"plugin"}),content:(0,b.jsx)("div",{children:f("detailPanel.endpointDisableContent",{ns:"plugin",name:d.name})}),onCancel:()=>{m(),i(!0)},onConfirm:()=>o(j)}),r&&(0,b.jsx)(N.default,{isShow:!0,title:f("detailPanel.endpointDeleteTip",{ns:"plugin"}),content:(0,b.jsx)("div",{children:f("detailPanel.endpointDeleteContent",{ns:"plugin",name:d.name})}),onCancel:t,onConfirm:()=>u(j)}),v&&(0,b.jsx)(T,{formSchemas:y,defaultValues:z,onCancel:x,onSaved:a=>A({endpointID:j,state:a}),pluginDetail:a})]})},W=({detail:a})=>{let d,e,{t:g}=(0,h.useTranslation)(),i=(0,j.useDocLink)(),k=a.plugin_unique_identifier,l=a.declaration.endpoint,m=a.declaration.tool,{data:n}=(d=a.plugin_id,(0,I.useQuery)({queryKey:[L,"list",d],queryFn:()=>(0,K.get)("/workspaces/current/endpoints/list/plugin",{params:{plugin_id:d,page:1,page_size:100}})})),o=(e=(0,J.useQueryClient)(),a=>{e.invalidateQueries({queryKey:[L,"list",a]})}),[r,{setTrue:s,setFalse:t}]=(0,D.useBoolean)(!1),u=(0,c.useMemo)(()=>(0,G.toolCredentialToFormSchemas)([U,...l.settings]),[l.settings]),{mutate:v}=(({onSuccess:a,onError:b})=>(0,H.useMutation)({mutationKey:[L,"create"],mutationFn:a=>{let{pluginUniqueID:b,state:c}=a,d=c.name;return delete c.name,(0,K.post)("/workspaces/current/endpoints/create",{body:{plugin_unique_identifier:b,settings:c,name:d}})},onSuccess:a,onError:b}))({onSuccess:async()=>{await o(a.plugin_id),t()},onError:()=>{E.default.notify({type:"error",message:g("actionMsg.modifiedUnsuccessfully",{ns:"common"})})}});return n?(0,b.jsxs)("div",{className:(0,f.cn)("border-divider-subtle px-4 py-2",m&&"border-t"),children:[(0,b.jsxs)("div",{className:"system-sm-semibold-uppercase mb-1 flex h-6 items-center justify-between text-text-secondary",children:[(0,b.jsxs)("div",{className:"flex items-center gap-0.5",children:[g("detailPanel.endpoints",{ns:"plugin"}),(0,b.jsx)(F.default,{position:"right",popupClassName:"w-[240px] p-4 rounded-xl bg-components-panel-bg-blur border-[0.5px] border-components-panel-border",popupContent:(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg border-[0.5px] border-components-panel-border-subtle bg-background-default-subtle",children:(0,b.jsx)(p.RiApps2AddLine,{className:"h-4 w-4 text-text-tertiary"})}),(0,b.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:g("detailPanel.endpointsTip",{ns:"plugin"})}),(0,b.jsx)("a",{href:i("/develop-plugin/getting-started/getting-started-dify-plugin"),target:"_blank",rel:"noopener noreferrer",children:(0,b.jsxs)("div",{className:"system-xs-regular inline-flex cursor-pointer items-center gap-1 text-text-accent",children:[(0,b.jsx)(p.RiBookOpenLine,{className:"h-3 w-3"}),g("detailPanel.endpointsDocLink",{ns:"plugin"})]})})]})})]}),(0,b.jsx)(q.default,{onClick:s,children:(0,b.jsx)(p.RiAddLine,{className:"h-4 w-4"})})]}),0===n.endpoints.length&&(0,b.jsx)("div",{className:"system-xs-regular mb-1 flex justify-center rounded-[10px] bg-background-section p-3 text-text-tertiary",children:g("detailPanel.endpointsEmpty",{ns:"plugin"})}),(0,b.jsx)("div",{className:"flex flex-col gap-2",children:n.endpoints.map((c,d)=>(0,b.jsx)(V,{data:c,handleChange:()=>o(a.plugin_id),pluginDetail:a},d))}),r&&(0,b.jsx)(T,{formSchemas:u,onCancel:t,onSaved:a=>v({pluginUniqueID:k,state:a}),pluginDetail:a})]}):null};var X=a.i(912626),Y=a.i(34976),Z=a.i(645594);let $=({detail:a})=>{let{t:c}=(0,h.useTranslation)(),{data:d}=(0,Z.useModelProviderModelList)(`${a.plugin_id}/${a.declaration.model.provider}`);return d?(0,b.jsxs)("div",{className:"px-4 py-2",children:[(0,b.jsx)("div",{className:"system-sm-semibold-uppercase mb-1 flex h-6 items-center text-text-secondary",children:c("detailPanel.modelNum",{ns:"plugin",num:d.data.length})}),(0,b.jsx)("div",{className:"flex flex-col",children:d.data.map(a=>(0,b.jsxs)("div",{className:"flex h-6 items-center py-1",children:[(0,b.jsx)(X.default,{className:"mr-2 shrink-0",provider:a.provider,modelName:a.model}),(0,b.jsx)(Y.default,{className:"system-md-regular grow text-text-secondary",modelItem:a,showModelType:!0,showMode:!0,showContextSize:!0})]},a.model))})]}):null};var _=a.i(420338),aa=a.i(579451),ab=a.i(701458),ac=a.i(970854),ad=a.i(28877),ae=a.i(568852);let af=a=>{let b={type:Array.isArray(a.type)?a.type[0]:a.type||"string"};return a.description&&(b.description=a.description),a.properties&&(b.properties=Object.entries(a.properties).reduce((a,[b,c])=>({...a,[b]:af(c)}),{})),a.required&&(b.required=a.required),a.items&&(b.items=af(a.items)),a.enum&&(b.enum=a.enum),b},ag=a=>{let{eventInfo:c,providerInfo:e,onClose:g}=a,i=(0,ab.useLanguage)(),{t:j}=(0,h.useTranslation)(),k=(0,G.triggerEventParametersToFormSchemas)(c.parameters),l=c.output_schema?.properties?Object.entries(c.output_schema.properties).map(([a,b])=>({name:a,field:af(b),required:c.output_schema.required?.includes(a)||!1})):[];return(0,b.jsxs)(d.default,{isOpen:!0,clickOutsideNotOpen:!1,onClose:g,footer:null,mask:!1,positionCenter:!1,panelClassName:(0,f.cn)("mb-2 mr-2 mt-[64px] !w-[420px] !max-w-[420px] justify-start rounded-2xl border-[0.5px] border-components-panel-border !bg-components-panel-bg !p-0 shadow-xl"),children:[(0,b.jsxs)("div",{className:"relative border-b border-divider-subtle p-4 pb-3",children:[(0,b.jsx)("div",{className:"absolute right-3 top-3",children:(0,b.jsx)(q.default,{onClick:g,children:(0,b.jsx)(p.RiCloseLine,{className:"h-4 w-4"})})}),(0,b.jsxs)("div",{className:"system-xs-semibold-uppercase mb-2 flex cursor-pointer items-center gap-1 text-text-accent-secondary",onClick:g,children:[(0,b.jsx)(p.RiArrowLeftLine,{className:"h-4 w-4"}),j("detailPanel.operation.back",{ns:"plugin"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(s.default,{size:"tiny",className:"h-6 w-6",src:e.icon}),(0,b.jsx)(ad.default,{packageNameClassName:"w-auto",orgName:e.author,packageName:e.name.split("/").pop()||""})]}),(0,b.jsx)("div",{className:"system-md-semibold mt-1 text-text-primary",children:c?.identity?.label[i]}),(0,b.jsx)(t.default,{className:"mb-2 mt-3 h-auto",text:c.description[i],descriptionLineRows:2})]}),(0,b.jsxs)("div",{className:"flex h-full flex-col gap-2 overflow-y-auto px-4 pb-2 pt-4",children:[(0,b.jsx)("div",{className:"system-sm-semibold-uppercase text-text-secondary",children:j("setBuiltInTools.parameters",{ns:"tools"})}),k.length>0?k.map((a,c)=>{var d;return(0,b.jsxs)("div",{className:"py-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"code-sm-semibold text-text-secondary",children:a.label[i]}),(0,b.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:(d=a.type,"number-input"===d?j("setBuiltInTools.number",{ns:"tools"}):"text-input"===d?j("setBuiltInTools.string",{ns:"tools"}):"checkbox"===d?"boolean":"file"===d?j("setBuiltInTools.file",{ns:"tools"}):d)}),a.required&&(0,b.jsx)("div",{className:"system-xs-medium text-text-warning-secondary",children:j("setBuiltInTools.required",{ns:"tools"})})]}),a.description&&(0,b.jsx)("div",{className:"system-xs-regular mt-0.5 text-text-tertiary",children:a.description?.[i]})]},c)}):(0,b.jsx)("div",{className:"system-xs-regular text-text-tertiary",children:j("events.item.noParameters",{ns:"pluginTrigger"})}),(0,b.jsx)(r.default,{className:"mb-2 mt-1 h-px"}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("div",{className:"system-sm-semibold-uppercase text-text-secondary",children:j("events.output",{ns:"pluginTrigger"})}),(0,b.jsx)("div",{className:"relative left-[-7px]",children:l.map(a=>(0,b.jsx)(ae.default,{name:a.name,payload:a.field,required:a.required,rootClassName:"code-sm-semibold text-text-secondary"},a.name))})]})]})]})},ah=({eventInfo:a,providerInfo:d})=>{let{identity:e,description:g}=a,h=(0,ab.useLanguage)(),[i,j]=(0,c.useState)(!1),k=e.label?.[h]??e.label?.en_US??"",l=g?.[h]??g?.en_US??"";return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:(0,f.cn)("bg-components-panel-item-bg cursor-pointer rounded-xl border-[0.5px] border-components-panel-border-subtle px-4 py-3 shadow-xs hover:bg-components-panel-on-panel-item-bg-hover"),onClick:()=>j(!0),children:[(0,b.jsx)("div",{className:"system-md-semibold pb-0.5 text-text-secondary",children:k}),(0,b.jsx)("div",{className:"system-xs-regular line-clamp-2 text-text-tertiary",title:l,children:l})]}),i&&(0,b.jsx)(ag,{eventInfo:a,providerInfo:d,onClose:()=>j(!1)})]})},ai=()=>{let{t:a}=(0,h.useTranslation)(),c=(0,_.usePluginStore)(a=>a.detail),{data:d}=(0,ac.useTriggerProviderInfo)(c?.provider||""),e=d?.events||[];return d&&e.length?(0,b.jsxs)("div",{className:"px-4 pb-4 pt-2",children:[(0,b.jsx)("div",{className:"mb-1 py-1",children:(0,b.jsx)("div",{className:"system-sm-semibold-uppercase mb-1 flex h-6 items-center justify-between text-text-secondary",children:a("events.actionNum",{ns:"pluginTrigger",num:e.length,event:a(`events.${e.length>1?"events":"event"}`,{ns:"pluginTrigger"})})})}),(0,b.jsx)("div",{className:"flex flex-col gap-2",children:e.map(a=>(0,b.jsx)(ah,{eventInfo:a,providerInfo:d},`${c?.plugin_id}${a.identity?.name||""}`))})]}):null};a.s(["default",0,({detail:a,onUpdate:h,onHide:i})=>{let j=(0,c.useCallback)((a=!1)=>{a&&i(),h()},[i,h]),{setDetail:k}=(0,_.usePluginStore)();return((0,c.useEffect)(()=>{k(a?{plugin_id:a.plugin_id,provider:`${a.plugin_id}/${a.declaration.name}`,plugin_unique_identifier:a.plugin_unique_identifier||"",declaration:a.declaration,name:a.name,id:a.id}:void 0)},[a,k]),a)?(0,b.jsx)(d.default,{isOpen:!!a,clickOutsideNotOpen:!1,onClose:i,footer:null,mask:!1,positionCenter:!1,panelClassName:(0,f.cn)("mb-2 mr-2 mt-[64px] !w-[420px] !max-w-[420px] justify-start rounded-2xl border-[0.5px] border-components-panel-border !bg-components-panel-bg !p-0 shadow-xl"),children:a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(C.default,{detail:a,onUpdate:j,onHide:i}),(0,b.jsx)("div",{className:"grow overflow-y-auto",children:(0,b.jsxs)("div",{className:"flex min-h-full flex-col",children:[(0,b.jsxs)("div",{className:"flex-1",children:[a.declaration.category===e.PluginCategoryEnum.trigger&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(aa.SubscriptionList,{pluginDetail:a}),(0,b.jsx)(ai,{})]}),!!a.declaration.tool&&(0,b.jsx)(n,{detail:a}),!!a.declaration.agent_strategy&&(0,b.jsx)(y,{detail:a}),!!a.declaration.endpoint&&(0,b.jsx)(W,{detail:a}),!!a.declaration.model&&(0,b.jsx)($,{detail:a}),!!a.declaration.datasource&&(0,b.jsx)(B,{detail:a})]}),(0,b.jsx)(g.ReadmeEntrance,{pluginDetail:a,className:"mt-auto"})]})})]})}):null}],931413)},2869,a=>{"use strict";var b=a.i(608061),c=a.i(57843),d=a.i(648660),e=a.i(781362),f=a.i(527344);a.s(["default",0,({className:a,itemClassName:g,value:h,onChange:i,options:j})=>{let[k,l]=(0,c.useState)(()=>j.findIndex(a=>a.value===h)),[m,n]=(0,c.useState)({}),{data:o}=(0,e.useInstalledPluginList)(),p=a=>{let b=document.getElementById(`tab-${a}`);if(b){let{offsetLeft:a,offsetWidth:c}=b;n({transform:`translateX(${a}px)`,width:`${c}px`})}};return(0,c.useEffect)(()=>{let a=j.findIndex(a=>a.value===h);l(a),p(a)},[h,j,o?.total]),(0,b.jsxs)("div",{className:(0,f.cn)(a,"relative inline-flex items-center justify-center rounded-[10px] bg-components-segmented-control-bg-normal p-0.5"),children:[(0,b.jsx)("div",{className:"shadows-shadow-xs absolute bottom-0.5 left-0 right-0 top-0.5 rounded-[10px] bg-components-panel-bg transition-transform duration-300 ease-in-out",style:m}),j.map((a,c)=>(0,b.jsxs)("div",{id:`tab-${c}`,className:(0,f.cn)("relative z-10 flex cursor-pointer items-center justify-center gap-1 rounded-[10px] px-2.5 py-1.5 transition-colors duration-300 ease-in-out","system-md-semibold",c===k?"text-text-primary":"text-text-tertiary","function"==typeof g?g(c===k):g),onClick:()=>{c!==k&&(i(a.value),p(c))},children:[a.text,"plugins"===a.value&&(o?.total??0)>0&&(0,b.jsx)(d.default,{size:"s",uppercase:!0,state:d.BadgeState.Default,children:o?.total})]},a.value))]})}])}];

//# sourceMappingURL=app_components_c15fa62c._.js.map