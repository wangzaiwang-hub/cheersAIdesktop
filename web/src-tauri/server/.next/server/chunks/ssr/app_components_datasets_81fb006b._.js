module.exports=[708406,a=>{a.v({bezierCurveIcon:"style-module__25H3Na__bezierCurveIcon",cardLoadingBg:"style-module__25H3Na__cardLoadingBg",cardLoadingIcon:"style-module__25H3Na__cardLoadingIcon",cardLoadingWrapper:"style-module__25H3Na__cardLoadingWrapper",cardWrapper:"style-module__25H3Na__cardWrapper",chartLinkText:"style-module__25H3Na__chartLinkText",commonIcon:"style-module__25H3Na__commonIcon",delModal:"style-module__25H3Na__delModal",docSearchWrapper:"style-module__25H3Na__docSearchWrapper",editTip:"style-module__25H3Na__editTip",footer:"style-module__25H3Na__footer",hashText:"style-module__25H3Na__hashText",hitTitleWrapper:"style-module__25H3Na__hitTitleWrapper",keyword:"style-module__25H3Na__keyword",keywordTitle:"style-module__25H3Na__keywordTitle",keywordWrapper:"style-module__25H3Na__keywordWrapper",listContainer:"style-module__25H3Na__listContainer",numberInfo:"style-module__25H3Na__numberInfo",progress:"style-module__25H3Na__progress",progressInner:"style-module__25H3Na__progressInner",progressLoading:"style-module__25H3Na__progressLoading",progressText:"style-module__25H3Na__progressText",progressTextLoading:"style-module__25H3Na__progressTextLoading",progressWrapper:"style-module__25H3Na__progressWrapper",segContent:"style-module__25H3Na__segContent",segData:"style-module__25H3Na__segData",segDataText:"style-module__25H3Na__segDataText",segModalContent:"style-module__25H3Na__segModalContent",segStatusWrapper:"style-module__25H3Na__segStatusWrapper",segTitleWrapper:"style-module__25H3Na__segTitleWrapper",segWrapper:"style-module__25H3Na__segWrapper",select:"style-module__25H3Na__select",targetIcon:"style-module__25H3Na__targetIcon",typeSquareIcon:"style-module__25H3Na__typeSquareIcon",warningIcon:"style-module__25H3Na__warningIcon",warningWrapper:"style-module__25H3Na__warningWrapper"})},817681,a=>{"use strict";var b=a.i(608061),c=a.i(57843),d=a.i(168799),e=a.i(757801),f=a.i(192875);let g=c.memo(()=>(0,b.jsxs)(f.SkeletonContainer,{className:"gap-y-0 p-1 pb-2",children:[(0,b.jsxs)(f.SkeletonContainer,{className:"gap-y-0.5 px-2 pt-1.5",children:[(0,b.jsxs)(f.SkeletonRow,{className:"py-0.5",children:[(0,b.jsx)(f.SkeletonRectangle,{className:"w-[72px] bg-text-quaternary"}),(0,b.jsx)(f.SkeletonPoint,{className:"opacity-20"}),(0,b.jsx)(f.SkeletonRectangle,{className:"w-24 bg-text-quaternary"}),(0,b.jsx)(f.SkeletonPoint,{className:"opacity-20"}),(0,b.jsx)(f.SkeletonRectangle,{className:"w-24 bg-text-quaternary"}),(0,b.jsxs)(f.SkeletonRow,{className:"grow justify-end gap-1",children:[(0,b.jsx)(f.SkeletonRectangle,{className:"w-12 bg-text-quaternary"}),(0,b.jsx)(f.SkeletonRectangle,{className:"mx-1 w-2 bg-text-quaternary"})]})]}),(0,b.jsx)(f.SkeletonRow,{className:"py-0.5",children:(0,b.jsx)(f.SkeletonRectangle,{className:"w-full bg-text-quaternary"})}),(0,b.jsx)(f.SkeletonRow,{className:"py-0.5",children:(0,b.jsx)(f.SkeletonRectangle,{className:"w-full bg-text-quaternary"})}),(0,b.jsx)(f.SkeletonRow,{className:"py-0.5",children:(0,b.jsx)(f.SkeletonRectangle,{className:"w-2/3 bg-text-quaternary"})})]}),(0,b.jsx)(f.SkeletonContainer,{className:"px-2 py-1.5",children:(0,b.jsxs)(f.SkeletonRow,{children:[(0,b.jsx)(f.SkeletonRectangle,{className:"w-14 bg-text-quaternary"}),(0,b.jsx)(f.SkeletonRectangle,{className:"w-[88px] bg-text-quaternary"}),(0,b.jsx)(f.SkeletonRectangle,{className:"w-14 bg-text-quaternary"})]})})]}));g.displayName="CardSkelton";let h=c.memo(()=>(0,b.jsxs)("div",{className:"relative z-10 flex grow flex-col overflow-y-hidden",children:[(0,b.jsx)("div",{className:"absolute left-0 top-0 z-20 h-full w-full bg-dataset-chunk-list-mask-bg"}),Array.from({length:10}).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-start gap-x-2",children:[(0,b.jsx)(d.default,{className:"mt-3.5 shrink-0",disabled:!0},`${c}-checkbox`),(0,b.jsxs)("div",{className:"grow",children:[(0,b.jsx)(g,{}),9!==c&&(0,b.jsx)("div",{className:"w-full px-3",children:(0,b.jsx)(e.default,{type:"horizontal",className:"my-1 bg-divider-subtle"})})]})]},c))]}));a.s(["CardSkelton",0,g,"default",0,h])},693137,294524,115357,244044,614157,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(57843),e=a.i(555237),f=a.i(968659),g=a.i(909795),h=a.i(105249),i=a.i(573912);let j=new Map;a.s(["default",0,({images:a,initialIndex:k=0,onClose:l})=>{let[m,n]=(0,d.useState)(k),[o,p]=(0,d.useState)(()=>a.reduce((a,b)=>(a[b.url]={status:"loading",width:0,height:0},a),{})),q=(0,d.useRef)(!1),r=(0,d.useCallback)(async a=>{let{url:b}=a;if(!j.has(b))try{let a=await fetch(b);if(!a.ok)throw Error(`Failed to load: ${b}`);let c=await a.blob(),d=URL.createObjectURL(c),e=new Image;e.src=d,e.onload=()=>{q.current&&(j.set(b,{blobUrl:d,status:"loaded",width:e.naturalWidth,height:e.naturalHeight}),p(a=>({...a,[b]:{blobUrl:d,status:"loaded",width:e.naturalWidth,height:e.naturalHeight}})))}}catch{q.current&&p(a=>({...a,[b]:{status:"error",width:0,height:0}}))}},[]);(0,d.useEffect)(()=>(q.current=!0,a.forEach(a=>{r(a)}),()=>{q.current=!1,j.forEach(({blobUrl:a},b)=>{a&&URL.revokeObjectURL(a),j.delete(b)})}),[]);let s=(0,d.useMemo)(()=>a[m],[a,m]),t=(0,d.useCallback)(()=>{0!==m&&n(a=>a-1)},[m]),u=(0,d.useCallback)(()=>{m!==a.length-1&&n(a=>a+1)},[m,a.length]),v=(0,d.useCallback)(a=>{p(b=>({...b,[a.url]:{...b[a.url],status:"loading"}})),r(a)},[r]);return(0,f.useHotkeys)("esc",l),(0,f.useHotkeys)("left",t),(0,f.useHotkeys)("right",u),(0,e.createPortal)((0,b.jsxs)("div",{className:"image-previewer fixed inset-0 z-[10000] flex items-center justify-center bg-background-overlay-fullscreen p-5 pb-4 backdrop-blur-[6px]",onClick:a=>a.stopPropagation(),tabIndex:-1,children:[(0,b.jsxs)("div",{className:"absolute right-6 top-6 z-10 flex cursor-pointer flex-col items-center gap-y-1",children:[(0,b.jsx)(g.default,{variant:"tertiary",onClick:l,className:"size-9 rounded-[10px] p-0",size:"large",children:(0,b.jsx)(c.RiCloseLine,{className:"size-5"})}),(0,b.jsx)("span",{className:"system-2xs-medium-uppercase text-text-tertiary",children:"Esc"})]}),"loading"===o[s.url].status&&(0,b.jsx)(h.default,{type:"app"}),"error"===o[s.url].status&&(0,b.jsxs)("div",{className:"system-sm-regular flex max-w-sm flex-col items-center gap-y-2 text-text-tertiary",children:[(0,b.jsx)("span",{children:`Failed to load image: ${s.url}. Please try again.`}),(0,b.jsx)(g.default,{variant:"secondary",onClick:()=>v(s),className:"size-9 rounded-full p-0",size:"large",children:(0,b.jsx)(c.RiRefreshLine,{className:"size-5"})})]}),"loaded"===o[s.url].status&&(0,b.jsxs)("div",{className:"flex size-full flex-col items-center justify-center gap-y-2",children:[(0,b.jsx)("img",{alt:s.name,src:o[s.url].blobUrl,className:"max-h-[calc(100%-2.5rem)] max-w-full object-contain shadow-lg ring-8 ring-effects-image-frame backdrop-blur-[5px]"}),(0,b.jsxs)("div",{className:"system-sm-regular flex shrink-0 gap-x-2 pb-1 pt-3 text-text-tertiary",children:[(0,b.jsx)("span",{children:s.name}),(0,b.jsx)("span",{children:"·"}),(0,b.jsx)("span",{children:`${o[s.url].width} \xd7  ${o[s.url].height}`}),(0,b.jsx)("span",{children:"·"}),(0,b.jsx)("span",{children:(0,i.formatFileSize)(s.size)})]})]}),(0,b.jsx)(g.default,{variant:"secondary",onClick:t,className:"absolute left-8 top-1/2 z-10 size-9 -translate-y-1/2 rounded-full p-0",disabled:0===m,size:"large",children:(0,b.jsx)(c.RiArrowLeftLine,{className:"size-5"})}),(0,b.jsx)(g.default,{variant:"secondary",onClick:u,className:"absolute right-8 top-1/2 z-10 size-9 -translate-y-1/2 rounded-full p-0",disabled:m===a.length-1,size:"large",children:(0,b.jsx)(c.RiArrowRightLine,{className:"size-5"})})]}),document.body)}],693137);var k=a.i(494261);a.i(752298);var l=a.i(693025),m=a.i(44348),n=a.i(818386),o=a.i(114715),p=a.i(763539);let q=["jpg","jpeg","png","gif"];a.s(["ACCEPT_TYPES",0,q,"DEFAULT_IMAGE_FILE_BATCH_LIMIT",0,5,"DEFAULT_IMAGE_FILE_SIZE_LIMIT",0,2,"DEFAULT_SINGLE_CHUNK_ATTACHMENT_LIMIT",0,10],294524);var r=a.i(282791);let s=(0,d.createContext)(null);function t(a){let b=(0,d.useContext)(s);if(!b)throw Error("Missing FileContext.Provider in the tree");return(0,r.useStore)(b,a)}let u=()=>(0,d.useContext)(s);a.s(["FileContextProvider",0,({children:a,value:c,onChange:e})=>{let f=(0,d.useRef)(void 0);return f.current||(f.current=((a=[],b)=>(0,r.create)(c=>({files:a?[...a]:[],setFiles:a=>{c({files:a}),b?.(a)}})))(c,e)),(0,b.jsx)(s.Provider,{value:f.current,children:a})},"useFileStore",0,u,"useFileStoreWithSelector",()=>t],115357);let v=a=>{if(!a)return"";let b=a.name.split(".");return b[b.length-1]},w=(a,b="")=>new Promise(c=>{if(a.isFile)a.file(a=>{a.relativePath=`${b}${a.name}`,c([a])});else if(a.isDirectory){let d=a.createReader(),e=[],f=()=>{d.readEntries(async d=>{d.length?(e.push(...d),f()):c((await Promise.all(e.map(c=>w(c,`${b}${a.name}/`)))).flat())})};f()}else c([])}),x=a=>null==a?0:"number"==typeof a?a:"string"==typeof a?Number(a):0,y=a=>{if(!a)return{imageFileSizeLimit:2,imageFileBatchLimit:5,singleChunkAttachmentLimit:10};let{image_file_batch_limit:b,single_chunk_attachment_limit:c,attachment_image_file_size_limit:d}=a,e=x(d),f=x(b),g=x(c);return{imageFileSizeLimit:e>0?e:2,imageFileBatchLimit:f>0?f:5,singleChunkAttachmentLimit:g>0?g:10}};a.s(["fileIsUploaded",0,a=>{if(a.uploadedId||100===a.progress)return!0},"getFileType",0,v,"getFileUploadConfig",0,y,"traverseFileEntry",0,w],244044),a.s(["useUpload",0,()=>{let{t:a}=(0,l.useTranslation)(),b=u(),[c,e]=(0,d.useState)(!1),f=(0,d.useRef)(null),g=(0,d.useRef)(null),h=(0,d.useRef)(null),{data:i}=(0,p.useFileUploadConfig)(),j=(0,d.useMemo)(()=>y(i),[i]),r=a=>{a.preventDefault(),a.stopPropagation(),a.target!==g.current&&e(!0)},s=a=>{a.preventDefault(),a.stopPropagation()},t=a=>{a.preventDefault(),a.stopPropagation(),a.target===g.current&&e(!1)},x=(0,d.useCallback)(a=>{let b=v(a);return q.includes(b.toLowerCase())},[]),z=(0,d.useCallback)(a=>{let{size:b}=a;return b<=1024*j.imageFileSizeLimit*1024},[j]),A=(0,d.useCallback)(b=>{"type"===b?o.default.notify({type:"error",message:a("fileUploader.fileExtensionNotSupport",{ns:"common"})}):o.default.notify({type:"error",message:a("imageUploader.fileSizeLimitExceeded",{ns:"dataset",size:j.imageFileSizeLimit})})},[j,a]),B=(0,d.useCallback)(a=>{let b=!0,c=!0,d=a.filter(a=>x(a)?!!z(a)||(c=!1,!1):(b=!1,!1));return b?c||A("size"):A("type"),d},[x,z,A]),C=(0,d.useCallback)(a=>{let{files:c,setFiles:d}=b.getState();d((0,k.produce)(c,b=>{b.push(a)}))},[b]),D=(0,d.useCallback)(a=>{let{files:c,setFiles:d}=b.getState();d((0,k.produce)(c,b=>{let c=b.findIndex(b=>b.id===a.id);c>-1&&(b[c]=a)}))},[b]),E=(0,d.useCallback)(a=>{let{files:c,setFiles:d}=b.getState();d(c.filter(b=>b.id!==a))},[b]),F=(0,d.useCallback)(c=>{let{files:d,setFiles:e}=b.getState(),f=d.findIndex(a=>a.id===c);if(f>-1){let b=d[f];e((0,k.produce)(d,a=>{a[f].progress=0})),(0,n.fileUpload)({file:b.originalFile,onProgressCallback:a=>{D({...b,progress:a})},onSuccessCallback:a=>{D({...b,uploadedId:a.id,progress:100})},onErrorCallback:c=>{let d=(0,n.getFileUploadErrorMessage)(c,a("fileUploader.uploadFromComputerUploadError",{ns:"common"}),a);o.default.notify({type:"error",message:d}),D({...b,progress:-1})}})}},[b,a,D]),G=(0,d.useCallback)(b=>{let c=new FileReader,d=b.type.startsWith("image");c.addEventListener("load",()=>{let e={id:(0,m.v4)(),name:b.name,extension:v(b),mimeType:b.type,size:b.size,progress:0,originalFile:b,base64Url:d?c.result:""};C(e),(0,n.fileUpload)({file:e.originalFile,onProgressCallback:a=>{D({...e,progress:a})},onSuccessCallback:a=>{D({...e,extension:a.extension,mimeType:a.mime_type,size:a.size,uploadedId:a.id,progress:100})},onErrorCallback:b=>{let c=(0,n.getFileUploadErrorMessage)(b,a("fileUploader.uploadFromComputerUploadError",{ns:"common"}),a);o.default.notify({type:"error",message:c}),D({...e,progress:-1})}})},!1),c.addEventListener("error",()=>{o.default.notify({type:"error",message:a("fileUploader.uploadFromComputerReadError",{ns:"common"})})},!1),c.readAsDataURL(b)},[a,C,D]),H=(0,d.useCallback)(c=>{let{files:d}=b.getState(),{singleChunkAttachmentLimit:e}=j;if(0!==c.length){if(d.length+c.length>e)return void o.default.notify({type:"error",message:a("imageUploader.singleChunkAttachmentLimitTooltip",{ns:"datasetHitTesting",limit:e})});for(let a of c)G(a)}},[j,b,a,G]),I=(0,d.useCallback)(a=>{let{imageFileBatchLimit:b}=j;H(B(Array.from(a.target.files??[]).slice(0,b)))},[B,H,j]),J=(0,d.useCallback)(async a=>{a.preventDefault(),a.stopPropagation(),e(!1),a.dataTransfer&&H(B((await Promise.all(Array.from(a.dataTransfer.items).map(a=>{let b=a.webkitGetAsEntry?.();if(b)return w(b);let c=a.getAsFile?.();return c?Promise.resolve([c]):Promise.resolve([])}))).flat().slice(0,j.imageFileBatchLimit)))},[j,H,B]);return(0,d.useEffect)(()=>(h.current?.addEventListener("dragenter",r),h.current?.addEventListener("dragover",s),h.current?.addEventListener("dragleave",t),h.current?.addEventListener("drop",J),()=>{h.current?.removeEventListener("dragenter",r),h.current?.removeEventListener("dragover",s),h.current?.removeEventListener("dragleave",t),h.current?.removeEventListener("drop",J)}),[J]),{dragging:c,fileUploadConfig:j,dragRef:g,dropRef:h,uploaderRef:f,fileChangeHandle:I,selectHandle:()=>{f.current&&f.current.click()},handleRemoveFile:E,handleReUploadFile:F,handleLocalFileUpload:G}}],614157)},806686,829001,a=>{"use strict";var b=a.i(608061),c=a.i(57843),d=a.i(142261),e=a.i(527344);a.i(3626);var f=a.i(413353),g=a.i(818386),h=a.i(483664);let i=c.memo(({sourceUrl:a,name:c})=>(0,b.jsx)("div",{className:"size-full border-[2px] border-effects-image-frame shadow-xs",children:(0,b.jsx)("img",{className:"size-full object-cover",src:a,alt:c})})),j=(0,d.cva)("flex items-center justify-center cursor-pointer",{variants:{size:{sm:"size-6",md:"size-8"}},defaultVariants:{size:"sm"}}),k=c.memo(({file:a,size:d,className:k,onClick:l})=>{let{name:m,mimeType:n,sourceUrl:o}=a,p=n.startsWith("image/"),q=(0,c.useCallback)(b=>{b.stopPropagation(),b.preventDefault(),l?.(a)},[l,a]);return(0,b.jsx)(h.default,{popupContent:m,popupClassName:"p-1.5 rounded-lg system-xs-medium text-text-secondary",position:"top",children:(0,b.jsx)("div",{className:(0,e.cn)(j({size:d,className:k}),p?"p-px":"rounded-md border-[0.5px] border-components-panel-border bg-components-panel-on-panel-item-bg shadow-xs hover:bg-components-panel-on-panel-item-bg-alt"),onClick:q,children:p?(0,b.jsx)(i,{sourceUrl:o,name:m}):(0,b.jsx)(f.FileTypeIcon,{type:(0,g.getFileAppearanceType)(m,n),size:"sm"})})})});var l=a.i(693137);let m=c.memo(({count:a,onClick:d})=>{let e=(0,c.useCallback)(a=>{a.stopPropagation(),a.preventDefault(),d?.()},[d]);return(0,b.jsxs)("div",{className:"relative size-8 cursor-pointer p-[0.5px]",onClick:e,children:[(0,b.jsx)("div",{className:"relative z-10 size-full rounded-md border-[1.5px] border-components-panel-bg bg-divider-regular",children:(0,b.jsx)("div",{className:"flex size-full items-center justify-center",children:(0,b.jsx)("span",{className:"system-xs-regular text-text-tertiary",children:`+${0===a?"0":a<1e3?a.toString():a<1e6?`${(a/1e3).toFixed(1)}k`:`${(a/1e6).toFixed(1)}M`}`})})}),(0,b.jsx)("div",{className:"absolute -right-0.5 top-1 z-0 h-6 w-1 rounded-r-md bg-divider-regular"})]})});a.s(["default",0,({images:a,size:d,limit:f=9,className:g})=>{let[h,i]=(0,c.useState)(!1),[j,n]=(0,c.useState)(0),[o,p]=(0,c.useState)([]),q=(0,c.useMemo)(()=>h?a:a.slice(0,f),[a,f,h]),r=(0,c.useCallback)(()=>{i(!0)},[]),s=(0,c.useCallback)(a=>{let b=q.findIndex(b=>b.sourceUrl===a.sourceUrl);-1!==b&&(n(b),p(q.map(a=>({url:a.sourceUrl,name:a.name,size:a.size}))))},[q]),t=(0,c.useCallback)(()=>{p([])},[]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:(0,e.cn)("flex flex-wrap gap-1",g),children:[q.map(a=>(0,b.jsx)(k,{file:a,size:d,onClick:s},a.sourceUrl)),a.length>f&&!h&&(0,b.jsx)(m,{count:a.length-q.length,onClick:r})]}),o.length>0&&(0,b.jsx)(l.default,{images:o,initialIndex:j,onClose:t})]})}],806686);let n=({text:a,className:c})=>(0,b.jsxs)("div",{className:(0,e.cn)("inline-flex items-center gap-x-0.5",c),children:[(0,b.jsx)("span",{className:"text-xs font-medium text-text-quaternary",children:"#"}),(0,b.jsx)("span",{className:"max-w-12 shrink-0 truncate text-xs text-text-tertiary",children:a})]});n.displayName="Tag";let o=c.memo(n);a.s(["default",0,o],829001)},948972,a=>{"use strict";var b=a.i(608061),c=a.i(57843);a.i(752298);var d=a.i(693025),e=a.i(714580),f=a.i(527344);let g=(0,c.memo)(({value:a,onChange:c,disabled:g})=>{let{t:h}=(0,d.useTranslation)();return(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("div",{className:"system-xs-medium-uppercase text-text-tertiary",children:h("segment.summary",{ns:"datasetDocuments"})}),(0,b.jsx)(e.default,{className:(0,f.cn)("body-sm-regular w-full resize-none bg-transparent leading-6 text-text-secondary outline-none"),placeholder:h("segment.summaryPlaceholder",{ns:"datasetDocuments"}),minRows:1,value:a??"",onChange:a=>c?.(a.target.value),disabled:g})]})});a.s(["default",0,g])}];

//# sourceMappingURL=app_components_datasets_81fb006b._.js.map