module.exports=[628238,180612,a=>{"use strict";var b,c,d=a.i(970502);a.s(["default",()=>d.ReactFlow],628238);var e=a.i(57843),f=a.i(517817),g=a.i(28296);function h({color:a,dimensions:b,lineWidth:c}){return e.default.createElement("path",{stroke:a,strokeWidth:c,d:`M${b[0]/2} 0 V${b[1]} M0 ${b[1]/2} H${b[0]}`})}function i({color:a,radius:b}){return e.default.createElement("circle",{cx:b,cy:b,r:b,fill:a})}(b=c||(c={})).Lines="lines",b.Dots="dots",b.Cross="cross";let j={[c.Dots]:"#91919a",[c.Lines]:"#eee",[c.Cross]:"#e2e2e2"},k={[c.Dots]:1,[c.Lines]:1,[c.Cross]:6},l=a=>({transform:a.transform,patternId:`pattern-${a.rfId}`});function m({id:a,variant:b=c.Dots,gap:m=20,size:n,lineWidth:o=1,offset:p=2,color:q,style:r,className:s}){let t=(0,e.useRef)(null),{transform:u,patternId:v}=(0,d.useStore)(l,g.shallow),w=q||j[b],x=n||k[b],y=b===c.Dots,z=b===c.Cross,A=Array.isArray(m)?m:[m,m],B=[A[0]*u[2]||1,A[1]*u[2]||1],C=x*u[2],D=z?[C,C]:B,E=y?[C/p,C/p]:[D[0]/p,D[1]/p];return e.default.createElement("svg",{className:(0,f.default)(["react-flow__background",s]),style:{...r,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:t,"data-testid":"rf__background"},e.default.createElement("pattern",{id:v+a,x:u[0]%B[0],y:u[1]%B[1],width:B[0],height:B[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${E[0]},-${E[1]})`},y?e.default.createElement(i,{color:w,radius:C/p}):e.default.createElement(h,{dimensions:D,color:w,lineWidth:o})),e.default.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v+a})`}))}m.displayName="Background";var n=(0,e.memo)(m);a.s(["Background",()=>n],180612)},7855,a=>{"use strict";var b=a.i(608061);let c=a.i(57843).memo(({title:a,content:c})=>(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"flex flex-col gap-y-0.5 rounded-md bg-workflow-block-parma-bg px-[5px] py-[3px]",children:[(0,b.jsx)("div",{className:"system-2xs-semibold-uppercase uppercase text-text-secondary",children:a}),(0,b.jsx)("div",{className:"system-xs-regular break-words text-text-tertiary",children:c})]})}));a.s(["default",0,c])},339791,a=>{"use strict";var b=a.i(223529);a.s(["VariableLabelInText",()=>b.default])},54362,6208,a=>{"use strict";var b=a.i(608061),c=a.i(57843);a.i(752298);var d=a.i(693025),e=a.i(986963);a.i(963284);var f=a.i(833970);a.s(["VariableLabelInNode",()=>f.default],6208);var f=f,g=a.i(284284),h=a.i(653226),i=a.i(198536);let j=(0,c.memo)(({condition:a})=>{let{t:j}=(0,d.useTranslation)(),{variable_selector:k,comparison_operator:l,sub_variable_condition:m}=a,n=(0,i.isComparisonOperatorNeedTranslate)(l)?j(`nodes.ifElse.comparisonOperator.${l}`,{ns:"workflow"}):l,o=(0,c.useCallback)(a=>(0,i.comparisonOperatorNotRequireValue)(a.comparison_operator)?"":a.value.replace(/\{\{#([^#]*)#\}\}/g,(a,b)=>{let c=b.split(".");return(0,e.isSystemVar)(c)?`{{${b}}}`:`{{${c.slice(1).join(".")}}}`}),[]),p=(0,c.useCallback)(a=>a.comparison_operator===h.ComparisonOperator.in||a.comparison_operator===h.ComparisonOperator.notIn,[]),q=(0,c.useCallback)(a=>{if(a.comparison_operator===h.ComparisonOperator.in||a.comparison_operator===h.ComparisonOperator.notIn){let b=[...g.FILE_TYPE_OPTIONS,...g.TRANSFER_METHOD].filter(b=>b.value===(Array.isArray(a.value)?a.value[0]:a.value))[0];return b?j(`nodes.ifElse.optionName.${b.i18nKey}`,{ns:"workflow"}).replace(/\{\{#([^#]*)#\}\}/g,(a,b)=>{let c=b.split(".");return(0,e.isSystemVar)(c)?`{{${b}}}`:`{{${c.slice(1).join(".")}}}`}):""}return""},[j]);return(0,b.jsxs)("div",{className:"rounded-md bg-workflow-block-parma-bg",children:[(0,b.jsxs)("div",{className:"flex h-6 items-center px-1 ",children:[(0,b.jsx)(f.default,{className:"w-0 grow",variables:k,notShowFullPath:!0}),(0,b.jsx)("div",{className:"mx-1 shrink-0 text-xs font-medium text-text-primary",title:n,children:n})]}),(0,b.jsx)("div",{className:"ml-[10px] border-l border-divider-regular pl-[10px]",children:m?.conditions.map((a,c)=>{let d=a.comparison_operator,e=d&&(0,i.isComparisonOperatorNeedTranslate)(d)?j(`nodes.ifElse.comparisonOperator.${d}`,{ns:"workflow"}):d;return(0,b.jsxs)("div",{className:"relative flex h-6 items-center space-x-1",children:[(0,b.jsx)("div",{className:"system-xs-medium text-text-accent",children:a.key}),(0,b.jsx)("div",{className:"system-xs-medium text-text-primary",children:e}),a.comparison_operator&&!(0,i.isEmptyRelatedOperator)(a.comparison_operator)&&(0,b.jsx)("div",{className:"system-xs-regular text-text-secondary",children:p(a)?q(a):o(a)}),c!==m.conditions.length-1&&(0,b.jsx)("div",{className:"absolute bottom-[-10px] right-1 z-10 text-[10px] font-medium uppercase leading-4 text-text-accent",children:j(`nodes.ifElse.${m.logical_operator}`,{ns:"workflow"})})]},a.id)})})]})});a.s(["default",0,j],54362)},482646,a=>{"use strict";var b=a.i(608061),c=a.i(57843);a.i(752298);var d=a.i(693025),e=a.i(970502),f=a.i(986963);a.i(963284);var g=a.i(339791);a.i(713310);var h=a.i(81862),i=a.i(284284),j=a.i(653226),k=a.i(198536);let l=(0,c.memo)(({variableSelector:a,labelName:l,operator:m,value:n})=>{let{t:o}=(0,d.useTranslation)(),p=(0,e.useNodes)(),q=l||((0,f.isSystemVar)(a)?a.slice(0).join("."):a.slice(1).join(".")),r=(0,k.isComparisonOperatorNeedTranslate)(m)?o(`nodes.ifElse.comparisonOperator.${m}`,{ns:"workflow"}):m,s=(0,k.comparisonOperatorNotRequireValue)(m),t=p.find(b=>b.id===a[0]),u=(0,h.isExceptionVariable)(q,t?.data.type),v=(0,c.useMemo)(()=>s?"":Array.isArray(n)?n[0]:!0===n||!1===n?n?"True":"False":n.replace(/\{\{#([^#]*)#\}\}/g,(a,b)=>{let c=b.split(".");return(0,f.isSystemVar)(c)?`{{${b}}}`:`{{${c.slice(1).join(".")}}}`}),[s,n]),w=m===j.ComparisonOperator.in||m===j.ComparisonOperator.notIn,x=(0,c.useMemo)(()=>{if(w){let a=[...i.FILE_TYPE_OPTIONS,...i.TRANSFER_METHOD].filter(a=>a.value===(Array.isArray(n)?n[0]:n))[0];return a?o(`nodes.ifElse.optionName.${a.i18nKey}`,{ns:"workflow"}).replace(/\{\{#([^#]*)#\}\}/g,(a,b)=>{let c=b.split(".");return(0,f.isSystemVar)(c)?`{{${b}}}`:`{{${c.slice(1).join(".")}}}`}):""}return""},[w,o,n]);return(0,b.jsxs)("div",{className:"flex h-6 items-center rounded-md bg-workflow-block-parma-bg px-1",children:[(0,b.jsx)(g.VariableLabelInText,{className:"w-0 grow",variables:a,nodeTitle:t?.data.title,nodeType:t?.data.type,isExceptionVariable:u,notShowFullPath:!0}),(0,b.jsx)("div",{className:"mx-1 shrink-0 text-xs font-medium text-text-primary",title:r,children:r}),!s&&(0,b.jsx)("div",{className:"shrink-[3] truncate text-xs text-text-secondary",title:v,children:w?x:v})]})});a.s(["default",0,l])},727323,11364,735117,747867,a=>{"use strict";a.s(["NoteEditorContextProvider",()=>ax,"default",()=>ay],11364);var b=a.i(608061),c=a.i(560847),d=a.i(928479),e=a.i(696045);let f=new Set(["http:","https:","mailto:","sms:","tel:"]);class g extends d.ElementNode{__url;__target;__rel;__title;static getType(){return"link"}static clone(a){return new g(a.__url,{rel:a.__rel,target:a.__target,title:a.__title},a.__key)}constructor(a="",b={},c){super(c);const{target:d=null,rel:e=null,title:f=null}=b;this.__url=a,this.__target=d,this.__rel=e,this.__title=f}createDOM(a){let b=document.createElement("a");return this.updateLinkDOM(null,b,a),(0,c.addClassNamesToElement)(b,a.theme.link),b}updateLinkDOM(a,b,c){if((0,d.isHTMLAnchorElement)(b))for(let c of(a&&a.__url===this.__url||(b.href=this.sanitizeUrl(this.__url)),["target","rel","title"])){let d=`__${c}`,e=this[d];a&&a[d]===e||(e?b[c]=e:b.removeAttribute(c))}}updateDOM(a,b,c){return this.updateLinkDOM(a,b,c),!1}static importDOM(){return{a:a=>({conversion:h,priority:1})}}static importJSON(a){return i().updateFromJSON(a)}updateFromJSON(a){return super.updateFromJSON(a).setURL(a.url).setRel(a.rel||null).setTarget(a.target||null).setTitle(a.title||null)}sanitizeUrl(a){a=r(a);try{let b=new URL(r(a));if(!f.has(b.protocol))return"about:blank"}catch(a){}return a}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(a){let b=this.getWritable();return b.__url=a,b}getTarget(){return this.getLatest().__target}setTarget(a){let b=this.getWritable();return b.__target=a,b}getRel(){return this.getLatest().__rel}setRel(a){let b=this.getWritable();return b.__rel=a,b}getTitle(){return this.getLatest().__title}setTitle(a){let b=this.getWritable();return b.__title=a,b}insertNewAfter(a,b=!0){let c=i(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(c,b),c}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(a,b,c){if(!(0,d.$isRangeSelection)(b))return!1;let e=b.anchor.getNode(),f=b.focus.getNode();return this.isParentOf(e)&&this.isParentOf(f)&&b.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function h(a){let b=null;if((0,d.isHTMLAnchorElement)(a)){let c=a.textContent;(null!==c&&""!==c||a.children.length>0)&&(b=i(a.getAttribute("href")||"",{rel:a.getAttribute("rel"),target:a.getAttribute("target"),title:a.getAttribute("title")}))}return{node:b}}function i(a="",b){return(0,d.$applyNodeReplacement)(new g(a,b))}function j(a){return a instanceof g}class k extends g{__isUnlinked;constructor(a="",b={},c){super(a,b,c),this.__isUnlinked=void 0!==b.isUnlinked&&null!==b.isUnlinked&&b.isUnlinked}static getType(){return"autolink"}static clone(a){return new k(a.__url,{isUnlinked:a.__isUnlinked,rel:a.__rel,target:a.__target,title:a.__title},a.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(a){let b=this.getWritable();return b.__isUnlinked=a,b}createDOM(a){return this.__isUnlinked?document.createElement("span"):super.createDOM(a)}updateDOM(a,b,c){return super.updateDOM(a,b,c)||a.__isUnlinked!==this.__isUnlinked}static importJSON(a){return l().updateFromJSON(a)}updateFromJSON(a){return super.updateFromJSON(a).setIsUnlinked(a.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(a,b=!0){let c=this.getParentOrThrow().insertNewAfter(a,b);if((0,d.$isElementNode)(c)){let a=l(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return c.append(a),a}return null}}function l(a="",b){return(0,d.$applyNodeReplacement)(new k(a,b))}function m(a){return a instanceof k}let n=(0,d.createCommand)("TOGGLE_LINK_COMMAND");function o(a,b){if("element"===a.type){let c=a.getNode();return(0,d.$isElementNode)(c)||function(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let a of(d.append("code",252),b))d.append("v",a);throw c.search=d.toString(),Error(`Minified Lexical error #252; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0),c.getChildren()[a.offset+b]||null}return null}function p(a,b={}){let c;if(a&&"object"==typeof a){let{url:d,...e}=a;c=d,b={...e,...b}}else c=a;let{target:e,title:f}=b,g=void 0===b.rel?"noreferrer":b.rel,h=(0,d.$getSelection)();if(null===h||!(0,d.$isRangeSelection)(h)&&!(0,d.$isNodeSelection)(h))return;if((0,d.$isNodeSelection)(h)){let a=h.getNodes();if(0===a.length)return;return void a.forEach(a=>{if(null===c){let b=(0,d.$findMatchingParent)(a,a=>!m(a)&&j(a));b&&(b.insertBefore(a),0===b.getChildren().length&&b.remove())}else{let b=(0,d.$findMatchingParent)(a,a=>!m(a)&&j(a));if(b)b.setURL(c),void 0!==e&&b.setTarget(e),void 0!==g&&b.setRel(g);else{let b=i(c,{rel:g,target:e});a.insertBefore(b),b.append(a)}}})}let k=h.extract();if(null===c){let a=new Set;return void k.forEach(b=>{let c=b.getParent();if(j(c)&&!m(c)){let b=c.getKey();if(a.has(b))return;!function(a,b){let c=new Set(b.filter(b=>a.isParentOf(b)).map(a=>a.getKey())),d=a.getChildren(),e=d.filter(a=>c.has(a.getKey()));if(e.length===d.length)return d.forEach(b=>a.insertBefore(b)),a.remove();let f=d.findIndex(a=>c.has(a.getKey())),g=d.findLastIndex(a=>c.has(a.getKey())),h=g===d.length-1;if(0===f)e.forEach(b=>a.insertBefore(b));else if(h)for(let b=e.length-1;b>=0;b--)a.insertAfter(e[b]);else{for(let b=e.length-1;b>=0;b--)a.insertAfter(e[b]);let b=d.slice(g+1);if(b.length>0){let c=i(a.getURL(),{rel:a.getRel(),target:a.getTarget(),title:a.getTitle()});e[e.length-1].insertAfter(c),b.forEach(a=>c.append(a))}}}(c,k),a.add(b)}})}let l=new Set,n=a=>{l.has(a.getKey())||(l.add(a.getKey()),a.setURL(c),void 0!==e&&a.setTarget(e),void 0!==g&&a.setRel(g),void 0!==f&&a.setTitle(f))};if(1===k.length){let a=k[0],b=(0,d.$findMatchingParent)(a,j);if(null!==b)return n(b)}!function(a){let b=(0,d.$getSelection)();if(!(0,d.$isRangeSelection)(b))return a();let c=(0,d.$normalizeSelection__EXPERIMENTAL)(b),e=c.isBackward(),f=o(c.anchor,e?-1:0),g=o(c.focus,e?0:-1);if(a(),f||g){let a=(0,d.$getSelection)();if((0,d.$isRangeSelection)(a)){let b=a.clone();if(f){let a=f.getParent();a&&b.anchor.set(a.getKey(),f.getIndexWithinParent()+ +!!e,"element")}if(g){let a=g.getParent();a&&b.focus.set(a.getKey(),g.getIndexWithinParent()+ +!e,"element")}(0,d.$setSelection)((0,d.$normalizeSelection__EXPERIMENTAL)(b))}}}(()=>{let a=null;for(let b of k){if(!b.isAttached())continue;let h=(0,d.$findMatchingParent)(b,j);if(h){n(h);continue}if((0,d.$isElementNode)(b)){if(!b.isInline())continue;if(j(b)){if(!(m(b)||null!==a&&a.getParentOrThrow().isParentOf(b))){n(b),a=b;continue}for(let a of b.getChildren())b.insertBefore(a);b.remove();continue}}let k=b.getPreviousSibling();j(k)&&k.is(a)?k.append(b):(a=i(c,{rel:g,target:e,title:f}),b.insertAfter(a),a.append(b))}})}let q=/^\+?[0-9\s()-]{5,}$/;function r(a){return a.match(/^[a-z][a-z0-9+.-]*:/i)||a.match(/^[/#.]/)?a:a.includes("@")?`mailto:${a}`:q.test(a)?`tel:${a}`:`https://${a}`}function s(a,b){return(0,c.mergeRegister)((0,e.effect)(()=>a.registerCommand(n,a=>{let c=b.validateUrl.peek(),d=b.attributes.peek();if(null===a)return p(null),!0;if("string"==typeof a)return!(void 0!==c&&!c(a))&&(p(a,d),!0);{let{url:b,target:c,rel:e,title:f}=a;return p(b,{...d,rel:e,target:c,title:f}),!0}},d.COMMAND_PRIORITY_LOW)),(0,e.effect)(()=>{let e=b.validateUrl.value;if(!e)return;let f=b.attributes.value;return a.registerCommand(d.PASTE_COMMAND,b=>{let g=(0,d.$getSelection)();if(!(0,d.$isRangeSelection)(g)||g.isCollapsed()||!(0,c.objectKlassEquals)(b,ClipboardEvent)||null===b.clipboardData)return!1;let h=b.clipboardData.getData("text");return!!e(h)&&!g.getNodes().some(a=>(0,d.$isElementNode)(a))&&(a.dispatchCommand(n,{...f,url:h}),b.preventDefault(),!0)},d.COMMAND_PRIORITY_LOW)}))}let t=(0,d.defineExtension)({build:(a,b,c)=>(0,e.namedSignals)(b),config:{attributes:void 0,validateUrl:void 0},mergeConfig(a,b){let c=(0,d.shallowMergeConfig)(a,b);return a.attributes&&(c.attributes=(0,d.shallowMergeConfig)(a.attributes,c.attributes)),c},name:"@lexical/link/Link",nodes:[g],register:(a,b,c)=>s(a,c.getOutput())});function u(a,b,c={}){let e=c=>{let e=c.target;if(!(0,d.isDOMNode)(e))return;let f=(0,d.getNearestEditorFromDOMNode)(e);if(null===f)return;let g=null,h=null;if(f.update(()=>{let a=(0,d.$getNearestNodeFromDOMNode)(e);if(null!==a){let c=(0,d.$findMatchingParent)(a,d.$isElementNode);if(!b.disabled.peek())if(j(c))g=c.sanitizeUrl(c.getURL()),h=c.getTarget();else{let a=function(a,b){let c=a;for(;null!=c;){if(b(c))return c;c=c.parentNode}return null}(e,d.isHTMLAnchorElement);null!==a&&(g=a.href,h=a.target)}}}),null===g||""===g)return;let i=a.getEditorState().read(d.$getSelection);if((0,d.$isRangeSelection)(i)&&!i.isCollapsed())return void c.preventDefault();let k="auxclick"===c.type&&1===c.button;window.open(g,b.newTab.peek()||k||c.metaKey||c.ctrlKey||"_blank"===h?"_blank":"_self"),c.preventDefault()},f=a=>{1===a.button&&e(a)};return a.registerRootListener((a,b)=>{null!==b&&(b.removeEventListener("click",e),b.removeEventListener("mouseup",f)),null!==a&&(a.addEventListener("click",e,c),a.addEventListener("mouseup",f,c))})}function v(a,b){for(let c=0;c<b.length;c++){let d=b[c](a);if(d)return d}return null}(0,d.defineExtension)({build:(a,b,c)=>(0,e.namedSignals)(b),config:(0,d.safeCast)({disabled:!1,newTab:!1}),dependencies:[t],name:"@lexical/link/ClickableLink",register:(a,b,c)=>u(a,c.getOutput())});let w=/[.,;\s]/;function x(a){return w.test(a)}function y(a){return x(a[a.length-1])}function z(a){let b=a.getPreviousSibling();return(0,d.$isElementNode)(b)&&(b=b.getLastDescendant()),null===b||(0,d.$isLineBreakNode)(b)||(0,d.$isTextNode)(b)&&y(b.getTextContent())}function A(a){let b=a.getNextSibling();return(0,d.$isElementNode)(b)&&(b=b.getFirstDescendant()),null===b||(0,d.$isLineBreakNode)(b)||(0,d.$isTextNode)(b)&&x(b.getTextContent()[0])}function B(a,b,c){let e=a.getChildren(),f=e.length;for(let b=0;b<f;b++){let f=e[b];if(!(0,d.$isTextNode)(f)||!f.isSimpleText())return C(a),void c(null,a.getURL())}let g=a.getTextContent(),h=v(g,b);if(null===h||h.text!==g||!z(a)||!A(a))return C(a),void c(null,a.getURL());let i=a.getURL();if(i!==h.url&&(a.setURL(h.url),c(h.url,i)),h.attributes){let b=a.getRel();b!==h.attributes.rel&&(a.setRel(h.attributes.rel||null),c(h.attributes.rel||null,b));let d=a.getTarget();d!==h.attributes.target&&(a.setTarget(h.attributes.target||null),c(h.attributes.target||null,d))}}function C(a){let b=a.getChildren();for(let c=b.length-1;c>=0;c--)a.insertAfter(b[c]);return a.remove(),b.map(a=>a.getLatest())}let D={changeHandlers:[],matchers:[]};(0,d.defineExtension)({config:D,dependencies:[t],mergeConfig(a,b){let c=(0,d.shallowMergeConfig)(a,b);for(let d of["matchers","changeHandlers"]){let e=b[d];Array.isArray(e)&&(c[d]=[...a[d],...e])}return c},name:"@lexical/link/AutoLink",register:function(a,b=D){let{matchers:e,changeHandlers:f}=b,g=(a,b)=>{for(let c of f)c(a,b)};return(0,c.mergeRegister)(a.registerNodeTransform(d.TextNode,a=>{let b=a.getParentOrThrow(),c=a.getPreviousSibling();if(m(b)&&!b.getIsUnlinked())B(b,e,g);else if(!j(b)){var f,h,i;let b,j,k;a.isSimpleText()&&(x(a.getTextContent()[0])||!m(c))&&function(a,b,c){let e=[...a],f=e.map(a=>a.getTextContent()).join(""),g,h=f,i=0;for(;(g=v(h,b))&&null!==g;){var j,k,m;let a=g.index,b=a+g.length;if(j=i+a,k=i+b,m=e,(j>0?x(f[j-1]):z(m[0]))&&(k<f.length?x(f[k]):A(m[m.length-1]))){let[f,,h,j]=function(a,b,c){let d=[],e=[],f=[],g=0,h=0,i=[...a];for(;i.length>0;){let a=i[0],j=a.getTextContent().length,k=h;h+j<=b?(d.push(a),g+=j):k>=c?f.push(a):e.push(a),h+=j,i.shift()}return[g,d,e,f]}(e,i+a,i+b),k=function(a,b,c,e){let f=l(e.url,e.attributes);if(1===a.length){let g,h=a[0];0===b?[g,h]=h.splitText(c):[,g,h]=h.splitText(b,c);let i=(0,d.$createTextNode)(e.text);return i.setFormat(g.getFormat()),i.setDetail(g.getDetail()),i.setStyle(g.getStyle()),f.append(i),g.replace(f),h}if(a.length>1){let e,g=a[0],h,i=g.getTextContent().length;0===b?h=g:[,h]=g.splitText(b);let j=[];for(let b=1;b<a.length;b++){let d=a[b],f=d.getTextContent().length,g=i;if(g<c)if(i+f<=c)j.push(d);else{let[a,b]=d.splitText(c-g);j.push(a),e=b}i+=f}let k=(0,d.$getSelection)(),l=k?k.getNodes().find(d.$isTextNode):void 0,m=(0,d.$createTextNode)(h.getTextContent());return m.setFormat(h.getFormat()),m.setDetail(h.getDetail()),m.setStyle(h.getStyle()),f.append(m,...j),l&&l===h&&((0,d.$isRangeSelection)(k)?m.select(k.anchor.offset,k.focus.offset):(0,d.$isNodeSelection)(k)&&m.select(0,m.getTextContent().length)),h.replace(f),e}}(h,i+a-f,i+b-f,g);e=k?[k,...j]:j,c(g.url,null),i=0}else i+=b;h=h.substring(b)}}(function(a){let b=[a],c=a.getNextSibling();for(;null!==c&&(0,d.$isTextNode)(c)&&c.isSimpleText()&&(b.push(c),!/[\s]/.test(c.getTextContent()));)c=c.getNextSibling();return b}(a),e,g);f=a,h=e,i=g,b=f.getPreviousSibling(),j=f.getNextSibling(),k=f.getTextContent(),!m(b)||b.getIsUnlinked()||x(k[0])&&!(b.isEmailURI()?/^\.[a-zA-Z]{2,}/.test(k):/^\.[a-zA-Z0-9]{1,}/.test(k))||(b.append(f),B(b,h,i),i(null,b.getURL())),!m(j)||j.getIsUnlinked()||y(k)||(C(j),B(j,h,i),i(null,j.getURL()))}}),a.registerCommand(n,a=>{let b=(0,d.$getSelection)();return null===a&&!!(0,d.$isRangeSelection)(b)&&(b.extract().forEach(a=>{let b=a.getParent();m(b)&&(b.setIsUnlinked(!b.getIsUnlinked()),b.markDirty())}),!1)},d.COMMAND_PRIORITY_LOW))}});var E=d,F=a.i(585818);function G(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let c of(d.append("code",a),b))d.append("v",c);throw c.search=d.toString(),Error(`Minified Lexical error #${a}; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function H(a){let b=1,c=a.getParent();for(;null!=c;){if(W(c)){let a=c.getParent();if(ab(a)){b++,c=a.getParent();continue}G(40)}break}return b}function I(a){let b=a.getParent();ab(b)||G(40);let c=b;for(;null!==c;)ab(c=c.getParent())&&(b=c);return b}function J(a){return W(a)&&ab(a.getFirstChild())}function K(a){return V().append(a)}function L(a,b){return W(a)&&(0===b.length||1===b.length&&a.is(b[0])&&0===a.getChildrenSize())}function M(a){let b=(0,E.$getSelection)();if(null!==b){let c=b.getNodes();if((0,E.$isRangeSelection)(b)){let d=b.getStartEndPoints();null===d&&G(143);let[e]=d,f=e.getNode(),g=f.getParent();if((0,E.$isRootOrShadowRoot)(f)){let a=f.getFirstChild();if(a)c=a.selectStart().getNodes();else{let a=(0,E.$createParagraphNode)();f.append(a),c=a.select().getNodes()}}else if(L(f,c)){let b=aa(a);if((0,E.$isRootOrShadowRoot)(g)){f.replace(b);let a=V();(0,E.$isElementNode)(f)&&(a.setFormat(f.getFormatType()),a.setIndent(f.getIndent())),b.append(a)}else if(W(f)){let a=f.getParentOrThrow();N(b,a.getChildren()),a.replace(b)}return}}let d=new Set;for(let b=0;b<c.length;b++){let e=c[b];if((0,E.$isElementNode)(e)&&e.isEmpty()&&!W(e)&&!d.has(e.getKey())){O(e,a);continue}let f=(0,E.$isLeafNode)(e)?e.getParent():W(e)&&e.isEmpty()?e:null;for(;null!=f;){let b=f.getKey();if(ab(f)){if(!d.has(b)){let c=aa(a);N(c,f.getChildren()),f.replace(c),d.add(b)}break}{let c=f.getParent();if((0,E.$isRootOrShadowRoot)(c)&&!d.has(b)){d.add(b),O(f,a);break}f=c}}}}}function N(a,b){a.splice(a.getChildrenSize(),0,b)}function O(a,b){let c;if(ab(a))return a;let d=a.getPreviousSibling(),e=a.getNextSibling(),f=V();if(N(f,a.getChildren()),ab(d)&&b===d.getListType())d.append(f),ab(e)&&b===e.getListType()&&(N(d,e.getChildren()),e.remove()),c=d;else if(ab(e)&&b===e.getListType())e.getFirstChildOrThrow().insertBefore(f),c=e;else{let d=aa(b);d.append(f),a.replace(d),c=d}return f.setFormat(a.getFormatType()),f.setIndent(a.getIndent()),a.remove(),c}function P(a,b){let c=a.getLastChild(),d=b.getFirstChild();c&&d&&J(c)&&J(d)&&(P(c.getFirstChild(),d.getFirstChild()),d.remove());let e=b.getChildren();e.length>0&&a.append(...e),b.remove()}function Q(a){let b="check"!==a.getListType(),c=a.getStart();for(let d of a.getChildren())W(d)&&(d.getValue()!==c&&d.setValue(c),b&&null!=d.getLatest().__checked&&d.setChecked(void 0),ab(d.getFirstChild())||c++)}function R(...a){let b=[];for(let c of a)if(c&&"string"==typeof c)for(let[a]of c.matchAll(/\S+/g))b.push(a);return b}class S extends E.ElementNode{__value;__checked;$config(){return this.config("listitem",{$transform:a=>{if(null==a.__checked)return;let b=a.getParent();ab(b)&&"check"!==b.getListType()&&null!=a.getChecked()&&a.setChecked(void 0)},extends:E.ElementNode,importDOM:(0,E.buildImportMap)({li:()=>({conversion:T,priority:0})})})}constructor(a=1,b,c){super(c),this.__value=void 0===a?1:a,this.__checked=b}afterCloneFrom(a){super.afterCloneFrom(a),this.__value=a.__value,this.__checked=a.__checked}createDOM(a){let b=document.createElement("li");return this.updateListItemDOM(null,b,a),b}updateListItemDOM(a,b,d){let e;!ab(e=this.getParent())||"check"!==e.getListType()||ab(this.getFirstChild())?(b.removeAttribute("role"),b.removeAttribute("tabIndex"),b.removeAttribute("aria-checked")):(b.setAttribute("role","checkbox"),b.setAttribute("tabIndex","-1"),a&&this.__checked===a.__checked||b.setAttribute("aria-checked",this.getChecked()?"true":"false")),b.value=this.__value,function(a,b,d){let e,f=[],g=[],h=b.list,i=h?h.listitem:void 0;if(h&&h.nested&&(e=h.nested.listitem),void 0!==i&&f.push(...R(i)),h){let a=d.getParent(),b=ab(a)&&"check"===a.getListType(),c=d.getChecked();b&&!c||g.push(h.listitemUnchecked),b&&c||g.push(h.listitemChecked),b&&f.push(c?h.listitemChecked:h.listitemUnchecked)}if(void 0!==e){let a=R(e);d.getChildren().some(a=>ab(a))?f.push(...a):g.push(...a)}g.length>0&&(0,c.removeClassNamesFromElement)(a,...g),f.length>0&&(0,c.addClassNamesToElement)(a,...f)}(b,d.theme,this);let f=a?a.__style:"",g=this.__style;f!==g&&(""===g?b.removeAttribute("style"):b.style.cssText=g),function(a,b,c){let d=(0,F.getStyleObjectFromCSS)(b.__textStyle);for(let b in d)a.style.setProperty(`--listitem-marker-${b}`,d[b]);if(c)for(let b in(0,F.getStyleObjectFromCSS)(c.__textStyle))b in d||a.style.removeProperty(`--listitem-marker-${b}`)}(b,this,a)}updateDOM(a,b,c){return this.updateListItemDOM(a,b,c),!1}updateFromJSON(a){return super.updateFromJSON(a).setValue(a.value).setChecked(a.checked)}exportDOM(a){let b=this.createDOM(a._config),c=this.getFormatType();c&&(b.style.textAlign=c);let d=this.getDirection();return d&&(b.dir=d),{element:b}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...a){for(let b=0;b<a.length;b++){let c=a[b];if((0,E.$isElementNode)(c)&&this.canMergeWith(c)){let a=c.getChildren();this.append(...a),c.remove()}else super.append(c)}return this}replace(a,b){if(W(a))return super.replace(a);this.setIndent(0);let c=this.getParentOrThrow();if(!ab(c))return a;if(c.__first===this.getKey())c.insertBefore(a);else if(c.__last===this.getKey())c.insertAfter(a);else{let b=aa(c.getListType()),d=this.getNextSibling();for(;d;){let a=d;d=d.getNextSibling(),b.append(a)}c.insertAfter(a),a.insertAfter(b)}return b&&((0,E.$isElementNode)(a)||G(139),this.getChildren().forEach(b=>{a.append(b)})),this.remove(),0===c.getChildrenSize()&&c.remove(),a}insertAfter(a,b=!0){let c=this.getParentOrThrow();if(ab(c)||G(39),W(a))return super.insertAfter(a,b);let d=this.getNextSiblings();if(c.insertAfter(a,b),0!==d.length){let e=aa(c.getListType());d.forEach(a=>e.append(a)),a.insertAfter(e,b)}return a}remove(a){let b=this.getPreviousSibling(),c=this.getNextSibling();super.remove(a),b&&c&&J(b)&&J(c)&&(P(b.getFirstChild(),c.getFirstChild()),c.remove())}insertNewAfter(a,b=!0){let c=V().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(c,b),c}collapseAtStart(a){let b=(0,E.$createParagraphNode)();this.getChildren().forEach(a=>b.append(a));let c=this.getParentOrThrow(),d=c.getParentOrThrow(),e=W(d);if(1===c.getChildrenSize())if(e)c.remove(),d.select();else{c.insertBefore(b),c.remove();let d=a.anchor,e=a.focus,f=b.getKey();"element"===d.type&&d.getNode().is(this)&&d.set(f,d.offset,"element"),"element"===e.type&&e.getNode().is(this)&&e.set(f,e.offset,"element")}else c.insertBefore(b),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(a){let b=this.getWritable();return b.__value=a,b}getChecked(){let a,b=this.getLatest(),c=this.getParent();return ab(c)&&(a=c.getListType()),"check"===a?!!b.__checked:void 0}setChecked(a){let b=this.getWritable();return b.__checked=a,b}toggleChecked(){let a=this.getWritable();return a.setChecked(!a.__checked)}getIndent(){let a=this.getParent();if(null===a||!this.isAttached())return this.getLatest().__indent;let b=a.getParentOrThrow(),c=0;for(;W(b);)b=b.getParentOrThrow().getParentOrThrow(),c++;return c}setIndent(a){"number"!=typeof a&&G(117),(a=Math.floor(a))>=0||G(199);let b=this.getIndent();for(;b!==a;)b<a?(function(a){let b=new Set;if(J(a)||b.has(a.getKey()))return;let c=a.getParent(),d=a.getNextSibling(),e=a.getPreviousSibling();if(J(d)&&J(e)){let c=e.getFirstChild();if(ab(c)){c.append(a);let e=d.getFirstChild();ab(e)&&(N(c,e.getChildren()),d.remove(),b.add(d.getKey()))}}else if(J(d)){let b=d.getFirstChild();if(ab(b)){let c=b.getFirstChild();null!==c&&c.insertBefore(a)}}else if(J(e)){let b=e.getFirstChild();ab(b)&&b.append(a)}else if(ab(c)){let b=V().setTextFormat(a.getTextFormat()).setTextStyle(a.getTextStyle()),f=aa(c.getListType()).setTextFormat(c.getTextFormat()).setTextStyle(c.getTextStyle());b.append(f),f.append(a),e?e.insertAfter(b):d?d.insertBefore(b):c.append(b)}}(this),b++):(function(a){if(J(a))return;let b=a.getParent(),c=b?b.getParent():void 0;if(ab(c?c.getParent():void 0)&&W(c)&&ab(b)){let d=b?b.getFirstChild():void 0,e=b?b.getLastChild():void 0;if(a.is(d))c.insertBefore(a),b.isEmpty()&&c.remove();else if(a.is(e))c.insertAfter(a),b.isEmpty()&&c.remove();else{let d=b.getListType(),e=V(),f=aa(d);e.append(f),a.getPreviousSiblings().forEach(a=>f.append(a));let g=V(),h=aa(d);g.append(h),N(h,a.getNextSiblings()),c.insertBefore(e),c.insertAfter(g),c.replace(a)}}}(this),b--);return this}canInsertAfter(a){return W(a)}canReplaceWith(a){return W(a)}canMergeWith(a){return W(a)||(0,E.$isParagraphNode)(a)}extractWithChild(a,b){if(!(0,E.$isRangeSelection)(b))return!1;let c=b.anchor.getNode(),d=b.focus.getNode();return this.isParentOf(c)&&this.isParentOf(d)&&this.getTextContent().length===b.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return aa("bullet")}canMergeWhenEmpty(){return!0}}function T(a){if(a.classList.contains("task-list-item")){for(let b of a.children)if("INPUT"===b.tagName)return U(b)}if(a.classList.contains("joplin-checkbox")){for(let b of a.children)if(b.classList.contains("checkbox-wrapper")&&b.children.length>0&&"INPUT"===b.children[0].tagName)return U(b.children[0])}let b=a.getAttribute("aria-checked");return{node:V("true"===b||"false"!==b&&void 0)}}function U(a){return"checkbox"!==a.getAttribute("type")?{node:null}:{node:V(a.hasAttribute("checked"))}}function V(a){return(0,E.$applyNodeReplacement)(new S(void 0,a))}function W(a){return a instanceof S}class X extends E.ElementNode{__tag;__start;__listType;$config(){return this.config("list",{$transform:a=>{let b;ab(b=a.getNextSibling())&&a.getListType()===b.getListType()&&P(a,b),Q(a)},extends:E.ElementNode,importDOM:(0,E.buildImportMap)({ol:()=>({conversion:$,priority:0}),ul:()=>({conversion:$,priority:0})})})}constructor(a="number",b=1,c){super(c);const d=_[a]||a;this.__listType=d,this.__tag="number"===d?"ol":"ul",this.__start=b}afterCloneFrom(a){super.afterCloneFrom(a),this.__listType=a.__listType,this.__tag=a.__tag,this.__start=a.__start}getTag(){return this.getLatest().__tag}setListType(a){let b=this.getWritable();return b.__listType=a,b.__tag="number"===a?"ol":"ul",b}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(a){let b=this.getWritable();return b.__start=a,b}createDOM(a,b){let c=this.__tag,d=document.createElement(c);return 1!==this.__start&&d.setAttribute("start",String(this.__start)),d.__lexicalListType=this.__listType,Y(d,a.theme,this),d}updateDOM(a,b,c){return a.__tag!==this.__tag||a.__listType!==this.__listType||(Y(b,c.theme,this),!1)}updateFromJSON(a){return super.updateFromJSON(a).setListType(a.listType).setStart(a.start)}exportDOM(a){let b=this.createDOM(a._config,a);return(0,E.isHTMLElement)(b)&&(1!==this.__start&&b.setAttribute("start",String(this.__start)),"check"===this.__listType&&b.setAttribute("__lexicalListType","check")),{element:b}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(a,b,c){let d=c;for(let a=0;a<c.length;a++){let b=c[a];W(b)||(d===c&&(d=[...c]),d[a]=V().append(!(0,E.$isElementNode)(b)||ab(b)||b.isInline()?b:(0,E.$createTextNode)(b.getTextContent())))}return super.splice(a,b,d)}extractWithChild(a){return W(a)}}function Y(a,b,d){let e=[],f=[],g=b.list;if(void 0!==g){let a,b=g[`${d.__tag}Depth`]||[],c=H(d)-1,h=c%b.length,i=b[h],j=g[d.__tag],k=g.nested,l=g.checklist;if(void 0!==k&&k.list&&(a=k.list),void 0!==j&&e.push(j),void 0!==l&&"check"===d.__listType&&e.push(l),void 0!==i){e.push(...R(i));for(let a=0;a<b.length;a++)a!==h&&f.push(d.__tag+a)}if(void 0!==a){let b=R(a);c>1?e.push(...b):f.push(...b)}}f.length>0&&(0,c.removeClassNamesFromElement)(a,...f),e.length>0&&(0,c.addClassNamesToElement)(a,...e)}function Z(a){let b=[];for(let c=0;c<a.length;c++){let d=a[c];if(W(d)){b.push(d);let a=d.getChildren();a.length>1&&a.forEach(a=>{ab(a)&&b.push(K(a))})}else b.push(K(d))}return b}function $(a){let b=a.nodeName.toLowerCase(),c=null;return"ol"===b?c=aa("number",a.start):"ul"===b&&(c=!function(a){if("check"===a.getAttribute("__lexicallisttype")||a.classList.contains("contains-task-list")||"1"===a.getAttribute("data-is-checklist"))return!0;for(let b of a.childNodes)if((0,E.isHTMLElement)(b)&&b.hasAttribute("aria-checked"))return!0;return!1}(a)?aa("bullet"):aa("check")),{after:Z,node:c}}let _={ol:"number",ul:"bullet"};function aa(a="number",b=1){return(0,E.$applyNodeReplacement)(new X(a,b))}function ab(a){return a instanceof X}let ac=(0,E.createCommand)("INSERT_CHECK_LIST_COMMAND");function ad(a,b){let d=a.target;if(!(0,E.isHTMLElement)(d))return;let e=d.firstChild;if((0,E.isHTMLElement)(e)&&("UL"===e.tagName||"OL"===e.tagName))return;let f=d.parentNode;if(!f||"check"!==f.__lexicalListType)return;let g=d.getBoundingClientRect(),h=(0,c.calculateZoomLevel)(d),i=a.clientX/h,j=parseFloat((window.getComputedStyle?window.getComputedStyle(d,"::before"):{width:"0px"}).width),k=32*("touch"===a.pointerType);("rtl"===d.dir?i<g.right+k&&i>g.right-j-k:i>g.left-k&&i<g.left+j+k)&&b()}function ae(a){ad(a,()=>{if((0,E.isHTMLElement)(a.target)){let b=a.target,c=(0,E.getNearestEditorFromDOMNode)(b);null!=c&&c.isEditable()&&c.update(()=>{let a=(0,E.$getNearestNodeFromDOMNode)(b);W(a)&&(b.focus(),a.toggleChecked())})}})}function af(a){ad(a,()=>{a.preventDefault()})}function ag(){let a=document.activeElement;return(0,E.isHTMLElement)(a)&&"LI"===a.tagName&&null!=a.parentNode&&"check"===a.parentNode.__lexicalListType?a:null}function ah(a,b,c){let d=ag();return null!=d&&b.update(()=>{let e=(0,E.$getNearestNodeFromDOMNode)(d);if(!W(e))return;let f=function(a,b){let c=b?a.getPreviousSibling():a.getNextSibling(),d=a;for(;null==c&&W(d);)null!=(d=d.getParentOrThrow().getParent())&&(c=b?d.getPreviousSibling():d.getNextSibling());for(;W(c);){let a=b?c.getLastChild():c.getFirstChild();if(!ab(a))return c;c=b?a.getLastChild():a.getFirstChild()}return null}(e,c);if(null!=f){f.selectStart();let c=b.getElementByKey(f.__key);null!=c&&(a.preventDefault(),setTimeout(()=>{c.focus()},0))}}),!1}let ai=(0,E.createCommand)("UPDATE_LIST_START_COMMAND"),aj=(0,E.createCommand)("INSERT_UNORDERED_LIST_COMMAND"),ak=(0,E.createCommand)("INSERT_ORDERED_LIST_COMMAND"),al=(0,E.createCommand)("REMOVE_LIST_COMMAND");function am(a){return(0,c.mergeRegister)(a.registerCommand(ak,()=>(M("number"),!0),E.COMMAND_PRIORITY_LOW),a.registerCommand(ai,a=>{let{listNodeKey:b,newStart:c}=a,d=(0,E.$getNodeByKey)(b);return!!ab(d)&&("number"===d.getListType()&&(d.setStart(c),Q(d)),!0)},E.COMMAND_PRIORITY_LOW),a.registerCommand(aj,()=>(M("bullet"),!0),E.COMMAND_PRIORITY_LOW),a.registerCommand(al,()=>((function(){let a=(0,E.$getSelection)();if((0,E.$isRangeSelection)(a)){let b=new Set,d=a.getNodes(),e=a.anchor.getNode();if(L(e,d))b.add(I(e));else for(let a=0;a<d.length;a++){let e=d[a];if((0,E.$isLeafNode)(e)){let a=(0,c.$getNearestNodeOfType)(e,S);null!=a&&b.add(I(a))}}for(let c of b){let b=c;for(let d of function a(b){let c=[],d=b.getChildren().filter(W);for(let b=0;b<d.length;b++){let e=d[b],f=e.getFirstChild();ab(f)?c=c.concat(a(f)):c.push(e)}return c}(c)){let c=(0,E.$createParagraphNode)().setTextStyle(a.style).setTextFormat(a.format);N(c,d.getChildren()),b.insertAfter(c),b=c,d.__key===a.anchor.key&&(0,E.$setPointFromCaret)(a.anchor,(0,E.$normalizeCaret)((0,E.$getChildCaret)(c,"next"))),d.__key===a.focus.key&&(0,E.$setPointFromCaret)(a.focus,(0,E.$normalizeCaret)((0,E.$getChildCaret)(c,"next"))),d.remove()}c.remove()}}})(),!0),E.COMMAND_PRIORITY_LOW),a.registerCommand(E.INSERT_PARAGRAPH_COMMAND,()=>(function(){let a,b=(0,E.$getSelection)();if(!(0,E.$isRangeSelection)(b)||!b.isCollapsed())return!1;let c=b.anchor.getNode();if(!W(c)||0!==c.getChildrenSize())return!1;let d=I(c),e=c.getParent();ab(e)||G(40);let f=e.getParent();if((0,E.$isRootOrShadowRoot)(f))a=(0,E.$createParagraphNode)(),d.insertAfter(a);else{if(!W(f))return!1;a=V(),f.insertAfter(a)}a.setTextStyle(b.style).setTextFormat(b.format).select();let g=c.getNextSiblings();if(g.length>0){let b=aa(e.getListType());if(W(a)){let c=V();c.append(b),a.insertAfter(c)}else a.insertAfter(b);b.append(...g)}return function(a){let b=a;for(;null==b.getNextSibling()&&null==b.getPreviousSibling();){let a=b.getParent();if(null==a||!W(a)&&!ab(a))break;b=a}b.remove()}(c),!0})(),E.COMMAND_PRIORITY_LOW),a.registerNodeTransform(S,a=>{let b=a.getFirstChild();if(b){if((0,E.$isTextNode)(b)){let c=b.getStyle(),d=b.getFormat();a.getTextStyle()!==c&&a.setTextStyle(c),a.getTextFormat()!==d&&a.setTextFormat(d)}}else{let b=(0,E.$getSelection)();(0,E.$isRangeSelection)(b)&&(b.style!==a.getTextStyle()||b.format!==a.getTextFormat())&&b.isCollapsed()&&a.is(b.anchor.getNode())&&a.setTextStyle(b.style).setTextFormat(b.format)}}),a.registerNodeTransform(E.TextNode,a=>{let b=a.getParent();if(W(b)&&a.is(b.getFirstChild())){let c=a.getStyle(),d=a.getFormat();c===b.getTextStyle()&&d===b.getTextFormat()||b.setTextStyle(c).setTextFormat(d)}}))}function an(a){let b=a=>{let b=a.getParent();if(ab(a.getFirstChild())||!ab(b))return;let c=(0,E.$findMatchingParent)(a,a=>W(a)&&ab(a.getParent())&&W(a.getPreviousSibling()));if(null===c&&a.getIndent()>0)a.setIndent(0);else if(W(c)){let d=c.getPreviousSibling();if(W(d)){let c=(function(a){let b=a,c=b.getFirstChild();for(;ab(c);){let a=c.getLastChild();if(!W(a))break;c=(b=a).getFirstChild()}return b})(d).getParent();if(ab(c)){let d=H(c);d+1<H(b)&&a.setIndent(d)}}}};return a.registerNodeTransform(X,a=>{let c=[a];for(;c.length>0;){let a=c.shift();if(ab(a)){for(let d of a.getChildren())if(W(d)){b(d);let a=d.getFirstChild();ab(a)&&c.push(a)}}}})}let ao=(0,E.defineExtension)({build:(a,b,c)=>(0,e.namedSignals)(b),config:(0,E.safeCast)({hasStrictIndent:!1}),name:"@lexical/list/List",nodes:[X,S],register(a,b,d){let f=d.getOutput();return(0,c.mergeRegister)(am(a),(0,e.effect)(()=>f.hasStrictIndent.value?an(a):void 0))}});(0,E.defineExtension)({dependencies:[ao],name:"@lexical/list/CheckList",register:function(a){return(0,c.mergeRegister)(a.registerCommand(ac,()=>(M("check"),!0),E.COMMAND_PRIORITY_LOW),a.registerCommand(E.KEY_ARROW_DOWN_COMMAND,b=>ah(b,a,!1),E.COMMAND_PRIORITY_LOW),a.registerCommand(E.KEY_ARROW_UP_COMMAND,b=>ah(b,a,!0),E.COMMAND_PRIORITY_LOW),a.registerCommand(E.KEY_ESCAPE_COMMAND,()=>{if(null!=ag()){let b=a.getRootElement();return null!=b&&b.focus(),!0}return!1},E.COMMAND_PRIORITY_LOW),a.registerCommand(E.KEY_SPACE_COMMAND,b=>{let c=ag();return!(null==c||!a.isEditable())&&(a.update(()=>{let a=(0,E.$getNearestNodeFromDOMNode)(c);W(a)&&(b.preventDefault(),a.toggleChecked())}),!0)},E.COMMAND_PRIORITY_LOW),a.registerCommand(E.KEY_ARROW_LEFT_COMMAND,b=>a.getEditorState().read(()=>{let c=(0,E.$getSelection)();if((0,E.$isRangeSelection)(c)&&c.isCollapsed()){let{anchor:d}=c,e="element"===d.type;if(e||0===d.offset){let c=d.getNode(),f=(0,E.$findMatchingParent)(c,a=>(0,E.$isElementNode)(a)&&!a.isInline());if(W(f)){let d=f.getParent();if(ab(d)&&"check"===d.getListType()&&(e||f.getFirstDescendant()===c)){let c=a.getElementByKey(f.__key);if(null!=c&&document.activeElement!==c)return c.focus(),b.preventDefault(),!0}}}}return!1}),E.COMMAND_PRIORITY_LOW),a.registerRootListener((a,b)=>{null!==a&&(a.addEventListener("click",ae),a.addEventListener("pointerdown",af)),null!==b&&(b.removeEventListener("click",ae),b.removeEventListener("pointerdown",af))}))}});var ap=a.i(946136),aq=a.i(57843),ar=a.i(282791),as=a.i(218050);function at(a){let b=(0,aq.useContext)(ay);if(!b)throw Error("Missing NoteEditorContext.Provider in the tree");return(0,ar.useStore)(b,a)}let au=()=>(0,aq.useContext)(ay),av={paragraph:"note-editor-theme_paragraph",list:{ul:"note-editor-theme_list-ul",listitem:"note-editor-theme_list-li"},link:"note-editor-theme_link",text:{italic:"note-editor-theme_text-italic",strikethrough:"note-editor-theme_text-strikethrough"}},aw=(0,aq.createContext)(null),ax=(0,aq.memo)(({value:a,children:c,editable:d=!0})=>{let e=(0,aq.useRef)(void 0);e.current||(e.current=(0,as.createStore)(a=>({linkAnchorElement:null,setLinkAnchorElement:b=>{b?setTimeout(()=>{let b=window.getSelection();if(b?.focusNode){let c=b.focusNode.parentElement;a(()=>({linkAnchorElement:c}))}}):a(()=>({linkAnchorElement:null}))},linkOperatorShow:!1,setLinkOperatorShow:b=>a(()=>({linkOperatorShow:b})),selectedIsBold:!1,setSelectedIsBold:b=>a(()=>({selectedIsBold:b})),selectedIsItalic:!1,setSelectedIsItalic:b=>a(()=>({selectedIsItalic:b})),selectedIsStrikeThrough:!1,setSelectedIsStrikeThrough:b=>a(()=>({selectedIsStrikeThrough:b})),selectedLinkUrl:"",setSelectedLinkUrl:b=>a(()=>({selectedLinkUrl:b})),selectedIsLink:!1,setSelectedIsLink:b=>a(()=>({selectedIsLink:b})),selectedIsBullet:!1,setSelectedIsBullet:b=>a(()=>({selectedIsBullet:b}))})));let f=null;try{f=JSON.parse(a)}catch{}let h={namespace:"note-editor",nodes:[g,X,S],editorState:f?.root.children.length?JSON.stringify(f):null,onError:a=>{throw a},theme:av,editable:d};return(0,b.jsx)(aw.Provider,{value:e.current,children:(0,b.jsx)(ap.LexicalComposer,{initialConfig:{...h},children:c})})});ax.displayName="NoteEditorContextProvider";let ay=aw;var az=a.i(914114);function aA({newTab:a=!0,disabled:b=!1}){let[c]=(0,az.useLexicalComposerContext)();return(0,aq.useEffect)(()=>u(c,(0,e.namedSignals)({disabled:b,newTab:a})),[c,a,b]),null}var aB=a.i(608422),aC=a.i(434877),aD=a.i(971707);function aE({validateUrl:a,attributes:b}){let[c]=(0,az.useLexicalComposerContext)();return(0,aq.useEffect)(()=>{if(!c.hasNodes([g]))throw Error("LinkPlugin: LinkNode not registered on editor")}),(0,aq.useEffect)(()=>s(c,(0,e.namedSignals)({attributes:b,validateUrl:a})),[c,a,b]),null}function aF({hasStrictIndent:a=!1}){let[b]=(0,az.useLexicalComposerContext)();return(0,aq.useEffect)(()=>{if(!b.hasNodes([X,S]))throw Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")},[b]),(0,aq.useEffect)(()=>{if(a)return an(b)},[b,a]),(0,aq.useEffect)(()=>am(b),[b]),null}var aG=a.i(563268),aH=a.i(336822),aI=a.i(951050),aJ=a.i(423201);function aK(a){let b=a.anchor,c=a.focus,d=a.anchor.getNode(),e=a.focus.getNode();return d===e?d:a.isBackward()?(0,F.$isAtNodeEnd)(c)?d:e:(0,F.$isAtNodeEnd)(b)?d:e}let aL=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%/.\w-]*)?\??[-+=&;%@.\w]*#?\w*)?)/,aM=()=>((()=>{let[a]=(0,az.useLexicalComposerContext)(),b=au(),c=(0,aq.useCallback)(()=>{a.getEditorState().read(()=>{if(a.isComposing())return;let c=(0,d.$getSelection)();if((0,d.$isRangeSelection)(c)){let a=aK(c),{setSelectedIsBold:d,setSelectedIsItalic:e,setSelectedIsStrikeThrough:f,setSelectedLinkUrl:g,setSelectedIsLink:h,setSelectedIsBullet:i}=b.getState();d(c.hasFormat("bold")),e(c.hasFormat("italic")),f(c.hasFormat("strikethrough"));let k=a.getParent();j(k)||j(a)?(g((j(k)?k:a).getURL()),h(!0)):(g(""),h(!1)),i(!!(W(k)||W(a)))}})},[a,b]);return(0,aq.useEffect)(()=>(document.addEventListener("selectionchange",c),()=>{document.removeEventListener("selectionchange",c)}),[c]),(0,aq.useEffect)(()=>(0,aJ.mergeRegister)(a.registerUpdateListener(()=>{c()})),[a,c])})(),null);var aN=a.i(909698),aO=a.i(591143),aP=a.i(429150),aQ=a.i(617633),aR=a.i(496345);a.i(752298);var aS=a.i(693025),aT=a.i(909795),aU=a.i(527344),aV=a.i(114715);let aW=(0,aq.memo)(({containerElement:a})=>{let{t:c}=(0,aS.useTranslation)(),{handleSaveLink:d,handleUnlink:e}=(()=>{let{t:a}=(0,aS.useTranslation)(),[b]=(0,az.useLexicalComposerContext)(),c=au(),{notify:d}=(0,aV.useToastContext)();return{handleSaveLink:(0,aq.useCallback)(e=>{if(e&&!aL.test(e))return void d({type:"error",message:a("nodes.note.editor.invalidUrl",{ns:"workflow"})});b.dispatchCommand(n,(0,aR.escape)(e));let{setLinkAnchorElement:f}=c.getState();f()},[b,c,d,a]),handleUnlink:(0,aq.useCallback)(()=>{b.dispatchCommand(n,null);let{setLinkAnchorElement:a}=c.getState();a()},[b,c])}})(),f=at(a=>a.selectedLinkUrl),g=at(a=>a.linkAnchorElement),h=at(a=>a.linkOperatorShow),i=at(a=>a.setLinkAnchorElement),j=at(a=>a.setLinkOperatorShow),[k,l]=(0,aq.useState)(f),{refs:m,floatingStyles:o,elements:p}=(0,aO.useFloating)({placement:"top",middleware:[(0,aN.offset)(4),(0,aN.shift)(),(0,aN.flip)()]});return(0,aQ.useClickAway)(()=>{i()},g),(0,aq.useEffect)(()=>{l(f)},[f]),(0,aq.useEffect)(()=>{g&&m.setReference(g)},[g,m]),(0,b.jsx)(b.Fragment,{children:p.reference&&(0,b.jsx)(aO.FloatingPortal,{root:a,children:(0,b.jsxs)("div",{className:(0,aU.cn)("nodrag nopan z-10 inline-flex w-max items-center rounded-md border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg",!h&&"p-1 shadow-md",h&&"system-xs-medium p-0.5 text-text-tertiary shadow-sm"),style:o,ref:m.setFloating,children:[!h&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("input",{className:"mr-0.5 h-6 w-[196px] appearance-none rounded-sm bg-transparent p-1 text-[13px] text-components-input-text-filled outline-none",value:k,onChange:a=>l(a.target.value),placeholder:c("nodes.note.editor.enterUrl",{ns:"workflow"})||"",autoFocus:!0}),(0,b.jsx)(aT.default,{variant:"primary",size:"small",disabled:!k,onClick:()=>d(k),children:c("operation.ok",{ns:"common"})})]}),h&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("a",{className:"flex h-6 items-center rounded-md px-2 hover:bg-state-base-hover",href:(0,aR.escape)(k),target:"_blank",rel:"noreferrer",children:[(0,b.jsx)(aP.RiExternalLinkLine,{className:"mr-1 h-3 w-3"}),(0,b.jsx)("div",{className:"mr-1",children:c("nodes.note.editor.openLink",{ns:"workflow"})}),(0,b.jsx)("div",{title:(0,aR.escape)(k),className:"max-w-[140px] truncate text-text-accent",children:(0,aR.escape)(k)})]}),(0,b.jsx)("div",{className:"mx-1 h-3.5 w-[1px] bg-divider-regular"}),(0,b.jsxs)("div",{className:"mr-0.5 flex h-6 cursor-pointer items-center rounded-md px-2 hover:bg-state-base-hover",onClick:a=>{a.stopPropagation(),j(!1)},children:[(0,b.jsx)(aP.RiEditLine,{className:"mr-1 h-3 w-3"}),c("operation.edit",{ns:"common"})]}),(0,b.jsxs)("div",{className:"flex h-6 cursor-pointer items-center rounded-md px-2 hover:bg-state-base-hover",onClick:e,children:[(0,b.jsx)(aP.RiLinkUnlinkM,{className:"mr-1 h-3 w-3"}),c("nodes.note.editor.unlink",{ns:"workflow"})]})]})]})})})}),aX=(0,aq.memo)(({containerElement:a})=>((()=>{let[a]=(0,az.useLexicalComposerContext)(),b=au();(0,aq.useEffect)(()=>(0,aJ.mergeRegister)(a.registerUpdateListener(()=>{setTimeout(()=>{let{selectedLinkUrl:a,selectedIsLink:c,setLinkAnchorElement:d,setLinkOperatorShow:e}=b.getState();c?(d(!0),e(!!a)):(d(),e(!1))})}),a.registerCommand(d.CLICK_COMMAND,a=>(setTimeout(()=>{let{selectedLinkUrl:c,selectedIsLink:d,setLinkAnchorElement:e,setLinkOperatorShow:f}=b.getState();if(d){if((a.metaKey||a.ctrlKey)&&c)return window.open(c,"_blank"),!0;e(!0),f(!!c)}else e(),f(!1)}),!1),d.COMMAND_PRIORITY_LOW)),[a,b])})(),at(a=>a.linkAnchorElement))?(0,b.jsx)(aW,{containerElement:a}):null),aY=(0,aq.memo)(({placeholder:a="write you note...",onChange:c,containerElement:d,setShortcutsEnabled:e})=>{let f=(0,aq.useCallback)(a=>{c?.(a)},[c]);return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(aH.RichTextPlugin,{contentEditable:(0,b.jsx)("div",{children:(0,b.jsx)(aB.ContentEditable,{onFocus:()=>e?.(!1),onBlur:()=>e?.(!0),spellCheck:!1,className:"h-full w-full text-text-secondary caret-primary-600 outline-none"})}),placeholder:(0,b.jsx)(aI.default,{value:a,compact:!0}),ErrorBoundary:aC.LexicalErrorBoundary}),(0,b.jsx)(aA,{disabled:!0}),(0,b.jsx)(aE,{}),(0,b.jsx)(aF,{}),(0,b.jsx)(aX,{containerElement:d}),(0,b.jsx)(aM,{}),(0,b.jsx)(aD.HistoryPlugin,{}),(0,b.jsx)(aG.OnChangePlugin,{onChange:f})]})});var aZ=a.i(825319),a$=a.i(262717),a_=a.i(447968);let a0=[{key:a_.NoteTheme.blue,inner:a$.THEME_MAP[a_.NoteTheme.blue].title,outer:a$.THEME_MAP[a_.NoteTheme.blue].outer},{key:a_.NoteTheme.cyan,inner:a$.THEME_MAP[a_.NoteTheme.cyan].title,outer:a$.THEME_MAP[a_.NoteTheme.cyan].outer},{key:a_.NoteTheme.green,inner:a$.THEME_MAP[a_.NoteTheme.green].title,outer:a$.THEME_MAP[a_.NoteTheme.green].outer},{key:a_.NoteTheme.yellow,inner:a$.THEME_MAP[a_.NoteTheme.yellow].title,outer:a$.THEME_MAP[a_.NoteTheme.yellow].outer},{key:a_.NoteTheme.pink,inner:a$.THEME_MAP[a_.NoteTheme.pink].title,outer:a$.THEME_MAP[a_.NoteTheme.pink].outer},{key:a_.NoteTheme.violet,inner:a$.THEME_MAP[a_.NoteTheme.violet].title,outer:a$.THEME_MAP[a_.NoteTheme.violet].outer}],a1=(0,aq.memo)(({theme:a,onThemeChange:c})=>{let[d,e]=(0,aq.useState)(!1);return(0,b.jsxs)(aZ.PortalToFollowElem,{open:d,onOpenChange:e,placement:"top",offset:4,children:[(0,b.jsx)(aZ.PortalToFollowElemTrigger,{onClick:()=>e(!d),children:(0,b.jsx)("div",{className:(0,aU.cn)("flex h-8 w-8 cursor-pointer items-center justify-center rounded-md hover:bg-black/5",d&&"bg-black/5"),children:(0,b.jsx)("div",{className:(0,aU.cn)("h-4 w-4 rounded-full border border-black/5",a$.THEME_MAP[a].title)})})}),(0,b.jsx)(aZ.PortalToFollowElemContent,{children:(0,b.jsx)("div",{className:"grid grid-cols-3 grid-rows-2 gap-0.5 rounded-lg border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg p-0.5 shadow-lg",children:a0.map(a=>(0,b.jsxs)("div",{className:"group relative flex h-8 w-8 cursor-pointer items-center justify-center rounded-md",onClick:b=>{b.stopPropagation(),c(a.key),e(!1)},children:[(0,b.jsx)("div",{className:(0,aU.cn)("absolute left-1/2 top-1/2 hidden h-5 w-5 -translate-x-1/2 -translate-y-1/2 rounded-full border-[1.5px] group-hover:block",a.outer)}),(0,b.jsx)("div",{className:(0,aU.cn)("absolute left-1/2 top-1/2 h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full border border-black/5",a.inner)})]},a.key))})})]})});var a2=a.i(483664);let a3=(0,aq.memo)(({type:a})=>{let{t:c}=(0,aS.useTranslation)(),e=at(a=>a.selectedIsBold),f=at(a=>a.selectedIsItalic),g=at(a=>a.selectedIsStrikeThrough),h=at(a=>a.selectedIsLink),i=at(a=>a.selectedIsBullet),{handleCommand:k}=(()=>{let[a]=(0,az.useLexicalComposerContext)(),b=au();return{handleCommand:(0,aq.useCallback)(c=>{if("bold"===c&&a.dispatchCommand(d.FORMAT_TEXT_COMMAND,"bold"),"italic"===c&&a.dispatchCommand(d.FORMAT_TEXT_COMMAND,"italic"),"strikethrough"===c&&a.dispatchCommand(d.FORMAT_TEXT_COMMAND,"strikethrough"),"link"===c&&a.update(()=>{let c=(0,d.$getSelection)();if((0,d.$isRangeSelection)(c)){let d=aK(c),e=d.getParent(),{setLinkAnchorElement:f}=b.getState();j(e)||j(d)?(a.dispatchCommand(n,null),f()):(a.dispatchCommand(n,""),f(!0))}}),"bullet"===c){let{selectedIsBullet:c}=b.getState();c?a.update(()=>{let a=(0,d.$getSelection)();(0,d.$isRangeSelection)(a)&&(0,F.$setBlocksType)(a,()=>(0,d.$createParagraphNode)())}):a.dispatchCommand(aj,void 0)}},[a,b])}})(),l=(0,aq.useMemo)(()=>{switch(a){case"bold":return(0,b.jsx)(aP.RiBold,{className:(0,aU.cn)("h-4 w-4",e&&"text-primary-600")});case"italic":return(0,b.jsx)(aP.RiItalic,{className:(0,aU.cn)("h-4 w-4",f&&"text-primary-600")});case"strikethrough":return(0,b.jsx)(aP.RiStrikethrough,{className:(0,aU.cn)("h-4 w-4",g&&"text-primary-600")});case"link":return(0,b.jsx)(aP.RiLink,{className:(0,aU.cn)("h-4 w-4",h&&"text-primary-600")});case"bullet":return(0,b.jsx)(aP.RiListUnordered,{className:(0,aU.cn)("h-4 w-4",i&&"text-primary-600")})}},[a,e,f,g,h,i]),m=(0,aq.useMemo)(()=>{switch(a){case"bold":return c("nodes.note.editor.bold",{ns:"workflow"});case"italic":return c("nodes.note.editor.italic",{ns:"workflow"});case"strikethrough":return c("nodes.note.editor.strikethrough",{ns:"workflow"});case"link":return c("nodes.note.editor.link",{ns:"workflow"});case"bullet":return c("nodes.note.editor.bulletList",{ns:"workflow"})}},[a,c]);return(0,b.jsx)(a2.default,{popupContent:m,children:(0,b.jsx)("div",{className:(0,aU.cn)("flex h-8 w-8 cursor-pointer items-center justify-center rounded-md text-text-tertiary hover:bg-state-accent-active hover:text-text-accent","bold"===a&&e&&"bg-state-accent-active","italic"===a&&f&&"bg-state-accent-active","strikethrough"===a&&g&&"bg-state-accent-active","link"===a&&h&&"bg-state-accent-active","bullet"===a&&i&&"bg-state-accent-active"),onClick:()=>k(a),children:l})})}),a4=()=>(0,b.jsx)("div",{className:"mx-1 h-3.5 w-[1px] bg-divider-regular"});a.i(622666);var a5=a.i(332945);let a6=(0,aq.memo)(()=>{let{t:a}=(0,aS.useTranslation)(),c=[{key:"12px",value:a("nodes.note.editor.small",{ns:"workflow"})},{key:"14px",value:a("nodes.note.editor.medium",{ns:"workflow"})},{key:"16px",value:a("nodes.note.editor.large",{ns:"workflow"})}],{fontSizeSelectorShow:e,handleOpenFontSizeSelector:f,fontSize:g,handleFontSize:h}=(()=>{let[a]=(0,az.useLexicalComposerContext)(),[b,c]=(0,aq.useState)("12px"),[e,f]=(0,aq.useState)(!1),g=(0,aq.useCallback)(b=>{a.update(()=>{let a=(0,d.$getSelection)();(0,d.$isRangeSelection)(a)&&(0,F.$patchStyleText)(a,{"font-size":b})})},[a]),h=(0,aq.useCallback)(b=>{b&&a.update(()=>{let a=(0,d.$getSelection)();(0,d.$isRangeSelection)(a)&&(0,d.$setSelection)(a.clone())}),f(b)},[a]);return(0,aq.useEffect)(()=>(0,aJ.mergeRegister)(a.registerUpdateListener(()=>{a.getEditorState().read(()=>{let a=(0,d.$getSelection)();(0,d.$isRangeSelection)(a)&&c((0,F.$getSelectionStyleValueForProperty)(a,"font-size","12px"))})}),a.registerCommand(d.SELECTION_CHANGE_COMMAND,()=>{let a=(0,d.$getSelection)();return(0,d.$isRangeSelection)(a)&&c((0,F.$getSelectionStyleValueForProperty)(a,"font-size","12px")),!1},d.COMMAND_PRIORITY_CRITICAL)),[a]),{fontSize:b,handleFontSize:g,fontSizeSelectorShow:e,handleOpenFontSizeSelector:h}})();return(0,b.jsxs)(aZ.PortalToFollowElem,{open:e,onOpenChange:f,placement:"bottom-start",offset:2,children:[(0,b.jsx)(aZ.PortalToFollowElemTrigger,{onClick:()=>f(!e),children:(0,b.jsxs)("div",{className:(0,aU.cn)("flex h-8 cursor-pointer items-center rounded-md pl-2 pr-1.5 text-[13px] font-medium text-text-tertiary hover:bg-state-base-hover hover:text-text-secondary",e&&"bg-state-base-hover text-text-secondary"),children:[(0,b.jsx)(aP.RiFontSize,{className:"mr-1 h-4 w-4"}),c.find(a=>a.key===g)?.value||a("nodes.note.editor.small",{ns:"workflow"})]})}),(0,b.jsx)(aZ.PortalToFollowElemContent,{children:(0,b.jsx)("div",{className:"w-[120px] rounded-md border-[0.5px] border-components-panel-border bg-components-panel-bg-blur p-1 text-text-secondary shadow-xl",children:c.map(a=>(0,b.jsxs)("div",{className:"flex h-8 cursor-pointer items-center justify-between rounded-md pl-3 pr-2 hover:bg-state-base-hover",onClick:b=>{b.stopPropagation(),h(a.key),f(!1)},children:[(0,b.jsx)("div",{style:{fontSize:a.key},children:a.value}),g===a.key&&(0,b.jsx)(a5.Check,{className:"h-4 w-4 text-text-accent"})]},a.key))})})]})});var a7=a.i(81492),a8=a.i(56328);let a9=(0,aq.memo)(({onCopy:a,onDelete:c,onDuplicate:d,showAuthor:e,onShowAuthorChange:f})=>{let{t:g}=(0,aS.useTranslation)(),[h,i]=(0,aq.useState)(!1);return(0,b.jsxs)(aZ.PortalToFollowElem,{open:h,onOpenChange:i,placement:"bottom-end",offset:4,children:[(0,b.jsx)(aZ.PortalToFollowElemTrigger,{onClick:()=>i(!h),children:(0,b.jsx)("div",{className:(0,aU.cn)("flex h-8 w-8 cursor-pointer items-center justify-center rounded-lg text-text-tertiary hover:bg-state-base-hover hover:text-text-secondary",h&&"bg-state-base-hover text-text-secondary"),children:(0,b.jsx)(aP.RiMoreFill,{className:"h-4 w-4"})})}),(0,b.jsx)(aZ.PortalToFollowElemContent,{children:(0,b.jsxs)("div",{className:"min-w-[192px] rounded-md border-[0.5px] border-components-panel-border bg-components-panel-bg-blur shadow-xl",children:[(0,b.jsxs)("div",{className:"p-1",children:[(0,b.jsxs)("div",{className:"flex h-8 cursor-pointer items-center justify-between rounded-md px-3 text-sm text-text-secondary hover:bg-state-base-hover",onClick:()=>{a(),i(!1)},children:[g("common.copy",{ns:"workflow"}),(0,b.jsx)(a8.default,{keys:["ctrl","c"]})]}),(0,b.jsxs)("div",{className:"flex h-8 cursor-pointer items-center justify-between rounded-md px-3 text-sm text-text-secondary hover:bg-state-base-hover",onClick:()=>{d(),i(!1)},children:[g("common.duplicate",{ns:"workflow"}),(0,b.jsx)(a8.default,{keys:["ctrl","d"]})]})]}),(0,b.jsx)("div",{className:"h-px bg-divider-subtle"}),(0,b.jsx)("div",{className:"p-1",children:(0,b.jsxs)("div",{className:"flex h-8 cursor-pointer items-center justify-between rounded-md px-3 text-sm text-text-secondary hover:bg-state-base-hover",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("div",{children:g("nodes.note.editor.showAuthor",{ns:"workflow"})}),(0,b.jsx)(a7.default,{size:"l",defaultValue:e,onChange:f})]})}),(0,b.jsx)("div",{className:"h-px bg-divider-subtle"}),(0,b.jsx)("div",{className:"p-1",children:(0,b.jsxs)("div",{className:"flex h-8 cursor-pointer items-center justify-between rounded-md px-3 text-sm text-text-secondary hover:bg-state-destructive-hover hover:text-text-destructive",onClick:()=>{c(),i(!1)},children:[g("operation.delete",{ns:"common"}),(0,b.jsx)(a8.default,{keys:["del"]})]})})]})})]})}),ba=(0,aq.memo)(({theme:a,onThemeChange:c,onCopy:d,onDuplicate:e,onDelete:f,showAuthor:g,onShowAuthorChange:h})=>(0,b.jsxs)("div",{className:"inline-flex items-center rounded-lg border-[0.5px] border-components-actionbar-border bg-components-actionbar-bg p-0.5 shadow-sm",children:[(0,b.jsx)(a1,{theme:a,onThemeChange:c}),(0,b.jsx)(a4,{}),(0,b.jsx)(a6,{}),(0,b.jsx)(a4,{}),(0,b.jsxs)("div",{className:"flex items-center space-x-0.5",children:[(0,b.jsx)(a3,{type:"bold"}),(0,b.jsx)(a3,{type:"italic"}),(0,b.jsx)(a3,{type:"strikethrough"}),(0,b.jsx)(a3,{type:"link"}),(0,b.jsx)(a3,{type:"bullet"})]}),(0,b.jsx)(a4,{}),(0,b.jsx)(a9,{onCopy:d,onDuplicate:e,onDelete:f,showAuthor:g,onShowAuthorChange:h})]}));a.s(["default",0,ba],735117),a.s([],727323),a.s(["NoteEditor",0,aY],747867)},665982,113168,a=>{"use strict";var b=a.i(608061),c=a.i(57843),d=a.i(970502);let e=(0,c.memo)(({fromX:a,fromY:c,toX:e,toY:f})=>{let[g]=(0,d.getBezierPath)({sourceX:a,sourceY:c,sourcePosition:d.Position.Right,targetX:e,targetY:f,targetPosition:d.Position.Left,curvature:.16});return(0,b.jsxs)("g",{children:[(0,b.jsx)("path",{fill:"none",stroke:"#D0D5DD",strokeWidth:2,d:g}),(0,b.jsx)("rect",{x:e,y:f-4,width:2,height:8,fill:"#2970FF"})]})});a.s(["default",0,e],665982),a.s(["default",0,({id:a,startColor:c,stopColor:d,position:e})=>{let{x1:f,x2:g,y1:h,y2:i}=e;return(0,b.jsx)("defs",{children:(0,b.jsxs)("linearGradient",{id:a,gradientUnits:"userSpaceOnUse",x1:f,y1:h,x2:g,y2:i,children:[(0,b.jsx)("stop",{offset:"0%",style:{stopColor:c,stopOpacity:1}}),(0,b.jsx)("stop",{offset:"100%",style:{stopColor:d,stopOpacity:1}})]})})}],113168)},119359,a=>{"use strict";var b=a.i(57843),c=a.i(517817),d=a.i(28296);a.i(633534);var e=a.i(87297),f=a.i(539704),g=a.i(455784),h=a.i(34669),i=a.i(970502);let j=({id:a,x:d,y:e,width:f,height:g,style:h,color:i,strokeColor:j,strokeWidth:k,className:l,borderRadius:m,shapeRendering:n,onClick:o,selected:p})=>{let{background:q,backgroundColor:r}=h||{};return b.default.createElement("rect",{className:(0,c.default)(["react-flow__minimap-node",{selected:p},l]),x:d,y:e,rx:m,ry:m,width:f,height:g,fill:i||q||r,stroke:j,strokeWidth:k,shapeRendering:n,onClick:o?b=>o(b,a):void 0})};j.displayName="MiniMapNode";var k=(0,b.memo)(j);let l=a=>a.nodeOrigin,m=a=>a.getNodes().filter(a=>!a.hidden&&a.width&&a.height),n=a=>a instanceof Function?a:()=>a;var o=(0,b.memo)(function({nodeStrokeColor:a="transparent",nodeColor:c="#e2e2e2",nodeClassName:e="",nodeBorderRadius:f=5,nodeStrokeWidth:g=2,nodeComponent:h=k,onClick:j}){let o=(0,i.useStore)(m,d.shallow),p=(0,i.useStore)(l),q=n(c),r=n(a),s=n(e);return b.default.createElement(b.default.Fragment,null,o.map(a=>{let{x:c,y:d}=(0,i.getNodePositionWithOrigin)(a,p).positionAbsolute;return b.default.createElement(h,{key:a.id,x:c,y:d,width:a.width,height:a.height,style:a.style,selected:a.selected,className:s(a),color:q(a),borderRadius:f,strokeColor:r(a),strokeWidth:g,shapeRendering:"crispEdges",onClick:j,id:a.id})}))});let p=a=>{let b=a.getNodes(),c={x:-a.transform[0]/a.transform[2],y:-a.transform[1]/a.transform[2],width:a.width/a.transform[2],height:a.height/a.transform[2]};return{viewBB:c,boundingRect:b.length>0?(0,i.getBoundsOfRects)((0,i.getNodesBounds)(b,a.nodeOrigin),c):c,rfId:a.rfId}};function q({style:a,className:j,nodeStrokeColor:k="transparent",nodeColor:l="#e2e2e2",nodeClassName:m="",nodeBorderRadius:n=5,nodeStrokeWidth:q=2,nodeComponent:r,maskColor:s="rgb(240, 240, 240, 0.6)",maskStrokeColor:t="none",maskStrokeWidth:u=1,position:v="bottom-right",onClick:w,onNodeClick:x,pannable:y=!1,zoomable:z=!1,ariaLabel:A="React Flow mini map",inversePan:B=!1,zoomStep:C=10,offsetScale:D=5}){let E=(0,i.useStoreApi)(),F=(0,b.useRef)(null),{boundingRect:G,viewBB:H,rfId:I}=(0,i.useStore)(p,d.shallow),J=a?.width??200,K=a?.height??150,L=Math.max(G.width/J,G.height/K),M=L*J,N=L*K,O=D*L,P=G.x-(M-G.width)/2-O,Q=G.y-(N-G.height)/2-O,R=M+2*O,S=N+2*O,T=`react-flow__minimap-desc-${I}`,U=(0,b.useRef)(0);U.current=L,(0,b.useEffect)(()=>{if(F.current){let a=(0,g.select)(F.current),b=(0,e.zoom)().on("zoom",y?a=>{let{transform:b,d3Selection:c,d3Zoom:d,translateExtent:e,width:g,height:h}=E.getState();if("mousemove"!==a.sourceEvent.type||!c||!d)return;let i=U.current*Math.max(1,b[2])*(B?-1:1),j={x:b[0]-a.sourceEvent.movementX*i,y:b[1]-a.sourceEvent.movementY*i},k=f.zoomIdentity.translate(j.x,j.y).scale(b[2]),l=d.constrain()(k,[[0,0],[g,h]],e);d.transform(c,l)}:null).on("zoom.wheel",z?a=>{let{transform:b,d3Selection:c,d3Zoom:d}=E.getState();if("wheel"!==a.sourceEvent.type||!c||!d)return;let e=-a.sourceEvent.deltaY*(1===a.sourceEvent.deltaMode?.05:a.sourceEvent.deltaMode?1:.002)*C,f=b[2]*Math.pow(2,e);d.scaleTo(c,f)}:null);return a.call(b),()=>{a.on("zoom",null)}}},[y,z,B,C]);let V=w?a=>{let b=(0,h.pointer)(a);w(a,{x:b[0],y:b[1]})}:void 0,W=x?(a,b)=>{x(a,E.getState().nodeInternals.get(b))}:void 0;return b.default.createElement(i.Panel,{position:v,style:a,className:(0,c.default)(["react-flow__minimap",j]),"data-testid":"rf__minimap"},b.default.createElement("svg",{width:J,height:K,viewBox:`${P} ${Q} ${R} ${S}`,role:"img","aria-labelledby":T,ref:F,onClick:V},A&&b.default.createElement("title",{id:T},A),b.default.createElement(o,{onClick:W,nodeColor:l,nodeStrokeColor:k,nodeBorderRadius:n,nodeClassName:m,nodeStrokeWidth:q,nodeComponent:r}),b.default.createElement("path",{className:"react-flow__minimap-mask",d:`M${P-O},${Q-O}h${R+2*O}v${S+2*O}h${-R-2*O}z
        M${H.x},${H.y}h${H.width}v${H.height}h${-H.width}z`,fill:s,fillRule:"evenodd",stroke:t,strokeWidth:u,pointerEvents:"none"})))}q.displayName="MiniMap";var r=(0,b.memo)(q);a.s(["MiniMap",()=>r])},208346,a=>{"use strict";var b=a.i(608061),c=a.i(57843),d=a.i(483664),e=a.i(56328);let f=(0,c.memo)(({title:a,children:c,shortcuts:f})=>(0,b.jsx)(d.default,{needsDelay:!1,offset:4,popupClassName:"p-0 bg-transparent",popupContent:(0,b.jsxs)("div",{className:"flex items-center gap-1 rounded-lg border-[0.5px] border-components-panel-border bg-components-tooltip-bg p-1.5 shadow-lg backdrop-blur-[5px]",children:[(0,b.jsx)("span",{className:"system-xs-medium text-text-secondary",children:a}),f&&(0,b.jsx)(e.default,{keys:f})]}),children:c}));a.s(["default",0,f])}];

//# sourceMappingURL=_7abffe2d._.js.map