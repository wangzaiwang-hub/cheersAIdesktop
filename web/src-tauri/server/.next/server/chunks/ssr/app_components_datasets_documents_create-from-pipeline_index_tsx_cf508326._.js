module.exports=[270220,a=>{"use strict";var b,c=a.i(608061),d=a.i(497746),e=a.i(57843);a.i(752298);var f=a.i(693025),g=a.i(105249),h=a.i(681073),i=a.i(698636),j=a.i(375616),k=a.i(827460),l=a.i(763539),m=a.i(599656),n=a.i(712019),o=a.i(925415),p=((b={}).dataSource="dataSource",b.processDocuments="processDocuments",b.processingDocuments="processingDocuments",b);a.i(60796);var q=a.i(55282),r=a.i(954200);let s=(a,b)=>({related_id:a.id,name:a.name,type:a.type,size:a.size,extension:a.extension,mime_type:a.mime_type,url:"",transfer_method:r.TransferMethod.local_file,credential_id:b}),t=(a,b)=>{let{workspace_id:c,...d}=a;return{workspace_id:c,page:d,credential_id:b}},u=(a,b)=>({...a,credential_id:b}),v=(a,b,c)=>({bucket:b,id:a.id,name:a.name,type:a.type,credential_id:c});var w=a.i(735310),x=a.i(388206),y=a.i(986431),z=a.i(429150),A=a.i(413192),B=a.i(533306),C=a.i(909795),D=a.i(22761),E=a.i(527344);let F=e.memo(({currentStep:a,steps:b})=>(0,c.jsx)("div",{className:"flex gap-x-1",children:b.map((b,d)=>(0,c.jsx)("div",{className:(0,E.cn)("h-1 w-1 rounded-lg bg-divider-solid",d===a-1&&"w-2 bg-state-accent-solid")},b.value))})),G=e.memo(({steps:a,title:b,currentStep:d})=>{let{datasetId:e}=(0,B.useParams)();return(0,c.jsxs)("div",{className:"relative flex flex-col gap-y-0.5 pb-2 pt-4",children:[(0,c.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,c.jsx)("span",{className:"system-2xs-semibold-uppercase bg-pipeline-add-documents-title-bg bg-clip-text text-transparent",children:b}),(0,c.jsx)("span",{className:"system-2xs-regular text-divider-regular",children:"/"}),(0,c.jsx)(F,{steps:a,currentStep:d})]}),(0,c.jsx)("div",{className:"system-md-semibold text-text-primary",children:a[d-1]?.label}),d!==a.length&&(0,c.jsx)(A.default,{href:`/datasets/${e}/documents`,replace:!0,children:(0,c.jsx)(C.default,{variant:"secondary-accent",className:"absolute -left-11 top-3.5 size-9 rounded-full p-0",children:(0,c.jsx)(z.RiArrowLeftLine,{className:"size-5 "})})}),(0,c.jsx)(D.default,{className:"left-8 top-[-34px] opacity-20"})]})});var H=a.i(757801),I=a.i(623090),J=a.i(726831),K=a.i(626039),L=a.i(640761),M=a.i(940233),N=a.i(377349),O=a.i(168799);let P=e.memo(({disabled:a,handleNextStep:b,showSelect:d=!1,totalOptions:g,selectedOptions:h,onSelectAll:i,tip:j=""})=>{let{t:k}=(0,f.useTranslation)(),{datasetId:l}=(0,B.useParams)(),m=(0,e.useMemo)(()=>!!d&&void 0!==h&&void 0!==g&&h>0&&h<g,[d,h,g]),n=(0,e.useMemo)(()=>!!d&&void 0!==h&&void 0!==g&&h>0&&h===g,[d,h,g]);return(0,c.jsxs)("div",{className:"flex items-center gap-x-2 overflow-hidden",children:[d&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex shrink-0 items-center gap-x-2 py-[3px] pl-4 pr-2",children:[(0,c.jsx)(O.default,{onCheck:i,indeterminate:m,checked:n}),(0,c.jsx)("span",{className:"system-sm-medium text-text-accent",children:k("operation.selectAll",{ns:"common"})})]}),j&&(0,c.jsx)("div",{title:j,className:"system-xs-regular max-w-full truncate text-text-tertiary",children:j})]}),(0,c.jsxs)("div",{className:"flex grow items-center justify-end gap-x-2",children:[(0,c.jsx)(A.default,{href:`/datasets/${l}/documents`,replace:!0,children:(0,c.jsx)(C.default,{variant:"ghost",className:"px-3 py-2",children:k("operation.cancel",{ns:"common"})})}),(0,c.jsxs)(C.default,{disabled:a,variant:"primary",onClick:b,className:"gap-x-0.5",children:[(0,c.jsx)("span",{className:"px-0.5",children:k("stepOne.button",{ns:"datasetCreation"})}),(0,c.jsx)(z.RiArrowRightLine,{className:"size-4"})]})]})]})}),Q={xs:"w-4 h-4 rounded-[5px] shadow-xs",sm:"w-5 h-5 rounded-md shadow-xs",md:"w-6 h-6 rounded-lg shadow-md"},R=(0,e.memo)(({size:a="sm",className:b,iconUrl:d})=>(0,c.jsx)("div",{className:(0,E.cn)("flex items-center justify-center shadow-none",Q[a],b),children:(0,c.jsx)("div",{className:"h-full w-full shrink-0 rounded-md bg-cover bg-center",style:{backgroundImage:`url(${d})`}})}));var S=a.i(674766),T=a.i(499257);let U=e.memo(({label:a,selected:b,nodeData:d,onClick:f})=>{let g=(a=>{let{data:b,isSuccess:c}=(0,m.useDataSourceList)(!0);return(0,e.useMemo)(()=>{if(!c)return;let d=[...b||[]];d.forEach(a=>{let b=a.declaration.identity.icon;"string"!=typeof b||b.includes(T.basePath)||(a.declaration.identity.icon=`${T.basePath}${b}`)});let e=d.map(a=>(0,S.transformDataSourceToTool)(a));return e?.find(b=>b.plugin_id===a.plugin_id)?.icon},[a.plugin_id,b,c])})(d);return(0,c.jsxs)("div",{className:(0,E.cn)("flex cursor-pointer items-center gap-2 rounded-xl border border-components-option-card-option-border bg-components-option-card-option-bg p-3 shadow-shadow-shadow-3",b?"border-components-option-card-option-selected-border bg-components-option-card-option-selected-bg shadow-xs ring-[0.5px] ring-inset ring-components-option-card-option-selected-border":"hover:bg-components-option-card-bg-hover hover:border-components-option-card-option-border-hover hover:shadow-xs"),onClick:f,children:[(0,c.jsx)("div",{className:"flex size-8 shrink-0 items-center justify-center rounded-lg border-[0.5px] border-components-panel-border bg-background-default-dodge p-1.5",children:(0,c.jsx)(R,{iconUrl:g})}),(0,c.jsx)("div",{className:(0,E.cn)("system-sm-medium line-clamp-2 grow text-text-secondary",b&&"text-text-primary"),title:a,children:a})]})}),V=({pipelineNodes:a,datasourceNodeId:b,onSelect:d})=>{let f,g=(f=a.filter(a=>a.data.type===w.BlockEnum.DataSource),(0,e.useMemo)(()=>{let a=[];return f.forEach(b=>{let c=b.data.title;a.push({label:c,value:b.id,data:b.data})}),a},[f])),h=(0,e.useCallback)(a=>{let b=g.find(b=>b.value===a);b&&d({nodeId:b.value,nodeData:b.data})},[d,g]);return(0,e.useEffect)(()=>{g.length>0&&!b&&h(g[0].value)},[]),(0,c.jsx)("div",{className:"grid w-full grid-cols-4 gap-1",children:g.map(a=>(0,c.jsx)(U,{label:a.label,selected:b===a.value,nodeData:a.data,onClick:h.bind(null,a.value)},a.value))})},W=(0,e.memo)(({datasource:a,datasourceType:b,pipelineNodes:d,supportBatchUpload:e,localFileListLength:f,isShowVectorSpaceFull:g,showSelect:h,totalOptions:i,selectedOptions:j,tip:l,nextBtnDisabled:m,onSelectDataSource:n,onCredentialChange:o,onSelectAll:p,onNextStep:q})=>{let r=!e&&b===k.DatasourceType.localFile&&f>0;return(0,c.jsxs)("div",{className:"flex flex-col gap-y-5 pt-4",children:[(0,c.jsx)(V,{datasourceNodeId:a?.nodeId||"",onSelect:n,pipelineNodes:d}),b===k.DatasourceType.localFile&&(0,c.jsx)(J.default,{allowedExtensions:a.nodeData.fileExtensions||[],supportBatchUpload:e}),b===k.DatasourceType.onlineDocument&&(0,c.jsx)(K.default,{nodeId:a.nodeId,nodeData:a.nodeData,onCredentialChange:o}),b===k.DatasourceType.websiteCrawl&&(0,c.jsx)(M.default,{nodeId:a.nodeId,nodeData:a.nodeData,onCredentialChange:o}),b===k.DatasourceType.onlineDrive&&(0,c.jsx)(L.default,{nodeId:a.nodeId,nodeData:a.nodeData,onCredentialChange:o}),g&&(0,c.jsx)(I.default,{}),(0,c.jsx)(P,{showSelect:h,totalOptions:i,selectedOptions:j,onSelectAll:p,disabled:m,handleNextStep:q,tip:l}),r&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(H.default,{type:"horizontal",className:"my-4 h-px bg-divider-subtle"}),(0,c.jsx)(N.default,{})]})]})});var X=a.i(252813),Y=a.i(965442),Z=a.i(483664),$=a.i(906055),_=a.i(931164),aa=a.i(747104),ab=a.i(42521),ac=a.i(61500),ad=a.i(847733),ae=a.i(820051),af=a.i(682541),ag=a.i(958887);a.i(387799);var ah=a.i(944054),ai=a.i(867385);let aj=e.memo(({sourceData:a,indexingType:b,retrievalMethod:d})=>{let{t:g}=(0,f.useTranslation)(),h=(0,e.useCallback)(b=>{let c="-";return"mode"===b&&(c=a?.mode?a.mode===y.ProcessMode.general?g("embedding.custom",{ns:"datasetDocuments"}):`${g("embedding.hierarchical",{ns:"datasetDocuments"})} \xb7 ${a?.rules?.parent_mode==="paragraph"?g("parentMode.paragraph",{ns:"dataset"}):g("parentMode.fullDoc",{ns:"dataset"})}`:c),c},[a,g]);return(0,c.jsxs)("div",{className:"flex flex-col gap-1","data-testid":"rule-detail",children:[(0,c.jsx)(ai.FieldInfo,{label:g("embedding.mode",{ns:"datasetDocuments"}),displayedValue:h("mode")}),(0,c.jsx)(ai.FieldInfo,{label:g("stepTwo.indexMode",{ns:"datasetCreation"}),displayedValue:g(`stepTwo.${b===ah.IndexingType.ECONOMICAL?"economical":"qualified"}`,{ns:"datasetCreation"}),valueIcon:(0,c.jsx)(af.default,{className:"size-4",src:b===ah.IndexingType.ECONOMICAL?ag.indexMethodIcon.economical:ag.indexMethodIcon.high_quality,alt:""})}),(0,c.jsx)(ai.FieldInfo,{label:g("form.retrievalSetting.title",{ns:"datasetSettings"}),displayedValue:g(`retrieval.${b===ah.IndexingType.ECONOMICAL?"keyword_search":d??"semantic_search"}.title`,{ns:"dataset"}),valueIcon:(0,c.jsx)(af.default,{className:"size-4",src:d===r.RETRIEVE_METHOD.fullText?ag.retrievalIcon.fullText:d===r.RETRIEVE_METHOD.hybrid?ag.retrievalIcon.hybrid:ag.retrievalIcon.vector,alt:""})})]})}),ak=({datasetId:a,batchId:b,documents:d=[],indexingType:g,retrievalMethod:h})=>{let{t:i}=(0,f.useTranslation)(),l=(0,B.useRouter)(),{enableBilling:m,plan:n}=(0,j.useProviderContext)(),[o,p]=(0,e.useState)([]),[q,r]=(0,e.useState)(!0),{mutateAsync:s}=(0,ad.useIndexingStatusBatch)({datasetId:a,batchId:b});(0,e.useEffect)(()=>{let a,b=async()=>{await s(void 0,{onSuccess:a=>{let b=a.data;p(b),b.every(a=>["completed","error","paused"].includes(a.indexing_status))&&r(!1)},onSettled:()=>{q&&(a=setTimeout(b,2500))}})};return b(),()=>{clearTimeout(a)}},[q]);let t=d[0],{data:u}=(0,ad.useProcessRule)(t.id),v=(0,ae.useInvalidDocumentList)(),w=(0,ac.useDatasetApiAccessUrl)(),x=(0,e.useMemo)(()=>!!o.length&&o.every(a=>["waiting"].includes(a?.indexing_status||"")),[o]),y=(0,e.useMemo)(()=>!!o.length&&o.some(a=>["indexing","splitting","parsing","cleaning"].includes(a?.indexing_status||"")),[o]),D=(0,e.useMemo)(()=>!!o.length&&o.every(a=>["completed","error","paused"].includes(a?.indexing_status||"")),[o]),F=a=>{let b=d.find(b=>b.id===a);return b?.name},G=a=>{let b=a.completed_segments||0,c=a.total_segments||0;if(0===c)return 0;let d=Math.round(100*b/c);return d>100?100:d},I=a=>{let b=d.find(b=>b.id===a);return b?.data_source_type},J=a=>["indexing","splitting","parsing","cleaning","waiting"].includes(a.indexing_status||"");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,c.jsxs)("div",{className:"system-md-semibold-uppercase flex items-center gap-x-1 text-text-secondary",children:[(x||y)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(z.RiLoader2Fill,{className:"size-4 animate-spin"}),(0,c.jsx)("span",{children:i(x?"embedding.waiting":"embedding.processing",{ns:"datasetDocuments"})})]}),D&&i("embedding.completed",{ns:"datasetDocuments"})]}),m&&n.type!==_.Plan.team&&(0,c.jsxs)("div",{className:"flex h-[52px] items-center gap-x-2 rounded-xl border-[0.5px] border-components-panel-border-subtle bg-components-panel-on-panel-item-bg p-2.5 pl-3 shadow-xs shadow-shadow-shadow-3",children:[(0,c.jsx)("div",{className:"flex shrink-0 items-center justify-center rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-blue-brand-blue-brand-500 shadow-md shadow-shadow-shadow-5",children:(0,c.jsx)(z.RiAedFill,{className:"size-4 text-text-primary-on-surface"})}),(0,c.jsx)("div",{className:"system-md-medium grow text-text-primary",children:i("plansCommon.documentProcessingPriorityUpgrade",{ns:"billing"})}),(0,c.jsx)(aa.default,{loc:"knowledge-speed-up"})]}),(0,c.jsx)("div",{className:"flex flex-col gap-0.5 pb-2",children:o.map(a=>{var b;let e,f;return(0,c.jsxs)("div",{className:(0,E.cn)("relative h-[26px] overflow-hidden rounded-md bg-components-progress-bar-bg","error"===a.indexing_status&&"bg-state-destructive-hover-alt"),children:[J(a)&&(0,c.jsx)("div",{className:"absolute left-0 top-0 h-full min-w-0.5 border-r-[2px] border-r-components-progress-bar-progress-highlight bg-components-progress-bar-progress",style:{width:`${G(a)}%`}}),(0,c.jsxs)("div",{className:"z-[1] flex h-full items-center gap-1 pl-[6px] pr-2",children:[I(a.id)===k.DatasourceType.localFile&&(0,c.jsx)(ab.default,{size:"sm",className:"shrink-0",name:F(a.id),extension:(e=F(a.id),e?.split(".").pop()||"txt")}),I(a.id)===k.DatasourceType.onlineDocument&&(0,c.jsx)(Y.default,{className:"shrink-0",type:"page",src:(b=a.id,f=d.find(a=>a.id===b),f?.data_source_info.notion_page_icon)}),(0,c.jsxs)("div",{className:"flex w-0 grow items-center gap-1",title:F(a.id),children:[(0,c.jsx)("div",{className:"system-xs-medium truncate text-text-secondary",children:F(a.id)}),m&&(0,c.jsx)($.default,{className:"ml-0"})]}),J(a)&&(0,c.jsx)("div",{className:"shrink-0 text-xs text-text-secondary",children:`${G(a)}%`}),"error"===a.indexing_status&&(0,c.jsx)(Z.default,{popupClassName:"px-4 py-[14px] max-w-60 body-xs-regular text-text-secondary border-[0.5px] border-components-panel-border rounded-xl",offset:4,popupContent:a.error,children:(0,c.jsx)("span",{children:(0,c.jsx)(z.RiErrorWarningFill,{className:"size-4 shrink-0 text-text-destructive"})})}),"completed"===a.indexing_status&&(0,c.jsx)(z.RiCheckboxCircleFill,{className:"size-4 shrink-0 text-text-success"})]})]},a.id)})}),(0,c.jsx)(H.default,{type:"horizontal",className:"my-0 bg-divider-subtle"}),(0,c.jsx)(aj,{sourceData:u,indexingType:g,retrievalMethod:h})]}),(0,c.jsxs)("div",{className:"mt-6 flex items-center gap-x-2 py-2",children:[(0,c.jsx)(A.default,{href:w,target:"_blank",rel:"noopener noreferrer",children:(0,c.jsxs)(C.default,{className:"w-fit gap-x-0.5 px-3",children:[(0,c.jsx)(z.RiTerminalBoxLine,{className:"size-4"}),(0,c.jsx)("span",{className:"px-0.5",children:"Access the API"})]})}),(0,c.jsxs)(C.default,{className:"w-fit gap-x-0.5 px-3",variant:"primary",onClick:()=>{v(),l.push(`/datasets/${a}/documents`)},children:[(0,c.jsx)("span",{className:"px-0.5",children:i("stepThree.navTo",{ns:"datasetCreation"})}),(0,c.jsx)(z.RiArrowRightLine,{className:"size-4 stroke-current stroke-1"})]})]})]})},al=({batchId:a,documents:b})=>{let{t:d}=(0,f.useTranslation)(),e=(0,X.useDocLink)(),g=(0,i.useDatasetDetailContextWithSelector)(a=>a.dataset?.id),h=(0,i.useDatasetDetailContextWithSelector)(a=>a.dataset?.indexing_technique),j=(0,i.useDatasetDetailContextWithSelector)(a=>a.dataset?.retrieval_model_dict?.search_method);return(0,c.jsxs)("div",{className:"flex h-full w-full justify-center overflow-hidden",children:[(0,c.jsx)("div",{className:"h-full w-3/5 overflow-y-auto pb-8 pt-10",children:(0,c.jsx)("div",{className:"max-w-[640px]",children:(0,c.jsx)(ak,{datasetId:g,batchId:a,documents:b,indexingType:h,retrievalMethod:j})})}),(0,c.jsx)("div",{className:"w-2/5 pr-8 pt-[88px]",children:(0,c.jsxs)("div",{className:"flex w-[328px] flex-col gap-3 rounded-xl bg-background-section p-6",children:[(0,c.jsx)("div",{className:"flex size-10 items-center justify-center rounded-[10px] bg-components-card-bg shadow-lg shadow-shadow-shadow-5",children:(0,c.jsx)(z.RiBookOpenLine,{className:"size-5 text-text-accent"})}),(0,c.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,c.jsx)("div",{className:"system-xl-semibold text-text-secondary",children:d("stepThree.sideTipTitle",{ns:"datasetCreation"})}),(0,c.jsx)("div",{className:"system-sm-regular text-text-tertiary",children:d("stepThree.sideTipContent",{ns:"datasetCreation"})}),(0,c.jsx)("a",{href:e("/use-dify/knowledge/knowledge-pipeline/authorize-data-source"),target:"_blank",rel:"noreferrer noopener",className:"system-sm-regular text-text-accent",children:d("addDocuments.stepThree.learnMore",{ns:"datasetPipeline"})})]})]})})]})},am=(0,e.memo)(({batchId:a,documents:b})=>(0,c.jsx)(al,{batchId:a,documents:b}));var an=a.i(518907),ao=a.i(715674);let ap=e.memo(({onBack:a,runDisabled:b,onProcess:d})=>{let{t:e}=(0,f.useTranslation)();return(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)(C.default,{variant:"secondary",onClick:a,className:"gap-x-0.5",children:[(0,c.jsx)(z.RiArrowLeftLine,{className:"size-4"}),(0,c.jsx)("span",{className:"px-0.5",children:e("operations.dataSource",{ns:"datasetPipeline"})})]}),(0,c.jsx)(C.default,{variant:"primary",disabled:b,onClick:d,children:e("operations.saveAndProcess",{ns:"datasetPipeline"})})]})});var aq=a.i(937201);let ar=e.memo(({dataSourceNodeId:a,isRunning:b,onProcess:d,onPreview:e,onSubmit:f,onBack:g,ref:h})=>{let{isFetchingParams:j,paramsConfig:k}=(a=>{let b=(0,i.useDatasetDetailContextWithSelector)(a=>a.dataset?.pipeline_id),{data:c,isFetching:d}=(0,m.usePublishedPipelineProcessingParams)({pipeline_id:b,node_id:a});return{paramsConfig:c,isFetchingParams:d}})(a),l=(0,ao.useInitialData)(k?.variables||[]),n=(0,ao.useConfigurations)(k?.variables||[]),o=(0,an.generateZodSchema)(n);return(0,c.jsxs)("div",{className:"flex flex-col gap-y-4 pt-4",children:[(0,c.jsx)(aq.default,{ref:h,initialData:l,configurations:n,schema:o,onSubmit:f,onPreview:e,isRunning:b}),(0,c.jsx)(ap,{runDisabled:j||b,onBack:g,onProcess:d})]})}),as=(0,e.memo)(({formRef:a,dataSourceNodeId:b,isRunning:d,onProcess:e,onPreview:f,onSubmit:g,onBack:h})=>(0,c.jsx)(ar,{ref:a,dataSourceNodeId:b,isRunning:d,onProcess:e,onPreview:f,onSubmit:g,onBack:h}));var at=a.i(935392),au=a.i(573912),av=a.i(192875);let aw=e.memo(()=>(0,c.jsxs)("div",{className:"flex h-full w-full flex-col gap-y-3 overflow-hidden bg-gradient-to-b from-components-panel-bg-transparent to-components-panel-bg px-6 py-5",children:[(0,c.jsxs)(av.SkeletonContainer,{className:"w-full gap-0",children:[(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-3/5"})]}),(0,c.jsxs)(av.SkeletonContainer,{className:"w-full gap-0",children:[(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-[70%]"})]}),(0,c.jsxs)(av.SkeletonContainer,{className:"w-full gap-0",children:[(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-[56%]"})]}),(0,c.jsxs)(av.SkeletonContainer,{className:"w-full gap-0",children:[(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-3/5"})]}),(0,c.jsxs)(av.SkeletonContainer,{className:"w-full gap-0",children:[(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-3/5"})]}),(0,c.jsxs)(av.SkeletonContainer,{className:"w-full gap-0",children:[(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-full"}),(0,c.jsx)(av.SkeletonRectangle,{className:"my-1.5 w-1/2"})]})]})),ax=({file:a,hidePreview:b})=>{let{t:d}=(0,f.useTranslation)(),{data:g,isFetching:h}=(0,l.useFilePreview)(a.id||""),i=(0,e.useMemo)(()=>a?a.name.split(".").slice(0,-1).join():"",[a]);return(0,c.jsxs)("div",{className:"flex h-full w-full flex-col rounded-t-xl border-l border-t border-components-panel-border bg-background-default-lighter shadow-md shadow-shadow-shadow-5",children:[(0,c.jsxs)("div",{className:"flex gap-x-2 border-b border-divider-subtle pb-3 pl-6 pr-4 pt-4",children:[(0,c.jsxs)("div",{className:"flex grow flex-col gap-y-1",children:[(0,c.jsx)("div",{className:"system-2xs-semibold-uppercase text-text-accent",children:d("addDocuments.stepOne.preview",{ns:"datasetPipeline"})}),(0,c.jsx)("div",{className:"title-md-semi-bold text-tex-primary",children:`${i}.${a.extension||""}`}),(0,c.jsxs)("div",{className:"system-xs-medium flex items-center gap-x-1 text-text-tertiary",children:[(0,c.jsx)(ab.default,{className:"size-3.5 shrink-0",name:a.name,extension:a.extension}),(0,c.jsx)("span",{className:"uppercase",children:a.extension}),(0,c.jsx)("span",{children:"·"}),(0,c.jsx)("span",{children:(0,au.formatFileSize)(a.size)}),g&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{children:"·"}),(0,c.jsx)("span",{children:`${(0,au.formatNumberAbbreviated)(g.content.length)} ${d("addDocuments.characters",{ns:"datasetPipeline"})}`})]})]})]}),(0,c.jsx)("button",{type:"button",className:"flex h-8 w-8 shrink-0 items-center justify-center",onClick:b,children:(0,c.jsx)(z.RiCloseLine,{className:"size-[18px]"})})]}),h&&(0,c.jsx)("div",{className:"grow",children:(0,c.jsx)(aw,{})}),!h&&g&&(0,c.jsx)("div",{className:"body-md-regular grow overflow-hidden px-6 py-5 text-text-secondary",children:g.content})]})};a.i(916818);var ay=a.i(260403),az=a.i(189583),aA=a.i(114715);let aB=({currentPage:a,datasourceNodeId:b,hidePreview:d})=>{let{t:g}=(0,f.useTranslation)(),[h,j]=(0,e.useState)(""),k=(0,i.useDatasetDetailContextWithSelector)(a=>a.dataset?.pipeline_id),{mutateAsync:l,isPending:o}=(0,m.usePreviewOnlineDocument)(),p=(0,n.useDataSourceStore)();return(0,e.useEffect)(()=>{let{currentCredentialId:c}=p.getState();l({workspaceID:a.workspace_id,pageID:a.page_id,pageType:a.type,pipelineId:k||"",datasourceNodeId:b,credentialId:c},{onSuccess(a){j(a.content)},onError(a){aA.default.notify({type:"error",message:a.message})}})},[a.page_id]),(0,c.jsxs)("div",{className:"flex h-full w-full flex-col rounded-t-xl border-l border-t border-components-panel-border bg-background-default-lighter shadow-md shadow-shadow-shadow-5",children:[(0,c.jsxs)("div",{className:"flex gap-x-2 border-b border-divider-subtle pb-3 pl-6 pr-4 pt-4",children:[(0,c.jsxs)("div",{className:"flex grow flex-col gap-y-1",children:[(0,c.jsx)("div",{className:"system-2xs-semibold-uppercase text-text-accent",children:g("addDocuments.stepOne.preview",{ns:"datasetPipeline"})}),(0,c.jsx)("div",{className:"title-md-semi-bold text-tex-primary",children:a?.page_name}),(0,c.jsxs)("div",{className:"system-xs-medium flex items-center gap-x-1 text-text-tertiary",children:[(0,c.jsx)(ay.Notion,{className:"size-3.5"}),(0,c.jsx)("span",{children:a.type}),(0,c.jsx)("span",{children:"·"}),(0,c.jsx)("span",{children:`${(0,au.formatNumberAbbreviated)(h.length)} ${g("addDocuments.characters",{ns:"datasetPipeline"})}`})]})]}),(0,c.jsx)("button",{type:"button",className:"flex h-8 w-8 shrink-0 items-center justify-center",onClick:d,children:(0,c.jsx)(z.RiCloseLine,{className:"size-[18px]"})})]}),o&&(0,c.jsx)("div",{className:"grow",children:(0,c.jsx)(aw,{})}),!o&&h&&(0,c.jsx)("div",{className:"body-md-regular grow overflow-hidden px-6 py-5 text-text-secondary",children:(0,c.jsx)(az.Markdown,{content:h})})]})},aC=({currentWebsite:a,hidePreview:b})=>{let{t:d}=(0,f.useTranslation)();return(0,c.jsxs)("div",{className:"flex h-full w-full flex-col rounded-t-xl border-l border-t border-components-panel-border bg-background-default-lighter shadow-md shadow-shadow-shadow-5",children:[(0,c.jsxs)("div",{className:"flex gap-x-2 border-b border-divider-subtle pb-3 pl-6 pr-4 pt-4",children:[(0,c.jsxs)("div",{className:"flex grow flex-col gap-y-1",children:[(0,c.jsx)("div",{className:"system-2xs-semibold-uppercase",children:d("addDocuments.stepOne.preview",{ns:"datasetPipeline"})}),(0,c.jsx)("div",{className:"title-md-semi-bold text-tex-primary",children:a.title}),(0,c.jsxs)("div",{className:"system-xs-medium flex gap-x-1  text-text-tertiary",children:[(0,c.jsx)(z.RiGlobalLine,{className:"size-3.5"}),(0,c.jsx)("span",{className:"uppercase",title:a.source_url,children:a.source_url}),(0,c.jsx)("span",{children:"·"}),(0,c.jsx)("span",{children:"·"}),(0,c.jsx)("span",{children:`${(0,au.formatNumberAbbreviated)(a.markdown.length)} ${d("addDocuments.characters",{ns:"datasetPipeline"})}`})]})]}),(0,c.jsx)("button",{type:"button",className:"flex h-8 w-8 shrink-0 items-center justify-center",onClick:b,children:(0,c.jsx)(z.RiCloseLine,{className:"size-[18px]"})})]}),(0,c.jsx)("div",{className:"body-md-regular grow overflow-hidden px-6 py-5 text-text-secondary",children:a.markdown})]})},aD=(0,e.memo)(({datasource:a,currentLocalFile:b,currentDocument:d,currentWebsite:e,hidePreviewLocalFile:f,hidePreviewOnlineDocument:g,hideWebsitePreview:h})=>(0,c.jsx)("div",{className:"h-full min-w-0 flex-1",children:(0,c.jsxs)("div",{className:"flex h-full flex-col pl-2 pt-2",children:[b&&(0,c.jsx)(ax,{file:b,hidePreview:f}),d&&(0,c.jsx)(aB,{datasourceNodeId:a.nodeId,currentPage:d,hidePreview:g}),e&&(0,c.jsx)(aC,{currentWebsite:e,hidePreview:h})]})}));aD.displayName="StepOnePreview";let aE=(0,e.memo)(({datasourceType:a,localFileList:b,onlineDocuments:d,websitePages:e,selectedOnlineDriveFileList:f,isIdle:g,isPendingPreview:h,estimateData:i,onPreview:j,handlePreviewFileChange:k,handlePreviewOnlineDocumentChange:l,handlePreviewWebsitePageChange:m,handlePreviewOnlineDriveFileChange:n})=>(0,c.jsx)("div",{className:"h-full min-w-0 flex-1",children:(0,c.jsx)("div",{className:"flex h-full flex-col pl-2 pt-2",children:(0,c.jsx)(at.default,{dataSourceType:a,localFiles:b.map(a=>a.file),onlineDocuments:d,websitePages:e,onlineDriveFiles:f,isIdle:g,isPending:h,estimateData:i,onPreview:j,handlePreviewFileChange:k,handlePreviewOnlineDocumentChange:l,handlePreviewWebsitePageChange:m,handlePreviewOnlineDriveFileChange:n})})}));aE.displayName="StepTwoPreview";let aF=()=>{let{t:a}=(0,f.useTranslation)(),b=(0,j.useProviderContextSelector)(a=>a.plan),o=(0,j.useProviderContextSelector)(a=>a.enableBilling),r=(0,i.useDatasetDetailContextWithSelector)(a=>a.dataset?.pipeline_id),w=(0,n.useDataSourceStore)(),[z,A]=(0,e.useState)(),[B,C]=(0,e.useState)(void 0),[D,E]=(0,e.useState)(""),[F,H]=(0,e.useState)([]),{data:I,isFetching:J}=(0,m.usePublishedPipelineInfo)(r||""),{data:K}=(0,l.useFileUploadConfig)(),L=(0,e.useMemo)(()=>K??{file_size_limit:15,batch_count_limit:5},[K]),{steps:M,currentStep:N,handleNextStep:O,handleBackStep:P}=(()=>{let{t:a}=(0,f.useTranslation)(),[b,c]=(0,e.useState)(1),d=(0,e.useCallback)(()=>{c(a=>a+1)},[]),g=(0,e.useCallback)(()=>{c(a=>a-1)},[]);return{steps:[{label:a("addDocuments.steps.chooseDatasource",{ns:"datasetPipeline"}),value:p.dataSource},{label:a("addDocuments.steps.processDocuments",{ns:"datasetPipeline"}),value:p.processDocuments},{label:a("addDocuments.steps.processingDocuments",{ns:"datasetPipeline"}),value:p.processingDocuments}],currentStep:b,handleNextStep:d,handleBackStep:g}})(),{localFileList:Q,allFileLoaded:R,currentLocalFile:S,hidePreviewLocalFile:T}=(()=>{let{localFileList:a,currentLocalFile:b}=(0,n.useDataSourceStoreWithSelector)((0,x.useShallow)(a=>({localFileList:a.localFileList,currentLocalFile:a.currentLocalFile}))),c=(0,n.useDataSourceStore)(),d=(0,e.useMemo)(()=>a.length>0&&a.every(a=>a.file.id),[a]);return{localFileList:a,allFileLoaded:d,currentLocalFile:b,hidePreviewLocalFile:(0,e.useCallback)(()=>{let{setCurrentLocalFile:a}=c.getState();a(void 0)},[c])}})(),{currentWorkspace:U,onlineDocuments:V,currentDocument:X,PagesMapAndSelectedPagesId:Y,hidePreviewOnlineDocument:Z,clearOnlineDocumentData:$}=(()=>{let{documentsData:a,onlineDocuments:b,currentDocument:c}=(0,n.useDataSourceStoreWithSelector)((0,x.useShallow)(a=>({documentsData:a.documentsData,onlineDocuments:a.onlineDocuments,currentDocument:a.currentDocument}))),d=(0,n.useDataSourceStore)(),f=a[0],g=(0,e.useMemo)(()=>(a||[]).reduce((a,b)=>(b.pages.forEach(c=>{a[c.page_id]={...c,workspace_id:b.workspace_id}}),a),{}),[a]);return{currentWorkspace:f,onlineDocuments:b,currentDocument:c,PagesMapAndSelectedPagesId:g,hidePreviewOnlineDocument:(0,e.useCallback)(()=>{let{setCurrentDocument:a}=d.getState();a(void 0)},[d]),clearOnlineDocumentData:(0,e.useCallback)(()=>{let{setDocumentsData:a,setSearchValue:b,setSelectedPagesId:c,setOnlineDocuments:e,setCurrentDocument:f}=d.getState();a([]),b(""),c(new Set),e([]),f(void 0)},[d])}})(),{websitePages:_,currentWebsite:aa,hideWebsitePreview:ab,clearWebsiteCrawlData:ac}=(()=>{let{websitePages:a,currentWebsite:b}=(0,n.useDataSourceStoreWithSelector)((0,x.useShallow)(a=>({websitePages:a.websitePages,currentWebsite:a.currentWebsite}))),c=(0,n.useDataSourceStore)();return{websitePages:a,currentWebsite:b,hideWebsitePreview:(0,e.useCallback)(()=>{let{setCurrentWebsite:a,setPreviewIndex:b}=c.getState();a(void 0),b(-1)},[c]),clearWebsiteCrawlData:(0,e.useCallback)(()=>{let{setStep:a,setCrawlResult:b,setWebsitePages:d,setPreviewIndex:e,setCurrentWebsite:f}=c.getState();a(y.CrawlStep.init),b(void 0),f(void 0),d([]),e(-1)},[c])}})(),{onlineDriveFileList:ad,selectedFileIds:ae,selectedOnlineDriveFileList:af,clearOnlineDriveData:ag}=(()=>{let{onlineDriveFileList:a,selectedFileIds:b}=(0,n.useDataSourceStoreWithSelector)((0,x.useShallow)(a=>({onlineDriveFileList:a.onlineDriveFileList,selectedFileIds:a.selectedFileIds}))),c=(0,n.useDataSourceStore)(),d=(0,e.useMemo)(()=>b.map(b=>a.find(a=>a.id===b)),[a,b]);return{onlineDriveFileList:a,selectedFileIds:b,selectedOnlineDriveFileList:d,clearOnlineDriveData:(0,e.useCallback)(()=>{let{setOnlineDriveFileList:a,setBucket:b,setPrefix:d,setKeywords:e,setSelectedFileIds:f}=c.getState();a([]),b(""),d([]),e(""),f([])},[c])}})(),ah=b.usage.vectorSpace>=b.total.vectorSpace,ai=!o||"sandbox"!==b.type,{datasourceType:aj,isShowVectorSpaceFull:ak,nextBtnDisabled:al,showSelect:an,totalOptions:ao,selectedOptions:ap,tip:aq}=(({datasource:a,allFileLoaded:b,localFileListLength:c,onlineDocumentsLength:d,websitePagesLength:g,selectedFileIdsLength:h,onlineDriveFileList:i,isVectorSpaceFull:j,enableBilling:l,currentWorkspacePagesLength:m,fileUploadConfig:n})=>{let{t:o}=(0,f.useTranslation)(),p=a?.nodeData.provider_type,q=(0,e.useMemo)(()=>!!a&&!!p&&({[k.DatasourceType.localFile]:b,[k.DatasourceType.onlineDocument]:d>0,[k.DatasourceType.websiteCrawl]:g>0,[k.DatasourceType.onlineDrive]:i.length>0})[p]&&j&&l,[a,p,b,d,g,i.length,j,l]),r=(0,e.useMemo)(()=>!a||!p||(({[k.DatasourceType.localFile]:q||0===c||!b,[k.DatasourceType.onlineDocument]:q||0===d,[k.DatasourceType.websiteCrawl]:q||0===g,[k.DatasourceType.onlineDrive]:q||0===h})[p]??!0),[a,p,q,c,b,d,g,h]),s=(0,e.useMemo)(()=>{if(p===k.DatasourceType.onlineDocument)return m>0;if(p===k.DatasourceType.onlineDrive){let a=i.filter(a=>"bucket"!==a.type);return!i.some(a=>"bucket"===a.type)&&a.length>0}return!1},[m,p,i]),t=(0,e.useMemo)(()=>p===k.DatasourceType.onlineDocument?m:p===k.DatasourceType.onlineDrive?i.filter(a=>"bucket"!==a.type).length:void 0,[m,p,i]),u=(0,e.useMemo)(()=>p===k.DatasourceType.onlineDocument?d:p===k.DatasourceType.onlineDrive?h:void 0,[p,d,h]),v=(0,e.useMemo)(()=>p===k.DatasourceType.onlineDocument?o("addDocuments.selectOnlineDocumentTip",{ns:"datasetPipeline",count:50}):p===k.DatasourceType.onlineDrive?o("addDocuments.selectOnlineDriveTip",{ns:"datasetPipeline",count:n.batch_count_limit,fileSize:n.file_size_limit}):"",[p,n.batch_count_limit,n.file_size_limit,o]);return{datasourceType:p,isShowVectorSpaceFull:q,nextBtnDisabled:r,showSelect:s,totalOptions:t,selectedOptions:u,tip:v}})({datasource:z,allFileLoaded:R,localFileListLength:Q.length,onlineDocumentsLength:V.length,websitePagesLength:_.length,selectedFileIdsLength:ae.length,onlineDriveFileList:ad,isVectorSpaceFull:ah,enableBilling:o,currentWorkspacePagesLength:U?.pages.length??0,fileUploadConfig:L}),[ar,{setTrue:at,setFalse:au}]=(0,d.useBoolean)(!1),av=(0,e.useCallback)(()=>{if(!ai){let a={[k.DatasourceType.localFile]:Q.length,[k.DatasourceType.onlineDocument]:V.length,[k.DatasourceType.websiteCrawl]:_.length,[k.DatasourceType.onlineDrive]:ae.length};if((aj?a[aj]:0)>1)return void at()}O()},[aj,O,Q.length,V.length,ae.length,at,ai,_.length]),{isPreview:aw,formRef:ax,isIdle:ay,isPending:az,onClickProcess:aA,onClickPreview:aB,handleSubmit:aC,handlePreviewFileChange:aF,handlePreviewOnlineDocumentChange:aG,handlePreviewWebsiteChange:aH,handlePreviewOnlineDriveFileChange:aI,handleSelectAll:aJ,handleSwitchDataSource:aK,handleCredentialChange:aL}=(({datasource:a,datasourceType:b,pipelineId:c,dataSourceStore:d,setEstimateData:f,setBatchId:g,setDocuments:h,handleNextStep:i,PagesMapAndSelectedPagesId:j,currentWorkspacePages:l,clearOnlineDocumentData:n,clearWebsiteCrawlData:o,clearOnlineDriveData:p,setDatasource:r})=>{let w=(0,e.useRef)(!1),x=(0,e.useRef)(null),{mutateAsync:y,isIdle:z,isPending:A}=(0,m.useRunPublishedPipeline)(),B=(0,e.useCallback)(()=>{let{previewLocalFileRef:a,previewOnlineDocumentRef:c,previewWebsitePageRef:e,previewOnlineDriveFileRef:f,currentCredentialId:g,bucket:h}=d.getState(),i=[];return b===k.DatasourceType.localFile&&a.current&&i.push(s(a.current,g)),b===k.DatasourceType.onlineDocument&&c.current&&i.push(t(c.current,g)),b===k.DatasourceType.websiteCrawl&&e.current&&i.push(u(e.current,g)),b===k.DatasourceType.onlineDrive&&f.current&&i.push(v(f.current,h,g)),i},[d,b]),C=(0,e.useCallback)(()=>{let{currentCredentialId:a,localFileList:c,onlineDocuments:e,websitePages:f,bucket:g,selectedFileIds:h,onlineDriveFileList:i}=d.getState(),j=[];return b===k.DatasourceType.localFile&&c.forEach(b=>{j.push(s(b.file,a))}),b===k.DatasourceType.onlineDocument&&e.forEach(b=>{j.push(t(b,a))}),b===k.DatasourceType.websiteCrawl&&f.forEach(b=>{j.push(u(b,a))}),b===k.DatasourceType.onlineDrive&&h.forEach(b=>{let c=i.find(a=>a.id===b);c&&j.push(v(c,g,a))}),j},[d,b]),D=(0,e.useCallback)(async d=>{if(!a||!c)return;let e=B();await y({pipeline_id:c,inputs:d,start_node_id:a.nodeId,datasource_type:b,datasource_info_list:e,is_preview:!0},{onSuccess:a=>{f(a.data.outputs)}})},[a,c,b,B,y,f]),E=(0,e.useCallback)(async d=>{if(!a||!c)return;let e=C();await y({pipeline_id:c,inputs:d,start_node_id:a.nodeId,datasource_type:b,datasource_info_list:e,is_preview:!1},{onSuccess:a=>{g(a.batch||""),h(a.documents||[]),i(),(0,q.trackEvent)("dataset_document_added",{data_source_type:b,indexing_technique:"pipeline"})}})},[a,c,b,C,y,g,h,i]),F=(0,e.useCallback)(()=>{w.current=!1,x.current?.submit()},[]),G=(0,e.useCallback)(()=>{w.current=!0,x.current?.submit()},[]),H=(0,e.useCallback)(a=>{w.current?D(a):E(a)},[D,E]),I=(0,e.useCallback)(a=>{let{previewLocalFileRef:b}=d.getState();b.current=a,G()},[d,G]),J=(0,e.useCallback)(a=>{let{previewOnlineDocumentRef:b}=d.getState();b.current=a,G()},[d,G]),K=(0,e.useCallback)(a=>{let{previewWebsitePageRef:b}=d.getState();b.current=a,G()},[d,G]),L=(0,e.useCallback)(a=>{let{previewOnlineDriveFileRef:b}=d.getState();b.current=a,G()},[d,G]),M=(0,e.useCallback)(()=>{let{onlineDocuments:a,onlineDriveFileList:c,selectedFileIds:e,setOnlineDocuments:f,setSelectedFileIds:g,setSelectedPagesId:h}=d.getState();if(b===k.DatasourceType.onlineDocument){let b=l?.map(a=>a.page_id)||[];a.length<b.length?(f(Array.from(b).map(a=>j[a])),h(new Set(b))):(f([]),h(new Set))}if(b===k.DatasourceType.onlineDrive){let a=c.filter(a=>"bucket"!==a.type).map(a=>a.id);g(e.length<a.length?a:[])}},[j,l,d,b]),N=(0,e.useCallback)(a=>{let b=a.nodeData.provider_type,c={[k.DatasourceType.onlineDocument]:n,[k.DatasourceType.websiteCrawl]:o,[k.DatasourceType.onlineDrive]:p,[k.DatasourceType.localFile]:()=>{}};c[b]?.()},[n,p,o]);return{isPreview:w,formRef:x,isIdle:z,isPending:A,onClickProcess:F,onClickPreview:G,handleSubmit:H,handlePreviewFileChange:I,handlePreviewOnlineDocumentChange:J,handlePreviewWebsiteChange:K,handlePreviewOnlineDriveFileChange:L,handleSelectAll:M,handleSwitchDataSource:(0,e.useCallback)(a=>{let{setCurrentCredentialId:b,currentNodeIdRef:c}=d.getState();N(a),b(""),c.current=a.nodeId,r(a)},[N,d,r]),handleCredentialChange:(0,e.useCallback)(b=>{let{setCurrentCredentialId:c}=d.getState();a&&N(a),c(b)},[N,d,a])}})({datasource:z,datasourceType:aj,pipelineId:r,dataSourceStore:w,setEstimateData:C,setBatchId:E,setDocuments:H,handleNextStep:av,PagesMapAndSelectedPagesId:Y,currentWorkspacePages:U?.pages,clearOnlineDocumentData:$,clearWebsiteCrawlData:ac,clearOnlineDriveData:ag,setDatasource:A});return J?(0,c.jsx)(g.default,{type:"app"}):(0,c.jsxs)("div",{className:"relative flex h-[calc(100vh-56px)] w-full min-w-[1024px] overflow-x-auto rounded-t-2xl border-t border-effects-highlight bg-background-default-subtle",children:[(0,c.jsx)("div",{className:"h-full min-w-0 flex-1",children:(0,c.jsxs)("div",{className:"flex h-full flex-col px-14",children:[(0,c.jsx)(G,{steps:M,title:a("addDocuments.title",{ns:"datasetPipeline"}),currentStep:N}),(0,c.jsxs)("div",{className:"grow overflow-y-auto",children:[1===N&&(0,c.jsx)(W,{datasource:z,datasourceType:aj,pipelineNodes:I?.graph.nodes||[],supportBatchUpload:ai,localFileListLength:Q.length,isShowVectorSpaceFull:ak,showSelect:an,totalOptions:ao,selectedOptions:ap,tip:aq,nextBtnDisabled:al,onSelectDataSource:aK,onCredentialChange:aL,onSelectAll:aJ,onNextStep:av}),2===N&&(0,c.jsx)(as,{formRef:ax,dataSourceNodeId:z.nodeId,isRunning:az,onProcess:aA,onPreview:aB,onSubmit:aC,onBack:P}),3===N&&(0,c.jsx)(am,{batchId:D,documents:F})]})]})}),1===N&&(0,c.jsx)(aD,{datasource:z,currentLocalFile:S,currentDocument:X,currentWebsite:aa,hidePreviewLocalFile:T,hidePreviewOnlineDocument:Z,hideWebsitePreview:ab}),2===N&&(0,c.jsx)(aE,{datasourceType:aj,localFileList:Q,onlineDocuments:V,websitePages:_,selectedOnlineDriveFileList:af,isIdle:ay,isPendingPreview:az&&aw.current,estimateData:B,onPreview:aB,handlePreviewFileChange:aF,handlePreviewOnlineDocumentChange:aG,handlePreviewWebsitePageChange:aH,handlePreviewOnlineDriveFileChange:aI}),ar&&(0,c.jsx)(h.default,{show:!0,onClose:au,title:a("upgrade.uploadMultiplePages.title",{ns:"billing"}),description:a("upgrade.uploadMultiplePages.description",{ns:"billing"})})]})};a.s(["default",0,()=>(0,c.jsx)(o.default,{children:(0,c.jsx)(aF,{})})],270220)}];

//# sourceMappingURL=app_components_datasets_documents_create-from-pipeline_index_tsx_cf508326._.js.map