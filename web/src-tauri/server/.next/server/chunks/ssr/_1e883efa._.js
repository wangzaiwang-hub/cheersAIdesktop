module.exports=[280342,a=>{"use strict";var b=a.i(57843),c={SVG:"image/svg+xml",ICO:"image/x-icon",GIF:"image/gif",PNG:"image/png"};let d=function(a){(0,b.useEffect)(function(){if(a){var b=a.split("."),d=b[b.length-1].toLocaleUpperCase(),e=document.querySelector("link[rel*='icon']")||document.createElement("link");e.type=c[d],e.href=a,e.rel="shortcut icon",document.getElementsByTagName("head")[0].appendChild(e)}},[a])};var e=a.i(240944),f=a.i(446855),g={restoreOnUnmount:!1};let h=function(a,c){void 0===c&&(c=g);var d=(0,b.useRef)(f.default?document.title:"");(0,b.useEffect)(function(){document.title=a},[a]),(0,e.default)(function(){c.restoreOnUnmount&&(document.title=d.current)})};var i=a.i(724423),j=a.i(499257);function k(a){let c=(0,i.useIsSystemFeaturesPending)(),e=(0,i.useGlobalPublicStore)(a=>a.systemFeatures),f=a?`${a} - `:"",g="",k="";!1===c&&(e.branding.enabled?(g=`${f}${e.branding.application_title}`,k=e.branding.favicon):(g=`${f}Dify`,k=`${j.basePath}/favicon.ico`)),h(g),(0,b.useEffect)(()=>{let a=null;return e.branding.favicon&&(document.querySelectorAll("link[rel='icon'], link[rel='shortcut icon'], link[rel='apple-touch-icon'], link[rel='mask-icon']").forEach(a=>a.parentNode?.removeChild(a)),(a=document.createElement("link")).rel="apple-touch-icon",a.href=e.branding.favicon,document.head.appendChild(a)),()=>{a?.remove()}},[e.branding.favicon]),d(k)}a.s(["default",()=>k],280342)},732056,a=>{a.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{id:"Icon L"},children:[{type:"element",name:"g",attributes:{id:"Subtract"},children:[{type:"element",name:"path",attributes:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.3333 1.66667C11.3333 1.29848 11.0348 1 10.6666 1C10.2984 1 9.99992 1.29848 9.99992 1.66667V14.3333C9.99992 14.7015 10.2984 15 10.6666 15C11.0348 15 11.3333 14.7015 11.3333 14.3333V13.3333H12.6666C13.7712 13.3333 14.6666 12.4379 14.6666 11.3333V4.66667C14.6666 3.5621 13.7712 2.66667 12.6666 2.66667H11.3333V1.66667ZM12.6666 12H11.3333V4H12.6666C13.0348 4 13.3333 4.29847 13.3333 4.66667V11.3333C13.3333 11.7015 13.0348 12 12.6666 12Z",fill:"currentColor"},children:[]},{type:"element",name:"path",attributes:{d:"M8.66658 13.3333V12H3.33325C2.96506 12 2.66659 11.7015 2.66659 11.3333V4.66667C2.66659 4.29848 2.96506 4 3.33325 4H8.66658V2.66667H3.33325C2.22868 2.66667 1.33325 3.5621 1.33325 4.66667V11.3333C1.33325 12.4379 2.22869 13.3333 3.33325 13.3333H8.66658Z",fill:"currentColor"},children:[]},{type:"element",name:"path",attributes:{d:"M8.66658 5.24892C8.63219 5.24484 8.59703 5.24339 8.56132 5.24478L8.51461 5.24659C7.98481 5.26717 7.48663 5.51351 7.15247 5.92673L6.57985 6.63483L6.44192 6.22222C6.26445 5.69137 5.75558 5.35376 5.20721 5.37506L4.4811 5.40327C4.11319 5.41756 3.82653 5.7274 3.84082 6.09531C3.85511 6.46322 4.16494 6.74989 4.53286 6.7356L5.19902 6.70972L5.58518 7.86484L4.47727 9.23487C4.38815 9.34509 4.25098 9.41522 4.10014 9.42108L4.05343 9.4229C3.68552 9.43719 3.39885 9.74702 3.41314 10.1149C3.42743 10.4828 3.73727 10.7695 4.10518 10.7552L4.15189 10.7534C4.68169 10.7328 5.17987 10.4865 5.51403 10.0733L6.08671 9.3651L6.22466 9.77778C6.40213 10.3086 6.911 10.6462 7.45937 10.6249C7.46692 10.6246 7.47448 10.6242 7.48202 10.6237L8.66658 10.5372V9.20033L7.46676 9.2879L7.08138 8.13509L8.18923 6.76513C8.27836 6.65491 8.41553 6.58478 8.56637 6.57892L8.61307 6.5771C8.63111 6.5764 8.64896 6.57499 8.66658 6.5729V5.24892Z",fill:"currentColor"},children:[]}]}]}]},name:"InputField"})},181096,a=>{a.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{id:"pipeline-fill"},children:[{type:"element",name:"g",attributes:{id:"Vector"},children:[{type:"element",name:"path",attributes:{d:"M3.7501 2.56885C2.6835 2.56885 1.81885 3.4335 1.81885 4.5001C1.81885 5.5667 2.6835 6.43135 3.7501 6.43135H6.0001C7.0667 6.43135 7.93135 5.5667 7.93135 4.5001C7.93135 3.4335 7.0667 2.56885 6.0001 2.56885H3.7501Z",fill:"currentColor"},children:[]},{type:"element",name:"path",attributes:{d:"M11.2501 7.06885C10.1835 7.06885 9.31885 7.9335 9.31885 9.0001C9.31885 10.0667 10.1835 10.9313 11.2501 10.9313H13.5001C14.5667 10.9313 15.4313 10.0667 15.4313 9.0001C15.4313 7.9335 14.5667 7.06885 13.5001 7.06885H11.2501Z",fill:"currentColor"},children:[]},{type:"element",name:"path",attributes:{d:"M1.81885 13.5001C1.81885 12.4335 2.6835 11.5688 3.7501 11.5688H6.0001C7.0667 11.5688 7.93135 12.4335 7.93135 13.5001C7.93135 14.5667 7.0667 15.4313 6.0001 15.4313H3.7501C2.6835 15.4313 1.81885 14.5667 1.81885 13.5001Z",fill:"currentColor"},children:[]},{type:"element",name:"path",attributes:{d:"M9.75011 5.25011H9.00011V3.75011H9.75011C10.9927 3.75011 12.0001 4.75747 12.0001 6.00011H10.5001C10.5001 5.58589 10.1643 5.25011 9.75011 5.25011Z",fill:"currentColor"},children:[]},{type:"element",name:"path",attributes:{d:"M12.0001 12.0001C12.0001 13.2427 10.9927 14.2501 9.75011 14.2501H9.00011V12.7501H9.75011C10.1643 12.7501 10.5001 12.4143 10.5001 12.0001H12.0001Z",fill:"currentColor"},children:[]}]}]}]},name:"PipelineFill"})},8717,a=>{a.v({icon:{type:"element",isRootNode:!0,name:"svg",attributes:{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},children:[{type:"element",name:"g",attributes:{id:"pipeline-line"},children:[{type:"element",name:"path",attributes:{id:"Vector",d:"M3.75 15.75C2.50733 15.75 1.5 14.7426 1.5 13.5C1.5 12.2574 2.50733 11.25 3.75 11.25H6C6.97943 11.25 7.81268 11.8758 8.12175 12.7493L9 12.75C9.825 12.75 10.5 12.075 10.5 11.25L10.4993 11.1217C9.6258 10.8127 9 9.97942 9 9C9 8.02058 9.6258 7.18732 10.4993 6.87825L10.5 6.75C10.5 5.925 9.825 5.25 9 5.25L8.12197 5.24993C7.81313 6.12383 6.97973 6.75 6 6.75L3.75 6.75C2.50733 6.75 1.5 5.74268 1.5 4.5C1.5 3.25733 2.50732 2.25 3.75 2.25L6 2.25C6.97942 2.25 7.81268 2.8758 8.12175 3.74932L9 3.75C10.6575 3.75 12 5.0925 12 6.75L13.5 6.75C14.7426 6.75 15.75 7.75732 15.75 9C15.75 10.2427 14.7426 11.25 13.5 11.25H12C12 12.9069 10.6569 14.25 9 14.25L8.12198 14.2499C7.81313 15.1239 6.97973 15.75 6 15.75H3.75ZM3.75 5.25L6 5.25C6.41423 5.25 6.75 4.91423 6.75 4.5C6.75 4.08578 6.41423 3.75 6 3.75L3.75 3.75C3.33578 3.75 3 4.08578 3 4.5C3 4.91423 3.33578 5.25 3.75 5.25ZM11.25 9.75H13.5C13.9142 9.75 14.25 9.41422 14.25 9C14.25 8.58577 13.9142 8.25 13.5 8.25L11.25 8.25C10.8358 8.25 10.5 8.58577 10.5 9C10.5 9.41422 10.8358 9.75 11.25 9.75ZM3.75 14.25H6C6.41423 14.25 6.75 13.9142 6.75 13.5C6.75 13.0858 6.41423 12.75 6 12.75H3.75C3.33578 12.75 3 13.0858 3 13.5C3 13.9142 3.33578 14.25 3.75 14.25Z",fill:"currentColor"},children:[]}]}]},name:"PipelineLine"})},137550,184813,38276,337007,a=>{"use strict";var b=a.i(608061),c=a.i(796807),d=a.i(732056);let e=({ref:a,...e})=>(0,b.jsx)(c.default,{...e,ref:a,data:d.default});e.displayName="InputField",a.s(["default",0,e],184813);var f=a.i(181096);let g=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:f.default});g.displayName="PipelineFill",a.s(["default",0,g],38276);var h=a.i(8717);let i=({ref:a,...d})=>(0,b.jsx)(c.default,{...d,ref:a,data:h.default});i.displayName="PipelineLine",a.s(["default",0,i],337007),a.s([],137550)},388206,a=>{"use strict";var b=a.i(57843);let c=(a,b)=>{let c=a instanceof Map?a:new Map(a.entries()),d=b instanceof Map?b:new Map(b.entries());if(c.size!==d.size)return!1;for(let[a,b]of c)if(!d.has(a)||!Object.is(b,d.get(a)))return!1;return!0};function d(a){let d=b.default.useRef(void 0);return b=>{let e=a(b);return!function(a,b){if(Object.is(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b||Object.getPrototypeOf(a)!==Object.getPrototypeOf(b))return!1;if(Symbol.iterator in a&&Symbol.iterator in b){if("entries"in a&&"entries"in b)return c(a,b);let d=a[Symbol.iterator](),e=b[Symbol.iterator](),f=d.next(),g=e.next();for(;!f.done&&!g.done;){if(!Object.is(f.value,g.value))return!1;f=d.next(),g=e.next()}return!!f.done&&!!g.done}return c({entries:()=>Object.entries(a)},{entries:()=>Object.entries(b)})}(d.current,e)?d.current=e:d.current}}a.s(["useShallow",()=>d],388206)},878590,a=>{"use strict";function b(a,b){let c=Number.parseInt((a=a.replace("#","")).slice(0,2),16),d=Number.parseInt(a.slice(2,4),16),e=Number.parseInt(a.slice(4,6),16);return`rgba(${c},${d},${e},${b.toString()})`}function c(a){if(0===a.length)return{};let b={};for(let c of a.split(";"))if(c.trim().length>0){let[a,d]=c.split(":");Object.assign(b,{[a.trim()]:d.trim()})}return b}a.s(["CssTransform",()=>c,"hexToRGBA",()=>b])},61500,a=>{"use strict";var b=a.i(252813);a.s(["useDatasetApiAccessUrl",0,()=>(0,b.useDocLink)()("/api-reference/datasets/get-knowledge-base-list")])},22761,a=>{"use strict";var b=a.i(608061),c=a.i(57843),d=a.i(527344);let e=c.memo(({className:a})=>(0,b.jsx)("div",{className:(0,d.cn)("absolute size-[112px] rounded-full bg-util-colors-blue-brand-blue-brand-500 blur-[80px]",a)}));a.s(["default",0,e])},102569,a=>{"use strict";var b=a.i(854940);a.s(["TriggerAll",()=>b.default])},24561,a=>{"use strict";var b=a.i(41511),c=a.i(314576);a.i(494261);var d=a.i(735310);let e=async(a,d,e)=>(0,b.get)(`${(0,c.getFlowPrefix)(a)}/${d}/workflows/draft/variables`,{params:{page:e,limit:100}}),f=async(a,b)=>{let{items:c,total:d}=await e(a,b,1);if(d<=100)return c;let f=Math.ceil(d/100),g=[];for(let c=2;c<=f;c++)g.push(e(a,b,c));return(await Promise.all(g)).forEach(({items:a})=>{c.push(...a)}),c},g=async(a,d,e)=>{let{items:f}=await (0,b.get)(`${(0,c.getFlowPrefix)(a)}/${d}/workflows/draft/nodes/${e}/variables`);return f};a.s(["fetchAllInspectVars",0,f,"fetchNodeDefault",0,(a,c,d={})=>(0,b.get)(`apps/${a}/workflows/default-workflow-block-configs/${c}`,{params:{q:JSON.stringify(d)}}),"fetchNodeInspectVars",0,g,"fetchNodesDefaultConfigs",0,a=>(0,b.get)(a),"fetchPipelineNodeDefault",0,(a,c,d={})=>(0,b.get)(`rag/pipelines/${a}/workflows/default-workflow-block-configs/${c}`,{params:{q:JSON.stringify(d)}}),"fetchPublishedWorkflow",0,a=>(0,b.get)(a),"fetchWorkflowDraft",0,a=>(0,b.get)(a,{},{silent:!0}),"getIterationSingleNodeRunUrl",0,(a,b,d,e)=>`${(0,c.getFlowPrefix)(a)}/${d}/${b?"advanced-chat/":""}workflows/draft/iteration/nodes/${e}/run`,"getLoopSingleNodeRunUrl",0,(a,b,d,e)=>`${(0,c.getFlowPrefix)(a)}/${d}/${b?"advanced-chat/":""}workflows/draft/loop/nodes/${e}/run`,"singleNodeRun",0,(a,d,e,f)=>(0,b.post)(`${(0,c.getFlowPrefix)(a)}/${d}/workflows/draft/nodes/${e}/run`,{body:f}),"stopWorkflowRun",0,a=>(0,b.post)(a),"syncWorkflowDraft",0,({url:a,params:c})=>{let e=(a=>{let{graph:b}=a;if(!b?.nodes?.length)return a;let c=b.nodes.map(a=>{let b=(a=>{let b=a.data;if(!b||b.type!==d.BlockEnum.TriggerPlugin)return a;let c={type:d.BlockEnum.TriggerPlugin,title:b.title??"",desc:b.desc??"",plugin_id:b.plugin_id??"",provider_id:b.provider_id??"",event_name:b.event_name??"",subscription_id:b.subscription_id??"",plugin_unique_identifier:b.plugin_unique_identifier??"",event_parameters:"object"==typeof b.event_parameters&&null!==b.event_parameters?b.event_parameters:{}};return{...a,data:c}})(a);if(b.data?.type===d.BlockEnum.Start&&Array.isArray(b.data.variables)){let a={...b,data:{...b.data}};return a.data.variables=b.data.variables.map(a=>{if(a&&"json_object"===a.type&&"string"==typeof a.json_schema)try{let b=JSON.parse(a.json_schema);return{...a,json_schema:b}}catch{}return a}),a}return b});return{...a,graph:{...b,nodes:c}}})(c);return(0,b.post)(a,{body:e},{silent:!0})}],24561)},556476,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(111089),e=a.i(57843);a.i(752298);var f=a.i(693025),g=a.i(909795),h=a.i(816134),i=a.i(940272),j=a.i(146172),k=a.i(218257),l=a.i(527344),m=a.i(355968),n=a.i(429178),o=a.i(114715);a.s(["default",0,({show:a,dataset:p,onSuccess:q,onClose:r})=>{let{t:s}=(0,f.useTranslation)(),[t,u]=(0,e.useState)(!1),[v,w]=(0,e.useState)(p.name),[x,y]=(0,e.useState)(p.description),z=p.external_knowledge_info.external_knowledge_id,A=p.external_knowledge_info.external_knowledge_api_id,[B,C]=(0,e.useState)(p.icon_info?.icon_type==="image"?{type:"image",url:p.icon_info?.icon_url||"",fileId:p.icon_info?.icon||""}:{type:"emoji",icon:p.icon_info?.icon||"",background:p.icon_info?.icon_background||""}),[D,E]=(0,e.useState)(!1),F=(0,e.useRef)(p.icon_info?.icon_type==="image"?{type:"image",url:p.icon_info?.icon_url||"",fileId:p.icon_info?.icon||""}:{type:"emoji",icon:p.icon_info?.icon||"",background:p.icon_info?.icon_background||""}),G=(0,e.useCallback)(()=>{E(!0),F.current=B},[B]),H=(0,e.useCallback)(a=>{C(a),E(!1)},[]),I=(0,e.useCallback)(()=>{C(F.current),E(!1)},[]),J=(0,e.useCallback)(async()=>{if(!v.trim())return void o.default.notify({type:"error",message:s("form.nameError",{ns:"datasetSettings"})});try{u(!0);let a={name:v,description:x,icon_info:{icon:"image"===B.type?B.fileId:B.icon,icon_type:B.type,icon_background:"image"===B.type?void 0:B.background,icon_url:"image"===B.type?B.url:void 0}};z&&A&&(a.external_knowledge_id=z,a.external_knowledge_api_id=A),await (0,k.updateDatasetSetting)({datasetId:p.id,body:a}),o.default.notify({type:"success",message:s("actionMsg.modifiedSuccessfully",{ns:"common"})}),q&&q(),r()}catch{o.default.notify({type:"error",message:s("actionMsg.modifiedUnsuccessfully",{ns:"common"})})}finally{u(!1)}},[B,x,p.id,A,z,v,r,q,s]);return(0,b.jsxs)(i.default,{className:"w-[520px] max-w-[520px] rounded-xl px-8 py-6",isShow:a,onClose:d.noop,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between pb-2",children:[(0,b.jsx)("div",{className:"text-xl font-medium leading-[30px] text-text-primary",children:s("title",{ns:"datasetSettings"})}),(0,b.jsx)("div",{className:"cursor-pointer p-2",onClick:r,children:(0,b.jsx)(c.RiCloseLine,{className:"h-4 w-4 text-text-tertiary"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:(0,l.cn)("flex flex-col py-4"),children:[(0,b.jsx)("div",{className:"shrink-0 py-2 text-sm font-medium leading-[20px] text-text-primary",children:s("form.name",{ns:"datasetSettings"})}),(0,b.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,b.jsx)(m.default,{size:"medium",onClick:G,className:"cursor-pointer",iconType:B.type,icon:"image"===B.type?B.fileId:B.icon,background:"image"===B.type?void 0:B.background,imageUrl:"image"===B.type?B.url:void 0,showEditIcon:!0}),(0,b.jsx)(h.default,{value:v,onChange:a=>w(a.target.value),className:"h-9 grow",placeholder:s("form.namePlaceholder",{ns:"datasetSettings"})||""})]})]}),(0,b.jsxs)("div",{className:(0,l.cn)("flex flex-col py-4"),children:[(0,b.jsx)("div",{className:"shrink-0 py-2 text-sm font-medium leading-[20px] text-text-primary",children:s("form.desc",{ns:"datasetSettings"})}),(0,b.jsx)("div",{className:"w-full",children:(0,b.jsx)(j.default,{value:x,onChange:a=>y(a.target.value),className:"resize-none",placeholder:s("form.descPlaceholder",{ns:"datasetSettings"})||""})})]})]}),(0,b.jsxs)("div",{className:"flex justify-end pt-6",children:[(0,b.jsx)(g.default,{className:"mr-2",onClick:r,children:s("operation.cancel",{ns:"common"})}),(0,b.jsx)(g.default,{disabled:t,variant:"primary",onClick:J,children:s("operation.save",{ns:"common"})})]}),D&&(0,b.jsx)(n.default,{onSelect:H,onClose:I})]})}])},340527,a=>{"use strict";var b=a.i(999578);a.s(["ApiAggregate",()=>b.default])},829655,a=>{"use strict";var b=a.i(873956);a.s(["WindowCursor",()=>b.default])},537193,a=>{"use strict";var b=a.i(169570);a.s(["ApiAggregate",()=>b.default])},182769,a=>{"use strict";var b=a.i(608061);a.i(752298);var c=a.i(693025);a.i(275560);var d=a.i(537193),e=a.i(829655),f=a.i(483664),g=a.i(355968);let h=(0,b.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.833497 5.13481C0.833483 4.69553 0.83347 4.31654 0.858973 4.0044C0.88589 3.67495 0.94532 3.34727 1.10598 3.03195C1.34567 2.56155 1.72812 2.17909 2.19852 1.93941C2.51384 1.77875 2.84152 1.71932 3.17097 1.6924C3.48312 1.6669 3.86209 1.66691 4.30137 1.66693L7.62238 1.66684C8.11701 1.66618 8.55199 1.66561 8.95195 1.80356C9.30227 1.92439 9.62134 2.12159 9.88607 2.38088C10.1883 2.67692 10.3823 3.06624 10.603 3.50894L11.3484 5.00008H14.3679C15.0387 5.00007 15.5924 5.00006 16.0434 5.03691C16.5118 5.07518 16.9424 5.15732 17.3468 5.36339C17.974 5.68297 18.4839 6.19291 18.8035 6.82011C19.0096 7.22456 19.0917 7.65515 19.13 8.12356C19.1668 8.57455 19.1668 9.12818 19.1668 9.79898V13.5345C19.1668 14.2053 19.1668 14.7589 19.13 15.2099C19.0917 15.6784 19.0096 16.1089 18.8035 16.5134C18.4839 17.1406 17.974 17.6505 17.3468 17.9701C16.9424 18.1762 16.5118 18.2583 16.0434 18.2966C15.5924 18.3334 15.0387 18.3334 14.3679 18.3334H5.63243C4.96163 18.3334 4.40797 18.3334 3.95698 18.2966C3.48856 18.2583 3.05798 18.1762 2.65353 17.9701C2.02632 17.6505 1.51639 17.1406 1.19681 16.5134C0.990734 16.1089 0.908597 15.6784 0.870326 15.2099C0.833478 14.7589 0.833487 14.2053 0.833497 13.5345V5.13481ZM7.51874 3.33359C8.17742 3.33359 8.30798 3.34447 8.4085 3.37914C8.52527 3.41942 8.63163 3.48515 8.71987 3.57158C8.79584 3.64598 8.86396 3.7579 9.15852 4.34704L9.48505 5.00008L2.50023 5.00008C2.50059 4.61259 2.50314 4.34771 2.5201 4.14012C2.5386 3.91374 2.57 3.82981 2.59099 3.7886C2.67089 3.6318 2.79837 3.50432 2.95517 3.42442C2.99638 3.40343 3.08031 3.37203 3.30669 3.35353C3.54281 3.33424 3.85304 3.33359 4.3335 3.33359H7.51874Z",fill:"#444CE7"})}),i=(0,b.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,b.jsxs)("g",{clipPath:"url(#clip0_6294_13848)",children:[(0,b.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.287 21.9133L1.70748 18.6999C1.08685 17.9267 0.75 16.976 0.75 15.9974V4.36124C0.75 2.89548 1.92269 1.67923 3.43553 1.57594L15.3991 0.759137C16.2682 0.699797 17.1321 0.930818 17.8461 1.41353L22.0494 4.25543C22.8018 4.76414 23.25 5.59574 23.25 6.48319V19.7124C23.25 21.1468 22.0969 22.3345 20.6157 22.4256L7.3375 23.243C6.1555 23.3158 5.01299 22.8178 4.287 21.9133Z",fill:"white"}),(0,b.jsx)("path",{d:"M8.43607 10.1842V10.0318C8.43607 9.64564 8.74535 9.32537 9.14397 9.29876L12.0475 9.10491L16.0628 15.0178V9.82823L15.0293 9.69046V9.6181C15.0293 9.22739 15.3456 8.90501 15.7493 8.88433L18.3912 8.74899V9.12918C18.3912 9.30765 18.2585 9.46031 18.0766 9.49108L17.4408 9.59861V18.0029L16.6429 18.2773C15.9764 18.5065 15.2343 18.2611 14.8527 17.6853L10.9545 11.803V17.4173L12.1544 17.647L12.1377 17.7583C12.0853 18.1069 11.7843 18.3705 11.4202 18.3867L8.43607 18.5195C8.39662 18.1447 8.67758 17.8093 9.06518 17.7686L9.45771 17.7273V10.2416L8.43607 10.1842Z",fill:"black"}),(0,b.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.5062 2.22521L3.5426 3.04201C2.82599 3.09094 2.27051 3.66706 2.27051 4.36136V15.9975C2.27051 16.6499 2.49507 17.2837 2.90883 17.7992L5.48835 21.0126C5.90541 21.5322 6.56174 21.8183 7.24076 21.7765L20.519 20.9591C21.1995 20.9172 21.7293 20.3716 21.7293 19.7125V6.48332C21.7293 6.07557 21.5234 5.69348 21.1777 5.45975L16.9743 2.61784C16.546 2.32822 16.0277 2.1896 15.5062 2.22521ZM4.13585 4.54287C3.96946 4.41968 4.04865 4.16303 4.25768 4.14804L15.5866 3.33545C15.9476 3.30956 16.3063 3.40896 16.5982 3.61578L18.8713 5.22622C18.9576 5.28736 18.9171 5.41935 18.8102 5.42516L6.8129 6.07764C6.44983 6.09739 6.09144 5.99073 5.80276 5.77699L4.13585 4.54287ZM6.25018 8.12315C6.25018 7.7334 6.56506 7.41145 6.9677 7.38952L19.6523 6.69871C20.0447 6.67734 20.375 6.97912 20.375 7.35898V18.8141C20.375 19.2031 20.0613 19.5247 19.6594 19.5476L7.05516 20.2648C6.61845 20.2896 6.25018 19.954 6.25018 19.5312V8.12315Z",fill:"black"})]}),(0,b.jsx)("defs",{children:(0,b.jsx)("clipPath",{id:"clip0_6294_13848",children:(0,b.jsx)("rect",{width:"24",height:"24",fill:"white"})})})]}),j={app:(0,b.jsx)(g.default,{className:"border !border-[rgba(0,0,0,0.05)]"}),api:(0,b.jsx)("div",{className:"rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-blue-brand-blue-brand-500 p-1 shadow-md",children:(0,b.jsx)(d.ApiAggregate,{className:"h-4 w-4 text-text-primary-on-surface"})}),dataset:(0,b.jsx)(g.default,{innerIcon:h,className:"!border-[0.5px] !border-indigo-100 !bg-indigo-25"}),webapp:(0,b.jsx)("div",{className:"rounded-lg border-[0.5px] border-divider-subtle bg-util-colors-blue-brand-blue-brand-500 p-1 shadow-md",children:(0,b.jsx)(e.WindowCursor,{className:"h-4 w-4 text-text-primary-on-surface"})}),notion:(0,b.jsx)(g.default,{innerIcon:i,className:"!border-[0.5px] !border-indigo-100 !bg-white"})};function k({icon:a,icon_background:d,name:e,isExternal:h,type:i,hoverTip:k,textStyle:l,isExtraInLine:m,mode:n="expand",iconType:o="app",hideType:p}){let{t:q}=(0,c.useTranslation)();return(0,b.jsxs)("div",{className:"flex grow items-center",children:[a&&d&&"app"===o&&(0,b.jsx)("div",{className:"mr-2 shrink-0",children:(0,b.jsx)(g.default,{icon:a,background:d})}),"app"!==o&&(0,b.jsx)("div",{className:"mr-2 shrink-0",children:j[o]}),"expand"===n&&(0,b.jsxs)("div",{className:"group w-full",children:[(0,b.jsxs)("div",{className:`system-md-semibold flex flex-row items-center text-text-secondary group-hover:text-text-primary ${l?.main??""}`,children:[(0,b.jsx)("div",{className:"min-w-0 overflow-hidden text-ellipsis break-normal",children:e}),k&&(0,b.jsx)(f.default,{popupContent:(0,b.jsx)("div",{className:"w-[240px]",children:k}),popupClassName:"ml-1",triggerClassName:"w-4 h-4 ml-1",position:"top"})]}),!p&&m&&(0,b.jsx)("div",{className:"system-2xs-medium-uppercase flex text-text-tertiary",children:i}),!p&&!m&&(0,b.jsx)("div",{className:"system-2xs-medium-uppercase text-text-tertiary",children:h?q("externalTag",{ns:"dataset"}):i})]})]})}a.s(["default",()=>k])},774944,a=>{a.v({autoWidth:"style-module__Qu6CpW__autoWidth",close:"style-module__Qu6CpW__close",copied:"style-module__Qu6CpW__copied",copyIcon:"style-module__Qu6CpW__copyIcon",customApi:"style-module__Qu6CpW__customApi",customModal:"style-module__Qu6CpW__customModal",trash:"style-module__Qu6CpW__trash",trashIcon:"style-module__Qu6CpW__trashIcon",w64:"style-module__Qu6CpW__w64"})},972729,a=>{"use strict";var b=a.i(608061),c=a.i(911364),d=a.i(893500),e=a.i(429150),f=a.i(57843);a.i(752298);var g=a.i(693025),h=a.i(175809),i=a.i(909795),j=a.i(42550),k=a.i(748240),l=a.i(105249),m=a.i(940272),n=a.i(705134),o=a.i(98654),p=a.i(802066),q=a.i(218257),r=a.i(847733),s=a.i(926261),t=a.i(875067),u=a.i(934402),v=a.i(483664);let w=({value:a="",className:c,children:d})=>{let[e,g]=(0,f.useState)(!1);return(0,f.useEffect)(()=>{if(e){let a=setTimeout(()=>{g(!1)},1e3);return()=>{clearTimeout(a)}}},[e]),(0,b.jsx)("div",{className:`flex items-center rounded-lg bg-components-input-bg-normal py-2 hover:bg-state-base-hover ${c}`,children:(0,b.jsxs)("div",{className:"flex h-5 grow items-center",children:[d,(0,b.jsx)("div",{className:"relative h-full grow text-[13px]",children:(0,b.jsx)("div",{className:"r-0 absolute left-0 top-0 w-full cursor-pointer truncate pl-2 pr-2",onClick:()=>{(0,t.default)(a),g(!0)},children:(0,b.jsx)(v.default,{popupContent:e?`${(0,u.t)("copied",{ns:"appApi"})}`:`${(0,u.t)("copy",{ns:"appApi"})}`,position:"bottom",children:(0,b.jsx)("span",{className:"text-text-secondary",children:a})})})}),(0,b.jsx)("div",{className:"h-4 w-px shrink-0 bg-divider-regular"}),(0,b.jsx)("div",{className:"mx-1",children:(0,b.jsx)(k.default,{content:a})})]})})};var x=a.i(774944);let y=({isShow:a=!1,onClose:c,newKey:e,className:f})=>{let{t:h}=(0,g.useTranslation)();return(0,b.jsxs)(m.default,{isShow:a,onClose:c,title:`${h("apiKeyModal.apiSecretKey",{ns:"appApi"})}`,className:`px-8 ${f}`,children:[(0,b.jsx)("div",{className:"-mr-2 -mt-6 mb-4 flex justify-end",children:(0,b.jsx)(d.XMarkIcon,{className:"h-6 w-6 cursor-pointer text-text-tertiary",onClick:c})}),(0,b.jsx)("p",{className:"mt-1 text-[13px] font-normal leading-5 text-text-tertiary",children:h("apiKeyModal.generateTips",{ns:"appApi"})}),(0,b.jsx)("div",{className:"my-4",children:(0,b.jsx)(w,{className:"w-full",value:e?.token})}),(0,b.jsx)("div",{className:"my-4 flex justify-end",children:(0,b.jsx)(i.default,{className:`shrink-0 ${x.default.w64}`,onClick:c,children:(0,b.jsx)("span",{className:"text-xs font-medium text-text-secondary",children:h("actionMsg.ok",{ns:"appApi"})})})})]})};a.s(["default",0,({isShow:a=!1,appId:t,onClose:u})=>{let{t:v}=(0,g.useTranslation)(),{formatTime:w}=(0,o.default)(),{currentWorkspace:z,isCurrentWorkspaceManager:A,isCurrentWorkspaceEditor:B}=(0,n.useAppContext)(),[C,D]=(0,f.useState)(!1),[E,F]=(0,f.useState)(!1),[G,H]=(0,f.useState)(void 0),I=(0,s.useInvalidateAppApiKeys)(),J=(0,r.useInvalidateDatasetApiKeys)(),{data:K,isLoading:L}=(0,s.useAppApiKeys)(t,{enabled:!!t&&a}),{data:M,isLoading:N}=(0,r.useDatasetApiKeys)({enabled:!t&&a}),O=t?K:M,P=t?L:N,[Q,R]=(0,f.useState)(""),S=async()=>{if(D(!1),!Q)return;let a=t?p.delApikey:q.delApikey,b=t?{url:`/apps/${t}/api-keys/${Q}`,params:{}}:{url:`/datasets/api-keys/${Q}`,params:{}};await a(b),t?I(t):J()},T=async()=>{let a=t?{url:`/apps/${t}/api-keys`,body:{}}:{url:"/datasets/api-keys",body:{}},b=t?p.createApikey:q.createApikey,c=await b(a);F(!0),H(c),t?I(t):J()};return(0,b.jsxs)(m.default,{isShow:a,onClose:u,title:`${v("apiKeyModal.apiSecretKey",{ns:"appApi"})}`,className:`${x.default.customModal} flex flex-col px-8`,children:[(0,b.jsx)("div",{className:"-mr-2 -mt-6 mb-4 flex justify-end",children:(0,b.jsx)(d.XMarkIcon,{className:"h-6 w-6 cursor-pointer text-text-tertiary",onClick:u})}),(0,b.jsx)("p",{className:"mt-1 shrink-0 text-[13px] font-normal leading-5 text-text-tertiary",children:v("apiKeyModal.apiSecretKeyTips",{ns:"appApi"})}),P&&(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(l.default,{})}),!!O?.data?.length&&(0,b.jsxs)("div",{className:"mt-4 flex grow flex-col overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex h-9 shrink-0 items-center border-b border-divider-regular text-xs font-semibold text-text-tertiary",children:[(0,b.jsx)("div",{className:"w-64 shrink-0 px-3",children:v("apiKeyModal.secretKey",{ns:"appApi"})}),(0,b.jsx)("div",{className:"w-[200px] shrink-0 px-3",children:v("apiKeyModal.created",{ns:"appApi"})}),(0,b.jsx)("div",{className:"w-[200px] shrink-0 px-3",children:v("apiKeyModal.lastUsed",{ns:"appApi"})}),(0,b.jsx)("div",{className:"grow px-3"})]}),(0,b.jsx)("div",{className:"grow overflow-auto",children:O.data.map(a=>{let c;return(0,b.jsxs)("div",{className:"flex h-9 items-center border-b border-divider-regular text-sm font-normal text-text-secondary",children:[(0,b.jsx)("div",{className:"w-64 shrink-0 truncate px-3 font-mono",children:(c=a.token,`${c.slice(0,3)}...${c.slice(-20)}`)}),(0,b.jsx)("div",{className:"w-[200px] shrink-0 truncate px-3",children:w(Number(a.created_at),v("dateTimeFormat",{ns:"appLog"}))}),(0,b.jsx)("div",{className:"w-[200px] shrink-0 truncate px-3",children:a.last_used_at?w(Number(a.last_used_at),v("dateTimeFormat",{ns:"appLog"})):v("never",{ns:"appApi"})}),(0,b.jsxs)("div",{className:"flex grow space-x-2 px-3",children:[(0,b.jsx)(k.default,{content:a.token}),A&&(0,b.jsx)(h.default,{onClick:()=>{R(a.id),D(!0)},children:(0,b.jsx)(e.RiDeleteBinLine,{className:"h-4 w-4"})})]})]},a.id)})})]}),(0,b.jsx)("div",{className:"flex",children:(0,b.jsxs)(i.default,{className:`mt-4 flex shrink-0 ${x.default.autoWidth}`,onClick:T,disabled:!z||!B,children:[(0,b.jsx)(c.PlusIcon,{className:"mr-1 flex h-4 w-4 shrink-0"}),(0,b.jsx)("div",{className:"text-xs font-medium text-text-secondary",children:v("apiKeyModal.createNewSecretKey",{ns:"appApi"})})]})}),(0,b.jsx)(y,{className:"shrink-0",isShow:E,onClose:()=>F(!1),newKey:G}),C&&(0,b.jsx)(j.default,{title:`${v("actionMsg.deleteConfirmTitle",{ns:"appApi"})}`,content:`${v("actionMsg.deleteConfirmTips",{ns:"appApi"})}`,isShow:C,onConfirm:S,onCancel:()=>{R(""),D(!1)}})]})}],972729)},234416,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(57843);a.i(752298);var e=a.i(693025),f=a.i(909795),g=a.i(972729);a.s(["default",0,({className:a,appId:h,textCls:i})=>{let[j,k]=(0,d.useState)(!1),{t:l}=(0,e.useTranslation)();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(f.default,{className:`px-3 ${a}`,onClick:()=>k(!0),size:"small",variant:"ghost",children:[(0,b.jsx)("div",{className:"flex h-3.5 w-3.5 items-center justify-center",children:(0,b.jsx)(c.RiKey2Line,{className:"h-3.5 w-3.5 text-text-tertiary"})}),(0,b.jsx)("div",{className:`system-xs-medium px-[3px] text-text-tertiary ${i}`,children:l("apiKey",{ns:"appApi"})})]}),(0,b.jsx)(g.default,{isShow:j,onClose:()=>k(!1),appId:h})]})}])},620141,a=>{"use strict";var b=a.i(608061),c=a.i(429150),d=a.i(533306),e=a.i(57843);a.i(752298);var f=a.i(693025),g=a.i(45272),h=a.i(243103);a.i(137550);var i=a.i(38276),i=i,j=a.i(337007),j=j,k=a.i(105249),l=a.i(624863),m=a.i(705134),n=a.i(698636),o=a.i(124116),p=a.i(585124),q=a.i(280342),r=a.i(847733),s=a.i(527344);let t=e.memo(a=>{let{children:t,params:{datasetId:u}}=a,{t:v}=(0,f.useTranslation)(),w=(0,d.usePathname)(),x=w.endsWith("documents/create")||w.endsWith("documents/create-from-pipeline"),y=w.endsWith("/pipeline"),z="true"===localStorage.getItem("workflow-canvas-maximize"),[A,B]=(0,e.useState)(z),{eventEmitter:C}=(0,o.useEventEmitterContextContext)();C?.useSubscription(a=>{a?.type==="workflow-canvas-maximize"&&B(a.payload)});let{isCurrentWorkspaceDatasetOperator:D}=(0,m.useAppContext)(),E=(0,p.default)()===p.MediaType.mobile,{data:F,error:G,refetch:H}=(0,r.useDatasetDetail)(u),{data:I}=(0,r.useDatasetRelatedApps)(u),J=(0,e.useMemo)(()=>!F||"external"!==F.provider&&"general"!==F.runtime_mode&&!F.is_published,[F]),K=(0,e.useMemo)(()=>{let a=[{name:v("datasetMenus.hitTesting",{ns:"common"}),href:`/datasets/${u}/hitTesting`,icon:c.RiFocus2Line,selectedIcon:c.RiFocus2Fill,disabled:J},{name:v("datasetMenus.settings",{ns:"common"}),href:`/datasets/${u}/settings`,icon:c.RiEqualizer2Line,selectedIcon:c.RiEqualizer2Fill,disabled:!1}];return F?.provider!=="external"&&(a.unshift({name:v("datasetMenus.pipeline",{ns:"common"}),href:`/datasets/${u}/pipeline`,icon:j.default,selectedIcon:i.default,disabled:!1}),a.unshift({name:v("datasetMenus.documents",{ns:"common"}),href:`/datasets/${u}/documents`,icon:c.RiFileTextLine,selectedIcon:c.RiFileTextFill,disabled:J})),a},[v,u,J,F?.provider]);(0,q.default)(F?.name||v("menus.datasets",{ns:"common"}));let L=(0,h.useStore)(a=>a.setAppSidebarExpand);return((0,e.useEffect)(()=>{let a=localStorage.getItem("app-detail-collapse-or-expand")||"expand";L(E?E?"collapse":"expand":a)},[E,L]),F||G)?(0,b.jsx)("div",{className:(0,s.cn)("flex grow overflow-hidden",A&&y?"":"rounded-t-2xl"),children:(0,b.jsxs)(n.default.Provider,{value:{indexingTechnique:F?.indexing_technique,dataset:F,mutateDatasetRes:H},children:[!x&&(0,b.jsx)(g.default,{navigation:K,extraInfo:D?void 0:a=>(0,b.jsx)(l.default,{relatedApps:I,expand:"expand"===a,documentCount:F?.document_count}),iconType:"dataset"}),(0,b.jsx)("div",{className:"grow overflow-hidden bg-background-default-subtle",children:t})]})}):(0,b.jsx)(k.default,{type:"app"})});a.s(["default",0,t],620141)}];

//# sourceMappingURL=_1e883efa._.js.map