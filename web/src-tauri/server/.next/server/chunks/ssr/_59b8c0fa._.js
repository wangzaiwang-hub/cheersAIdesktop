module.exports=[560847,928479,585818,a=>{"use strict";function b(a,...c){let d=new URL("https://lexical.dev/docs/error"),e=new URLSearchParams;for(let b of(e.append("code",a),c))e.append("v",b);throw d.search=e.toString(),Error(`Minified Lexical error #${a}; visit ${d.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function c(a,...b){let d=new URL("https://lexical.dev/docs/error"),e=new URLSearchParams;for(let c of(e.append("code",a),b))e.append("v",c);d.search=e.toString(),console.warn(`Minified Lexical warning #${a}; visit ${d.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function d(...a){let b=[];for(let c of a)if(c&&"string"==typeof c)for(let[a]of c.matchAll(/\S+/g))b.push(a);return b}let e="֑-߿יִ-﷽ﹰ-ﻼ",f="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",g=RegExp("^[^"+f+"]*["+e+"]"),h=RegExp("^[^"+e+"]*["+f+"]"),i={bold:1,capitalize:1024,code:16,highlight:128,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512},j={directionless:1,unmergeable:2},k={center:2,end:6,justify:4,left:1,right:3,start:5},l={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},m={normal:0,segmented:2,token:1},n={0:"normal",2:"segmented",1:"token"},o="$config",p=!1,q=0;function r(a){q=a.timeStamp}function s(a,b,c){let d="BR"===a.nodeName,e=b.__lexicalLineBreak;return e&&(a===e||d&&a.previousSibling===e)||d&&void 0!==dz(a,c)}function t(a,b,c){p=!0;let d=performance.now()-q>100;try{cP(a,()=>{let e=cl()||a.getEditorState().read(()=>{let a=cl();return null!==a?a.clone():null}),f=new Map,g=a.getRootElement(),h=a._editorState,i=a._blockCursorElement,j=!1;for(let c=0;c<b.length;c++){let k=b[c],l=k.type,m=k.target,n=function(a,b,c,d){var e;for(let f=a;f&&(e=f,!0!==e.__lexicalUnmanaged);f=dZ(f)){let a=dz(f,b);if(void 0!==a){let b=dx(a,c);if(b)return cW(b)||!ea(f)?void 0:[f,b]}else if(f===d)return[d,dE(c)]}}(m,a,h,g);if(!n)continue;let[o,p]=n;if("characterData"===l)d&&bW(p)&&dm(m)&&function(a,b,c){if(b4(a)){let b=a.anchor.getNode();if(b.is(c)&&a.format!==b.getFormat())return!1}return dm(b)&&c.isAttached()}(e,m,p)&&function(a,b,c){var d;let e=(d=d1(c),null),f=null,g=null;null!==e&&e.anchorNode===a&&(f=e.anchorOffset,g=e.focusOffset);let h=a.nodeValue;null!==h&&dK(b,h,f,g,!1)}(m,p,a);else if("childList"===l){j=!0;let b=k.addedNodes;for(let c=0;c<b.length;c++){let d=b[c],e=dy(d),f=d.parentNode;null==f||d===i||null!==e||s(d,f,a)||f.removeChild(d)}let c=k.removedNodes,d=c.length;if(d>0){let b=0;for(let e=0;e<d;e++){let d=c[e];(s(d,m,a)||i===d)&&(m.appendChild(d),b++)}d!==b&&f.set(o,p)}}}if(f.size>0)for(let[b,c]of f)c.reconcileObservedMutation(b,a);let k=c.takeRecords();if(k.length>0){for(let b=0;b<k.length;b++){let c=k[b],d=c.addedNodes,e=c.target;for(let b=0;b<d.length;b++){let c=d[b],f=c.parentNode;null==f||"BR"!==c.nodeName||s(c,e,a)||f.removeChild(c)}}c.takeRecords()}null!==e&&j&&dF(e)})}finally{p=!1}}function u(a){let b=a._observer;null!==b&&t(a,b.takeRecords(),b)}function v(a){0===q&&d1(a).addEventListener("textInput",r,!0),a._observer=new MutationObserver((b,c)=>{t(a,b,c)})}function w(a,b,c="latest"){let d=("latest"===c?a.getLatest():a).__state;return d?d.getValue(b):b.defaultValue}function x(a,b,c){let d;if(cA(),"function"==typeof c){let e=a.getLatest(),f=w(e,b);if(d=c(f),b.isEqual(f,d))return e}else d=c;let e=a.getWritable();return z(e).updateFromKnown(b,d),e}class y{node;knownState;unknownState;sharedNodeState;size;constructor(a,b,c,d=new Map,e){this.node=a,this.sharedNodeState=b,this.unknownState=c,this.knownState=d;const{sharedConfigMap:f}=this.sharedNodeState,g=void 0!==e?e:function(a,b,c){let d=c.size;if(b)for(let e in b){let b=a.get(e);b&&c.has(b)||d++}return d}(f,c,d);this.size=g}getValue(a){let b=this.knownState.get(a);if(void 0!==b)return b;this.sharedNodeState.sharedConfigMap.set(a.key,a);let c=a.defaultValue;if(this.unknownState&&a.key in this.unknownState){let b=this.unknownState[a.key];void 0!==b&&(c=a.parse(b)),this.updateFromKnown(a,c)}return c}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){let a={...this.unknownState},b={};for(let[b,c]of this.knownState)b.isEqual(c,b.defaultValue)?delete a[b.key]:a[b.key]=b.unparse(c);for(let c of this.sharedNodeState.flatKeys)c in a&&(b[c]=a[c],delete a[c]);return B(a)&&(b.$=a),b}getWritable(a){if(this.node===a)return this;let{sharedNodeState:b,unknownState:c}=this,d=new Map(this.knownState);return new y(a,b,function(a,b,c){let d;if(c)for(let[e,f]of Object.entries(c)){let c=a.get(e);c?b.has(c)||b.set(c,c.parse(f)):(d=d||{})[e]=f}return d}(b.sharedConfigMap,d,c),d,this.size)}updateFromKnown(a,b){let c=a.key;this.sharedNodeState.sharedConfigMap.set(c,a);let{knownState:d,unknownState:e}=this;d.has(a)||e&&c in e||(e&&(delete e[c],this.unknownState=B(e)),this.size++),d.set(a,b)}updateFromUnknown(a,b){let c=this.sharedNodeState.sharedConfigMap.get(a);c?this.updateFromKnown(c,c.parse(b)):(this.unknownState=this.unknownState||{},a in this.unknownState||this.size++,this.unknownState[a]=b)}updateFromJSON(a){let{knownState:b}=this;for(let a of b.keys())b.set(a,a.defaultValue);if(this.size=b.size,this.unknownState=void 0,a)for(let[b,c]of Object.entries(a))this.updateFromUnknown(b,c)}}function z(a){let b=a.getWritable(),c=b.__state?b.__state.getWritable(b):new y(b,A(b));return b.__state=c,c}function A(a){return a.__state?a.__state.sharedNodeState:db(eg(),a.getType()).sharedNodeState}function B(a){if(a)for(let b in a)return a}function C(a,b,c){for(let[d,e]of b.knownState){if(a.has(d.key))continue;a.add(d.key);let b=c?c.getValue(d):d.defaultValue;if(b!==e&&!d.isEqual(b,e))return!0}return!1}function D(a,b,c){let{unknownState:d}=b,e=c?c.unknownState:void 0;if(d){for(let[b,c]of Object.entries(d))if(!a.has(b)&&(a.add(b),c!==(e?e[b]:void 0)))return!0}return!1}function E(a,b){let c=a.__state;return c&&c.node===a?c.getWritable(b):c}function F(a,b){let c=a.__mode,d=a.__format,e=a.__style,f=b.__mode,g=b.__format,h=b.__style,i=a.__state,j=b.__state;return(null===c||c===f)&&(null===d||d===g)&&(null===e||e===h)&&(null===a.__state||i===j||function(a,b){if(a===b)return!0;if(a&&b&&a.size!==b.size)return!1;let c=new Set;return!(a&&C(c,a,b)||b&&C(c,b,a)||a&&D(c,a,b)||b&&D(c,b,a))}(i,j))}function G(a,b){let c=a.mergeWithSibling(b),d=cD()._normalizedNodes;return d.add(a.__key),d.add(b.__key),c}function H(a){let b,c,d=a;if(""!==d.__text||!d.isSimpleText()||d.isUnmergeable()){for(;null!==(b=d.getPreviousSibling())&&bW(b)&&b.isSimpleText()&&!b.isUnmergeable();){if(""!==b.__text){F(b,d)&&(d=G(b,d));break}b.remove()}for(;null!==(c=d.getNextSibling())&&bW(c)&&c.isSimpleText()&&!c.isUnmergeable();){if(""!==c.__text){F(d,c)&&(d=G(d,c));break}c.remove()}}else d.remove()}function I(a){return J(a.anchor),J(a.focus),a}function J(a){for(;"element"===a.type;){let b,c,d=a.getNode(),e=a.offset;if(e===d.getChildrenSize()?(b=d.getChildAtIndex(e-1),c=!0):(b=d.getChildAtIndex(e),c=!1),bW(b)){a.set(b.__key,c?b.getTextContentSize():0,"text",!0);break}if(!cT(b))break;a.set(b.__key,c?b.getChildrenSize():0,"element",!0)}}let K,L,M,N,O,P,Q,R,S,T,U="",V=null,W="",X="",Y=!1,Z=!1;function $(a,b){let c=Q.get(a);if(null!==b){let c=al(a);c.parentNode===b&&b.removeChild(c)}if(R.has(a)||L._keyToDOMMap.delete(a),cT(c)){let a=ai(c,Q);_(a,0,a.length-1,null)}void 0!==c&&dT(T,M,N,c,"destroyed")}function _(a,b,c,d){let e=b;for(;e<=c;++e){let b=a[e];void 0!==b&&$(b,d)}}function aa(a,b){a.setProperty("text-align",b)}function ab(a,b){let c=K.theme.indent;if("string"==typeof c){let d=a.classList.contains(c);b>0&&!d?a.classList.add(c):b<1&&d&&a.classList.remove(c)}let d=getComputedStyle(a).getPropertyValue("--lexical-indent-base-value")||"40px";a.style.setProperty("padding-inline-start",0===b?"":`calc(${b} * ${d})`)}function ac(a,b){let c=a.style;0===b?aa(c,""):1===b?aa(c,"left"):2===b?aa(c,"center"):3===b?aa(c,"right"):4===b?aa(c,"justify"):5===b?aa(c,"start"):6===b&&aa(c,"end")}function ad(a,b){let c=function(a){let b=a.__dir;if(null!==b)return b;if(cY(a))return null;let c=a.getParentOrThrow();return cY(c)&&null===c.__dir?"auto":null}(b);null!==c?a.dir=c:a.removeAttribute("dir")}function ae(a,c){var d;let e,f=R.get(a);void 0===f&&b(60);let g=f.createDOM(K,L);if(e=(d=L)._keyToDOMMap,g[`__lexicalKey_${d._key}`]=a,e.set(a,g),bW(f)?g.setAttribute("data-lexical-text","true"):cW(f)&&g.setAttribute("data-lexical-decorator","true"),cT(f)){let a=f.__indent,b=f.__size;ad(g,f),0!==a&&ab(g,a),0!==b&&af(ai(f,R),f,0,b-1,f.getDOMSlot(g));let c=f.__format;0!==c&&ac(g,c),f.isInline()||ah(null,f,g),dX(f)&&(U+="\n\n",X+="\n\n")}else{let b=f.getTextContent();if(cW(f)){let b=f.decorate(L,K);null!==b&&aj(a,b),g.contentEditable="false"}U+=b,X+=b}return null!==c&&c.insertChild(g),dT(T,M,N,f,"created"),g}function af(a,b,c,d,e){let f=U;U="";let g=c;for(;g<=d;++g){ae(a[g],e);let b=R.get(a[g]);null!==b&&bW(b)&&(null===V&&(V=b.getFormat()),""===W&&(W=b.getStyle()))}dX(b)&&(U+="\n\n"),e.element.__lexicalTextContent=U,U=f+U}function ag(a,b){if(a){let c=a.__last;if(c){let a=b.get(c);if(a)return bF(a)?"line-break":cW(a)&&a.isInline()?"decorator":null}return"empty"}return null}function ah(a,b,c){let d=ag(a,Q),e=ag(b,R);d!==e&&b.getDOMSlot(c).setManagedLineBreak(e)}function ai(a,c){let d=[],e=a.__first;for(;null!==e;){let a=c.get(e);void 0===a&&b(101),d.push(e),e=a.__next}return d}function aj(a,b){let c=L._pendingDecorators,d=L._decorators;if(null===c){if(d[a]===b)return;c=dB(L)}c[a]=b}function ak(a){let b=a.nextSibling;return null!==b&&b===L._blockCursorElement&&(b=b.nextSibling),b}function al(a){let c=S.get(a);return void 0===c&&b(75,a),c}function am(a){return{type:a}}let an=am("SELECTION_CHANGE_COMMAND"),ao=am("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),ap=am("CLICK_COMMAND"),aq=am("DELETE_CHARACTER_COMMAND"),ar=am("INSERT_LINE_BREAK_COMMAND"),as=am("INSERT_PARAGRAPH_COMMAND"),at=am("CONTROLLED_TEXT_INSERTION_COMMAND"),au=am("PASTE_COMMAND"),av=am("REMOVE_TEXT_COMMAND"),aw=am("DELETE_WORD_COMMAND"),ax=am("DELETE_LINE_COMMAND"),ay=am("FORMAT_TEXT_COMMAND"),az=am("UNDO_COMMAND"),aA=am("REDO_COMMAND"),aB=am("KEYDOWN_COMMAND"),aC=am("KEY_ARROW_RIGHT_COMMAND"),aD=am("MOVE_TO_END"),aE=am("KEY_ARROW_LEFT_COMMAND"),aF=am("MOVE_TO_START"),aG=am("KEY_ARROW_UP_COMMAND"),aH=am("KEY_ARROW_DOWN_COMMAND"),aI=am("KEY_ENTER_COMMAND"),aJ=am("KEY_SPACE_COMMAND"),aK=am("KEY_BACKSPACE_COMMAND"),aL=am("KEY_ESCAPE_COMMAND"),aM=am("KEY_DELETE_COMMAND"),aN=am("KEY_TAB_COMMAND"),aO=am("INSERT_TAB_COMMAND"),aP=am("INDENT_CONTENT_COMMAND"),aQ=am("OUTDENT_CONTENT_COMMAND"),aR=am("DROP_COMMAND"),aS=am("FORMAT_ELEMENT_COMMAND"),aT=am("DRAGSTART_COMMAND"),aU=am("DRAGOVER_COMMAND"),aV=am("DRAGEND_COMMAND"),aW=am("COPY_COMMAND"),aX=am("CUT_COMMAND"),aY=am("SELECT_ALL_COMMAND"),aZ=am("CLEAR_EDITOR_COMMAND"),a$=am("CLEAR_HISTORY_COMMAND"),a_=am("CAN_REDO_COMMAND"),a0=am("CAN_UNDO_COMMAND"),a1=am("FOCUS_COMMAND"),a2=am("BLUR_COMMAND"),a3=am("KEY_MODIFIER_COMMAND"),a4=Object.freeze({}),a5=[["keydown",function(a,b){if((a6=a.timeStamp,a7=a.key,!(b.isComposing()||dW(b,aB,a)))&&null!=a.key){if(bf&&dQ(a))return cP(b,()=>{bp(b,bg)}),bf=!1,void(bg="");if(dN(a,"ArrowRight",{shiftKey:"any"}))dW(b,aC,a);else if(dN(a,"ArrowRight",dO))dW(b,aD,a);else if(dN(a,"ArrowLeft",{shiftKey:"any"}))dW(b,aE,a);else if(dN(a,"ArrowLeft",dO))dW(b,aF,a);else if(dN(a,"ArrowUp",{altKey:"any",shiftKey:"any"}))dW(b,aG,a);else if(dN(a,"ArrowDown",{altKey:"any",shiftKey:"any"}))dW(b,aH,a);else if(dN(a,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0}))bd=!0,dW(b,aI,a);else if(" "===a.key)dW(b,aJ,a);else if(0)a.preventDefault(),bd=!0,dW(b,ar,!0);else if(dN(a,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"}))bd=!1,dW(b,aI,a);else if(dN(a,"Backspace",{shiftKey:"any"}))dQ(a)?dW(b,aK,a):(a.preventDefault(),dW(b,aq,!0));else if("Escape"===a.key)dW(b,aL,a);else if(dN(a,"Delete",{}))"Delete"!==a.key?(a.preventDefault(),dW(b,aq,!1)):dW(b,aM,a);else if(dN(a,"Backspace",dP))a.preventDefault(),dW(b,aw,!0);else if(dN(a,"Delete",dP))a.preventDefault(),dW(b,aw,!1);else if(0)a.preventDefault(),dW(b,ax,!0);else if(0)a.preventDefault(),dW(b,ax,!1);else if(dN(a,"b",dO))a.preventDefault(),dW(b,ay,"bold");else if(dN(a,"u",dO))a.preventDefault(),dW(b,ay,"underline");else if(dN(a,"i",dO))a.preventDefault(),dW(b,ay,"italic");else if(dN(a,"Tab",{shiftKey:"any"}))dW(b,aN,a);else if(dN(a,"z",dO))a.preventDefault(),dW(b,az,void 0);else if(dN(a,"y",{ctrlKey:!0})||dN(a,"z",{ctrlKey:!0,shiftKey:!0}))a.preventDefault(),dW(b,aA,void 0);else{let c=b._editorState._selection;null===c||b4(c)?dN(a,"a",dO)&&(a.preventDefault(),dW(b,aY,a)):dN(a,"c",dO)?(a.preventDefault(),dW(b,aW,a)):dN(a,"x",dO)?(a.preventDefault(),dW(b,aX,a)):dN(a,"a",dO)&&(a.preventDefault(),dW(b,aY,a))}(a.ctrlKey||a.shiftKey||a.altKey||a.metaKey)&&dW(b,a3,a)}}],["pointerdown",function(a,b){let c=a.target,d=a.pointerType;eb(c)&&"touch"!==d&&"pen"!==d&&0===a.button&&cP(b,()=>{cW(dA(c))||(bc=!0)})}],["compositionstart",function(a,b){cP(b,()=>{let c=cl();if(b4(c)&&!b.isComposing()){let d=c.anchor,e=c.anchor.getNode();dv(d.key),(a.timeStamp<a6+30||"element"===d.type||!c.isCollapsed()||e.getFormat()!==c.format||bW(e)&&e.getStyle()!==c.style)&&dW(b,at,"​")}})}],["compositionend",function(a,b){cP(b,()=>{bp(b,a.data)})}],["input",function(a,b){a.stopPropagation(),cP(b,()=>{var c,d,e;if(ea(a.target)&&cW(dA(a.target)))return;let f=cl(),g=a.data,h=bo(a);if(null!=g&&b4(f)&&bj(f,h,g,a.timeStamp,!1)){be&&(bp(b,g),be=!1),f.anchor.getNode(),c=d1(b);return}d=0,e=0,d1(b),be&&(bp(b,g||void 0),be=!1),cA(),u(cD())},{event:a}),a8=null}],["click",function(a,b){cP(b,()=>{var c;cl(),c=d1(b),cm(),dW(b,ap,a)})}],["cut",a4],["copy",a4],["dragstart",a4],["dragover",a4],["dragend",a4],["paste",a4],["focus",a4],["blur",a4],["drop",a4]];let a6=0,a7=null,a8=null,a9=new WeakMap,ba=new WeakMap,bb=!1,bc=!1,bd=!1,be=!1,bf=!1,bg="",bh=null,bi=[0,"",0,"root",0];function bj(a,b,c,d,e){var f;let g=a.anchor,h=a.focus,i=g.getNode(),j=cD(),k=(f=d1(j),null),l=g.key,m=j.getElementByKey(l),n=c.length;return l!==h.key||!bW(i)||(!e||i.isDirty()&&n<2||dH(c))&&g.offset!==h.offset&&!i.isComposing()||dl(i)||i.isDirty()&&n>1||null!==m&&!i.isComposing()&&null!==dp(m)||null!==k&&null!==b&&(!b.collapsed||b.startContainer!==k.anchorNode||b.startOffset!==k.anchorOffset)||i.getFormat()!==a.format||i.getStyle()!==a.style||function(a,b){let c;if(b.isSegmented())return!0;if(!a.isCollapsed())return!1;let d=a.anchor.offset,e=b.getParentOrThrow(),f=dk(b);return 0===d?!b.canInsertTextBefore()||!e.canInsertTextBefore()&&!b.isComposing()||f||(bW(c=b.getPreviousSibling())||cT(c)&&c.isInline())&&!c.canInsertTextAfter():d===b.getTextContentSize()&&(!b.canInsertTextAfter()||!e.canInsertTextAfter()&&!b.isComposing()||f)}(a,i)}function bk(a,b){return dm(a)&&null!==a.nodeValue&&0!==b&&b!==a.nodeValue.length}function bl(a,c,d){let{anchorNode:e,anchorOffset:f,focusNode:g,focusOffset:h}=a;bb&&(bb=!1,bk(e,f)&&bk(g,h)&&!bh)||cP(c,()=>{if(!d)return void dF(null);if(!df(c,e,g))return;let i=cl();if(bh&&b4(i)&&i.isCollapsed()){let a=i.anchor,b=bh.anchor;(a.key===b.key&&a.offset===b.offset+1||1===a.offset&&b.getNode().is(a.getNode().getPreviousSibling()))&&dF(i=bh.clone())}if(bh=null,b4(i)){let d=i.anchor,e=d.getNode();if(i.isCollapsed()){"Range"===a.type&&a.anchorNode===a.focusNode&&(i.dirty=!0);let f=d1(c).event,g=f?f.timeStamp:performance.now(),[h,j,k,l,m]=bi,n=dD(),o=!1===c.isComposing()&&""===n.getTextContent();if(g<m+200&&d.offset===k&&d.key===l)bm(i,h,j);else if("text"===d.type)bW(e)||b(141),bn(i,e);else if("element"===d.type&&!o){cT(e)||b(259);let a=d.getNode();a.isEmpty()?bm(i,a.getTextFormat(),a.getTextStyle()):bm(i,0,"")}}else{let a=d.key,b=i.focus.key,c=i.getNodes(),e=c.length,g=i.isBackward(),j=g?h:f,k=g?f:h,l=g?b:a,m=g?a:b,n=2047,o=!1;for(let a=0;a<e;a++){let b=c[a],d=b.getTextContentSize();if(bW(b)&&0!==d&&(0!==a||b.__key!==l||j!==d)&&(a!==e-1||b.__key!==m||0!==k)&&(o=!0,0==(n&=b.getFormat())))break}i.format=o?n:0}}dW(c,an,void 0)})}function bm(a,b,c){a.format===b&&a.style===c||(a.format=b,a.style=c,a.dirty=!0)}function bn(a,b){bm(a,b.getFormat(),b.getStyle())}function bo(a){if(!a.getTargetRanges)return null;let b=a.getTargetRanges();return 0===b.length?null:b[0]}function bp(a,b){let c=a._compositionKey;if(dv(null),null!==c&&null!=b){if(""===b){let b=dx(c),d=dp(a.getElementByKey(c));return void(null!==d&&null!==d.nodeValue&&bW(b)&&dK(b,d.nodeValue,null,null,!0))}if("\n"===b[b.length-1]){let b=cl();if(b4(b)){let c=b.focus;return b.anchor.set(c.key,c.offset,c.type),void dW(a,aI,null)}}}d1(a)}function bq(a){let b=a.__lexicalEventHandles;return void 0===b&&(a.__lexicalEventHandles=b=[]),b}let br=new Map;function bs(a){let b,c=(b=d0(a.target))?b.getSelection():null;if(null===c)return;let d=dh(c.anchorNode);if(null===d)return;bc&&(bc=!1,cP(d,()=>{let b=cm(),e=c.anchorNode;(ea(e)||dm(e))&&dF(ck(b,c,d,a))}));let e=dI(d),f=e[e.length-1],g=f._key,h=br.get(g),i=h||f;i!==d&&bl(c,i,!1),bl(c,d,!0),d!==f?br.set(g,d):h&&br.delete(g)}function bt(a){a._lexicalHandled=!0}function bu(a){return!0===a._lexicalHandled}let bv=()=>{};function bw(a,b,c){cA();let d=a.__key,e=a.getParent();if(null===e)return;let f=function(a){let b=cl();if(!b4(b)||!cT(a))return b;let{anchor:c,focus:d}=b,e=c.getNode(),f=d.getNode();return d_(e,a)&&c.set(a.__key,0,"element"),d_(f,a)&&d.set(a.__key,0,"element"),b}(a),g=!1;if(b4(f)&&b){let b=f.anchor,c=f.focus;b.key===d&&(cp(b,a,e,a.getPreviousSibling(),a.getNextSibling()),g=!0),c.key===d&&(cp(c,a,e,a.getPreviousSibling(),a.getNextSibling()),g=!0)}else b6(f)&&b&&a.isSelected()&&a.selectPrevious();if(b4(f)&&b&&!g){let b=a.getIndexWithinParent();dt(a),cn(f,e,b,-1)}else dt(a);c||d2(e)||e.canBeEmpty()||!e.isEmpty()||bw(e,b),b&&f&&cY(e)&&e.isEmpty()&&e.selectEnd()}function bx(a){return a}let by=Symbol.for("ephemeral");function bz(a){return a[by]||!1}class bA{__type;__key;__parent;__prev;__next;__state;static getType(){let{ownNodeType:a}=eo(this);return void 0===a&&b(64,this.name),a}static clone(a){b(65,this.name)}$config(){return{}}config(a,b){let c=b.extends||Object.getPrototypeOf(this.constructor);return Object.assign(b,{extends:c,type:a}),{[a]:b}}afterCloneFrom(a){this.__key===a.__key?(this.__parent=a.__parent,this.__next=a.__next,this.__prev=a.__prev,this.__state=a.__state):a.__state&&(this.__state=a.__state.getWritable(this))}static importDOM;constructor(a){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),ds(this,a)}getType(){return this.__type}isInline(){b(137,this.constructor.name)}isAttached(){let a=this.__key;for(;null!==a;){if("root"===a)return!0;let b=dx(a);if(null===b)break;a=b.__parent}return!1}isSelected(a){let b=a||cl();if(null==b)return!1;let c=b.getNodes().some(a=>a.__key===this.__key);if(bW(this))return c;if(b4(b)&&"element"===b.anchor.type&&"element"===b.focus.type){if(b.isCollapsed())return!1;let a=this.getParent();if(cW(this)&&this.isInline()&&a){let c=b.isBackward()?b.focus:b.anchor;if(a.is(c.getNode())&&c.offset===a.getChildrenSize()&&this.is(a.getLastChild()))return!1}}return c}getKey(){return this.__key}getIndexWithinParent(){let a=this.getParent();if(null===a)return -1;let b=a.getFirstChild(),c=0;for(;null!==b;){if(this.is(b))return c;c++,b=b.getNextSibling()}return -1}getParent(){let a=this.getLatest().__parent;return null===a?null:dx(a)}getParentOrThrow(){let a=this.getParent();return null===a&&b(66,this.__key),a}getTopLevelElement(){let a=this;for(;null!==a;){let c=a.getParent();if(d2(c))return cT(a)||a===this&&cW(a)||b(194),a;a=c}return null}getTopLevelElementOrThrow(){let a=this.getTopLevelElement();return null===a&&b(67,this.__key),a}getParents(){let a=[],b=this.getParent();for(;null!==b;)a.push(b),b=b.getParent();return a}getParentKeys(){let a=[],b=this.getParent();for(;null!==b;)a.push(b.__key),b=b.getParent();return a}getPreviousSibling(){let a=this.getLatest().__prev;return null===a?null:dx(a)}getPreviousSiblings(){let a=[],b=this.getParent();if(null===b)return a;let c=b.getFirstChild();for(;null!==c&&!c.is(this);)a.push(c),c=c.getNextSibling();return a}getNextSibling(){let a=this.getLatest().__next;return null===a?null:dx(a)}getNextSiblings(){let a=[],b=this.getNextSibling();for(;null!==b;)a.push(b),b=b.getNextSibling();return a}getCommonAncestor(a){let b=cT(this)?this:this.getParent(),c=cT(a)?a:a.getParent(),d=b&&c?eT(b,c):null;return d?d.commonAncestor:null}is(a){return null!=a&&this.__key===a.__key}isBefore(a){let c=eT(this,a);return null!==c&&("descendant"===c.type||("branch"===c.type?-1===eR(c):("same"!==c.type&&"ancestor"!==c.type&&b(279),!1)))}isParentOf(a){let b=eT(this,a);return null!==b&&"ancestor"===b.type}getNodesBetween(a){let c=this.isBefore(a),d=[],e=new Set,f=this;for(;null!==f;){let g=f.__key;if(e.has(g)||(e.add(g),d.push(f)),f===a)break;let h=cT(f)?c?f.getFirstChild():f.getLastChild():null;if(null!==h){f=h;continue}let i=c?f.getNextSibling():f.getPreviousSibling();if(null!==i){f=i;continue}let j=f.getParentOrThrow();if(e.has(j.__key)||d.push(j),j===a)break;let k=null,l=j;do{if(null===l&&b(68),k=c?l.getNextSibling():l.getPreviousSibling(),null===(l=l.getParent()))break;null!==k||e.has(l.__key)||d.push(l)}while(null===k)f=k}return c||d.reverse(),d}isDirty(){let a=cD()._dirtyLeaves;return null!==a&&a.has(this.__key)}getLatest(){if(bz(this))return this;let a=dx(this.__key);return null===a&&b(113),a}getWritable(){if(bz(this))return this;cA();let a=cC(),b=cD(),c=a._nodeMap,d=this.__key,e=this.getLatest(),f=b._cloneNotNeeded,g=cl();if(null!==g&&g.setCachedNodes(null),f.has(d))return du(e),e;let h=ek(e);return f.add(d),du(h),c.set(d,h),h}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(a,c){b(70)}updateDOM(a,c,d){b(71)}exportDOM(a){return{element:this.createDOM(a._config,a)}}exportJSON(){let a=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...a}}static importJSON(a){b(18,this.name)}updateFromJSON(a){return function(a,b){let c=a.getWritable(),d=b.$,e=d;for(let a of A(c).flatKeys)a in b&&(void 0!==e&&e!==d||(e={...d}),e[a]=b[a]);return(c.__state||e)&&z(a).updateFromJSON(e),c}(this,a)}static transform(){return null}remove(a){bw(this,!0,a)}replace(a,c){cA();let d=cl();null!==d&&(d=d.clone()),d5(this,a);let e=this.getLatest(),f=this.__key,g=a.__key,h=a.getWritable(),i=this.getParentOrThrow().getWritable(),j=i.__size;dt(h);let k=e.getPreviousSibling(),l=e.getNextSibling(),m=e.__prev,n=e.__next,o=e.__parent;if((bw(e,!1,!0),null===k)?i.__first=g:k.getWritable().__next=g,(h.__prev=m,null===l)?i.__last=g:l.getWritable().__prev=g,h.__next=n,h.__parent=o,i.__size=j,c&&(cT(this)&&cT(h)||b(139),this.getChildren().forEach(a=>{h.append(a)})),b4(d)){dF(d);let a=d.anchor,b=d.focus;a.key===f&&b2(a,h),b.key===f&&b2(b,h)}return dw()===f&&dv(g),h}insertAfter(a,b=!0){cA(),d5(this,a);let c=this.getWritable(),d=a.getWritable(),e=d.getParent(),f=cl(),g=!1,h=!1;if(null!==e){let b=a.getIndexWithinParent();if(dt(d),b4(f)){let a=e.__key,c=f.anchor,d=f.focus;g="element"===c.type&&c.key===a&&c.offset===b+1,h="element"===d.type&&d.key===a&&d.offset===b+1}}let i=this.getNextSibling(),j=this.getParentOrThrow().getWritable(),k=d.__key,l=c.__next;if(null===i?j.__last=k:i.getWritable().__prev=k,j.__size++,c.__next=k,d.__next=l,d.__prev=c.__key,d.__parent=c.__parent,b&&b4(f)){let a=this.getIndexWithinParent();cn(f,j,a+1);let b=j.__key;g&&f.anchor.set(b,a+2,"element"),h&&f.focus.set(b,a+2,"element")}return a}insertBefore(a,b=!0){cA(),d5(this,a);let c=this.getWritable(),d=a.getWritable(),e=d.__key;dt(d);let f=this.getPreviousSibling(),g=this.getParentOrThrow().getWritable(),h=c.__prev,i=this.getIndexWithinParent();null===f?g.__first=e:f.getWritable().__next=e,g.__size++,c.__prev=e,d.__prev=h,d.__next=c.__key,d.__parent=c.__parent;let j=cl();return b&&b4(j)&&cn(j,this.getParentOrThrow(),i),a}isParentRequired(){return!1}createParentElementNode(){return c4()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(a,b){cA();let c=this.getPreviousSibling(),d=this.getParentOrThrow();if(null===c)return d.select(0,0);if(cT(c))return c.select();if(!bW(c)){let a=c.getIndexWithinParent()+1;return d.select(a,a)}return c.select(a,b)}selectNext(a,b){cA();let c=this.getNextSibling(),d=this.getParentOrThrow();if(null===c)return d.select();if(cT(c))return c.select(0,0);if(!bW(c)){let a=c.getIndexWithinParent();return d.select(a,a)}return c.select(a,b)}markDirty(){this.getWritable()}reconcileObservedMutation(a,b){this.markDirty()}}let bB="history-merge";class bC extends bA{static getType(){return"linebreak"}static clone(a){return new bC(a.__key)}constructor(a){super(a)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:a=>(function(a){let b=a.parentElement;if(null!==b&&ee(b)){let c=b.firstChild;if(c===a||c.nextSibling===a&&bG(c)){let c=b.lastChild;if(c===a||c.previousSibling===a&&bG(c))return!0}}return!1})(a)||function(a){let b=a.parentElement;if(null!==b&&ee(b)){let c=b.firstChild;if(c===a||c.nextSibling===a&&bG(c))return!1;let d=b.lastChild;if(d===a||d.previousSibling===a&&bG(d))return!0}return!1}(a)?null:{conversion:bD,priority:0}}}static importJSON(a){return bE().updateFromJSON(a)}}function bD(a){return{node:bE()}}function bE(){return d4(new bC)}function bF(a){return a instanceof bC}function bG(a){return dm(a)&&/^( |\t|\r?\n)+$/.test(a.textContent||"")}function bH(a,b){return 16&b?"code":128&b?"mark":32&b?"sub":64&b?"sup":null}function bI(a,b){return 1&b?"strong":2&b?"em":"span"}function bJ(a,b,c,d,e){let f=d.classList,g=dS(e,"base");void 0!==g&&f.add(...g);let h=!1,j=8&b&&4&b;for(let a in void 0!==(g=dS(e,"underlineStrikethrough"))&&(8&c&&4&c?(h=!0,j||f.add(...g)):j&&f.remove(...g)),i){let d=i[a];if(void 0!==(g=dS(e,a)))if(c&d){if(h&&("underline"===a||"strikethrough"===a)){b&d&&f.remove(...g);continue}(0==(b&d)||j&&"underline"===a||"strikethrough"===a)&&f.add(...g)}else b&d&&f.remove(...g)}}function bK(a,b,c){let d=b.firstChild,e=c.isComposing(),f=a+(e?"​":"");if(null==d)b.textContent=f;else{let a=d.nodeValue;if(a!==f)if(e){let[b,c,e]=function(a,b){let c=a.length,d=b.length,e=0,f=0;for(;e<c&&e<d&&a[e]===b[e];)e++;for(;f+e<c&&f+e<d&&a[c-f-1]===b[d-f-1];)f++;return[e,c-e-f,b.slice(e,d-f)]}(a,f);0!==c&&d.deleteData(b,c),d.insertData(b,e)}else d.nodeValue=f}}function bL(a,b,c,d,e,f){bK(e,a,b);let g=f.theme.text;void 0!==g&&bJ(0,0,d,a,g)}function bM(a,b){let c=document.createElement(b);return c.appendChild(a),c}class bN extends bA{__text;__format;__style;__mode;__detail;static getType(){return"text"}static clone(a){return new bN(a.__text,a.__key)}afterCloneFrom(a){super.afterCloneFrom(a),this.__text=a.__text,this.__format=a.__format,this.__style=a.__style,this.__mode=a.__mode,this.__detail=a.__detail}constructor(a="",b){super(b),this.__text=a,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){return n[this.getLatest().__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===dw()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(a){let b=i[a];return 0!=(this.getFormat()&b)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(a,b){return dq(this.getLatest().__format,a,b)}canHaveFormat(){return!0}isInline(){return!0}createDOM(a,b){let c=this.__format,d=bH(0,c),e=bI(0,c),f=null===d?e:d,g=document.createElement(f),h=g;this.hasFormat("code")&&g.setAttribute("spellcheck","false"),null!==d&&(h=document.createElement(e),g.appendChild(h)),bL(h,this,0,c,this.__text,a);let i=this.__style;return""!==i&&(g.style.cssText=i),g}updateDOM(a,c,d){let e=this.__text,f=a.__format,g=this.__format,h=bH(0,f),i=bH(0,g),j=bI(0,f),k=bI(0,g);if((null===h?j:h)!==(null===i?k:i))return!0;if(h===i&&j!==k){let a=c.firstChild;null==a&&b(48);let f=document.createElement(k);return bL(f,this,0,g,e,d),c.replaceChild(f,a),!1}let l=c;null!==i&&null!==h&&null==(l=c.firstChild)&&b(49),bK(e,l,this);let m=d.theme.text;void 0!==m&&f!==g&&bJ(0,f,g,l,m);let n=a.__style,o=this.__style;return n!==o&&(c.style.cssText=o),!1}static importDOM(){return{"#text":()=>({conversion:bR,priority:0}),b:()=>({conversion:bP,priority:0}),code:()=>({conversion:bU,priority:0}),em:()=>({conversion:bU,priority:0}),i:()=>({conversion:bU,priority:0}),mark:()=>({conversion:bU,priority:0}),s:()=>({conversion:bU,priority:0}),span:()=>({conversion:bO,priority:0}),strong:()=>({conversion:bU,priority:0}),sub:()=>({conversion:bU,priority:0}),sup:()=>({conversion:bU,priority:0}),u:()=>({conversion:bU,priority:0})}}static importJSON(a){return bV().updateFromJSON(a)}updateFromJSON(a){return super.updateFromJSON(a).setTextContent(a.text).setFormat(a.format).setDetail(a.detail).setMode(a.mode).setStyle(a.style)}exportDOM(a){let{element:c}=super.exportDOM(a);return ea(c)||b(132),c.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?c.style.textTransform="lowercase":this.hasFormat("uppercase")?c.style.textTransform="uppercase":this.hasFormat("capitalize")&&(c.style.textTransform="capitalize"),this.hasFormat("bold")&&(c=bM(c,"b")),this.hasFormat("italic")&&(c=bM(c,"i")),this.hasFormat("strikethrough")&&(c=bM(c,"s")),this.hasFormat("underline")&&(c=bM(c,"u")),{element:c}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(a,b){}setFormat(a){let b=this.getWritable();return b.__format="string"==typeof a?i[a]:a,b}setDetail(a){let b=this.getWritable();return b.__detail="string"==typeof a?j[a]:a,b}setStyle(a){let b=this.getWritable();return b.__style=a,b}toggleFormat(a){let b=dq(this.getFormat(),a,null);return this.setFormat(b)}toggleDirectionless(){let a=this.getWritable();return a.__detail^=1,a}toggleUnmergeable(){let a=this.getWritable();return a.__detail^=2,a}setMode(a){let b=m[a];if(this.__mode===b)return this;let c=this.getWritable();return c.__mode=b,c}setTextContent(a){if(this.__text===a)return this;let b=this.getWritable();return b.__text=a,b}select(a,b){cA();let c=a,d=b,e=cl(),f=this.getTextContent(),g=this.__key;if("string"==typeof f){let a=f.length;void 0===c&&(c=a),void 0===d&&(d=a)}else c=0,d=0;if(!b4(e))return ch(g,c,g,d,"text","text");{let a=dw();a!==e.anchor.key&&a!==e.focus.key||dv(g),e.setTextNodeRange(this,c,this,d)}return e}selectStart(){return this.select(0,0)}selectEnd(){let a=this.getTextContentSize();return this.select(a,a)}spliceText(a,b,c,d){let e=this.getWritable(),f=e.__text,g=c.length,h=a;h<0&&(h=g+h)<0&&(h=0);let i=cl();if(d&&b4(i)){let b=a+g;i.setTextNodeRange(e,b,e,b)}return e.__text=f.slice(0,h)+c+f.slice(h+b),e}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...a){let b;cA();let c=this.getLatest(),d=c.getTextContent();if(""===d)return[];let e=c.__key,f=dw(),g=d.length;a.sort((a,b)=>a-b),a.push(g);let h=[],i=a.length;for(let b=0,c=0;b<g&&c<=i;c++){let e=a[c];e>b&&(h.push(d.slice(b,e)),b=e)}let j=h.length;if(1===j)return[c];let k=h[0],l=c.getParent(),m=c.getFormat(),n=c.getStyle(),o=c.__detail,p=!1,q=null,r=null,s=cl();if(b4(s)){let[a,b]=s.isBackward()?[s.focus,s.anchor]:[s.anchor,s.focus];"text"===a.type&&a.key===e&&(q=a),"text"===b.type&&b.key===e&&(r=b)}c.isSegmented()?((b=bV(k)).__format=m,b.__style=n,b.__detail=o,b.__state=E(c,b),p=!0):b=c.setTextContent(k);let t=[b];for(let a=1;a<j;a++){let b=bV(h[a]);b.__format=m,b.__style=n,b.__detail=o,b.__state=E(c,b);let d=b.__key;f===e&&dv(d),t.push(b)}let u=q?q.offset:null,v=r?r.offset:null,w=0;for(let a of t){if(!q&&!r)break;let b=w+a.getTextContentSize();if(null!==q&&null!==u&&u<=b&&u>=w&&(q.set(a.getKey(),u-w,"text"),u<b&&(q=null)),null!==r&&null!==v&&v<=b&&v>=w){r.set(a.getKey(),v-w,"text");break}w=b}if(null!==l){let a,b;a=this.getPreviousSibling(),b=this.getNextSibling(),null!==a&&du(a),null!==b&&du(b);let c=l.getWritable(),d=this.getIndexWithinParent();p?(c.splice(d,0,t),this.remove()):c.splice(d,1,t),b4(s)&&cn(s,l,d,j-1)}return t}mergeWithSibling(a){let c=a===this.getPreviousSibling();c||a===this.getNextSibling()||b(50);let d=this.__key,e=a.__key,f=this.__text,g=f.length;dw()===e&&dv(d);let h=cl();if(b4(h)){let b=h.anchor,f=h.focus;null!==b&&b.key===e&&cq(b,c,d,a,g),null!==f&&f.key===e&&cq(f,c,d,a,g)}let i=a.__text,j=c?i+f:f+i;this.setTextContent(j);let k=this.getWritable();return a.remove(),k}isTextEntity(){return!1}}function bO(a){return{forChild:bX(a.style),node:null}}function bP(a){let b="normal"===a.style.fontWeight;return{forChild:bX(a.style,b?void 0:"bold"),node:null}}let bQ=new WeakMap;function bR(a){null===a.parentElement&&b(129);let c=a.textContent||"";if(null!==function(a){let b,c=a.parentNode,d=[a];for(;null!==c&&void 0===(b=bQ.get(c))&&!function(a){if(!ea(a))return!1;if("PRE"===a.nodeName)return!0;let b=a.style.whiteSpace;return"string"==typeof b&&b.startsWith("pre")}(c);)d.push(c),c=c.parentNode;let e=void 0===b?c:b;for(let a=0;a<d.length;a++)bQ.set(d[a],e);return e}(a)){let a=c.split(/(\r?\n|\t)/),b=[],d=a.length;for(let c=0;c<d;c++){let d=a[c];"\n"===d||"\r\n"===d?b.push(bE()):"	"===d?b.push(bZ()):""!==d&&b.push(bV(d))}return{node:b}}if(""===(c=c.replace(/\r/g,"").replace(/[ \t\n]+/g," ")))return{node:null};if(" "===c[0]){let b=a,d=!0;for(;null!==b&&null!==(b=bS(b,!1));){let a=b.textContent||"";if(a.length>0){/[ \t\n]$/.test(a)&&(c=c.slice(1)),d=!1;break}}d&&(c=c.slice(1))}if(" "===c[c.length-1]){let b=a,d=!0;for(;null!==b&&null!==(b=bS(b,!0));)if((b.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){d=!1;break}d&&(c=c.slice(0,c.length-1))}return""===c?{node:null}:{node:bV(c)}}function bS(a,b){let c=a;for(;;){let a;for(;null===(a=b?c.nextSibling:c.previousSibling);){let a=c.parentElement;if(null===a)return null;c=a}if(ea(c=a)){let a=c.style.display;if(""===a&&!ed(c)||""!==a&&!a.startsWith("inline"))return null}let d=c;for(;null!==(d=b?c.firstChild:c.lastChild);)c=d;if(dm(c))return c;if("BR"===c.nodeName)return null}}let bT={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function bU(a){let b=bT[a.nodeName.toLowerCase()];return void 0===b?{node:null}:{forChild:bX(a.style,b),node:null}}function bV(a=""){return d4(new bN(a))}function bW(a){return a instanceof bN}function bX(a,b){let c=a.fontWeight,d=a.textDecoration.split(" "),e="700"===c||"bold"===c,f=d.includes("line-through"),g="italic"===a.fontStyle,h=d.includes("underline"),i=a.verticalAlign;return a=>(bW(a)&&(e&&!a.hasFormat("bold")&&a.toggleFormat("bold"),f&&!a.hasFormat("strikethrough")&&a.toggleFormat("strikethrough"),g&&!a.hasFormat("italic")&&a.toggleFormat("italic"),h&&!a.hasFormat("underline")&&a.toggleFormat("underline"),"sub"!==i||a.hasFormat("subscript")||a.toggleFormat("subscript"),"super"!==i||a.hasFormat("superscript")||a.toggleFormat("superscript"),b&&!a.hasFormat(b)&&a.toggleFormat(b)),a)}class bY extends bN{static getType(){return"tab"}static clone(a){return new bY(a.__key)}constructor(a){super("	",a),this.__detail=2}static importDOM(){return null}createDOM(a){let b=super.createDOM(a),c=dS(a.theme,"tab");return void 0!==c&&b.classList.add(...c),b}static importJSON(a){return bZ().updateFromJSON(a)}setTextContent(a){return"	"!==a&&""!==a&&c(126),super.setTextContent("	")}spliceText(a,c,d,e){return""===d&&0===c||"	"===d&&1===c||b(286),this}setDetail(a){return 2!==a&&b(127),this}setMode(a){return"normal"!==a&&b(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function bZ(){return d4(new bY)}function b$(a){return a instanceof bY}class b_{key;offset;type;_selection;constructor(a,b,c){this._selection=null,this.key=a,this.offset=b,this.type=c}is(a){return this.key===a.key&&this.offset===a.offset&&this.type===a.type}isBefore(a){return this.key===a.key?this.offset<a.offset:0>eQ(e0(eU(this,"next")),e0(eU(a,"next")))}getNode(){let a=dx(this.key);return null===a&&b(20),a}set(a,b,c,d){let e=this._selection,f=this.key;d&&this.key===a&&this.offset===b&&this.type===c||(this.key=a,this.offset=b,this.type=c,cz()||(dw()===f&&dv(a),null!==e&&(e.setCachedNodes(null),e.dirty=!0)))}}function b0(a,b,c){return new b_(a,b,c)}function b1(a,b){let c=b.__key,d=a.offset,e="element";if(bW(b)){e="text";let a=b.getTextContentSize();d>a&&(d=a)}else if(!cT(b)){let a=b.getNextSibling();if(bW(a))c=a.__key,d=0,e="text";else{let a=b.getParent();a&&(c=a.__key,d=b.getIndexWithinParent()+1)}}a.set(c,d,e)}function b2(a,b){if(cT(b)){let c=b.getLastDescendant();cT(c)||bW(c)?b1(a,c):b1(a,b)}else b1(a,b)}class b3{_nodes;_cachedNodes;dirty;constructor(a){this._cachedNodes=null,this._nodes=a,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(a){this._cachedNodes=a}is(a){if(!b6(a))return!1;let b=this._nodes,c=a._nodes;return b.size===c.size&&Array.from(b).every(a=>c.has(a))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(a){this.dirty=!0,this._nodes.add(a),this._cachedNodes=null}delete(a){this.dirty=!0,this._nodes.delete(a),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(a){return this._nodes.has(a)}clone(){return new b3(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(a){}insertText(){}insertNodes(a){let b,c=this.getNodes(),d=c.length,e=c[d-1];if(bW(e))b=e.select();else{let a=e.getIndexWithinParent()+1;b=e.getParentOrThrow().select(a,a)}b.insertNodes(a);for(let a=0;a<d;a++)c[a].remove()}getNodes(){let a=this._cachedNodes;if(null!==a)return a;let b=this._nodes,c=[];for(let a of b){let b=dx(a);null!==b&&c.push(b)}return cz()||(this._cachedNodes=c),c}getTextContent(){let a=this.getNodes(),b="";for(let c=0;c<a.length;c++)b+=a[c].getTextContent();return b}deleteNodes(){let a=this.getNodes();if((cl()||cm())===this&&a[0]){let b=eE(a[0],"next");eW(eO(b,b))}for(let b of a)b.remove()}}function b4(a){return a instanceof b5}class b5{format;style;anchor;focus;_cachedNodes;dirty;constructor(a,b,c,d){this.anchor=a,this.focus=b,a._selection=this,b._selection=this,this._cachedNodes=null,this.format=c,this.style=d,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(a){this._cachedNodes=a}is(a){return!!b4(a)&&this.anchor.is(a.anchor)&&this.focus.is(a.focus)&&this.format===a.format&&this.style===a.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){let a=this._cachedNodes;if(null!==a)return a;let b=function(a){let b=[],[c,d]=a.getTextSlices();c&&b.push(c.caret.origin);let e=new Set,f=new Set;for(let c of a)if(eA(c)){let{origin:a}=c;0===b.length?e.add(a):(f.add(a),b.push(a))}else{let{origin:a}=c;cT(a)&&f.has(a)||b.push(a)}if(d&&b.push(d.caret.origin),ez(a.focus)&&cT(a.focus.origin)&&null===a.focus.getNodeAtCaret())for(let c=eH(a.focus.origin,"previous");eA(c)&&e.has(c.origin)&&!c.origin.isEmpty()&&c.origin.is(b[b.length-1]);c=eJ(c))e.delete(c.origin),b.pop();for(;b.length>1;){let a=b[b.length-1];if(!cT(a)||f.has(a)||a.isEmpty()||e.has(a))break;b.pop()}if(0===b.length&&a.isCollapsed()){let c=e0(a.anchor),d=e0(a.anchor.getFlipped()),e=a=>ey(a)?a.origin:a.getNodeAtCaret(),f=e(c)||e(d)||(a.anchor.getNodeAtCaret()?c.origin:d.origin);b.push(f)}return b}(e3(eY(this),"next"));return cz()||(this._cachedNodes=b),b}setTextNodeRange(a,b,c,d){this.anchor.set(a.__key,b,"text"),this.focus.set(c.__key,d,"text")}getTextContent(){let a=this.getNodes();if(0===a.length)return"";let b=a[0],c=a[a.length-1],d=this.anchor,e=this.focus,f=d.isBefore(e),[g,h]=b8(this),i="",j=!0;for(let k=0;k<a.length;k++){let l=a[k];if(cT(l)&&!l.isInline())j||(i+="\n"),j=!l.isEmpty();else if(j=!1,bW(l)){let a=l.getTextContent();l===b?l===c?"element"===d.type&&"element"===e.type&&e.offset!==d.offset||(a=g<h?a.slice(g,h):a.slice(h,g)):a=f?a.slice(g):a.slice(h):l===c&&(a=f?a.slice(0,h):a.slice(0,g)),i+=a}else!cW(l)&&!bF(l)||l===c&&this.isCollapsed()||(i+=l.getTextContent())}return i}applyDOMRange(a){let b=cD(),c=b.getEditorState()._selection,d=cf(a.startContainer,a.startOffset,a.endContainer,a.endOffset,b,c);if(null===d)return;let[e,f]=d;this.anchor.set(e.key,e.offset,e.type,!0),this.focus.set(f.key,f.offset,f.type,!0),I(this)}clone(){let a=this.anchor,b=this.focus;return new b5(b0(a.key,a.offset,a.type),b0(b.key,b.offset,b.type),this.format,this.style)}toggleFormat(a){this.format=dq(this.format,a,null),this.dirty=!0}setFormat(a){this.format=a,this.dirty=!0}setStyle(a){this.style=a,this.dirty=!0}hasFormat(a){let b=i[a];return 0!=(this.format&b)}insertRawText(a){let b=a.split(/(\r?\n|\t)/),c=[],d=b.length;for(let a=0;a<d;a++){let d=b[a];"\n"===d||"\r\n"===d?c.push(bE()):"	"===d?c.push(bZ()):c.push(bV(d))}this.insertNodes(c)}insertText(a){let c=this.anchor,d=this.focus,e=this.format,f=this.style,g=c,h=d;!this.isCollapsed()&&d.isBefore(c)&&(g=d,h=c),"element"===g.type&&function(a,b,c,d){let e=a.getNode(),f=e.getChildAtIndex(a.offset),g=bV();if(g.setFormat(c),g.setStyle(d),c5(f))f.splice(0,0,[g]);else{let a=cY(e)?c4().append(g):g;null===f?e.append(a):f.insertBefore(a)}a.is(b)&&b.set(g.__key,0,"text"),a.set(g.__key,0,"text")}(g,h,e,f),"element"===h.type&&eV(h,e0(eU(h,"next")));let i=g.offset,j=h.offset,k=this.getNodes(),l=k.length,m=k[0];bW(m)||b(26);let n=m.getTextContent().length,o=m.getParentOrThrow(),p=k[l-1];if(1===l&&"element"===h.type&&(j=n,h.set(g.key,j,"text")),this.isCollapsed()&&i===n&&(dl(m)||!m.canInsertTextAfter()||!o.canInsertTextAfter()&&null===m.getNextSibling())){let b=m.getNextSibling();if(bW(b)&&b.canInsertTextBefore()&&!dl(b)||((b=bV()).setFormat(e),b.setStyle(f),o.canInsertTextAfter()?m.insertAfter(b):o.insertAfter(b)),b.select(0,0),m=b,""!==a)return void this.insertText(a)}else if(this.isCollapsed()&&0===i&&(dl(m)||!m.canInsertTextBefore()||!o.canInsertTextBefore()&&null===m.getPreviousSibling())){let b=m.getPreviousSibling();if(bW(b)&&!dl(b)||((b=bV()).setFormat(e),o.canInsertTextBefore()?m.insertBefore(b):o.insertBefore(b)),b.select(),m=b,""!==a)return void this.insertText(a)}else if(m.isSegmented()&&i!==n){let a=bV(m.getTextContent());a.setFormat(e),m.replace(a),m=a}else if(!this.isCollapsed()&&""!==a){let b=p.getParent();if(!o.canInsertTextBefore()||!o.canInsertTextAfter()||cT(b)&&(!b.canInsertTextBefore()||!b.canInsertTextAfter()))return this.insertText(""),ce(this.anchor,this.focus,null),void this.insertText(a)}if(1===l){if(dk(m)){let b=bV(a);return b.select(),void m.replace(b)}let b=m.getFormat(),c=m.getStyle();if(i!==j||b===e&&c===f){if(b$(m)){let b=bV(a);return b.setFormat(e),b.setStyle(f),b.select(),void m.replace(b)}}else{if(""!==m.getTextContent()){let b=bV(a);if(b.setFormat(e),b.setStyle(f),b.select(),0===i)m.insertBefore(b,!1);else{let[a]=m.splitText(i);a.insertAfter(b,!1)}return void(b.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=a.length))}m.setFormat(e),m.setStyle(f)}let d=j-i;""===(m=m.spliceText(i,d,a,!0)).getTextContent()?m.remove():"text"===this.anchor.type&&(m.isComposing()?this.anchor.offset-=a.length:(this.format=b,this.style=c))}else{let b=new Set([...m.getParentKeys(),...p.getParentKeys()]),c=cT(m)?m:m.getParentOrThrow(),d=cT(p)?p:p.getParentOrThrow(),e=p;if(!c.is(d)&&d.isInline())do e=d,d=d.getParentOrThrow();while(d.isInline())if("text"===h.type&&(0!==j||""===p.getTextContent())||"element"===h.type&&p.getIndexWithinParent()<j)if(bW(p)&&!dk(p)&&j!==p.getTextContentSize()){if(p.isSegmented()){let a=bV(p.getTextContent());p.replace(a),p=a}cY(h.getNode())||"text"!==h.type||(p=p.spliceText(0,j,"")),b.add(p.__key)}else{let a=p.getParentOrThrow();a.canBeEmpty()||1!==a.getChildrenSize()?p.remove():a.remove()}else b.add(p.__key);let f=d.getChildren(),g=new Set(k),o=c.is(d),q=c.isInline()&&null===m.getNextSibling()?c:m;for(let a=f.length-1;a>=0;a--){let b=f[a];if(b.is(m)||cT(b)&&b.isParentOf(m))break;b.isAttached()&&(!g.has(b)||b.is(e)?o||q.insertAfter(b,!1):b.remove())}if(!o){let a=d,c=null;for(;null!==a;){let d=a.getChildren(),e=d.length;(0===e||d[e-1].is(c))&&(b.delete(a.__key),c=a),a=a.getParent()}}if(dk(m))if(i===n)m.select();else{let b=bV(a);b.select(),m.replace(b)}else""===(m=m.spliceText(i,n-i,a,!0)).getTextContent()?m.remove():m.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=a.length);for(let a=1;a<l;a++){let c=k[a],d=c.__key;b.has(d)||c.remove()}}}removeText(){let a=cl()===this;eX(this,function(a,c="removeEmptySlices"){let d,e;if(a.isCollapsed())return a;let f="root",g="next",h=c,i=e3(a,g),j=e$(i.anchor,f),k=e$(i.focus.getFlipped(),f),l=new Set,m=[];for(let a of i.iterNodeCarets(f))if(eA(a))l.add(a.origin.getKey());else if(ez(a)){let{origin:b}=a;cT(b)&&!l.has(b.getKey())||m.push(b)}for(let a of m)a.remove();for(let a of i.getTextSlices()){if(!a)continue;let{origin:b}=a.caret,c=b.getTextContentSize(),d=eZ(eE(b,g)),e=b.getMode();if(Math.abs(a.distance)===c&&"removeEmptySlices"===h||"token"===e&&0!==a.distance)d.remove();else if(0!==a.distance){h="removeEmptySlices";let b=a.removeTextSlice(),c=a.caret.origin;if("segmented"===e){let a=b.origin,c=bV(a.getTextContent()).setStyle(a.getStyle()).setFormat(a.getFormat());d.replaceOrInsert(c),b=eF(c,g,b.offset)}c.is(j[0].origin)&&(j[0]=b),c.is(k[0].origin)&&(k[0]=b.getFlipped())}}for(let a of j)if(e_(a)){d=e0(a);break}for(let a of k)if(e_(a)){e=e0(a);break}let n=function(a,b,c){let d;if(!a||!b)return null;let e=a.getParentAtCaret(),f=b.getParentAtCaret();if(!e||!f)return null;let g=e.getParents().reverse();g.push(e);let h=f.getParents().reverse();h.push(f);let i=Math.min(g.length,h.length);for(d=0;d<i&&g[d]===h[d];d++);let j=(a,b)=>{let c;for(let e=d;e<a.length;e++){let d=a[e];if(d2(d))return;!c&&b(d)&&(c=d)}return c},k=j(g,ef),l=k&&j(h,a=>c.has(a.getKey())&&ef(a));return k&&l?[k,l]:null}(d,e,l);if(n){let[a,b]=n;eH(a,"previous").splice(0,b.getChildren()),b.remove()}let o=[d,e,...j,...k].find(e_);if(o)return eN(e2(e0(o),a.direction));b(269,JSON.stringify(j.map(a=>a.origin.__key)))}(eY(this))),a&&cl()!==this&&dF(this)}formatText(a,b=null){if(this.isCollapsed())return this.toggleFormat(a),void dv(null);let c=this.getNodes(),d=[];for(let a of c)bW(a)&&d.push(a);let e=b=>{c.forEach(c=>{if(cT(c)){let d=c.getFormatFlags(a,b);c.setTextFormat(d)}})},f=d.length;if(0===f)return this.toggleFormat(a),dv(null),void e(b);let g=this.anchor,h=this.focus,i=this.isBackward(),j=i?h:g,k=i?g:h,l=0,m=d[0],n="element"===j.type?0:j.offset;if("text"===j.type&&n===m.getTextContentSize()&&(l=1,m=d[1],n=0),null==m)return;let o=m.getFormatFlags(a,b);e(o);let p=f-1,q=d[p],r="text"===k.type?k.offset:q.getTextContentSize();if(m.is(q)){if(n===r)return;if(dl(m)||0===n&&r===m.getTextContentSize())m.setFormat(o);else{let a=m.splitText(n,r),b=0===n?a[0]:a[1];b.setFormat(o),"text"===j.type&&j.set(b.__key,0,"text"),"text"===k.type&&k.set(b.__key,r-n,"text")}return void(this.format=o)}0===n||dl(m)||([,m]=m.splitText(n),n=0),m.setFormat(o);let s=q.getFormatFlags(a,o);r>0&&(r===q.getTextContentSize()||dl(q)||([q]=q.splitText(r)),q.setFormat(s));for(let b=l+1;b<p;b++){let c=d[b],e=c.getFormatFlags(a,s);c.setFormat(e)}"text"===j.type&&j.set(m.__key,n,"text"),"text"===k.type&&k.set(q.__key,r,"text"),this.format=o|s}insertNodes(a){var c;if(0===a.length)return;if(this.isCollapsed()||this.removeText(),"root"===this.anchor.key){this.insertParagraph();let c=cl();return b4(c)||b(134),c.insertNodes(a)}let d=(this.isBackward()?this.focus:this.anchor).getNode(),e=eq(d,ef),f=a[a.length-1];if(cT(e)&&"__language"in e){if("__language"in a[0])this.insertText(a[0].getTextContent());else{let b=cs(this);e.splice(b,0,a),f.selectEnd()}return}if(!a.some(a=>(cT(a)||cW(a))&&!a.isInline())){cT(e)||b(211,d.constructor.name,d.getType());let c=cs(this);return e.splice(c,0,a),void f.selectEnd()}let g=function(a){let b=c4(),c=null;for(let d=0;d<a.length;d++){let e=a[d],f=bF(e);if(f||cW(e)&&e.isInline()||cT(e)&&e.isInline()||bW(e)||e.isParentRequired()){if(null===c&&(c=e.createParentElementNode(),b.append(c),f))continue;null!==c&&c.append(e)}else b.append(e),c=null}return b}(a),h=g.getLastDescendant(),i=g.getChildren(),j=cT(e)&&e.isEmpty()?null:this.insertParagraph(),k=i[i.length-1],l=i[0];cT(c=l)&&ef(c)&&!c.isEmpty()&&cT(e)&&(!e.isEmpty()||e.canMergeWhenEmpty())&&(cT(e)||b(211,d.constructor.name,d.getType()),e.append(...l.getChildren()),l=i[1]),l&&(null===e&&b(212,d.constructor.name,d.getType()),function(a,c){let d=c.getParentOrThrow().getLastChild(),e=c,f=[c];for(;e!==d;)e.getNextSibling()||b(140),f.push(e=e.getNextSibling());let g=a;for(let a of f)g=g.insertAfter(a)}(e,l));let m=eq(h,ef);j&&cT(m)&&(j.canMergeWhenEmpty()||ef(k))&&(m.append(...j.getChildren()),j.remove()),cT(e)&&e.isEmpty()&&e.remove(),h.selectEnd();let n=cT(e)?e.getLastChild():null;bF(n)&&m!==e&&n.remove()}insertParagraph(){if("root"===this.anchor.key){let a=c4();return dD().splice(this.anchor.offset,0,[a]),a.select(),a}let a=cs(this),c=eq(this.anchor.getNode(),ef);cT(c)||b(213);let d=c.getChildAtIndex(a),e=d?[d,...d.getNextSiblings()]:[],f=c.insertNewAfter(this,!1);return f?(f.append(...e),f.selectStart(),f):null}insertLineBreak(a){let b=bE();if(this.insertNodes([b]),a){let a=b.getParentOrThrow(),c=b.getIndexWithinParent();a.select(c,c)}}extract(){let a=[...this.getNodes()],b=a.length,c=a[0],d=a[b-1],[e,f]=b8(this),g=this.isBackward(),[h,i]=g?[this.focus,this.anchor]:[this.anchor,this.focus],[j,k]=g?[f,e]:[e,f];if(0===b)return[];if(1===b){if(bW(c)&&!this.isCollapsed()){let a=c.splitText(j,k),b=0===j?a[0]:a[1];return b?(h.set(b.getKey(),0,"text"),i.set(b.getKey(),b.getTextContentSize(),"text"),[b]):[]}return[c]}if(bW(c)&&(j===c.getTextContentSize()?a.shift():0!==j&&([,c]=c.splitText(j),a[0]=c,h.set(c.getKey(),0,"text"))),bW(d)){let b=d.getTextContent().length;0===k?a.pop():k!==b&&([d]=d.splitText(k),a[a.length-1]=d,i.set(d.getKey(),d.getTextContentSize(),"text"))}return a}modify(a,b,c){var d;(function(a,b,c,d,e="decorators-and-blocks"){if("move"===b&&"character"===d&&!a.isCollapsed()){let[b,d]=c===a.isBackward()?[a.focus,a.anchor]:[a.anchor,a.focus];return d.set(b.key,b.offset,b.type),!0}let f=eU(a.focus,c?"previous":"next"),g="lineboundary"===d,h="move"===b,i=f,j="decorators-and-blocks"===e;if(!e1(i)){for(let a of i){j=!1;let{origin:b}=a;if(!cW(b)||b.isIsolated()||(i=a,!g||!b.isInline()))break}if(j)for(let a of eM(f).iterNodeCarets("extend"===b?"shadowRoot":"root")){if(eA(a))a.origin.isInline()||(i=a);else{if(cT(a.origin))continue;cW(a.origin)&&!a.origin.isInline()&&(i=a)}break}}if(i===f)return!1;if(h&&!g&&cW(i.origin)&&i.origin.isKeyboardSelectable()){let a=cj();return a.add(i.origin.getKey()),dF(a),!0}return i=e0(i),h&&eV(a.anchor,i),eV(a.focus,i),j||!g})(this,a,b,c)||(d=d1(cD()))}forwardDeletion(a,b,c){if(!c&&("element"===a.type&&cT(b)&&a.offset===b.getChildrenSize()||"text"===a.type&&a.offset===b.getTextContentSize())){let a=b.getParent(),c=b.getNextSibling()||(null===a?null:a.getNextSibling());if(cT(c)&&c.isShadowRoot())return!0}return!1}deleteCharacter(a){let b=this.isCollapsed();if(this.isCollapsed()){let b=this.anchor,c=b.getNode();if(this.forwardDeletion(b,c,a))return;let d=eM(eU(b,a?"previous":"next"));if(d.getTextSlices().every(a=>null===a||0===a.distance)){let a={type:"initial"};for(let b of d.iterNodeCarets("shadowRoot"))if(eA(b))if(b.origin.isInline());else{if(b.origin.isShadowRoot()){if("merge-block"===a.type)break;if(cT(d.anchor.origin)&&d.anchor.origin.isEmpty()){let a=e0(b);eX(this,eO(a,a)),d.anchor.origin.remove()}return}"merge-next-block"!==a.type&&"merge-block"!==a.type||(a={block:a.block,caret:b,type:"merge-block"})}else{if("merge-block"===a.type)break;if(ez(b)){if(cT(b.origin)){if(b.origin.isInline()){if(!b.origin.isParentOf(d.anchor.origin))break}else a={block:b.origin,type:"merge-next-block"};continue}if(cW(b.origin)){if(b.origin.isIsolated());else if("merge-next-block"===a.type&&(b.origin.isKeyboardSelectable()||!b.origin.isInline())&&cT(d.anchor.origin)&&d.anchor.origin.isEmpty()){d.anchor.origin.remove();let a=cj();a.add(b.origin.getKey()),dF(a)}else b.origin.remove();return}break}}if("merge-block"===a.type){let{caret:b,block:c}=a;return eX(this,eO(!b.origin.isEmpty()&&c.isEmpty()?eZ(eE(c,b.direction)):d.anchor,b)),this.removeText()}}let e=this.focus;if(this.modify("extend",a,"character"),this.isCollapsed()){if(a&&0===b.offset&&b9(this,b.getNode()))return}else{let d="text"===e.type?e.getNode():null;if(c="text"===b.type?b.getNode():null,null!==d&&d.isSegmented()){let b=e.offset,f=d.getTextContentSize();if(d.is(c)||a&&b!==f||!a&&0!==b)return void cb(d,a,b)}else if(null!==c&&c.isSegmented()){let e=b.offset,f=c.getTextContentSize();if(c.is(d)||a&&0!==e||!a&&e!==f)return void cb(c,a,e)}!function(a,b){let c=a.anchor,d=a.focus,e=c.getNode();if(e===d.getNode()&&"text"===c.type&&"text"===d.type){var f;let a=c.offset,g=d.offset,h=a<g,i=h?a:g,j=h?g:a,k=j-1;i===k||dH(f=e.getTextContent().slice(i,j))||ca(f)||(b?d.set(d.key,k,d.type):c.set(c.key,k,c.type))}}(this,a)}}if(this.removeText(),a&&!b&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){let a=this.anchor.getNode();a.isEmpty()&&cY(a.getParent())&&null===a.getPreviousSibling()&&b9(this,a)}}deleteLine(a){this.isCollapsed()&&this.modify("extend",a,"lineboundary"),this.isCollapsed()?this.deleteCharacter(a):this.removeText()}deleteWord(a){if(this.isCollapsed()){let b=this.anchor,c=b.getNode();if(this.forwardDeletion(b,c,a))return;this.modify("extend",a,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function b6(a){return a instanceof b3}function b7(a){let b=a.offset;if("text"===a.type)return b;let c=a.getNode();return b===c.getChildrenSize()?c.getTextContent().length:0}function b8(a){let b=a.getStartEndPoints();if(null===b)return[0,0];let[c,d]=b;return"element"===c.type&&"element"===d.type&&c.key===d.key&&c.offset===d.offset?[0,0]:[b7(c),b7(d)]}function b9(a,b){for(let c=b;c;c=c.getParent()){if(cT(c)){if(c.collapseAtStart(a))return!0;if(d2(c))break}if(c.getPreviousSibling())break}return!1}let ca=(()=>{try{let a=RegExp("\\p{Emoji}","u"),b=a.test.bind(a);if(b("❤️")&&b("#️⃣")&&b("👍"))return b}catch(a){}return()=>!1})();function cb(a,b,c){let d=a.getTextContent().split(/(?=\s)/g),e=d.length,f=0,g=0;for(let a=0;a<e;a++){let h=a===e-1;if(g=f,f+=d[a].length,b&&f===c||f>c||h){d.splice(a,1),h&&(g=void 0);break}}let h=d.join("").trim();""===h?a.remove():(a.setTextContent(h),a.select(g,g))}function cc(a,c,d,e){let f,g=c;if(ea(a)){let h=!1,i=a.childNodes,j=i.length,k=e._blockCursorElement;g===j&&(h=!0,g=j-1);let l=i[g],m=!1;if(l===k)l=i[g+1],m=!0;else if(null!==k){let b=k.parentNode;a===b&&c>Array.prototype.indexOf.call(b.children,k)&&g--}if(bW(f=dG(l)))g=eG(f,h?"next":"previous");else{let i=dG(a);if(null===i)return null;if(cT(i)){let j,k=e.getElementByKey(i.getKey());null===k&&b(214);let l=i.getDOMSlot(k);[i,g]=l.resolveChildIndex(i,k,a,c),cT(i)||b(215),h&&g>=i.getChildrenSize()&&(g=Math.max(0,i.getChildrenSize()-1));let n=i.getChildAtIndex(g);if(cT(n)&&(j=n.getParent(),null===d||null===j||!j.canBeEmpty()||j!==d.getNode())){let a=h?n.getLastDescendant():n.getFirstDescendant();i=null===a||cT(n=a)?n:n.getParentOrThrow(),g=0}bW(n)?(f=n,i=null,g=eG(n,h?"next":"previous")):n!==i&&h&&!m&&(cT(i)||b(216),g=Math.min(i.getChildrenSize(),g+1))}else{let b=i.getIndexWithinParent();g=0===c&&cW(i)&&dG(a)===i?b:b+1,i=i.getParentOrThrow()}if(cT(i))return b0(i.__key,g,"element")}}else f=dG(a);return bW(f)?b0(f.__key,eG(f,g,"clamp"),"text"):null}function cd(a,b,c){let d=a.offset,e=a.getNode();if(0===d){let d=e.getPreviousSibling(),f=e.getParent();if(b){if((c||!b)&&null===d&&cT(f)&&f.isInline()){let b=f.getPreviousSibling();bW(b)&&a.set(b.__key,b.getTextContent().length,"text")}}else cT(d)&&!c&&d.isInline()?a.set(d.__key,d.getChildrenSize(),"element"):bW(d)&&a.set(d.__key,d.getTextContent().length,"text")}else if(d===e.getTextContent().length){let d=e.getNextSibling(),f=e.getParent();if(b&&cT(d)&&d.isInline())a.set(d.__key,0,"element");else if((c||b)&&null===d&&cT(f)&&f.isInline()&&!f.canInsertTextAfter()){let b=f.getNextSibling();bW(b)&&a.set(b.__key,0,"text")}}}function ce(a,b,c){if("text"===a.type&&"text"===b.type){let d=a.isBefore(b),e=a.is(b);cd(a,d,e),cd(b,!d,e),e&&b.set(a.key,a.offset,a.type);let f=cD();if(f.isComposing()&&f._compositionKey!==a.key&&b4(c)){let d=c.anchor,e=c.focus;a.set(d.key,d.offset,d.type,!0),b.set(e.key,e.offset,e.type,!0)}}}function cf(a,b,c,d,e,f){if(null===a||null===c||!df(e,a,c))return null;let g=cc(a,b,b4(f)?f.anchor:null,e);if(null===g)return null;let h=cc(c,d,b4(f)?f.focus:null,e);if(null===h)return null;if("element"===g.type&&"element"===h.type){let b=dG(a),d=dG(c);if(cW(b)&&cW(d))return null}return ce(g,h,f),[g,h]}function cg(a){return cT(a)&&!a.isInline()}function ch(a,b,c,d,e,f){let g=cC(),h=new b5(b0(a,b,e),b0(c,d,f),0,"");return h.dirty=!0,g._selection=h,h}function ci(){return new b5(b0("root",0,"element"),b0("root",0,"element"),0,"")}function cj(){return new b3(new Set)}function ck(a,b,c,d){let e,f,g,h,i=c._window;if(null===i)return null;let j=d||i.event,k=j?j.type:void 0,l="selectionchange"===k,m=!p&&(l||"beforeinput"===k||"compositionstart"===k||"compositionend"===k||"click"===k&&j&&3===j.detail||"drop"===k||void 0===k);if(b4(a)&&!m)return a.clone();if(null===b)return null;if(e=b.anchorNode,f=b.focusNode,g=b.anchorOffset,h=b.focusOffset,(l||void 0===k)&&b4(a)&&!df(c,e,f))return a.clone();let n=cf(e,g,f,h,c,a);if(null===n)return null;let[o,q]=n;return new b5(o,q,b4(a)?a.format:0,b4(a)?a.style:"")}function cl(){return cC()._selection}function cm(){return cD()._editorState._selection}function cn(a,b,c,d=1){let e=a.anchor,f=a.focus,g=e.getNode(),h=f.getNode();if(!b.is(g)&&!b.is(h))return;let i=b.__key;if(a.isCollapsed()){let b=e.offset;if(c<=b&&d>0||c<b&&d<0){let c=Math.max(0,b+d);e.set(i,c,"element"),f.set(i,c,"element"),co(a)}}else{let g=a.isBackward(),h=g?f:e,j=h.getNode(),k=g?e:f,l=k.getNode();if(b.is(j)){let a=h.offset;(c<=a&&d>0||c<a&&d<0)&&h.set(i,Math.max(0,a+d),"element")}if(b.is(l)){let a=k.offset;(c<=a&&d>0||c<a&&d<0)&&k.set(i,Math.max(0,a+d),"element")}}co(a)}function co(a){let b=a.anchor,c=b.offset,d=a.focus,e=d.offset,f=b.getNode(),g=d.getNode();if(a.isCollapsed()){if(!cT(f))return;let a=f.getChildrenSize(),e=c>=a,g=e?f.getChildAtIndex(a-1):f.getChildAtIndex(c);if(bW(g)){let a=0;e&&(a=g.getTextContentSize()),b.set(g.__key,a,"text"),d.set(g.__key,a,"text")}return}if(cT(f)){let a=f.getChildrenSize(),d=c>=a,e=d?f.getChildAtIndex(a-1):f.getChildAtIndex(c);if(bW(e)){let a=0;d&&(a=e.getTextContentSize()),b.set(e.__key,a,"text")}}if(cT(g)){let a=g.getChildrenSize(),b=e>=a,c=b?g.getChildAtIndex(a-1):g.getChildAtIndex(e);if(bW(c)){let a=0;b&&(a=c.getTextContentSize()),d.set(c.__key,a,"text")}}}function cp(a,b,c,d,e){let f=null,g=0,h=null;null!==d?(f=d.__key,bW(d)?(g=d.getTextContentSize(),h="text"):cT(d)&&(g=d.getChildrenSize(),h="element")):null!==e&&(f=e.__key,bW(e)?h="text":cT(e)&&(h="element")),null!==f&&null!==h?a.set(f,g,h):(-1===(g=b.getIndexWithinParent())&&(g=c.getChildrenSize()),a.set(c.__key,g,"element"))}function cq(a,b,c,d,e){"text"===a.type?a.set(c,a.offset+(b?0:e),"text"):a.offset>d.getIndexWithinParent()&&a.set(a.key,a.offset-1,"element")}function cr(a){let b=cl()||cm();null===b&&(b=dD().selectEnd()),b.insertNodes(a)}function cs(a){let c=a;a.isCollapsed()||c.removeText();let d=cl();b4(d)&&(c=d),b4(c)||b(161);let e=c.anchor,f=e.getNode(),g=e.offset;for(;!ef(f);){let a=f;if([f,g]=function(a,b){let c=a.getParent();if(!c){let a=c4();return dD().append(a),a.select(),[dD(),0]}if(bW(a)){let d=a.splitText(b);if(0===d.length)return[c,a.getIndexWithinParent()];let e=+(0!==b);return[c,d[0].getIndexWithinParent()+e]}if(!cT(a)||0===b)return[c,a.getIndexWithinParent()];let d=a.getChildAtIndex(b);if(d){let c=new b5(b0(a.__key,b,"element"),b0(a.__key,b,"element"),0,""),e=a.insertNewAfter(c);e&&e.append(d,...d.getNextSiblings())}return[c,a.getIndexWithinParent()+1]}(f,g),a.is(f))break}return g}let ct=null,cu=null,cv=!1,cw=!1,cx=0,cy={characterData:!0,childList:!0,subtree:!0};function cz(){return cv||null!==ct&&ct._readOnly}function cA(){cv&&b(13)}function cB(){cx>99&&b(14)}function cC(){return null===ct&&b(195,cE()),ct}function cD(){return null===cu&&b(196,cE()),cu}function cE(){let a=new Set,b=c8.version,c=` Detected on the page: 0 compatible editor(s) with version ${b}`;return a.size&&(c+=` and incompatible editors with versions ${Array.from(a).join(", ")}`),c}function cF(a,b,c){let d=b.__type,e=db(a,d),f=c.get(d);void 0===f&&(f=Array.from(e.transforms),c.set(d,f));let g=f.length;for(let a=0;a<g&&(f[a](b),b.isAttached());a++);}function cG(a,b){return void 0!==a&&a.__key!==b&&a.isAttached()}function cH(a,b){if(!b)return;let c=a._updateTags,d=b;for(let a of(Array.isArray(b)||(d=[b]),d))c.add(a)}function cI(a){return cJ(a,cD()._nodes)}function cJ(a,c){let d=a.type,e=c.get(d);void 0===e&&b(17,d);let f=e.klass;a.type!==f.getType()&&b(18,f.name);let g=f.importJSON(a),h=a.children;if(cT(g)&&Array.isArray(h))for(let a=0;a<h.length;a++){let b=cJ(h[a],c);g.append(b)}return g}function cK(a,b,c){let d=ct,e=cv,f=cu;ct=b,cv=!0,cu=a;try{return c()}finally{ct=d,cv=e,cu=f}}function cL(a,c){var e;let f,g,h=a._pendingEditorState,i=a._rootElement,j=a._headless||null===i;if(null===h)return;let k=a._editorState,l=k._selection,m=h._selection,n=0!==a._dirtyType,o=ct,p=cv,q=cu,r=a._updating,s=a._observer,t=null;if(a._pendingEditorState=null,a._editorState=h,!j&&n&&null!==s){cu=a,ct=h,cv=!1,a._updating=!0;try{let c,d=a._dirtyType,e=a._dirtyElements,f=a._dirtyLeaves;s.disconnect(),U="",X="",Y=2===d,L=a,K=a._config,M=a._nodes,N=L._listeners.mutation,O=e,P=f,Q=k._nodeMap,R=h._nodeMap,Z=h._readOnly,S=new Map(a._keyToDOMMap),T=c=new Map,function a(c,d){let e=Q.get(c),f=R.get(c);void 0!==e&&void 0!==f||b(61);let g=Y||P.has(c)||O.has(c),h=dY(L,c);if(e===f&&!g){if(cT(e)){let a=h.__lexicalTextContent;void 0!==a&&(U+=a,X+=a)}else{let a=e.getTextContent();X+=a,U+=a}return h}if(e!==f&&g&&dT(T,M,N,f,"updated"),f.updateDOM(e,h,K)){let a=ae(c,null);return null===d&&b(62),d.replaceChild(a,h),$(c,null),a}if(cT(e)&&cT(f)){let c=f.__indent;(Y||c!==e.__indent)&&ab(h,c);let d=f.__format;if((Y||d!==e.__format)&&ac(h,d),g&&(function(c,d,e){V=null,W="",function(c,d,e){let f=U,g=c.__size,h=d.__size;U="";let i=e.element;if(1===g&&1===h){let b=c.__first,e=d.__first;if(b===e)a(b,i);else{let a=al(b),c=ae(e,null);try{i.replaceChild(c,a)}catch(d){if("object"==typeof d&&null!=d)throw Error(`${d.toString()} Parent: ${i.tagName}, new child: {tag: ${c.tagName} key: ${e}}, old child: {tag: ${a.tagName}, key: ${b}}.`);throw d}$(b,null)}let f=R.get(e);bW(f)&&(null===V&&(V=f.getFormat()),""===W&&(W=f.getStyle()))}else{let f=ai(c,Q),j=ai(d,R);if(f.length!==g&&b(227),j.length!==h&&b(228),0===g)0!==h&&af(j,d,0,h-1,e);else if(0===h){if(0!==g){let a=null==e.after&&null==e.before&&null==e.element.__lexicalLineBreak;_(f,0,g-1,a?null:i),a&&(i.textContent="")}}else!function(b,c,d,e,f,g){let h=e-1,i=f-1,j,k,l=g.getFirstChild(),m=0,n=0;for(;m<=h&&n<=i;){let b=c[m],e=d[n];if(b===e)l=ak(a(e,g.element)),m++,n++;else{void 0===j&&(j=new Set(c)),void 0===k&&(k=new Set(d));let f=k.has(b),h=j.has(e);if(f)if(h){let b=dY(L,e);b===l?l=ak(a(e,g.element)):(g.withBefore(l).insertChild(b),a(e,g.element)),m++,n++}else ae(e,g.withBefore(l)),n++;else l=ak(al(b)),$(b,g.element),m++}let f=R.get(e);null!==f&&bW(f)&&(null===V&&(V=f.getFormat()),""===W&&(W=f.getStyle()))}let o=m>h,p=n>i;if(o&&!p){let a=d[i+1],c=void 0===a?null:L.getElementByKey(a);af(d,b,n,i,g.withBefore(c))}else p&&!o&&_(c,m,h,g.element)}(d,f,j,g,h,e)}dX(d)&&(U+="\n\n"),i.__lexicalTextContent=U,U=f+U}(c,d,d.getDOMSlot(e)),null==V||V===d.__textFormat||Z||d.setTextFormat(V),""===W||W===d.__textStyle||Z||d.setTextStyle(W)}(e,f,h),cY(f)||f.isInline()||ah(e,f,h)),dX(f)&&(U+="\n\n",X+="\n\n"),(Y||f.__dir!==e.__dir)&&(ad(h,f),cY(f)&&!Y))for(let a of f.getChildren())cT(a)&&ad(dY(L,a.getKey()),a)}else{let a=f.getTextContent();if(cW(f)){let a=f.decorate(L,K);null!==a&&aj(c,a)}U+=a,X+=a}if(!Z&&cY(f)&&f.__cachedText!==X){let a=f.getWritable();a.__cachedText=X,f=a}return h}("root",null),L=void 0,M=void 0,O=void 0,P=void 0,Q=void 0,R=void 0,K=void 0,S=void 0,T=void 0,t=c}catch(b){if(b instanceof Error&&a._onError(b),cw)throw b;return c6(a,null,i,h),v(a),a._dirtyType=2,cw=!0,cL(a,k),void(cw=!1)}finally{s.observe(i,cy),a._updating=r,ct=o,cv=p,cu=q}}h._readOnly||(h._readOnly=!0);let u=a._dirtyLeaves,w=a._dirtyElements,x=a._normalizedNodes,y=a._updateTags,z=a._deferred;n&&(a._dirtyType=0,a._cloneNotNeeded.clear(),a._dirtyLeaves=new Set,a._dirtyElements=new Map,a._normalizedNodes=new Set,a._updateTags=new Set),function(a,b){let c,d=a._decorators,e=a._pendingDecorators||d,f=b._nodeMap;for(c in e)f.has(c)||(e===d&&(e=dB(a)),delete e[c])}(a,h);let A=(j||(e=d1(a)),null);if(a._editable&&null!==A&&(n||null===m||m.dirty||!m.is(l))&&null!==i&&!y.has("skip-dom-selection")){cu=a,ct=h;try{if(null!==s&&s.disconnect(),n||null===m||m.dirty){let b=a._blockCursorElement;null!==b&&d7(b,a,i),function(a,b,c,d,e,f,g){let h=d.anchorNode,i=d.focusNode,j=d.anchorOffset,k=d.focusOffset,l=document.activeElement;if(e.has("collaboration")&&l!==f||null!==l&&de(l))return;if(!b4(b))return null!==a&&df(c,h,i)&&d.removeAllRanges();let m=b.anchor,n=b.focus,o=m.key,p=n.key,q=dY(c,o),r=dY(c,p),s=m.offset,t=n.offset,u=b.format,v=b.style,w=b.isCollapsed(),x=q,y=r,z=!1;if("text"===m.type){x=dp(q);let a=m.getNode();z=a.getFormat()!==u||a.getStyle()!==v}else b4(a)&&"text"===a.anchor.type&&(z=!0);if("text"===n.type&&(y=dp(r)),null!==x&&null!==y&&(w&&(null===a||z||b4(a)&&(a.format!==u||a.style!==v))&&(bi=[u,v,s,o,performance.now()]),j!==s||k!==t||h!==x||i!==y||"Range"===d.type&&w||(null!==l&&f.contains(l)||e.has("skip-selection-focus")||f.focus({preventScroll:!0}),"element"===m.type))){if(function(a,b,c,d,e){try{a.setBaseAndExtent(b,c,d,e)}catch(a){}}(d,x,s,y,t),!e.has("skip-scroll-into-view")&&b.isCollapsed()&&null!==f&&f===document.activeElement){let a=b4(b)&&"element"===b.anchor.type?x.childNodes[s]||null:d.rangeCount>0?d.getRangeAt(0):null;if(null!==a){let b;if(a instanceof Text){let c=document.createRange();c.selectNode(a),b=c.getBoundingClientRect()}else b=a.getBoundingClientRect();!function(a,b,c){let d=d$(c),e=d0(d);if(null===d||null===e)return;let{top:f,bottom:g}=b,h=0,i=0,j=c;for(;null!==j;){let b=j===d.body;if(b)h=0,i=d1(a).innerHeight;else{let a=j.getBoundingClientRect();h=a.top,i=a.bottom}let c=0;if(f<h?c=-(h-f):g>i&&(c=g-i),0!==c)if(b)e.scrollBy(0,c);else{let a=j.scrollTop;j.scrollTop+=c;let b=j.scrollTop-a;f-=b,g-=b}if(b)break;j=dZ(j)}}(c,b,f)}}bb=!0}}(l,m,a,A,y,i)}!function(a,b,c){let e=a._blockCursorElement;if(b4(c)&&c.isCollapsed()&&"element"===c.anchor.type&&b.contains(document.activeElement)){let f=c.anchor,g=f.getNode(),h=f.offset,i=!1,j=null;if(h===g.getChildrenSize())d6(g.getChildAtIndex(h-1))&&(i=!0);else{let b=g.getChildAtIndex(h);if(null!==b&&d6(b)){let c=b.getPreviousSibling();(null===c||d6(c))&&(i=!0,j=a.getElementByKey(b.__key))}}if(i){let c,f,h,i=a.getElementByKey(g.__key);return null===e&&(c=a._config.theme,(f=document.createElement("div")).contentEditable="false",f.setAttribute("data-lexical-cursor","true"),h=c.blockCursor,void 0!==h&&("string"==typeof h&&(h=c.blockCursor=d(h)),void 0!==h&&f.classList.add(...h)),a._blockCursorElement=e=f),b.style.caretColor="transparent",null===j?i.appendChild(e):i.insertBefore(e,j)}}null!==e&&d7(e,a,b)}(a,i,m)}finally{null!==s&&s.observe(i,cy),cu=q,ct=o}}null!==t&&function(a,b,c,d,e){let f=Array.from(a._listeners.mutation),g=f.length;for(let a=0;a<g;a++){let[g,h]=f[a];for(let a of h){let f=b.get(a);void 0!==f&&g(f,{dirtyLeaves:d,prevEditorState:e,updateTags:c})}}}(a,t,y,u,k),b4(m)||null===m||null!==l&&l.is(m)||a.dispatchCommand(an,void 0);let B=a._pendingDecorators;null!==B&&(a._decorators=B,a._pendingDecorators=null,cM("decorator",a,!0,B)),f=dC(c||k),f!==(g=dC(h))&&cM("textcontent",a,!0,g),cM("update",a,!0,{dirtyElements:w,dirtyLeaves:u,editorState:h,mutatedNodes:t,normalizedNodes:x,prevEditorState:c||k,tags:y}),function(a,b){if(a._deferred=[],0!==b.length){let c=a._updating;a._updating=!0;try{for(let a=0;a<b.length;a++)b[a]()}finally{a._updating=c}}}(a,z),function(a){let b=a._updates;if(0!==b.length){let c=b.shift();if(c){let[b,d]=c;cO(a,b,d)}}}(a)}function cM(a,b,c,...d){let e=b._updating;b._updating=c;try{let c=Array.from(b._listeners[a]);for(let a=0;a<c.length;a++)c[a].apply(null,d)}finally{b._updating=e}}function cN(a,c){let d=a._updates,e=c||!1;for(;0!==d.length;){let c=d.shift();if(c){let d,[f,g]=c,h=a._pendingEditorState;void 0!==g&&(d=g.onUpdate,g.skipTransforms&&(e=!0),g.discrete&&(null===h&&b(191),h._flushSync=!0),d&&a._deferred.push(d),cH(a,g.tag)),null==h?cO(a,f,g):f()}}return e}function cO(a,c,d){let e=a._updateTags,f,g=!1,h=!1;void 0!==d&&(f=d.onUpdate,cH(a,d.tag),g=d.skipTransforms||!1,h=d.discrete||!1),f&&a._deferred.push(f);let i=a._editorState,j=a._pendingEditorState,k=!1;(null===j||j._readOnly)&&(j=a._pendingEditorState=cZ(j||i),k=!0),j._flushSync=h;let l=ct,m=cv,n=cu,o=a._updating;ct=j,cv=!1,a._updating=!0,cu=a;let p=a._headless||null===a.getRootElement();c9=null;try{var q,r;let e,f;k&&(p?null!==i._selection&&(j._selection=i._selection.clone()):j._selection=(q=d&&d.event||null,e=a.getEditorState()._selection,r=d1(a),f=null,b4(e)||null==e?ck(e,f,a,q):e.clone()));let h=a._compositionKey;c(),g=cN(a,g),function(a,b){let c=b.getEditorState()._selection,d=a._selection;if(b4(d)){let a,b=d.anchor,e=d.focus;if("text"===b.type&&(a=b.getNode()).selectionTransform(c,d),"text"===e.type){let b=e.getNode();a!==b&&b.selectionTransform(c,d)}}}(j,a),0!==a._dirtyType&&(g?function(a,b){let c=b._dirtyLeaves,d=a._nodeMap;for(let a of c){let b=d.get(a);bW(b)&&b.isAttached()&&b.isSimpleText()&&!b.isUnmergeable()&&H(b)}}(j,a):function(a,b){let c=b._dirtyLeaves,d=b._dirtyElements,e=a._nodeMap,f=dw(),g=new Map,h=c,i=h.size,j=d,k=j.size;for(;i>0||k>0;){if(i>0){for(let a of(b._dirtyLeaves=new Set,h)){let d=e.get(a);bW(d)&&d.isAttached()&&d.isSimpleText()&&!d.isUnmergeable()&&H(d),void 0!==d&&cG(d,f)&&cF(b,d,g),c.add(a)}if((i=(h=b._dirtyLeaves).size)>0){cx++;continue}}for(let a of(b._dirtyLeaves=new Set,b._dirtyElements=new Map,j.delete("root")&&j.set("root",!0),j)){let c=a[0],h=a[1];if(d.set(c,h),!h)continue;let i=e.get(c);void 0!==i&&cG(i,f)&&cF(b,i,g)}i=(h=b._dirtyLeaves).size,k=(j=b._dirtyElements).size,cx++}b._dirtyLeaves=c,b._dirtyElements=d}(j,a),cN(a),function(a,b,c,d){let e=a._nodeMap,f=b._nodeMap,g=[];for(let[a]of d){let b=f.get(a);void 0!==b&&(b.isAttached()||(cT(b)&&function a(b,c,d,e,f,g){let h=b.getFirstChild();for(;null!==h;){let b=h.__key;h.__parent===c&&(cT(h)&&a(h,b,d,e,f,g),d.has(b)||g.delete(b),f.push(b)),h=h.getNextSibling()}}(b,a,e,f,g,d),e.has(a)||d.delete(a),g.push(a)))}for(let a of g)f.delete(a);for(let a of c){let b=f.get(a);void 0===b||b.isAttached()||(e.has(a)||c.delete(a),f.delete(a))}}(i,j,a._dirtyLeaves,a._dirtyElements)),h!==a._compositionKey&&(j._flushSync=!0);let l=j._selection;if(b4(l)){let a=j._nodeMap,c=l.anchor.key,d=l.focus.key;void 0!==a.get(c)&&void 0!==a.get(d)||b(19)}else b6(l)&&0===l._nodes.size&&(j._selection=null)}catch(b){return b instanceof Error&&a._onError(b),a._pendingEditorState=i,a._dirtyType=2,a._cloneNotNeeded.clear(),a._dirtyLeaves=new Set,a._dirtyElements.clear(),void cL(a)}finally{ct=l,cv=m,cu=n,a._updating=o,cx=0}0!==a._dirtyType||a._deferred.length>0||function(a,b){let c=b.getEditorState()._selection,d=a._selection;if(null!==d){if(d.dirty||!d.is(c))return!0}else if(null!==c)return!0;return!1}(j,a)?j._flushSync?(j._flushSync=!1,cL(a)):k&&dd(()=>{cL(a)}):(j._flushSync=!1,k&&(e.clear(),a._deferred=[],a._pendingEditorState=null))}function cP(a,b,c){cu===a&&void 0===c?b():cO(a,b,c)}class cQ{element;before;after;constructor(a,b,c){this.element=a,this.before=b||null,this.after=c||null}withBefore(a){return new cQ(this.element,a,this.after)}withAfter(a){return new cQ(this.element,this.before,a)}withElement(a){return this.element===a?this:new cQ(a,this.before,this.after)}insertChild(a){let c=this.before||this.getManagedLineBreak();return null!==c&&c.parentElement!==this.element&&b(222),this.element.insertBefore(a,c),this}removeChild(a){return a.parentElement!==this.element&&b(223),this.element.removeChild(a),this}replaceChild(a,c){return c.parentElement!==this.element&&b(224),this.element.replaceChild(a,c),this}getFirstChild(){let a=this.after?this.after.nextSibling:this.element.firstChild;return a===this.before||a===this.getManagedLineBreak()?null:a}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(a){null===a?this.removeManagedLineBreak():this.insertManagedLineBreak("decorator"===a&&!1)}removeManagedLineBreak(){let a=this.getManagedLineBreak();if(a){let b=this.element,c="IMG"===a.nodeName?a.nextSibling:null;c&&b.removeChild(c),b.removeChild(a),b.__lexicalLineBreak=void 0}}insertManagedLineBreak(a){let b=this.getManagedLineBreak();if(b){if(a===("IMG"===b.nodeName))return;this.removeManagedLineBreak()}let c=this.element,d=this.before,e=document.createElement("br");if(c.insertBefore(e,d),a){let a=document.createElement("img");a.setAttribute("data-lexical-linebreak","true"),a.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",a.alt="",c.insertBefore(a,e),c.__lexicalLineBreak=a}else c.__lexicalLineBreak=e}getFirstChildOffset(){let a=0;for(let b=this.after;null!==b;b=b.previousSibling)a++;return a}resolveChildIndex(a,b,c,d){if(c===this.element){let b=this.getFirstChildOffset();return[a,Math.min(b+a.getChildrenSize(),Math.max(b,d))]}let e=cR(b,c);e.push(d);let f=cR(b,this.element),g=a.getIndexWithinParent();for(let a=0;a<f.length;a++){let b=e[a],c=f[a];if(void 0===b||b<c)break;if(b>c){g+=1;break}}return[a.getParentOrThrow(),g]}}function cR(a,c){let d=[],e=c;for(;e!==a&&null!==e;e=e.parentNode){let a=0;for(let b=e.previousSibling;null!==b;b=b.previousSibling)a++;d.push(a)}return e!==a&&b(225),d.reverse()}class cS extends bA{__first;__last;__size;__format;__style;__indent;__dir;__textFormat;__textStyle;constructor(a){super(a),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(a){super.afterCloneFrom(a),this.__key===a.__key&&(this.__first=a.__first,this.__last=a.__last,this.__size=a.__size),this.__indent=a.__indent,this.__format=a.__format,this.__style=a.__style,this.__dir=a.__dir,this.__textFormat=a.__textFormat,this.__textStyle=a.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){return l[this.getFormat()]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){let a=[],b=this.getFirstChild();for(;null!==b;)a.push(b),b=b.getNextSibling();return a}getChildrenKeys(){let a=[],b=this.getFirstChild();for(;null!==b;)a.push(b.__key),b=b.getNextSibling();return a}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){let a=cD()._dirtyElements;return null!==a&&a.has(this.__key)}isLastChild(){let a=this.getLatest(),b=this.getParentOrThrow().getLastChild();return null!==b&&b.is(a)}getAllTextNodes(){let a=[],b=this.getFirstChild();for(;null!==b;){if(bW(b)&&a.push(b),cT(b)){let c=b.getAllTextNodes();a.push(...c)}b=b.getNextSibling()}return a}getFirstDescendant(){let a=this.getFirstChild();for(;cT(a);){let b=a.getFirstChild();if(null===b)break;a=b}return a}getLastDescendant(){let a=this.getLastChild();for(;cT(a);){let b=a.getLastChild();if(null===b)break;a=b}return a}getDescendantByIndex(a){let b=this.getChildren(),c=b.length;if(a>=c){let a=b[c-1];return cT(a)&&a.getLastDescendant()||a||null}let d=b[a];return cT(d)&&d.getFirstDescendant()||d||null}getFirstChild(){let a=this.getLatest().__first;return null===a?null:dx(a)}getFirstChildOrThrow(){let a=this.getFirstChild();return null===a&&b(45,this.__key),a}getLastChild(){let a=this.getLatest().__last;return null===a?null:dx(a)}getLastChildOrThrow(){let a=this.getLastChild();return null===a&&b(96,this.__key),a}getChildAtIndex(a){let b,c,d=this.getChildrenSize();if(a<d/2){for(b=this.getFirstChild(),c=0;null!==b&&c<=a;){if(c===a)return b;b=b.getNextSibling(),c++}return null}for(b=this.getLastChild(),c=d-1;null!==b&&c>=a;){if(c===a)return b;b=b.getPreviousSibling(),c--}return null}getTextContent(){let a="",b=this.getChildren(),c=b.length;for(let d=0;d<c;d++){let e=b[d];a+=e.getTextContent(),cT(e)&&d!==c-1&&!e.isInline()&&(a+="\n\n")}return a}getTextContentSize(){let a=0,b=this.getChildren(),c=b.length;for(let d=0;d<c;d++){let e=b[d];a+=e.getTextContentSize(),cT(e)&&d!==c-1&&!e.isInline()&&(a+=2)}return a}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(a){if(""!==a){let b=k[a];return 0!=(this.getFormat()&b)}return!1}hasTextFormat(a){let b=i[a];return 0!=(this.getTextFormat()&b)}getFormatFlags(a,b){return dq(this.getLatest().__textFormat,a,b)}getTextStyle(){return this.getLatest().__textStyle}select(a,b){cA();let c=cl(),d=a,e=b,f=this.getChildrenSize();if(!this.canBeEmpty()){if(0===a&&0===b){let a=this.getFirstChild();if(bW(a)||cT(a))return a.select(0,0)}else if((void 0===a||a===f)&&(void 0===b||b===f)){let a=this.getLastChild();if(bW(a)||cT(a))return a.select()}}void 0===d&&(d=f),void 0===e&&(e=f);let g=this.__key;return b4(c)?(c.anchor.set(g,d,"element"),c.focus.set(g,e,"element"),c.dirty=!0,c):ch(g,d,g,e,"element","element")}selectStart(){let a=this.getFirstDescendant();return a?a.selectStart():this.select()}selectEnd(){let a=this.getLastDescendant();return a?a.selectEnd():this.select()}clear(){let a=this.getWritable();return this.getChildren().forEach(a=>a.remove()),a}append(...a){return this.splice(this.getChildrenSize(),0,a)}setDirection(a){let b=this.getWritable();return b.__dir=a,b}setFormat(a){return this.getWritable().__format=""!==a?k[a]:0,this}setStyle(a){return this.getWritable().__style=a||"",this}setTextFormat(a){let b=this.getWritable();return b.__textFormat=a,b}setTextStyle(a){let b=this.getWritable();return b.__textStyle=a,b}setIndent(a){return this.getWritable().__indent=a,this}splice(a,c,d){bz(this)&&b(324,this.__key,this.__type);let e=this.getChildrenSize(),f=this.getWritable();a+c<=e||b(226,String(a),String(c),String(e));let g=f.__key,h=[],i=[],j=this.getChildAtIndex(a+c),k=null,l=e-c+d.length;if(0!==a)if(a===e)k=this.getLastChild();else{let b=this.getChildAtIndex(a);null!==b&&(k=b.getPreviousSibling())}if(c>0){let a=null===k?this.getFirstChild():k.getNextSibling();for(let d=0;d<c;d++){null===a&&b(100);let c=a.getNextSibling(),d=a.__key;dt(a.getWritable()),i.push(d),a=c}}let m=k;for(let a of d){null!==m&&a.is(m)&&(k=m=m.getPreviousSibling());let c=a.getWritable();c.__parent===g&&l--,dt(c);let d=a.__key;if(null===m)f.__first=d,c.__prev=null;else{let a=m.getWritable();a.__next=d,c.__prev=a.__key}a.__key===g&&b(76),c.__parent=g,h.push(d),m=a}if(a+c===e)null!==m&&(m.getWritable().__next=null,f.__last=m.__key);else if(null!==j){let a=j.getWritable();if(null!==m){let b=m.getWritable();a.__prev=m.__key,b.__next=j.__key}else a.__prev=null}if(f.__size=l,i.length){let a=cl();if(b4(a)){let b=new Set(i),c=new Set(h),{anchor:d,focus:e}=a;cU(d,b,c)&&cp(d,d.getNode(),this,k,j),cU(e,b,c)&&cp(e,e.getNode(),this,k,j),0!==l||this.canBeEmpty()||d2(this)||this.remove()}}return f}getDOMSlot(a){return new cQ(a)}exportDOM(a){let{element:b}=super.exportDOM(a);if(ea(b)){let a=this.getIndent();a>0&&(b.style.paddingInlineStart=40*a+"px");let c=this.getDirection();c&&(b.dir=c)}return{element:b}}exportJSON(){let a={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},b=this.getTextFormat(),c=this.getTextStyle();return 0!==b&&(a.textFormat=b),""!==c&&(a.textStyle=c),a}updateFromJSON(a){return super.updateFromJSON(a).setFormat(a.format).setIndent(a.indent).setDirection(a.direction).setTextFormat(a.textFormat||0).setTextStyle(a.textStyle||"")}insertNewAfter(a,b){return null}canIndent(){return!0}collapseAtStart(a){return!1}excludeFromCopy(a){return!1}canReplaceWith(a){return!0}canInsertAfter(a){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(a){return!1}extractWithChild(a,b,c){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(a,b){let c=this.getDOMSlot(a),d=c.getFirstChild();for(let a=this.getFirstChild();a;a=a.getNextSibling()){let e=b.getElementByKey(a.getKey());null!==e&&(null==d?(c.insertChild(e),d=e):d!==e&&c.replaceChild(e,d),d=d.nextSibling)}}}function cT(a){return a instanceof cS}function cU(a,b,c){let d=a.getNode();for(;d;){let a=d.__key;if(b.has(a)&&!c.has(a))return!0;d=d.getParent()}return!1}class cV extends bA{decorate(a,b){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function cW(a){return a instanceof cV}class cX extends cS{__cachedText;static getType(){return"root"}static clone(){return new cX}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){b(51)}getTextContent(){let a=this.__cachedText;return(cz()||0===cD()._dirtyType)&&null!==a?a:super.getTextContent()}remove(){b(52)}replace(a){b(53)}insertBefore(a){b(54)}insertAfter(a){b(55)}updateDOM(a,b){return!1}splice(a,c,d){for(let a of d)cT(a)||cW(a)||b(282);return super.splice(a,c,d)}static importJSON(a){return dD().updateFromJSON(a)}collapseAtStart(){return!0}}function cY(a){return a instanceof cX}function cZ(a){return new c0(new Map(a._nodeMap))}function c$(){return new c0(new Map([["root",new cX]]))}function c_(a){return a instanceof c0}class c0{_nodeMap;_selection;_flushSync;_readOnly;constructor(a,b){this._nodeMap=a,this._selection=b||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(a,b){return cK(b&&b.editor||null,this,a)}clone(a){let b=new c0(this._nodeMap,void 0===a?this._selection:a);return b._readOnly=!0,b}toJSON(){return cK(null,this,()=>({root:function a(c){let d=c.exportJSON(),e=c.constructor;if(d.type!==e.getType()&&b(130,e.name),cT(c)){let f=d.children;Array.isArray(f)||b(59,e.name);let g=c.getChildren();for(let b=0;b<g.length;b++){let c=a(g[b]);f.push(c)}}return d}(dD())}))}}class c1 extends cS{static getType(){return"artificial"}createDOM(a){return document.createElement("div")}}class c2 extends cS{static getType(){return"paragraph"}static clone(a){return new c2(a.__key)}createDOM(a){let b=document.createElement("p"),c=dS(a.theme,"paragraph");return void 0!==c&&b.classList.add(...c),b}updateDOM(a,b,c){return!1}static importDOM(){return{p:a=>({conversion:c3,priority:0})}}exportDOM(a){let{element:b}=super.exportDOM(a);if(ea(b)){this.isEmpty()&&b.append(document.createElement("br"));let a=this.getFormatType();a&&(b.style.textAlign=a)}return{element:b}}static importJSON(a){return c4().updateFromJSON(a)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(a,b){let c=c4();c.setTextFormat(a.format),c.setTextStyle(a.style);let d=this.getDirection();return c.setDirection(d),c.setFormat(this.getFormatType()),c.setStyle(this.getStyle()),this.insertAfter(c,b),c}collapseAtStart(){let a=this.getChildren();if(0===a.length||bW(a[0])&&""===a[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function c3(a){let b=c4();return a.style&&(b.setFormat(a.style.textAlign),em(a,b)),{node:b}}function c4(){return d4(new c2)}function c5(a){return a instanceof c2}function c6(a,b,c,d){let e=a._keyToDOMMap;e.clear(),a._editorState=c$(),a._pendingEditorState=d,a._compositionKey=null,a._dirtyType=0,a._cloneNotNeeded.clear(),a._dirtyLeaves=new Set,a._dirtyElements.clear(),a._normalizedNodes=new Set,a._updateTags=new Set,a._updates=[],a._blockCursorElement=null;let f=a._observer;null!==f&&(f.disconnect(),a._observer=null),null!==b&&(b.textContent=""),null!==c&&(c.textContent="",e.set("root",c))}function c7(a){var b,c;let d,e,f,g,h=a||{},i=cu,j=h.theme||{},k=void 0===a?i:h.parentEditor||null,l=h.disableEvents||!1,m=c$(),n=h.namespace||(null!==k?k._config.namespace:dJ()),o=h.editorState,p=[cX,bN,bC,bY,c2,c1,...h.nodes||[]],{onError:q,html:r}=h,s=void 0===h.editable||h.editable;if(void 0===a&&null!==i)d=i._nodes;else{d=new Map;for(let a=0;a<p.length;a++){let b=p[a],c=null,e=null;if("function"!=typeof b){let a=b;b=a.replace,c=a.with,e=a.withKlass||null}eo(b);let f=b.getType(),g=function(a){let b=new Set,c=new Set,d=a;for(;d;){let{ownNodeConfig:a}=eo(d),e=d.transform;if(!c.has(e)){c.add(e);let a=d.transform();a&&b.add(a)}if(a){let c=a.$transform;c&&b.add(c),d=a.extends}else{let a=Object.getPrototypeOf(d);d=a.prototype instanceof bA&&a!==bA?a:void 0}}return b}(b);d.set(f,{exportDOM:r&&r.export?r.export.get(b):void 0,klass:b,replace:c,replaceWithKlass:e,sharedNodeState:function(a){let b=new Map,c=new Set;for(let d="function"==typeof a?a:a.replace;d.prototype&&void 0!==d.prototype.getType;d=Object.getPrototypeOf(d)){let{ownNodeConfig:a}=eo(d);if(a&&a.stateConfigs)for(let d of a.stateConfigs){let a;"stateConfig"in d?(a=d.stateConfig,d.flat&&c.add(a.key)):a=d,b.set(a.key,a)}}return{flatKeys:c,sharedConfigMap:b}}(p[a]),transforms:g})}}let t=new c8(m,k,d,{disableEvents:l,namespace:n,theme:j},q||console.error,(b=d,c=r?r.import:void 0,e=new Map,f=new Set,g=a=>{Object.keys(a).forEach(b=>{let c=e.get(b);void 0===c&&(c=[],e.set(b,c)),c.push(a[b])})},b.forEach(a=>{let b=a.klass.importDOM;if(null==b||f.has(b))return;f.add(b);let c=b.call(a.klass);null!==c&&g(c)}),c&&g(c),e),s,a);return void 0!==o&&(t._pendingEditorState=o,t._dirtyType=2),t}class c8{static version;_headless;_parentEditor;_rootElement;_editorState;_pendingEditorState;_compositionKey;_deferred;_keyToDOMMap;_updates;_updating;_listeners;_commands;_nodes;_decorators;_pendingDecorators;_config;_dirtyType;_cloneNotNeeded;_dirtyLeaves;_dirtyElements;_normalizedNodes;_updateTags;_observer;_key;_onError;_htmlConversions;_window;_editable;_blockCursorElement;_createEditorArgs;constructor(a,b,c,d,e,f,g,h){this._createEditorArgs=h,this._parentEditor=b,this._rootElement=null,this._editorState=a,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=d,this._nodes=c,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=dJ(),this._onError=e,this._htmlConversions=f,this._editable=g,this._headless=null!==b&&b._headless,this._window=null,this._blockCursorElement=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(a){let b=this._listeners.update;return b.add(a),()=>{b.delete(a)}}registerEditableListener(a){let b=this._listeners.editable;return b.add(a),()=>{b.delete(a)}}registerDecoratorListener(a){let b=this._listeners.decorator;return b.add(a),()=>{b.delete(a)}}registerTextContentListener(a){let b=this._listeners.textcontent;return b.add(a),()=>{b.delete(a)}}registerRootListener(a){let b=this._listeners.root;return a(this._rootElement,null),b.add(a),()=>{a(null,this._rootElement),b.delete(a)}}registerCommand(a,c,d){void 0===d&&b(35);let e=this._commands;e.has(a)||e.set(a,[new Set,new Set,new Set,new Set,new Set]);let f=e.get(a);void 0===f&&b(36,String(a));let g=f[d];return g.add(c),()=>{g.delete(c),f.every(a=>0===a.size)&&e.delete(a)}}registerMutationListener(a,b,c){let d=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(a)).klass,e=this._listeners.mutation,f=e.get(b);void 0===f&&(f=new Set,e.set(b,f)),f.add(d);let g=c&&c.skipInitialization;return void 0!==g&&g||this.initializeMutationListener(b,d),()=>{f.delete(d),0===f.size&&e.delete(b)}}getRegisteredNode(a){let c=this._nodes.get(a.getType());return void 0===c&&b(37,a.name),c}resolveRegisteredNodeAfterReplacements(a){for(;a.replaceWithKlass;)a=this.getRegisteredNode(a.replaceWithKlass);return a}initializeMutationListener(a,b){let c=this._editorState,d=ej(c).get(b.getType());if(!d)return;let e=new Map;for(let a of d.keys())e.set(a,"created");e.size>0&&a(e,{dirtyLeaves:new Set,prevEditorState:c,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(a,b){let c=this.getRegisteredNode(a);return c.transforms.add(b),c}registerNodeTransform(a,b){let c=this.registerNodeTransformToKlass(a,b),d=[c],e=c.replaceWithKlass;if(null!=e){let a=this.registerNodeTransformToKlass(e,b);d.push(a)}return function(a,b){let c=ej(a.getEditorState()),d=[];for(let a of b){let b=c.get(a);b&&d.push(b)}0!==d.length&&a.update(()=>{for(let a of d)for(let b of a.keys()){let a=dx(b);a&&a.markDirty()}},null===a._pendingEditorState?{tag:bB}:void 0)}(this,d.map(a=>a.klass.getType())),()=>{d.forEach(a=>a.transforms.delete(b))}}hasNode(a){return this._nodes.has(a.getType())}hasNodes(a){return a.every(this.hasNode.bind(this))}dispatchCommand(a,b){return dW(this,a,b)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(a){let c=this._rootElement;if(a!==c){let d=dS(this._config.theme,"root"),e=this._pendingEditorState||this._editorState;if(this._rootElement=a,c6(this,c,a,e),null!==c&&(this._config.disableEvents||function(a){let c=a9.get(a);if(void 0===c)return bv();let d=ba.get(c);if(void 0===d)return bv();let e=d-1;e>=0||b(164),a9.delete(a),ba.set(c,e),0===e&&c.removeEventListener("selectionchange",bs);let f=di(a);dg(f)?(!function(a){if(null!==a._parentEditor){let b=dI(a),c=b[b.length-1]._key;br.get(c)===a&&br.delete(c)}else br.delete(a._key)}(f),a.__lexicalEditor=null):f&&b(198);let g=bq(a);for(let a=0;a<g.length;a++)g[a]();a.__lexicalEventHandles=[]}(c),null!=d&&c.classList.remove(...d)),null!==a){let b=d0(a),c=a.style;c.userSelect="text",c.whiteSpace="pre-wrap",c.wordBreak="break-word",a.setAttribute("data-lexical-editor","true"),this._window=b,this._dirtyType=2,v(this),this._updateTags.add(bB),cL(this),this._config.disableEvents||function(a,b){let c=a.ownerDocument;a9.set(a,c);let d=ba.get(c)??0;d<1&&c.addEventListener("selectionchange",bs),ba.set(c,d+1),a.__lexicalEditor=b;let e=bq(a);for(let c=0;c<a5.length;c++){let[d,f]=a5[c],g="function"==typeof f?a=>{bu(a)||(bt(a),(b.isEditable()||"click"===d)&&f(a,b))}:a=>{if(bu(a))return;bt(a);let c=b.isEditable();switch(d){case"cut":return c&&dW(b,aX,a);case"copy":return dW(b,aW,a);case"paste":return c&&dW(b,au,a);case"dragstart":return c&&dW(b,aT,a);case"dragover":return c&&dW(b,aU,a);case"dragend":return c&&dW(b,aV,a);case"focus":return c&&dW(b,a1,a);case"blur":return c&&dW(b,a2,a);case"drop":return c&&dW(b,aR,a)}};a.addEventListener(d,g),e.push(()=>{a.removeEventListener(d,g)})}}(a,this),null!=d&&a.classList.add(...d)}else this._window=null,this._updateTags.add(bB),cL(this);cM("root",this,!1,a,c)}}getElementByKey(a){return this._keyToDOMMap.get(a)||null}getEditorState(){return this._editorState}setEditorState(a,c){a.isEmpty()&&b(38);let d=a;d._readOnly&&((d=cZ(a))._selection=a._selection?a._selection.clone():null),u(this);let e=this._pendingEditorState,f=this._updateTags,g=void 0!==c?c.tag:null;null===e||e.isEmpty()||(null!=g&&f.add(g),cL(this)),this._pendingEditorState=d,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=g&&f.add(g),this._updating||cL(this)}parseEditorState(a,b){return function(a,b,c){let d=c$(),e=ct,f=cv,g=cu,h=b._dirtyElements,i=b._dirtyLeaves,j=b._cloneNotNeeded,k=b._dirtyType;b._dirtyElements=new Map,b._dirtyLeaves=new Set,b._cloneNotNeeded=new Set,b._dirtyType=0,ct=d,cv=!1,cu=b,c9=null;try{let e=b._nodes;cJ(a.root,e),c&&c(),d._readOnly=!0}catch(a){a instanceof Error&&b._onError(a)}finally{b._dirtyElements=h,b._dirtyLeaves=i,b._cloneNotNeeded=j,b._dirtyType=k,ct=e,cv=f,cu=g}return d}("string"==typeof a?JSON.parse(a):a,this,b)}read(a){return cL(this),this.getEditorState().read(a,{editor:this})}update(a,b){this._updating?this._updates.push([a,b]):cO(this,a,b)}focus(a,b={}){let c=this._rootElement;null!==c&&(c.setAttribute("autocapitalize","off"),cP(this,()=>{var d,e;let f=cl(),g=dD();null!==f?f.dirty||dF(f.clone()):0!==g.getChildrenSize()&&("rootStart"===b.defaultSelection?g.selectStart():g.selectEnd()),d="focus",cA(),cD()._updateTags.add(d),e=()=>{c.removeAttribute("autocapitalize"),a&&a()},cA(),cD()._deferred.push(e)}),null===this._pendingEditorState&&c.removeAttribute("autocapitalize"))}blur(){var a;let b=this._rootElement;null!==b&&b.blur();let c=(a=this._window,null);null!==c&&c.removeAllRanges()}isEditable(){return this._editable}setEditable(a){this._editable!==a&&(this._editable=a,cM("editable",this,!0,a))}toJSON(){return{editorState:this._editorState.toJSON()}}}c8.version="0.38.2+prod.esm";let c9=null,da=1;function db(a,c){let d=dc(a,c);return void 0===d&&b(30,c),d}function dc(a,b){return a._nodes.get(b)}let dd="function"==typeof queueMicrotask?queueMicrotask:a=>{Promise.resolve().then(a)};function de(a){let b=document.activeElement;if(!ea(b))return!1;let c=b.nodeName;return cW(dA(a))&&("INPUT"===c||"TEXTAREA"===c||"true"===b.contentEditable&&null==di(b))}function df(a,b,c){let d=a.getRootElement();try{return null!==d&&d.contains(b)&&d.contains(c)&&null!==b&&!de(b)&&dh(b)===a}catch(a){return!1}}function dg(a){return a instanceof c8}function dh(a){let b=a;for(;null!=b;){let a=di(b);if(dg(a))return a;b=dZ(b)}return null}function di(a){return a?a.__lexicalEditor:null}function dj(a){return g.test(a)?"rtl":h.test(a)?"ltr":null}function dk(a){return b$(a)||a.isToken()}function dl(a){return dk(a)||a.isSegmented()}function dm(a){return eb(a)&&3===a.nodeType}function dn(a){return eb(a)&&9===a.nodeType}function dp(a){let b=a;for(;null!=b;){if(dm(b))return b;b=b.firstChild}return null}function dq(a,b,c){let d=i[b];if(null!==c&&(a&d)==(c&d))return a;let e=a^d;return"subscript"===b?e&=~i.superscript:"superscript"===b?e&=~i.subscript:"lowercase"===b?(e&=~i.uppercase,e&=~i.capitalize):"uppercase"===b?(e&=~i.lowercase,e&=~i.capitalize):"capitalize"===b&&(e&=~i.lowercase,e&=~i.uppercase),e}function dr(a){return bW(a)||bF(a)||cW(a)}function ds(a,b){let c,d=(c=c9,c9=null,c);if(null!=(b=b||d&&d.__key))return void(a.__key=b);cA(),cB();let e=cD(),f=cC(),g=""+da++;f._nodeMap.set(g,a),cT(a)?e._dirtyElements.set(g,!0):e._dirtyLeaves.add(g),e._cloneNotNeeded.add(g),e._dirtyType=1,a.__key=g}function dt(a){let b=a.getParent();if(null!==b){let c=a.getWritable(),d=b.getWritable(),e=a.getPreviousSibling(),f=a.getNextSibling(),g=null!==f?f.__key:null,h=null!==e?e.__key:null,i=null!==e?e.getWritable():null,j=null!==f?f.getWritable():null;null===e&&(d.__first=g),null===f&&(d.__last=h),null!==i&&(i.__next=g),null!==j&&(j.__prev=h),c.__prev=null,c.__next=null,c.__parent=null,d.__size--}}function du(a){cB(),bz(a)&&b(323,a.__key,a.__type);let c=a.getLatest(),d=c.__parent,e=cC(),f=cD(),g=e._nodeMap,h=f._dirtyElements;null!==d&&function(a,b,c){let d=a;for(;null!==d;){if(c.has(d))return;let a=b.get(d);if(void 0===a)break;c.set(d,!1),d=a.__parent}}(d,g,h);let i=c.__key;f._dirtyType=1,cT(a)?h.set(i,!0):f._dirtyLeaves.add(i)}function dv(a){cA();let b=cD(),c=b._compositionKey;if(a!==c){if(b._compositionKey=a,null!==c){let a=dx(c);null!==a&&a.getWritable()}if(null!==a){let b=dx(a);null!==b&&b.getWritable()}}}function dw(){return cz()?null:cD()._compositionKey}function dx(a,b){let c=(b||cC())._nodeMap.get(a);return void 0===c?null:c}function dy(a,b){let c=dz(a,cD());return void 0!==c?dx(c,b):null}function dz(a,b){return a[`__lexicalKey_${b._key}`]}function dA(a,b){let c=a;for(;null!=c;){let a=dy(c,b);if(null!==a)return a;c=dZ(c)}return null}function dB(a){let b=Object.assign({},a._decorators);return a._pendingDecorators=b,b}function dC(a){return a.read(()=>dD().getTextContent())}function dD(){return dE(cC())}function dE(a){return a._nodeMap.get("root")}function dF(a){cA();let b=cC();null!==a&&(a.dirty=!0,a.setCachedNodes(null)),b._selection=a}function dG(a){let b=cD(),c=function(a,b){let c=a;for(;null!=c;){let a=dz(c,b);if(void 0!==a)return a;c=dZ(c)}return null}(a,b);return null===c?a===b.getRootElement()?dx("root"):null:dx(c)}function dH(a){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(a)}function dI(a){let b=[],c=a;for(;null!==c;)b.push(c),c=c._parentEditor;return b}function dJ(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function dK(a,b,c,d,e){let f=a;if(f.isAttached()&&(e||!f.isDirty())){let g=f.isComposing(),h=b;(g||e)&&"​"===b[b.length-1]&&(h=b.slice(0,-1));let i=f.getTextContent();if(e||h!==i){if(""===h){dv(null),1;{let a=cD();setTimeout(()=>{a.update(()=>{f.isAttached()&&f.remove()})},20)}return}let b=f.getParent(),e=cm(),i=f.getTextContentSize(),j=dw(),k=f.getKey();if(f.isToken()||null!==j&&k===j&&!g||b4(e)&&(null!==b&&!b.canInsertTextBefore()&&0===e.anchor.offset||e.anchor.key===a.__key&&0===e.anchor.offset&&!f.canInsertTextBefore()&&!g||e.focus.key===a.__key&&e.focus.offset===i&&!f.canInsertTextAfter()&&!g))return void f.markDirty();let l=cl();if(!b4(l)||null===c||null===d)return void dL(f,h,l);if(l.setTextNodeRange(f,c,f,d),f.isSegmented()){let a=bV(f.getTextContent());f.replace(a),f=a}dL(f,h,l)}}}function dL(a,b,c){if(a.setTextContent(b),b4(c)){let b=a.getKey();for(let d of["anchor","focus"]){let e=c[d];"text"===e.type&&e.key===b&&(e.offset=eG(a,e.offset,"clamp"))}}}function dM(a,b,c){let d=b[c]||!1;return"any"===d||d===a[c]}function dN(a,b,c){return dM(a,c,"altKey")&&dM(a,c,"ctrlKey")&&dM(a,c,"shiftKey")&&dM(a,c,"metaKey")&&a.key.toLowerCase()===b.toLowerCase()}let dO={ctrlKey:!0,metaKey:!1},dP={altKey:!1,ctrlKey:!0};function dQ(a){return"Backspace"===a.key}function dR(a){let b=dD();if(b4(a)){let b=a.anchor,c=a.focus,d=b.getNode().getTopLevelElementOrThrow().getParentOrThrow();return b.set(d.getKey(),0,"element"),c.set(d.getKey(),d.getChildrenSize(),"element"),I(a),a}{let a=b.select(0,b.getChildrenSize());return dF(I(a)),a}}function dS(a,b){void 0===a.__lexicalClassNameCache&&(a.__lexicalClassNameCache={});let c=a.__lexicalClassNameCache,e=c[b];if(void 0!==e)return e;let f=a[b];if("string"==typeof f){let a=d(f);return c[b]=a,a}return f}function dT(a,c,d,e,f){if(0===d.size)return;let g=e.__type,h=e.__key,i=c.get(g);void 0===i&&b(33,g);let j=i.klass,k=a.get(j);void 0===k&&(k=new Map,a.set(j,k));let l=k.get(h),m="destroyed"===l&&"created"===f;(void 0===l||m)&&k.set(h,m?"updated":f)}function dU(a,b,c){let d=a.getParent(),e=c,f=a;return null!==d&&(b&&0===c?(e=f.getIndexWithinParent(),f=d):b||c!==f.getChildrenSize()||(e=f.getIndexWithinParent()+1,f=d)),f.getChildAtIndex(b?e-1:e)}function dV(a,b){let c=a.offset;if("element"===a.type)return dU(a.getNode(),b,c);{let d=a.getNode();if(b&&0===c||!b&&c===d.getTextContentSize()){let a=b?d.getPreviousSibling():d.getNextSibling();return null===a?dU(d.getParentOrThrow(),b,d.getIndexWithinParent()+ +!b):a}}return null}function dW(a,b,c){return function(a,b,c){let d=dI(a);for(let e=4;e>=0;e--)for(let f=0;f<d.length;f++){let g=d[f],h=g._commands.get(b);if(void 0!==h){let b=h[e];if(void 0!==b){let d=Array.from(b),e=d.length,f=!1;if(cP(g,()=>{for(let b=0;b<e;b++)if(d[b](c,a))return void(f=!0)}),f)return f}}}return!1}(a,b,c)}function dX(a){return!cY(a)&&!a.isLastChild()&&!a.isInline()}function dY(a,c){let d=a._keyToDOMMap.get(c);return void 0===d&&b(75,c),d}function dZ(a){let b=a.assignedSlot||a.parentElement;return ec(b)?b.host:b}function d$(a){return dn(a)?a:ea(a)?a.ownerDocument:null}function d_(a,b){let c=a.getParent();for(;null!==c;){if(c.is(b))return!0;c=c.getParent()}return!1}function d0(a){let b=d$(a);return b?b.defaultView:null}function d1(a){let c=a._window;return null===c&&b(78),c}function d2(a){return cY(a)||cT(a)&&a.isShadowRoot()}function d3(a){let b=a.constructor.clone(a);return ds(b,null),b.afterCloneFrom(a),b}function d4(a){let c=cD(),d=a.getType(),e=dc(c,d);void 0===e&&b(200,a.constructor.name,d);let{replace:f,replaceWithKlass:g}=e;if(null!==f){let c=f(a),e=c.constructor;return null!==g?c instanceof g||b(201,g.name,g.getType(),e.name,e.getType(),a.constructor.name,d):c instanceof a.constructor&&e!==a.constructor||b(202,e.name,e.getType(),a.constructor.name,d),c.__key===a.__key&&b(203,a.constructor.name,d,e.name,e.getType()),c}return a}function d5(a,c){!cY(a.getParent())||cT(c)||cW(c)||b(99)}function d6(a){return(cW(a)||cT(a)&&!a.canBeEmpty())&&!a.isInline()}function d7(a,b,c){c.style.removeProperty("caret-color"),b._blockCursorElement=null;let d=a.parentElement;null!==d&&d.removeChild(a)}function d8(a){return null}function d9(a){return ea(a)&&"A"===a.tagName}function ea(a){return eb(a)&&1===a.nodeType}function eb(a){return"object"==typeof a&&null!==a&&"nodeType"in a&&"number"==typeof a.nodeType}function ec(a){return eb(a)&&11===a.nodeType}function ed(a){let b=RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==a.nodeName.match(b)}function ee(a){let b=RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==a.nodeName.match(b)}function ef(a){if(cW(a)&&!a.isInline())return!0;if(!cT(a)||d2(a))return!1;let b=a.getFirstChild(),c=null===b||bF(b)||bW(b)||b.isInline();return!a.isInline()&&!1!==a.canBeEmpty()&&c}function eg(){return cD()}let eh=new WeakMap,ei=new Map;function ej(a){if(!a._readOnly&&a.isEmpty())return ei;a._readOnly||b(192);let c=eh.get(a);return c||(c=function(a){let b=new Map;for(let[c,d]of a._nodeMap){let a=d.__type,e=b.get(a);e||(e=new Map,b.set(a,e)),e.set(c,d)}return b}(a),eh.set(a,c)),c}function ek(a){let b=a.constructor.clone(a);return b.afterCloneFrom(a),b}function el(a){var b;return(b=ek(a))[by]=!0,b}function em(a,b){let c=Math.round((parseInt(a.style.paddingInlineStart,10)||0)/40);b.setIndent(c)}function en(a,b){return Object.prototype.hasOwnProperty.call(a,b)&&a[b]!==bA[b]}function eo(a){let c=o in a.prototype?a.prototype[o]():void 0,d=function(a){if(!(a===bA||a.prototype instanceof bA)){let c="<unknown>",d="<unknown>";try{c=a.getType()}catch(a){}try{c8.version&&(d=JSON.parse(c8.version))}catch(a){}b(290,a.name,c,d)}return a===cV||a===cS||a===bA}(a),e=!d&&en(a,"getType")?a.getType():void 0,f,g=e;if(c)if(e)f=c[e];else for(let[a,b]of Object.entries(c))g=a,f=b;if(!d&&g&&(en(a,"getType")||(a.getType=()=>g),en(a,"clone")||(a.clone=b=>(c9=b,new a)),en(a,"importJSON")||(a.importJSON=f&&f.$importJSON||(b=>(new a).updateFromJSON(b))),!en(a,"importDOM")&&f)){let{importDOM:b}=f;b&&(a.importDOM=()=>b)}return{ownNodeConfig:f,ownNodeType:g}}function ep(a){let b=eg();return cA(),new(b.resolveRegisteredNodeAfterReplacements(b.getRegisteredNode(a))).klass}let eq=(a,b)=>{let c=a;for(;null!=c&&!cY(c);){if(b(c))return c;c=c.getParent()}return null},er={next:"previous",previous:"next"};class es{origin;constructor(a){this.origin=a}[Symbol.iterator](){return eP({hasNext:ez,initial:this.getAdjacentCaret(),map:a=>a,step:a=>a.getAdjacentCaret()})}getAdjacentCaret(){return eE(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return eE(this.origin,this.direction)}remove(){let a=this.getNodeAtCaret();return a&&a.remove(),this}replaceOrInsert(a,b){let c=this.getNodeAtCaret();return a.is(this.origin)||a.is(c)||(null===c?this.insert(a):c.replace(a,b)),this}splice(a,c,d="next"){let e=d===this.direction?c:Array.from(c).reverse(),f=this,g=this.getParentAtCaret(),h=new Map;for(let b=f.getAdjacentCaret();null!==b&&h.size<a;b=b.getAdjacentCaret()){let a=b.origin.getWritable();h.set(a.getKey(),a)}for(let a of e){if(h.size>0){let c=f.getNodeAtCaret();if(c)if(h.delete(c.getKey()),h.delete(a.getKey()),c.is(a)||f.origin.is(a));else{let b=a.getParent();b&&b.is(g)&&a.remove(),c.replace(a)}else null===c&&b(263,Array.from(h).join(" "))}else f.insert(a);f=eE(a,this.direction)}for(let a of h.values())a.remove();return this}}class et extends es{type="child";getLatest(){let a=this.origin.getLatest();return a===this.origin?this:eH(a,this.direction)}getParentCaret(a="root"){return eE(ev(this.getParentAtCaret(),a),this.direction)}getFlipped(){let a=er[this.direction];return eE(this.getNodeAtCaret(),a)||eH(this.origin,a)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(a){return a instanceof et&&this.direction===a.direction&&this.origin.is(a.origin)}isSamePointCaret(a){return this.isSameNodeCaret(a)}}let eu={root:cY,shadowRoot:d2};function ev(a,b="root"){return eu[b](a)?null:a}class ew extends es{type="sibling";getLatest(){let a=this.origin.getLatest();return a===this.origin?this:eE(a,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return cT(this.origin)?eH(this.origin,this.direction):null}getParentCaret(a="root"){return eE(ev(this.getParentAtCaret(),a),this.direction)}getFlipped(){let a=er[this.direction];return eE(this.getNodeAtCaret(),a)||eH(this.origin.getParentOrThrow(),a)}isSamePointCaret(a){return a instanceof ew&&this.direction===a.direction&&this.origin.is(a.origin)}isSameNodeCaret(a){return(a instanceof ew||a instanceof ex)&&this.direction===a.direction&&this.origin.is(a.origin)}}class ex extends es{type="text";offset;constructor(a,b){super(a),this.offset=b}getLatest(){let a=this.origin.getLatest();return a===this.origin?this:eF(a,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(a="root"){return eE(ev(this.getParentAtCaret(),a),this.direction)}getFlipped(){return eF(this.origin,er[this.direction],this.offset)}isSamePointCaret(a){return a instanceof ex&&this.direction===a.direction&&this.origin.is(a.origin)&&this.offset===a.offset}isSameNodeCaret(a){return(a instanceof ew||a instanceof ex)&&this.direction===a.direction&&this.origin.is(a.origin)}getSiblingCaret(){return eE(this.origin,this.direction)}}function ey(a){return a instanceof ex}function ez(a){return a instanceof ew}function eA(a){return a instanceof et}let eB={next:class extends ex{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(a){return this.origin.insertAfter(a),this}},previous:class extends ex{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(a){return this.origin.insertBefore(a),this}}},eC={next:class extends ew{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(a){return this.origin.insertAfter(a),this}},previous:class extends ew{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(a){return this.origin.insertBefore(a),this}}},eD={next:class extends et{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(a){return this.origin.splice(0,0,[a]),this}},previous:class extends et{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(a){return this.origin.splice(this.origin.getChildrenSize(),0,[a]),this}}};function eE(a,b){return a?new eC[b](a):null}function eF(a,b,c){return a?new eB[b](a,eG(a,c)):null}function eG(a,b,d="error"){let e=a.getTextContentSize(),f="next"===b?e:"previous"===b?0:b;return(f<0||f>e)&&("clamp"!==d&&c(284,String(b),String(e),a.getKey()),f=f<0?0:e),f}function eH(a,b){return cT(a)?new eD[b](a):null}function eI(a){return a&&a.getChildCaret()||a}function eJ(a){return a&&eI(a.getAdjacentCaret())}class eK{type="node-caret-range";direction;anchor;focus;constructor(a,b,c){this.anchor=a,this.focus=b,this.direction=c}getLatest(){let a=this.anchor.getLatest(),b=this.focus.getLatest();return a===this.anchor&&b===this.focus?this:new eK(a,b,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){let a=a=>{let b=this[a].getLatest();return ey(b)?function(a,b){let{direction:c,origin:d}=a;return new eL(a,eG(d,"focus"===b?er[c]:c)-a.offset)}(b,a):null},b=a("anchor"),c=a("focus");if(b&&c){let{caret:a}=b,{caret:d}=c;if(a.isSameNodeCaret(d))return[new eL(a,d.offset-a.offset),null]}return[b,c]}iterNodeCarets(a="root"){let b=ey(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),c=this.focus.getLatest(),d=ey(c),e=b=>b.isSameNodeCaret(c)?null:eJ(b)||b.getParentCaret(a);return eP({hasNext:a=>null!==a&&!(d&&c.isSameNodeCaret(a)),initial:b.isSameNodeCaret(c)?null:e(b),map:a=>a,step:e})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class eL{type="slice";caret;distance;constructor(a,b){this.caret=a,this.distance=b}getSliceIndices(){let{distance:a,caret:{offset:b}}=this,c=b+a;return c<b?[c,b]:[b,c]}getTextContent(){let[a,b]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(a,b)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){let{caret:{origin:a,direction:b}}=this,[c,d]=this.getSliceIndices(),e=a.getTextContent();return eF(a.setTextContent(e.slice(0,c)+e.slice(d)),b,c)}}function eM(a){return eO(a,eE(dD(),a.direction))}function eN(a){return eO(a,a)}function eO(a,c){return a.direction!==c.direction&&b(265),new eK(a,c,a.direction)}function eP(a){let{initial:b,hasNext:c,step:d,map:e}=a,f=b;return{[Symbol.iterator](){return this},next(){if(!c(f))return{done:!0,value:void 0};let a={done:!1,value:e(f)};return f=d(f),a}}}function eQ(a,c){let d=eT(a.origin,c.origin);switch(null===d&&b(275,a.origin.getKey(),c.origin.getKey()),d.type){case"same":{let b="text"===a.type,d="text"===c.type;return b&&d?Math.sign(a.offset-c.offset):a.type===c.type?0:b?-1:d?1:"child"===a.type?-1:1}case"ancestor":return"child"===a.type?-1:1;case"descendant":return"child"===c.type?1:-1;case"branch":return eR(d)}}function eR(a){let{a:b,b:c}=a,d=b.__key,e=c.__key,f=b,g=c;for(;f&&g;f=f.getNextSibling(),g=g.getNextSibling()){if(f.__key===e)return -1;if(g.__key===d)return 1}return null===f?1:-1}function eS(a){return cT(a)?[a.getLatest(),null]:[a.getParent(),a.getLatest()]}function eT(a,c){if(a.is(c))return{commonAncestor:a,type:"same"};let d=new Map;for(let[b,c]=eS(a);b;c=b,b=b.getParent())d.set(b,c);for(let[e,f]=eS(c);e;f=e,e=e.getParent()){let g=d.get(e);if(void 0!==g)return null===g?(e.is(a)||b(276),{commonAncestor:e,type:"ancestor"}):null===f?(e.is(c)||b(277),{commonAncestor:e,type:"descendant"}):((cT(g)||g.is(a))&&(cT(f)||f.is(c))&&e.is(g.getParent())&&e.is(f.getParent())||b(278),{a:g,b:f,commonAncestor:e,type:"branch"})}return null}function eU(a,c){var d;let e,{type:f,key:g,offset:h}=a,i=(null===(e=dx(d=a.key))&&b(63,d),e);return"text"===f?(bW(i)||b(266,i.getType(),g),eF(i,c,h)):(cT(i)||b(267,i.getType(),g),function(a,b,c){let d=eH(a,"next");for(let a=0;a<b;a++){let a=d.getAdjacentCaret();if(null===a)break;d=a}return e2(d,c)}(i,a.offset,c))}function eV(a,c){let{origin:d,direction:e}=c,f="next"===e;ey(c)?a.set(d.getKey(),c.offset,"text"):ez(c)?bW(d)?a.set(d.getKey(),eG(d,e),"text"):a.set(d.getParentOrThrow().getKey(),d.getIndexWithinParent()+ +!!f,"element"):(eA(c)&&cT(d)||b(268),a.set(d.getKey(),f?0:d.getChildrenSize(),"element"))}function eW(a){let b=cl(),c=b4(b)?b:ci();return eX(c,a),dF(c),c}function eX(a,b){eV(a.anchor,b.anchor),eV(a.focus,b.focus)}function eY(a){let{anchor:b,focus:c}=a,d=eU(b,"next"),e=eU(c,"next"),f=0>=eQ(d,e)?"next":"previous";return eO(e2(d,f),e2(e,f))}function eZ(a){let{direction:b,origin:c}=a,d=eE(c,er[b]).getNodeAtCaret();return d?eE(d,b):eH(c.getParentOrThrow(),b)}function e$(a,b="root"){let c=[a];for(let d=eA(a)?a.getParentCaret(b):a.getSiblingCaret();null!==d;d=d.getParentCaret(b))c.push(eZ(d));return c}function e_(a){return!!a&&a.origin.isAttached()}function e0(a){let b=function(a){let b=a;for(;eA(b);){let a=eJ(b);if(!eA(a))break;b=a}return b}(a.getLatest()),{direction:c}=b;if(bW(b.origin))return ey(b)?b:eF(b.origin,c,c);let d=b.getAdjacentCaret();return ez(d)&&bW(d.origin)?eF(d.origin,c,er[c]):b}function e1(a){return ey(a)&&a.offset!==eG(a.origin,a.direction)}function e2(a,b){return a.direction===b?a:a.getFlipped()}function e3(a,b){return a.direction===b?a:eO(e2(a.focus,b),e2(a.anchor,b))}function e4(a,b="root"){let c=0,d=a,e=eJ(d);for(;null===e;){if(c--,!(e=d.getParentCaret(b)))return null;e=eJ(d=e)}return e&&[e,c]}function e5(a){let{origin:c,offset:d,direction:e}=a;if(d===eG(c,e))return a.getSiblingCaret();if(d===eG(c,er[e]))return eZ(a.getSiblingCaret());let[f]=c.splitText(d);return bW(f)||b(281),e2(eE(f,"next"),e)}function e6(a,b){return!0}function e7(a,{$copyElementNode:b=d3,$splitTextPointCaretNext:c=e5,rootMode:d="shadowRoot",$shouldSplit:e=e6}={}){if(ey(a))return c(a);let f=a.getParentCaret(d);if(f){let{origin:c}=f;if(eA(a)&&(!c.canBeEmpty()||!e(c,"first")))return eZ(f);let d=function(a){let b=[];for(let c=a.getAdjacentCaret();c;c=c.getAdjacentCaret())b.push(c.origin);return b}(a);(d.length>0||c.canBeEmpty()&&e(c,"last"))&&f.insert(b(c).splice(0,0,d))}return f}function e8(a){return a}function e9(...a){return a}function fa(a){return a}function fb(a,b){if(!b||a===b)return a;for(let c in b)if(a[c]!==b[c])return{...a,...b};return a}function fc(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let c of(d.append("code",a),b))d.append("v",c);throw c.search=d.toString(),Error(`Minified Lexical error #${a}; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}a.s(["$applyNodeReplacement",()=>d4,"$caretFromPoint",()=>eU,"$caretRangeFromSelection",()=>eY,"$cloneWithProperties",()=>ek,"$cloneWithPropertiesEphemeral",()=>el,"$create",()=>ep,"$createLineBreakNode",()=>bE,"$createNodeSelection",()=>cj,"$createParagraphNode",()=>c4,"$createPoint",()=>b0,"$createRangeSelection",()=>ci,"$createTabNode",()=>bZ,"$createTextNode",()=>bV,"$extendCaretToRange",()=>eM,"$findMatchingParent",()=>eq,"$getAdjacentChildCaret",()=>eJ,"$getAdjacentNode",()=>dV,"$getAdjacentSiblingOrParentSiblingCaret",()=>e4,"$getCaretInDirection",()=>e2,"$getCaretRange",()=>eO,"$getCaretRangeInDirection",()=>e3,"$getCharacterOffsets",()=>b8,"$getChildCaret",()=>eH,"$getChildCaretOrSelf",()=>eI,"$getCollapsedCaretRange",()=>eN,"$getEditor",()=>eg,"$getNearestNodeFromDOMNode",()=>dA,"$getNodeByKey",()=>dx,"$getNodeFromDOMNode",()=>dy,"$getPreviousSelection",()=>cm,"$getRoot",()=>dD,"$getSelection",()=>cl,"$getSiblingCaret",()=>eE,"$getState",()=>w,"$getTextPointCaret",()=>eF,"$hasAncestor",()=>d_,"$insertNodes",()=>cr,"$isBlockElementNode",()=>cg,"$isChildCaret",()=>eA,"$isDecoratorNode",()=>cW,"$isEditorState",()=>c_,"$isElementNode",()=>cT,"$isExtendableTextPointCaret",()=>e1,"$isLeafNode",()=>dr,"$isLineBreakNode",()=>bF,"$isNodeSelection",()=>b6,"$isParagraphNode",()=>c5,"$isRangeSelection",()=>b4,"$isRootNode",()=>cY,"$isRootOrShadowRoot",()=>d2,"$isSiblingCaret",()=>ez,"$isTabNode",()=>b$,"$isTextNode",()=>bW,"$isTextPointCaret",()=>ey,"$isTokenOrSegmented",()=>dl,"$normalizeCaret",()=>e0,"$normalizeSelection__EXPERIMENTAL",()=>I,"$parseSerializedNode",()=>cI,"$rewindSiblingCaret",()=>eZ,"$selectAll",()=>dR,"$setPointFromCaret",()=>eV,"$setSelection",()=>dF,"$setSelectionFromCaretRange",()=>eW,"$setState",()=>x,"$splitAtPointCaretNext",()=>e7,"ArtificialNode__DO_NOT_USE",()=>c1,"BLUR_COMMAND",()=>a2,"CAN_REDO_COMMAND",()=>a_,"CAN_UNDO_COMMAND",()=>a0,"CLEAR_EDITOR_COMMAND",()=>aZ,"CLEAR_HISTORY_COMMAND",()=>a$,"CLICK_COMMAND",()=>ap,"COMMAND_PRIORITY_CRITICAL",()=>4,"COMMAND_PRIORITY_EDITOR",()=>0,"COMMAND_PRIORITY_LOW",()=>1,"CONTROLLED_TEXT_INSERTION_COMMAND",()=>at,"COPY_COMMAND",()=>aW,"CUT_COMMAND",()=>aX,"DELETE_CHARACTER_COMMAND",()=>aq,"DELETE_LINE_COMMAND",()=>ax,"DELETE_WORD_COMMAND",()=>aw,"DRAGOVER_COMMAND",()=>aU,"DRAGSTART_COMMAND",()=>aT,"DROP_COMMAND",()=>aR,"DecoratorNode",()=>cV,"ElementNode",()=>cS,"FOCUS_COMMAND",()=>a1,"FORMAT_ELEMENT_COMMAND",()=>aS,"FORMAT_TEXT_COMMAND",()=>ay,"HISTORIC_TAG",()=>"historic","HISTORY_MERGE_TAG",()=>bB,"HISTORY_PUSH_TAG",()=>"history-push","INDENT_CONTENT_COMMAND",()=>aP,"INSERT_LINE_BREAK_COMMAND",()=>ar,"INSERT_PARAGRAPH_COMMAND",()=>as,"INSERT_TAB_COMMAND",()=>aO,"INTERNAL_$isBlock",()=>ef,"KEY_ARROW_DOWN_COMMAND",()=>aH,"KEY_ARROW_LEFT_COMMAND",()=>aE,"KEY_ARROW_RIGHT_COMMAND",()=>aC,"KEY_ARROW_UP_COMMAND",()=>aG,"KEY_BACKSPACE_COMMAND",()=>aK,"KEY_DELETE_COMMAND",()=>aM,"KEY_ENTER_COMMAND",()=>aI,"KEY_ESCAPE_COMMAND",()=>aL,"KEY_SPACE_COMMAND",()=>aJ,"KEY_TAB_COMMAND",()=>aN,"LineBreakNode",()=>bC,"MOVE_TO_END",()=>aD,"MOVE_TO_START",()=>aF,"OUTDENT_CONTENT_COMMAND",()=>aQ,"PASTE_COMMAND",()=>au,"PASTE_TAG",()=>"paste","ParagraphNode",()=>c2,"REDO_COMMAND",()=>aA,"REMOVE_TEXT_COMMAND",()=>av,"RootNode",()=>cX,"SELECTION_CHANGE_COMMAND",()=>an,"SELECTION_INSERT_CLIPBOARD_NODES_COMMAND",()=>ao,"SELECT_ALL_COMMAND",()=>aY,"TabNode",()=>bY,"TextNode",()=>bN,"UNDO_COMMAND",()=>az,"buildImportMap",()=>bx,"configExtension",()=>e9,"createCommand",()=>am,"createEditor",()=>c7,"defineExtension",()=>e8,"getDOMSelection",()=>d8,"getDOMTextNode",()=>dp,"getNearestEditorFromDOMNode",()=>dh,"getRegisteredNode",()=>dc,"getTextDirection",()=>dj,"isBlockDomNode",()=>ee,"isDOMDocumentNode",()=>dn,"isDOMNode",()=>eb,"isDocumentFragment",()=>ec,"isHTMLAnchorElement",()=>d9,"isHTMLElement",()=>ea,"isInlineDomNode",()=>ed,"isSelectionCapturedInDecoratorInput",()=>de,"isSelectionWithinEditor",()=>df,"makeStepwiseIterator",()=>eP,"safeCast",()=>fa,"setNodeIndentFromDOM",()=>em,"shallowMergeConfig",()=>fb],928479);let fd=new Map;function fe(a,b){let c=a.getRootElement();if(null===c)return[];let d=c.getBoundingClientRect(),e=getComputedStyle(c),f=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),g=Array.from(b.getClientRects()),h,i=g.length;g.sort((a,b)=>{let c=a.top-b.top;return 3>=Math.abs(c)?a.left-b.left:c});for(let a=0;a<i;a++){let b=g[a],c=h&&h.top<=b.top&&h.top+h.height>b.top&&h.left+h.width>b.left,e=b.width+f===d.width;c||e?(g.splice(a--,1),i--):h=b}return g}function ff(a){let b={};if(!a)return b;for(let c of a.split(";"))if(""!==c){let[a,d]=c.split(/:([^]+)/);a&&d&&(b[a.trim()]=d.trim())}return b}function fg(a){let b=fd.get(a);return void 0===b&&(b=ff(a),fd.set(a,b)),b}function fh(a){let b=eg().getElementByKey(a.getKey());if(null===b)return null;let c=b.ownerDocument.defaultView;return null===c?null:c.getComputedStyle(b)}function fi(a){return fh(cY(a)?a:a.getParentOrThrow())}function fj(a){let b=fi(a);return null!==b&&"rtl"===b.direction}function fk(a,b,c="self"){let d=a.getStartEndPoints();if(b.isSelected(a)&&!dl(b)&&null!==d){let[e,f]=d,g=a.isBackward(),h=e.getNode(),i=f.getNode(),j=b.is(h),k=b.is(i);if(j||k){let[d,e]=b8(a),f=h.is(i),j=b.is(g?i:h),k=b.is(g?h:i),l,m=0;f?(m=d>e?e:d,l=d>e?d:e):j?(m=g?e:d,l=void 0):k&&(m=0,l=g?d:e);let n=b.__text.slice(m,l);n!==b.__text&&("clone"===c&&(b=el(b)),b.__text=n)}}return b}function fl(a){if("text"===a.type)return a.offset===a.getNode().getTextContentSize();let b=a.getNode();return cT(b)||fc(177),a.offset===b.getChildrenSize()}function fm(a){let b=a.getStyle(),c=ff(b);fd.set(b,c)}function fn(a,b){(b4(a)?a.isCollapsed():bW(a)||cT(a))||fc(280);let c=fg(b4(a)?a.style:bW(a)?a.getStyle():a.getTextStyle()),d=Object.entries(b).reduce((b,[d,e])=>("function"==typeof e?b[d]=e(c[d],a):null===e?delete b[d]:b[d]=e,b),{...c}),e=function(a){let b="";for(let c in a)c&&(b+=`${c}: ${a[c]};`);return b}(d);b4(a)||bW(a)?a.setStyle(e):a.setTextStyle(e),fd.set(e,d)}function fo(a,b){if(b4(a)&&a.isCollapsed()){fn(a,b);let c=a.anchor.getNode();cT(c)&&c.isEmpty()&&fn(c,b)}!function(a){let b=cl();if(!b)return;let c=new Map,d=a=>c.get(a.getKey())||[0,a.getTextContentSize()];if(b4(b))for(let a of eY(b).getTextSlices())a&&c.set(a.caret.origin.getKey(),a.getSliceIndices());for(let c of b.getNodes()){if(!bW(c)||!c.canHaveFormat())continue;let[b,e]=d(c);e!==b&&a(dl(c)||0===b&&e===c.getTextContentSize()?c:c.splitText(b,e)[+(0!==b)])}b4(b)&&"text"===b.anchor.type&&"text"===b.focus.type&&b.anchor.key===b.focus.key&&function(a){if(a.isBackward()){let{anchor:b,focus:c}=a,{key:d,offset:e,type:f}=b;b.set(c.key,c.offset,c.type),c.set(d,e,f)}}(b)}(a=>{fn(a,b)})}function fp(a,b){let c=a.getFormatType(),d=a.getIndent();c!==b.getFormatType()&&b.setFormat(c),d!==b.getIndent()&&b.setIndent(d)}function fq(a,b,c=fp){if(null===a)return;let d=a.getStartEndPoints(),e=new Map,f=null;if(d){let[a,b]=d;(f=ci()).anchor.set(a.key,a.offset,a.type),f.focus.set(b.key,b.offset,b.type);let c=eq(a.getNode(),ef),g=eq(b.getNode(),ef);cT(c)&&e.set(c.getKey(),c),cT(g)&&e.set(g.getKey(),g)}for(let b of a.getNodes())if(cT(b)&&ef(b))e.set(b.getKey(),b);else if(null===d){let a=eq(b,ef);cT(a)&&e.set(a.getKey(),a)}for(let[a,d]of e){let e=b();c(d,e),d.replace(e,!0),f&&(a===f.anchor.key&&f.anchor.set(e.getKey(),f.anchor.offset,f.anchor.type),a===f.focus.key&&f.focus.set(e.getKey(),f.focus.offset,f.focus.type))}f&&a.is(cl())&&dF(f)}function fr(a){let b=fs(a);return null!==b&&"vertical-rl"===b.writingMode}function fs(a){let b=a.anchor.getNode();return cT(b)?fh(b):fi(b)}function ft(a,b){let c=fr(a)?!b:b;fu(a)&&(c=!c);let d=eU(a.focus,c?"previous":"next");if(e1(d))return!1;for(let a of eM(d)){if(eA(a))return!a.origin.isInline();if(!cT(a.origin)){if(cW(a.origin))return!0;break}}return!1}function fu(a){let b=fs(a);return null!==b&&"rtl"===b.direction}function fv(a,b,c){let d,e=fu(a);d=fr(a)||e?!c:c,a.modify(b?"extend":"move",d,"character")}function fw(a,b,c=""){let d=null,e=a.getNodes(),f=a.anchor,g=a.focus,h=a.isBackward(),i=h?g.offset:f.offset,j=h?g.getNode():f.getNode();if(b4(a)&&a.isCollapsed()&&""!==a.style){let c=fg(a.style);if(null!==c&&b in c)return c[b]}for(let a=0;a<e.length;a++){let f=e[a];if((0===a||0!==i||!f.is(j))&&bW(f)){let a=function(a,b,c){let d=fg(a.getStyle());return null!==d&&d[b]||c}(f,b,c);if(null===d)d=a;else if(d!==a){d="";break}}}return null===d?c:d}a.s(["$addNodeStyle",()=>fm,"$getSelectionStyleValueForProperty",()=>fw,"$isAtNodeEnd",()=>fl,"$isParentRTL",()=>fj,"$moveCharacter",()=>fv,"$patchStyleText",()=>fo,"$setBlocksType",()=>fq,"$shouldOverrideDefaultCharacterSelection",()=>ft,"$sliceSelectedTextNodeContent",()=>fk,"createRectsFromDOMRange",()=>fe,"getStyleObjectFromCSS",()=>fg],585818);function fx(...a){let b=[];for(let c of a)if(c&&"string"==typeof c)for(let[a]of c.matchAll(/\S+/g))b.push(a);return b}function fy(...a){return()=>{for(let b=a.length-1;b>=0;b--)a[b]();a.length=0}}function fz(a,...b){let c=fx(...b);c.length>0&&a.classList.add(...c)}function fA(a,...b){let c=fx(...b);c.length>0&&a.classList.remove(...c)}function fB(a){return a?a.getAdjacentCaret():null}function fC(a,b){let c=a;for(;null!=c;){if(c instanceof b)return c;c=c.getParent()}return null}function fD(a){let b=eq(a,a=>cT(a)&&!a.isInline());return cT(b)||function(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let a of(d.append("code",4),b))d.append("v",a);throw c.search=d.toString(),Error(`Minified Lexical error #4; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0,a.__key),b}function fE(a,b){return null!==a&&Object.getPrototypeOf(a).constructor.name===b.name}function fF(a,b){let c=[];for(let d=0;d<a.length;d++){let e=b(a[d]);null!==e&&c.push(e)}return c}let fG=!1;function fH(a){let b=1;if(function(){if(void 0===fG){let a=document.createElement("div");a.style.cssText="position: absolute; opacity: 0; width: 100px; left: -1000px;",document.body.appendChild(a);let b=a.getBoundingClientRect();a.style.setProperty("zoom","2"),fG=a.getBoundingClientRect().width===b.width,document.body.removeChild(a)}return fG}())for(;a;)b*=Number(window.getComputedStyle(a).getPropertyValue("zoom")),a=a.parentElement;return b}a.s(["$filter",()=>fF,"$getAdjacentCaret",()=>fB,"$getNearestBlockElementAncestorOrThrow",()=>fD,"$getNearestNodeOfType",()=>fC,"addClassNamesToElement",()=>fz,"calculateZoomLevel",()=>fH,"mergeRegister",()=>fy,"objectKlassEquals",()=>fE,"removeClassNamesFromElement",()=>fA],560847)},696045,a=>{"use strict";let b,c;var d=a.i(928479),e=a.i(560847);let f=Symbol.for("preact-signals");function g(){if(j>1)return void j--;let a,b=!1;for(;void 0!==c;){let d=c;for(c=void 0,k++;void 0!==d;){let c=d.o;if(d.o=void 0,d.f&=-3,!(8&d.f)&&p(d))try{d.c()}catch(c){b||(a=c,b=!0)}d=c}}if(k=0,j--,b)throw a}function h(a){if(j>0)return a();j++;try{return a()}finally{g()}}function i(a){let c=b;b=void 0;try{return a()}finally{b=c}}let j=0,k=0,l=0;function m(a){if(void 0===b)return;let c=a.n;return void 0===c||c.t!==b?(c={i:0,S:a,p:b.s,n:void 0,t:b,e:void 0,x:void 0,r:c},void 0!==b.s&&(b.s.n=c),b.s=c,a.n=c,32&b.f&&a.S(c),c):-1===c.i?(c.i=0,void 0!==c.n&&(c.n.p=c.p,void 0!==c.p&&(c.p.n=c.n),c.p=b.s,c.n=void 0,b.s.n=c,b.s=c),c):void 0}function n(a,b){this.v=a,this.i=0,this.n=void 0,this.t=void 0,this.W=null==b?void 0:b.watched,this.Z=null==b?void 0:b.unwatched,this.name=null==b?void 0:b.name}function o(a,b){return new n(a,b)}function p(a){for(let b=a.s;void 0!==b;b=b.n)if(b.S.i!==b.i||!b.S.h()||b.S.i!==b.i)return!0;return!1}function q(a){for(let b=a.s;void 0!==b;b=b.n){let c=b.S.n;if(void 0!==c&&(b.r=c),b.S.n=b,b.i=-1,void 0===b.n){a.s=b;break}}}function r(a){let b,c=a.s;for(;void 0!==c;){let a=c.p;-1===c.i?(c.S.U(c),void 0!==a&&(a.n=c.n),void 0!==c.n&&(c.n.p=a)):b=c,c.S.n=c.r,void 0!==c.r&&(c.r=void 0),c=a}a.s=b}function s(a,b){n.call(this,void 0),this.x=a,this.s=void 0,this.g=l-1,this.f=4,this.W=null==b?void 0:b.watched,this.Z=null==b?void 0:b.unwatched,this.name=null==b?void 0:b.name}function t(a){let c=a.u;if(a.u=void 0,"function"==typeof c){j++;let d=b;b=void 0;try{c()}catch(b){throw a.f&=-2,a.f|=8,u(a),b}finally{b=d,g()}}}function u(a){for(let b=a.s;void 0!==b;b=b.n)b.S.U(b);a.x=void 0,a.s=void 0,t(a)}function v(a){if(b!==this)throw Error("Out-of-order effect");r(this),b=a,this.f&=-2,8&this.f&&u(this),g()}function w(a,b){this.x=a,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=null==b?void 0:b.name}function x(a,b){let c=new w(a,b);try{c.c()}catch(a){throw c.d(),a}let d=c.d.bind(c);return d[Symbol.dispose]=d,d}function y(a,b={}){let c={};for(let d in a){let e=b[d],f=o(void 0===e?a[d]:e);c[d]=f}return c}function z(){let a=(0,d.$getRoot)(),b=(0,d.$getSelection)(),c=(0,d.$createParagraphNode)();a.clear(),a.append(c),null!==b&&c.select(),(0,d.$isRangeSelection)(b)&&(b.format=0)}function A(a,b){let c;return o(a(),{unwatched(){c&&(c(),c=void 0)},watched(){this.value=a(),c=b(this)}})}n.prototype.brand=f,n.prototype.h=function(){return!0},n.prototype.S=function(a){let b=this.t;b!==a&&void 0===a.e&&(a.x=b,this.t=a,void 0!==b?b.e=a:i(()=>{var a;null==(a=this.W)||a.call(this)}))},n.prototype.U=function(a){if(void 0!==this.t){let b=a.e,c=a.x;void 0!==b&&(b.x=c,a.e=void 0),void 0!==c&&(c.e=b,a.x=void 0),a===this.t&&(this.t=c,void 0===c&&i(()=>{var a;null==(a=this.Z)||a.call(this)}))}},n.prototype.subscribe=function(a){return x(()=>{let c=this.value,d=b;b=void 0;try{a(c)}finally{b=d}},{name:"sub"})},n.prototype.valueOf=function(){return this.value},n.prototype.toString=function(){return this.value+""},n.prototype.toJSON=function(){return this.value},n.prototype.peek=function(){let a=b;b=void 0;try{return this.value}finally{b=a}},Object.defineProperty(n.prototype,"value",{get(){let a=m(this);return void 0!==a&&(a.i=this.i),this.v},set(a){if(a!==this.v){if(k>100)throw Error("Cycle detected");this.v=a,this.i++,l++,j++;try{for(let a=this.t;void 0!==a;a=a.x)a.t.N()}finally{g()}}}}),s.prototype=new n,s.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f)||(this.f&=-5,this.g===l))return!0;if(this.g=l,this.f|=1,this.i>0&&!p(this))return this.f&=-2,!0;let a=b;try{q(this),b=this;let a=this.x();(16&this.f||this.v!==a||0===this.i)&&(this.v=a,this.f&=-17,this.i++)}catch(a){this.v=a,this.f|=16,this.i++}return b=a,r(this),this.f&=-2,!0},s.prototype.S=function(a){if(void 0===this.t){this.f|=36;for(let a=this.s;void 0!==a;a=a.n)a.S.S(a)}n.prototype.S.call(this,a)},s.prototype.U=function(a){if(void 0!==this.t&&(n.prototype.U.call(this,a),void 0===this.t)){this.f&=-33;for(let a=this.s;void 0!==a;a=a.n)a.S.U(a)}},s.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(let a=this.t;void 0!==a;a=a.x)a.t.N()}},Object.defineProperty(s.prototype,"value",{get(){if(1&this.f)throw Error("Cycle detected");let a=m(this);if(this.h(),void 0!==a&&(a.i=this.i),16&this.f)throw this.v;return this.v}}),w.prototype.c=function(){let a=this.S();try{if(8&this.f||void 0===this.x)return;let a=this.x();"function"==typeof a&&(this.u=a)}finally{a()}},w.prototype.S=function(){if(1&this.f)throw Error("Cycle detected");this.f|=1,this.f&=-9,t(this),q(this),j++;let a=b;return b=this,v.bind(this,a)},w.prototype.N=function(){2&this.f||(this.f|=2,this.o=c,c=this)},w.prototype.d=function(){this.f|=8,1&this.f||u(this)},w.prototype.dispose=function(){this.d()},(0,d.defineExtension)({build:(a,b,c)=>y(b),config:(0,d.safeCast)({defaultSelection:"rootEnd",disabled:!1}),name:"@lexical/extension/AutoFocus",register(a,b,c){let d=c.getOutput();return x(()=>d.disabled.value?void 0:a.registerRootListener(b=>{a.focus(()=>{let a=document.activeElement;null===b||null!==a&&b.contains(a)||b.focus({preventScroll:!0})},{defaultSelection:d.defaultSelection.peek()})}))}}),(0,d.defineExtension)({build:(a,b,c)=>y(b),config:(0,d.safeCast)({$onClear:z}),name:"@lexical/extension/ClearEditor",register(a,b,c){let{$onClear:e}=c.getOutput();return x(()=>(function(a,b=z){return a.registerCommand(d.CLEAR_EDITOR_COMMAND,c=>(a.update(b),!0),d.COMMAND_PRIORITY_EDITOR)})(a,e.value))}});let B=(0,d.defineExtension)({build:a=>A(()=>a.getEditorState(),b=>a.registerUpdateListener(a=>{b.value=a.editorState})),name:"@lexical/extension/EditorState"});function C(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let c of(d.append("code",a),b))d.append("v",c);throw c.search=d.toString(),Error(`Minified Lexical error #${a}; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let D=new Set;class E{builder;configs;_dependency;_peerNameSet;extension;state;_signal;constructor(a,b){this.builder=a,this.extension=b,this.configs=new Set,this.state={id:0}}mergeConfigs(){let a=this.extension.config||{},b=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):d.shallowMergeConfig;for(let c of this.configs)a=b(a,c);return a}init(a){let b,c=this.state;2===c.id||C(306,String(c.id));let d={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},e={...d,getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)},f=Object.assign(c,{config:this.mergeConfigs(),id:3,registerState:d});this.state=f,this.extension.init&&(b=this.extension.init(a,f.config,d)),this.state=Object.assign(f,{id:4,initResult:b,registerState:e})}build(a){let b,c=this.state;4!==c.id&&C(307,String(c.id),String(5)),this.extension.build&&(b=this.extension.build(a,c.config,c.registerState));let d={...c.registerState,getOutput:()=>b,getSignal:this.getSignal.bind(this)};this.state=Object.assign(c,{id:5,output:b,registerState:d})}register(a,b){this._signal=b;let c=this.state;5!==c.id&&C(308,String(c.id),String(5));let d=this.extension.register&&this.extension.register(a,c.config,c.registerState);return this.state=Object.assign(c,{id:6}),()=>{let a=this.state;7!==a.id&&C(309,String(c.id),String(7)),this.state=Object.assign(a,{id:5}),d&&d()}}afterRegistration(a){let b,c=this.state;return 6!==c.id&&C(310,String(c.id),String(6)),this.extension.afterRegistration&&(b=this.extension.afterRegistration(a,c.config,c.registerState)),this.state=Object.assign(c,{id:7}),b}getSignal(){return void 0===this._signal&&C(311),this._signal}getInitResult(){void 0===this.extension.init&&C(312,this.extension.name);let a=this.state;return a.id>=4||C(313,String(a.id),String(4)),a.initResult}getInitPeer(a){let b=this.builder.extensionNameMap.get(a);return b?b.getExtensionInitDependency():void 0}getExtensionInitDependency(){let a=this.state;return a.id>=3||C(314,String(a.id),String(3)),{config:a.config}}getPeer(a){let b=this.builder.extensionNameMap.get(a);return b?b.getExtensionDependency():void 0}getInitDependency(a){let b=this.builder.getExtensionRep(a);return void 0===b&&C(315,this.extension.name,a.name),b.getExtensionInitDependency()}getDependency(a){let b=this.builder.getExtensionRep(a);return void 0===b&&C(315,this.extension.name,a.name),b.getExtensionDependency()}getState(){let a=this.state;return a.id>=7||C(316,String(a.id),String(7)),a}getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||D}getPeerNameSet(){let a=this._peerNameSet;return a||(a=new Set((this.extension.peerDependencies||[]).map(([a])=>a)),this._peerNameSet=a),a}getExtensionDependency(){if(!this._dependency){let a=this.state;a.id>=5||C(317,this.extension.name),this._dependency={config:a.config,init:a.initResult,output:a.output}}return this._dependency}}let F={tag:d.HISTORY_MERGE_TAG};function G(){let a=(0,d.$getRoot)();a.isEmpty()&&a.append((0,d.$createParagraphNode)())}let H=(0,d.defineExtension)({config:(0,d.safeCast)({setOptions:F,updateOptions:F}),init:({$initialEditorState:a=G})=>({$initialEditorState:a,initialized:!1}),afterRegistration(a,{updateOptions:b,setOptions:c},e){let f=e.getInitResult();if(!f.initialized){f.initialized=!0;let{$initialEditorState:e}=f;if((0,d.$isEditorState)(e))a.setEditorState(e,c);else if("function"==typeof e)a.update(()=>{e(a)},b);else if(e&&("string"==typeof e||"object"==typeof e)){let b=a.parseEditorState(e);a.setEditorState(b,c)}}return()=>{}},name:"@lexical/extension/InitialState",nodes:[d.RootNode,d.TextNode,d.LineBreakNode,d.TabNode,d.ParagraphNode]}),I=Symbol.for("@lexical/extension/LexicalBuilder");function J(){}function K(a){throw a}function L(a){return Array.isArray(a)?a:[a]}let M="0.38.2+prod.esm";class N{roots;extensionNameMap;outgoingConfigEdges;incomingEdges;conflicts;_sortedExtensionReps;PACKAGE_VERSION;constructor(a){for(const b of(this.outgoingConfigEdges=new Map,this.incomingEdges=new Map,this.extensionNameMap=new Map,this.conflicts=new Map,this.PACKAGE_VERSION=M,this.roots=a,a))this.addExtension(b)}static fromExtensions(a){let b=[L(H)];for(let c of a)b.push(L(c));return new N(b)}static maybeFromEditor(a){let b=a[I];return b&&(b.PACKAGE_VERSION!==M&&C(292,b.PACKAGE_VERSION,M),b instanceof N||C(293)),b}static fromEditor(a){let b=N.maybeFromEditor(a);return void 0===b&&C(294),b}constructEditor(){let{$initialEditorState:a,onError:b,...c}=this.buildCreateEditorArgs(),e=Object.assign((0,d.createEditor)({...c,...b?{onError:a=>{b(a,e)}}:{}}),{[I]:this});for(let a of this.sortedExtensionReps())a.build(e);return e}buildEditor(){let a=J;function b(){try{a()}finally{a=J}}let c=Object.assign(this.constructEditor(),{dispose:b,[Symbol.dispose]:b});return a=(0,e.mergeRegister)(this.registerEditor(c),()=>c.setRootElement(null)),c}hasExtensionByName(a){return this.extensionNameMap.has(a)}getExtensionRep(a){let b=this.extensionNameMap.get(a.name);if(b)return b.extension!==a&&C(295,a.name),b}addEdge(a,b,c){let d=this.outgoingConfigEdges.get(a);d?d.set(b,c):this.outgoingConfigEdges.set(a,new Map([[b,c]]));let e=this.incomingEdges.get(b);e?e.add(a):this.incomingEdges.set(b,new Set([a]))}addExtension(a){void 0!==this._sortedExtensionReps&&C(296);let[b]=L(a);"string"!=typeof b.name&&C(297,typeof b.name);let c=this.extensionNameMap.get(b.name);if(void 0!==c&&c.extension!==b&&C(298,b.name),!c){c=new E(this,b),this.extensionNameMap.set(b.name,c);let a=this.conflicts.get(b.name);for(let c of("string"==typeof a&&C(299,b.name,a),b.conflictsWith||[]))this.extensionNameMap.has(c)&&C(299,b.name,c),this.conflicts.set(c,b.name);for(let a of b.dependencies||[]){let c=L(a);this.addEdge(b.name,c[0].name,c.slice(1)),this.addExtension(c)}for(let[a,c]of b.peerDependencies||[])this.addEdge(b.name,a,c?[c]:[])}}sortedExtensionReps(){if(this._sortedExtensionReps)return this._sortedExtensionReps;let a=[],b=(c,d)=>{var e,f;let g=c.state;if(2===g.id)return;let h=c.extension.name;0===g.id||C(300,h,d||"[unknown]"),0===(e=g).id||C(304,String(e.id),String(0)),c.state=g=Object.assign(e,{id:1});let i=this.outgoingConfigEdges.get(h);if(i)for(let a of i.keys()){let c=this.extensionNameMap.get(a);c&&b(c,h)}1===(f=g).id||C(305,String(f.id),String(1)),c.state=g=Object.assign(f,{id:2}),a.push(c)};for(let a of this.extensionNameMap.values())0===a.state.id&&b(a);for(let b of a)for(let[a,c]of this.outgoingConfigEdges.get(b.extension.name)||[])if(c.length>0){let b=this.extensionNameMap.get(a);if(b)for(let a of c)b.configs.add(a)}for(let[a,...b]of this.roots)if(b.length>0){let c=this.extensionNameMap.get(a.name);for(let d of(void 0===c&&C(301,a.name),b))c.configs.add(d)}return this._sortedExtensionReps=a,this._sortedExtensionReps}registerEditor(a){let b=this.sortedExtensionReps(),c=new AbortController,d=[()=>c.abort()],f=c.signal;for(let c of b){let b=c.register(a,f);b&&d.push(b)}for(let c of b){let b=c.afterRegistration(a);b&&d.push(b)}return(0,e.mergeRegister)(...d)}buildCreateEditorArgs(){let a={},b=new Set,c=new Map,d=new Map,e={},f={},g=this.sortedExtensionReps();for(let h of g){let{extension:g}=h;if(void 0!==g.onError&&(a.onError=g.onError),void 0!==g.disableEvents&&(a.disableEvents=g.disableEvents),void 0!==g.parentEditor&&(a.parentEditor=g.parentEditor),void 0!==g.editable&&(a.editable=g.editable),void 0!==g.namespace&&(a.namespace=g.namespace),void 0!==g.$initialEditorState&&(a.$initialEditorState=g.$initialEditorState),g.nodes){for(let a of("function"==typeof g.nodes?g.nodes():g.nodes)||[]){if("function"!=typeof a){let b=c.get(a.replace);b&&C(302,g.name,a.replace.name,b.extension.name),c.set(a.replace,h)}b.add(a)}}if(g.html){if(g.html.export)for(let[a,b]of g.html.export.entries())d.set(a,b);g.html.import&&Object.assign(e,g.html.import)}g.theme&&function a(b,c){if(b&&c&&!Array.isArray(c)&&"object"==typeof b&&"object"==typeof c){for(let d in c)b[d]=a(b[d],c[d]);return b}return c}(f,g.theme)}Object.keys(f).length>0&&(a.theme=f),b.size&&(a.nodes=[...b]);let h=Object.keys(e).length>0,i=d.size>0;for(let b of((h||i)&&(a.html={},h&&(a.html.import=e),i&&(a.html.export=d)),g))b.init(a);return a.onError||(a.onError=K),a}}function O(a,b){let c=N.fromEditor(a).extensionNameMap.get(b);return c?c.getExtensionDependency():void 0}let P=new Set,Q=(0,d.defineExtension)({build(a,b,c){let e=c.getDependency(B).output,f=o({watchedNodeKeys:new Map}),g=A(()=>{},()=>x(()=>{let a=g.peek(),{watchedNodeKeys:b}=f.value,c,h=!1;e.value.read(()=>{if((0,d.$getSelection)())for(let[e,f]of b.entries()){if(0===f.size){b.delete(e);continue}let g=(0,d.$getNodeByKey)(e),i=g&&g.isSelected()||!1;h=h||i!==(!!a&&a.has(e)),i&&(c=c||new Set).add(e)}}),!h&&c&&a&&c.size===a.size||(g.value=c)}));return{watchNodeKey:function(a){let b=new s(()=>(g.value||P).has(a),void 0),{watchedNodeKeys:c}=f.peek(),d=c.get(a),e=void 0!==d;return(d=d||new Set).add(b),e||(c.set(a,d),f.value={watchedNodeKeys:c}),b}}},dependencies:[B],name:"@lexical/extension/NodeSelection"});(0,d.createCommand)("INSERT_HORIZONTAL_RULE_COMMAND");class R extends d.DecoratorNode{static getType(){return"horizontalrule"}static clone(a){return new R(a.__key)}static importJSON(a){return T().updateFromJSON(a)}static importDOM(){return{hr:()=>({conversion:S,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(a){let b=document.createElement("hr");return(0,e.addClassNamesToElement)(b,a.theme.hr),b}getTextContent(){return"\n"}isInline(){return!1}updateDOM(){return!1}}function S(){return{node:T()}}function T(){return(0,d.$create)(R)}(0,d.defineExtension)({dependencies:[B,Q],name:"@lexical/extension/HorizontalRule",nodes:[R],register(a,b,c){let{watchNodeKey:f}=c.getDependency(Q).output,g=o({nodeSelections:new Map}),i=a._config.theme.hrSelected??"selected";return(0,e.mergeRegister)(a.registerCommand(d.CLICK_COMMAND,a=>{if((0,d.isDOMNode)(a.target)){let b=(0,d.$getNodeFromDOMNode)(a.target);if(b instanceof R)return function(a,b=!1){let c,e=(0,d.$getSelection)(),f=a.isSelected(),g=a.getKey();b&&(0,d.$isNodeSelection)(e)?c=e:(c=(0,d.$createNodeSelection)(),(0,d.$setSelection)(c)),f?c.delete(g):c.add(g)}(b,a.shiftKey),!0}return!1},d.COMMAND_PRIORITY_LOW),a.registerMutationListener(R,(b,c)=>{h(()=>{let c=!1,{nodeSelections:d}=g.peek();for(let[e,g]of b.entries())if("destroyed"===g)d.delete(e),c=!0;else{let b=d.get(e),g=a.getElementByKey(e);b?b.domNode.value=g:(c=!0,d.set(e,{domNode:o(g),selectedSignal:f(e)}))}c&&(g.value={nodeSelections:d})})}),x(()=>{let a=[];for(let{domNode:b,selectedSignal:c}of g.value.nodeSelections.values())a.push(x(()=>{let a=b.value;a&&(c.value?(0,e.addClassNamesToElement)(a,i):(0,e.removeClassNamesFromElement)(a,i))}));return(0,e.mergeRegister)(...a)}))}}),(0,d.defineExtension)({build:(a,b,c)=>y(b),config:(0,d.safeCast)({disabled:!1,maxIndent:null}),name:"@lexical/extension/TabIndentation",register(a,b,c){let{disabled:f,maxIndent:g}=c.getOutput();return x(()=>{if(!f.value)return(0,e.mergeRegister)(a.registerCommand(d.KEY_TAB_COMMAND,b=>{let c=(0,d.$getSelection)();if(!(0,d.$isRangeSelection)(c))return!1;b.preventDefault();let f=!function(a){let b=a.getNodes();if((0,e.$filter)(b,a=>(0,d.$isBlockElementNode)(a)&&a.canIndent()?a:null).length>0)return!0;let c=a.anchor,f=a.focus,g=f.isBefore(c)?f:c,h=g.getNode(),i=(0,e.$getNearestBlockElementAncestorOrThrow)(h);if(i.canIndent()){let a=i.getKey(),b=(0,d.$createRangeSelection)();if(b.anchor.set(a,0,"element"),b.focus.set(a,0,"element"),(b=(0,d.$normalizeSelection__EXPERIMENTAL)(b)).anchor.is(g))return!0}return!1}(c)?d.INSERT_TAB_COMMAND:b.shiftKey?d.OUTDENT_CONTENT_COMMAND:d.INDENT_CONTENT_COMMAND;return a.dispatchCommand(f,void 0)},d.COMMAND_PRIORITY_EDITOR),a.registerCommand(d.INDENT_CONTENT_COMMAND,()=>{let a="number"==typeof g?g:g?g.peek():null;if(null==a)return!1;let b=(0,d.$getSelection)();return!!(0,d.$isRangeSelection)(b)&&Math.max(...b.getNodes().map(a=>(0,e.$getNearestBlockElementAncestorOrThrow)(a).getIndent()))+1>=a},d.COMMAND_PRIORITY_CRITICAL))})}}),a.s(["LexicalBuilder",()=>N,"batch",()=>h,"effect",()=>x,"getPeerDependencyFromEditor",()=>O,"namedSignals",()=>y])},946136,914114,785369,608422,434877,a=>{"use strict";var b=a.i(57843);let c=(0,b.createContext)(null);function d(a,b){let c=null;return null!=a&&(c=a[1]),{getTheme:function(){return null!=b?b:null!=c?c.getTheme():null}}}function e(){let a=(0,b.useContext)(c);return null==a&&function(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let a of(d.append("code",8),b))d.append("v",a);throw c.search=d.toString(),Error(`Minified Lexical error #8; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0),a}a.s(["LexicalComposerContext",()=>c,"createLexicalComposerContext",()=>d,"useLexicalComposerContext",()=>e],914114);var f=a.i(928479),g=a.i(608061);let h=b.useEffect,i={tag:f.HISTORY_MERGE_TAG};function j({initialConfig:a,children:e}){let j=(0,b.useMemo)(()=>{let{theme:b,namespace:c,nodes:e,onError:g,editorState:h,html:j}=a,k=d(null,b),l=(0,f.createEditor)({editable:a.editable,html:j,namespace:c,nodes:e,onError:a=>g(a,l),theme:b});return function(a,b){if(null!==b){if(void 0===b)a.update(()=>{let a=(0,f.$getRoot)();if(a.isEmpty()){let b=(0,f.$createParagraphNode)();a.append(b),null!==(0,f.$getSelection)()&&b.select()}},i);else if(null!==b)switch(typeof b){case"string":{let c=a.parseEditorState(b);a.setEditorState(c,i);break}case"object":a.setEditorState(b,i);break;case"function":a.update(()=>{(0,f.$getRoot)().isEmpty()&&b(a)},i)}}}(l,h),[l,k]},[]);return h(()=>{let b=a.editable,[c]=j;c.setEditable(void 0===b||b)},[]),(0,g.jsx)(c.Provider,{value:j,children:e})}function k(a){return()=>(function(a){if(!function(a,b=!0){if(a)return!1;let c=(0,f.$getRoot)().getTextContent();return b&&(c=c.trim()),""===c}(a,!1))return!1;let b=(0,f.$getRoot)().getChildren(),c=b.length;if(c>1)return!1;for(let a=0;a<c;a++){let c=b[a];if((0,f.$isDecoratorNode)(c))return!1;if((0,f.$isElementNode)(c)){if(!(0,f.$isParagraphNode)(c)||0!==c.__indent)return!1;let b=c.getChildren(),d=b.length;for(let c=0;c<d;c++){let c=b[a];if(!(0,f.$isTextNode)(c))return!1}}}return!0})(a)}a.s(["LexicalComposer",()=>j],946136),a.s(["$canShowPlaceholderCurry",()=>k],785369);var l=a.i(560847);let m=b.useEffect,n=(0,b.forwardRef)(function({editor:a,ariaActiveDescendant:c,ariaAutoComplete:d,ariaControls:e,ariaDescribedBy:f,ariaErrorMessage:h,ariaExpanded:i,ariaInvalid:j,ariaLabel:k,ariaLabelledBy:l,ariaMultiline:n,ariaOwns:o,ariaRequired:p,autoCapitalize:q,className:r,id:s,role:t="textbox",spellCheck:u=!0,style:v,tabIndex:w,"data-testid":x,...y},z){let[A,B]=(0,b.useState)(a.isEditable()),C=(0,b.useCallback)(b=>{b&&b.ownerDocument&&b.ownerDocument.defaultView?a.setRootElement(b):a.setRootElement(null)},[a]),D=(0,b.useMemo)(()=>(function(...a){return b=>{for(let c of a)"function"==typeof c?c(b):null!=c&&(c.current=b)}})(z,C),[C,z]);return m(()=>(B(a.isEditable()),a.registerEditableListener(a=>{B(a)})),[a]),(0,g.jsx)("div",{"aria-activedescendant":A?c:void 0,"aria-autocomplete":A?d:"none","aria-controls":A?e:void 0,"aria-describedby":f,...null!=h?{"aria-errormessage":h}:{},"aria-expanded":A&&"combobox"===t?!!i:void 0,...null!=j?{"aria-invalid":j}:{},"aria-label":k,"aria-labelledby":l,"aria-multiline":n,"aria-owns":A?o:void 0,"aria-readonly":!A||void 0,"aria-required":p,autoCapitalize:q,className:r,contentEditable:A,"data-testid":x,id:s,ref:D,role:t,spellCheck:u,style:v,tabIndex:w,...y})});function o(a){return a.getEditorState().read(k(a.isComposing()))}let p=(0,b.forwardRef)(function(a,b){let{placeholder:c,...d}=a,[f]=e();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(n,{editor:f,...d,ref:b}),null!=c&&(0,g.jsx)(q,{editor:f,content:c})]})});function q({content:a,editor:c}){let d=function(a){let[c,d]=(0,b.useState)(()=>o(a));return m(()=>{function b(){d(o(a))}return b(),(0,l.mergeRegister)(a.registerUpdateListener(()=>{b()}),a.registerEditableListener(()=>{b()}))},[a]),c}(c),[e,f]=(0,b.useState)(c.isEditable());if((0,b.useLayoutEffect)(()=>(f(c.isEditable()),c.registerEditableListener(a=>{f(a)})),[c]),!d)return null;let h=null;return"function"==typeof a?h=a(e):null!==a&&(h=a),null===h?null:(0,g.jsx)("div",{"aria-hidden":!0,children:h})}a.s(["ContentEditable",()=>p],608422);var r=b;let s=(0,r.createContext)(null),t={didCatch:!1,error:null};class u extends r.Component{constructor(a){super(a),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=t}static getDerivedStateFromError(a){return{didCatch:!0,error:a}}resetErrorBoundary(...a){let{error:b}=this.state;null!==b&&(this.props.onReset?.({args:a,reason:"imperative-api"}),this.setState(t))}componentDidCatch(a,b){this.props.onError?.(a,b)}componentDidUpdate(a,b){let{didCatch:c}=this.state,{resetKeys:d}=this.props;c&&null!==b.error&&function(a=[],b=[]){return a.length!==b.length||a.some((a,c)=>!Object.is(a,b[c]))}(a.resetKeys,d)&&(this.props.onReset?.({next:d,prev:a.resetKeys,reason:"keys"}),this.setState(t))}render(){let{children:a,fallbackRender:b,FallbackComponent:c,fallback:d}=this.props,{didCatch:e,error:f}=this.state,g=a;if(e){let a={error:f,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof b)g=b(a);else if(c)g=(0,r.createElement)(c,a);else if(void 0!==d)g=d;else throw f}return(0,r.createElement)(s.Provider,{value:{didCatch:e,error:f,resetErrorBoundary:this.resetErrorBoundary}},g)}}function v({children:a,onError:b}){return(0,g.jsx)(u,{fallback:(0,g.jsx)("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:b,children:a})}a.s(["LexicalErrorBoundary",()=>v],434877)},971707,563268,336822,a=>{"use strict";var b=a.i(914114),c=a.i(696045),d=a.i(560847),e=a.i(928479);function f(a){a.undoStack=[],a.redoStack=[],a.current=null}function g(a,b,c){let g,h,i=(g=Date.now(),h=0,(b,d,f,i,j,k)=>{let l=Date.now();if(k.has(e.HISTORIC_TAG))return h=0,g=l,2;let m=function(a,b,c,d,f){if(null===a||0===c.size&&0===d.size&&!f)return 0;let g=b._selection,h=a._selection;if(f)return 1;if(!((0,e.$isRangeSelection)(g)&&(0,e.$isRangeSelection)(h)&&h.isCollapsed()&&g.isCollapsed()))return 0;let i=function(a,b,c){let d=a._nodeMap,f=[];for(let a of b){let b=d.get(a);void 0!==b&&f.push(b)}for(let[a,b]of c){if(!b)continue;let c=d.get(a);void 0===c||(0,e.$isRootNode)(c)||f.push(c)}return f}(b,c,d);if(0===i.length)return 0;if(i.length>1){let c=b._nodeMap,d=c.get(g.anchor.key),f=c.get(h.anchor.key);return d&&f&&!a._nodeMap.has(d.__key)&&(0,e.$isTextNode)(d)&&1===d.__text.length&&1===g.anchor.offset?2:0}let j=i[0],k=a._nodeMap.get(j.__key);if(!(0,e.$isTextNode)(k)||!(0,e.$isTextNode)(j)||k.__mode!==j.__mode)return 0;let l=k.__text,m=j.__text;if(l===m)return 0;let n=g.anchor,o=h.anchor;if(n.key!==o.key||"text"!==n.type)return 0;let p=n.offset,q=o.offset,r=m.length-l.length;return 1===r&&q===p-1?2:-1===r&&q===p+1?3:4*(-1===r&&q===p)}(b,d,i,j,a.isComposing()),n=(()=>{var n;let o,p,q,r,s=null===f||f.editor===a,t=k.has(e.HISTORY_PUSH_TAG);if(!t&&s&&k.has(e.HISTORY_MERGE_TAG))return 0;if(null===b)return 1;let u=d._selection;if(!(i.size>0||j.size>0))return 2*(null===u);let v="number"==typeof c?c:c.peek();return!1===t&&0!==m&&m===h&&l<g+v&&s?0:1!==i.size||(n=Array.from(i)[0],o=b._nodeMap.get(n),p=d._nodeMap.get(n),q=b._selection,r=d._selection,(0,e.$isRangeSelection)(q)&&(0,e.$isRangeSelection)(r)&&"element"===q.anchor.type&&"element"===q.focus.type&&"text"===r.anchor.type&&"text"===r.focus.type||!(0,e.$isTextNode)(o)||!(0,e.$isTextNode)(p)||o.__parent!==p.__parent||JSON.stringify(b.read(()=>o.exportJSON()))!==JSON.stringify(d.read(()=>p.exportJSON())))?1:0})();return g=l,h=m,n});return(0,d.mergeRegister)(a.registerCommand(e.UNDO_COMMAND,()=>((function(a,b){let c=b.redoStack,d=b.undoStack;if(0!==d.length){let f=b.current,g=d.pop();null!==f&&(c.push(f),a.dispatchCommand(e.CAN_REDO_COMMAND,!0)),0===d.length&&a.dispatchCommand(e.CAN_UNDO_COMMAND,!1),b.current=g||null,g&&g.editor.setEditorState(g.editorState,{tag:e.HISTORIC_TAG})}})(a,b),!0),e.COMMAND_PRIORITY_EDITOR),a.registerCommand(e.REDO_COMMAND,()=>((function(a,b){let c=b.redoStack,d=b.undoStack;if(0!==c.length){let f=b.current;null!==f&&(d.push(f),a.dispatchCommand(e.CAN_UNDO_COMMAND,!0));let g=c.pop();0===c.length&&a.dispatchCommand(e.CAN_REDO_COMMAND,!1),b.current=g||null,g&&g.editor.setEditorState(g.editorState,{tag:e.HISTORIC_TAG})}})(a,b),!0),e.COMMAND_PRIORITY_EDITOR),a.registerCommand(e.CLEAR_EDITOR_COMMAND,()=>(f(b),!1),e.COMMAND_PRIORITY_EDITOR),a.registerCommand(e.CLEAR_HISTORY_COMMAND,()=>(f(b),a.dispatchCommand(e.CAN_REDO_COMMAND,!1),a.dispatchCommand(e.CAN_UNDO_COMMAND,!1),!0),e.COMMAND_PRIORITY_EDITOR),a.registerUpdateListener(({editorState:c,prevEditorState:d,dirtyLeaves:f,dirtyElements:g,tags:h})=>{let j=b.current,k=b.redoStack,l=b.undoStack,m=null===j?null:j.editorState;if(null!==j&&c===m)return;let n=i(d,c,j,f,g,h);if(1===n)0!==k.length&&(b.redoStack=[],a.dispatchCommand(e.CAN_REDO_COMMAND,!1)),null!==j&&(l.push({...j}),a.dispatchCommand(e.CAN_UNDO_COMMAND,!0));else if(2===n)return;b.current={editor:a,editorState:c}}))}function h(){return{current:null,redoStack:[],undoStack:[]}}let i=(0,e.defineExtension)({build:(a,{delay:b,createInitialHistoryState:d,disabled:e})=>(0,c.namedSignals)({delay:b,disabled:e,historyState:d(a)}),config:(0,e.safeCast)({createInitialHistoryState:h,delay:300,disabled:!0}),name:"@lexical/history/History",register:(a,b,d)=>{let e=d.getOutput();return(0,c.effect)(()=>e.disabled.value?void 0:g(a,e.historyState.value,e.delay))}});(0,e.defineExtension)({dependencies:[(0,e.configExtension)(i,{createInitialHistoryState:()=>{throw Error("SharedHistory did not inherit parent history")},disabled:!0})],name:"@lexical/history/SharedHistory",register(a,b,d){var e;let{output:f}=d.getDependency(i),g=(e=a._parentEditor)?(0,c.getPeerDependencyFromEditor)(e,i.name):null;if(!g)return()=>{};let h=g.output;return(0,c.effect)(()=>(0,c.batch)(()=>{f.delay.value=h.delay.value,f.historyState.value=h.historyState.value,f.disabled.value=h.disabled.value}))}});var j=a.i(57843);function k({delay:a,externalHistoryState:c}){let[d]=(0,b.useLexicalComposerContext)();return function(a,b,c=1e3){let d=(0,j.useMemo)(()=>b||h(),[b]);(0,j.useEffect)(()=>g(a,d,c),[c,a,d])}(d,c,a),null}a.s(["HistoryPlugin",()=>k],971707);let l=j.useEffect;function m({ignoreHistoryMergeTagChange:a=!0,ignoreSelectionChange:c=!1,onChange:d}){let[f]=(0,b.useLexicalComposerContext)();return l(()=>{if(d)return f.registerUpdateListener(({editorState:b,dirtyElements:g,dirtyLeaves:h,prevEditorState:i,tags:j})=>{c&&0===g.size&&0===h.size||a&&j.has(e.HISTORY_MERGE_TAG)||i.isEmpty()||d(b,f,j)})},[f,a,c,d]),null}a.s(["OnChangePlugin",()=>m],563268);let n=j.useEffect;function o(a){return{initialValueFn:()=>a.isEditable(),subscribe:b=>a.registerEditableListener(b)}}let p=(0,e.defineExtension)({name:"@lexical/react/ReactProvider"});var q=a.i(555237),r=a.i(608061),s=a.i(785369);function t(a){let b=window.location.origin,c=c=>{if(c.origin!==b)return;let d=a.getRootElement();if(document.activeElement!==d)return;let f=c.data;if("string"==typeof f){let b;try{b=JSON.parse(f)}catch(a){return}if(b&&"nuanria_messaging"===b.protocol&&"request"===b.type){let d=b.payload;if(d&&"makeChanges"===d.functionId){let b=d.args;if(b){let[d,f,g,h,i]=b;a.update(()=>{let a=(0,e.$getSelection)();if((0,e.$isRangeSelection)(a)){let b=a.anchor,j=b.getNode(),k=0,l=0;if((0,e.$isTextNode)(j)&&d>=0&&f>=0&&(k=d,l=d+f,a.setTextNodeRange(j,k,j,l)),k===l&&""===g||(a.insertRawText(g),j=b.getNode()),(0,e.$isTextNode)(j)){k=h,l=h+i;let b=j.getTextContentSize();k=k>b?b:k,l=l>b?b:l,a.setTextNodeRange(j,k,j,l)}c.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",c,!0),()=>{window.removeEventListener("message",c,!0)}}let u=(0,e.defineExtension)({build:(a,b,d)=>(0,c.namedSignals)(b),config:(0,e.safeCast)({disabled:!0}),name:"@lexical/dragon",register:(a,b,d)=>(0,c.effect)(()=>d.getOutput().disabled.value?void 0:t(a))});var v=a.i(585818);let w=new Set(["STYLE","SCRIPT"]);function x(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let c of(d.append("code",a),b))d.append("v",c);throw c.search=d.toString(),Error(`Minified Lexical error #${a}; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function y(a,b,c){let d=a.getData("application/x-lexical-editor");if(d)try{let a=JSON.parse(d);if(a.namespace===c._config.namespace&&Array.isArray(a.nodes))return z(c,function(a){let b=[];for(let c=0;c<a.length;c++){let d=a[c],f=(0,e.$parseSerializedNode)(d);(0,e.$isTextNode)(f)&&(0,v.$addNodeStyle)(f),b.push(f)}return b}(a.nodes),b)}catch(a){console.error(a)}let f=a.getData("text/html"),g=a.getData("text/plain");if(f&&g!==f)try{let a=(new DOMParser).parseFromString(window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:a=>a}).createHTML(f):f,"text/html");return z(c,function(a,b){let c=(0,e.isDOMDocumentNode)(b)?b.body.childNodes:b.childNodes,d=[],f=[];for(let b of c)if(!w.has(b.nodeName)){let c=function a(b,c,d,f,g=new Map,h){let i=[];if(w.has(b.nodeName))return i;let j=null,k=function(a,b){let{nodeName:c}=a,d=b._htmlConversions.get(c.toLowerCase()),e=null;if(void 0!==d)for(let b of d){let c=b(a);null!==c&&(null===e||(e.priority||0)<=(c.priority||0))&&(e=c)}return null!==e?e.conversion:null}(b,c),l=k?k(b):null,m=null;if(null!==l){m=l.after;let a=l.node;if(null!==(j=Array.isArray(a)?a[a.length-1]:a)){for(let[,a]of g)if(!(j=a(j,h)))break;j&&i.push(...Array.isArray(a)?a:[j])}null!=l.forChild&&g.set(b.nodeName,l.forChild)}let n=b.childNodes,o=[],p=(null==j||!(0,e.$isRootOrShadowRoot)(j))&&(null!=j&&(0,e.$isBlockElementNode)(j)||f);for(let b=0;b<n.length;b++)o.push(...a(n[b],c,d,p,new Map(g),j));return null!=m&&(o=m(o)),(0,e.isBlockDomNode)(b)&&(o=function(a,b,c){let d=a.style.textAlign,f=[],g=[];for(let a=0;a<b.length;a++){let h=b[a];if((0,e.$isBlockElementNode)(h))d&&!h.getFormat()&&h.setFormat(d),f.push(h);else if(g.push(h),a===b.length-1||a<b.length-1&&(0,e.$isBlockElementNode)(b[a+1])){let a=c();a.setFormat(d),a.append(...g),f.push(a),g=[]}}return f}(b,o,p?()=>{let a=new e.ArtificialNode__DO_NOT_USE;return d.push(a),a}:e.$createParagraphNode)),null==j?o.length>0?i=i.concat(o):(0,e.isBlockDomNode)(b)&&null!=b.nextSibling&&null!=b.previousSibling&&(0,e.isInlineDomNode)(b.nextSibling)&&(0,e.isInlineDomNode)(b.previousSibling)&&(i=i.concat((0,e.$createLineBreakNode)())):(0,e.$isElementNode)(j)&&j.append(...o),i}(b,a,f,!1);null!==c&&(d=d.concat(c))}return function(a){for(let b of a)b.getNextSibling()instanceof e.ArtificialNode__DO_NOT_USE&&b.insertAfter((0,e.$createLineBreakNode)());for(let b of a){for(let a of b.getChildren())b.insertBefore(a);b.remove()}}(f),d}(c,a),b)}catch(a){console.error(a)}let h=g||a.getData("text/uri-list");if(null!=h)if((0,e.$isRangeSelection)(b)){let a=h.split(/(\r?\n|\t)/);""===a[a.length-1]&&a.pop();for(let b=0;b<a.length;b++){let c=(0,e.$getSelection)();if((0,e.$isRangeSelection)(c)){let d=a[b];"\n"===d||"\r\n"===d?c.insertParagraph():"	"===d?c.insertNodes([(0,e.$createTabNode)()]):c.insertText(d)}}}else b.insertRawText(h)}function z(a,b,c){a.dispatchCommand(e.SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,{nodes:b,selection:c})||(c.insertNodes(b),function(a){if((0,e.$isRangeSelection)(a)&&a.isCollapsed()){let b=a.anchor,c=null,d=(0,e.$caretFromPoint)(b,"previous");if(d)if((0,e.$isTextPointCaret)(d))c=d.origin;else for(let a of(0,e.$getCaretRange)(d,(0,e.$getChildCaret)((0,e.$getRoot)(),"next").getFlipped())){if((0,e.$isTextNode)(a.origin)){c=a.origin;break}if((0,e.$isElementNode)(a.origin)&&!a.origin.isInline())break}if(c&&(0,e.$isTextNode)(c)){let b=c.getFormat(),d=c.getStyle();a.format===b&&a.style===d||(a.format=b,a.style=d,a.dirty=!0)}}}(c))}let A=null;async function B(a,b,c){if(null!==A)return!1;if(null!==b)return new Promise((d,e)=>{a.update(()=>{d(C(a,b,c))})});let f=a.getRootElement(),g=a._window||window,h=g.document,i=(0,e.getDOMSelection)(g);if(null===f||null===i)return!1;let j=h.createElement("span");j.style.cssText="position: fixed; top: -1000px;",j.append(h.createTextNode("#")),f.append(j);let k=new Range;return k.setStart(j,0),k.setEnd(j,1),i.removeAllRanges(),i.addRange(k),new Promise((b,f)=>{let i=a.registerCommand(e.COPY_COMMAND,e=>((0,d.objectKlassEquals)(e,ClipboardEvent)&&(i(),null!==A&&(g.clearTimeout(A),A=null),b(C(a,e,c))),!0),e.COMMAND_PRIORITY_CRITICAL);A=g.setTimeout(()=>{i(),A=null,b(!1)},50),h.execCommand("copy"),j.remove()})}function C(a,b,c){if(void 0===c){let b=(0,e.getDOMSelection)(a._window),d=(0,e.$getSelection)();if(!d||d.isCollapsed()||!b)return!1;let f=b.anchorNode,g=b.focusNode;if(null!==f&&null!==g&&!(0,e.isSelectionWithinEditor)(a,f,g))return!1;c=function(a=(0,e.$getSelection)()){let b={"text/plain":a?a.getTextContent():""};if(a){let c=(0,e.$getEditor)();for(let[d,e]of D){let f=e(c,a);null!==f&&(b[d]=f)}}return b}(d)}b.preventDefault();let d=b.clipboardData;return null!==d&&(function(a,b){for(let[c]of D)void 0===b[c]&&a.setData(c,"");for(let c in b){let d=b[c];void 0!==d&&a.setData(c,d)}}(d,c),!0)}let D=[["text/html",function(b,c=(0,e.$getSelection)()){return null==c&&x(166),(0,e.$isRangeSelection)(c)&&c.isCollapsed()||0===c.getNodes().length?"":function(b,c){if("u"<typeof document||void 0===a.g.window)throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let d=document.createElement("div"),f=(0,e.$getRoot)().getChildren();for(let a=0;a<f.length;a++)!function a(b,c,d,f=null){let g=null===f||c.isSelected(f),h=(0,e.$isElementNode)(c)&&c.excludeFromCopy("html"),i=c;null!==f&&(0,e.$isTextNode)(c)&&(i=(0,v.$sliceSelectedTextNodeContent)(f,c,"clone"));let j=(0,e.$isElementNode)(i)?i.getChildren():[],k=(0,e.getRegisteredNode)(b,i.getType()),{element:l,after:m}=k&&void 0!==k.exportDOM?k.exportDOM(b,i):i.exportDOM(b);if(!l)return!1;let n=document.createDocumentFragment();for(let d=0;d<j.length;d++){let h=j[d],i=a(b,h,n,f);!g&&(0,e.$isElementNode)(c)&&i&&c.extractWithChild(h,f,"html")&&(g=!0)}if(g&&!h){if(((0,e.isHTMLElement)(l)||(0,e.isDocumentFragment)(l))&&l.append(n),d.append(l),m){let a=m.call(i,l);a&&((0,e.isDocumentFragment)(l)?l.replaceChildren(a):l.replaceWith(a))}}else d.append(n);return g}(b,f[a],d,c);return d.innerHTML}(b,c)}],["application/x-lexical-editor",function(a,b=(0,e.$getSelection)()){return null==b&&x(166),(0,e.$isRangeSelection)(b)&&b.isCollapsed()||0===b.getNodes().length?null:JSON.stringify(function(a,b){let c=[],d=(0,e.$getRoot)().getChildren();for(let f=0;f<d.length;f++)!function a(b,c,d,f=[]){var g;let h,i,j=null===c||d.isSelected(c),k=(0,e.$isElementNode)(d)&&d.excludeFromCopy("html"),l=d;null!==c&&(0,e.$isTextNode)(l)&&(l=(0,v.$sliceSelectedTextNodeContent)(c,l,"clone"));let m=(0,e.$isElementNode)(l)?l.getChildren():[],n=(h=(g=l).exportJSON(),i=g.constructor,h.type!==i.getType()&&x(58,i.name),(0,e.$isElementNode)(g)&&(Array.isArray(h.children)||x(59,i.name)),h);(0,e.$isTextNode)(l)&&0===l.getTextContentSize()&&(j=!1);for(let f=0;f<m.length;f++){let g=m[f],h=a(b,c,g,n.children);!j&&(0,e.$isElementNode)(d)&&h&&d.extractWithChild(g,c,"clone")&&(j=!0)}if(j&&!k)f.push(n);else if(Array.isArray(n.children))for(let a=0;a<n.children.length;a++){let b=n.children[a];f.push(b)}return j}(a,b,d[f],c);return{namespace:a._config.namespace,nodes:c}}(a,b))}]];var E=e;function F(a,b){if(void 0!==document.caretRangeFromPoint){let c=document.caretRangeFromPoint(a,b);return null===c?null:{node:c.startContainer,offset:c.startOffset}}if("undefined"!==document.caretPositionFromPoint){let c=document.caretPositionFromPoint(a,b);return null===c?null:{node:c.offsetNode,offset:c.offset}}return null}let G=(0,E.createCommand)("DRAG_DROP_PASTE_FILE");class H extends E.ElementNode{static getType(){return"quote"}static clone(a){return new H(a.__key)}createDOM(a){let b=document.createElement("blockquote");return(0,d.addClassNamesToElement)(b,a.theme.quote),b}updateDOM(a,b){return!1}static importDOM(){return{blockquote:a=>({conversion:M,priority:0})}}exportDOM(a){let{element:b}=super.exportDOM(a);if((0,E.isHTMLElement)(b)){this.isEmpty()&&b.append(document.createElement("br"));let a=this.getFormatType();a&&(b.style.textAlign=a);let c=this.getDirection();c&&(b.dir=c)}return{element:b}}static importJSON(a){return I().updateFromJSON(a)}insertNewAfter(a,b){let c=(0,E.$createParagraphNode)(),d=this.getDirection();return c.setDirection(d),this.insertAfter(c,b),c}collapseAtStart(){let a=(0,E.$createParagraphNode)();return this.getChildren().forEach(b=>a.append(b)),this.replace(a),!0}canMergeWhenEmpty(){return!0}}function I(){return(0,E.$applyNodeReplacement)(new H)}class J extends E.ElementNode{__tag;static getType(){return"heading"}static clone(a){return new J(a.__tag,a.__key)}constructor(a,b){super(b),this.__tag=a}getTag(){return this.__tag}setTag(a){let b=this.getWritable();return this.__tag=a,b}createDOM(a){let b=this.__tag,c=document.createElement(b),e=a.theme.heading;if(void 0!==e){let a=e[b];(0,d.addClassNamesToElement)(c,a)}return c}updateDOM(a,b,c){return a.__tag!==this.__tag}static importDOM(){return{h1:a=>({conversion:L,priority:0}),h2:a=>({conversion:L,priority:0}),h3:a=>({conversion:L,priority:0}),h4:a=>({conversion:L,priority:0}),h5:a=>({conversion:L,priority:0}),h6:a=>({conversion:L,priority:0}),p:a=>{let b=a.firstChild;return null!==b&&K(b)?{conversion:()=>({node:null}),priority:3}:null},span:a=>K(a)?{conversion:a=>({node:N("h1")}),priority:3}:null}}exportDOM(a){let{element:b}=super.exportDOM(a);if((0,E.isHTMLElement)(b)){this.isEmpty()&&b.append(document.createElement("br"));let a=this.getFormatType();a&&(b.style.textAlign=a);let c=this.getDirection();c&&(b.dir=c)}return{element:b}}static importJSON(a){return N(a.tag).updateFromJSON(a)}updateFromJSON(a){return super.updateFromJSON(a).setTag(a.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(a,b=!0){let c=a?a.anchor.offset:0,d=this.getLastDescendant(),e=d&&(!a||a.anchor.key!==d.getKey()||c!==d.getTextContentSize())&&a?N(this.getTag()):(0,E.$createParagraphNode)(),f=this.getDirection();if(e.setDirection(f),this.insertAfter(e,b),0===c&&!this.isEmpty()&&a){let a=(0,E.$createParagraphNode)();a.select(),this.replace(a,!0)}return e}collapseAtStart(){let a=this.isEmpty()?(0,E.$createParagraphNode)():N(this.getTag());return this.getChildren().forEach(b=>a.append(b)),this.replace(a),!0}extractWithChild(){return!0}}function K(a){return"span"===a.nodeName.toLowerCase()&&"26pt"===a.style.fontSize}function L(a){let b=a.nodeName.toLowerCase(),c=null;return"h1"!==b&&"h2"!==b&&"h3"!==b&&"h4"!==b&&"h5"!==b&&"h6"!==b||(c=N(b),null!==a.style&&((0,E.setNodeIndentFromDOM)(a,c),c.setFormat(a.style.textAlign))),{node:c}}function M(a){let b=I();return null!==a.style&&(b.setFormat(a.style.textAlign),(0,E.setNodeIndentFromDOM)(a,b)),{node:b}}function N(a="h1"){return(0,E.$applyNodeReplacement)(new J(a))}function O(a){let b=null;if((0,d.objectKlassEquals)(a,DragEvent)?b=a.dataTransfer:(0,d.objectKlassEquals)(a,ClipboardEvent)&&(b=a.clipboardData),null===b)return[!1,[],!1];let c=b.types,e=c.includes("Files"),f=c.includes("text/html")||c.includes("text/plain");return[e,Array.from(b.files),f]}function P(a){let b=(0,E.$getSelection)();if(!(0,E.$isRangeSelection)(b))return!1;let c=new Set,d=b.getNodes();for(let b=0;b<d.length;b++){let e=d[b],f=e.getKey();if(c.has(f))continue;let g=(0,E.$findMatchingParent)(e,a=>(0,E.$isElementNode)(a)&&!a.isInline());if(null===g)continue;let h=g.getKey();g.canIndent()&&!c.has(h)&&(c.add(h),a(g))}return c.size>0}function Q(a){let b=(0,E.$getNearestNodeFromDOMNode)(a);return(0,E.$isDecoratorNode)(b)}function R(a){for(let b of["lowercase","uppercase","capitalize"])a.hasFormat(b)&&a.toggleFormat(b)}function S(a){return(0,d.mergeRegister)(a.registerCommand(E.CLICK_COMMAND,a=>{let b=(0,E.$getSelection)();return!!(0,E.$isNodeSelection)(b)&&(b.clear(),!0)},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.DELETE_CHARACTER_COMMAND,a=>{let b=(0,E.$getSelection)();return(0,E.$isRangeSelection)(b)?(b.deleteCharacter(a),!0):!!(0,E.$isNodeSelection)(b)&&(b.deleteNodes(),!0)},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.DELETE_WORD_COMMAND,a=>{let b=(0,E.$getSelection)();return!!(0,E.$isRangeSelection)(b)&&(b.deleteWord(a),!0)},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.DELETE_LINE_COMMAND,a=>{let b=(0,E.$getSelection)();return!!(0,E.$isRangeSelection)(b)&&(b.deleteLine(a),!0)},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.CONTROLLED_TEXT_INSERTION_COMMAND,b=>{let c=(0,E.$getSelection)();if("string"==typeof b)null!==c&&c.insertText(b);else{if(null===c)return!1;let d=b.dataTransfer;if(null!=d)y(d,c,a);else if((0,E.$isRangeSelection)(c)){let a=b.data;return a&&c.insertText(a),!0}}return!0},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.REMOVE_TEXT_COMMAND,()=>{let a=(0,E.$getSelection)();return!!(0,E.$isRangeSelection)(a)&&(a.removeText(),!0)},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.FORMAT_TEXT_COMMAND,a=>{let b=(0,E.$getSelection)();return!!(0,E.$isRangeSelection)(b)&&(b.formatText(a),!0)},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.FORMAT_ELEMENT_COMMAND,a=>{let b=(0,E.$getSelection)();if(!(0,E.$isRangeSelection)(b)&&!(0,E.$isNodeSelection)(b))return!1;for(let c of b.getNodes()){let b=(0,E.$findMatchingParent)(c,a=>(0,E.$isElementNode)(a)&&!a.isInline());null!==b&&b.setFormat(a)}return!0},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.INSERT_LINE_BREAK_COMMAND,a=>{let b=(0,E.$getSelection)();return!!(0,E.$isRangeSelection)(b)&&(b.insertLineBreak(a),!0)},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.INSERT_PARAGRAPH_COMMAND,()=>{let a=(0,E.$getSelection)();return!!(0,E.$isRangeSelection)(a)&&(a.insertParagraph(),!0)},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.INSERT_TAB_COMMAND,()=>((0,E.$insertNodes)([(0,E.$createTabNode)()]),!0),E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.INDENT_CONTENT_COMMAND,()=>P(a=>{let b=a.getIndent();a.setIndent(b+1)}),E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.OUTDENT_CONTENT_COMMAND,()=>P(a=>{let b=a.getIndent();b>0&&a.setIndent(Math.max(0,b-1))}),E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.KEY_ARROW_UP_COMMAND,a=>{let b=(0,E.$getSelection)();if((0,E.$isNodeSelection)(b)){let c=b.getNodes();if(c.length>0)return a.preventDefault(),c[0].selectPrevious(),!0}else if((0,E.$isRangeSelection)(b)){let c=(0,E.$getAdjacentNode)(b.focus,!0);if(!a.shiftKey&&(0,E.$isDecoratorNode)(c)&&!c.isIsolated()&&!c.isInline())return c.selectPrevious(),a.preventDefault(),!0}return!1},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.KEY_ARROW_DOWN_COMMAND,a=>{let b=(0,E.$getSelection)();if((0,E.$isNodeSelection)(b)){let c=b.getNodes();if(c.length>0)return a.preventDefault(),c[0].selectNext(0,0),!0}else if((0,E.$isRangeSelection)(b)){let c;if("root"===(c=b.focus).key&&c.offset===(0,E.$getRoot)().getChildrenSize())return a.preventDefault(),!0;let d=(0,E.$getAdjacentNode)(b.focus,!1);if(!a.shiftKey&&(0,E.$isDecoratorNode)(d)&&!d.isIsolated()&&!d.isInline())return d.selectNext(),a.preventDefault(),!0}return!1},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.KEY_ARROW_LEFT_COMMAND,a=>{let b=(0,E.$getSelection)();if((0,E.$isNodeSelection)(b)){let c=b.getNodes();if(c.length>0)return a.preventDefault(),(0,v.$isParentRTL)(c[0])?c[0].selectNext(0,0):c[0].selectPrevious(),!0}if(!(0,E.$isRangeSelection)(b))return!1;if((0,v.$shouldOverrideDefaultCharacterSelection)(b,!0)){let c=a.shiftKey;return a.preventDefault(),(0,v.$moveCharacter)(b,c,!0),!0}return!1},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.KEY_ARROW_RIGHT_COMMAND,a=>{let b=(0,E.$getSelection)();if((0,E.$isNodeSelection)(b)){let c=b.getNodes();if(c.length>0)return a.preventDefault(),(0,v.$isParentRTL)(c[0])?c[0].selectPrevious():c[0].selectNext(0,0),!0}if(!(0,E.$isRangeSelection)(b))return!1;let c=a.shiftKey;return!!(0,v.$shouldOverrideDefaultCharacterSelection)(b,!1)&&(a.preventDefault(),(0,v.$moveCharacter)(b,c,!1),!0)},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.KEY_BACKSPACE_COMMAND,b=>{if(Q(b.target))return!1;let c=(0,E.$getSelection)();if((0,E.$isRangeSelection)(c)){if(function(a){if(!a.isCollapsed())return!1;let{anchor:b}=a;if(0!==b.offset)return!1;let c=b.getNode();if((0,E.$isRootNode)(c))return!1;let e=(0,d.$getNearestBlockElementAncestorOrThrow)(c);return e.getIndent()>0&&(e.is(c)||c.is(e.getFirstDescendant()))}(c))return b.preventDefault(),a.dispatchCommand(E.OUTDENT_CONTENT_COMMAND,void 0)}else if(!(0,E.$isNodeSelection)(c))return!1;return b.preventDefault(),a.dispatchCommand(E.DELETE_CHARACTER_COMMAND,!0)},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.KEY_DELETE_COMMAND,b=>{if(Q(b.target))return!1;let c=(0,E.$getSelection)();return!(!(0,E.$isRangeSelection)(c)&&!(0,E.$isNodeSelection)(c))&&(b.preventDefault(),a.dispatchCommand(E.DELETE_CHARACTER_COMMAND,!1))},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.KEY_ENTER_COMMAND,b=>{let c=(0,E.$getSelection)();return!!(0,E.$isRangeSelection)(c)&&((R(c),null!==b&&(b.preventDefault(),b.shiftKey))?a.dispatchCommand(E.INSERT_LINE_BREAK_COMMAND,!1):a.dispatchCommand(E.INSERT_PARAGRAPH_COMMAND,void 0))},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.KEY_ESCAPE_COMMAND,()=>{let b=(0,E.$getSelection)();return!!(0,E.$isRangeSelection)(b)&&(a.blur(),!0)},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.DROP_COMMAND,b=>{let[,c]=O(b);if(c.length>0){let d=F(b.clientX,b.clientY);if(null!==d){let{offset:b,node:e}=d,f=(0,E.$getNearestNodeFromDOMNode)(e);if(null!==f){let a=(0,E.$createRangeSelection)();if((0,E.$isTextNode)(f))a.anchor.set(f.getKey(),b,"text"),a.focus.set(f.getKey(),b,"text");else{let b=f.getParentOrThrow().getKey(),c=f.getIndexWithinParent()+1;a.anchor.set(b,c,"element"),a.focus.set(b,c,"element")}let c=(0,E.$normalizeSelection__EXPERIMENTAL)(a);(0,E.$setSelection)(c)}a.dispatchCommand(G,c)}return b.preventDefault(),!0}let d=(0,E.$getSelection)();return!!(0,E.$isRangeSelection)(d)},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.DRAGSTART_COMMAND,a=>{let[b]=O(a),c=(0,E.$getSelection)();return!(b&&!(0,E.$isRangeSelection)(c))},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.DRAGOVER_COMMAND,a=>{let[b]=O(a),c=(0,E.$getSelection)();if(b&&!(0,E.$isRangeSelection)(c))return!1;let d=F(a.clientX,a.clientY);if(null!==d){let b=(0,E.$getNearestNodeFromDOMNode)(d.node);(0,E.$isDecoratorNode)(b)&&a.preventDefault()}return!0},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.SELECT_ALL_COMMAND,()=>((0,E.$selectAll)(),!0),E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.COPY_COMMAND,b=>(B(a,(0,d.objectKlassEquals)(b,ClipboardEvent)?b:null),!0),E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.CUT_COMMAND,b=>((async function(a,b){await B(b,(0,d.objectKlassEquals)(a,ClipboardEvent)?a:null),b.update(()=>{let a=(0,E.$getSelection)();(0,E.$isRangeSelection)(a)?a.removeText():(0,E.$isNodeSelection)(a)&&a.getNodes().forEach(a=>a.remove())})})(b,a),!0),E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.PASTE_COMMAND,b=>{let[,c,e]=O(b);return c.length>0&&!e?(a.dispatchCommand(G,c),!0):!((0,E.isDOMNode)(b.target)&&(0,E.isSelectionCapturedInDecoratorInput)(b.target))&&null!==(0,E.$getSelection)()&&(b.preventDefault(),a.update(()=>{let c=(0,E.$getSelection)(),e=(0,d.objectKlassEquals)(b,InputEvent)||(0,d.objectKlassEquals)(b,KeyboardEvent)?null:b.clipboardData;null!=e&&null!==c&&y(e,c,a)},{tag:E.PASTE_TAG}),!0)},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.KEY_SPACE_COMMAND,a=>{let b=(0,E.$getSelection)();return(0,E.$isRangeSelection)(b)&&R(b),!1},E.COMMAND_PRIORITY_EDITOR),a.registerCommand(E.KEY_TAB_COMMAND,a=>{let b=(0,E.$getSelection)();return(0,E.$isRangeSelection)(b)&&R(b),!1},E.COMMAND_PRIORITY_EDITOR))}(0,E.defineExtension)({conflictsWith:["@lexical/plain-text"],dependencies:[u],name:"@lexical/rich-text",nodes:[J,H],register:S});let T=j.useEffect;function U({editor:a,ErrorBoundary:b}){return function(a,b){let[c,d]=(0,j.useState)(()=>a.getDecorators());return T(()=>a.registerDecoratorListener(a=>{(0,q.flushSync)(()=>{d(a)})}),[a]),(0,j.useEffect)(()=>{d(a.getDecorators())},[a]),(0,j.useMemo)(()=>{let d=[],e=Object.keys(c);for(let f=0;f<e.length;f++){let g=e[f],h=(0,r.jsx)(b,{onError:b=>a._onError(b),children:(0,r.jsx)(j.Suspense,{fallback:null,children:c[g]})}),i=a.getElementByKey(g);null!==i&&d.push((0,q.createPortal)(h,i,g))}return d},[b,c,a])}(a,b)}function V({editor:a,ErrorBoundary:b}){return!function(a){let b=c.LexicalBuilder.maybeFromEditor(a);if(b&&b.hasExtensionByName(p.name)){for(let a of["@lexical/plain-text","@lexical/rich-text"])b.hasExtensionByName(a)&&function(a,...b){let c=new URL("https://lexical.dev/docs/error"),d=new URLSearchParams;for(let a of(d.append("code",320),b))d.append("v",a);throw c.search=d.toString(),Error(`Minified Lexical error #320; visit ${c.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(0,a);return!0}return!1}(a)?(0,r.jsx)(U,{editor:a,ErrorBoundary:b}):null}function W(a){return a.getEditorState().read((0,s.$canShowPlaceholderCurry)(a.isComposing()))}function X({contentEditable:a,placeholder:c=null,ErrorBoundary:e}){var f;let[g]=(0,b.useLexicalComposerContext)();return T(()=>(0,d.mergeRegister)(S(f),t(f)),[f=g]),(0,r.jsxs)(r.Fragment,{children:[a,(0,r.jsx)(Y,{content:c}),(0,r.jsx)(V,{editor:g,ErrorBoundary:e})]})}function Y({content:a}){let[c]=(0,b.useLexicalComposerContext)(),e=function(a){let[b,c]=(0,j.useState)(()=>W(a));return T(()=>{function b(){c(W(a))}return b(),(0,d.mergeRegister)(a.registerUpdateListener(()=>{b()}),a.registerEditableListener(()=>{b()}))},[a]),b}(c),f=function(a){let[c]=(0,b.useLexicalComposerContext)(),d=(0,j.useMemo)(()=>a(c),[c,a]),[e,f]=(0,j.useState)(()=>d.initialValueFn()),g=(0,j.useRef)(e);return n(()=>{let{initialValueFn:a,subscribe:b}=d,c=a();return g.current!==c&&(g.current=c,f(c)),b(a=>{g.current=a,f(a)})},[d,a]),e}(o);return e?"function"==typeof a?a(f):a:null}a.s(["RichTextPlugin",()=>X],336822)},951050,a=>{"use strict";var b=a.i(608061),c=a.i(57843);a.i(752298);var d=a.i(693025),e=a.i(527344);let f=(0,c.memo)(({compact:a,value:c,className:f})=>{let{t:g}=(0,d.useTranslation)();return(0,b.jsx)("div",{className:(0,e.cn)("pointer-events-none absolute left-0 top-0 h-full w-full select-none text-sm text-components-input-text-placeholder",a?"text-[13px] leading-5":"text-sm leading-6",f),children:c||g("promptEditor.placeholder",{ns:"common"})})});a.s(["default",0,f])},423201,a=>{"use strict";function b(a,...c){let d=new URL("https://lexical.dev/docs/error"),e=new URLSearchParams;for(let b of(e.append("code",a),c))e.append("v",b);throw d.search=e.toString(),Error(`Minified Lexical error #${a}; visit ${d.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function c(a,...b){let d=new URL("https://lexical.dev/docs/error"),e=new URLSearchParams;for(let c of(e.append("code",a),b))e.append("v",c);d.search=e.toString(),console.warn(`Minified Lexical warning #${a}; visit ${d.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function d(...a){let b=[];for(let c of a)if(c&&"string"==typeof c)for(let[a]of c.matchAll(/\S+/g))b.push(a);return b}let e="֑-߿יִ-﷽ﹰ-ﻼ",f="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",g=(RegExp("^[^"+f+"]*["+e+"]"),RegExp("^[^"+e+"]*["+f+"]"),{bold:1,capitalize:1024,code:16,highlight:128,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512}),h={directionless:1,unmergeable:2},i={center:2,end:6,justify:4,left:1,right:3,start:5},j={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},k={normal:0,segmented:2,token:1},l={0:"normal",2:"segmented",1:"token"},m="$config",n=!1,o=0;function p(a){o=a.timeStamp}function q(a,b,c){let d="BR"===a.nodeName,e=b.__lexicalLineBreak;return e&&(a===e||d&&a.previousSibling===e)||d&&void 0!==cB(a,c)}function r(a,b,c){n=!0;let d=performance.now()-o>100;try{b$(a,()=>{let e=bz()||a.getEditorState().read(()=>{let a=bz();return null!==a?a.clone():null}),f=new Map,g=a.getRootElement(),h=a._editorState,i=a._blockCursorElement,j=!1;for(let c=0;c<b.length;c++){let k=b[c],l=k.type,m=k.target,n=function(a,b,c,d){var e;for(let f=a;f&&(e=f,!0!==e.__lexicalUnmanaged);f=cQ(f)){let a=cB(f,b);if(void 0!==a){let b=cz(a,c);if(b)return b5(b)||!c$(f)?void 0:[f,b]}else if(f===d)return[d,cG(c)]}}(m,a,h,g);if(!n)continue;let[o,p]=n;if("characterData"===l)d&&ba(p)&&cs(m)&&function(a,b,c){if(bk(a)){let b=a.anchor.getNode();if(b.is(c)&&a.format!==b.getFormat())return!1}return cs(b)&&c.isAttached()}(e,m,p)&&function(a,b,c){var d;let e=(d=cU(c),null),f=null,g=null;null!==e&&e.anchorNode===a&&(f=e.anchorOffset,g=e.focusOffset);let h=a.nodeValue;null!==h&&function(a,b,c,d,e){let f=a;if(f.isAttached()&&(e||!f.isDirty())){let g=f.isComposing(),h=b;(g||e)&&"​"===b[b.length-1]&&(h=b.slice(0,-1));let i=f.getTextContent();if(e||h!==i){if(""===h){cx(null),1;{let a=bQ();setTimeout(()=>{a.update(()=>{f.isAttached()&&f.remove()})},20)}return}let b=f.getParent(),e=bA(),i=f.getTextContentSize(),j=cy(),k=f.getKey();if(f.isToken()||null!==j&&k===j&&!g||bk(e)&&(null!==b&&!b.canInsertTextBefore()&&0===e.anchor.offset||e.anchor.key===a.__key&&0===e.anchor.offset&&!f.canInsertTextBefore()&&!g||e.focus.key===a.__key&&e.focus.offset===i&&!f.canInsertTextAfter()&&!g))return f.markDirty();let l=bz();if(!bk(l)||null===c||null===d)return cK(f,h,l);if(l.setTextNodeRange(f,c,f,d),f.isSegmented()){let a=a9(f.getTextContent());f.replace(a),f=a}cK(f,h,l)}}}(b,h,f,g,!1)}(m,p,a);else if("childList"===l){j=!0;let b=k.addedNodes;for(let c=0;c<b.length;c++){let d=b[c],e=cA(d),f=d.parentNode;null==f||d===i||null!==e||q(d,f,a)||f.removeChild(d)}let c=k.removedNodes,d=c.length;if(d>0){let b=0;for(let e=0;e<d;e++){let d=c[e];(q(d,m,a)||i===d)&&(m.appendChild(d),b++)}d!==b&&f.set(o,p)}}}if(f.size>0)for(let[b,c]of f)c.reconcileObservedMutation(b,a);let k=c.takeRecords();if(k.length>0){for(let b=0;b<k.length;b++){let c=k[b],d=c.addedNodes,e=c.target;for(let b=0;b<d.length;b++){let c=d[b],f=c.parentNode;null==f||"BR"!==c.nodeName||q(c,e,a)||f.removeChild(c)}}c.takeRecords()}null!==e&&j&&cH(e)})}finally{n=!1}}function s(a){0===o&&cU(a).addEventListener("textInput",p,!0),a._observer=new MutationObserver((b,c)=>{r(a,b,c)})}class t{node;knownState;unknownState;sharedNodeState;size;constructor(a,b,c,d=new Map,e){this.node=a,this.sharedNodeState=b,this.unknownState=c,this.knownState=d;const{sharedConfigMap:f}=this.sharedNodeState,g=void 0!==e?e:function(a,b,c){let d=c.size;if(b)for(let e in b){let b=a.get(e);b&&c.has(b)||d++}return d}(f,c,d);this.size=g}getValue(a){let b=this.knownState.get(a);if(void 0!==b)return b;this.sharedNodeState.sharedConfigMap.set(a.key,a);let c=a.defaultValue;if(this.unknownState&&a.key in this.unknownState){let b=this.unknownState[a.key];void 0!==b&&(c=a.parse(b)),this.updateFromKnown(a,c)}return c}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){let a={...this.unknownState},b={};for(let[b,c]of this.knownState)b.isEqual(c,b.defaultValue)?delete a[b.key]:a[b.key]=b.unparse(c);for(let c of this.sharedNodeState.flatKeys)c in a&&(b[c]=a[c],delete a[c]);return v(a)&&(b.$=a),b}getWritable(a){if(this.node===a)return this;let{sharedNodeState:b,unknownState:c}=this,d=new Map(this.knownState);return new t(a,b,function(a,b,c){let d;if(c)for(let[e,f]of Object.entries(c)){let c=a.get(e);c?b.has(c)||b.set(c,c.parse(f)):(d=d||{})[e]=f}return d}(b.sharedConfigMap,d,c),d,this.size)}updateFromKnown(a,b){let c=a.key;this.sharedNodeState.sharedConfigMap.set(c,a);let{knownState:d,unknownState:e}=this;d.has(a)||e&&c in e||(e&&(delete e[c],this.unknownState=v(e)),this.size++),d.set(a,b)}updateFromUnknown(a,b){let c=this.sharedNodeState.sharedConfigMap.get(a);c?this.updateFromKnown(c,c.parse(b)):(this.unknownState=this.unknownState||{},a in this.unknownState||this.size++,this.unknownState[a]=b)}updateFromJSON(a){let{knownState:b}=this;for(let a of b.keys())b.set(a,a.defaultValue);if(this.size=b.size,this.unknownState=void 0,a)for(let[b,c]of Object.entries(a))this.updateFromUnknown(b,c)}}function u(a){return a.__state?a.__state.sharedNodeState:ci(bQ(),a.getType()).sharedNodeState}function v(a){if(a)for(let b in a)return a}function w(a,b,c){for(let[d,e]of b.knownState){if(a.has(d.key))continue;a.add(d.key);let b=c?c.getValue(d):d.defaultValue;if(b!==e&&!d.isEqual(b,e))return!0}return!1}function x(a,b,c){let{unknownState:d}=b,e=c?c.unknownState:void 0;if(d){for(let[b,c]of Object.entries(d))if(!a.has(b)&&(a.add(b),c!==(e?e[b]:void 0)))return!0}return!1}function y(a,b){let c=a.__state;return c&&c.node===a?c.getWritable(b):c}function z(a,b){let c=a.__mode,d=a.__format,e=a.__style,f=b.__mode,g=b.__format,h=b.__style,i=a.__state,j=b.__state;return(null===c||c===f)&&(null===d||d===g)&&(null===e||e===h)&&(null===a.__state||i===j||function(a,b){if(a===b)return!0;if(a&&b&&a.size!==b.size)return!1;let c=new Set;return!(a&&w(c,a,b)||b&&w(c,b,a)||a&&x(c,a,b)||b&&x(c,b,a))}(i,j))}function A(a,b){let c=a.mergeWithSibling(b),d=bQ()._normalizedNodes;return d.add(a.__key),d.add(b.__key),c}function B(a){let b,c,d=a;if(""!==d.__text||!d.isSimpleText()||d.isUnmergeable()){for(;null!==(b=d.getPreviousSibling())&&ba(b)&&b.isSimpleText()&&!b.isUnmergeable();){if(""!==b.__text){z(b,d)&&(d=A(b,d));break}b.remove()}for(;null!==(c=d.getNextSibling())&&ba(c)&&c.isSimpleText()&&!c.isUnmergeable();){if(""!==c.__text){z(d,c)&&(d=A(d,c));break}c.remove()}}else d.remove()}function C(a){for(;"element"===a.type;){let b,c,d=a.getNode(),e=a.offset;if(e===d.getChildrenSize()?(b=d.getChildAtIndex(e-1),c=!0):(b=d.getChildAtIndex(e),c=!1),ba(b)){a.set(b.__key,c?b.getTextContentSize():0,"text",!0);break}if(!b2(b))break;a.set(b.__key,c?b.getChildrenSize():0,"element",!0)}}let D,E,F,G,H,I,J,K,L,M,N="",O=null,P=null,Q="",R=!1,S=!1;function T(a,b){let c=J.get(a);if(null!==b){let c=ae(a);c.parentNode===b&&b.removeChild(c)}if(K.has(a)||E._keyToDOMMap.delete(a),b2(c)){let a=ab(c,J);U(a,0,a.length-1,null)}void 0!==c&&cM(M,F,G,c,"destroyed")}function U(a,b,c,d){let e=b;for(;e<=c;++e){let b=a[e];void 0!==b&&T(b,d)}}function V(a,b){a.setProperty("text-align",b)}function W(a,b){let c=D.theme.indent;if("string"==typeof c){let d=a.classList.contains(c);b>0&&!d?a.classList.add(c):b<1&&d&&a.classList.remove(c)}let d=getComputedStyle(a).getPropertyValue("--lexical-indent-base-value")||"40px";a.style.setProperty("padding-inline-start",0===b?"":`calc(${b} * ${d})`)}function X(a,b){let c=a.style;0===b?V(c,""):1===b?V(c,"left"):2===b?V(c,"center"):3===b?V(c,"right"):4===b?V(c,"justify"):5===b?V(c,"start"):6===b&&V(c,"end")}function Y(a,b){let c=function(a){let b=a.__dir;if(null!==b)return b;if(b7(a))return null;let c=a.getParentOrThrow();return b7(c)&&null===c.__dir?"auto":null}(b);null!==c?a.dir=c:a.removeAttribute("dir")}function Z(a,c){var d;let e,f=K.get(a);void 0===f&&b(60);let g=f.createDOM(D,E);if(e=(d=E)._keyToDOMMap,g[`__lexicalKey_${d._key}`]=a,e.set(a,g),ba(f)?g.setAttribute("data-lexical-text","true"):b5(f)&&g.setAttribute("data-lexical-decorator","true"),b2(f)){let a=f.__indent,b=f.__size;Y(g,f),0!==a&&W(g,a),0!==b&&$(ab(f,K),f,0,b-1,f.getDOMSlot(g));let c=f.__format;0!==c&&X(g,c),f.isInline()||aa(null,f,g),cO(f)&&(N+="\n\n",Q+="\n\n")}else{let b=f.getTextContent();if(b5(f)){let b=f.decorate(E,D);null!==b&&ac(a,b),g.contentEditable="false"}N+=b,Q+=b}return null!==c&&c.insertChild(g),cM(M,F,G,f,"created"),g}function $(a,b,c,d,e){let f=N;N="";let g=c;for(;g<=d;++g){Z(a[g],e);let b=K.get(a[g]);null!==b&&ba(b)&&null===O&&(O=b.getFormat(),P=b.getStyle())}cO(b)&&(N+="\n\n"),e.element.__lexicalTextContent=N,N=f+N}function _(a,b){if(a){let c=a.__last;if(c){let a=b.get(c);if(a)return aV(a)?"line-break":b5(a)&&a.isInline()?"decorator":null}return"empty"}return null}function aa(a,b,c){let d=_(a,J),e=_(b,K);d!==e&&b.getDOMSlot(c).setManagedLineBreak(e)}function ab(a,c){let d=[],e=a.__first;for(;null!==e;){let a=c.get(e);void 0===a&&b(101),d.push(e),e=a.__next}return d}function ac(a,b){let c=E._pendingDecorators,d=E._decorators;if(null===c){if(d[a]===b)return;c=cD(E)}c[a]=b}function ad(a){let b=a.nextSibling;return null!==b&&b===E._blockCursorElement&&(b=b.nextSibling),b}function ae(a){let c=L.get(a);return void 0===c&&b(75,a),c}function af(a){return{type:a}}let ag=af("SELECTION_CHANGE_COMMAND"),ah=(af("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),af("CLICK_COMMAND")),ai=af("BEFORE_INPUT_COMMAND"),aj=af("INPUT_COMMAND"),ak=af("COMPOSITION_START_COMMAND"),al=af("COMPOSITION_END_COMMAND"),am=(af("DELETE_CHARACTER_COMMAND"),af("INSERT_LINE_BREAK_COMMAND"),af("INSERT_PARAGRAPH_COMMAND"),af("CONTROLLED_TEXT_INSERTION_COMMAND"),af("PASTE_COMMAND")),an=(af("REMOVE_TEXT_COMMAND"),af("DELETE_WORD_COMMAND"),af("DELETE_LINE_COMMAND"),af("FORMAT_TEXT_COMMAND"),af("UNDO_COMMAND"),af("REDO_COMMAND"),af("KEYDOWN_COMMAND")),ao=(af("KEY_ARROW_RIGHT_COMMAND"),af("MOVE_TO_END"),af("KEY_ARROW_LEFT_COMMAND"),af("MOVE_TO_START"),af("KEY_ARROW_UP_COMMAND"),af("KEY_ARROW_DOWN_COMMAND"),af("KEY_ENTER_COMMAND"),af("KEY_SPACE_COMMAND"),af("KEY_BACKSPACE_COMMAND"),af("KEY_ESCAPE_COMMAND"),af("KEY_DELETE_COMMAND"),af("KEY_TAB_COMMAND"),af("INSERT_TAB_COMMAND"),af("INDENT_CONTENT_COMMAND"),af("OUTDENT_CONTENT_COMMAND"),af("DROP_COMMAND")),ap=(af("FORMAT_ELEMENT_COMMAND"),af("DRAGSTART_COMMAND")),aq=af("DRAGOVER_COMMAND"),ar=af("DRAGEND_COMMAND"),as=af("COPY_COMMAND"),at=af("CUT_COMMAND"),au=(af("SELECT_ALL_COMMAND"),af("CLEAR_EDITOR_COMMAND"),af("CLEAR_HISTORY_COMMAND"),af("CAN_REDO_COMMAND"),af("CAN_UNDO_COMMAND"),af("FOCUS_COMMAND")),av=af("BLUR_COMMAND"),aw=(af("KEY_MODIFIER_COMMAND"),Object.freeze({})),ax=[["keydown",function(a,b){a.timeStamp,a.key,b.isComposing()||cN(b,an,a)}],["pointerdown",function(a,b){let c=a.target,d=a.pointerType;c_(c)&&"touch"!==d&&"pen"!==d&&0===a.button&&b$(b,()=>{b5(cC(c))||(aB=!0)})}],["compositionstart",function(a,b){cN(b,ak,a)}],["compositionend",function(a,b){cN(b,al,a)}],["input",function(a,b){a.stopPropagation(),b$(b,()=>{b.dispatchCommand(aj,a)},{event:a})}],["click",function(a,b){b$(b,()=>{var c;bz(),c=cU(b),bA(),cN(b,ah,a)})}],["cut",aw],["copy",aw],["dragstart",aw],["dragover",aw],["dragend",aw],["paste",aw],["focus",aw],["blur",aw],["drop",aw]];let ay=new WeakMap,az=new WeakMap,aA=!1,aB=!1,aC=null,aD=[0,"",0,"root",0];function aE(a,b){return cs(a)&&null!==a.nodeValue&&0!==b&&b!==a.nodeValue.length}function aF(a,c,d){let{anchorNode:e,anchorOffset:f,focusNode:g,focusOffset:h}=a;aA&&(aA=!1,aE(e,f)&&aE(g,h)&&!aC)||b$(c,()=>{if(!d)return void cH(null);if(!cm(c,e,g))return;let i=bz();if(aC&&bk(i)&&i.isCollapsed()){let a=i.anchor,b=aC.anchor;(a.key===b.key&&a.offset===b.offset+1||1===a.offset&&b.getNode().is(a.getNode().getPreviousSibling()))&&cH(i=aC.clone())}if(aC=null,bk(i)){let d=i.anchor,e=d.getNode();if(i.isCollapsed()){"Range"===a.type&&a.anchorNode===a.focusNode&&(i.dirty=!0);let f=cU(c).event,g=f?f.timeStamp:performance.now(),[h,k,l,m,n]=aD,o=cF(),p=!1===c.isComposing()&&""===o.getTextContent();if(g<n+200&&d.offset===l&&d.key===m)aG(i,h,k);else if("text"===d.type){var j;ba(e)||b(141),aG(i,(j=e).getFormat(),j.getStyle())}else if("element"===d.type&&!p){b2(e)||b(259);let a=d.getNode();a.isEmpty()?aG(i,a.getTextFormat(),a.getTextStyle()):aG(i,0,"")}}else{let a=d.key,b=i.focus.key,c=i.getNodes(),e=c.length,g=i.isBackward(),j=g?h:f,k=g?f:h,l=g?b:a,m=g?a:b,n=2047,o=!1;for(let a=0;a<e;a++){let b=c[a],d=b.getTextContentSize();if(ba(b)&&0!==d&&(0!==a||b.__key!==l||j!==d)&&(a!==e-1||b.__key!==m||0!==k)&&(o=!0,0==(n&=b.getFormat())))break}i.format=o?n:0}}cN(c,ag,void 0)})}function aG(a,b,c){a.format===b&&a.style===c||(a.format=b,a.style=c,a.dirty=!0)}function aH(a){let b=a.__lexicalEventHandles;return void 0===b&&(a.__lexicalEventHandles=b=[]),b}let aI=new Map;function aJ(a){let b,c=(b=cT(a.target))?b.getSelection():null;if(null===c)return;let d=co(c.anchorNode);if(null===d)return;aB&&(aB=!1,b$(d,()=>{let b=bA(),e=c.anchorNode;(c$(e)||cs(e))&&cH(by(b,c,d,a))}));let e=cJ(d),f=e[e.length-1],g=f._key,h=aI.get(g),i=h||f;i!==d&&aF(c,i,!1),aF(c,d,!0),d!==f?aI.set(g,d):h&&aI.delete(g)}function aK(a){a._lexicalHandled=!0}function aL(a){return!0===a._lexicalHandled}let aM=()=>{};function aN(a,b,c){bN();let d=a.__key,e=a.getParent();if(null===e)return;let f=function(a){let b=bz();if(!bk(b)||!b2(a))return b;let{anchor:c,focus:d}=b,e=c.getNode(),f=d.getNode();return cS(e,a)&&c.set(a.__key,0,"element"),cS(f,a)&&d.set(a.__key,0,"element"),b}(a),g=!1;if(bk(f)&&b){let b=f.anchor,c=f.focus;b.key===d&&(bD(b,a,e,a.getPreviousSibling(),a.getNextSibling()),g=!0),c.key===d&&(bD(c,a,e,a.getPreviousSibling(),a.getNextSibling()),g=!0)}else bm(f)&&b&&a.isSelected()&&a.selectPrevious();if(bk(f)&&b&&!g){let b=a.getIndexWithinParent();cv(a),bB(f,e,b,-1)}else cv(a);c||cV(e)||e.canBeEmpty()||!e.isEmpty()||aN(e,b),b&&f&&b7(e)&&e.isEmpty()&&e.selectEnd()}let aO=Symbol.for("ephemeral");function aP(a){return a[aO]||!1}class aQ{__type;__key;__parent;__prev;__next;__state;static getType(){let{ownNodeType:a}=function(a){let c=m in a.prototype?a.prototype[m]():void 0,d=function(a){if(!(a===aQ||a.prototype instanceof aQ)){let c="<unknown>",d="<unknown>";try{c=a.getType()}catch(a){}try{cf.version&&(d=JSON.parse(cf.version))}catch(a){}b(290,a.name,c,d)}return a===b4||a===b1||a===aQ}(a),e=!d&&c5(a,"getType")?a.getType():void 0,f,g=e;if(c)if(e)f=c[e];else for(let[a,b]of Object.entries(c))g=a,f=b;if(!d&&g&&(c5(a,"getType")||(a.getType=()=>g),c5(a,"clone")||(a.clone=b=>(cg=b,new a)),c5(a,"importJSON")||(a.importJSON=f&&f.$importJSON||(b=>(new a).updateFromJSON(b))),!c5(a,"importDOM")&&f)){let{importDOM:b}=f;b&&(a.importDOM=()=>b)}return{ownNodeConfig:f,ownNodeType:g}}(this);return void 0===a&&b(64,this.name),a}static clone(a){b(65,this.name)}$config(){return{}}config(a,b){let c=b.extends||Object.getPrototypeOf(this.constructor);return Object.assign(b,{extends:c,type:a}),{[a]:b}}afterCloneFrom(a){this.__key===a.__key?(this.__parent=a.__parent,this.__next=a.__next,this.__prev=a.__prev,this.__state=a.__state):a.__state&&(this.__state=a.__state.getWritable(this))}static importDOM;constructor(a){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),function(a,b){let c,d=(c=cg,cg=null,c);if(null!=(b=b||d&&d.__key))return a.__key=b;bN(),bO();let e=bQ(),f=bP(),g=""+ch++;f._nodeMap.set(g,a),b2(a)?e._dirtyElements.set(g,!0):e._dirtyLeaves.add(g),e._cloneNotNeeded.add(g),e._dirtyType=1,a.__key=g}(this,a)}getType(){return this.__type}isInline(){b(137,this.constructor.name)}isAttached(){let a=this.__key;for(;null!==a;){if("root"===a)return!0;let b=cz(a);if(null===b)break;a=b.__parent}return!1}isSelected(a){let b=a||bz();if(null==b)return!1;let c=b.getNodes().some(a=>a.__key===this.__key);if(ba(this))return c;if(bk(b)&&"element"===b.anchor.type&&"element"===b.focus.type){if(b.isCollapsed())return!1;let a=this.getParent();if(b5(this)&&this.isInline()&&a){let c=b.isBackward()?b.focus:b.anchor;if(a.is(c.getNode())&&c.offset===a.getChildrenSize()&&this.is(a.getLastChild()))return!1}}return c}getKey(){return this.__key}getIndexWithinParent(){let a=this.getParent();if(null===a)return -1;let b=a.getFirstChild(),c=0;for(;null!==b;){if(this.is(b))return c;c++,b=b.getNextSibling()}return -1}getParent(){let a=this.getLatest().__parent;return null===a?null:cz(a)}getParentOrThrow(){let a=this.getParent();return null===a&&b(66,this.__key),a}getTopLevelElement(){let a=this;for(;null!==a;){let c=a.getParent();if(cV(c))return b2(a)||a===this&&b5(a)||b(194),a;a=c}return null}getTopLevelElementOrThrow(){let a=this.getTopLevelElement();return null===a&&b(67,this.__key),a}getParents(){let a=[],b=this.getParent();for(;null!==b;)a.push(b),b=b.getParent();return a}getParentKeys(){let a=[],b=this.getParent();for(;null!==b;)a.push(b.__key),b=b.getParent();return a}getPreviousSibling(){let a=this.getLatest().__prev;return null===a?null:cz(a)}getPreviousSiblings(){let a=[],b=this.getParent();if(null===b)return a;let c=b.getFirstChild();for(;null!==c&&!c.is(this);)a.push(c),c=c.getNextSibling();return a}getNextSibling(){let a=this.getLatest().__next;return null===a?null:cz(a)}getNextSiblings(){let a=[],b=this.getNextSibling();for(;null!==b;)a.push(b),b=b.getNextSibling();return a}getCommonAncestor(a){let b=b2(this)?this:this.getParent(),c=b2(a)?a:a.getParent(),d=b&&c?dy(b,c):null;return d?d.commonAncestor:null}is(a){return null!=a&&this.__key===a.__key}isBefore(a){let c=dy(this,a);return null!==c&&("descendant"===c.type||("branch"===c.type?-1===dw(c):("same"!==c.type&&"ancestor"!==c.type&&b(279),!1)))}isParentOf(a){let b=dy(this,a);return null!==b&&"ancestor"===b.type}getNodesBetween(a){let c=this.isBefore(a),d=[],e=new Set,f=this;for(;null!==f;){let g=f.__key;if(e.has(g)||(e.add(g),d.push(f)),f===a)break;let h=b2(f)?c?f.getFirstChild():f.getLastChild():null;if(null!==h){f=h;continue}let i=c?f.getNextSibling():f.getPreviousSibling();if(null!==i){f=i;continue}let j=f.getParentOrThrow();if(e.has(j.__key)||d.push(j),j===a)break;let k=null,l=j;do{if(null===l&&b(68),k=c?l.getNextSibling():l.getPreviousSibling(),null===(l=l.getParent()))break;null!==k||e.has(l.__key)||d.push(l)}while(null===k)f=k}return c||d.reverse(),d}isDirty(){let a=bQ()._dirtyLeaves;return null!==a&&a.has(this.__key)}getLatest(){if(aP(this))return this;let a=cz(this.__key);return null===a&&b(113),a}getWritable(){var a;let b;if(aP(this))return this;bN();let c=bP(),d=bQ(),e=c._nodeMap,f=this.__key,g=this.getLatest(),h=d._cloneNotNeeded,i=bz();if(null!==i&&i.setCachedNodes(null),h.has(f))return cw(g),g;let j=((b=(a=g).constructor.clone(a)).afterCloneFrom(a),b);return h.add(f),cw(j),e.set(f,j),j}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(a,c){b(70)}updateDOM(a,c,d){b(71)}exportDOM(a){return{element:this.createDOM(a._config,a)}}exportJSON(){let a=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...a}}static importJSON(a){b(18,this.name)}updateFromJSON(a){return function(a,b){let c,d,e=a.getWritable(),f=b.$,g=f;for(let a of u(e).flatKeys)a in b&&(void 0!==g&&g!==f||(g={...f}),g[a]=b[a]);return(e.__state||g)&&(d=(c=a.getWritable()).__state?c.__state.getWritable(c):new t(c,u(c)),c.__state=d,d).updateFromJSON(g),e}(this,a)}static transform(){return null}remove(a){aN(this,!0,a)}replace(a,c){bN();let d=bz();null!==d&&(d=d.clone()),cX(this,a);let e=this.getLatest(),f=this.__key,g=a.__key,h=a.getWritable(),i=this.getParentOrThrow().getWritable(),j=i.__size;cv(h);let k=e.getPreviousSibling(),l=e.getNextSibling(),m=e.__prev,n=e.__next,o=e.__parent;if((aN(e,!1,!0),null===k)?i.__first=g:k.getWritable().__next=g,(h.__prev=m,null===l)?i.__last=g:l.getWritable().__prev=g,h.__next=n,h.__parent=o,i.__size=j,c&&(b2(this)&&b2(h)||b(139),this.getChildren().forEach(a=>{h.append(a)})),bk(d)){cH(d);let a=d.anchor,b=d.focus;a.key===f&&bi(a,h),b.key===f&&bi(b,h)}return cy()===f&&cx(g),h}insertAfter(a,b=!0){bN(),cX(this,a);let c=this.getWritable(),d=a.getWritable(),e=d.getParent(),f=bz(),g=!1,h=!1;if(null!==e){let b=a.getIndexWithinParent();if(cv(d),bk(f)){let a=e.__key,c=f.anchor,d=f.focus;g="element"===c.type&&c.key===a&&c.offset===b+1,h="element"===d.type&&d.key===a&&d.offset===b+1}}let i=this.getNextSibling(),j=this.getParentOrThrow().getWritable(),k=d.__key,l=c.__next;if(null===i?j.__last=k:i.getWritable().__prev=k,j.__size++,c.__next=k,d.__next=l,d.__prev=c.__key,d.__parent=c.__parent,b&&bk(f)){let a=this.getIndexWithinParent();bB(f,j,a+1);let b=j.__key;g&&f.anchor.set(b,a+2,"element"),h&&f.focus.set(b,a+2,"element")}return a}insertBefore(a,b=!0){bN(),cX(this,a);let c=this.getWritable(),d=a.getWritable(),e=d.__key;cv(d);let f=this.getPreviousSibling(),g=this.getParentOrThrow().getWritable(),h=c.__prev,i=this.getIndexWithinParent();null===f?g.__first=e:f.getWritable().__next=e,g.__size++,c.__prev=e,d.__prev=h,d.__next=c.__key,d.__parent=c.__parent;let j=bz();return b&&bk(j)&&bB(j,this.getParentOrThrow(),i),a}isParentRequired(){return!1}createParentElementNode(){return cd()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(a,b){bN();let c=this.getPreviousSibling(),d=this.getParentOrThrow();if(null===c)return d.select(0,0);if(b2(c))return c.select();if(!ba(c)){let a=c.getIndexWithinParent()+1;return d.select(a,a)}return c.select(a,b)}selectNext(a,b){bN();let c=this.getNextSibling(),d=this.getParentOrThrow();if(null===c)return d.select();if(b2(c))return c.select(0,0);if(!ba(c)){let a=c.getIndexWithinParent();return d.select(a,a)}return c.select(a,b)}markDirty(){this.getWritable()}reconcileObservedMutation(a,b){this.markDirty()}}let aR="history-merge";class aS extends aQ{static getType(){return"linebreak"}static clone(a){return new aS(a.__key)}constructor(a){super(a)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:a=>(function(a){let b=a.parentElement;if(null!==b&&c0(b)){let c=b.firstChild;if(c===a||c.nextSibling===a&&aW(c)){let c=b.lastChild;if(c===a||c.previousSibling===a&&aW(c))return!0}}return!1})(a)||function(a){let b=a.parentElement;if(null!==b&&c0(b)){let c=b.firstChild;if(c===a||c.nextSibling===a&&aW(c))return!1;let d=b.lastChild;if(d===a||d.previousSibling===a&&aW(d))return!0}return!1}(a)?null:{conversion:aT,priority:0}}}static importJSON(a){return aU().updateFromJSON(a)}}function aT(a){return{node:aU()}}function aU(){return cW(new aS)}function aV(a){return a instanceof aS}function aW(a){return cs(a)&&/^( |\t|\r?\n)+$/.test(a.textContent||"")}function aX(a,b){return 16&b?"code":128&b?"mark":32&b?"sub":64&b?"sup":null}function aY(a,b){return 1&b?"strong":2&b?"em":"span"}function aZ(a,b,c,d,e){let f=d.classList,h=cL(e,"base");void 0!==h&&f.add(...h);let i=!1,j=8&b&&4&b;for(let a in void 0!==(h=cL(e,"underlineStrikethrough"))&&(8&c&&4&c?(i=!0,j||f.add(...h)):j&&f.remove(...h)),g){let d=g[a];if(void 0!==(h=cL(e,a)))if(c&d){if(i&&("underline"===a||"strikethrough"===a)){b&d&&f.remove(...h);continue}(0==(b&d)||j&&"underline"===a||"strikethrough"===a)&&f.add(...h)}else b&d&&f.remove(...h)}}function a$(a,b,c){let d=b.firstChild,e=c.isComposing(),f=a+(e?"​":"");if(null==d)b.textContent=f;else{let a=d.nodeValue;if(a!==f)if(e){let[b,c,e]=function(a,b){let c=a.length,d=b.length,e=0,f=0;for(;e<c&&e<d&&a[e]===b[e];)e++;for(;f+e<c&&f+e<d&&a[c-f-1]===b[d-f-1];)f++;return[e,c-e-f,b.slice(e,d-f)]}(a,f);0!==c&&d.deleteData(b,c),d.insertData(b,e)}else d.nodeValue=f}}function a_(a,b,c,d,e,f){a$(e,a,b);let g=f.theme.text;void 0!==g&&aZ(0,0,d,a,g)}function a0(a,b){let c=document.createElement(b);return c.appendChild(a),c}class a1 extends aQ{__text;__format;__style;__mode;__detail;static getType(){return"text"}static clone(a){return new a1(a.__text,a.__key)}afterCloneFrom(a){super.afterCloneFrom(a),this.__text=a.__text,this.__format=a.__format,this.__style=a.__style,this.__mode=a.__mode,this.__detail=a.__detail}constructor(a="",b){super(b),this.__text=a,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){return l[this.getLatest().__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===cy()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(a){let b=g[a];return 0!=(this.getFormat()&b)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(a,b){return cu(this.getLatest().__format,a,b)}canHaveFormat(){return!0}isInline(){return!0}createDOM(a,b){let c=this.__format,d=aX(0,c),e=aY(0,c),f=null===d?e:d,g=document.createElement(f),h=g;this.hasFormat("code")&&g.setAttribute("spellcheck","false"),null!==d&&(h=document.createElement(e),g.appendChild(h)),a_(h,this,0,c,this.__text,a);let i=this.__style;return""!==i&&(g.style.cssText=i),g}updateDOM(a,c,d){let e=this.__text,f=a.__format,g=this.__format,h=aX(0,f),i=aX(0,g),j=aY(0,f),k=aY(0,g);if((null===h?j:h)!==(null===i?k:i))return!0;if(h===i&&j!==k){let a=c.firstChild;null==a&&b(48);let f=document.createElement(k);return a_(f,this,0,g,e,d),c.replaceChild(f,a),!1}let l=c;null!==i&&null!==h&&null==(l=c.firstChild)&&b(49),a$(e,l,this);let m=d.theme.text;void 0!==m&&f!==g&&aZ(0,f,g,l,m);let n=a.__style,o=this.__style;return n!==o&&(c.style.cssText=o),!1}static importDOM(){return{"#text":()=>({conversion:a5,priority:0}),b:()=>({conversion:a3,priority:0}),code:()=>({conversion:a8,priority:0}),em:()=>({conversion:a8,priority:0}),i:()=>({conversion:a8,priority:0}),mark:()=>({conversion:a8,priority:0}),s:()=>({conversion:a8,priority:0}),span:()=>({conversion:a2,priority:0}),strong:()=>({conversion:a8,priority:0}),sub:()=>({conversion:a8,priority:0}),sup:()=>({conversion:a8,priority:0}),u:()=>({conversion:a8,priority:0})}}static importJSON(a){return a9().updateFromJSON(a)}updateFromJSON(a){return super.updateFromJSON(a).setTextContent(a.text).setFormat(a.format).setDetail(a.detail).setMode(a.mode).setStyle(a.style)}exportDOM(a){let{element:c}=super.exportDOM(a);return c$(c)||b(132),c.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?c.style.textTransform="lowercase":this.hasFormat("uppercase")?c.style.textTransform="uppercase":this.hasFormat("capitalize")&&(c.style.textTransform="capitalize"),this.hasFormat("bold")&&(c=a0(c,"b")),this.hasFormat("italic")&&(c=a0(c,"i")),this.hasFormat("strikethrough")&&(c=a0(c,"s")),this.hasFormat("underline")&&(c=a0(c,"u")),{element:c}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(a,b){}setFormat(a){let b=this.getWritable();return b.__format="string"==typeof a?g[a]:a,b}setDetail(a){let b=this.getWritable();return b.__detail="string"==typeof a?h[a]:a,b}setStyle(a){let b=this.getWritable();return b.__style=a,b}toggleFormat(a){let b=cu(this.getFormat(),a,null);return this.setFormat(b)}toggleDirectionless(){let a=this.getWritable();return a.__detail^=1,a}toggleUnmergeable(){let a=this.getWritable();return a.__detail^=2,a}setMode(a){let b=k[a];if(this.__mode===b)return this;let c=this.getWritable();return c.__mode=b,c}setTextContent(a){if(this.__text===a)return this;let b=this.getWritable();return b.__text=a,b}select(a,b){bN();let c=a,d=b,e=bz(),f=this.getTextContent(),g=this.__key;if("string"==typeof f){let a=f.length;void 0===c&&(c=a),void 0===d&&(d=a)}else c=0,d=0;if(!bk(e))return bw(g,c,g,d,"text","text");{let a=cy();a!==e.anchor.key&&a!==e.focus.key||cx(g),e.setTextNodeRange(this,c,this,d)}return e}selectStart(){return this.select(0,0)}selectEnd(){let a=this.getTextContentSize();return this.select(a,a)}spliceText(a,b,c,d){let e=this.getWritable(),f=e.__text,g=c.length,h=a;h<0&&(h=g+h)<0&&(h=0);let i=bz();if(d&&bk(i)){let b=a+g;i.setTextNodeRange(e,b,e,b)}return e.__text=f.slice(0,h)+c+f.slice(h+b),e}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...a){let b;bN();let c=this.getLatest(),d=c.getTextContent();if(""===d)return[];let e=c.__key,f=cy(),g=d.length;a.sort((a,b)=>a-b),a.push(g);let h=[],i=a.length;for(let b=0,c=0;b<g&&c<=i;c++){let e=a[c];e>b&&(h.push(d.slice(b,e)),b=e)}let j=h.length;if(1===j)return[c];let k=h[0],l=c.getParent(),m=c.getFormat(),n=c.getStyle(),o=c.__detail,p=!1,q=null,r=null,s=bz();if(bk(s)){let[a,b]=s.isBackward()?[s.focus,s.anchor]:[s.anchor,s.focus];"text"===a.type&&a.key===e&&(q=a),"text"===b.type&&b.key===e&&(r=b)}c.isSegmented()?((b=a9(k)).__format=m,b.__style=n,b.__detail=o,b.__state=y(c,b),p=!0):b=c.setTextContent(k);let t=[b];for(let a=1;a<j;a++){let b=a9(h[a]);b.__format=m,b.__style=n,b.__detail=o,b.__state=y(c,b);let d=b.__key;f===e&&cx(d),t.push(b)}let u=q?q.offset:null,v=r?r.offset:null,w=0;for(let a of t){if(!q&&!r)break;let b=w+a.getTextContentSize();if(null!==q&&null!==u&&u<=b&&u>=w&&(q.set(a.getKey(),u-w,"text"),u<b&&(q=null)),null!==r&&null!==v&&v<=b&&v>=w){r.set(a.getKey(),v-w,"text");break}w=b}if(null!==l){let a,b;a=this.getPreviousSibling(),b=this.getNextSibling(),null!==a&&cw(a),null!==b&&cw(b);let c=l.getWritable(),d=this.getIndexWithinParent();p?(c.splice(d,0,t),this.remove()):c.splice(d,1,t),bk(s)&&bB(s,l,d,j-1)}return t}mergeWithSibling(a){let c=a===this.getPreviousSibling();c||a===this.getNextSibling()||b(50);let d=this.__key,e=a.__key,f=this.__text,g=f.length;cy()===e&&cx(d);let h=bz();if(bk(h)){let b=h.anchor,f=h.focus;null!==b&&b.key===e&&bE(b,c,d,a,g),null!==f&&f.key===e&&bE(f,c,d,a,g)}let i=a.__text,j=c?i+f:f+i;this.setTextContent(j);let k=this.getWritable();return a.remove(),k}isTextEntity(){return!1}}function a2(a){return{forChild:bb(a.style),node:null}}function a3(a){let b="normal"===a.style.fontWeight;return{forChild:bb(a.style,b?void 0:"bold"),node:null}}let a4=new WeakMap;function a5(a){null===a.parentElement&&b(129);let c=a.textContent||"";if(null!==function(a){let b,c=a.parentNode,d=[a];for(;null!==c&&void 0===(b=a4.get(c))&&!function(a){if(!c$(a))return!1;if("PRE"===a.nodeName)return!0;let b=a.style.whiteSpace;return"string"==typeof b&&b.startsWith("pre")}(c);)d.push(c),c=c.parentNode;let e=void 0===b?c:b;for(let a=0;a<d.length;a++)a4.set(d[a],e);return e}(a)){let a=c.split(/(\r?\n|\t)/),b=[],d=a.length;for(let c=0;c<d;c++){let d=a[c];"\n"===d||"\r\n"===d?b.push(aU()):"	"===d?b.push(bd()):""!==d&&b.push(a9(d))}return{node:b}}if(""===(c=c.replace(/\r/g,"").replace(/[ \t\n]+/g," ")))return{node:null};if(" "===c[0]){let b=a,d=!0;for(;null!==b&&null!==(b=a6(b,!1));){let a=b.textContent||"";if(a.length>0){/[ \t\n]$/.test(a)&&(c=c.slice(1)),d=!1;break}}d&&(c=c.slice(1))}if(" "===c[c.length-1]){let b=a,d=!0;for(;null!==b&&null!==(b=a6(b,!0));)if((b.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){d=!1;break}d&&(c=c.slice(0,c.length-1))}return""===c?{node:null}:{node:a9(c)}}function a6(a,b){let c=a;for(;;){let a;for(;null===(a=b?c.nextSibling:c.previousSibling);){let a=c.parentElement;if(null===a)return null;c=a}if(c$(c=a)){let a=c.style.display;if(""===a&&!function(a){let b=RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==a.nodeName.match(b)}(c)||""!==a&&!a.startsWith("inline"))return null}let d=c;for(;null!==(d=b?c.firstChild:c.lastChild);)c=d;if(cs(c))return c;if("BR"===c.nodeName)return null}}let a7={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function a8(a){let b=a7[a.nodeName.toLowerCase()];return void 0===b?{node:null}:{forChild:bb(a.style,b),node:null}}function a9(a=""){return cW(new a1(a))}function ba(a){return a instanceof a1}function bb(a,b){let c=a.fontWeight,d=a.textDecoration.split(" "),e="700"===c||"bold"===c,f=d.includes("line-through"),g="italic"===a.fontStyle,h=d.includes("underline"),i=a.verticalAlign;return a=>(ba(a)&&(e&&!a.hasFormat("bold")&&a.toggleFormat("bold"),f&&!a.hasFormat("strikethrough")&&a.toggleFormat("strikethrough"),g&&!a.hasFormat("italic")&&a.toggleFormat("italic"),h&&!a.hasFormat("underline")&&a.toggleFormat("underline"),"sub"!==i||a.hasFormat("subscript")||a.toggleFormat("subscript"),"super"!==i||a.hasFormat("superscript")||a.toggleFormat("superscript"),b&&!a.hasFormat(b)&&a.toggleFormat(b)),a)}class bc extends a1{static getType(){return"tab"}static clone(a){return new bc(a.__key)}constructor(a){super("	",a),this.__detail=2}static importDOM(){return null}createDOM(a){let b=super.createDOM(a),c=cL(a.theme,"tab");return void 0!==c&&b.classList.add(...c),b}static importJSON(a){return bd().updateFromJSON(a)}setTextContent(a){return"	"!==a&&""!==a&&c(126),super.setTextContent("	")}spliceText(a,c,d,e){return""===d&&0===c||"	"===d&&1===c||b(286),this}setDetail(a){return 2!==a&&b(127),this}setMode(a){return"normal"!==a&&b(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function bd(){return cW(new bc)}function be(a){return a instanceof bc}class bf{key;offset;type;_selection;constructor(a,b,c){this._selection=null,this.key=a,this.offset=b,this.type=c}is(a){return this.key===a.key&&this.offset===a.offset&&this.type===a.type}isBefore(a){return this.key===a.key?this.offset<a.offset:0>dv(dG(dz(this,"next")),dG(dz(a,"next")))}getNode(){let a=cz(this.key);return null===a&&b(20),a}set(a,b,c,d){let e=this._selection,f=this.key;d&&this.key===a&&this.offset===b&&this.type===c||(this.key=a,this.offset=b,this.type=c,bM()||(cy()===f&&cx(a),null!==e&&(e.setCachedNodes(null),e.dirty=!0)))}}function bg(a,b,c){return new bf(a,b,c)}function bh(a,b){let c=b.__key,d=a.offset,e="element";if(ba(b)){e="text";let a=b.getTextContentSize();d>a&&(d=a)}else if(!b2(b)){let a=b.getNextSibling();if(ba(a))c=a.__key,d=0,e="text";else{let a=b.getParent();a&&(c=a.__key,d=b.getIndexWithinParent()+1)}}a.set(c,d,e)}function bi(a,b){if(b2(b)){let c=b.getLastDescendant();b2(c)||ba(c)?bh(a,c):bh(a,b)}else bh(a,b)}class bj{_nodes;_cachedNodes;dirty;constructor(a){this._cachedNodes=null,this._nodes=a,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(a){this._cachedNodes=a}is(a){if(!bm(a))return!1;let b=this._nodes,c=a._nodes;return b.size===c.size&&Array.from(b).every(a=>c.has(a))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(a){this.dirty=!0,this._nodes.add(a),this._cachedNodes=null}delete(a){this.dirty=!0,this._nodes.delete(a),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(a){return this._nodes.has(a)}clone(){return new bj(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(a){}insertText(){}insertNodes(a){let b,c=this.getNodes(),d=c.length,e=c[d-1];if(ba(e))b=e.select();else{let a=e.getIndexWithinParent()+1;b=e.getParentOrThrow().select(a,a)}b.insertNodes(a);for(let a=0;a<d;a++)c[a].remove()}getNodes(){let a=this._cachedNodes;if(null!==a)return a;let b=this._nodes,c=[];for(let a of b){let b=cz(a);null!==b&&c.push(b)}return bM()||(this._cachedNodes=c),c}getTextContent(){let a=this.getNodes(),b="";for(let c=0;c<a.length;c++)b+=a[c].getTextContent();return b}deleteNodes(){let a=this.getNodes();if((bz()||bA())===this&&a[0]){var b;let c,d,e=dk(a[0],"next");b=dt(e,e),dB(d=bk(c=bz())?c:new bl(bg("root",0,"element"),bg("root",0,"element"),0,""),b),cH(d)}for(let b of a)b.remove()}}function bk(a){return a instanceof bl}class bl{format;style;anchor;focus;_cachedNodes;dirty;constructor(a,b,c,d){this.anchor=a,this.focus=b,a._selection=this,b._selection=this,this._cachedNodes=null,this.format=c,this.style=d,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(a){this._cachedNodes=a}is(a){return!!bk(a)&&this.anchor.is(a.anchor)&&this.focus.is(a.focus)&&this.format===a.format&&this.style===a.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){let a=this._cachedNodes;if(null!==a)return a;let b=function(a){let b=[],[c,d]=a.getTextSlices();c&&b.push(c.caret.origin);let e=new Set,f=new Set;for(let c of a)if(dg(c)){let{origin:a}=c;0===b.length?e.add(a):(f.add(a),b.push(a))}else{let{origin:a}=c;b2(a)&&f.has(a)||b.push(a)}if(d&&b.push(d.caret.origin),df(a.focus)&&b2(a.focus.origin)&&null===a.focus.getNodeAtCaret())for(let c=dn(a.focus.origin,"previous");dg(c)&&e.has(c.origin)&&!c.origin.isEmpty()&&c.origin.is(b[b.length-1]);c=dp(c))e.delete(c.origin),b.pop();for(;b.length>1;){let a=b[b.length-1];if(!b2(a)||f.has(a)||a.isEmpty()||e.has(a))break;b.pop()}if(0===b.length&&a.isCollapsed()){let c=dG(a.anchor),d=dG(a.anchor.getFlipped()),e=a=>de(a)?a.origin:a.getNodeAtCaret(),f=e(c)||e(d)||(a.anchor.getNodeAtCaret()?c.origin:d.origin);b.push(f)}return b}(dI(dC(this),"next"));return bM()||(this._cachedNodes=b),b}setTextNodeRange(a,b,c,d){this.anchor.set(a.__key,b,"text"),this.focus.set(c.__key,d,"text")}getTextContent(){let a=this.getNodes();if(0===a.length)return"";let b=a[0],c=a[a.length-1],d=this.anchor,e=this.focus,f=d.isBefore(e),[g,h]=bo(this),i="",j=!0;for(let k=0;k<a.length;k++){let l=a[k];if(b2(l)&&!l.isInline())j||(i+="\n"),j=!l.isEmpty();else if(j=!1,ba(l)){let a=l.getTextContent();l===b?l===c?"element"===d.type&&"element"===e.type&&e.offset!==d.offset||(a=g<h?a.slice(g,h):a.slice(h,g)):a=f?a.slice(g):a.slice(h):l===c&&(a=f?a.slice(0,h):a.slice(0,g)),i+=a}else!b5(l)&&!aV(l)||l===c&&this.isCollapsed()||(i+=l.getTextContent())}return i}applyDOMRange(a){let b=bQ(),c=b.getEditorState()._selection,d=bv(a.startContainer,a.startOffset,a.endContainer,a.endOffset,b,c);if(null===d)return;let[e,f]=d;this.anchor.set(e.key,e.offset,e.type,!0),this.focus.set(f.key,f.offset,f.type,!0),C(this.anchor),C(this.focus)}clone(){let a=this.anchor,b=this.focus;return new bl(bg(a.key,a.offset,a.type),bg(b.key,b.offset,b.type),this.format,this.style)}toggleFormat(a){this.format=cu(this.format,a,null),this.dirty=!0}setFormat(a){this.format=a,this.dirty=!0}setStyle(a){this.style=a,this.dirty=!0}hasFormat(a){let b=g[a];return 0!=(this.format&b)}insertRawText(a){let b=a.split(/(\r?\n|\t)/),c=[],d=b.length;for(let a=0;a<d;a++){let d=b[a];"\n"===d||"\r\n"===d?c.push(aU()):"	"===d?c.push(bd()):c.push(a9(d))}this.insertNodes(c)}insertText(a){let c=this.anchor,d=this.focus,e=this.format,f=this.style,g=c,h=d;!this.isCollapsed()&&d.isBefore(c)&&(g=d,h=c),"element"===g.type&&function(a,b,c,d){let e=a.getNode(),f=e.getChildAtIndex(a.offset),g=a9();if(g.setFormat(c),g.setStyle(d),f instanceof cb)f.splice(0,0,[g]);else{let a=b7(e)?cd().append(g):g;null===f?e.append(a):f.insertBefore(a)}a.is(b)&&b.set(g.__key,0,"text"),a.set(g.__key,0,"text")}(g,h,e,f),"element"===h.type&&dA(h,dG(dz(h,"next")));let i=g.offset,j=h.offset,k=this.getNodes(),l=k.length,m=k[0];ba(m)||b(26);let n=m.getTextContent().length,o=m.getParentOrThrow(),p=k[l-1];if(1===l&&"element"===h.type&&(j=n,h.set(g.key,j,"text")),this.isCollapsed()&&i===n&&(cr(m)||!m.canInsertTextAfter()||!o.canInsertTextAfter()&&null===m.getNextSibling())){let b=m.getNextSibling();if(ba(b)&&b.canInsertTextBefore()&&!cr(b)||((b=a9()).setFormat(e),b.setStyle(f),o.canInsertTextAfter()?m.insertAfter(b):o.insertAfter(b)),b.select(0,0),m=b,""!==a)return void this.insertText(a)}else if(this.isCollapsed()&&0===i&&(cr(m)||!m.canInsertTextBefore()||!o.canInsertTextBefore()&&null===m.getPreviousSibling())){let b=m.getPreviousSibling();if(ba(b)&&!cr(b)||((b=a9()).setFormat(e),o.canInsertTextBefore()?m.insertBefore(b):o.insertBefore(b)),b.select(),m=b,""!==a)return void this.insertText(a)}else if(m.isSegmented()&&i!==n){let a=a9(m.getTextContent());a.setFormat(e),m.replace(a),m=a}else if(!this.isCollapsed()&&""!==a){let b=p.getParent();if(!o.canInsertTextBefore()||!o.canInsertTextAfter()||b2(b)&&(!b.canInsertTextBefore()||!b.canInsertTextAfter()))return this.insertText(""),bu(this.anchor,this.focus,null),void this.insertText(a)}if(1===l){if(cq(m)){let b=a9(a);return b.select(),void m.replace(b)}let b=m.getFormat(),c=m.getStyle();if(i!==j||b===e&&c===f){if(be(m)){let b=a9(a);return b.setFormat(e),b.setStyle(f),b.select(),void m.replace(b)}}else{if(""!==m.getTextContent()){let b=a9(a);if(b.setFormat(e),b.setStyle(f),b.select(),0===i)m.insertBefore(b,!1);else{let[a]=m.splitText(i);a.insertAfter(b,!1)}return void(b.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=a.length))}m.setFormat(e),m.setStyle(f)}let d=j-i;""===(m=m.spliceText(i,d,a,!0)).getTextContent()?m.remove():"text"===this.anchor.type&&(m.isComposing()?this.anchor.offset-=a.length:(this.format=b,this.style=c))}else{let b=new Set([...m.getParentKeys(),...p.getParentKeys()]),c=b2(m)?m:m.getParentOrThrow(),d=b2(p)?p:p.getParentOrThrow(),e=p;if(!c.is(d)&&d.isInline())do e=d,d=d.getParentOrThrow();while(d.isInline())if("text"===h.type&&(0!==j||""===p.getTextContent())||"element"===h.type&&p.getIndexWithinParent()<j)if(ba(p)&&!cq(p)&&j!==p.getTextContentSize()){if(p.isSegmented()){let a=a9(p.getTextContent());p.replace(a),p=a}b7(h.getNode())||"text"!==h.type||(p=p.spliceText(0,j,"")),b.add(p.__key)}else{let a=p.getParentOrThrow();a.canBeEmpty()||1!==a.getChildrenSize()?p.remove():a.remove()}else b.add(p.__key);let f=d.getChildren(),g=new Set(k),o=c.is(d),q=c.isInline()&&null===m.getNextSibling()?c:m;for(let a=f.length-1;a>=0;a--){let b=f[a];if(b.is(m)||b2(b)&&b.isParentOf(m))break;b.isAttached()&&(!g.has(b)||b.is(e)?o||q.insertAfter(b,!1):b.remove())}if(!o){let a=d,c=null;for(;null!==a;){let d=a.getChildren(),e=d.length;(0===e||d[e-1].is(c))&&(b.delete(a.__key),c=a),a=a.getParent()}}if(cq(m))if(i===n)m.select();else{let b=a9(a);b.select(),m.replace(b)}else""===(m=m.spliceText(i,n-i,a,!0)).getTextContent()?m.remove():m.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=a.length);for(let a=1;a<l;a++){let c=k[a],d=c.__key;b.has(d)||c.remove()}}}removeText(){let a=bz()===this;dB(this,function(a,c="removeEmptySlices"){let d,e;if(a.isCollapsed())return a;let f="root",g="next",h=c,i=dI(a,g),j=dE(i.anchor,f),k=dE(i.focus.getFlipped(),f),l=new Set,m=[];for(let a of i.iterNodeCarets(f))if(dg(a))l.add(a.origin.getKey());else if(df(a)){let{origin:b}=a;b2(b)&&!l.has(b.getKey())||m.push(b)}for(let a of m)a.remove();for(let a of i.getTextSlices()){if(!a)continue;let{origin:b}=a.caret,c=b.getTextContentSize(),d=dD(dk(b,g)),e=b.getMode();if(Math.abs(a.distance)===c&&"removeEmptySlices"===h||"token"===e&&0!==a.distance)d.remove();else if(0!==a.distance){h="removeEmptySlices";let b=a.removeTextSlice(),c=a.caret.origin;if("segmented"===e){let a=b.origin,c=a9(a.getTextContent()).setStyle(a.getStyle()).setFormat(a.getFormat());d.replaceOrInsert(c),b=dl(c,g,b.offset)}c.is(j[0].origin)&&(j[0]=b),c.is(k[0].origin)&&(k[0]=b.getFlipped())}}for(let a of j)if(dF(a)){d=dG(a);break}for(let a of k)if(dF(a)){e=dG(a);break}let n=function(a,b,c){let d;if(!a||!b)return null;let e=a.getParentAtCaret(),f=b.getParentAtCaret();if(!e||!f)return null;let g=e.getParents().reverse();g.push(e);let h=f.getParents().reverse();h.push(f);let i=Math.min(g.length,h.length);for(d=0;d<i&&g[d]===h[d];d++);let j=(a,b)=>{let c;for(let e=d;e<a.length;e++){let d=a[e];if(cV(d))return;!c&&b(d)&&(c=d)}return c},k=j(g,c1),l=k&&j(h,a=>c.has(a.getKey())&&c1(a));return k&&l?[k,l]:null}(d,e,l);if(n){let[a,b]=n;dn(a,"previous").splice(0,b.getChildren()),b.remove()}let o=[d,e,...j,...k].find(dF);if(o){var p;return dt(p=dH(dG(o),a.direction),p)}b(269,JSON.stringify(j.map(a=>a.origin.__key)))}(dC(this))),a&&bz()!==this&&cH(this)}formatText(a,b=null){if(this.isCollapsed())return this.toggleFormat(a),void cx(null);let c=this.getNodes(),d=[];for(let a of c)ba(a)&&d.push(a);let e=b=>{c.forEach(c=>{if(b2(c)){let d=c.getFormatFlags(a,b);c.setTextFormat(d)}})},f=d.length;if(0===f)return this.toggleFormat(a),cx(null),void e(b);let g=this.anchor,h=this.focus,i=this.isBackward(),j=i?h:g,k=i?g:h,l=0,m=d[0],n="element"===j.type?0:j.offset;if("text"===j.type&&n===m.getTextContentSize()&&(l=1,m=d[1],n=0),null==m)return;let o=m.getFormatFlags(a,b);e(o);let p=f-1,q=d[p],r="text"===k.type?k.offset:q.getTextContentSize();if(m.is(q)){if(n===r)return;if(cr(m)||0===n&&r===m.getTextContentSize())m.setFormat(o);else{let a=m.splitText(n,r),b=0===n?a[0]:a[1];b.setFormat(o),"text"===j.type&&j.set(b.__key,0,"text"),"text"===k.type&&k.set(b.__key,r-n,"text")}return void(this.format=o)}0===n||cr(m)||([,m]=m.splitText(n),n=0),m.setFormat(o);let s=q.getFormatFlags(a,o);r>0&&(r===q.getTextContentSize()||cr(q)||([q]=q.splitText(r)),q.setFormat(s));for(let b=l+1;b<p;b++){let c=d[b],e=c.getFormatFlags(a,s);c.setFormat(e)}"text"===j.type&&j.set(m.__key,n,"text"),"text"===k.type&&k.set(q.__key,r,"text"),this.format=o|s}insertNodes(a){var c;if(0===a.length)return;if(this.isCollapsed()||this.removeText(),"root"===this.anchor.key){this.insertParagraph();let c=bz();return bk(c)||b(134),c.insertNodes(a)}let d=(this.isBackward()?this.focus:this.anchor).getNode(),e=c6(d,c1),f=a[a.length-1];if(b2(e)&&"__language"in e){if("__language"in a[0])this.insertText(a[0].getTextContent());else{let b=bF(this);e.splice(b,0,a),f.selectEnd()}return}if(!a.some(a=>(b2(a)||b5(a))&&!a.isInline())){b2(e)||b(211,d.constructor.name,d.getType());let c=bF(this);return e.splice(c,0,a),void f.selectEnd()}let g=function(a){let b=cd(),c=null;for(let d=0;d<a.length;d++){let e=a[d],f=aV(e);if(f||b5(e)&&e.isInline()||b2(e)&&e.isInline()||ba(e)||e.isParentRequired()){if(null===c&&(c=e.createParentElementNode(),b.append(c),f))continue;null!==c&&c.append(e)}else b.append(e),c=null}return b}(a),h=g.getLastDescendant(),i=g.getChildren(),j=b2(e)&&e.isEmpty()?null:this.insertParagraph(),k=i[i.length-1],l=i[0];b2(c=l)&&c1(c)&&!c.isEmpty()&&b2(e)&&(!e.isEmpty()||e.canMergeWhenEmpty())&&(b2(e)||b(211,d.constructor.name,d.getType()),e.append(...l.getChildren()),l=i[1]),l&&(null===e&&b(212,d.constructor.name,d.getType()),function(a,c){let d=c.getParentOrThrow().getLastChild(),e=c,f=[c];for(;e!==d;)e.getNextSibling()||b(140),f.push(e=e.getNextSibling());let g=a;for(let a of f)g=g.insertAfter(a)}(e,l));let m=c6(h,c1);j&&b2(m)&&(j.canMergeWhenEmpty()||c1(k))&&(m.append(...j.getChildren()),j.remove()),b2(e)&&e.isEmpty()&&e.remove(),h.selectEnd();let n=b2(e)?e.getLastChild():null;aV(n)&&m!==e&&n.remove()}insertParagraph(){if("root"===this.anchor.key){let a=cd();return cF().splice(this.anchor.offset,0,[a]),a.select(),a}let a=bF(this),c=c6(this.anchor.getNode(),c1);b2(c)||b(213);let d=c.getChildAtIndex(a),e=d?[d,...d.getNextSiblings()]:[],f=c.insertNewAfter(this,!1);return f?(f.append(...e),f.selectStart(),f):null}insertLineBreak(a){let b=aU();if(this.insertNodes([b]),a){let a=b.getParentOrThrow(),c=b.getIndexWithinParent();a.select(c,c)}}extract(){let a=[...this.getNodes()],b=a.length,c=a[0],d=a[b-1],[e,f]=bo(this),g=this.isBackward(),[h,i]=g?[this.focus,this.anchor]:[this.anchor,this.focus],[j,k]=g?[f,e]:[e,f];if(0===b)return[];if(1===b){if(ba(c)&&!this.isCollapsed()){let a=c.splitText(j,k),b=0===j?a[0]:a[1];return b?(h.set(b.getKey(),0,"text"),i.set(b.getKey(),b.getTextContentSize(),"text"),[b]):[]}return[c]}if(ba(c)&&(j===c.getTextContentSize()?a.shift():0!==j&&([,c]=c.splitText(j),a[0]=c,h.set(c.getKey(),0,"text"))),ba(d)){let b=d.getTextContent().length;0===k?a.pop():k!==b&&([d]=d.splitText(k),a[a.length-1]=d,i.set(d.getKey(),d.getTextContentSize(),"text"))}return a}modify(a,b,c){var d;(function(a,b,c,d,e="decorators-and-blocks"){var f;if("move"===b&&"character"===d&&!a.isCollapsed()){let[b,d]=c===a.isBackward()?[a.focus,a.anchor]:[a.anchor,a.focus];return d.set(b.key,b.offset,b.type),!0}let g=dz(a.focus,c?"previous":"next"),h="lineboundary"===d,i="move"===b,j=g,k="decorators-and-blocks"===e;if(!(de(f=j)&&f.offset!==dm(f.origin,f.direction))){for(let a of j){k=!1;let{origin:b}=a;if(!b5(b)||b.isIsolated()||(j=a,!h||!b.isInline()))break}if(k)for(let a of ds(g).iterNodeCarets("extend"===b?"shadowRoot":"root")){if(dg(a))a.origin.isInline()||(j=a);else{if(b2(a.origin))continue;b5(a.origin)&&!a.origin.isInline()&&(j=a)}break}}if(j===g)return!1;if(i&&!h&&b5(j.origin)&&j.origin.isKeyboardSelectable()){let a=bx();return a.add(j.origin.getKey()),cH(a),!0}return j=dG(j),i&&dA(a.anchor,j),dA(a.focus,j),k||!h})(this,a,b,c)||(d=cU(bQ()))}forwardDeletion(a,b,c){if(!c&&("element"===a.type&&b2(b)&&a.offset===b.getChildrenSize()||"text"===a.type&&a.offset===b.getTextContentSize())){let a=b.getParent(),c=b.getNextSibling()||(null===a?null:a.getNextSibling());if(b2(c)&&c.isShadowRoot())return!0}return!1}deleteCharacter(a){let b=this.isCollapsed();if(this.isCollapsed()){let b=this.anchor,c=b.getNode();if(this.forwardDeletion(b,c,a))return;let d=ds(dz(b,a?"previous":"next"));if(d.getTextSlices().every(a=>null===a||0===a.distance)){let a={type:"initial"};for(let b of d.iterNodeCarets("shadowRoot"))if(dg(b))if(b.origin.isInline());else{if(b.origin.isShadowRoot()){if("merge-block"===a.type)break;if(b2(d.anchor.origin)&&d.anchor.origin.isEmpty()){let a=dG(b);dB(this,dt(a,a)),d.anchor.origin.remove()}return}"merge-next-block"!==a.type&&"merge-block"!==a.type||(a={block:a.block,caret:b,type:"merge-block"})}else{if("merge-block"===a.type)break;if(df(b)){if(b2(b.origin)){if(b.origin.isInline()){if(!b.origin.isParentOf(d.anchor.origin))break}else a={block:b.origin,type:"merge-next-block"};continue}if(b5(b.origin)){if(b.origin.isIsolated());else if("merge-next-block"===a.type&&(b.origin.isKeyboardSelectable()||!b.origin.isInline())&&b2(d.anchor.origin)&&d.anchor.origin.isEmpty()){d.anchor.origin.remove();let a=bx();a.add(b.origin.getKey()),cH(a)}else b.origin.remove();return}break}}if("merge-block"===a.type){let{caret:b,block:c}=a;return dB(this,dt(!b.origin.isEmpty()&&c.isEmpty()?dD(dk(c,b.direction)):d.anchor,b)),this.removeText()}}let e=this.focus;if(this.modify("extend",a,"character"),this.isCollapsed()){if(a&&0===b.offset&&bp(this,b.getNode()))return}else{let d="text"===e.type?e.getNode():null;if(c="text"===b.type?b.getNode():null,null!==d&&d.isSegmented()){let b=e.offset,f=d.getTextContentSize();if(d.is(c)||a&&b!==f||!a&&0!==b)return void br(d,a,b)}else if(null!==c&&c.isSegmented()){let e=b.offset,f=c.getTextContentSize();if(c.is(d)||a&&0!==e||!a&&e!==f)return void br(c,a,e)}!function(a,b){let c=a.anchor,d=a.focus,e=c.getNode();if(e===d.getNode()&&"text"===c.type&&"text"===d.type){var f,g;let a=c.offset,h=d.offset,i=a<h,j=i?a:h,k=i?h:a,l=k-1;j===l||(g=f=e.getTextContent().slice(j,k),/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(g))||bq(f)||(b?d.set(d.key,l,d.type):c.set(c.key,l,c.type))}}(this,a)}}if(this.removeText(),a&&!b&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){let a=this.anchor.getNode();a.isEmpty()&&b7(a.getParent())&&null===a.getPreviousSibling()&&bp(this,a)}}deleteLine(a){this.isCollapsed()&&this.modify("extend",a,"lineboundary"),this.isCollapsed()?this.deleteCharacter(a):this.removeText()}deleteWord(a){if(this.isCollapsed()){let b=this.anchor,c=b.getNode();if(this.forwardDeletion(b,c,a))return;this.modify("extend",a,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function bm(a){return a instanceof bj}function bn(a){let b=a.offset;if("text"===a.type)return b;let c=a.getNode();return b===c.getChildrenSize()?c.getTextContent().length:0}function bo(a){let b=a.getStartEndPoints();if(null===b)return[0,0];let[c,d]=b;return"element"===c.type&&"element"===d.type&&c.key===d.key&&c.offset===d.offset?[0,0]:[bn(c),bn(d)]}function bp(a,b){for(let c=b;c;c=c.getParent()){if(b2(c)){if(c.collapseAtStart(a))return!0;if(cV(c))break}if(c.getPreviousSibling())break}return!1}let bq=(()=>{try{let a=RegExp("\\p{Emoji}","u"),b=a.test.bind(a);if(b("❤️")&&b("#️⃣")&&b("👍"))return b}catch(a){}return()=>!1})();function br(a,b,c){let d=a.getTextContent().split(/(?=\s)/g),e=d.length,f=0,g=0;for(let a=0;a<e;a++){let h=a===e-1;if(g=f,f+=d[a].length,b&&f===c||f>c||h){d.splice(a,1),h&&(g=void 0);break}}let h=d.join("").trim();""===h?a.remove():(a.setTextContent(h),a.select(g,g))}function bs(a,c,d,e){let f,g=c;if(c$(a)){let h=!1,i=a.childNodes,j=i.length,k=e._blockCursorElement;g===j&&(h=!0,g=j-1);let l=i[g],m=!1;if(l===k)l=i[g+1],m=!0;else if(null!==k){let b=k.parentNode;a===b&&c>Array.prototype.indexOf.call(b.children,k)&&g--}if(ba(f=cI(l)))g=dm(f,h?"next":"previous");else{let i=cI(a);if(null===i)return null;if(b2(i)){let j,k=e.getElementByKey(i.getKey());null===k&&b(214);let l=i.getDOMSlot(k);[i,g]=l.resolveChildIndex(i,k,a,c),b2(i)||b(215),h&&g>=i.getChildrenSize()&&(g=Math.max(0,i.getChildrenSize()-1));let n=i.getChildAtIndex(g);if(b2(n)&&(j=n.getParent(),null===d||null===j||!j.canBeEmpty()||j!==d.getNode())){let a=h?n.getLastDescendant():n.getFirstDescendant();i=null===a||b2(n=a)?n:n.getParentOrThrow(),g=0}ba(n)?(f=n,i=null,g=dm(n,h?"next":"previous")):n!==i&&h&&!m&&(b2(i)||b(216),g=Math.min(i.getChildrenSize(),g+1))}else{let b=i.getIndexWithinParent();g=0===c&&b5(i)&&cI(a)===i?b:b+1,i=i.getParentOrThrow()}if(b2(i))return bg(i.__key,g,"element")}}else f=cI(a);return ba(f)?bg(f.__key,dm(f,g,"clamp"),"text"):null}function bt(a,b,c){let d=a.offset,e=a.getNode();if(0===d){let d=e.getPreviousSibling(),f=e.getParent();if(b){if((c||!b)&&null===d&&b2(f)&&f.isInline()){let b=f.getPreviousSibling();ba(b)&&a.set(b.__key,b.getTextContent().length,"text")}}else b2(d)&&!c&&d.isInline()?a.set(d.__key,d.getChildrenSize(),"element"):ba(d)&&a.set(d.__key,d.getTextContent().length,"text")}else if(d===e.getTextContent().length){let d=e.getNextSibling(),f=e.getParent();if(b&&b2(d)&&d.isInline())a.set(d.__key,0,"element");else if((c||b)&&null===d&&b2(f)&&f.isInline()&&!f.canInsertTextAfter()){let b=f.getNextSibling();ba(b)&&a.set(b.__key,0,"text")}}}function bu(a,b,c){if("text"===a.type&&"text"===b.type){let d=a.isBefore(b),e=a.is(b);bt(a,d,e),bt(b,!d,e),e&&b.set(a.key,a.offset,a.type);let f=bQ();if(f.isComposing()&&f._compositionKey!==a.key&&bk(c)){let d=c.anchor,e=c.focus;a.set(d.key,d.offset,d.type,!0),b.set(e.key,e.offset,e.type,!0)}}}function bv(a,b,c,d,e,f){if(null===a||null===c||!cm(e,a,c))return null;let g=bs(a,b,bk(f)?f.anchor:null,e);if(null===g)return null;let h=bs(c,d,bk(f)?f.focus:null,e);if(null===h)return null;if("element"===g.type&&"element"===h.type){let b=cI(a),d=cI(c);if(b5(b)&&b5(d))return null}return bu(g,h,f),[g,h]}function bw(a,b,c,d,e,f){let g=bP(),h=new bl(bg(a,b,e),bg(c,d,f),0,"");return h.dirty=!0,g._selection=h,h}function bx(){return new bj(new Set)}function by(a,b,c,d){let e,f,g,h,i=c._window;if(null===i)return null;let j=d||i.event,k=j?j.type:void 0,l="selectionchange"===k,m=!n&&(l||"beforeinput"===k||"compositionstart"===k||"compositionend"===k||"click"===k&&j&&3===j.detail||"drop"===k||void 0===k);if(bk(a)&&!m)return a.clone();if(null===b)return null;if(e=b.anchorNode,f=b.focusNode,g=b.anchorOffset,h=b.focusOffset,(l||void 0===k)&&bk(a)&&!cm(c,e,f))return a.clone();let o=bv(e,g,f,h,c,a);if(null===o)return null;let[p,q]=o;return new bl(p,q,bk(a)?a.format:0,bk(a)?a.style:"")}function bz(){return bP()._selection}function bA(){return bQ()._editorState._selection}function bB(a,b,c,d=1){let e=a.anchor,f=a.focus,g=e.getNode(),h=f.getNode();if(!b.is(g)&&!b.is(h))return;let i=b.__key;if(a.isCollapsed()){let b=e.offset;if(c<=b&&d>0||c<b&&d<0){let c=Math.max(0,b+d);e.set(i,c,"element"),f.set(i,c,"element"),bC(a)}}else{let g=a.isBackward(),h=g?f:e,j=h.getNode(),k=g?e:f,l=k.getNode();if(b.is(j)){let a=h.offset;(c<=a&&d>0||c<a&&d<0)&&h.set(i,Math.max(0,a+d),"element")}if(b.is(l)){let a=k.offset;(c<=a&&d>0||c<a&&d<0)&&k.set(i,Math.max(0,a+d),"element")}}bC(a)}function bC(a){let b=a.anchor,c=b.offset,d=a.focus,e=d.offset,f=b.getNode(),g=d.getNode();if(a.isCollapsed()){if(!b2(f))return;let a=f.getChildrenSize(),e=c>=a,g=e?f.getChildAtIndex(a-1):f.getChildAtIndex(c);if(ba(g)){let a=0;e&&(a=g.getTextContentSize()),b.set(g.__key,a,"text"),d.set(g.__key,a,"text")}return}if(b2(f)){let a=f.getChildrenSize(),d=c>=a,e=d?f.getChildAtIndex(a-1):f.getChildAtIndex(c);if(ba(e)){let a=0;d&&(a=e.getTextContentSize()),b.set(e.__key,a,"text")}}if(b2(g)){let a=g.getChildrenSize(),b=e>=a,c=b?g.getChildAtIndex(a-1):g.getChildAtIndex(e);if(ba(c)){let a=0;b&&(a=c.getTextContentSize()),d.set(c.__key,a,"text")}}}function bD(a,b,c,d,e){let f=null,g=0,h=null;null!==d?(f=d.__key,ba(d)?(g=d.getTextContentSize(),h="text"):b2(d)&&(g=d.getChildrenSize(),h="element")):null!==e&&(f=e.__key,ba(e)?h="text":b2(e)&&(h="element")),null!==f&&null!==h?a.set(f,g,h):(-1===(g=b.getIndexWithinParent())&&(g=c.getChildrenSize()),a.set(c.__key,g,"element"))}function bE(a,b,c,d,e){"text"===a.type?a.set(c,a.offset+(b?0:e),"text"):a.offset>d.getIndexWithinParent()&&a.set(a.key,a.offset-1,"element")}function bF(a){let c=a;a.isCollapsed()||c.removeText();let d=bz();bk(d)&&(c=d),bk(c)||b(161);let e=c.anchor,f=e.getNode(),g=e.offset;for(;!c1(f);){let a=f;if([f,g]=function(a,b){let c=a.getParent();if(!c){let a=cd();return cF().append(a),a.select(),[cF(),0]}if(ba(a)){let d=a.splitText(b);if(0===d.length)return[c,a.getIndexWithinParent()];let e=+(0!==b);return[c,d[0].getIndexWithinParent()+e]}if(!b2(a)||0===b)return[c,a.getIndexWithinParent()];let d=a.getChildAtIndex(b);if(d){let c=new bl(bg(a.__key,b,"element"),bg(a.__key,b,"element"),0,""),e=a.insertNewAfter(c);e&&e.append(d,...d.getNextSiblings())}return[c,a.getIndexWithinParent()+1]}(f,g),a.is(f))break}return g}let bG=null,bH=null,bI=!1,bJ=!1,bK=0,bL={characterData:!0,childList:!0,subtree:!0};function bM(){return bI||null!==bG&&bG._readOnly}function bN(){bI&&b(13)}function bO(){bK>99&&b(14)}function bP(){return null===bG&&b(195,bR()),bG}function bQ(){return null===bH&&b(196,bR()),bH}function bR(){let a=new Set,b=cf.version,c=` Detected on the page: 0 compatible editor(s) with version ${b}`;return a.size&&(c+=` and incompatible editors with versions ${Array.from(a).join(", ")}`),c}function bS(a,b,c){let d=b.__type,e=ci(a,d),f=c.get(d);void 0===f&&(f=Array.from(e.transforms),c.set(d,f));let g=f.length;for(let a=0;a<g&&(f[a](b),b.isAttached());a++);}function bT(a,b){return void 0!==a&&a.__key!==b&&a.isAttached()}function bU(a,b){if(!b)return;let c=a._updateTags,d=b;for(let a of(Array.isArray(b)||(d=[b]),d))c.add(a)}function bV(a,b,c){let d=bG,e=bI,f=bH;bG=b,bI=!0,bH=a;try{return c()}finally{bG=d,bI=e,bH=f}}function bW(a,c){var e;let f,g,h=a._pendingEditorState,i=a._rootElement,j=a._headless||null===i;if(null===h)return;let k=a._editorState,l=k._selection,m=h._selection,n=0!==a._dirtyType,o=bG,p=bI,q=bH,r=a._updating,t=a._observer,u=null;if(a._pendingEditorState=null,a._editorState=h,!j&&n&&null!==t){bH=a,bG=h,bI=!1,a._updating=!0;try{let c,d=a._dirtyType,e=a._dirtyElements,f=a._dirtyLeaves;t.disconnect(),N="",Q="",R=2===d,E=a,D=a._config,F=a._nodes,G=E._listeners.mutation,H=e,I=f,J=k._nodeMap,K=h._nodeMap,S=h._readOnly,L=new Map(a._keyToDOMMap),M=c=new Map,function a(c,d){let e=J.get(c),f=K.get(c);void 0!==e&&void 0!==f||b(61);let g=R||I.has(c)||H.has(c),h=cP(E,c);if(e===f&&!g){if(b2(e)){let a=h.__lexicalTextContent;void 0!==a&&(N+=a,Q+=a)}else{let a=e.getTextContent();Q+=a,N+=a}return h}if(e!==f&&g&&cM(M,F,G,f,"updated"),f.updateDOM(e,h,D)){let a=Z(c,null);return null===d&&b(62),d.replaceChild(a,h),T(c,null),a}if(b2(e)&&b2(f)){let c=f.__indent;(R||c!==e.__indent)&&W(h,c);let d=f.__format;if((R||d!==e.__format)&&X(h,d),g&&(function(c,d,e){O=null,P=null,function(c,d,e){let f=N,g=c.__size,h=d.__size;N="";let i=e.element;if(1===g&&1===h){let b=c.__first,e=d.__first;if(b===e)a(b,i);else{let a=ae(b),c=Z(e,null);try{i.replaceChild(c,a)}catch(d){if("object"==typeof d&&null!=d)throw Error(`${d.toString()} Parent: ${i.tagName}, new child: {tag: ${c.tagName} key: ${e}}, old child: {tag: ${a.tagName}, key: ${b}}.`);throw d}T(b,null)}let f=K.get(e);ba(f)&&null===O&&(O=f.getFormat(),P=f.getStyle())}else{let f=ab(c,J),j=ab(d,K);if(f.length!==g&&b(227),j.length!==h&&b(228),0===g)0!==h&&$(j,d,0,h-1,e);else if(0===h){if(0!==g){let a=null==e.after&&null==e.before&&null==e.element.__lexicalLineBreak;U(f,0,g-1,a?null:i),a&&(i.textContent="")}}else!function(b,c,d,e,f,g){let h=e-1,i=f-1,j,k,l=g.getFirstChild(),m=0,n=0;for(;m<=h&&n<=i;){let b=c[m],e=d[n];if(b===e)l=ad(a(e,g.element)),m++,n++;else{void 0===j&&(j=new Set(c)),void 0===k&&(k=new Set(d));let f=k.has(b),h=j.has(e);if(f)if(h){let b=cP(E,e);b===l?l=ad(a(e,g.element)):(g.withBefore(l).insertChild(b),a(e,g.element)),m++,n++}else Z(e,g.withBefore(l)),n++;else l=ad(ae(b)),T(b,g.element),m++}let f=K.get(e);null!==f&&ba(f)&&null===O&&(O=f.getFormat(),P=f.getStyle())}let o=m>h,p=n>i;if(o&&!p){let a=d[i+1],c=void 0===a?null:E.getElementByKey(a);$(d,b,n,i,g.withBefore(c))}else p&&!o&&U(c,m,h,g.element)}(d,f,j,g,h,e)}cO(d)&&(N+="\n\n"),i.__lexicalTextContent=N,N=f+N}(c,d,d.getDOMSlot(e)),null==O||O===d.__textFormat||S||d.setTextFormat(O),null==P||P===d.__textStyle||S||d.setTextStyle(P)}(e,f,h),b7(f)||f.isInline()||aa(e,f,h)),cO(f)&&(N+="\n\n",Q+="\n\n"),(R||f.__dir!==e.__dir)&&(Y(h,f),b7(f)&&!R))for(let a of f.getChildren())b2(a)&&Y(cP(E,a.getKey()),a)}else{let a=f.getTextContent();if(b5(f)){let a=f.decorate(E,D);null!==a&&ac(c,a)}N+=a,Q+=a}if(!S&&b7(f)&&f.__cachedText!==Q){let a=f.getWritable();a.__cachedText=Q,f=a}return h}("root",null),E=void 0,F=void 0,H=void 0,I=void 0,J=void 0,K=void 0,D=void 0,L=void 0,M=void 0,u=c}catch(b){if(b instanceof Error&&a._onError(b),bJ)throw b;return ce(a,null,i,h),s(a),a._dirtyType=2,bJ=!0,bW(a,k),void(bJ=!1)}finally{t.observe(i,bL),a._updating=r,bG=o,bI=p,bH=q}}h._readOnly||(h._readOnly=!0);let v=a._dirtyLeaves,w=a._dirtyElements,x=a._normalizedNodes,y=a._updateTags,z=a._deferred;n&&(a._dirtyType=0,a._cloneNotNeeded.clear(),a._dirtyLeaves=new Set,a._dirtyElements=new Map,a._normalizedNodes=new Set,a._updateTags=new Set),function(a,b){let c,d=a._decorators,e=a._pendingDecorators||d,f=b._nodeMap;for(c in e)f.has(c)||(e===d&&(e=cD(a)),delete e[c])}(a,h);let A=(j||(e=cU(a)),null);if(a._editable&&null!==A&&(n||null===m||m.dirty||!m.is(l))&&null!==i&&!y.has("skip-dom-selection")){bH=a,bG=h;try{if(null!==t&&t.disconnect(),n||null===m||m.dirty){let b=a._blockCursorElement;null!==b&&cZ(b,a,i),function(a,b,c,d,e,f,g){let h=d.anchorNode,i=d.focusNode,j=d.anchorOffset,k=d.focusOffset,l=document.activeElement;if(e.has("collaboration")&&l!==f||null!==l&&cl(l))return;if(!bk(b))return null!==a&&cm(c,h,i)&&d.removeAllRanges();let m=b.anchor,n=b.focus,o=m.key,p=n.key,q=cP(c,o),r=cP(c,p),s=m.offset,t=n.offset,u=b.format,v=b.style,w=b.isCollapsed(),x=q,y=r,z=!1;if("text"===m.type){x=ct(q);let a=m.getNode();z=a.getFormat()!==u||a.getStyle()!==v}else bk(a)&&"text"===a.anchor.type&&(z=!0);if("text"===n.type&&(y=ct(r)),null!==x&&null!==y&&(w&&(null===a||z||bk(a)&&(a.format!==u||a.style!==v))&&(aD=[u,v,s,o,performance.now()]),j!==s||k!==t||h!==x||i!==y||"Range"===d.type&&w||(null!==l&&f.contains(l)||e.has("skip-selection-focus")||f.focus({preventScroll:!0}),"element"===m.type))){if(function(a,b,c,d,e){try{a.setBaseAndExtent(b,c,d,e)}catch(a){}}(d,x,s,y,t),!e.has("skip-scroll-into-view")&&b.isCollapsed()&&null!==f&&f===document.activeElement){let a=bk(b)&&"element"===b.anchor.type?x.childNodes[s]||null:d.rangeCount>0?d.getRangeAt(0):null;if(null!==a){let b;if(a instanceof Text){let c=document.createRange();c.selectNode(a),b=c.getBoundingClientRect()}else b=a.getBoundingClientRect();!function(a,b,c){let d=cR(c),e=cT(d);if(null===d||null===e)return;let{top:f,bottom:g}=b,h=0,i=0,j=c;for(;null!==j;){let b=j===d.body;if(b)h=0,i=cU(a).innerHeight;else{let a=j.getBoundingClientRect();h=a.top,i=a.bottom}let c=0;if(f<h?c=-(h-f):g>i&&(c=g-i),0!==c)if(b)e.scrollBy(0,c);else{let a=j.scrollTop;j.scrollTop+=c;let b=j.scrollTop-a;f-=b,g-=b}if(b)break;j=cQ(j)}}(c,b,f)}}aA=!0}}(l,m,a,A,y,i)}!function(a,b,c){let e=a._blockCursorElement;if(bk(c)&&c.isCollapsed()&&"element"===c.anchor.type&&b.contains(document.activeElement)){let f=c.anchor,g=f.getNode(),h=f.offset,i=!1,j=null;if(h===g.getChildrenSize())cY(g.getChildAtIndex(h-1))&&(i=!0);else{let b=g.getChildAtIndex(h);if(null!==b&&cY(b)){let c=b.getPreviousSibling();(null===c||cY(c))&&(i=!0,j=a.getElementByKey(b.__key))}}if(i){let c,f,h,i=a.getElementByKey(g.__key);return null===e&&(c=a._config.theme,(f=document.createElement("div")).contentEditable="false",f.setAttribute("data-lexical-cursor","true"),h=c.blockCursor,void 0!==h&&("string"==typeof h&&(h=c.blockCursor=d(h)),void 0!==h&&f.classList.add(...h)),a._blockCursorElement=e=f),b.style.caretColor="transparent",null===j?i.appendChild(e):i.insertBefore(e,j)}}null!==e&&cZ(e,a,b)}(a,i,m)}finally{null!==t&&t.observe(i,bL),bH=q,bG=o}}null!==u&&function(a,b,c,d,e){let f=Array.from(a._listeners.mutation),g=f.length;for(let a=0;a<g;a++){let[g,h]=f[a];for(let a of h){let f=b.get(a);void 0!==f&&g(f,{dirtyLeaves:d,prevEditorState:e,updateTags:c})}}}(a,u,y,v,k),bk(m)||null===m||null!==l&&l.is(m)||a.dispatchCommand(ag,void 0);let B=a._pendingDecorators;null!==B&&(a._decorators=B,a._pendingDecorators=null,bX("decorator",a,!0,B)),f=cE(c||k),f!==(g=cE(h))&&bX("textcontent",a,!0,g),bX("update",a,!0,{dirtyElements:w,dirtyLeaves:v,editorState:h,mutatedNodes:u,normalizedNodes:x,prevEditorState:c||k,tags:y}),function(a,b){if(a._deferred=[],0!==b.length){let c=a._updating;a._updating=!0;try{for(let a=0;a<b.length;a++)b[a]()}finally{a._updating=c}}}(a,z),function(a){let b=a._updates;if(0!==b.length){let c=b.shift();if(c){let[b,d]=c;bZ(a,b,d)}}}(a)}function bX(a,b,c,...d){let e=b._updating;b._updating=c;try{let c=Array.from(b._listeners[a]);for(let a=0;a<c.length;a++)c[a].apply(null,d)}finally{b._updating=e}}function bY(a,c){let d=a._updates,e=c||!1;for(;0!==d.length;){let c=d.shift();if(c){let d,[f,g]=c,h=a._pendingEditorState;void 0!==g&&(d=g.onUpdate,g.skipTransforms&&(e=!0),g.discrete&&(null===h&&b(191),h._flushSync=!0),d&&a._deferred.push(d),bU(a,g.tag)),null==h?bZ(a,f,g):f()}}return e}function bZ(a,c,d){let e=a._updateTags,f,g=!1,h=!1;void 0!==d&&(f=d.onUpdate,bU(a,d.tag),g=d.skipTransforms||!1,h=d.discrete||!1),f&&a._deferred.push(f);let i=a._editorState,j=a._pendingEditorState,k=!1;(null===j||j._readOnly)&&(j=a._pendingEditorState=b8(j||i),k=!0),j._flushSync=h;let l=bG,m=bI,n=bH,o=a._updating;bG=j,bI=!1,a._updating=!0,bH=a;let p=a._headless||null===a.getRootElement();cg=null;try{var q,r;let e,f;k&&(p?null!==i._selection&&(j._selection=i._selection.clone()):j._selection=(q=d&&d.event||null,e=a.getEditorState()._selection,r=cU(a),f=null,bk(e)||null==e?by(e,f,a,q):e.clone()));let h=a._compositionKey;c(),g=bY(a,g),function(a,b){let c=b.getEditorState()._selection,d=a._selection;if(bk(d)){let a,b=d.anchor,e=d.focus;if("text"===b.type&&(a=b.getNode()).selectionTransform(c,d),"text"===e.type){let b=e.getNode();a!==b&&b.selectionTransform(c,d)}}}(j,a),0!==a._dirtyType&&(g?function(a,b){let c=b._dirtyLeaves,d=a._nodeMap;for(let a of c){let b=d.get(a);ba(b)&&b.isAttached()&&b.isSimpleText()&&!b.isUnmergeable()&&B(b)}}(j,a):function(a,b){let c=b._dirtyLeaves,d=b._dirtyElements,e=a._nodeMap,f=cy(),g=new Map,h=c,i=h.size,j=d,k=j.size;for(;i>0||k>0;){if(i>0){for(let a of(b._dirtyLeaves=new Set,h)){let d=e.get(a);ba(d)&&d.isAttached()&&d.isSimpleText()&&!d.isUnmergeable()&&B(d),void 0!==d&&bT(d,f)&&bS(b,d,g),c.add(a)}if((i=(h=b._dirtyLeaves).size)>0){bK++;continue}}for(let a of(b._dirtyLeaves=new Set,b._dirtyElements=new Map,j.delete("root")&&j.set("root",!0),j)){let c=a[0],h=a[1];if(d.set(c,h),!h)continue;let i=e.get(c);void 0!==i&&bT(i,f)&&bS(b,i,g)}i=(h=b._dirtyLeaves).size,k=(j=b._dirtyElements).size,bK++}b._dirtyLeaves=c,b._dirtyElements=d}(j,a),bY(a),function(a,b,c,d){let e=a._nodeMap,f=b._nodeMap,g=[];for(let[a]of d){let b=f.get(a);void 0!==b&&(b.isAttached()||(b2(b)&&function a(b,c,d,e,f,g){let h=b.getFirstChild();for(;null!==h;){let b=h.__key;h.__parent===c&&(b2(h)&&a(h,b,d,e,f,g),d.has(b)||g.delete(b),f.push(b)),h=h.getNextSibling()}}(b,a,e,f,g,d),e.has(a)||d.delete(a),g.push(a)))}for(let a of g)f.delete(a);for(let a of c){let b=f.get(a);void 0===b||b.isAttached()||(e.has(a)||c.delete(a),f.delete(a))}}(i,j,a._dirtyLeaves,a._dirtyElements)),h!==a._compositionKey&&(j._flushSync=!0);let l=j._selection;if(bk(l)){let a=j._nodeMap,c=l.anchor.key,d=l.focus.key;void 0!==a.get(c)&&void 0!==a.get(d)||b(19)}else bm(l)&&0===l._nodes.size&&(j._selection=null)}catch(b){return b instanceof Error&&a._onError(b),a._pendingEditorState=i,a._dirtyType=2,a._cloneNotNeeded.clear(),a._dirtyLeaves=new Set,a._dirtyElements.clear(),void bW(a)}finally{bG=l,bI=m,bH=n,a._updating=o,bK=0}0!==a._dirtyType||a._deferred.length>0||function(a,b){let c=b.getEditorState()._selection,d=a._selection;if(null!==d){if(d.dirty||!d.is(c))return!0}else if(null!==c)return!0;return!1}(j,a)?j._flushSync?(j._flushSync=!1,bW(a)):k&&ck(()=>{bW(a)}):(j._flushSync=!1,k&&(e.clear(),a._deferred=[],a._pendingEditorState=null))}function b$(a,b,c){bH===a&&void 0===c?b():bZ(a,b,c)}class b_{element;before;after;constructor(a,b,c){this.element=a,this.before=b||null,this.after=c||null}withBefore(a){return new b_(this.element,a,this.after)}withAfter(a){return new b_(this.element,this.before,a)}withElement(a){return this.element===a?this:new b_(a,this.before,this.after)}insertChild(a){let c=this.before||this.getManagedLineBreak();return null!==c&&c.parentElement!==this.element&&b(222),this.element.insertBefore(a,c),this}removeChild(a){return a.parentElement!==this.element&&b(223),this.element.removeChild(a),this}replaceChild(a,c){return c.parentElement!==this.element&&b(224),this.element.replaceChild(a,c),this}getFirstChild(){let a=this.after?this.after.nextSibling:this.element.firstChild;return a===this.before||a===this.getManagedLineBreak()?null:a}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(a){null===a?this.removeManagedLineBreak():this.insertManagedLineBreak("decorator"===a&&!1)}removeManagedLineBreak(){let a=this.getManagedLineBreak();if(a){let b=this.element,c="IMG"===a.nodeName?a.nextSibling:null;c&&b.removeChild(c),b.removeChild(a),b.__lexicalLineBreak=void 0}}insertManagedLineBreak(a){let b=this.getManagedLineBreak();if(b){if(a===("IMG"===b.nodeName))return;this.removeManagedLineBreak()}let c=this.element,d=this.before,e=document.createElement("br");if(c.insertBefore(e,d),a){let a=document.createElement("img");a.setAttribute("data-lexical-linebreak","true"),a.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",a.alt="",c.insertBefore(a,e),c.__lexicalLineBreak=a}else c.__lexicalLineBreak=e}getFirstChildOffset(){let a=0;for(let b=this.after;null!==b;b=b.previousSibling)a++;return a}resolveChildIndex(a,b,c,d){if(c===this.element){let b=this.getFirstChildOffset();return[a,Math.min(b+a.getChildrenSize(),Math.max(b,d))]}let e=b0(b,c);e.push(d);let f=b0(b,this.element),g=a.getIndexWithinParent();for(let a=0;a<f.length;a++){let b=e[a],c=f[a];if(void 0===b||b<c)break;if(b>c){g+=1;break}}return[a.getParentOrThrow(),g]}}function b0(a,c){let d=[],e=c;for(;e!==a&&null!==e;e=e.parentNode){let a=0;for(let b=e.previousSibling;null!==b;b=b.previousSibling)a++;d.push(a)}return e!==a&&b(225),d.reverse()}class b1 extends aQ{__first;__last;__size;__format;__style;__indent;__dir;__textFormat;__textStyle;constructor(a){super(a),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(a){super.afterCloneFrom(a),this.__key===a.__key&&(this.__first=a.__first,this.__last=a.__last,this.__size=a.__size),this.__indent=a.__indent,this.__format=a.__format,this.__style=a.__style,this.__dir=a.__dir,this.__textFormat=a.__textFormat,this.__textStyle=a.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){return j[this.getFormat()]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){let a=[],b=this.getFirstChild();for(;null!==b;)a.push(b),b=b.getNextSibling();return a}getChildrenKeys(){let a=[],b=this.getFirstChild();for(;null!==b;)a.push(b.__key),b=b.getNextSibling();return a}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){let a=bQ()._dirtyElements;return null!==a&&a.has(this.__key)}isLastChild(){let a=this.getLatest(),b=this.getParentOrThrow().getLastChild();return null!==b&&b.is(a)}getAllTextNodes(){let a=[],b=this.getFirstChild();for(;null!==b;){if(ba(b)&&a.push(b),b2(b)){let c=b.getAllTextNodes();a.push(...c)}b=b.getNextSibling()}return a}getFirstDescendant(){let a=this.getFirstChild();for(;b2(a);){let b=a.getFirstChild();if(null===b)break;a=b}return a}getLastDescendant(){let a=this.getLastChild();for(;b2(a);){let b=a.getLastChild();if(null===b)break;a=b}return a}getDescendantByIndex(a){let b=this.getChildren(),c=b.length;if(a>=c){let a=b[c-1];return b2(a)&&a.getLastDescendant()||a||null}let d=b[a];return b2(d)&&d.getFirstDescendant()||d||null}getFirstChild(){let a=this.getLatest().__first;return null===a?null:cz(a)}getFirstChildOrThrow(){let a=this.getFirstChild();return null===a&&b(45,this.__key),a}getLastChild(){let a=this.getLatest().__last;return null===a?null:cz(a)}getLastChildOrThrow(){let a=this.getLastChild();return null===a&&b(96,this.__key),a}getChildAtIndex(a){let b,c,d=this.getChildrenSize();if(a<d/2){for(b=this.getFirstChild(),c=0;null!==b&&c<=a;){if(c===a)return b;b=b.getNextSibling(),c++}return null}for(b=this.getLastChild(),c=d-1;null!==b&&c>=a;){if(c===a)return b;b=b.getPreviousSibling(),c--}return null}getTextContent(){let a="",b=this.getChildren(),c=b.length;for(let d=0;d<c;d++){let e=b[d];a+=e.getTextContent(),b2(e)&&d!==c-1&&!e.isInline()&&(a+="\n\n")}return a}getTextContentSize(){let a=0,b=this.getChildren(),c=b.length;for(let d=0;d<c;d++){let e=b[d];a+=e.getTextContentSize(),b2(e)&&d!==c-1&&!e.isInline()&&(a+=2)}return a}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(a){if(""!==a){let b=i[a];return 0!=(this.getFormat()&b)}return!1}hasTextFormat(a){let b=g[a];return 0!=(this.getTextFormat()&b)}getFormatFlags(a,b){return cu(this.getLatest().__textFormat,a,b)}getTextStyle(){return this.getLatest().__textStyle}select(a,b){bN();let c=bz(),d=a,e=b,f=this.getChildrenSize();if(!this.canBeEmpty()){if(0===a&&0===b){let a=this.getFirstChild();if(ba(a)||b2(a))return a.select(0,0)}else if((void 0===a||a===f)&&(void 0===b||b===f)){let a=this.getLastChild();if(ba(a)||b2(a))return a.select()}}void 0===d&&(d=f),void 0===e&&(e=f);let g=this.__key;return bk(c)?(c.anchor.set(g,d,"element"),c.focus.set(g,e,"element"),c.dirty=!0,c):bw(g,d,g,e,"element","element")}selectStart(){let a=this.getFirstDescendant();return a?a.selectStart():this.select()}selectEnd(){let a=this.getLastDescendant();return a?a.selectEnd():this.select()}clear(){let a=this.getWritable();return this.getChildren().forEach(a=>a.remove()),a}append(...a){return this.splice(this.getChildrenSize(),0,a)}setDirection(a){let b=this.getWritable();return b.__dir=a,b}setFormat(a){return this.getWritable().__format=""!==a?i[a]:0,this}setStyle(a){return this.getWritable().__style=a||"",this}setTextFormat(a){let b=this.getWritable();return b.__textFormat=a,b}setTextStyle(a){let b=this.getWritable();return b.__textStyle=a,b}setIndent(a){return this.getWritable().__indent=a,this}splice(a,c,d){aP(this)&&b(324,this.__key,this.__type);let e=this.getChildrenSize(),f=this.getWritable();a+c<=e||b(226,String(a),String(c),String(e));let g=f.__key,h=[],i=[],j=this.getChildAtIndex(a+c),k=null,l=e-c+d.length;if(0!==a)if(a===e)k=this.getLastChild();else{let b=this.getChildAtIndex(a);null!==b&&(k=b.getPreviousSibling())}if(c>0){let a=null===k?this.getFirstChild():k.getNextSibling();for(let d=0;d<c;d++){null===a&&b(100);let c=a.getNextSibling(),d=a.__key;cv(a.getWritable()),i.push(d),a=c}}let m=k;for(let a of d){null!==m&&a.is(m)&&(k=m=m.getPreviousSibling());let c=a.getWritable();c.__parent===g&&l--,cv(c);let d=a.__key;if(null===m)f.__first=d,c.__prev=null;else{let a=m.getWritable();a.__next=d,c.__prev=a.__key}a.__key===g&&b(76),c.__parent=g,h.push(d),m=a}if(a+c===e)null!==m&&(m.getWritable().__next=null,f.__last=m.__key);else if(null!==j){let a=j.getWritable();if(null!==m){let b=m.getWritable();a.__prev=m.__key,b.__next=j.__key}else a.__prev=null}if(f.__size=l,i.length){let a=bz();if(bk(a)){let b=new Set(i),c=new Set(h),{anchor:d,focus:e}=a;b3(d,b,c)&&bD(d,d.getNode(),this,k,j),b3(e,b,c)&&bD(e,e.getNode(),this,k,j),0!==l||this.canBeEmpty()||cV(this)||this.remove()}}return f}getDOMSlot(a){return new b_(a)}exportDOM(a){let{element:b}=super.exportDOM(a);if(c$(b)){let a=this.getIndent();a>0&&(b.style.paddingInlineStart=40*a+"px");let c=this.getDirection();c&&(b.dir=c)}return{element:b}}exportJSON(){let a={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},b=this.getTextFormat(),c=this.getTextStyle();return 0===b&&""===c||cV(this)||this.getChildren().some(ba)||(0!==b&&(a.textFormat=b),""!==c&&(a.textStyle=c)),a}updateFromJSON(a){return super.updateFromJSON(a).setFormat(a.format).setIndent(a.indent).setDirection(a.direction).setTextFormat(a.textFormat||0).setTextStyle(a.textStyle||"")}insertNewAfter(a,b){return null}canIndent(){return!0}collapseAtStart(a){return!1}excludeFromCopy(a){return!1}canReplaceWith(a){return!0}canInsertAfter(a){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(a){return!1}extractWithChild(a,b,c){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(a,b){let c=this.getDOMSlot(a),d=c.getFirstChild();for(let a=this.getFirstChild();a;a=a.getNextSibling()){let e=b.getElementByKey(a.getKey());null!==e&&(null==d?(c.insertChild(e),d=e):d!==e&&c.replaceChild(e,d),d=d.nextSibling)}}}function b2(a){return a instanceof b1}function b3(a,b,c){let d=a.getNode();for(;d;){let a=d.__key;if(b.has(a)&&!c.has(a))return!0;d=d.getParent()}return!1}class b4 extends aQ{decorate(a,b){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function b5(a){return a instanceof b4}class b6 extends b1{__cachedText;static getType(){return"root"}static clone(){return new b6}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){b(51)}getTextContent(){let a=this.__cachedText;return(bM()||0===bQ()._dirtyType)&&null!==a?a:super.getTextContent()}remove(){b(52)}replace(a){b(53)}insertBefore(a){b(54)}insertAfter(a){b(55)}updateDOM(a,b){return!1}splice(a,c,d){for(let a of d)b2(a)||b5(a)||b(282);return super.splice(a,c,d)}static importJSON(a){return cF().updateFromJSON(a)}collapseAtStart(){return!0}}function b7(a){return a instanceof b6}function b8(a){return new ca(new Map(a._nodeMap))}function b9(){return new ca(new Map([["root",new b6]]))}class ca{_nodeMap;_selection;_flushSync;_readOnly;constructor(a,b){this._nodeMap=a,this._selection=b||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(a,b){return bV(b&&b.editor||null,this,a)}clone(a){let b=new ca(this._nodeMap,void 0===a?this._selection:a);return b._readOnly=!0,b}toJSON(){return bV(null,this,()=>({root:function a(c){let d=c.exportJSON(),e=c.constructor;if(d.type!==e.getType()&&b(130,e.name),b2(c)){let f=d.children;Array.isArray(f)||b(59,e.name);let g=c.getChildren();for(let b=0;b<g.length;b++){let c=a(g[b]);f.push(c)}}return d}(cF())}))}}class cb extends b1{static getType(){return"paragraph"}static clone(a){return new cb(a.__key)}createDOM(a){let b=document.createElement("p"),c=cL(a.theme,"paragraph");return void 0!==c&&b.classList.add(...c),b}updateDOM(a,b,c){return!1}static importDOM(){return{p:a=>({conversion:cc,priority:0})}}exportDOM(a){let{element:b}=super.exportDOM(a);if(c$(b)){this.isEmpty()&&b.append(document.createElement("br"));let a=this.getFormatType();a&&(b.style.textAlign=a)}return{element:b}}static importJSON(a){return cd().updateFromJSON(a)}exportJSON(){let a=super.exportJSON();if(void 0===a.textFormat||void 0===a.textStyle){let b=this.getChildren().find(ba);b?(a.textFormat=b.getFormat(),a.textStyle=b.getStyle()):(a.textFormat=this.getTextFormat(),a.textStyle=this.getTextStyle())}return a}insertNewAfter(a,b){let c=cd();c.setTextFormat(a.format),c.setTextStyle(a.style);let d=this.getDirection();return c.setDirection(d),c.setFormat(this.getFormatType()),c.setStyle(this.getStyle()),this.insertAfter(c,b),c}collapseAtStart(){let a=this.getChildren();if(0===a.length||ba(a[0])&&""===a[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function cc(a){var b,c;let d,e=cd();return a.style&&(e.setFormat(a.style.textAlign),b=a,c=e,d=Math.round((parseInt(b.style.paddingInlineStart,10)||0)/40),c.setIndent(d)),{node:e}}function cd(){return cW(new cb)}function ce(a,b,c,d){let e=a._keyToDOMMap;e.clear(),a._editorState=b9(),a._pendingEditorState=d,a._compositionKey=null,a._dirtyType=0,a._cloneNotNeeded.clear(),a._dirtyLeaves=new Set,a._dirtyElements.clear(),a._normalizedNodes=new Set,a._updateTags=new Set,a._updates=[],a._blockCursorElement=null;let f=a._observer;null!==f&&(f.disconnect(),a._observer=null),null!==b&&(b.textContent=""),null!==c&&(c.textContent="",e.set("root",c))}class cf{static version;_headless;_parentEditor;_rootElement;_editorState;_pendingEditorState;_compositionKey;_deferred;_keyToDOMMap;_updates;_updating;_listeners;_commands;_nodes;_decorators;_pendingDecorators;_config;_dirtyType;_cloneNotNeeded;_dirtyLeaves;_dirtyElements;_normalizedNodes;_updateTags;_observer;_key;_onError;_htmlConversions;_window;_editable;_blockCursorElement;_createEditorArgs;constructor(a,b,c,d,e,f,g,h){this._createEditorArgs=h,this._parentEditor=b,this._rootElement=null,this._editorState=a,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=d,this._nodes=c,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5),this._onError=e,this._htmlConversions=f,this._editable=g,this._headless=null!==b&&b._headless,this._window=null,this._blockCursorElement=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(a){let b=this._listeners.update;return b.add(a),()=>{b.delete(a)}}registerEditableListener(a){let b=this._listeners.editable;return b.add(a),()=>{b.delete(a)}}registerDecoratorListener(a){let b=this._listeners.decorator;return b.add(a),()=>{b.delete(a)}}registerTextContentListener(a){let b=this._listeners.textcontent;return b.add(a),()=>{b.delete(a)}}registerRootListener(a){let b=this._listeners.root;return a(this._rootElement,null),b.add(a),()=>{a(null,this._rootElement),b.delete(a)}}registerCommand(a,c,d){void 0===d&&b(35);let e=this._commands;e.has(a)||e.set(a,[new Set,new Set,new Set,new Set,new Set]);let f=e.get(a);void 0===f&&b(36,String(a));let g=f[d];return g.add(c),()=>{g.delete(c),f.every(a=>0===a.size)&&e.delete(a)}}registerMutationListener(a,b,c){let d=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(a)).klass,e=this._listeners.mutation,f=e.get(b);void 0===f&&(f=new Set,e.set(b,f)),f.add(d);let g=c&&c.skipInitialization;return void 0!==g&&g||this.initializeMutationListener(b,d),()=>{f.delete(d),0===f.size&&e.delete(b)}}getRegisteredNode(a){let c=this._nodes.get(a.getType());return void 0===c&&b(37,a.name),c}resolveRegisteredNodeAfterReplacements(a){for(;a.replaceWithKlass;)a=this.getRegisteredNode(a.replaceWithKlass);return a}initializeMutationListener(a,b){let c=this._editorState,d=c4(c).get(b.getType());if(!d)return;let e=new Map;for(let a of d.keys())e.set(a,"created");e.size>0&&a(e,{dirtyLeaves:new Set,prevEditorState:c,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(a,b){let c=this.getRegisteredNode(a);return c.transforms.add(b),c}registerNodeTransform(a,b){let c=this.registerNodeTransformToKlass(a,b),d=[c],e=c.replaceWithKlass;if(null!=e){let a=this.registerNodeTransformToKlass(e,b);d.push(a)}return function(a,b){let c=c4(a.getEditorState()),d=[];for(let a of b){let b=c.get(a);b&&d.push(b)}0!==d.length&&a.update(()=>{for(let a of d)for(let b of a.keys()){let a=cz(b);a&&a.markDirty()}},null===a._pendingEditorState?{tag:aR}:void 0)}(this,d.map(a=>a.klass.getType())),()=>{d.forEach(a=>a.transforms.delete(b))}}hasNode(a){return this._nodes.has(a.getType())}hasNodes(a){return a.every(this.hasNode.bind(this))}dispatchCommand(a,b){return cN(this,a,b)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(a){let c=this._rootElement;if(a!==c){let d=cL(this._config.theme,"root"),e=this._pendingEditorState||this._editorState;if(this._rootElement=a,ce(this,c,a,e),null!==c&&(this._config.disableEvents||function(a){let c=ay.get(a);if(void 0===c)return aM();let d=az.get(c);if(void 0===d)return aM();let e=d-1;e>=0||b(164),ay.delete(a),az.set(c,e),0===e&&c.removeEventListener("selectionchange",aJ);let f=cp(a);cn(f)?(!function(a){if(null!==a._parentEditor){let b=cJ(a),c=b[b.length-1]._key;aI.get(c)===a&&aI.delete(c)}else aI.delete(a._key)}(f),a.__lexicalEditor=null):f&&b(198);let g=aH(a);for(let a=0;a<g.length;a++)g[a]();a.__lexicalEventHandles=[]}(c),null!=d&&c.classList.remove(...d)),null!==a){let b=cT(a),c=a.style;c.userSelect="text",c.whiteSpace="pre-wrap",c.wordBreak="break-word",a.setAttribute("data-lexical-editor","true"),this._window=b,this._dirtyType=2,s(this),this._updateTags.add(aR),bW(this),this._config.disableEvents||function(a,b){let c=a.ownerDocument;ay.set(a,c);let d=az.get(c)??0;d<1&&c.addEventListener("selectionchange",aJ),az.set(c,d+1),a.__lexicalEditor=b;let e=aH(a);for(let c=0;c<ax.length;c++){let[d,f]=ax[c],g="function"==typeof f?a=>{aL(a)||(aK(a),(b.isEditable()||"click"===d)&&f(a,b))}:a=>{if(aL(a))return;aK(a);let c=b.isEditable();switch(d){case"cut":return c&&cN(b,at,a);case"copy":return cN(b,as,a);case"paste":return c&&cN(b,am,a);case"dragstart":return c&&cN(b,ap,a);case"dragover":return c&&cN(b,aq,a);case"dragend":return c&&cN(b,ar,a);case"focus":return c&&cN(b,au,a);case"blur":return c&&cN(b,av,a);case"drop":return c&&cN(b,ao,a)}};a.addEventListener(d,g),e.push(()=>{a.removeEventListener(d,g)})}}(a,this),null!=d&&a.classList.add(...d)}else this._window=null,this._updateTags.add(aR),bW(this);bX("root",this,!1,a,c)}}getElementByKey(a){return this._keyToDOMMap.get(a)||null}getEditorState(){return this._editorState}setEditorState(a,c){let d;a.isEmpty()&&b(38);let e=a;e._readOnly&&((e=b8(a))._selection=a._selection?a._selection.clone():null),null!==(d=this._observer)&&r(this,d.takeRecords(),d);let f=this._pendingEditorState,g=this._updateTags,h=void 0!==c?c.tag:null;null===f||f.isEmpty()||(null!=h&&g.add(h),bW(this)),this._pendingEditorState=e,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=h&&g.add(h),this._updating||bW(this)}parseEditorState(a,c){return function(a,c,d){let e=b9(),f=bG,g=bI,h=bH,i=c._dirtyElements,j=c._dirtyLeaves,k=c._cloneNotNeeded,l=c._dirtyType;c._dirtyElements=new Map,c._dirtyLeaves=new Set,c._cloneNotNeeded=new Set,c._dirtyType=0,bG=e,bI=!1,bH=c,cg=null;try{let f=c._nodes;(function a(c,d){let e=c.type,f=d.get(e);void 0===f&&b(17,e);let g=f.klass;c.type!==g.getType()&&b(18,g.name);let h=g.importJSON(c),i=c.children;if(b2(h)&&Array.isArray(i))for(let b=0;b<i.length;b++){let c=a(i[b],d);h.append(c)}return h})(a.root,f),d&&d(),e._readOnly=!0}catch(a){a instanceof Error&&c._onError(a)}finally{c._dirtyElements=i,c._dirtyLeaves=j,c._cloneNotNeeded=k,c._dirtyType=l,bG=f,bI=g,bH=h}return e}("string"==typeof a?JSON.parse(a):a,this,c)}read(a){return bW(this),this.getEditorState().read(a,{editor:this})}update(a,b){this._updating?this._updates.push([a,b]):bZ(this,a,b)}focus(a,b={}){let c=this._rootElement;null!==c&&(c.setAttribute("autocapitalize","off"),b$(this,()=>{var d,e;let f=bz(),g=cF();null!==f?f.dirty||cH(f.clone()):0!==g.getChildrenSize()&&("rootStart"===b.defaultSelection?g.selectStart():g.selectEnd()),d="focus",bN(),bQ()._updateTags.add(d),e=()=>{c.removeAttribute("autocapitalize"),a&&a()},bN(),bQ()._deferred.push(e)}),null===this._pendingEditorState&&c.removeAttribute("autocapitalize"))}blur(){var a;let b=this._rootElement;null!==b&&b.blur();let c=(a=this._window,null);null!==c&&c.removeAllRanges()}isEditable(){return this._editable}setEditable(a){this._editable!==a&&(this._editable=a,bX("editable",this,!0,a))}toJSON(){return{editorState:this._editorState.toJSON()}}}cf.version="0.39.0+prod.esm";let cg=null,ch=1;function ci(a,c){let d=cj(a,c);return void 0===d&&b(30,c),d}function cj(a,b){return a._nodes.get(b)}let ck="function"==typeof queueMicrotask?queueMicrotask:a=>{Promise.resolve().then(a)};function cl(a){let b=document.activeElement;if(!c$(b))return!1;let c=b.nodeName;return b5(cC(a))&&("INPUT"===c||"TEXTAREA"===c||"true"===b.contentEditable&&null==cp(b))}function cm(a,b,c){let d=a.getRootElement();try{return null!==d&&d.contains(b)&&d.contains(c)&&null!==b&&!cl(b)&&co(b)===a}catch(a){return!1}}function cn(a){return a instanceof cf}function co(a){let b=a;for(;null!=b;){let a=cp(b);if(cn(a))return a;b=cQ(b)}return null}function cp(a){return a?a.__lexicalEditor:null}function cq(a){return be(a)||a.isToken()}function cr(a){return cq(a)||a.isSegmented()}function cs(a){return c_(a)&&3===a.nodeType}function ct(a){let b=a;for(;null!=b;){if(cs(b))return b;b=b.firstChild}return null}function cu(a,b,c){let d=g[b];if(null!==c&&(a&d)==(c&d))return a;let e=a^d;return"subscript"===b?e&=~g.superscript:"superscript"===b?e&=~g.subscript:"lowercase"===b?(e&=~g.uppercase,e&=~g.capitalize):"uppercase"===b?(e&=~g.lowercase,e&=~g.capitalize):"capitalize"===b&&(e&=~g.lowercase,e&=~g.uppercase),e}function cv(a){let b=a.getParent();if(null!==b){let c=a.getWritable(),d=b.getWritable(),e=a.getPreviousSibling(),f=a.getNextSibling(),g=null!==f?f.__key:null,h=null!==e?e.__key:null,i=null!==e?e.getWritable():null,j=null!==f?f.getWritable():null;null===e&&(d.__first=g),null===f&&(d.__last=h),null!==i&&(i.__next=g),null!==j&&(j.__prev=h),c.__prev=null,c.__next=null,c.__parent=null,d.__size--}}function cw(a){bO(),aP(a)&&b(323,a.__key,a.__type);let c=a.getLatest(),d=c.__parent,e=bP(),f=bQ(),g=e._nodeMap,h=f._dirtyElements;null!==d&&function(a,b,c){let d=a;for(;null!==d;){if(c.has(d))return;let a=b.get(d);if(void 0===a)break;c.set(d,!1),d=a.__parent}}(d,g,h);let i=c.__key;f._dirtyType=1,b2(a)?h.set(i,!0):f._dirtyLeaves.add(i)}function cx(a){bN();let b=bQ(),c=b._compositionKey;if(a!==c){if(b._compositionKey=a,null!==c){let a=cz(c);null!==a&&a.getWritable()}if(null!==a){let b=cz(a);null!==b&&b.getWritable()}}}function cy(){return bM()?null:bQ()._compositionKey}function cz(a,b){let c=(b||bP())._nodeMap.get(a);return void 0===c?null:c}function cA(a,b){let c=cB(a,bQ());return void 0!==c?cz(c,b):null}function cB(a,b){return a[`__lexicalKey_${b._key}`]}function cC(a,b){let c=a;for(;null!=c;){let a=cA(c,b);if(null!==a)return a;c=cQ(c)}return null}function cD(a){let b=Object.assign({},a._decorators);return a._pendingDecorators=b,b}function cE(a){return a.read(()=>cF().getTextContent())}function cF(){return cG(bP())}function cG(a){return a._nodeMap.get("root")}function cH(a){bN();let b=bP();null!==a&&(a.dirty=!0,a.setCachedNodes(null)),b._selection=a}function cI(a){let b=bQ(),c=function(a,b){let c=a;for(;null!=c;){let a=cB(c,b);if(void 0!==a)return a;c=cQ(c)}return null}(a,b);return null===c?a===b.getRootElement()?cz("root"):null:cz(c)}function cJ(a){let b=[],c=a;for(;null!==c;)b.push(c),c=c._parentEditor;return b}function cK(a,b,c){if(a.setTextContent(b),bk(c)){let b=a.getKey();for(let d of["anchor","focus"]){let e=c[d];"text"===e.type&&e.key===b&&(e.offset=dm(a,e.offset,"clamp"))}}}function cL(a,b){void 0===a.__lexicalClassNameCache&&(a.__lexicalClassNameCache={});let c=a.__lexicalClassNameCache,e=c[b];if(void 0!==e)return e;let f=a[b];if("string"==typeof f){let a=d(f);return c[b]=a,a}return f}function cM(a,c,d,e,f){if(0===d.size)return;let g=e.__type,h=e.__key,i=c.get(g);void 0===i&&b(33,g);let j=i.klass,k=a.get(j);void 0===k&&(k=new Map,a.set(j,k));let l=k.get(h),m="destroyed"===l&&"created"===f;(void 0===l||m)&&k.set(h,m?"updated":f)}function cN(a,b,c){return function(a,b,c){let d=cJ(a);for(let e=4;e>=0;e--)for(let f=0;f<d.length;f++){let g=d[f],h=g._commands.get(b);if(void 0!==h){let b=h[e];if(void 0!==b){let d=Array.from(b),e=d.length,f=!1;if(b$(g,()=>{for(let b=0;b<e;b++)if(d[b](c,a))return void(f=!0)}),f)return f}}}return!1}(a,b,c)}function cO(a){return!b7(a)&&!a.isLastChild()&&!a.isInline()}function cP(a,c){let d=a._keyToDOMMap.get(c);return void 0===d&&b(75,c),d}function cQ(a){var b;let c=a.assignedSlot||a.parentElement;return c_(b=c)&&11===b.nodeType?c.host:c}function cR(a){return c_(a)&&9===a.nodeType?a:c$(a)?a.ownerDocument:null}function cS(a,b){let c=a.getParent();for(;null!==c;){if(c.is(b))return!0;c=c.getParent()}return!1}function cT(a){let b=cR(a);return b?b.defaultView:null}function cU(a){let c=a._window;return null===c&&b(78),c}function cV(a){return b7(a)||b2(a)&&a.isShadowRoot()}function cW(a){let c=bQ(),d=a.getType(),e=cj(c,d);void 0===e&&b(200,a.constructor.name,d);let{replace:f,replaceWithKlass:g}=e;if(null!==f){let c=f(a),e=c.constructor;return null!==g?c instanceof g||b(201,g.name,g.getType(),e.name,e.getType(),a.constructor.name,d):c instanceof a.constructor&&e!==a.constructor||b(202,e.name,e.getType(),a.constructor.name,d),c.__key===a.__key&&b(203,a.constructor.name,d,e.name,e.getType()),c}return a}function cX(a,c){!b7(a.getParent())||b2(c)||b5(c)||b(99)}function cY(a){return(b5(a)||b2(a)&&!a.canBeEmpty())&&!a.isInline()}function cZ(a,b,c){c.style.removeProperty("caret-color"),b._blockCursorElement=null;let d=a.parentElement;null!==d&&d.removeChild(a)}function c$(a){return c_(a)&&1===a.nodeType}function c_(a){return"object"==typeof a&&null!==a&&"nodeType"in a&&"number"==typeof a.nodeType}function c0(a){let b=RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==a.nodeName.match(b)}function c1(a){if(b5(a)&&!a.isInline())return!0;if(!b2(a)||cV(a))return!1;let b=a.getFirstChild(),c=null===b||aV(b)||ba(b)||b.isInline();return!a.isInline()&&!1!==a.canBeEmpty()&&c}let c2=new WeakMap,c3=new Map;function c4(a){if(!a._readOnly&&a.isEmpty())return c3;a._readOnly||b(192);let c=c2.get(a);return c||(c=function(a){let b=new Map;for(let[c,d]of a._nodeMap){let a=d.__type,e=b.get(a);e||(e=new Map,b.set(a,e)),e.set(c,d)}return b}(a),c2.set(a,c)),c}function c5(a,b){return Object.prototype.hasOwnProperty.call(a,b)&&a[b]!==aQ[b]}let c6=(a,b)=>{let c=a;for(;null!=c&&!b7(c);){if(b(c))return c;c=c.getParent()}return null},c7={next:"previous",previous:"next"};class c8{origin;constructor(a){this.origin=a}[Symbol.iterator](){return du({hasNext:df,initial:this.getAdjacentCaret(),map:a=>a,step:a=>a.getAdjacentCaret()})}getAdjacentCaret(){return dk(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return dk(this.origin,this.direction)}remove(){let a=this.getNodeAtCaret();return a&&a.remove(),this}replaceOrInsert(a,b){let c=this.getNodeAtCaret();return a.is(this.origin)||a.is(c)||(null===c?this.insert(a):c.replace(a,b)),this}splice(a,c,d="next"){let e=d===this.direction?c:Array.from(c).reverse(),f=this,g=this.getParentAtCaret(),h=new Map;for(let b=f.getAdjacentCaret();null!==b&&h.size<a;b=b.getAdjacentCaret()){let a=b.origin.getWritable();h.set(a.getKey(),a)}for(let a of e){if(h.size>0){let c=f.getNodeAtCaret();if(c)if(h.delete(c.getKey()),h.delete(a.getKey()),c.is(a)||f.origin.is(a));else{let b=a.getParent();b&&b.is(g)&&a.remove(),c.replace(a)}else null===c&&b(263,Array.from(h).join(" "))}else f.insert(a);f=dk(a,this.direction)}for(let a of h.values())a.remove();return this}}class c9 extends c8{type="child";getLatest(){let a=this.origin.getLatest();return a===this.origin?this:dn(a,this.direction)}getParentCaret(a="root"){return dk(db(this.getParentAtCaret(),a),this.direction)}getFlipped(){let a=c7[this.direction];return dk(this.getNodeAtCaret(),a)||dn(this.origin,a)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(a){return a instanceof c9&&this.direction===a.direction&&this.origin.is(a.origin)}isSamePointCaret(a){return this.isSameNodeCaret(a)}}let da={root:b7,shadowRoot:cV};function db(a,b="root"){return da[b](a)?null:a}class dc extends c8{type="sibling";getLatest(){let a=this.origin.getLatest();return a===this.origin?this:dk(a,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return b2(this.origin)?dn(this.origin,this.direction):null}getParentCaret(a="root"){return dk(db(this.getParentAtCaret(),a),this.direction)}getFlipped(){let a=c7[this.direction];return dk(this.getNodeAtCaret(),a)||dn(this.origin.getParentOrThrow(),a)}isSamePointCaret(a){return a instanceof dc&&this.direction===a.direction&&this.origin.is(a.origin)}isSameNodeCaret(a){return(a instanceof dc||a instanceof dd)&&this.direction===a.direction&&this.origin.is(a.origin)}}class dd extends c8{type="text";offset;constructor(a,b){super(a),this.offset=b}getLatest(){let a=this.origin.getLatest();return a===this.origin?this:dl(a,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(a="root"){return dk(db(this.getParentAtCaret(),a),this.direction)}getFlipped(){return dl(this.origin,c7[this.direction],this.offset)}isSamePointCaret(a){return a instanceof dd&&this.direction===a.direction&&this.origin.is(a.origin)&&this.offset===a.offset}isSameNodeCaret(a){return(a instanceof dc||a instanceof dd)&&this.direction===a.direction&&this.origin.is(a.origin)}getSiblingCaret(){return dk(this.origin,this.direction)}}function de(a){return a instanceof dd}function df(a){return a instanceof dc}function dg(a){return a instanceof c9}let dh={next:class extends dd{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(a){return this.origin.insertAfter(a),this}},previous:class extends dd{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(a){return this.origin.insertBefore(a),this}}},di={next:class extends dc{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(a){return this.origin.insertAfter(a),this}},previous:class extends dc{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(a){return this.origin.insertBefore(a),this}}},dj={next:class extends c9{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(a){return this.origin.splice(0,0,[a]),this}},previous:class extends c9{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(a){return this.origin.splice(this.origin.getChildrenSize(),0,[a]),this}}};function dk(a,b){return a?new di[b](a):null}function dl(a,b,c){return a?new dh[b](a,dm(a,c)):null}function dm(a,b,d="error"){let e=a.getTextContentSize(),f="next"===b?e:"previous"===b?0:b;return(f<0||f>e)&&("clamp"!==d&&c(284,String(b),String(e),a.getKey()),f=f<0?0:e),f}function dn(a,b){return b2(a)?new dj[b](a):null}function dp(a){var b;return a&&((b=a.getAdjacentCaret())&&b.getChildCaret()||b)}class dq{type="node-caret-range";direction;anchor;focus;constructor(a,b,c){this.anchor=a,this.focus=b,this.direction=c}getLatest(){let a=this.anchor.getLatest(),b=this.focus.getLatest();return a===this.anchor&&b===this.focus?this:new dq(a,b,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){let a=a=>{let b=this[a].getLatest();return de(b)?function(a,b){let{direction:c,origin:d}=a;return new dr(a,dm(d,"focus"===b?c7[c]:c)-a.offset)}(b,a):null},b=a("anchor"),c=a("focus");if(b&&c){let{caret:a}=b,{caret:d}=c;if(a.isSameNodeCaret(d))return[new dr(a,d.offset-a.offset),null]}return[b,c]}iterNodeCarets(a="root"){let b=de(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),c=this.focus.getLatest(),d=de(c),e=b=>b.isSameNodeCaret(c)?null:dp(b)||b.getParentCaret(a);return du({hasNext:a=>null!==a&&!(d&&c.isSameNodeCaret(a)),initial:b.isSameNodeCaret(c)?null:e(b),map:a=>a,step:e})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class dr{type="slice";caret;distance;constructor(a,b){this.caret=a,this.distance=b}getSliceIndices(){let{distance:a,caret:{offset:b}}=this,c=b+a;return c<b?[c,b]:[b,c]}getTextContent(){let[a,b]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(a,b)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){let{caret:{origin:a,direction:b}}=this,[c,d]=this.getSliceIndices(),e=a.getTextContent();return dl(a.setTextContent(e.slice(0,c)+e.slice(d)),b,c)}}function ds(a){return dt(a,dk(cF(),a.direction))}function dt(a,c){return a.direction!==c.direction&&b(265),new dq(a,c,a.direction)}function du(a){let{initial:b,hasNext:c,step:d,map:e}=a,f=b;return{[Symbol.iterator](){return this},next(){if(!c(f))return{done:!0,value:void 0};let a={done:!1,value:e(f)};return f=d(f),a}}}function dv(a,c){let d=dy(a.origin,c.origin);switch(null===d&&b(275,a.origin.getKey(),c.origin.getKey()),d.type){case"same":{let b="text"===a.type,d="text"===c.type;return b&&d?Math.sign(a.offset-c.offset):a.type===c.type?0:b?-1:d?1:"child"===a.type?-1:1}case"ancestor":return"child"===a.type?-1:1;case"descendant":return"child"===c.type?1:-1;case"branch":return dw(d)}}function dw(a){let{a:b,b:c}=a,d=b.__key,e=c.__key,f=b,g=c;for(;f&&g;f=f.getNextSibling(),g=g.getNextSibling()){if(f.__key===e)return -1;if(g.__key===d)return 1}return null===f?1:-1}function dx(a){return b2(a)?[a.getLatest(),null]:[a.getParent(),a.getLatest()]}function dy(a,c){if(a.is(c))return{commonAncestor:a,type:"same"};let d=new Map;for(let[b,c]=dx(a);b;c=b,b=b.getParent())d.set(b,c);for(let[e,f]=dx(c);e;f=e,e=e.getParent()){let g=d.get(e);if(void 0!==g)return null===g?(e.is(a)||b(276),{commonAncestor:e,type:"ancestor"}):null===f?(e.is(c)||b(277),{commonAncestor:e,type:"descendant"}):((b2(g)||g.is(a))&&(b2(f)||f.is(c))&&e.is(g.getParent())&&e.is(f.getParent())||b(278),{a:g,b:f,commonAncestor:e,type:"branch"})}return null}function dz(a,c){var d;let e,{type:f,key:g,offset:h}=a,i=(null===(e=cz(d=a.key))&&b(63,d),e);return"text"===f?(ba(i)||b(266,i.getType(),g),dl(i,c,h)):(b2(i)||b(267,i.getType(),g),function(a,b,c){let d=dn(a,"next");for(let a=0;a<b;a++){let a=d.getAdjacentCaret();if(null===a)break;d=a}return dH(d,c)}(i,a.offset,c))}function dA(a,c){let{origin:d,direction:e}=c,f="next"===e;de(c)?a.set(d.getKey(),c.offset,"text"):df(c)?ba(d)?a.set(d.getKey(),dm(d,e),"text"):a.set(d.getParentOrThrow().getKey(),d.getIndexWithinParent()+ +!!f,"element"):(dg(c)&&b2(d)||b(268),a.set(d.getKey(),f?0:d.getChildrenSize(),"element"))}function dB(a,b){dA(a.anchor,b.anchor),dA(a.focus,b.focus)}function dC(a){let{anchor:b,focus:c}=a,d=dz(b,"next"),e=dz(c,"next"),f=0>=dv(d,e)?"next":"previous";return dt(dH(d,f),dH(e,f))}function dD(a){let{direction:b,origin:c}=a,d=dk(c,c7[b]).getNodeAtCaret();return d?dk(d,b):dn(c.getParentOrThrow(),b)}function dE(a,b="root"){let c=[a];for(let d=dg(a)?a.getParentCaret(b):a.getSiblingCaret();null!==d;d=d.getParentCaret(b))c.push(dD(d));return c}function dF(a){return!!a&&a.origin.isAttached()}function dG(a){let b=function(a){let b=a;for(;dg(b);){let a=dp(b);if(!dg(a))break;b=a}return b}(a.getLatest()),{direction:c}=b;if(ba(b.origin))return de(b)?b:dl(b.origin,c,c);let d=b.getAdjacentCaret();return df(d)&&ba(d.origin)?dl(d.origin,c,c7[c]):b}function dH(a,b){return a.direction===b?a:a.getFlipped()}function dI(a,b){return a.direction===b?a:dt(dH(a.focus,b),dH(a.anchor,b))}function dJ(...a){return()=>{for(let b=a.length-1;b>=0;b--)a[b]();a.length=0}}a.s(["mergeRegister",()=>dJ],423201)}];

//# sourceMappingURL=_59b8c0fa._.js.map